const F4=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))g(b);new MutationObserver(b=>{for(const E of b)if(E.type==="childList")for(const N of E.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&g(N)}).observe(document,{childList:!0,subtree:!0});function m(b){const E={};return b.integrity&&(E.integrity=b.integrity),b.referrerpolicy&&(E.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?E.credentials="include":b.crossorigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function g(b){if(b.ep)return;b.ep=!0;const E=m(b);fetch(b.href,E)}};F4();function pg(l,u){const m=Object.create(null),g=l.split(",");for(let b=0;b<g.length;b++)m[g[b]]=!0;return u?b=>!!m[b.toLowerCase()]:b=>!!m[b]}const L4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",M4=pg(L4);function z_(l){return!!l||l===""}function gg(l){if(Xe(l)){const u={};for(let m=0;m<l.length;m++){const g=l[m],b=cn(g)?H4(g):gg(g);if(b)for(const E in b)u[E]=b[E]}return u}else{if(cn(l))return l;if(un(l))return l}}const U4=/;(?![^(]*\))/g,z4=/:(.+)/;function H4(l){const u={};return l.split(U4).forEach(m=>{if(m){const g=m.split(z4);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function hg(l){let u="";if(cn(l))u=l;else if(Xe(l))for(let m=0;m<l.length;m++){const g=hg(l[m]);g&&(u+=g+" ")}else if(un(l))for(const m in l)l[m]&&(u+=m+" ");return u.trim()}const V4=l=>cn(l)?l:l==null?"":Xe(l)||un(l)&&(l.toString===j_||!Ye(l.toString))?JSON.stringify(l,H_,2):String(l),H_=(l,u)=>u&&u.__v_isRef?H_(l,u.value):Bi(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((m,[g,b])=>(m[`${g} =>`]=b,m),{})}:V_(u)?{[`Set(${u.size})`]:[...u.values()]}:un(u)&&!Xe(u)&&!q_(u)?String(u):u,xt={},Di=[],vs=()=>{},W4=()=>!1,j4=/^on[^a-z]/,Ou=l=>j4.test(l),bg=l=>l.startsWith("onUpdate:"),Nn=Object.assign,Cg=(l,u)=>{const m=l.indexOf(u);m>-1&&l.splice(m,1)},q4=Object.prototype.hasOwnProperty,rt=(l,u)=>q4.call(l,u),Xe=Array.isArray,Bi=l=>Du(l)==="[object Map]",V_=l=>Du(l)==="[object Set]",Ye=l=>typeof l=="function",cn=l=>typeof l=="string",yg=l=>typeof l=="symbol",un=l=>l!==null&&typeof l=="object",W_=l=>un(l)&&Ye(l.then)&&Ye(l.catch),j_=Object.prototype.toString,Du=l=>j_.call(l),K4=l=>Du(l).slice(8,-1),q_=l=>Du(l)==="[object Object]",vg=l=>cn(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,wu=pg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bu=l=>{const u=Object.create(null);return m=>u[m]||(u[m]=l(m))},G4=/-(\w)/g,Ks=Bu(l=>l.replace(G4,(u,m)=>m?m.toUpperCase():"")),Y4=/\B([A-Z])/g,Li=Bu(l=>l.replace(Y4,"-$1").toLowerCase()),Iu=Bu(l=>l.charAt(0).toUpperCase()+l.slice(1)),qp=Bu(l=>l?`on${Iu(l)}`:""),rl=(l,u)=>!Object.is(l,u),Kp=(l,u)=>{for(let m=0;m<l.length;m++)l[m](u)},ku=(l,u,m)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,value:m})},X4=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let p_;const Q4=()=>p_||(p_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Vs;class Z4{constructor(u=!1){this.active=!0,this.effects=[],this.cleanups=[],!u&&Vs&&(this.parent=Vs,this.index=(Vs.scopes||(Vs.scopes=[])).push(this)-1)}run(u){if(this.active){const m=Vs;try{return Vs=this,u()}finally{Vs=m}}}on(){Vs=this}off(){Vs=this.parent}stop(u){if(this.active){let m,g;for(m=0,g=this.effects.length;m<g;m++)this.effects[m].stop();for(m=0,g=this.cleanups.length;m<g;m++)this.cleanups[m]();if(this.scopes)for(m=0,g=this.scopes.length;m<g;m++)this.scopes[m].stop(!0);if(this.parent&&!u){const b=this.parent.scopes.pop();b&&b!==this&&(this.parent.scopes[this.index]=b,b.index=this.index)}this.active=!1}}}function J4(l,u=Vs){u&&u.active&&u.effects.push(l)}const Eg=l=>{const u=new Set(l);return u.w=0,u.n=0,u},K_=l=>(l.w&jo)>0,G_=l=>(l.n&jo)>0,e9=({deps:l})=>{if(l.length)for(let u=0;u<l.length;u++)l[u].w|=jo},t9=l=>{const{deps:u}=l;if(u.length){let m=0;for(let g=0;g<u.length;g++){const b=u[g];K_(b)&&!G_(b)?b.delete(l):u[m++]=b,b.w&=~jo,b.n&=~jo}u.length=m}},eg=new WeakMap;let Ja=0,jo=1;const tg=30;let Cs;const Or=Symbol(""),ng=Symbol("");class wg{constructor(u,m=null,g){this.fn=u,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,J4(this,g)}run(){if(!this.active)return this.fn();let u=Cs,m=Vo;for(;u;){if(u===this)return;u=u.parent}try{return this.parent=Cs,Cs=this,Vo=!0,jo=1<<++Ja,Ja<=tg?e9(this):g_(this),this.fn()}finally{Ja<=tg&&t9(this),jo=1<<--Ja,Cs=this.parent,Vo=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Cs===this?this.deferStop=!0:this.active&&(g_(this),this.onStop&&this.onStop(),this.active=!1)}}function g_(l){const{deps:u}=l;if(u.length){for(let m=0;m<u.length;m++)u[m].delete(l);u.length=0}}let Vo=!0;const Y_=[];function Mi(){Y_.push(Vo),Vo=!1}function Ui(){const l=Y_.pop();Vo=l===void 0?!0:l}function jn(l,u,m){if(Vo&&Cs){let g=eg.get(l);g||eg.set(l,g=new Map);let b=g.get(m);b||g.set(m,b=Eg()),X_(b)}}function X_(l,u){let m=!1;Ja<=tg?G_(l)||(l.n|=jo,m=!K_(l)):m=!l.has(Cs),m&&(l.add(Cs),Cs.deps.push(l))}function go(l,u,m,g,b,E){const N=eg.get(l);if(!N)return;let D=[];if(u==="clear")D=[...N.values()];else if(m==="length"&&Xe(l))N.forEach((L,Z)=>{(Z==="length"||Z>=g)&&D.push(L)});else switch(m!==void 0&&D.push(N.get(m)),u){case"add":Xe(l)?vg(m)&&D.push(N.get("length")):(D.push(N.get(Or)),Bi(l)&&D.push(N.get(ng)));break;case"delete":Xe(l)||(D.push(N.get(Or)),Bi(l)&&D.push(N.get(ng)));break;case"set":Bi(l)&&D.push(N.get(Or));break}if(D.length===1)D[0]&&sg(D[0]);else{const L=[];for(const Z of D)Z&&L.push(...Z);sg(Eg(L))}}function sg(l,u){const m=Xe(l)?l:[...l];for(const g of m)g.computed&&h_(g);for(const g of m)g.computed||h_(g)}function h_(l,u){(l!==Cs||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const n9=pg("__proto__,__v_isRef,__isVue"),Q_=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(yg)),s9=xg(),o9=xg(!1,!0),r9=xg(!0),b_=i9();function i9(){const l={};return["includes","indexOf","lastIndexOf"].forEach(u=>{l[u]=function(...m){const g=dt(this);for(let E=0,N=this.length;E<N;E++)jn(g,"get",E+"");const b=g[u](...m);return b===-1||b===!1?g[u](...m.map(dt)):b}}),["push","pop","shift","unshift","splice"].forEach(u=>{l[u]=function(...m){Mi();const g=dt(this)[u].apply(this,m);return Ui(),g}}),l}function xg(l=!1,u=!1){return function(g,b,E){if(b==="__v_isReactive")return!l;if(b==="__v_isReadonly")return l;if(b==="__v_isShallow")return u;if(b==="__v_raw"&&E===(l?u?w9:nk:u?tk:ek).get(g))return g;const N=Xe(g);if(!l&&N&&rt(b_,b))return Reflect.get(b_,b,E);const D=Reflect.get(g,b,E);return(yg(b)?Q_.has(b):n9(b))||(l||jn(g,"get",b),u)?D:bn(D)?N&&vg(b)?D:D.value:un(D)?l?sk(D):Fu(D):D}}const a9=Z_(),l9=Z_(!0);function Z_(l=!1){return function(m,g,b,E){let N=m[g];if(il(N)&&bn(N)&&!bn(b))return!1;if(!l&&!il(b)&&(og(b)||(b=dt(b),N=dt(N)),!Xe(m)&&bn(N)&&!bn(b)))return N.value=b,!0;const D=Xe(m)&&vg(g)?Number(g)<m.length:rt(m,g),L=Reflect.set(m,g,b,E);return m===dt(E)&&(D?rl(b,N)&&go(m,"set",g,b):go(m,"add",g,b)),L}}function c9(l,u){const m=rt(l,u);l[u];const g=Reflect.deleteProperty(l,u);return g&&m&&go(l,"delete",u,void 0),g}function u9(l,u){const m=Reflect.has(l,u);return(!yg(u)||!Q_.has(u))&&jn(l,"has",u),m}function f9(l){return jn(l,"iterate",Xe(l)?"length":Or),Reflect.ownKeys(l)}const J_={get:s9,set:a9,deleteProperty:c9,has:u9,ownKeys:f9},d9={get:r9,set(l,u){return!0},deleteProperty(l,u){return!0}},m9=Nn({},J_,{get:o9,set:l9}),Sg=l=>l,$u=l=>Reflect.getPrototypeOf(l);function bu(l,u,m=!1,g=!1){l=l.__v_raw;const b=dt(l),E=dt(u);m||(u!==E&&jn(b,"get",u),jn(b,"get",E));const{has:N}=$u(b),D=g?Sg:m?Ng:al;if(N.call(b,u))return D(l.get(u));if(N.call(b,E))return D(l.get(E));l!==b&&l.get(u)}function Cu(l,u=!1){const m=this.__v_raw,g=dt(m),b=dt(l);return u||(l!==b&&jn(g,"has",l),jn(g,"has",b)),l===b?m.has(l):m.has(l)||m.has(b)}function yu(l,u=!1){return l=l.__v_raw,!u&&jn(dt(l),"iterate",Or),Reflect.get(l,"size",l)}function C_(l){l=dt(l);const u=dt(this);return $u(u).has.call(u,l)||(u.add(l),go(u,"add",l,l)),this}function y_(l,u){u=dt(u);const m=dt(this),{has:g,get:b}=$u(m);let E=g.call(m,l);E||(l=dt(l),E=g.call(m,l));const N=b.call(m,l);return m.set(l,u),E?rl(u,N)&&go(m,"set",l,u):go(m,"add",l,u),this}function v_(l){const u=dt(this),{has:m,get:g}=$u(u);let b=m.call(u,l);b||(l=dt(l),b=m.call(u,l)),g&&g.call(u,l);const E=u.delete(l);return b&&go(u,"delete",l,void 0),E}function E_(){const l=dt(this),u=l.size!==0,m=l.clear();return u&&go(l,"clear",void 0,void 0),m}function vu(l,u){return function(g,b){const E=this,N=E.__v_raw,D=dt(N),L=u?Sg:l?Ng:al;return!l&&jn(D,"iterate",Or),N.forEach((Z,oe)=>g.call(b,L(Z),L(oe),E))}}function Eu(l,u,m){return function(...g){const b=this.__v_raw,E=dt(b),N=Bi(E),D=l==="entries"||l===Symbol.iterator&&N,L=l==="keys"&&N,Z=b[l](...g),oe=m?Sg:u?Ng:al;return!u&&jn(E,"iterate",L?ng:Or),{next(){const{value:ye,done:Ne}=Z.next();return Ne?{value:ye,done:Ne}:{value:D?[oe(ye[0]),oe(ye[1])]:oe(ye),done:Ne}},[Symbol.iterator](){return this}}}}function Uo(l){return function(...u){return l==="delete"?!1:this}}function p9(){const l={get(E){return bu(this,E)},get size(){return yu(this)},has:Cu,add:C_,set:y_,delete:v_,clear:E_,forEach:vu(!1,!1)},u={get(E){return bu(this,E,!1,!0)},get size(){return yu(this)},has:Cu,add:C_,set:y_,delete:v_,clear:E_,forEach:vu(!1,!0)},m={get(E){return bu(this,E,!0)},get size(){return yu(this,!0)},has(E){return Cu.call(this,E,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:vu(!0,!1)},g={get(E){return bu(this,E,!0,!0)},get size(){return yu(this,!0)},has(E){return Cu.call(this,E,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:vu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=Eu(E,!1,!1),m[E]=Eu(E,!0,!1),u[E]=Eu(E,!1,!0),g[E]=Eu(E,!0,!0)}),[l,m,u,g]}const[g9,h9,b9,C9]=p9();function _g(l,u){const m=u?l?C9:b9:l?h9:g9;return(g,b,E)=>b==="__v_isReactive"?!l:b==="__v_isReadonly"?l:b==="__v_raw"?g:Reflect.get(rt(m,b)&&b in g?m:g,b,E)}const y9={get:_g(!1,!1)},v9={get:_g(!1,!0)},E9={get:_g(!0,!1)},ek=new WeakMap,tk=new WeakMap,nk=new WeakMap,w9=new WeakMap;function x9(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S9(l){return l.__v_skip||!Object.isExtensible(l)?0:x9(K4(l))}function Fu(l){return il(l)?l:kg(l,!1,J_,y9,ek)}function _9(l){return kg(l,!1,m9,v9,tk)}function sk(l){return kg(l,!0,d9,E9,nk)}function kg(l,u,m,g,b){if(!un(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const E=b.get(l);if(E)return E;const N=S9(l);if(N===0)return l;const D=new Proxy(l,N===2?g:m);return b.set(l,D),D}function Ii(l){return il(l)?Ii(l.__v_raw):!!(l&&l.__v_isReactive)}function il(l){return!!(l&&l.__v_isReadonly)}function og(l){return!!(l&&l.__v_isShallow)}function ok(l){return Ii(l)||il(l)}function dt(l){const u=l&&l.__v_raw;return u?dt(u):l}function rk(l){return ku(l,"__v_skip",!0),l}const al=l=>un(l)?Fu(l):l,Ng=l=>un(l)?sk(l):l;function ik(l){Vo&&Cs&&(l=dt(l),X_(l.dep||(l.dep=Eg())))}function ak(l,u){l=dt(l),l.dep&&sg(l.dep)}function bn(l){return!!(l&&l.__v_isRef===!0)}function k9(l){return N9(l,!1)}function N9(l,u){return bn(l)?l:new A9(l,u)}class A9{constructor(u,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?u:dt(u),this._value=m?u:al(u)}get value(){return ik(this),this._value}set value(u){u=this.__v_isShallow?u:dt(u),rl(u,this._rawValue)&&(this._rawValue=u,this._value=this.__v_isShallow?u:al(u),ak(this))}}function T9(l){return bn(l)?l.value:l}const R9={get:(l,u,m)=>T9(Reflect.get(l,u,m)),set:(l,u,m,g)=>{const b=l[u];return bn(b)&&!bn(m)?(b.value=m,!0):Reflect.set(l,u,m,g)}};function lk(l){return Ii(l)?l:new Proxy(l,R9)}class P9{constructor(u,m,g,b){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new wg(u,()=>{this._dirty||(this._dirty=!0,ak(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!b,this.__v_isReadonly=g}get value(){const u=dt(this);return ik(u),(u._dirty||!u._cacheable)&&(u._dirty=!1,u._value=u.effect.run()),u._value}set value(u){this._setter(u)}}function O9(l,u,m=!1){let g,b;const E=Ye(l);return E?(g=l,b=vs):(g=l.get,b=l.set),new P9(g,b,E||!b,m)}function Wo(l,u,m,g){let b;try{b=g?l(...g):l()}catch(E){Lu(E,u,m)}return b}function Es(l,u,m,g){if(Ye(l)){const E=Wo(l,u,m,g);return E&&W_(E)&&E.catch(N=>{Lu(N,u,m)}),E}const b=[];for(let E=0;E<l.length;E++)b.push(Es(l[E],u,m,g));return b}function Lu(l,u,m,g=!0){const b=u?u.vnode:null;if(u){let E=u.parent;const N=u.proxy,D=m;for(;E;){const Z=E.ec;if(Z){for(let oe=0;oe<Z.length;oe++)if(Z[oe](l,N,D)===!1)return}E=E.parent}const L=u.appContext.config.errorHandler;if(L){Wo(L,null,10,[l,N,D]);return}}D9(l,m,b,g)}function D9(l,u,m,g=!0){console.error(l)}let Nu=!1,rg=!1;const Wn=[];let mo=0;const tl=[];let el=null,Ri=0;const nl=[];let zo=null,Pi=0;const ck=Promise.resolve();let Ag=null,ig=null;function xu(l){const u=Ag||ck;return l?u.then(this?l.bind(this):l):u}function B9(l){let u=mo+1,m=Wn.length;for(;u<m;){const g=u+m>>>1;ll(Wn[g])<l?u=g+1:m=g}return u}function uk(l){(!Wn.length||!Wn.includes(l,Nu&&l.allowRecurse?mo+1:mo))&&l!==ig&&(l.id==null?Wn.push(l):Wn.splice(B9(l.id),0,l),fk())}function fk(){!Nu&&!rg&&(rg=!0,Ag=ck.then(pk))}function I9(l){const u=Wn.indexOf(l);u>mo&&Wn.splice(u,1)}function dk(l,u,m,g){Xe(l)?m.push(...l):(!u||!u.includes(l,l.allowRecurse?g+1:g))&&m.push(l),fk()}function $9(l){dk(l,el,tl,Ri)}function F9(l){dk(l,zo,nl,Pi)}function Mu(l,u=null){if(tl.length){for(ig=u,el=[...new Set(tl)],tl.length=0,Ri=0;Ri<el.length;Ri++)el[Ri]();el=null,Ri=0,ig=null,Mu(l,u)}}function mk(l){if(Mu(),nl.length){const u=[...new Set(nl)];if(nl.length=0,zo){zo.push(...u);return}for(zo=u,zo.sort((m,g)=>ll(m)-ll(g)),Pi=0;Pi<zo.length;Pi++)zo[Pi]();zo=null,Pi=0}}const ll=l=>l.id==null?1/0:l.id;function pk(l){rg=!1,Nu=!0,Mu(l),Wn.sort((m,g)=>ll(m)-ll(g));const u=vs;try{for(mo=0;mo<Wn.length;mo++){const m=Wn[mo];m&&m.active!==!1&&Wo(m,null,14)}}finally{mo=0,Wn.length=0,mk(),Nu=!1,Ag=null,(Wn.length||tl.length||nl.length)&&pk(l)}}function L9(l,u,...m){if(l.isUnmounted)return;const g=l.vnode.props||xt;let b=m;const E=u.startsWith("update:"),N=E&&u.slice(7);if(N&&N in g){const oe=`${N==="modelValue"?"model":N}Modifiers`,{number:ye,trim:Ne}=g[oe]||xt;Ne&&(b=m.map(Me=>Me.trim())),ye&&(b=m.map(X4))}let D,L=g[D=qp(u)]||g[D=qp(Ks(u))];!L&&E&&(L=g[D=qp(Li(u))]),L&&Es(L,l,6,b);const Z=g[D+"Once"];if(Z){if(!l.emitted)l.emitted={};else if(l.emitted[D])return;l.emitted[D]=!0,Es(Z,l,6,b)}}function gk(l,u,m=!1){const g=u.emitsCache,b=g.get(l);if(b!==void 0)return b;const E=l.emits;let N={},D=!1;if(!Ye(l)){const L=Z=>{const oe=gk(Z,u,!0);oe&&(D=!0,Nn(N,oe))};!m&&u.mixins.length&&u.mixins.forEach(L),l.extends&&L(l.extends),l.mixins&&l.mixins.forEach(L)}return!E&&!D?(g.set(l,null),null):(Xe(E)?E.forEach(L=>N[L]=null):Nn(N,E),g.set(l,N),N)}function Uu(l,u){return!l||!Ou(u)?!1:(u=u.slice(2).replace(/Once$/,""),rt(l,u[0].toLowerCase()+u.slice(1))||rt(l,Li(u))||rt(l,u))}let qs=null,hk=null;function Au(l){const u=qs;return qs=l,hk=l&&l.type.__scopeId||null,u}function M9(l,u=qs,m){if(!u||l._n)return l;const g=(...b)=>{g._d&&P_(-1);const E=Au(u),N=l(...b);return Au(E),g._d&&P_(1),N};return g._n=!0,g._c=!0,g._d=!0,g}function Gp(l){const{type:u,vnode:m,proxy:g,withProxy:b,props:E,propsOptions:[N],slots:D,attrs:L,emit:Z,render:oe,renderCache:ye,data:Ne,setupState:Me,ctx:mt,inheritAttrs:Ct}=l;let et,lt;const Dn=Au(l);try{if(m.shapeFlag&4){const ft=b||g;et=js(oe.call(ft,ft,ye,E,Me,Ne,mt)),lt=L}else{const ft=u;et=js(ft.length>1?ft(E,{attrs:L,slots:D,emit:Z}):ft(E,null)),lt=u.props?L:U9(L)}}catch(ft){ol.length=0,Lu(ft,l,1),et=po(Br)}let me=et;if(lt&&Ct!==!1){const ft=Object.keys(lt),{shapeFlag:Gs}=me;ft.length&&Gs&7&&(N&&ft.some(bg)&&(lt=z9(lt,N)),me=$i(me,lt))}return m.dirs&&(me=$i(me),me.dirs=me.dirs?me.dirs.concat(m.dirs):m.dirs),m.transition&&(me.transition=m.transition),et=me,Au(Dn),et}const U9=l=>{let u;for(const m in l)(m==="class"||m==="style"||Ou(m))&&((u||(u={}))[m]=l[m]);return u},z9=(l,u)=>{const m={};for(const g in l)(!bg(g)||!(g.slice(9)in u))&&(m[g]=l[g]);return m};function H9(l,u,m){const{props:g,children:b,component:E}=l,{props:N,children:D,patchFlag:L}=u,Z=E.emitsOptions;if(u.dirs||u.transition)return!0;if(m&&L>=0){if(L&1024)return!0;if(L&16)return g?w_(g,N,Z):!!N;if(L&8){const oe=u.dynamicProps;for(let ye=0;ye<oe.length;ye++){const Ne=oe[ye];if(N[Ne]!==g[Ne]&&!Uu(Z,Ne))return!0}}}else return(b||D)&&(!D||!D.$stable)?!0:g===N?!1:g?N?w_(g,N,Z):!0:!!N;return!1}function w_(l,u,m){const g=Object.keys(u);if(g.length!==Object.keys(l).length)return!0;for(let b=0;b<g.length;b++){const E=g[b];if(u[E]!==l[E]&&!Uu(m,E))return!0}return!1}function V9({vnode:l,parent:u},m){for(;u&&u.subTree===l;)(l=u.vnode).el=m,u=u.parent}const W9=l=>l.__isSuspense;function j9(l,u){u&&u.pendingBranch?Xe(l)?u.effects.push(...l):u.effects.push(l):F9(l)}function q9(l,u){if(ln){let m=ln.provides;const g=ln.parent&&ln.parent.provides;g===m&&(m=ln.provides=Object.create(g)),m[l]=u}}function Yp(l,u,m=!1){const g=ln||qs;if(g){const b=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(b&&l in b)return b[l];if(arguments.length>1)return m&&Ye(u)?u.call(g.proxy):u}}const x_={};function sl(l,u,m){return bk(l,u,m)}function bk(l,u,{immediate:m,deep:g,flush:b,onTrack:E,onTrigger:N}=xt){const D=ln;let L,Z=!1,oe=!1;if(bn(l)?(L=()=>l.value,Z=og(l)):Ii(l)?(L=()=>l,g=!0):Xe(l)?(oe=!0,Z=l.some(lt=>Ii(lt)||og(lt)),L=()=>l.map(lt=>{if(bn(lt))return lt.value;if(Ii(lt))return Oi(lt);if(Ye(lt))return Wo(lt,D,2)})):Ye(l)?u?L=()=>Wo(l,D,2):L=()=>{if(!(D&&D.isUnmounted))return ye&&ye(),Es(l,D,3,[Ne])}:L=vs,u&&g){const lt=L;L=()=>Oi(lt())}let ye,Ne=lt=>{ye=et.onStop=()=>{Wo(lt,D,4)}};if(ul)return Ne=vs,u?m&&Es(u,D,3,[L(),oe?[]:void 0,Ne]):L(),vs;let Me=oe?[]:x_;const mt=()=>{if(!!et.active)if(u){const lt=et.run();(g||Z||(oe?lt.some((Dn,me)=>rl(Dn,Me[me])):rl(lt,Me)))&&(ye&&ye(),Es(u,D,3,[lt,Me===x_?void 0:Me,Ne]),Me=lt)}else et.run()};mt.allowRecurse=!!u;let Ct;b==="sync"?Ct=mt:b==="post"?Ct=()=>On(mt,D&&D.suspense):Ct=()=>$9(mt);const et=new wg(L,Ct);return u?m?mt():Me=et.run():b==="post"?On(et.run.bind(et),D&&D.suspense):et.run(),()=>{et.stop(),D&&D.scope&&Cg(D.scope.effects,et)}}function K9(l,u,m){const g=this.proxy,b=cn(l)?l.includes(".")?Ck(g,l):()=>g[l]:l.bind(g,g);let E;Ye(u)?E=u:(E=u.handler,m=u);const N=ln;Fi(this);const D=bk(b,E.bind(g),m);return N?Fi(N):Dr(),D}function Ck(l,u){const m=u.split(".");return()=>{let g=l;for(let b=0;b<m.length&&g;b++)g=g[m[b]];return g}}function Oi(l,u){if(!un(l)||l.__v_skip||(u=u||new Set,u.has(l)))return l;if(u.add(l),bn(l))Oi(l.value,u);else if(Xe(l))for(let m=0;m<l.length;m++)Oi(l[m],u);else if(V_(l)||Bi(l))l.forEach(m=>{Oi(m,u)});else if(q_(l))for(const m in l)Oi(l[m],u);return l}function yk(l){return Ye(l)?{setup:l,name:l.name}:l}const Su=l=>!!l.type.__asyncLoader,vk=l=>l.type.__isKeepAlive;function G9(l,u){Ek(l,"a",u)}function Y9(l,u){Ek(l,"da",u)}function Ek(l,u,m=ln){const g=l.__wdc||(l.__wdc=()=>{let b=m;for(;b;){if(b.isDeactivated)return;b=b.parent}return l()});if(zu(u,g,m),m){let b=m.parent;for(;b&&b.parent;)vk(b.parent.vnode)&&X9(g,u,m,b),b=b.parent}}function X9(l,u,m,g){const b=zu(u,l,g,!0);Sk(()=>{Cg(g[u],b)},m)}function zu(l,u,m=ln,g=!1){if(m){const b=m[l]||(m[l]=[]),E=u.__weh||(u.__weh=(...N)=>{if(m.isUnmounted)return;Mi(),Fi(m);const D=Es(u,m,l,N);return Dr(),Ui(),D});return g?b.unshift(E):b.push(E),E}}const ho=l=>(u,m=ln)=>(!ul||l==="sp")&&zu(l,u,m),Q9=ho("bm"),wk=ho("m"),Z9=ho("bu"),J9=ho("u"),xk=ho("bum"),Sk=ho("um"),eq=ho("sp"),tq=ho("rtg"),nq=ho("rtc");function sq(l,u=ln){zu("ec",l,u)}function Ar(l,u,m,g){const b=l.dirs,E=u&&u.dirs;for(let N=0;N<b.length;N++){const D=b[N];E&&(D.oldValue=E[N].value);let L=D.dir[g];L&&(Mi(),Es(L,m,8,[l.el,D,l,u]),Ui())}}const _k="components";function oq(l,u){return iq(_k,l,!0,u)||l}const rq=Symbol();function iq(l,u,m=!0,g=!1){const b=qs||ln;if(b){const E=b.type;if(l===_k){const D=Lq(E,!1);if(D&&(D===u||D===Ks(u)||D===Iu(Ks(u))))return E}const N=S_(b[l]||E[l],u)||S_(b.appContext[l],u);return!N&&g?E:N}}function S_(l,u){return l&&(l[u]||l[Ks(u)]||l[Iu(Ks(u))])}const ag=l=>l?Mk(l)?Og(l)||l.proxy:ag(l.parent):null,Tu=Nn(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>ag(l.parent),$root:l=>ag(l.root),$emit:l=>l.emit,$options:l=>Nk(l),$forceUpdate:l=>l.f||(l.f=()=>uk(l.update)),$nextTick:l=>l.n||(l.n=xu.bind(l.proxy)),$watch:l=>K9.bind(l)}),aq={get({_:l},u){const{ctx:m,setupState:g,data:b,props:E,accessCache:N,type:D,appContext:L}=l;let Z;if(u[0]!=="$"){const Me=N[u];if(Me!==void 0)switch(Me){case 1:return g[u];case 2:return b[u];case 4:return m[u];case 3:return E[u]}else{if(g!==xt&&rt(g,u))return N[u]=1,g[u];if(b!==xt&&rt(b,u))return N[u]=2,b[u];if((Z=l.propsOptions[0])&&rt(Z,u))return N[u]=3,E[u];if(m!==xt&&rt(m,u))return N[u]=4,m[u];lg&&(N[u]=0)}}const oe=Tu[u];let ye,Ne;if(oe)return u==="$attrs"&&jn(l,"get",u),oe(l);if((ye=D.__cssModules)&&(ye=ye[u]))return ye;if(m!==xt&&rt(m,u))return N[u]=4,m[u];if(Ne=L.config.globalProperties,rt(Ne,u))return Ne[u]},set({_:l},u,m){const{data:g,setupState:b,ctx:E}=l;return b!==xt&&rt(b,u)?(b[u]=m,!0):g!==xt&&rt(g,u)?(g[u]=m,!0):rt(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(E[u]=m,!0)},has({_:{data:l,setupState:u,accessCache:m,ctx:g,appContext:b,propsOptions:E}},N){let D;return!!m[N]||l!==xt&&rt(l,N)||u!==xt&&rt(u,N)||(D=E[0])&&rt(D,N)||rt(g,N)||rt(Tu,N)||rt(b.config.globalProperties,N)},defineProperty(l,u,m){return m.get!=null?l._.accessCache[u]=0:rt(m,"value")&&this.set(l,u,m.value,null),Reflect.defineProperty(l,u,m)}};let lg=!0;function lq(l){const u=Nk(l),m=l.proxy,g=l.ctx;lg=!1,u.beforeCreate&&__(u.beforeCreate,l,"bc");const{data:b,computed:E,methods:N,watch:D,provide:L,inject:Z,created:oe,beforeMount:ye,mounted:Ne,beforeUpdate:Me,updated:mt,activated:Ct,deactivated:et,beforeDestroy:lt,beforeUnmount:Dn,destroyed:me,unmounted:ft,render:Gs,renderTracked:Nt,renderTriggered:Ys,errorCaptured:qn,serverPrefetch:At,expose:It,inheritAttrs:ke,components:Ge,directives:Cn,filters:Xs}=u;if(Z&&cq(Z,g,null,l.appContext.config.unwrapInjectedRef),N)for(const St in N){const K=N[St];Ye(K)&&(g[St]=K.bind(m))}if(b){const St=b.call(m,m);un(St)&&(l.data=Fu(St))}if(lg=!0,E)for(const St in E){const K=E[St],wt=Ye(K)?K.bind(m,m):Ye(K.get)?K.get.bind(m,m):vs,zi=!Ye(K)&&Ye(K.set)?K.set.bind(m):vs,re=zk({get:wt,set:zi});Object.defineProperty(g,St,{enumerable:!0,configurable:!0,get:()=>re.value,set:ws=>re.value=ws})}if(D)for(const St in D)kk(D[St],g,m,St);if(L){const St=Ye(L)?L.call(m):L;Reflect.ownKeys(St).forEach(K=>{q9(K,St[K])})}oe&&__(oe,l,"c");function Ot(St,K){Xe(K)?K.forEach(wt=>St(wt.bind(m))):K&&St(K.bind(m))}if(Ot(Q9,ye),Ot(wk,Ne),Ot(Z9,Me),Ot(J9,mt),Ot(G9,Ct),Ot(Y9,et),Ot(sq,qn),Ot(nq,Nt),Ot(tq,Ys),Ot(xk,Dn),Ot(Sk,ft),Ot(eq,At),Xe(It))if(It.length){const St=l.exposed||(l.exposed={});It.forEach(K=>{Object.defineProperty(St,K,{get:()=>m[K],set:wt=>m[K]=wt})})}else l.exposed||(l.exposed={});Gs&&l.render===vs&&(l.render=Gs),ke!=null&&(l.inheritAttrs=ke),Ge&&(l.components=Ge),Cn&&(l.directives=Cn)}function cq(l,u,m=vs,g=!1){Xe(l)&&(l=cg(l));for(const b in l){const E=l[b];let N;un(E)?"default"in E?N=Yp(E.from||b,E.default,!0):N=Yp(E.from||b):N=Yp(E),bn(N)&&g?Object.defineProperty(u,b,{enumerable:!0,configurable:!0,get:()=>N.value,set:D=>N.value=D}):u[b]=N}}function __(l,u,m){Es(Xe(l)?l.map(g=>g.bind(u.proxy)):l.bind(u.proxy),u,m)}function kk(l,u,m,g){const b=g.includes(".")?Ck(m,g):()=>m[g];if(cn(l)){const E=u[l];Ye(E)&&sl(b,E)}else if(Ye(l))sl(b,l.bind(m));else if(un(l))if(Xe(l))l.forEach(E=>kk(E,u,m,g));else{const E=Ye(l.handler)?l.handler.bind(m):u[l.handler];Ye(E)&&sl(b,E,l)}}function Nk(l){const u=l.type,{mixins:m,extends:g}=u,{mixins:b,optionsCache:E,config:{optionMergeStrategies:N}}=l.appContext,D=E.get(u);let L;return D?L=D:!b.length&&!m&&!g?L=u:(L={},b.length&&b.forEach(Z=>Ru(L,Z,N,!0)),Ru(L,u,N)),E.set(u,L),L}function Ru(l,u,m,g=!1){const{mixins:b,extends:E}=u;E&&Ru(l,E,m,!0),b&&b.forEach(N=>Ru(l,N,m,!0));for(const N in u)if(!(g&&N==="expose")){const D=uq[N]||m&&m[N];l[N]=D?D(l[N],u[N]):u[N]}return l}const uq={data:k_,props:Rr,emits:Rr,methods:Rr,computed:Rr,beforeCreate:kn,created:kn,beforeMount:kn,mounted:kn,beforeUpdate:kn,updated:kn,beforeDestroy:kn,beforeUnmount:kn,destroyed:kn,unmounted:kn,activated:kn,deactivated:kn,errorCaptured:kn,serverPrefetch:kn,components:Rr,directives:Rr,watch:dq,provide:k_,inject:fq};function k_(l,u){return u?l?function(){return Nn(Ye(l)?l.call(this,this):l,Ye(u)?u.call(this,this):u)}:u:l}function fq(l,u){return Rr(cg(l),cg(u))}function cg(l){if(Xe(l)){const u={};for(let m=0;m<l.length;m++)u[l[m]]=l[m];return u}return l}function kn(l,u){return l?[...new Set([].concat(l,u))]:u}function Rr(l,u){return l?Nn(Nn(Object.create(null),l),u):u}function dq(l,u){if(!l)return u;if(!u)return l;const m=Nn(Object.create(null),l);for(const g in u)m[g]=kn(l[g],u[g]);return m}function mq(l,u,m,g=!1){const b={},E={};ku(E,Hu,1),l.propsDefaults=Object.create(null),Ak(l,u,b,E);for(const N in l.propsOptions[0])N in b||(b[N]=void 0);m?l.props=g?b:_9(b):l.type.props?l.props=b:l.props=E,l.attrs=E}function pq(l,u,m,g){const{props:b,attrs:E,vnode:{patchFlag:N}}=l,D=dt(b),[L]=l.propsOptions;let Z=!1;if((g||N>0)&&!(N&16)){if(N&8){const oe=l.vnode.dynamicProps;for(let ye=0;ye<oe.length;ye++){let Ne=oe[ye];if(Uu(l.emitsOptions,Ne))continue;const Me=u[Ne];if(L)if(rt(E,Ne))Me!==E[Ne]&&(E[Ne]=Me,Z=!0);else{const mt=Ks(Ne);b[mt]=ug(L,D,mt,Me,l,!1)}else Me!==E[Ne]&&(E[Ne]=Me,Z=!0)}}}else{Ak(l,u,b,E)&&(Z=!0);let oe;for(const ye in D)(!u||!rt(u,ye)&&((oe=Li(ye))===ye||!rt(u,oe)))&&(L?m&&(m[ye]!==void 0||m[oe]!==void 0)&&(b[ye]=ug(L,D,ye,void 0,l,!0)):delete b[ye]);if(E!==D)for(const ye in E)(!u||!rt(u,ye)&&!0)&&(delete E[ye],Z=!0)}Z&&go(l,"set","$attrs")}function Ak(l,u,m,g){const[b,E]=l.propsOptions;let N=!1,D;if(u)for(let L in u){if(wu(L))continue;const Z=u[L];let oe;b&&rt(b,oe=Ks(L))?!E||!E.includes(oe)?m[oe]=Z:(D||(D={}))[oe]=Z:Uu(l.emitsOptions,L)||(!(L in g)||Z!==g[L])&&(g[L]=Z,N=!0)}if(E){const L=dt(m),Z=D||xt;for(let oe=0;oe<E.length;oe++){const ye=E[oe];m[ye]=ug(b,L,ye,Z[ye],l,!rt(Z,ye))}}return N}function ug(l,u,m,g,b,E){const N=l[m];if(N!=null){const D=rt(N,"default");if(D&&g===void 0){const L=N.default;if(N.type!==Function&&Ye(L)){const{propsDefaults:Z}=b;m in Z?g=Z[m]:(Fi(b),g=Z[m]=L.call(null,u),Dr())}else g=L}N[0]&&(E&&!D?g=!1:N[1]&&(g===""||g===Li(m))&&(g=!0))}return g}function Tk(l,u,m=!1){const g=u.propsCache,b=g.get(l);if(b)return b;const E=l.props,N={},D=[];let L=!1;if(!Ye(l)){const oe=ye=>{L=!0;const[Ne,Me]=Tk(ye,u,!0);Nn(N,Ne),Me&&D.push(...Me)};!m&&u.mixins.length&&u.mixins.forEach(oe),l.extends&&oe(l.extends),l.mixins&&l.mixins.forEach(oe)}if(!E&&!L)return g.set(l,Di),Di;if(Xe(E))for(let oe=0;oe<E.length;oe++){const ye=Ks(E[oe]);N_(ye)&&(N[ye]=xt)}else if(E)for(const oe in E){const ye=Ks(oe);if(N_(ye)){const Ne=E[oe],Me=N[ye]=Xe(Ne)||Ye(Ne)?{type:Ne}:Ne;if(Me){const mt=R_(Boolean,Me.type),Ct=R_(String,Me.type);Me[0]=mt>-1,Me[1]=Ct<0||mt<Ct,(mt>-1||rt(Me,"default"))&&D.push(ye)}}}const Z=[N,D];return g.set(l,Z),Z}function N_(l){return l[0]!=="$"}function A_(l){const u=l&&l.toString().match(/^\s*function (\w+)/);return u?u[1]:l===null?"null":""}function T_(l,u){return A_(l)===A_(u)}function R_(l,u){return Xe(u)?u.findIndex(m=>T_(m,l)):Ye(u)&&T_(u,l)?0:-1}const Rk=l=>l[0]==="_"||l==="$stable",Tg=l=>Xe(l)?l.map(js):[js(l)],gq=(l,u,m)=>{if(u._n)return u;const g=M9((...b)=>Tg(u(...b)),m);return g._c=!1,g},Pk=(l,u,m)=>{const g=l._ctx;for(const b in l){if(Rk(b))continue;const E=l[b];if(Ye(E))u[b]=gq(b,E,g);else if(E!=null){const N=Tg(E);u[b]=()=>N}}},Ok=(l,u)=>{const m=Tg(u);l.slots.default=()=>m},hq=(l,u)=>{if(l.vnode.shapeFlag&32){const m=u._;m?(l.slots=dt(u),ku(u,"_",m)):Pk(u,l.slots={})}else l.slots={},u&&Ok(l,u);ku(l.slots,Hu,1)},bq=(l,u,m)=>{const{vnode:g,slots:b}=l;let E=!0,N=xt;if(g.shapeFlag&32){const D=u._;D?m&&D===1?E=!1:(Nn(b,u),!m&&D===1&&delete b._):(E=!u.$stable,Pk(u,b)),N=u}else u&&(Ok(l,u),N={default:1});if(E)for(const D in b)!Rk(D)&&!(D in N)&&delete b[D]};function Dk(){return{app:null,config:{isNativeTag:W4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cq=0;function yq(l,u){return function(g,b=null){Ye(g)||(g=Object.assign({},g)),b!=null&&!un(b)&&(b=null);const E=Dk(),N=new Set;let D=!1;const L=E.app={_uid:Cq++,_component:g,_props:b,_container:null,_context:E,_instance:null,version:Uq,get config(){return E.config},set config(Z){},use(Z,...oe){return N.has(Z)||(Z&&Ye(Z.install)?(N.add(Z),Z.install(L,...oe)):Ye(Z)&&(N.add(Z),Z(L,...oe))),L},mixin(Z){return E.mixins.includes(Z)||E.mixins.push(Z),L},component(Z,oe){return oe?(E.components[Z]=oe,L):E.components[Z]},directive(Z,oe){return oe?(E.directives[Z]=oe,L):E.directives[Z]},mount(Z,oe,ye){if(!D){const Ne=po(g,b);return Ne.appContext=E,oe&&u?u(Ne,Z):l(Ne,Z,ye),D=!0,L._container=Z,Z.__vue_app__=L,Og(Ne.component)||Ne.component.proxy}},unmount(){D&&(l(null,L._container),delete L._container.__vue_app__)},provide(Z,oe){return E.provides[Z]=oe,L}};return L}}function fg(l,u,m,g,b=!1){if(Xe(l)){l.forEach((Ne,Me)=>fg(Ne,u&&(Xe(u)?u[Me]:u),m,g,b));return}if(Su(g)&&!b)return;const E=g.shapeFlag&4?Og(g.component)||g.component.proxy:g.el,N=b?null:E,{i:D,r:L}=l,Z=u&&u.r,oe=D.refs===xt?D.refs={}:D.refs,ye=D.setupState;if(Z!=null&&Z!==L&&(cn(Z)?(oe[Z]=null,rt(ye,Z)&&(ye[Z]=null)):bn(Z)&&(Z.value=null)),Ye(L))Wo(L,D,12,[N,oe]);else{const Ne=cn(L),Me=bn(L);if(Ne||Me){const mt=()=>{if(l.f){const Ct=Ne?oe[L]:L.value;b?Xe(Ct)&&Cg(Ct,E):Xe(Ct)?Ct.includes(E)||Ct.push(E):Ne?(oe[L]=[E],rt(ye,L)&&(ye[L]=oe[L])):(L.value=[E],l.k&&(oe[l.k]=L.value))}else Ne?(oe[L]=N,rt(ye,L)&&(ye[L]=N)):Me&&(L.value=N,l.k&&(oe[l.k]=N))};N?(mt.id=-1,On(mt,m)):mt()}}}const On=j9;function vq(l){return Eq(l)}function Eq(l,u){const m=Q4();m.__VUE__=!0;const{insert:g,remove:b,patchProp:E,createElement:N,createText:D,createComment:L,setText:Z,setElementText:oe,parentNode:ye,nextSibling:Ne,setScopeId:Me=vs,cloneNode:mt,insertStaticContent:Ct}=l,et=(k,R,M,z=null,T=null,ce=null,be=!1,H=null,de=!!R.dynamicChildren)=>{if(k===R)return;k&&!Za(k,R)&&(z=h(k),xs(k,T,ce,!0),k=null),R.patchFlag===-2&&(de=!1,R.dynamicChildren=null);const{type:Q,ref:Te,shapeFlag:ge}=R;switch(Q){case Rg:lt(k,R,M,z);break;case Br:Dn(k,R,M,z);break;case Xp:k==null&&me(R,M,z,be);break;case Ws:Cn(k,R,M,z,T,ce,be,H,de);break;default:ge&1?Nt(k,R,M,z,T,ce,be,H,de):ge&6?Xs(k,R,M,z,T,ce,be,H,de):(ge&64||ge&128)&&Q.process(k,R,M,z,T,ce,be,H,de,bo)}Te!=null&&T&&fg(Te,k&&k.ref,ce,R||k,!R)},lt=(k,R,M,z)=>{if(k==null)g(R.el=D(R.children),M,z);else{const T=R.el=k.el;R.children!==k.children&&Z(T,R.children)}},Dn=(k,R,M,z)=>{k==null?g(R.el=L(R.children||""),M,z):R.el=k.el},me=(k,R,M,z)=>{[k.el,k.anchor]=Ct(k.children,R,M,z,k.el,k.anchor)},ft=({el:k,anchor:R},M,z)=>{let T;for(;k&&k!==R;)T=Ne(k),g(k,M,z),k=T;g(R,M,z)},Gs=({el:k,anchor:R})=>{let M;for(;k&&k!==R;)M=Ne(k),b(k),k=M;b(R)},Nt=(k,R,M,z,T,ce,be,H,de)=>{be=be||R.type==="svg",k==null?Ys(R,M,z,T,ce,be,H,de):It(k,R,T,ce,be,H,de)},Ys=(k,R,M,z,T,ce,be,H)=>{let de,Q;const{type:Te,props:ge,shapeFlag:Ae,transition:Ue,patchFlag:We,dirs:ot}=k;if(k.el&&mt!==void 0&&We===-1)de=k.el=mt(k.el);else{if(de=k.el=N(k.type,ce,ge&&ge.is,ge),Ae&8?oe(de,k.children):Ae&16&&At(k.children,de,null,z,T,ce&&Te!=="foreignObject",be,H),ot&&Ar(k,null,z,"created"),ge){for(const gt in ge)gt!=="value"&&!wu(gt)&&E(de,gt,null,ge[gt],ce,k.children,z,T,ct);"value"in ge&&E(de,"value",null,ge.value),(Q=ge.onVnodeBeforeMount)&&Hs(Q,z,k)}qn(de,k,k.scopeId,be,z)}ot&&Ar(k,null,z,"beforeMount");const it=(!T||T&&!T.pendingBranch)&&Ue&&!Ue.persisted;it&&Ue.beforeEnter(de),g(de,R,M),((Q=ge&&ge.onVnodeMounted)||it||ot)&&On(()=>{Q&&Hs(Q,z,k),it&&Ue.enter(de),ot&&Ar(k,null,z,"mounted")},T)},qn=(k,R,M,z,T)=>{if(M&&Me(k,M),z)for(let ce=0;ce<z.length;ce++)Me(k,z[ce]);if(T){let ce=T.subTree;if(R===ce){const be=T.vnode;qn(k,be,be.scopeId,be.slotScopeIds,T.parent)}}},At=(k,R,M,z,T,ce,be,H,de=0)=>{for(let Q=de;Q<k.length;Q++){const Te=k[Q]=H?Ho(k[Q]):js(k[Q]);et(null,Te,R,M,z,T,ce,be,H)}},It=(k,R,M,z,T,ce,be)=>{const H=R.el=k.el;let{patchFlag:de,dynamicChildren:Q,dirs:Te}=R;de|=k.patchFlag&16;const ge=k.props||xt,Ae=R.props||xt;let Ue;M&&Tr(M,!1),(Ue=Ae.onVnodeBeforeUpdate)&&Hs(Ue,M,R,k),Te&&Ar(R,k,M,"beforeUpdate"),M&&Tr(M,!0);const We=T&&R.type!=="foreignObject";if(Q?ke(k.dynamicChildren,Q,H,M,z,We,ce):be||wt(k,R,H,null,M,z,We,ce,!1),de>0){if(de&16)Ge(H,R,ge,Ae,M,z,T);else if(de&2&&ge.class!==Ae.class&&E(H,"class",null,Ae.class,T),de&4&&E(H,"style",ge.style,Ae.style,T),de&8){const ot=R.dynamicProps;for(let it=0;it<ot.length;it++){const gt=ot[it],yn=ge[gt],Kn=Ae[gt];(Kn!==yn||gt==="value")&&E(H,gt,yn,Kn,T,k.children,M,z,ct)}}de&1&&k.children!==R.children&&oe(H,R.children)}else!be&&Q==null&&Ge(H,R,ge,Ae,M,z,T);((Ue=Ae.onVnodeUpdated)||Te)&&On(()=>{Ue&&Hs(Ue,M,R,k),Te&&Ar(R,k,M,"updated")},z)},ke=(k,R,M,z,T,ce,be)=>{for(let H=0;H<R.length;H++){const de=k[H],Q=R[H],Te=de.el&&(de.type===Ws||!Za(de,Q)||de.shapeFlag&70)?ye(de.el):M;et(de,Q,Te,null,z,T,ce,be,!0)}},Ge=(k,R,M,z,T,ce,be)=>{if(M!==z){for(const H in z){if(wu(H))continue;const de=z[H],Q=M[H];de!==Q&&H!=="value"&&E(k,H,Q,de,be,R.children,T,ce,ct)}if(M!==xt)for(const H in M)!wu(H)&&!(H in z)&&E(k,H,M[H],null,be,R.children,T,ce,ct);"value"in z&&E(k,"value",M.value,z.value)}},Cn=(k,R,M,z,T,ce,be,H,de)=>{const Q=R.el=k?k.el:D(""),Te=R.anchor=k?k.anchor:D("");let{patchFlag:ge,dynamicChildren:Ae,slotScopeIds:Ue}=R;Ue&&(H=H?H.concat(Ue):Ue),k==null?(g(Q,M,z),g(Te,M,z),At(R.children,M,Te,T,ce,be,H,de)):ge>0&&ge&64&&Ae&&k.dynamicChildren?(ke(k.dynamicChildren,Ae,M,T,ce,be,H),(R.key!=null||T&&R===T.subTree)&&Bk(k,R,!0)):wt(k,R,M,Te,T,ce,be,H,de)},Xs=(k,R,M,z,T,ce,be,H,de)=>{R.slotScopeIds=H,k==null?R.shapeFlag&512?T.ctx.activate(R,M,z,be,de):Oe(R,M,z,T,ce,be,de):Ot(k,R,de)},Oe=(k,R,M,z,T,ce,be)=>{const H=k.component=Dq(k,z,T);if(vk(k)&&(H.ctx.renderer=bo),Bq(H),H.asyncDep){if(T&&T.registerDep(H,St),!k.el){const de=H.subTree=po(Br);Dn(null,de,R,M)}return}St(H,k,R,M,T,ce,be)},Ot=(k,R,M)=>{const z=R.component=k.component;if(H9(k,R,M))if(z.asyncDep&&!z.asyncResolved){K(z,R,M);return}else z.next=R,I9(z.update),z.update();else R.el=k.el,z.vnode=R},St=(k,R,M,z,T,ce,be)=>{const H=()=>{if(k.isMounted){let{next:Te,bu:ge,u:Ae,parent:Ue,vnode:We}=k,ot=Te,it;Tr(k,!1),Te?(Te.el=We.el,K(k,Te,be)):Te=We,ge&&Kp(ge),(it=Te.props&&Te.props.onVnodeBeforeUpdate)&&Hs(it,Ue,Te,We),Tr(k,!0);const gt=Gp(k),yn=k.subTree;k.subTree=gt,et(yn,gt,ye(yn.el),h(yn),k,T,ce),Te.el=gt.el,ot===null&&V9(k,gt.el),Ae&&On(Ae,T),(it=Te.props&&Te.props.onVnodeUpdated)&&On(()=>Hs(it,Ue,Te,We),T)}else{let Te;const{el:ge,props:Ae}=R,{bm:Ue,m:We,parent:ot}=k,it=Su(R);if(Tr(k,!1),Ue&&Kp(Ue),!it&&(Te=Ae&&Ae.onVnodeBeforeMount)&&Hs(Te,ot,R),Tr(k,!0),ge&&Fr){const gt=()=>{k.subTree=Gp(k),Fr(ge,k.subTree,k,T,null)};it?R.type.__asyncLoader().then(()=>!k.isUnmounted&&gt()):gt()}else{const gt=k.subTree=Gp(k);et(null,gt,M,z,k,T,ce),R.el=gt.el}if(We&&On(We,T),!it&&(Te=Ae&&Ae.onVnodeMounted)){const gt=R;On(()=>Hs(Te,ot,gt),T)}(R.shapeFlag&256||ot&&Su(ot.vnode)&&ot.vnode.shapeFlag&256)&&k.a&&On(k.a,T),k.isMounted=!0,R=M=z=null}},de=k.effect=new wg(H,()=>uk(Q),k.scope),Q=k.update=()=>de.run();Q.id=k.uid,Tr(k,!0),Q()},K=(k,R,M)=>{R.component=k;const z=k.vnode.props;k.vnode=R,k.next=null,pq(k,R.props,z,M),bq(k,R.children,M),Mi(),Mu(void 0,k.update),Ui()},wt=(k,R,M,z,T,ce,be,H,de=!1)=>{const Q=k&&k.children,Te=k?k.shapeFlag:0,ge=R.children,{patchFlag:Ae,shapeFlag:Ue}=R;if(Ae>0){if(Ae&128){re(Q,ge,M,z,T,ce,be,H,de);return}else if(Ae&256){zi(Q,ge,M,z,T,ce,be,H,de);return}}Ue&8?(Te&16&&ct(Q,T,ce),ge!==Q&&oe(M,ge)):Te&16?Ue&16?re(Q,ge,M,z,T,ce,be,H,de):ct(Q,T,ce,!0):(Te&8&&oe(M,""),Ue&16&&At(ge,M,z,T,ce,be,H,de))},zi=(k,R,M,z,T,ce,be,H,de)=>{k=k||Di,R=R||Di;const Q=k.length,Te=R.length,ge=Math.min(Q,Te);let Ae;for(Ae=0;Ae<ge;Ae++){const Ue=R[Ae]=de?Ho(R[Ae]):js(R[Ae]);et(k[Ae],Ue,M,null,T,ce,be,H,de)}Q>Te?ct(k,T,ce,!0,!1,ge):At(R,M,z,T,ce,be,H,de,ge)},re=(k,R,M,z,T,ce,be,H,de)=>{let Q=0;const Te=R.length;let ge=k.length-1,Ae=Te-1;for(;Q<=ge&&Q<=Ae;){const Ue=k[Q],We=R[Q]=de?Ho(R[Q]):js(R[Q]);if(Za(Ue,We))et(Ue,We,M,null,T,ce,be,H,de);else break;Q++}for(;Q<=ge&&Q<=Ae;){const Ue=k[ge],We=R[Ae]=de?Ho(R[Ae]):js(R[Ae]);if(Za(Ue,We))et(Ue,We,M,null,T,ce,be,H,de);else break;ge--,Ae--}if(Q>ge){if(Q<=Ae){const Ue=Ae+1,We=Ue<Te?R[Ue].el:z;for(;Q<=Ae;)et(null,R[Q]=de?Ho(R[Q]):js(R[Q]),M,We,T,ce,be,H,de),Q++}}else if(Q>Ae)for(;Q<=ge;)xs(k[Q],T,ce,!0),Q++;else{const Ue=Q,We=Q,ot=new Map;for(Q=We;Q<=Ae;Q++){const ht=R[Q]=de?Ho(R[Q]):js(R[Q]);ht.key!=null&&ot.set(ht.key,Q)}let it,gt=0;const yn=Ae-We+1;let Kn=!1,Lr=0;const Ft=new Array(yn);for(Q=0;Q<yn;Q++)Ft[Q]=0;for(Q=Ue;Q<=ge;Q++){const ht=k[Q];if(gt>=yn){xs(ht,T,ce,!0);continue}let en;if(ht.key!=null)en=ot.get(ht.key);else for(it=We;it<=Ae;it++)if(Ft[it-We]===0&&Za(ht,R[it])){en=it;break}en===void 0?xs(ht,T,ce,!0):(Ft[en-We]=Q+1,en>=Lr?Lr=en:Kn=!0,et(ht,R[en],M,null,T,ce,be,H,de),gt++)}const Qs=Kn?wq(Ft):Di;for(it=Qs.length-1,Q=yn-1;Q>=0;Q--){const ht=We+Q,en=R[ht],fl=ht+1<Te?R[ht+1].el:z;Ft[Q]===0?et(null,en,M,fl,T,ce,be,H,de):Kn&&(it<0||Q!==Qs[it]?ws(en,M,fl,2):it--)}}},ws=(k,R,M,z,T=null)=>{const{el:ce,type:be,transition:H,children:de,shapeFlag:Q}=k;if(Q&6){ws(k.component.subTree,R,M,z);return}if(Q&128){k.suspense.move(R,M,z);return}if(Q&64){be.move(k,R,M,bo);return}if(be===Ws){g(ce,R,M);for(let ge=0;ge<de.length;ge++)ws(de[ge],R,M,z);g(k.anchor,R,M);return}if(be===Xp){ft(k,R,M);return}if(z!==2&&Q&1&&H)if(z===0)H.beforeEnter(ce),g(ce,R,M),On(()=>H.enter(ce),T);else{const{leave:ge,delayLeave:Ae,afterLeave:Ue}=H,We=()=>g(ce,R,M),ot=()=>{ge(ce,()=>{We(),Ue&&Ue()})};Ae?Ae(ce,We,ot):ot()}else g(ce,R,M)},xs=(k,R,M,z=!1,T=!1)=>{const{type:ce,props:be,ref:H,children:de,dynamicChildren:Q,shapeFlag:Te,patchFlag:ge,dirs:Ae}=k;if(H!=null&&fg(H,null,M,k,!0),Te&256){R.ctx.deactivate(k);return}const Ue=Te&1&&Ae,We=!Su(k);let ot;if(We&&(ot=be&&be.onVnodeBeforeUnmount)&&Hs(ot,R,k),Te&6)pt(k.component,M,z);else{if(Te&128){k.suspense.unmount(M,z);return}Ue&&Ar(k,null,R,"beforeUnmount"),Te&64?k.type.remove(k,R,M,T,bo,z):Q&&(ce!==Ws||ge>0&&ge&64)?ct(Q,R,M,!1,!0):(ce===Ws&&ge&384||!T&&Te&16)&&ct(de,R,M),z&&Ir(k)}(We&&(ot=be&&be.onVnodeUnmounted)||Ue)&&On(()=>{ot&&Hs(ot,R,k),Ue&&Ar(k,null,R,"unmounted")},M)},Ir=k=>{const{type:R,el:M,anchor:z,transition:T}=k;if(R===Ws){qo(M,z);return}if(R===Xp){Gs(k);return}const ce=()=>{b(M),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(k.shapeFlag&1&&T&&!T.persisted){const{leave:be,delayLeave:H}=T,de=()=>be(M,ce);H?H(k.el,ce,de):de()}else ce()},qo=(k,R)=>{let M;for(;k!==R;)M=Ne(k),b(k),k=M;b(R)},pt=(k,R,M)=>{const{bum:z,scope:T,update:ce,subTree:be,um:H}=k;z&&Kp(z),T.stop(),ce&&(ce.active=!1,xs(be,k,R,M)),H&&On(H,R),On(()=>{k.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ct=(k,R,M,z=!1,T=!1,ce=0)=>{for(let be=ce;be<k.length;be++)xs(k[be],R,M,z,T)},h=k=>k.shapeFlag&6?h(k.component.subTree):k.shapeFlag&128?k.suspense.next():Ne(k.anchor||k.el),$r=(k,R,M)=>{k==null?R._vnode&&xs(R._vnode,null,null,!0):et(R._vnode||null,k,R,null,null,null,M),mk(),R._vnode=k},bo={p:et,um:xs,m:ws,r:Ir,mt:Oe,mc:At,pc:wt,pbc:ke,n:h,o:l};let Hi,Fr;return u&&([Hi,Fr]=u(bo)),{render:$r,hydrate:Hi,createApp:yq($r,Hi)}}function Tr({effect:l,update:u},m){l.allowRecurse=u.allowRecurse=m}function Bk(l,u,m=!1){const g=l.children,b=u.children;if(Xe(g)&&Xe(b))for(let E=0;E<g.length;E++){const N=g[E];let D=b[E];D.shapeFlag&1&&!D.dynamicChildren&&((D.patchFlag<=0||D.patchFlag===32)&&(D=b[E]=Ho(b[E]),D.el=N.el),m||Bk(N,D))}}function wq(l){const u=l.slice(),m=[0];let g,b,E,N,D;const L=l.length;for(g=0;g<L;g++){const Z=l[g];if(Z!==0){if(b=m[m.length-1],l[b]<Z){u[g]=b,m.push(g);continue}for(E=0,N=m.length-1;E<N;)D=E+N>>1,l[m[D]]<Z?E=D+1:N=D;Z<l[m[E]]&&(E>0&&(u[g]=m[E-1]),m[E]=g)}}for(E=m.length,N=m[E-1];E-- >0;)m[E]=N,N=u[N];return m}const xq=l=>l.__isTeleport,Ws=Symbol(void 0),Rg=Symbol(void 0),Br=Symbol(void 0),Xp=Symbol(void 0),ol=[];let ys=null;function Pu(l=!1){ol.push(ys=l?null:[])}function Sq(){ol.pop(),ys=ol[ol.length-1]||null}let cl=1;function P_(l){cl+=l}function Ik(l){return l.dynamicChildren=cl>0?ys||Di:null,Sq(),cl>0&&ys&&ys.push(l),l}function $k(l,u,m,g,b,E){return Ik(ts(l,u,m,g,b,E,!0))}function Fk(l,u,m,g,b){return Ik(po(l,u,m,g,b,!0))}function _q(l){return l?l.__v_isVNode===!0:!1}function Za(l,u){return l.type===u.type&&l.key===u.key}const Hu="__vInternal",Lk=({key:l})=>l!=null?l:null,_u=({ref:l,ref_key:u,ref_for:m})=>l!=null?cn(l)||bn(l)||Ye(l)?{i:qs,r:l,k:u,f:!!m}:l:null;function ts(l,u=null,m=null,g=0,b=null,E=l===Ws?0:1,N=!1,D=!1){const L={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&Lk(u),ref:u&&_u(u),scopeId:hk,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:g,dynamicProps:b,dynamicChildren:null,appContext:null};return D?(Pg(L,m),E&128&&l.normalize(L)):m&&(L.shapeFlag|=cn(m)?8:16),cl>0&&!N&&ys&&(L.patchFlag>0||E&6)&&L.patchFlag!==32&&ys.push(L),L}const po=kq;function kq(l,u=null,m=null,g=0,b=null,E=!1){if((!l||l===rq)&&(l=Br),_q(l)){const D=$i(l,u,!0);return m&&Pg(D,m),cl>0&&!E&&ys&&(D.shapeFlag&6?ys[ys.indexOf(l)]=D:ys.push(D)),D.patchFlag|=-2,D}if(Mq(l)&&(l=l.__vccOpts),u){u=Nq(u);let{class:D,style:L}=u;D&&!cn(D)&&(u.class=hg(D)),un(L)&&(ok(L)&&!Xe(L)&&(L=Nn({},L)),u.style=gg(L))}const N=cn(l)?1:W9(l)?128:xq(l)?64:un(l)?4:Ye(l)?2:0;return ts(l,u,m,g,b,N,E,!0)}function Nq(l){return l?ok(l)||Hu in l?Nn({},l):l:null}function $i(l,u,m=!1){const{props:g,ref:b,patchFlag:E,children:N}=l,D=u?Rq(g||{},u):g;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:D,key:D&&Lk(D),ref:u&&u.ref?m&&b?Xe(b)?b.concat(_u(u)):[b,_u(u)]:_u(u):b,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:N,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==Ws?E===-1?16:E|16:E,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&$i(l.ssContent),ssFallback:l.ssFallback&&$i(l.ssFallback),el:l.el,anchor:l.anchor}}function Aq(l=" ",u=0){return po(Rg,null,l,u)}function Tq(l="",u=!1){return u?(Pu(),Fk(Br,null,l)):po(Br,null,l)}function js(l){return l==null||typeof l=="boolean"?po(Br):Xe(l)?po(Ws,null,l.slice()):typeof l=="object"?Ho(l):po(Rg,null,String(l))}function Ho(l){return l.el===null||l.memo?l:$i(l)}function Pg(l,u){let m=0;const{shapeFlag:g}=l;if(u==null)u=null;else if(Xe(u))m=16;else if(typeof u=="object")if(g&65){const b=u.default;b&&(b._c&&(b._d=!1),Pg(l,b()),b._c&&(b._d=!0));return}else{m=32;const b=u._;!b&&!(Hu in u)?u._ctx=qs:b===3&&qs&&(qs.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Ye(u)?(u={default:u,_ctx:qs},m=32):(u=String(u),g&64?(m=16,u=[Aq(u)]):m=8);l.children=u,l.shapeFlag|=m}function Rq(...l){const u={};for(let m=0;m<l.length;m++){const g=l[m];for(const b in g)if(b==="class")u.class!==g.class&&(u.class=hg([u.class,g.class]));else if(b==="style")u.style=gg([u.style,g.style]);else if(Ou(b)){const E=u[b],N=g[b];N&&E!==N&&!(Xe(E)&&E.includes(N))&&(u[b]=E?[].concat(E,N):N)}else b!==""&&(u[b]=g[b])}return u}function Hs(l,u,m,g=null){Es(l,u,7,[m,g])}const Pq=Dk();let Oq=0;function Dq(l,u,m){const g=l.type,b=(u?u.appContext:l.appContext)||Pq,E={uid:Oq++,vnode:l,type:g,parent:u,appContext:b,root:null,next:null,subTree:null,effect:null,update:null,scope:new Z4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(b.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tk(g,b),emitsOptions:gk(g,b),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:g.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=u?u.root:E,E.emit=L9.bind(null,E),l.ce&&l.ce(E),E}let ln=null;const Fi=l=>{ln=l,l.scope.on()},Dr=()=>{ln&&ln.scope.off(),ln=null};function Mk(l){return l.vnode.shapeFlag&4}let ul=!1;function Bq(l,u=!1){ul=u;const{props:m,children:g}=l.vnode,b=Mk(l);mq(l,m,b,u),hq(l,g);const E=b?Iq(l,u):void 0;return ul=!1,E}function Iq(l,u){const m=l.type;l.accessCache=Object.create(null),l.proxy=rk(new Proxy(l.ctx,aq));const{setup:g}=m;if(g){const b=l.setupContext=g.length>1?Fq(l):null;Fi(l),Mi();const E=Wo(g,l,0,[l.props,b]);if(Ui(),Dr(),W_(E)){if(E.then(Dr,Dr),u)return E.then(N=>{O_(l,N,u)}).catch(N=>{Lu(N,l,0)});l.asyncDep=E}else O_(l,E,u)}else Uk(l,u)}function O_(l,u,m){Ye(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:un(u)&&(l.setupState=lk(u)),Uk(l,m)}let D_;function Uk(l,u,m){const g=l.type;if(!l.render){if(!u&&D_&&!g.render){const b=g.template;if(b){const{isCustomElement:E,compilerOptions:N}=l.appContext.config,{delimiters:D,compilerOptions:L}=g,Z=Nn(Nn({isCustomElement:E,delimiters:D},N),L);g.render=D_(b,Z)}}l.render=g.render||vs}Fi(l),Mi(),lq(l),Ui(),Dr()}function $q(l){return new Proxy(l.attrs,{get(u,m){return jn(l,"get","$attrs"),u[m]}})}function Fq(l){const u=g=>{l.exposed=g||{}};let m;return{get attrs(){return m||(m=$q(l))},slots:l.slots,emit:l.emit,expose:u}}function Og(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(lk(rk(l.exposed)),{get(u,m){if(m in u)return u[m];if(m in Tu)return Tu[m](l)}}))}function Lq(l,u=!0){return Ye(l)?l.displayName||l.name:l.name||u&&l.__name}function Mq(l){return Ye(l)&&"__vccOpts"in l}const zk=(l,u)=>O9(l,u,ul),Uq="3.2.37",zq="http://www.w3.org/2000/svg",Pr=typeof document<"u"?document:null,B_=Pr&&Pr.createElement("template"),Hq={insert:(l,u,m)=>{u.insertBefore(l,m||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,m,g)=>{const b=u?Pr.createElementNS(zq,l):Pr.createElement(l,m?{is:m}:void 0);return l==="select"&&g&&g.multiple!=null&&b.setAttribute("multiple",g.multiple),b},createText:l=>Pr.createTextNode(l),createComment:l=>Pr.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Pr.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},cloneNode(l){const u=l.cloneNode(!0);return"_value"in l&&(u._value=l._value),u},insertStaticContent(l,u,m,g,b,E){const N=m?m.previousSibling:u.lastChild;if(b&&(b===E||b.nextSibling))for(;u.insertBefore(b.cloneNode(!0),m),!(b===E||!(b=b.nextSibling)););else{B_.innerHTML=g?`<svg>${l}</svg>`:l;const D=B_.content;if(g){const L=D.firstChild;for(;L.firstChild;)D.appendChild(L.firstChild);D.removeChild(L)}u.insertBefore(D,m)}return[N?N.nextSibling:u.firstChild,m?m.previousSibling:u.lastChild]}};function Vq(l,u,m){const g=l._vtc;g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?l.removeAttribute("class"):m?l.setAttribute("class",u):l.className=u}function Wq(l,u,m){const g=l.style,b=cn(m);if(m&&!b){for(const E in m)dg(g,E,m[E]);if(u&&!cn(u))for(const E in u)m[E]==null&&dg(g,E,"")}else{const E=g.display;b?u!==m&&(g.cssText=m):u&&l.removeAttribute("style"),"_vod"in l&&(g.display=E)}}const I_=/\s*!important$/;function dg(l,u,m){if(Xe(m))m.forEach(g=>dg(l,u,g));else if(m==null&&(m=""),u.startsWith("--"))l.setProperty(u,m);else{const g=jq(l,u);I_.test(m)?l.setProperty(Li(g),m.replace(I_,""),"important"):l[g]=m}}const $_=["Webkit","Moz","ms"],Qp={};function jq(l,u){const m=Qp[u];if(m)return m;let g=Ks(u);if(g!=="filter"&&g in l)return Qp[u]=g;g=Iu(g);for(let b=0;b<$_.length;b++){const E=$_[b]+g;if(E in l)return Qp[u]=E}return u}const F_="http://www.w3.org/1999/xlink";function qq(l,u,m,g,b){if(g&&u.startsWith("xlink:"))m==null?l.removeAttributeNS(F_,u.slice(6,u.length)):l.setAttributeNS(F_,u,m);else{const E=M4(u);m==null||E&&!z_(m)?l.removeAttribute(u):l.setAttribute(u,E?"":m)}}function Kq(l,u,m,g,b,E,N){if(u==="innerHTML"||u==="textContent"){g&&N(g,b,E),l[u]=m==null?"":m;return}if(u==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const L=m==null?"":m;(l.value!==L||l.tagName==="OPTION")&&(l.value=L),m==null&&l.removeAttribute(u);return}let D=!1;if(m===""||m==null){const L=typeof l[u];L==="boolean"?m=z_(m):m==null&&L==="string"?(m="",D=!0):L==="number"&&(m=0,D=!0)}try{l[u]=m}catch{}D&&l.removeAttribute(u)}const[Hk,Gq]=(()=>{let l=Date.now,u=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(l=performance.now.bind(performance));const m=navigator.userAgent.match(/firefox\/(\d+)/i);u=!!(m&&Number(m[1])<=53)}return[l,u]})();let mg=0;const Yq=Promise.resolve(),Xq=()=>{mg=0},Qq=()=>mg||(Yq.then(Xq),mg=Hk());function Zq(l,u,m,g){l.addEventListener(u,m,g)}function Jq(l,u,m,g){l.removeEventListener(u,m,g)}function e7(l,u,m,g,b=null){const E=l._vei||(l._vei={}),N=E[u];if(g&&N)N.value=g;else{const[D,L]=t7(u);if(g){const Z=E[u]=n7(g,b);Zq(l,D,Z,L)}else N&&(Jq(l,D,N,L),E[u]=void 0)}}const L_=/(?:Once|Passive|Capture)$/;function t7(l){let u;if(L_.test(l)){u={};let m;for(;m=l.match(L_);)l=l.slice(0,l.length-m[0].length),u[m[0].toLowerCase()]=!0}return[Li(l.slice(2)),u]}function n7(l,u){const m=g=>{const b=g.timeStamp||Hk();(Gq||b>=m.attached-1)&&Es(s7(g,m.value),u,5,[g])};return m.value=l,m.attached=Qq(),m}function s7(l,u){if(Xe(u)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},u.map(g=>b=>!b._stopped&&g&&g(b))}else return u}const M_=/^on[a-z]/,o7=(l,u,m,g,b=!1,E,N,D,L)=>{u==="class"?Vq(l,g,b):u==="style"?Wq(l,m,g):Ou(u)?bg(u)||e7(l,u,m,g,N):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):r7(l,u,g,b))?Kq(l,u,g,E,N,D,L):(u==="true-value"?l._trueValue=g:u==="false-value"&&(l._falseValue=g),qq(l,u,g,b))};function r7(l,u,m,g){return g?!!(u==="innerHTML"||u==="textContent"||u in l&&M_.test(u)&&Ye(m)):u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA"||M_.test(u)&&cn(m)?!1:u in l}const i7=Nn({patchProp:o7},Hq);let U_;function a7(){return U_||(U_=vq(i7))}const l7=(...l)=>{const u=a7().createApp(...l),{mount:m}=u;return u.mount=g=>{const b=c7(g);if(!b)return;const E=u._component;!Ye(E)&&!E.render&&!E.template&&(E.template=b.innerHTML),b.innerHTML="";const N=m(b,!1,b instanceof SVGElement);return b instanceof Element&&(b.removeAttribute("v-cloak"),b.setAttribute("data-v-app","")),N},u};function c7(l){return cn(l)?document.querySelector(l):l}const u7=yk({name:"App",components:{},setup(){const l=Fu({content:"init content",show:!0,locale:""}),u=zk(()=>{let g={};return l.locale==="en"&&(g={language:"en_US"}),g});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:u,switchLanguage:m}}}),f7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m},d7=ts("h1",null,"VueTinymce example",-1),m7=ts("br",null,null,-1),p7=ts("br",null,null,-1),g7=ts("br",null,null,-1),h7=ts("br",null,null,-1),b7=ts("h2",null,"output",-1),C7=["innerHTML"];function y7(l,u,m,g,b,E){const N=oq("vue-tinymce");return Pu(),$k(Ws,null,[d7,ts("button",{onClick:u[0]||(u[0]=D=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+V4(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),m7,p7,ts("button",{onClick:u[1]||(u[1]=(...D)=>l.switchLanguage&&l.switchLanguage(...D))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),g7,h7,l.data.show?(Pu(),Fk(N,{key:0,modelValue:l.data.content,"onUpdate:modelValue":u[2]||(u[2]=D=>l.data.content=D),config:l.config},null,8,["modelValue","config"])):Tq("",!0),b7,ts("div",{innerHTML:l.data.content},null,8,C7)],64)}const v7=f7(u7,[["render",y7]]);var Vk={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},g=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},b=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},N=E(function(e,t){return e===t}),D=N,L=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},Z=function(e,t){return b(L(e),function(n){return g(n,t)})},oe=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!Z(D).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},ye=E(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:m(n)?e===t:n==="array"?L(ye).eq(e,t):n==="object"?oe(ye).eq(e,t):!1});const Ne=Object.getPrototypeOf,Me=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},mt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Me(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Ct=e=>t=>mt(t)===e,et=e=>t=>typeof t===e,lt=e=>t=>e===t,Dn=(e,t)=>ft(e)&&Me(e,t,(n,s)=>Ne(n)===s),me=Ct("string"),ft=Ct("object"),Gs=e=>Dn(e,Object),Nt=Ct("array"),Ys=lt(null),qn=et("boolean"),At=lt(void 0),It=e=>e==null,ke=e=>!It(e),Ge=et("function"),Cn=et("number"),Xs=(e,t)=>{if(Nt(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Oe=()=>{},Ot=(e,t)=>(...n)=>e(t.apply(null,n)),St=(e,t)=>n=>e(t(n)),K=e=>()=>e,wt=e=>e,zi=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const ws=e=>t=>!e(t),xs=e=>()=>{throw new Error(e)},Ir=e=>e(),qo=e=>{e()},pt=K(!1),ct=K(!0);class h{constructor(t,n){this.tag=t,this.value=n}static some(t){return new h(!0,t)}static none(){return h.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?h.some(t(this.value)):h.none()}bind(t){return this.tag?t(this.value):h.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:h.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return ke(t)?h.some(t):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const $r=Array.prototype.slice,bo=Array.prototype.indexOf,Hi=Array.prototype.push,Fr=(e,t)=>bo.call(e,t),k=(e,t)=>{const n=Fr(e,t);return n===-1?h.none():h.some(n)},R=(e,t)=>Fr(e,t)>-1,M=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},z=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},T=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},ce=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},be=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},H=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},de=(e,t,n)=>(ce(e,(s,o)=>{n=t(n,s,o)}),n),Q=(e,t,n)=>(T(e,(s,o)=>{n=t(n,s,o)}),n),Te=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return h.some(r);if(n(r,s))break}return h.none()},ge=(e,t)=>Te(e,t,pt),Ae=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return h.some(n)}return h.none()},Ue=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Nt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Hi.apply(t,e[n])}return t},We=(e,t)=>Ue(z(e,t)),ot=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},it=e=>{const t=$r.call(e,0);return t.reverse(),t},gt=(e,t)=>H(e,n=>!R(t,n)),yn=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Kn=(e,t)=>{const n=$r.call(e,0);return n.sort(t),n},Lr=(e,t)=>t>=0&&t<e.length?h.some(e[t]):h.none(),Ft=e=>Lr(e,0),Qs=e=>Lr(e,e.length-1),ht=Ge(Array.from)?Array.from:e=>$r.call(e),en=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return h.none()},fl=(e,t)=>{const n=[],s=Ge(t)?o=>M(n,r=>t(r,o)):o=>R(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},Gn=Object.keys,jk=Object.hasOwnProperty,bt=(e,t)=>{const n=Gn(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},Vi=(e,t)=>qk(e,(n,s)=>({k:s,v:t(n,s)})),qk=(e,t)=>{const n={};return bt(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Vu=e=>(t,n)=>{e[n]=t},Dg=(e,t,n,s)=>{const o={};return bt(e,(r,i)=>{(t(r,i)?n:s)(r,i)}),o},Kk=(e,t)=>{const n={},s={};return Dg(e,t,Vu(n),Vu(s)),{t:n,f:s}},Wi=(e,t)=>{const n={};return Dg(e,t,Vu(n),Oe),n},Wu=(e,t)=>{const n=[];return bt(e,(s,o)=>{n.push(t(s,o))}),n},ju=e=>Wu(e,wt),ut=(e,t)=>Ie(e,t)?h.from(e[t]):h.none(),Ie=(e,t)=>jk.call(e,t),Mr=(e,t)=>Ie(e,t)&&e[t]!==void 0&&e[t]!==null,Gk=(e,t,n=ye)=>oe(n).eq(e,t),Bg=e=>{const t={};return T(e,n=>{t[n]={}}),Gn(t)},qu=Array.isArray,Yk=e=>{if(qu(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},ji=(e,t,n)=>{let s,o;if(!e)return!1;if(n=n||e,e.length!==void 0){for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(s in e)if(Ie(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Ku=(e,t)=>{const n=[];return ji(e,(s,o)=>{n.push(t(s,o,e))}),n},Ur=(e,t)=>{const n=[];return ji(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},Ig=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},dl=(e,t,n,s)=>{let o=At(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},$g=(e,t,n)=>{let s,o;for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Co=e=>e[e.length-1],Ko=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},Xk=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(f),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},Qk=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},Zk=(e,t)=>{const n=Qk(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Gu(s(1),s(2))},Jk=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Fg():Zk(e,n)},Fg=()=>Gu(0,0),Gu=(e,t)=>({major:e,minor:t}),qi={nu:Gu,detect:Jk,unknown:Fg},eN=(e,t)=>en(t.brands,n=>{const s=n.brand.toLowerCase();return ge(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:qi.nu(parseInt(n.version,10),0)}))}),Lg=(e,t)=>{const n=String(t).toLowerCase();return ge(e,s=>s.search(n))},tN=(e,t)=>Lg(e,t).map(n=>{const s=qi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),nN=(e,t)=>Lg(e,t).map(n=>{const s=qi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),sN=(e,t)=>e.substring(t),Mg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,oN=(e,t)=>Kt(e,t)?sN(e,t.length):e,tn=(e,t)=>e.indexOf(t)!==-1,Kt=(e,t)=>Mg(e,t,0),Ug=(e,t)=>Mg(e,t,e.length-t.length),Yu=e=>t=>t.replace(e,""),zr=Yu(/^\s+|\s+$/g),rN=Yu(/^\s+/g),zg=Yu(/\s+$/g),Zs=e=>e.length>0,ml=e=>!Zs(e),iN=(e,t)=>t<=0?"":new Array(t+1).join(e),aN=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?h.none():h.some(n)},Xu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Js=e=>t=>tn(t,e),lN=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>tn(e,"edge/")&&tn(e,"chrome")&&tn(e,"safari")&&tn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xu],search:e=>tn(e,"chrome")&&!tn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>tn(e,"msie")||tn(e,"trident")},{name:"Opera",versionRegexes:[Xu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Js("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Js("firefox")},{name:"Safari",versionRegexes:[Xu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(tn(e,"safari")||tn(e,"mobile/"))&&tn(e,"applewebkit")}],cN=[{name:"Windows",search:Js("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>tn(e,"iphone")||tn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Js("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Js("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Js("linux"),versionRegexes:[]},{name:"Solaris",search:Js("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Js("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Js("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hg={browsers:K(lN),oses:K(cN)},Vg="Edge",Wg="Chromium",jg="IE",qg="Opera",Kg="Firefox",Gg="Safari",uN=()=>Yg({current:void 0,version:qi.unknown()}),Yg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Vg),isChromium:s(Wg),isIE:s(jg),isOpera:s(qg),isFirefox:s(Kg),isSafari:s(Gg)}},Xg={unknown:uN,nu:Yg,edge:K(Vg),chromium:K(Wg),ie:K(jg),opera:K(qg),firefox:K(Kg),safari:K(Gg)},Qg="Windows",Zg="iOS",Jg="Android",eh="Linux",th="macOS",nh="Solaris",sh="FreeBSD",oh="ChromeOS",fN=()=>rh({current:void 0,version:qi.unknown()}),rh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Qg),isiOS:s(Zg),isAndroid:s(Jg),isMacOS:s(th),isLinux:s(eh),isSolaris:s(nh),isFreeBSD:s(sh),isChromeOS:s(oh)}},ih={unknown:fN,nu:rh,windows:K(Qg),ios:K(Zg),android:K(Jg),linux:K(eh),macos:K(th),solaris:K(nh),freebsd:K(sh),chromeos:K(oh)},dN={detect:(e,t,n)=>{const s=Hg.browsers(),o=Hg.oses(),r=t.bind(c=>eN(s,c)).orThunk(()=>tN(s,e)).fold(Xg.unknown,Xg.nu),i=nN(o,e).fold(ih.unknown,ih.nu),a=Xk(i,r,e,n);return{browser:r,os:i,deviceType:a}}},mN=e=>window.matchMedia(e).matches;let pN=Ko(()=>dN.detect(navigator.userAgent,h.from(navigator.userAgentData),mN));const Go=()=>pN(),gN=navigator.userAgent,Qu=Go(),Ss=Qu.browser,_s=Qu.os,Yo=Qu.deviceType,hN=gN.indexOf("Windows Phone")!==-1,Qe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ss.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ss.isIE(),windowsPhone:hN,browser:{current:Ss.current,version:Ss.version,isChromium:Ss.isChromium,isEdge:Ss.isEdge,isFirefox:Ss.isFirefox,isIE:Ss.isIE,isOpera:Ss.isOpera,isSafari:Ss.isSafari},os:{current:_s.current,version:_s.version,isAndroid:_s.isAndroid,isChromeOS:_s.isChromeOS,isFreeBSD:_s.isFreeBSD,isiOS:_s.isiOS,isLinux:_s.isLinux,isMacOS:_s.isMacOS,isSolaris:_s.isSolaris,isWindows:_s.isWindows},deviceType:{isDesktop:Yo.isDesktop,isiPad:Yo.isiPad,isiPhone:Yo.isiPhone,isPhone:Yo.isPhone,isTablet:Yo.isTablet,isTouch:Yo.isTouch,isWebView:Yo.isWebView}},bN=/^\s*|\s*$/g,ah=e=>e==null?"":(""+e).replace(bN,""),lh=(e,t)=>t?t==="array"&&qu(e)?!0:typeof e===t:e!==void 0,CN=(e,t,n)=>{let s;for(e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},s=e.length;s--;)n[e[s]]={};return n},yN=Ie,vN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Ie(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},ch=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),ji(e,(o,r)=>{if(t.call(s,o,r,n)===!1)return!1;ch(o,t,n,s)}))},G={trim:ah,isArray:qu,is:lh,toArray:Yk,makeMap:CN,each:ji,map:Ku,grep:Ur,inArray:Ig,hasOwn:yN,extend:vN,walk:ch,resolve:(e,t)=>{let n,s;for(t=t||window,e=e.split("."),n=0,s=e.length;n<s&&(t=t[e[n]],!!t);n++);return t},explode:(e,t)=>!e||lh(e,"array")?e:Ku(e.split(t||","),ah),_addCacheSuffix:e=>{const t=Qe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Hr=(e,t,n=zi)=>e.exists(s=>n(s,t)),EN=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},vn=(e,t,n)=>e.isSome()&&t.isSome()?h.some(n(e.getOrDie(),t.getOrDie())):h.none(),wN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?h.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):h.none(),Zu=(e,t)=>e?h.some(t):h.none();typeof window<"u"||Function("return this;")();const uh=8,fh=9,dh=11,Ki=1,mh=3,yt=e=>e.dom.nodeName.toLowerCase(),ph=e=>e.dom.nodeType,pl=e=>t=>ph(t)===e,xN=e=>ph(e)===uh||yt(e)==="#comment",Yn=pl(Ki),Bn=pl(mh),SN=pl(fh),_N=pl(dh),gh=e=>t=>Yn(t)&&yt(t)===e,hh=(e,t,n)=>{if(me(n)||qn(n)||Cn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Wt=(e,t,n)=>{hh(e.dom,t,n)},yo=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{hh(n,o,s)})},In=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Vr=(e,t)=>h.from(In(e,t)),Gi=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Gt=(e,t)=>{e.dom.removeAttribute(t)},kN=e=>{const t=e.dom.attributes;return t==null||t.length===0},bh=e=>Q(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Ju=(e,t)=>{const n=In(e,t);return n===void 0||n===""?[]:n.split(" ")},NN=(e,t,n)=>{const o=Ju(e,t).concat([n]);return Wt(e,t,o.join(" ")),!0},AN=(e,t,n)=>{const s=H(Ju(e,t),o=>o!==n);return s.length>0?Wt(e,t,s.join(" ")):Gt(e,t),!1},Yi=e=>e.dom.classList!==void 0,Ch=e=>Ju(e,"class"),yh=(e,t)=>NN(e,"class",t),vh=(e,t)=>AN(e,"class",t),TN=(e,t)=>R(Ch(e),t)?vh(e,t):yh(e,t),Xi=(e,t)=>{Yi(e)?e.dom.classList.add(t):yh(e,t)},Eh=e=>{(Yi(e)?e.dom.classList:Ch(e)).length===0&&Gt(e,"class")},gl=(e,t)=>{Yi(e)?e.dom.classList.remove(t):vh(e,t),Eh(e)},RN=(e,t)=>{const n=Yi(e)?e.dom.classList.toggle(t):TN(e,t);return Eh(e),n},ef=(e,t)=>Yi(e)&&e.dom.classList.contains(t),Qi=e=>e.style!==void 0&&Ge(e.style.getPropertyValue),PN=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Zi(s.childNodes[0])},ON=(e,t)=>{const s=(t||document).createElement(e);return Zi(s)},DN=(e,t)=>{const s=(t||document).createTextNode(e);return Zi(s)},Zi=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},_={fromHtml:PN,fromTag:ON,fromText:DN,fromDom:Zi,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(Zi)},wh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},ks=(e,t)=>{const n=e.dom;if(n.nodeType!==Ki)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},xh=e=>e.nodeType!==Ki&&e.nodeType!==fh&&e.nodeType!==dh||e.childElementCount===0,BN=(e,t)=>{const n=t===void 0?document:t.dom;return xh(n)?[]:z(n.querySelectorAll(e),_.fromDom)},IN=(e,t)=>{const n=t===void 0?document:t.dom;return xh(n)?h.none():h.from(n.querySelector(e)).map(_.fromDom)},st=(e,t)=>e.dom===t.dom,eo=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Sh=e=>_.fromDom(e.dom.ownerDocument),vo=e=>SN(e)?e:Sh(e),$N=e=>_.fromDom(vo(e).dom.documentElement),_h=e=>_.fromDom(vo(e).dom.defaultView),Xn=e=>h.from(e.dom.parentNode).map(_.fromDom),FN=e=>h.from(e.dom.parentElement).map(_.fromDom),LN=(e,t)=>{const n=Ge(t)?t:pt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=_.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},MN=e=>{const t=n=>H(n,s=>!st(e,s));return Xn(e).map(Yt).map(t).getOr([])},Xo=e=>h.from(e.dom.previousSibling).map(_.fromDom),Ji=e=>h.from(e.dom.nextSibling).map(_.fromDom),kh=e=>it(wh(e,Xo)),Nh=e=>wh(e,Ji),Yt=e=>z(e.dom.childNodes,_.fromDom),hl=(e,t)=>{const n=e.dom.childNodes;return h.from(n[t]).map(_.fromDom)},Ah=e=>hl(e,0),tf=e=>hl(e,e.dom.childNodes.length-1),Th=e=>e.dom.childNodes.length,UN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return _.fromDom(t)},Rh=e=>_N(e)&&ke(e.dom.host),Ph=Ge(Element.prototype.attachShadow)&&Ge(Node.prototype.getRootNode),zN=K(Ph),Qo=Ph?e=>_.fromDom(e.dom.getRootNode()):vo,nf=e=>Rh(e)?e:UN(vo(e)),HN=e=>{const t=Qo(e);return Rh(t)?h.some(t):h.none()},VN=e=>_.fromDom(e.dom.host),Oh=e=>{if(zN()&&ke(e.target)){const t=_.fromDom(e.target);if(Yn(t)&&WN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ft(n)}}return h.from(e.target)},WN=e=>ke(e.dom.shadowRoot),Wr=e=>{const t=Bn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return HN(_.fromDom(t)).fold(()=>n.body.contains(t),St(Wr,VN))},Dh=(e,t,n)=>{if(!me(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Qi(e)&&e.style.setProperty(t,n)},jN=(e,t)=>{Qi(e)&&e.style.removeProperty(t)},Bh=(e,t,n)=>{const s=e.dom;Dh(s,t,n)},bl=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{Dh(n,o,s)})},Ns=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Wr(e)?Ih(n,t):o},Ih=(e,t)=>Qi(e)?e.style.getPropertyValue(t):"",Cl=(e,t)=>{const n=e.dom,s=Ih(n,t);return h.from(s).filter(o=>o.length>0)},$h=e=>{const t={},n=e.dom;if(Qi(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},Fh=(e,t)=>{const n=e.dom;jN(n,t),Hr(Vr(e,"style").map(zr),"")&&Gt(e,"style")},qN=e=>e.dom.offsetWidth,Qn=(e,t)=>{Xn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Eo=(e,t)=>{Ji(e).fold(()=>{Xn(e).each(o=>{Lt(o,t)})},s=>{Qn(s,t)})},Lh=(e,t)=>{Ah(e).fold(()=>{Lt(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Lt=(e,t)=>{e.dom.appendChild(t.dom)},KN=(e,t)=>{Qn(e,t),Lt(t,e)},GN=(e,t)=>{T(t,(n,s)=>{const o=s===0?e:t[s-1];Eo(o,n)})},Zo=(e,t)=>{T(t,n=>{Lt(e,n)})},ea=e=>{e.dom.textContent="",T(Yt(e),t=>{_t(t)})},_t=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Jo=e=>{const t=Yt(e);t.length>0&&GN(e,t),_t(e)},YN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Yt(_.fromDom(s))},XN=e=>z(e,_.fromDom),Mh=e=>e.dom.innerHTML,sf=(e,t)=>{const s=Sh(e).dom,o=_.fromDom(s.createDocumentFragment()),r=YN(t,s);Zo(o,r),ea(e),Lt(e,o)},QN=e=>{const t=_.fromTag("div"),n=_.fromDom(e.dom.cloneNode(!0));return Lt(t,n),Mh(t)},ZN=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),JN=e=>{const t=_.fromDom(Oh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Ot(s,n);return ZN(t,e.clientX,e.clientY,n,s,o,e)},eA=(e,t)=>n=>{e(n)&&t(JN(n))},tA=(e,t,n,s,o)=>{const r=eA(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(sA,e,t,r,o)}},nA=(e,t,n,s)=>tA(e,t,n,s,!1),sA=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Uh=(e,t)=>({left:e,top:t,translate:(s,o)=>Uh(e+s,t+o)}),jr=Uh,oA=e=>{const t=e.getBoundingClientRect();return jr(t.left,t.top)},yl=(e,t)=>e!==void 0?e:t!==void 0?t:0,rA=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return jr(n.offsetLeft,n.offsetTop);const r=yl(s==null?void 0:s.pageYOffset,o.scrollTop),i=yl(s==null?void 0:s.pageXOffset,o.scrollLeft),a=yl(o.clientTop,n.clientTop),c=yl(o.clientLeft,n.clientLeft);return of(e).translate(i-c,r-a)},of=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?jr(s.offsetLeft,s.offsetTop):Wr(e)?oA(t):jr(0,0)},rf=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return jr(n,s)},zh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Hh=(e,t)=>{Go().browser.isSafari()&&Ge(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},iA=e=>{const t=e===void 0?window:e;return Go().browser.isFirefox()?h.none():h.from(t.visualViewport)},Vh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Wh=e=>{const t=e===void 0?window:e,n=t.document,s=rf(_.fromDom(n));return iA(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return Vh(s.left,s.top,r,i)},o=>Vh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},er=e=>t=>!!t&&t.nodeType===e,vl=e=>!!e&&!Object.getPrototypeOf(e),we=er(1),Zn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return R(t,s)}return!1}},El=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(we(s))for(let o=0;o<n.length;o++){const r=s.ownerDocument.defaultView.getComputedStyle(s,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},jh=e=>t=>we(t)&&t.hasAttribute(e),aA=(e,t)=>n=>we(n)&&n.getAttribute(e)===t,tr=e=>we(e)&&e.hasAttribute("data-mce-bogus"),lA=e=>we(e)&&e.getAttribute("data-mce-bogus")==="all",qr=e=>we(e)&&e.tagName==="TABLE",qh=e=>t=>!!(we(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),af=Zn(["textarea","input"]),te=er(3),cA=er(4),uA=er(7),lf=er(8),cf=er(9),uf=er(11),Tt=Zn(["br"]),Kh=Zn(["img"]),ns=qh("true"),vt=qh("false"),wl=Zn(["td","th"]),As=Zn(["video","audio","object","embed"]),fA=Go().browser,Gh=e=>ge(e,Yn),dA=e=>fA.isFirefox()&&yt(e)==="table"?Gh(Yt(e)).filter(t=>yt(t)==="caption").bind(t=>Gh(Nh(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Yh=(e,t)=>e.children&&R(e.children,t),mA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Ns(_.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!Yh(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Yh(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=dA(_.fromDom(t))}return{x:s,y:o}};var Xh=(e,t,n,s,o)=>e(n,s)?h.some(n):Ge(o)&&o(n)?h.none():t(n,s,o);const Kr=(e,t,n)=>{let s=e.dom;const o=Ge(n)?n:pt;for(;s.parentNode;){s=s.parentNode;const r=_.fromDom(s);if(t(r))return h.some(r);if(o(r))break}return h.none()},Gr=(e,t,n)=>Xh((o,r)=>r(o),Kr,e,t,n),pA=(e,t)=>{const n=e.dom;return n.parentNode?gA(_.fromDom(n.parentNode),s=>!st(e,s)&&t(s)):h.none()},gA=(e,t)=>{const n=o=>t(_.fromDom(o));return ge(e.dom.childNodes,n).map(_.fromDom)},hA=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=_.fromDom(s.childNodes[o]);if(t(r))return h.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return h.none()};return n(e.dom)},ta=(e,t,n)=>Kr(e,s=>ks(s,t),n),na=(e,t)=>IN(t,e),nr=(e,t,n)=>Xh((o,r)=>ks(o,r),ta,e,t,n),Qh=(e,t={})=>{let n=0;const s={},o=_.fromDom(e),r=vo(o),i=t.maxLoadTime||5e3,a=v=>{t.referrerPolicy=v},c=v=>{Lt(nf(o),v)},f=v=>{const x=nf(o);na(x,"#"+v).each(_t)},d=v=>ut(s,v).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=v=>new Promise((x,S)=>{let P;const O=G._addCacheSuffix(v),$=d(O);s[O]=$,$.count++;const U=(ue,se)=>{T(ue,qo),$.status=se,$.passed=[],$.failed=[],P&&(P.onload=null,P.onerror=null,P=null)},ie=()=>U($.passed,2),V=()=>U($.failed,3),j=(ue,se)=>{ue()||(Date.now()-ve<i?setTimeout(se):V())},X=()=>{j(()=>{const ue=e.styleSheets;let se=ue.length;for(;se--;){const je=ue[se].ownerNode;if(je&&je.id===P.id)return ie(),!0}return!1},X)};if(x&&$.passed.push(x),S&&$.failed.push(S),$.status===1)return;if($.status===2){ie();return}if($.status===3){V();return}$.status=1;const J=_.fromTag("link",r.dom);yo(J,{rel:"stylesheet",type:"text/css",id:$.id});const ve=Date.now();t.contentCssCors&&Wt(J,"crossOrigin","anonymous"),t.referrerPolicy&&Wt(J,"referrerpolicy",t.referrerPolicy),P=J.dom,P.onload=X,P.onerror=V,c(J),Wt(J,"href",O)}),C=v=>Promise.allSettled(z(v,S=>p(S).then(K(S)))).then(S=>{const P=be(S,O=>O.status==="fulfilled");return P.fail.length>0?Promise.reject(z(P.fail,O=>O.reason)):z(P.pass,O=>O.value)}),y=v=>{const x=G._addCacheSuffix(v);ut(s,x).each(S=>{--S.count===0&&(delete s[x],f(S.id))})};return{load:p,loadAll:C,unload:y,unloadAll:v=>{T(v,x=>{y(x)})},_setReferrerPolicy:a}},Zh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Qo(n).dom;return h.from(e.get(r)).getOrThunk(()=>{const i=Qh(r,s);return e.set(r,i),i})}}})();class Dt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){let r,i;if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){if(r=t[s],r)return r;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){let s,o,r;if(t){if(s=t.previousSibling,this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}if(o=t.parentNode,o&&o!==this.rootNode)return o}}}const bA=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],CA=["td","th"],yA=["thead","tbody","tfoot"],vA=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],EA=["h1","h2","h3","h4","h5","h6"],wA=["li","dd","dt"],xA=["ul","ol","dl"],SA=["pre","script","textarea","style"],_A=["pre"].concat(EA),wo=e=>{let t;return n=>(t=t||yn(e,ct),Ie(t,yt(n)))},ss=wo(bA),kA=e=>yt(e)==="table",ff=e=>Yn(e)&&!ss(e),Yr=e=>Yn(e)&&yt(e)==="br",NA=wo(vA),df=wo(xA),sa=wo(wA),AA=wo(yA),xl=wo(CA),Sl=wo(SA),TA=wo(_A),RA=e=>TA(e)||ff(e),Jh=(e,t,n)=>ta(e,t,n).isSome(),oa="\uFEFF",Xt="\xA0",eb=e=>e===oa,PA=e=>e.replace(/\uFEFF/g,""),tb=(e,t)=>{let n=[];return T(Yt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(tb(s,t))}),n},En=(e,t)=>BN(t,e),nb=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?h.from(r.dom.nodeValue):h.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(Bn,"text"),mf=e=>nb.get(e),sb=e=>nb.getOption(e),OA=e=>{const t=[];let n=e.dom;for(;n;)t.push(_.fromDom(n)),n=n.lastChild;return t},DA=e=>{const t=En(e,"br"),n=H(OA(e).slice(-1),Yr);t.length===n.length&&T(n,_t)},pf=()=>{const e=_.fromTag("br");return Wt(e,"data-mce-bogus","1"),e},sr=e=>{ea(e),Lt(e,pf())},BA=e=>{tf(e).each(t=>{Xo(t).each(n=>{ss(e)&&Yr(t)&&ss(n)&&_t(t)})})},jt=oa,_l=eb,xo=PA,IA=we,Xr=te,Qr=e=>(Xr(e)&&(e=e.parentNode),IA(e)&&e.hasAttribute("data-mce-caret")),Zr=e=>Xr(e)&&_l(e.data),$n=e=>Qr(e)||Zr(e),ob=e=>e.firstChild!==e.lastChild||!Tt(e.firstChild),$A=(e,t)=>{const s=e.ownerDocument.createTextNode(jt),o=e.parentNode;if(t){const r=e.previousSibling;if(Xr(r)){if($n(r))return r;if(Nl(r))return r.splitText(r.data.length-1)}o.insertBefore(s,e)}else{const r=e.nextSibling;if(Xr(r)){if($n(r))return r;if(kl(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(s,e.nextSibling):o.appendChild(s)}return s},gf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset())===jt||e.isAtStart()&&Zr(t.previousSibling):!1},hf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset()-1)===jt||e.isAtEnd()&&Zr(t.nextSibling):!1},FA=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(pf().dom);const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},kl=e=>Xr(e)&&e.data[0]===jt,Nl=e=>Xr(e)&&e.data[e.data.length-1]===jt,LA=e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];tr(n)&&n.parentNode.removeChild(n)},bf=e=>e&&e.hasAttribute("data-mce-caret")?(LA(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,rb=e=>Qr(e.startContainer),ib=ns,MA=vt,UA=Tt,zA=te,HA=Zn(["script","style","textarea"]),ab=Zn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),VA=Zn(["table"]),WA=$n,Jn=e=>WA(e)?!1:zA(e)?!HA(e.parentNode):ab(e)||UA(e)||VA(e)||Cf(e),jA=e=>we(e)&&e.getAttribute("unselectable")==="true",Cf=e=>jA(e)===!1&&MA(e),qA=(e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Cf(e))return!1;if(ib(e))return!0}return!0},KA=e=>Cf(e)?Q(ht(e.getElementsByTagName("*")),(t,n)=>t||ib(n),!1)!==!0:!1,GA=e=>ab(e)||KA(e),lb=(e,t)=>Jn(e)&&qA(e,t),YA=/^[ \t\r\n]*$/,or=e=>YA.test(e),XA=e=>" \f	\v".indexOf(e)!==-1,cb=e=>e===`
`||e==="\r",QA=(e,t)=>t<e.length&&t>=0?cb(e[t]):!1,ub=(e,t=4,n=!0,s=!0)=>{const o=iN(" ",t),r=e.replace(/\t/g,o);return Q(r,(a,c)=>XA(c)||c===Xt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||QA(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Xt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:cb(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},ZA=(e,t)=>{const n=_.fromDom(t),s=_.fromDom(e);return Jh(s,"pre,code",re(st,n))},JA=(e,t)=>te(e)&&or(e.data)&&ZA(e,t)===!1,eT=e=>we(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Al=(e,t)=>Jn(e)&&JA(e,t)===!1||eT(e)||tT(e),tT=jh("data-mce-bookmark"),nT=jh("data-mce-bogus"),sT=aA("data-mce-bogus","all"),oT=(e,t)=>{let n=0;if(Al(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new Dt(s,e);do{if(t){if(sT(s)){s=o.next(!0);continue}if(nT(s)){s=o.next();continue}}if(Tt(s)){n++,s=o.next();continue}if(Al(s,e))return!1;s=o.next()}while(s);return n<=1}},Mt=(e,t=!0)=>oT(e.dom,t),rT=e=>e.nodeName.toLowerCase()==="span",fb=(e,t)=>ke(e)&&(Al(e,t)||ff(_.fromDom(e))),iT=(e,t)=>{const n=new Dt(e,t).prev(!1),s=new Dt(e,t).next(!1),o=At(n)||fb(n,t),r=At(s)||fb(s,t);return o&&r},db=e=>rT(e)&&e.getAttribute("data-mce-type")==="bookmark",aT=(e,t)=>te(e)&&e.data.length>0&&iT(e,t),lT=e=>we(e)?e.childNodes.length>0:!1,cT=e=>uf(e)||cf(e),yf=(e,t,n)=>{const s=n||t;if(we(t)&&db(t))return t;const o=t.childNodes;for(let r=o.length-1;r>=0;r--)yf(e,o[r],s);if(we(t)){const r=t.childNodes;r.length===1&&db(r[0])&&t.parentNode.insertBefore(r[0],t)}return!cT(t)&&!Al(t,s)&&!lT(t)&&!aT(t,s)&&e.remove(t),t},uT=G.makeMap,Tl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fT=/[<>&\"\']/g,dT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},rr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},pT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},gT=e=>{const t=_.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},mb=(e,t)=>{let n,s,o;const r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)s=String.fromCharCode(parseInt(e[n],t)),rr[s]||(o="&"+e[n+1]+";",r[s]=o,r[o]=s);return r}},vf=mb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),pb=(e,t)=>e.replace(t?Tl:Rl,n=>rr[n]||n),hT=e=>(""+e).replace(fT,t=>rr[t]||t),gb=(e,t)=>e.replace(t?Tl:Rl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":rr[n]||"&#"+n.charCodeAt(0)+";"),Ef=(e,t,n)=>(n=n||vf,e.replace(t?Tl:Rl,s=>rr[s]||n[s]||s)),So={encodeRaw:pb,encodeAllRaw:hT,encodeNumeric:gb,encodeNamed:Ef,getEncodeFunc:(e,t)=>{const n=mb(t)||vf,s=(i,a)=>i.replace(a?Tl:Rl,c=>rr[c]!==void 0?rr[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>Ef(i,a,n),r=uT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:Ef:r.numeric?gb:pb},decode:e=>e.replace(dT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):mT[n]||String.fromCharCode(n)):pT[t]||vf[t]||gT(t))},_o={},bT={},Jr=G.makeMap,Qt=G.each,wf=G.extend,hb=G.explode,CT=G.inArray,qt=(e,t)=>(e=G.trim(e),e?e.split(t||" "):[]),bb=(e,t)=>{const n=Jr(e," ",Jr(e.toUpperCase()," "));return wf(n,t)},Cb=e=>bb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),yT=e=>{const t={};let n,s,o,r,i,a;const c=(d,p="",C="")=>{const y=qt(C),w=qt(d);let v=w.length;for(;v--;){const x=qt([n,p].join(" "));t[w[v]]={attributes:yn(x,()=>({})),attributesOrder:x,children:yn(y,K(bT))}}},f=(d,p)=>{const C=qt(d),y=qt(p);let w=C.length;for(;w--;){const v=t[C[w]];for(let x=0,S=y.length;x<S;x++)v.attributes[y[x]]={},v.attributesOrder.push(y[x])}};return _o[e]?_o[e]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",o=[o,a].join(" "),Qt(qt(a),d=>{c(d,"",o)}),i="center dir isindex noframes",s=[s,i].join(" "),r=[s,o].join(" "),Qt(qt(i),d=>{c(d,"",r)})),r=r||[s,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),c("address dt dd div caption","",r),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",r),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",r),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",r),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",r),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),c("param","name value"),c("map","name",[r,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",r),c("th","colspan rowspan headers scope abbr",r),c("form","accept-charset action autocomplete enctype method name novalidate target",r),c("fieldset","disabled form name",[r,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[r,"li"].join(" ")),c("noscript","",r),e!=="html4"&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",r),c("mark rt rp summary bdi","",o),c("canvas","width height",r),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",r),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[r,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",r),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[r,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),e!=="html4"&&T([t.video,t.audio],d=>{delete d.children.audio,delete d.children.video}),Qt(qt("a form meter progress dfn"),d=>{t[d]&&delete t[d].children[d]}),delete t.caption.children.table,delete t.script,_o[e]=t,t)},xf=(e,t)=>{let n;return e&&(n={},typeof e=="string"&&(e={"*":e}),Qt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Jr(s,/[, ]/):hb(s,/[, ]/)})),n},ko=e=>{var t;const n={},s={};let o=[];const r={},i={},a=(Se,xe,qe)=>{let Ke=e[Se];return Ke?Ke=Jr(Ke,/[, ]/,Jr(Ke.toUpperCase(),/[, ]/)):(Ke=_o[Se],Ke||(Ke=bb(xe,qe),_o[Se]=Ke)),Ke};e=e||{};const c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=yT(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=xf(e.valid_styles),p=xf(e.invalid_styles,"map"),C=xf(e.valid_classes,"map"),y=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),S="td th iframe video audio object script code",P=a("non_empty_elements",S+" pre",v),O=a("move_caret_before_on_enter_elements",S+" table",v),$=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),U=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",$),ie=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Qt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Se=>{i[Se]=new RegExp("</"+Se+"[^>]*>","gi")});const V=Se=>new RegExp("^"+Se.replace(/([?+*])/g,".$1")+"$"),j=Se=>{let xe,qe,Ke,Pt,tt,Fe,nt,Zt,Jt,Vt,ms,gn,on,Hn,Lo,Us,zs,ps;const kr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Mo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Vn=/[*?+]/;if(Se){const gs=qt(Se,",");for(n["@"]&&(Us=n["@"].attributes,zs=n["@"].attributesOrder),xe=0,qe=gs.length;xe<qe;xe++)if(tt=kr.exec(gs[xe]),tt){if(Hn=tt[1],Jt=tt[2],Lo=tt[3],Zt=tt[5],gn={},on=[],Fe={attributes:gn,attributesOrder:on},Hn==="#"&&(Fe.paddEmpty=!0),Hn==="-"&&(Fe.removeEmpty=!0),tt[4]==="!"&&(Fe.removeEmptyAttrs=!0),Us&&(bt(Us,(Nr,hs)=>{gn[hs]=Nr}),on.push.apply(on,zs)),Zt){for(Zt=qt(Zt,"|"),Ke=0,Pt=Zt.length;Ke<Pt;Ke++)if(tt=Mo.exec(Zt[Ke]),tt){if(nt={},ms=tt[1],Vt=tt[2].replace(/[\\:]:/g,":"),Hn=tt[3],ps=tt[4],ms==="!"&&(Fe.attributesRequired=Fe.attributesRequired||[],Fe.attributesRequired.push(Vt),nt.required=!0),ms==="-"){delete gn[Vt],on.splice(CT(on,Vt),1);continue}Hn&&(Hn==="="&&(Fe.attributesDefault=Fe.attributesDefault||[],Fe.attributesDefault.push({name:Vt,value:ps}),nt.defaultValue=ps),Hn==="~"&&(Fe.attributesForced=Fe.attributesForced||[],Fe.attributesForced.push({name:Vt,value:ps}),nt.forcedValue=ps),Hn==="<"&&(nt.validValues=Jr(ps,"?"))),Vn.test(Vt)?(Fe.attributePatterns=Fe.attributePatterns||[],nt.pattern=V(Vt),Fe.attributePatterns.push(nt)):(gn[Vt]||on.push(Vt),gn[Vt]=nt)}}!Us&&Jt==="@"&&(Us=gn,zs=on),Lo&&(Fe.outputName=Jt,n[Lo]=Fe),Vn.test(Jt)?(Fe.pattern=V(Jt),o.push(Fe)):n[Jt]=Fe}}},X=Se=>{o=[],T(Gn(n),xe=>{delete n[xe]}),j(Se),Qt(f,(xe,qe)=>{s[qe]=xe.children})},J=Se=>{const xe=/^(~)?(.+)$/;Se&&(_o.text_block_elements=_o.block_elements=null,Qt(qt(Se,","),qe=>{const Ke=xe.exec(qe),Pt=Ke[1]==="~",tt=Pt?"span":"div",Fe=Ke[2];if(s[Fe]=s[tt],r[Fe]=tt,P[Fe.toUpperCase()]={},P[Fe]={},Pt||(U[Fe.toUpperCase()]={},U[Fe]={}),!n[Fe]){let nt=n[tt];nt=wf({},nt),delete nt.removeEmptyAttrs,delete nt.removeEmpty,n[Fe]=nt}Qt(s,(nt,Zt)=>{nt[tt]&&(s[Zt]=nt=wf({},s[Zt]),nt[Fe]=nt[tt])})}))},ve=Se=>{const xe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;_o[c]=null,Se&&Qt(qt(Se,","),qe=>{const Ke=xe.exec(qe);let Pt,tt;Ke&&(tt=Ke[1],tt?Pt=s[Ke[2]]:Pt=s[Ke[2]]={"#comment":{}},Pt=s[Ke[2]],Qt(qt(Ke[3],"|"),Fe=>{tt==="-"?delete Pt[Fe]:Pt[Fe]={}}))})},ue=Se=>{let xe=n[Se],qe;if(xe)return xe;for(qe=o.length;qe--;)if(xe=o[qe],xe.pattern.test(Se))return xe};e.valid_elements?X(e.valid_elements):(Qt(f,(Se,xe)=>{n[xe]={attributes:Se.attributes,attributesOrder:Se.attributesOrder},s[xe]=Se.children}),Qt(qt("strong/b em/i"),Se=>{const xe=qt(Se,"/");n[xe[1]].outputName=xe[0]}),Qt(ie,(Se,xe)=>{n[xe]&&(e.padd_empty_block_inline_children&&(n[xe].paddInEmptyBlock=!0),n[xe].removeEmpty=!0)}),Qt(qt("ol ul blockquote a table tbody"),Se=>{n[Se]&&(n[Se].removeEmpty=!0)}),Qt(qt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Se=>{n[Se].paddEmpty=!0}),Qt(qt("span"),Se=>{n[Se].removeEmptyAttrs=!0})),J(e.custom_elements),ve(e.valid_children),j(e.extended_valid_elements),ve("+ol[ul|ol],+ul[ul|ol]"),Qt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Se,xe)=>{n[xe]&&(n[xe].parentsRequired=qt(Se))}),e.invalid_elements&&Qt(hb(e.invalid_elements),Se=>{n[Se]&&delete n[Se]}),ue("span")||j("span[!data-mce-type|*]");const se=K(d),ze=K(p),je=K(C),Je=K(x),Rt=K(U),Y=K($),he=K(ie),$e=K(Object.seal(v)),De=K(w),Bt=K(P),ne=K(O),Ee=K(y),fe=K(Object.seal(i)),ee=(Se,xe)=>{const qe=s[Se.toLowerCase()];return!!(qe&&qe[xe.toLowerCase()])},Be=(Se,xe)=>{let qe,Ke;const Pt=ue(Se);if(Pt)if(xe){if(Pt.attributes[xe])return!0;if(qe=Pt.attributePatterns,qe){for(Ke=qe.length;Ke--;)if(qe[Ke].pattern.test(xe))return!0}}else return!0;return!1},Le=K(r);return{type:c,children:s,elements:n,getValidStyles:se,getValidClasses:je,getBlockElements:Rt,getInvalidStyles:ze,getVoidElements:$e,getTextBlockElements:Y,getTextInlineElements:he,getBoolAttrs:Je,getElementRule:ue,getSelfClosingElements:De,getNonEmptyElements:Bt,getMoveCaretBeforeOnEnterElements:ne,getWhitespaceElements:Ee,getSpecialElements:fe,isValidChild:ee,isValid:Be,getCustomElements:Le,addValidElements:j,setValidElements:X,addCustomElements:J,addValidChildren:ve}},Sf=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/;let r;const i={};let a,c;const f=oa;e=e||{},t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+f).split(" ");for(r=0;r<d.length;r++)i[d[r]]=f+r,i[f+r]=d[r];const p={parse:C=>{const y={};let w,v,x,S;const P=e.url_converter,O=e.url_converter_scope||p,$=(ue,se,ze)=>{const je=y[ue+"-top"+se];if(!je)return;const Je=y[ue+"-right"+se];if(!Je)return;const Rt=y[ue+"-bottom"+se];if(!Rt)return;const Y=y[ue+"-left"+se];if(!Y)return;const he=[je,Je,Rt,Y];for(r=he.length-1;r--&&he[r]===he[r+1];);r>-1&&ze||(y[ue+se]=r===-1?he[0]:he.join(" "),delete y[ue+"-top"+se],delete y[ue+"-right"+se],delete y[ue+"-bottom"+se],delete y[ue+"-left"+se])},U=ue=>{let se=y[ue],ze;if(!!se){for(se=se.split(" "),ze=se.length;ze--;)if(se[ze]!==se[0])return!1;return y[ue]=se[0],!0}},ie=(ue,se,ze,je)=>{!U(se)||!U(ze)||!U(je)||(y[ue]=y[se]+" "+y[ze]+" "+y[je],delete y[se],delete y[ze],delete y[je])},V=ue=>(S=!0,i[ue]),j=(ue,se)=>(S&&(ue=ue.replace(/\uFEFF[0-9]/g,ze=>i[ze])),se||(ue=ue.replace(/\\([\'\";:])/g,"$1")),ue),X=ue=>String.fromCharCode(parseInt(ue.slice(1),16)),J=ue=>ue.replace(/\\[0-9a-f]+/gi,X),ve=(ue,se,ze,je,Je,Rt)=>{if(Je=Je||Rt,Je)return Je=j(Je),"'"+Je.replace(/\'/g,"\\'")+"'";if(se=j(se||ze||je),!e.allow_script_urls){const Y=se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Y)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Y))return""}return P&&(se=P.call(O,se,"style")),"url('"+se.replace(/\'/g,"\\'")+"')"};if(C){for(C=C.replace(/[\u0000-\u001F]/g,""),C=C.replace(/\\[\"\';:\uFEFF]/g,V).replace(/\"[^\"]+\"|\'[^\']+\'/g,ue=>ue.replace(/[;:]/g,V));w=s.exec(C);)if(s.lastIndex=w.index+w[0].length,v=w[1].replace(o,"").toLowerCase(),x=w[2].replace(o,""),v&&x){if(v=J(v),x=J(x),v.indexOf(f)!==-1||v.indexOf('"')!==-1||!e.allow_script_urls&&(v==="behavior"||/expression\s*\(|\/\*|\*\//.test(x)))continue;v==="font-weight"&&x==="700"?x="bold":(v==="color"||v==="background-color")&&(x=x.toLowerCase()),x=x.replace(n,ve),y[v]=S?j(x,!0):x}$("border","",!0),$("border","-width"),$("border","-color"),$("border","-style"),$("padding",""),$("margin",""),ie("border","border-width","border-style","border-color"),y.border==="medium none"&&delete y.border,y["border-image"]==="none"&&delete y["border-image"]}return y},serialize:(C,y)=>{let w="";const v=S=>{let P;const O=a[S];if(O)for(let $=0,U=O.length;$<U;$++)S=O[$],P=C[S],P&&(w+=(w.length>0?" ":"")+S+": "+P+";")},x=(S,P)=>{let O=c["*"];return O&&O[S]?!1:(O=c[P],!(O&&O[S]))};return y&&a?(v("*"),v(y)):bt(C,(S,P)=>{S&&(!c||x(P,y))&&(w+=(w.length>0?" ":"")+P+": "+S+";")}),w}};return p},vT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ET=e=>e instanceof Event||Ge(e.initEvent),wT=e=>e.isDefaultPrevented===ct||e.isDefaultPrevented===pt,xT=e=>It(e.preventDefault)||ET(e),yb=(e,t)=>{const n=t!=null?t:{};for(const s in e)Ie(vT,s)||(n[s]=e[s]);return ke(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},_f=(e,t,n,s)=>{var o;const r=yb(t,s);return r.type=e,It(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),xT(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=ct,Ge(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=ct,Ge(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=ct,r.stopPropagation()},wT(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?ct:pt,r.isPropagationStopped=r.cancelBubble===!0?ct:pt,r.isImmediatePropagationStopped=pt)),r},ST="mce-data-",_T=/^(?:mouse|contextmenu)|click/,kf=(e,t,n,s)=>{e.addEventListener?e.addEventListener(t,n,s||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Pl=(e,t,n,s)=>{e.removeEventListener?e.removeEventListener(t,n,s||!1):e.detachEvent&&e.detachEvent("on"+t,n)},kT=e=>ke(e)&&_T.test(e.type),ei=(e,t)=>{const n=_f(e.type,e,document,t);if(kT(e)&&At(e.pageX)&&!At(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},NT=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{Pl(e,"DOMContentLoaded",i),Pl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():kf(e,"DOMContentLoaded",i),n.domLoaded||kf(e,"load",i)};class ir{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=ST+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i,a,c,f,d,p,C;const y=window,w=x=>{r.executeHandlers(ei(x||y.event),i)};if(!t||t.nodeType===3||t.nodeType===8)return;t[r.expando]?i=t[r.expando]:(i=r.count++,t[r.expando]=i,r.events[i]={}),o=o||t;const v=n.split(" ");for(c=v.length;c--;){if(f=v[c],p=w,d=C=!1,f==="DOMContentLoaded"&&(f="ready"),r.domLoaded&&f==="ready"&&t.readyState==="complete"){s.call(o,ei({type:f}));continue}r.hasMouseEnterLeave||(d=r.mouseEnterLeave[f],d&&(p=x=>{const S=x.currentTarget;let P=x.relatedTarget;if(P&&S.contains)P=S.contains(P);else for(;P&&P!==S;)P=P.parentNode;P||(x=ei(x||y.event),x.type=x.type==="mouseout"?"mouseleave":"mouseenter",x.target=S,r.executeHandlers(x,i))})),!r.hasFocusIn&&(f==="focusin"||f==="focusout")&&(C=!0,d=f==="focusin"?"focus":"blur",p=x=>{x=ei(x||y.event),x.type=x.type==="focus"?"focusin":"focusout",r.executeHandlers(x,i)}),a=r.events[i][f],a?f==="ready"&&r.domLoaded?s(ei({type:f})):a.push({func:s,scope:o}):(r.events[i][f]=a=[{func:s,scope:o}],a.fakeName=d,a.capture=C,a.nativeHandler=p,f==="ready"?NT(t,p,r):kf(t,d||f,p,C))}return t=a=null,s}unbind(t,n,s){let o,r,i,a,c;if(!t||t.nodeType===3||t.nodeType===8)return this;const f=t[this.expando];if(f){if(c=this.events[f],n){const d=n.split(" ");for(r=d.length;r--;)if(a=d[r],o=c[a],o){if(s){for(i=o.length;i--;)if(o[i].func===s){const p=o.nativeHandler,C=o.fakeName,y=o.capture;o=o.slice(0,i).concat(o.slice(i+1)),o.nativeHandler=p,o.fakeName=C,o.capture=y,c[a]=o}}(!s||o.length===0)&&(delete c[a],Pl(t,o.fakeName||a,o.nativeHandler,o.capture))}}else bt(c,(d,p)=>{Pl(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(a in c)if(Ie(c,a))return this;delete this.events[f];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){let o;if(!t||t.nodeType===3||t.nodeType===8)return this;const r=ei({type:n,target:t},s);do o=t[this.expando],o&&this.executeHandlers(r,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return this}clean(t){let n,s;if(!t||t.nodeType===3||t.nodeType===8)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),s=t.getElementsByTagName("*"),n=s.length;n--;)t=s[n],t[this.expando]&&this.unbind(t);return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ir.Event=new ir;const Nf=G.each,AT=G.grep,Af="data-mce-style",ra=(e,t,n)=>{It(n)||n===""?Gt(e,t):Wt(e,t,n)},TT=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=_.fromDom(i);Ge(t.url_converter)&&ke(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),a,c,i[0]));const d="data-mce-"+c;ra(f,d,a),ra(f,c,a)},get:(i,a)=>{const c=_.fromDom(i);return In(c,"data-mce-"+a)||In(c,a)}},r={style:{set:(i,a)=>{const c=_.fromDom(i);if(ft(a)){bl(c,a);return}s&&ra(c,Af,a),Gt(c,"style"),me(a)&&bl(c,e.parse(a))},get:i=>{const a=_.fromDom(i),c=In(a,Af)||In(a,"style");return e.serialize(e.parse(c),yt(a))}}};return s&&(r.href=r.src=o),r},RT=(e,t)=>{const n=In(t,"style"),s=e.serialize(e.parse(n),yt(t));ra(t,Af,s)},ti=(e,t)=>{let n=0,s,o;if(e)for(s=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,!(t&&o===3&&(o===s||!e.nodeValue.length))&&(n++,s=o);return n},PT=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),vb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),at=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=Zh.forElement(_.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],d=t.schema?t.schema:ko({}),p=Sf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),C=t.ownEvents?new ir:ir.Event,y=d.getBlockElements(),w=A=>me(A)?Ie(y,A):we(A)&&Ie(y,A.nodeName),v=A=>A&&e&&me(A)?e.getElementById(A):A,x=A=>{const B=v(A);return ke(B)?_.fromDom(B):null},S=(A,B,q)=>{let W;const Ce=x(A);if(ke(Ce)&&Yn(Ce)){const Ve=gu[B];Ve&&Ve.get?W=Ve.get(Ce.dom,B):W=In(Ce,B)}return ke(W)?W:q!=null?q:""},P=A=>{const B=v(A);return It(B)?[]:B.attributes},O=(A,B,q)=>{$e(A,W=>{if(we(W)){const Ce=_.fromDom(W);q===""&&(q=null);const Ve=In(Ce,B),He=gu[B];He&&He.set?He.set(Ce.dom,q,B):ra(Ce,B,q),Ve!==q&&t.onSetAttrib&&t.onSetAttrib({attrElm:Ce,attrName:B,attrValue:q})}})},$=(A,B)=>A.cloneNode(B),U=()=>t.root_element||e.body,ie=A=>{const B=Wh(A);return{x:B.x,y:B.y,w:B.width,h:B.height}},V=(A,B)=>mA(e.body,v(A),B),j=(A,B,q)=>{const W=(Ve,He)=>me(Ve)?Ve:Cn(Ve)?Ie(PT,He)?Ve+"":Ve+"px":Vi(Ve,W),Ce=(Ve,He,_n)=>{const bs=vb(He);It(_n)||_n===""?Fh(Ve,bs):Bh(Ve,bs,W(_n,bs))};$e(A,Ve=>{const He=_.fromDom(Ve);me(B)?Ce(He,B,q):bt(B,(_n,bs)=>{Ce(He,bs,_n)}),t.update_styles&&RT(p,He)})},X=(A,B)=>{j(A,B)},J=(A,B,q)=>{const W=v(A);if(!(It(W)||!we(W)))return q?Ns(_.fromDom(W),vb(B)):(B=B.replace(/-(\D)/g,(Ce,Ve)=>Ve.toUpperCase()),B==="float"&&(B="cssFloat"),W.style?W.style[B]:void 0)},ve=A=>{let B,q;const W=v(A);return B=J(W,"width"),q=J(W,"height"),B.indexOf("px")===-1&&(B=0),q.indexOf("px")===-1&&(q=0),{w:parseInt(B,10)||W.offsetWidth||W.clientWidth,h:parseInt(q,10)||W.offsetHeight||W.clientHeight}},ue=A=>{const B=v(A),q=V(B),W=ve(B);return{x:q.x,y:q.y,w:W.w,h:W.h}},se=(A,B)=>{if(!A)return!1;const q=Nt(A)?A:[A];return M(q,W=>ks(_.fromDom(W),B))},ze=(A,B,q,W)=>{const Ce=[];let Ve,He=v(A);for(W=W===void 0,q=q||(U().nodeName!=="BODY"?U().parentNode:null),me(B)&&(Ve=B,B==="*"?B=we:B=_n=>se(_n,Ve));He&&!(He===q||It(He.nodeType)||cf(He)||uf(He));){if(!B||B(He))if(W)Ce.push(He);else return[He];He=He.parentNode}return W?Ce:null},je=(A,B,q)=>{const W=ze(A,B,q,!1);return W&&W.length>0?W[0]:null},Je=(A,B,q)=>{let W=B;if(A){for(me(B)&&(W=Ce=>se(Ce,B)),A=A[q];A;A=A[q])if(Ge(W)&&W(A))return A}return null},Rt=(A,B)=>Je(A,B,"nextSibling"),Y=(A,B)=>Je(A,B,"previousSibling"),he=(A,B)=>{var q,W;const Ce=(W=(q=v(B))!==null&&q!==void 0?q:t.root_element)!==null&&W!==void 0?W:e;return ht(Ce.querySelectorAll(A))},$e=function(A,B,q){const W=q!=null?q:this,Ce=me(A)?v(A):A;if(!Ce)return!1;if(Nt(Ce)&&(Ce.length||Ce.length===0)){const Ve=[];return Nf(Ce,(He,_n)=>{He&&Ve.push(B.call(W,me(He)?v(He):He,_n))}),Ve}else return B.call(W,Ce)},De=(A,B)=>{$e(A,q=>{bt(B,(W,Ce)=>{O(q,Ce,W)})})},Bt=(A,B)=>{$e(A,q=>{const W=_.fromDom(q);sf(W,B)})},ne=(A,B,q,W,Ce)=>$e(A,Ve=>{const He=me(B)?e.createElement(B):B;return ke(q)&&De(He,q),W&&(!me(W)&&W.nodeType?He.appendChild(W):me(W)&&Bt(He,W)),Ce?He:Ve.appendChild(He)}),Ee=(A,B,q)=>ne(e.createElement(A),A,B,q,!0),fe=So.decode,ee=So.encodeAllRaw,Be=(A,B,q="")=>{let W="",Ce;W+="<"+A;for(Ce in B)Mr(B,Ce)&&(W+=" "+Ce+'="'+ee(B[Ce])+'"');return ml(q)&&Ie(d.getVoidElements(),A)?W+" />":W+">"+q+"</"+A+">"},Le=A=>{let B;const q=e.createElement("div"),W=e.createDocumentFragment();for(W.appendChild(q),A&&(q.innerHTML=A);B=q.firstChild;)W.appendChild(B);return W.removeChild(q),W},Se=(A,B)=>$e(A,q=>{const W=_.fromDom(q);return B&&T(Yt(W),Ce=>{Bn(Ce)&&Ce.dom.length===0?_t(Ce):Qn(W,Ce)}),_t(W),W.dom}),xe=A=>$e(A,B=>{const q=B.attributes;for(let W=q.length-1;W>=0;W--)B.removeAttributeNode(q.item(W))}),qe=A=>p.parse(A),Ke=(A,B)=>p.serialize(A,B),Pt=A=>{let B,q;if(uo!==at.DOM&&e===document){if(n[A])return;n[A]=!0}q=e.getElementById("mceDefaultStyles"),q||(q=e.createElement("style"),q.id="mceDefaultStyles",q.type="text/css",B=e.getElementsByTagName("head")[0],B.firstChild?B.insertBefore(q,B.firstChild):B.appendChild(q)),q.styleSheet?q.styleSheet.cssText+=A:q.appendChild(e.createTextNode(A))},tt=A=>{A||(A=""),T(A.split(","),B=>{o[B]=!0,c.load(B).catch(Oe)})},Fe=(A,B,q)=>{$e(A,W=>{if(we(W)){const Ce=_.fromDom(W),Ve=B.split(" ");T(Ve,He=>{ke(q)?(q?Xi:gl)(Ce,He):RN(Ce,He)})}})},nt=(A,B)=>{Fe(A,B,!0)},Zt=(A,B)=>{Fe(A,B,!1)},Jt=(A,B)=>{const q=x(A),W=B.split(" ");return ot(W,Ce=>ef(q,Ce))},Vt=A=>{$e(A,B=>Fh(_.fromDom(B),"display"))},ms=A=>{$e(A,B=>Bh(_.fromDom(B),"display","none"))},gn=A=>{const B=x(A);return Hr(Cl(B,"display"),"none")},on=A=>(A||"mce_")+r++,Hn=A=>{const B=x(A);return we(B.dom)?B.dom.outerHTML:QN(B)},Lo=(A,B)=>{$e(A,q=>{we(q)&&(q.outerHTML=B)})},Us=(A,B)=>{const q=v(B);return $e(A,W=>{const Ce=q.parentNode,Ve=q.nextSibling;return Ve?Ce.insertBefore(W,Ve):Ce.appendChild(W),W})},zs=(A,B,q)=>$e(B,W=>(Nt(W)&&(A=A.cloneNode(!0)),q&&Nf(AT(W.childNodes),Ce=>{A.appendChild(Ce)}),W.parentNode.replaceChild(A,W))),ps=(A,B)=>{let q;return A.nodeName!==B.toUpperCase()&&(q=Ee(B),Nf(P(A),W=>{O(q,W.nodeName,S(A,W.nodeName))}),zs(q,A,!0)),q||A},kr=(A,B)=>{let q=A,W;for(;q;){for(W=B;W&&q!==W;)W=W.parentNode;if(q===W)break;q=q.parentNode}return!q&&A.ownerDocument?A.ownerDocument.documentElement:q},Mo=A=>{if(we(A)){const B=A.nodeName.toLowerCase()==="a"&&!S(A,"href")&&S(A,"id");if(S(A,"name")||S(A,"data-mce-bookmark")||B)return!0}return!1},Vn=(A,B)=>{let q,W,Ce=0;if(Mo(A))return!1;if(A=A.firstChild,A){const Ve=new Dt(A,A.parentNode),He=d?d.getWhitespaceElements():{};B=B||(d?d.getNonEmptyElements():null);do{if(q=A.nodeType,we(A)){const _n=A.getAttribute("data-mce-bogus");if(_n){A=Ve.next(_n==="all");continue}if(W=A.nodeName.toLowerCase(),B&&B[W]){if(W==="br"){Ce++,A=Ve.next();continue}return!1}if(Mo(A))return!1}if(q===8||q===3&&!or(A.nodeValue)||q===3&&A.parentNode&&He[A.parentNode.nodeName]&&or(A.nodeValue))return!1;A=Ve.next()}while(A)}return Ce<=1},gs=()=>e.createRange(),Nr=(A,B,q)=>{let W=gs(),Ce,Ve,He;if(A&&B)return W.setStart(A.parentNode,ti(A)),W.setEnd(B.parentNode,ti(B)),Ce=W.extractContents(),W=gs(),W.setStart(B.parentNode,ti(B)+1),W.setEnd(A.parentNode,ti(A)+1),Ve=W.extractContents(),He=A.parentNode,He.insertBefore(yf(uo,Ce),A),q?He.insertBefore(q,A):He.insertBefore(B,A),He.insertBefore(yf(uo,Ve),A),Se(A),q||B},hs=(A,B,q,W)=>{if(Nt(A)){let Ce=A.length;const Ve=[];for(;Ce--;)Ve[Ce]=hs(A[Ce],B,q,W);return Ve}else return t.collect&&(A===e||A===s)&&f.push([A,B,q,W]),C.bind(A,B,q,W||uo)},mu=(A,B,q)=>{if(Nt(A)){let W=A.length;const Ce=[];for(;W--;)Ce[W]=mu(A[W],B,q);return Ce}else{if(f.length>0&&(A===e||A===s)){let W=f.length;for(;W--;){const Ce=f[W];A===Ce[0]&&(!B||B===Ce[1])&&(!q||q===Ce[2])&&C.unbind(Ce[0],Ce[1],Ce[2])}}return C.unbind(A,B,q)}},Vp=(A,B,q)=>C.dispatch(A,B,q),lo=(A,B,q)=>C.dispatch(A,B,q),co=A=>{if(A&&we(A)){const B=A.getAttribute("data-mce-contenteditable");return B&&B!=="inherit"?B:A.contentEditable!=="inherit"?A.contentEditable:null}else return null},uo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:d,events:C,isBlock:w,root:null,clone:$,getRoot:U,getViewPort:ie,getRect:ue,getSize:ve,getParent:je,getParents:ze,get:v,getNext:Rt,getPrev:Y,select:he,is:se,add:ne,create:Ee,createHTML:Be,createFragment:Le,remove:Se,setStyle:j,getStyle:J,setStyles:X,removeAllAttribs:xe,setAttrib:O,setAttribs:De,getAttrib:S,getPos:V,parseStyle:qe,serializeStyle:Ke,addStyle:Pt,loadCSS:tt,addClass:nt,removeClass:Zt,hasClass:Jt,toggleClass:Fe,show:Vt,hide:ms,isHidden:gn,uniqueId:on,setHTML:Bt,getOuterHTML:Hn,setOuterHTML:Lo,decode:fe,encode:ee,insertAfter:Us,replace:zs,rename:ps,findCommonAncestor:kr,run:$e,getAttribs:P,isEmpty:Vn,createRng:gs,nodeIndex:ti,split:Nr,bind:hs,unbind:mu,fire:lo,dispatch:Vp,getContentEditable:co,getContentEditableParent:A=>{const B=U();let q=null;for(;A&&A!==B&&(q=co(A),q===null);A=A.parentNode);return q},destroy:()=>{if(f.length>0){let A=f.length;for(;A--;){const B=f[A];C.unbind(B[0],B[1],B[2])}}bt(o,(A,B)=>{c.unload(B),delete o[B]})},isChildOf:(A,B)=>A===B||B.contains(A),dumpRng:A=>"startContainer: "+A.startContainer.nodeName+", startOffset: "+A.startOffset+", endContainer: "+A.endContainer.nodeName+", endOffset: "+A.endOffset},gu=TT(p,t,K(uo));return uo};at.DOM=at(document),at.nodeIndex=ti;const OT=at.DOM,DT=0,BT=1,Ol=2,Eb=3;class to{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=OT;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Ol}markDone(t){this.states[t]=Ol}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=DT),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{ut(n.scriptLoadedCallbacks,f).each(d=>{T(d,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=H(c,d=>d.status==="rejected");return f.length>0?Promise.reject(We(f,({reason:d})=>Nt(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(z(c,f=>n.states[f]===Ol?(s("resolve",f),Promise.resolve()):n.states[f]===Eb?(s("reject",f),Promise.reject(f)):(n.states[f]=BT,n.loadScript(f).then(()=>{n.states[f]=Ol,s("resolve",f);const d=n.queue;if(d.length>0)return n.queue=[],r(d).then(o)},()=>(n.states[f]=Eb,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return h.from(d).each(qo),o(f)})),a=Bg(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,f))}):i(a)}}to.ScriptLoader=new to;const Ut=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},IT=e=>ft(e)&&Ie(e,"raw"),$T=e=>Nt(e)&&e.length>1,ia={},Tf=Ut("en"),wb=()=>ut(ia,Tf.get()),os={getData:()=>Vi(ia,e=>({...e})),setCode:e=>{e&&Tf.set(e)},getCode:()=>Tf.get(),add:(e,t)=>{let n=ia[e];n||(ia[e]=n={}),bt(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=wb().getOr({}),n=i=>Ge(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return ut(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(IT(e))return n(e.raw);if($T(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Ie(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>wb().bind(e=>ut(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ie(ia,e)},nn=()=>{const e=[],t={},n={},s=[],o=(v,x)=>{const S=H(s,P=>P.name===v&&P.state===x);T(S,P=>P.resolve())},r=v=>Ie(t,v),i=v=>Ie(n,v),a=v=>{if(n[v])return n[v].instance},c=(v,x)=>{const S=os.getCode(),P=","+(x||"")+",";!S||x&&P.indexOf(","+S+",")===-1||to.ScriptLoader.add(t[v]+"/langs/"+S+".js")},f=(v,x)=>{nn.languageLoad!==!1&&(r(v)?c(v,x):w(v,"loaded").then(()=>c(v,x)))},d=(v,x)=>(e.push(x),n[v]={instance:x},o(v,"added"),x),p=v=>{delete t[v],delete n[v]},C=(v,x)=>me(x)?me(v)?{prefix:"",resource:x,suffix:""}:{prefix:v.prefix,resource:x,suffix:v.suffix}:x,y=(v,x)=>{if(t[v])return Promise.resolve();let S=me(x)?x:x.prefix+x.resource+x.suffix;S.indexOf("/")!==0&&S.indexOf("://")===-1&&(S=nn.baseURL+"/"+S),t[v]=S.substring(0,S.lastIndexOf("/"));const P=()=>(o(v,"loaded"),Promise.resolve());return n[v]?P():to.ScriptLoader.add(S).then(P)},w=(v,x="added")=>x==="added"&&i(v)||x==="loaded"&&r(v)?Promise.resolve():new Promise(S=>{s.push({name:v,state:x,resolve:S})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:d,remove:p,createUrl:C,load:y,waitFor:w}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const FT=e=>{const t=Ut(h.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(h.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(h.some(a))}}},No=()=>{const e=FT(Oe);return{...e,on:n=>e.get().each(n)}},Dl=(e,t)=>{let n=null;return{cancel:()=>{Ys(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Ys(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Rf=(e,t)=>{let n=null;const s=()=>{Ys(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},aa=K("mce-annotation"),ar=K("data-mce-annotation"),ni=K("data-mce-annotation-uid"),la=K("data-mce-annotation-active"),ca=K("data-mce-annotation-classes"),ua=K("data-mce-annotation-attrs"),xb=e=>t=>st(t,e),Sb=(e,t)=>{const n=e.selection.getRng(),s=_.fromDom(n.startContainer),o=_.fromDom(e.getBody()),r=t.fold(()=>"."+aa(),f=>`[${ar()}="${f}"]`),i=hl(s,n.startOffset).getOr(s),a=nr(i,r,xb(o)),c=(f,d)=>Gi(f,d)?h.some(In(f,d)):h.none();return a.bind(f=>c(f,`${ni()}`).bind(d=>c(f,`${ar()}`).map(p=>{const C=kb(e,d);return{uid:d,name:p,elements:C}})))},LT=e=>Yn(e)&&ef(e,aa()),_b=(e,t)=>Gi(e,"data-mce-bogus")||Jh(e,'[data-mce-bogus="all"]',xb(t)),kb=(e,t)=>{const n=_.fromDom(e.getBody()),s=En(n,`[${ni()}="${t}"]`);return H(s,o=>!_b(o,n))},Nb=(e,t)=>{const n=_.fromDom(e.getBody()),s=En(n,`[${ar()}="${t}"]`),o={};return T(s,r=>{if(!_b(r,n)){const i=In(r,ni()),a=ut(o,i).getOr([]);o[i]=a.concat([r])}}),o},MT=(e,t)=>{const n=Ut({}),s=()=>({listeners:[],previous:No()}),o=(p,C)=>{r(p,y=>(C(y),y))},r=(p,C)=>{const y=n.get(),w=ut(y,p).getOrThunk(s),v=C(w);y[p]=v,n.set(y)},i=(p,C,y)=>{o(p,w=>{T(w.listeners,v=>v(!0,p,{uid:C,nodes:z(y,x=>x.dom)}))})},a=p=>{o(p,C=>{T(C.listeners,y=>y(!1,p))})},c=(p,C)=>{T(kb(e,p),y=>{C?Wt(y,la(),"true"):Gt(y,la())})},f=Rf(()=>{const p=Kn(t.getNames());T(p,C=>{r(C,y=>{const w=y.previous.get();return Sb(e,h.some(C)).fold(()=>{w.each(v=>{a(C),y.previous.clear(),c(v,!1)})},({uid:v,name:x,elements:S})=>{Hr(w,v)||(w.each(P=>c(P,!1)),i(x,v,S),y.previous.set(v),c(v,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,C)=>{r(p,y=>({previous:y.previous,listeners:y.listeners.concat([C])}))}}},UT=(e,t)=>{const n=ar(),s=r=>h.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(ni(),null),r.attr(ar(),null),r.attr(la(),null);const c=h.from(r.attr(ua())).map(C=>C.split(",")).getOr([]),f=h.from(r.attr(ca())).map(C=>C.split(",")).getOr([]);T(c,C=>r.attr(C,null));const d=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],p=gt(d,[aa()].concat(f));r.attr("class",p.length>0?p.join(" "):null),r.attr(ca(),null),r.attr(ua(),null)};e.serializer.addTempAttr(la()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},zT=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>ut(e,o).map(r=>r.settings),getNames:()=>Gn(e)}};let Ab=0;const Tb=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Ab++,e+"_"+s+Ab+String(n)},HT=(e,t)=>{T(t,n=>{Xi(e,n)})},VT=(e,t)=>{T(t,n=>{gl(e,n)})},Rb=(e,t)=>_.fromDom(e.dom.cloneNode(t)),si=e=>Rb(e,!1),Pb=e=>Rb(e,!0),WT=(e,t)=>{const n=_.fromTag(t),s=bh(e);return yo(n,s),n},jT=(e,t)=>{const n=WT(e,t);Eo(e,n);const s=Yt(e);return Zo(n,s),_t(e),n},Ob=(e,t,n=pt)=>{const s=new Dt(e,t),o=r=>{let i;do i=s[r]();while(i&&!te(i)&&!n(i));return h.from(i).filter(te)};return{current:()=>h.from(s.current()).filter(te),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},lr=(e,t)=>{const n=t||(i=>e.isBlock(i)||Tt(i)||vt(i)),s=(i,a,c,f)=>{if(te(i)){const d=f(i,a,i.data);if(d!==-1)return h.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,f))};return{backwards:(i,a,c,f)=>{const d=Ob(i,f,n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const d=Ob(i,f,n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},oi=Math.round,cr=e=>e?{left:oi(e.left),top:oi(e.top),bottom:oi(e.bottom),right:oi(e.right),width:oi(e.width),height:oi(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Db=(e,t)=>(e=cr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),qT=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Bb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,fa=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Bb(t.top-e.bottom,e,t)},da=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Bb(t.bottom-e.top,e,t),KT=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,GT=e=>Q(e,(t,n)=>t.fold(()=>h.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return h.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),h.none()),Ib=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},YT=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),XT=(e,t,n)=>Math.min(Math.max(e,t),n),Bl=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ao=(e,t)=>{if(we(e)&&e.hasChildNodes()){const n=e.childNodes,s=XT(t,0,n.length-1);return n[s]}else return e},QT=(e,t)=>{if(!(t<0&&we(e)&&e.hasChildNodes()))return Ao(e,t)},ZT=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),$b=e=>typeof e=="string"&&e.charCodeAt(0)>=768&&ZT.test(e),JT=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},e1=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Fb=we,t1=Jn,Lb=El("display","block table"),n1=El("float","left right"),ma=e1(Fb,t1,ws(n1)),s1=ws(El("white-space","pre pre-line pre-wrap")),pa=te,Pf=Tt,Mb=at.nodeIndex,Il=QT,Of=e=>"createRange"in e?e.createRange():at.DOM.createRng(),Df=e=>e&&/[\r\n\t ]/.test(e),Ub=e=>!!e.setStart&&!!e.setEnd,Bf=e=>{const t=e.startContainer,n=e.startOffset;if(Df(e.toString())&&s1(t.parentNode)&&te(t)){const s=t.data;if(Df(s[n-1])||Df(s[n+1]))return!0}return!1},o1=e=>{const t=e.ownerDocument,n=Of(t),s=t.createTextNode(Xt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=cr(n.getBoundingClientRect());return o.removeChild(s),r},r1=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&te(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),To(r)}else return null},zb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,To=e=>{let t;const n=e.getClientRects();return n.length>0?t=cr(n[0]):t=cr(e.getBoundingClientRect()),!Ub(e)&&Pf(e)&&zb(t)?o1(e):zb(t)&&Ub(e)?r1(e):t},ur=(e,t)=>{const n=Db(e,t);return n.width=1,n.right=n.left+1,n},i1=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&qT(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=Of(i.ownerDocument);if(a<i.data.length){if($b(i.data[a]))return t;if($b(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!Bf(c)))return n(ur(To(c),!1)),t}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),Bf(c)||n(ur(To(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),Bf(c)||n(ur(To(c),!0)))},o=e.container(),r=e.offset();if(pa(o))return s(o,r),t;if(Fb(o))if(e.isAtEnd()){const i=Il(o,r);pa(i)&&s(i,i.data.length),ma(i)&&!Pf(i)&&n(ur(To(i),!1))}else{const i=Il(o,r);if(pa(i)&&s(i,0),ma(i)&&e.isAtEnd())return n(ur(To(i),!1)),t;const a=Il(e.container(),e.offset()-1);ma(a)&&!Pf(a)&&(Lb(a)||Lb(i)||!ma(i))&&n(ur(To(a),!1)),ma(i)&&n(ur(To(i),!0))}return t},F=(e,t,n)=>{const s=()=>(pa(e),t===0),o=()=>pa(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=Of(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=i1(F(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),f=d=>Il(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};F.fromRangeStart=e=>F(e.startContainer,e.startOffset),F.fromRangeEnd=e=>F(e.endContainer,e.endOffset),F.after=e=>F(e.parentNode,Mb(e)+1),F.before=e=>F(e.parentNode,Mb(e)),F.isAbove=(e,t)=>vn(Ft(t.getClientRects()),Qs(e.getClientRects()),fa).getOr(!1),F.isBelow=(e,t)=>vn(Qs(t.getClientRects()),Ft(e.getClientRects()),da).getOr(!1),F.isAtStart=e=>e?e.isAtStart():!1,F.isAtEnd=e=>e?e.isAtEnd():!1,F.isTextPosition=e=>e?te(e.container()):!1,F.isElementPosition=e=>F.isTextPosition(e)===!1;const $l=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},a1=(e,t,n)=>{t.insertNode(n),$l(e,n.previousSibling),$l(e,n.nextSibling)},l1=(e,t,n)=>{const s=h.from(n.firstChild),o=h.from(n.lastChild);t.insertNode(n),s.each(r=>$l(e,r.previousSibling)),o.each(r=>$l(e,r.nextSibling))},If=(e,t,n)=>{uf(n)?l1(e,t,n):a1(e,t,n)},rs=te,Hb=tr,Vb=at.nodeIndex,Wb=e=>{const t=e.parentNode;return Hb(t)?Wb(t):t},$f=e=>e?dl(e.childNodes,(t,n)=>(Hb(n)&&n.nodeName!=="BR"?t=t.concat($f(n)):t.push(n),t),[]):[],c1=(e,t)=>{for(;(e=e.previousSibling)&&rs(e);)t+=e.data.length;return t},jb=e=>t=>e===t,u1=e=>{let t,n;t=$f(Wb(e)),n=$g(t,jb(e),e),t=t.slice(0,n+1);const s=dl(t,(o,r,i)=>(rs(r)&&rs(t[i-1])&&o++,o),0);return t=Ur(t,Zn([e.nodeName])),n=$g(t,jb(e),e),n-s},qb=e=>{let t;return rs(e)?t="text()":t=e.nodeName.toLowerCase(),t+"["+u1(e)+"]"},f1=(e,t,n)=>{const s=[];for(t=t.parentNode;t!==e&&!(n&&n(t));t=t.parentNode)s.push(t);return s},Kb=(e,t)=>{let n,s,o=[],r,i,a;return n=t.container(),s=t.offset(),rs(n)?r=c1(n,s):(i=n.childNodes,s>=i.length?(r="after",s=i.length-1):r="before",n=i[s]),o.push(qb(n)),a=f1(e,n),a=Ur(a,ws(tr)),o=o.concat(Ku(a,c=>qb(c))),o.reverse().join("/")+","+r},d1=(e,t,n)=>{let s=$f(e);return s=Ur(s,(o,r)=>!rs(o)||!rs(s[r-1])),s=Ur(s,Zn([t])),s[n]},m1=(e,t)=>{let n=e,s=0,o;for(;rs(n);){if(o=n.data.length,t>=s&&t<=s+o){e=n,t=t-s;break}if(!rs(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return rs(e)&&t>e.data.length&&(t=e.data.length),F(e,t)},Gb=(e,t)=>{let n;if(!t)return null;const s=t.split(","),o=s[0].split("/");n=s.length>1?s[1]:"before";const r=dl(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),d1(i,c[1],parseInt(c[2],10))):null},e);return r?rs(r)?m1(r,parseInt(n,10)):(n==="after"?n=Vb(r)+1:n=Vb(r),F(r.parentNode,n)):null},Fl=vt,p1=(e,t,n)=>{let s,o;for(o=e(t.data.slice(0,n)).length,s=t.previousSibling;s&&te(s);s=s.previousSibling)o+=e(s.data).length;return o},Yb=(e,t,n,s,o)=>{let r=s[o?"startContainer":"endContainer"],i=s[o?"startOffset":"endOffset"];const a=[];let c,f=0;const d=e.getRoot();for(te(r)?a.push(n?p1(t,r,i):i):(c=r.childNodes,i>=c.length&&c.length&&(f=1,i=Math.max(0,c.length-1)),a.push(e.nodeIndex(c[i],n)+f));r&&r!==d;r=r.parentNode)a.push(e.nodeIndex(r,n));return a},g1=(e,t,n,s)=>{const o=t.dom,r=Yb(o,e,n,s,!0),i=t.isForward(),a=rb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...a};{const c=Yb(o,e,n,s,!1);return{start:r,end:c,forward:i,...a}}},Ff=(e,t,n)=>{let s=0;return G.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++}}),s},Xb=(e,t)=>{let n,s;const o=t?"start":"end";if(n=e[o+"Container"],s=e[o+"Offset"],we(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?s:s-1,r.length-1)],n&&(s=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,s))}},Qb=e=>(Xb(e,!0),Xb(e,!1),e),Zb=(e,t)=>{let n;if(we(e)&&(e=Ao(e,t),Fl(e)))return e;if($n(e)&&(te(e)&&Qr(e)&&(e=e.parentNode),n=e.previousSibling,Fl(n)||(n=e.nextSibling,Fl(n))))return n},h1=e=>Zb(e.startContainer,e.startOffset)||Zb(e.endContainer,e.endOffset),Jb=(e,t,n)=>{const s=n.getNode();let o=s?s.nodeName:null;const r=n.getRng();if(Fl(s)||o==="IMG")return{name:o,index:Ff(n.dom,o,s)};const i=h1(r);return i?(o=i.tagName,{name:o,index:Ff(n.dom,o,i)}):g1(e,n,t,r)},b1=e=>{const t=e.getRng();return{start:Kb(e.dom.getRoot(),F.fromRangeStart(t)),end:Kb(e.dom.getRoot(),F.fromRangeEnd(t)),forward:e.isForward()}},C1=e=>({rng:e.getRng(),forward:e.isForward()}),eC=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},tC=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:Ff(n,a,i)};const f=Qb(s.cloneRange());if(!r){f.collapse(!1);const p=eC(n,o+"_end",t);If(n,f,p)}s=Qb(s),s.collapse(!0);const d=eC(n,o+"_start",t);return If(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},y1=(e,t,n)=>t===2?Jb(xo,n,e):t===3?b1(e):t?C1(e):tC(e,!1),nC=re(Jb,wt,!0),sC=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:ct,isError:pt,map:r=>fn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>h.some(e)};return o},oC=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:pt,isError:ct,map:t,mapError:s=>fn.error(s(e)),bind:t,exists:pt,forall:ct,getOr:wt,or:wt,getOrThunk:Ir,orThunk:Ir,getOrDie:xs(String(e)),each:Oe,toOptional:h.none};return n},fn={value:sC,error:oC,fromOption:(e,t)=>e.fold(()=>oC(t),sC)},Ts={generate:e=>{if(!Nt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return T(e,(s,o)=>{const r=Gn(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Nt(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const C=Gn(p);if(t.length!==C.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+C.join(","));if(!ot(t,w=>R(C,w)))throw new Error("Not all branches were specified when using match. Specified: "+C.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Ts.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const v1=e=>{const t=[],n=[];return T(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},E1=e=>e.type==="inline-command"||e.type==="inline-format",w1=e=>e.type==="block-command"||e.type==="block-format",x1=e=>Kn(e,(t,n)=>t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1),S1=e=>{const t=s=>fn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(Nt(e.format)){if(!ot(e.format,me))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(me(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return fn.value(o(i))}else return e.cmd!==void 0?me(e.cmd)?fn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!ft(e))return t("Raw pattern is not an object");if(!me(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!me(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?me(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):fn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},_1=e=>x1(H(e,w1)),rC=e=>H(e,E1),k1=e=>({inlinePatterns:rC(e),blockPatterns:_1(e)}),N1=e=>{const t=v1(z(e,S1));return T(t.errors,n=>console.error(n.message,n.pattern)),t.values},Lf=Go().deviceType,A1=Lf.isTouch(),T1=at.DOM,R1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Q(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[zr(r)]=zr(i),n},{})},iC=e=>Dn(e,RegExp),le=e=>t=>t.options.get(e),Mf=e=>me(e)||ft(e),aC=(e,t="")=>n=>{const s=me(n);if(s)if(n.indexOf("=")!==-1){const o=R1(n);return{value:ut(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},P1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:aC(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:aC(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=me(n)&&Zs(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=R(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>qn(n)?{valid:!0,value:n}:me(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||me(n)||Xs(n,me);return s?me(n)?{value:z(n.split(","),zr),valid:s}:Nt(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Hf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=me(n)||Xs(n,me);return s?{value:Nt(n)?n:z(n.split(","),zr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=qn(n)||me(n);return s?n===!1||Lf.isiPhone()||Lf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!A1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||me(n)||Ge(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:n=>{const s=n===!1||me(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Mf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Mf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Mf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>me(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Xs(n,ft)||n===!1?{value:N1(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Xs(n,iC)?{value:n,valid:!0}:iC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:os.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:T1.getAttrib(e.getElement(),"placeholder")})})},O1=le("iframe_attrs"),D1=le("doctype"),lC=le("document_base_url"),B1=le("body_id"),I1=le("body_class"),cC=le("content_security_policy"),$1=le("br_in_pre"),An=le("forced_root_block"),ga=le("forced_root_block_attrs"),F1=le("newline_behavior"),L1=le("br_newline_selector"),M1=le("no_newline_selector"),U1=le("keep_styles"),z1=le("end_container_on_empty_block"),uC=le("automatic_uploads"),fC=le("images_reuse_filename"),H1=le("images_replace_blob_uris"),dC=le("icons"),V1=le("icons_url"),W1=le("images_upload_url"),j1=le("images_upload_base_path"),q1=le("images_upload_credentials"),K1=le("images_upload_handler"),G1=le("content_css_cors"),Uf=le("referrer_policy"),mC=le("language"),Y1=le("language_url"),pC=le("indent_use_margin"),X1=le("indentation"),Q1=le("content_css"),Z1=le("content_style"),gC=le("font_css"),J1=le("directionality"),eR=le("inline_boundaries_selector"),hC=le("object_resizing"),tR=le("resize_img_proportional"),nR=le("placeholder"),bC=le("event_root"),sR=le("service_message"),ri=le("theme"),oR=le("theme_url"),zf=le("model"),rR=le("model_url"),ha=le("inline_boundaries"),iR=le("formats"),aR=le("preview_styles"),lR=le("format_empty_lines"),cR=le("custom_ui_selector"),Hf=le("inline"),uR=le("hidden_input"),fR=le("submit_patch"),dR=le("add_form_submit_trigger"),mR=le("add_unload_trigger"),pR=le("custom_undo_redo_levels"),gR=le("disable_nodechange"),CC=le("readonly"),hR=le("content_css_cors"),Ll=le("plugins"),bR=le("external_plugins"),CR=le("block_unsupported_drop"),yR=le("visual"),vR=le("visual_table_class"),yC=le("visual_anchor_class"),ER=le("iframe_aria_text"),wR=le("setup"),xR=le("init_instance_callback"),SR=le("urlconverter_callback"),_R=le("auto_focus"),kR=le("browser_spellcheck"),NR=le("protect"),AR=le("paste_block_drop"),Ml=le("paste_data_images"),TR=le("paste_preprocess"),RR=le("paste_postprocess"),PR=le("paste_webkit_styles"),OR=le("paste_remove_styles_if_webkit"),DR=le("paste_merge_formats"),BR=le("smart_paste"),IR=le("paste_as_text"),$R=le("paste_tab_spaces"),FR=le("allow_html_data_urls"),vC=le("text_patterns"),EC=le("noneditable_class"),LR=le("editable_class"),MR=le("noneditable_regexp"),UR=e=>G.explode(e.options.get("font_size_style_values")),zR=e=>G.explode(e.options.get("font_size_classes")),HR=e=>e.options.get("encoding")==="xml",wC=e=>G.explode(e.options.get("images_file_types")),VR=le("table_tab_navigation"),WR=we,xC=te,SC=e=>{const t=e.parentNode;t&&t.removeChild(e)},_C=e=>{const t=xo(e);return{count:e.length-t.length,text:t}},kC=e=>{let t;for(;(t=e.data.lastIndexOf(jt))!==-1;)e.deleteData(t,1)},NC=(e,t)=>(fr(e),t),jR=(e,t)=>{const n=_C(e.data.substr(0,t.offset())),s=_C(e.data.substr(t.offset()));return(n.text+s.text).length>0?(kC(e),F(e,t.offset()-n.count)):t},qR=(e,t)=>{const n=t.container(),s=k(ht(n.childNodes),e).map(o=>o<t.offset()?F(n,t.offset()-1):t).getOr(t);return fr(e),s},KR=(e,t)=>xC(e)&&t.container()===e?jR(e,t):NC(e,t),GR=(e,t)=>t.container()===e.parentNode?qR(e,t):NC(e,t),YR=(e,t)=>F.isTextPosition(t)?KR(e,t):GR(e,t),fr=e=>{WR(e)&&$n(e)&&(ob(e)?e.removeAttribute("data-mce-caret"):SC(e)),xC(e)&&(kC(e),e.data.length===0&&SC(e))},XR=vt,QR=As,ZR=wl,JR="*[contentEditable=false],video,audio,embed,object",AC=(e,t,n)=>{const s=Db(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},eP=e=>{const t=En(_.fromDom(e),JR);for(let n=0;n<t.length;n++){const s=t[n].dom;let o=s.previousSibling;if(Nl(o)){const r=o.data;r.length===1?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)}o=s.nextSibling,kl(o)&&(o.data.length===1?o.parentNode.removeChild(o):o.deleteData(0,1))}},tP=(e,t,n,s)=>{const o=No();let r,i;const a=An(e),c=e.dom,f=(v,x)=>{let S;if(d(),ZR(x))return null;if(n(x)){i=FA(a,x,v);const P=AC(t,x,v);c.setStyle(i,"top",P.top);const O=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(O,{...P}),c.add(t,O),o.set({caret:O,element:x,before:v}),v&&c.addClass(O,"mce-visual-caret-before"),p(),S=x.ownerDocument.createRange(),S.setStart(i,0),S.setEnd(i,0)}else return i=$A(x,v),S=x.ownerDocument.createRange(),ba(i.nextSibling)?(S.setStart(i,0),S.setEnd(i,0)):(S.setStart(i,1),S.setEnd(i,1)),S;return S},d=()=>{eP(t),i&&(fr(i),i=null),o.on(v=>{c.remove(v.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(v=>{s()?c.toggleClass(v.caret,"mce-visual-caret-hidden"):c.addClass(v.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(v=>{const x=AC(t,v.element,v.before);c.setStyles(v.caret,{...x})})},destroy:()=>clearInterval(r)}},TC=()=>Qe.browser.isFirefox(),ba=e=>XR(e)||QR(e),Ca=e=>ba(e)||qr(e)&&TC(),nP=ns,Vf=vt,sP=As,RC=El("display","block table table-cell table-caption list-item"),PC=$n,OC=Qr,DC=we,oP=Jn,ii=e=>e>0,dr=e=>e<0,Ul=(e,t)=>{let n;for(;n=e(t);)if(!OC(n))return n;return null},ya=(e,t,n,s,o)=>{const r=new Dt(e,s),i=Vf(e)||OC(e);if(dr(t)){if(i&&(e=Ul(r.prev.bind(r),!0),n(e)))return e;for(;e=Ul(r.prev.bind(r),o);)if(n(e))return e}if(ii(t)){if(i&&(e=Ul(r.next.bind(r),!0),n(e)))return e;for(;e=Ul(r.next.bind(r),o);)if(n(e))return e}return null},rP=(e,t)=>{const n=o=>nP(o.dom),s=o=>o.dom===t;return Kr(_.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Ro=(e,t)=>{for(;e&&e!==t;){if(RC(e))return e;e=e.parentNode}return null},Rs=(e,t,n)=>Ro(e.container(),n)===Ro(t.container(),n),Wf=(e,t)=>{if(!t)return null;const n=t.container(),s=t.offset();return DC(n)?n.childNodes[s+e]:null},BC=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},iP=(e,t,n)=>Ro(t,e)===Ro(n,e),IC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let o=n[s];if(PC(o)&&(o=o[s]),Vf(o)||sP(o)){if(iP(t,o,n))return o;break}if(oP(o))break;n=n.parentNode}return null},va=re(BC,!0),Ea=re(BC,!1),jf=(e,t,n)=>{let s;const o=re(IC,!0,t),r=re(IC,!1,t);let i=n.startContainer;const a=n.startOffset;if(Qr(i)){DC(i)||(i=i.parentNode);const c=i.getAttribute("data-mce-caret");if(c==="before"&&(s=i.nextSibling,Ca(s)))return va(s);if(c==="after"&&(s=i.previousSibling,Ca(s)))return Ea(s)}if(!n.collapsed)return n;if(te(i)){if(PC(i)){if(e===1){if(s=r(i),s)return va(s);if(s=o(i),s)return Ea(s)}if(e===-1){if(s=o(i),s)return Ea(s);if(s=r(i),s)return va(s)}return n}if(Nl(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?va(s):n;if(kl(i)&&a<=1)return e===-1&&(s=o(i),s)?Ea(s):n;if(a===i.data.length)return s=r(i),s?va(s):n;if(a===0)return s=o(i),s?Ea(s):n}return n},$C=(e,t)=>h.from(Wf(e?0:-1,t)).filter(Vf),wa=(e,t,n)=>{const s=jf(e,t,n);return e===-1?F.fromRangeStart(s):F.fromRangeEnd(s)},zl=e=>h.from(e.getNode()).map(_.fromDom),aP=e=>h.from(e.getNode(!0)).map(_.fromDom),qf=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Hl=(e,t)=>{const n=Rs(e,t);return!n&&Tt(e.getNode())?!0:n};var $t;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})($t||($t={}));const lP=vt,Ps=te,FC=we,Kf=Tt,ai=Jn,LC=GA,Vl=lb,cP=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},MC=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,UC=(e,t)=>{if(ii(e)){if(ai(t.previousSibling)&&!Ps(t.previousSibling))return F.before(t);if(Ps(t))return F(t,0)}if(dr(e)){if(ai(t.nextSibling)&&!Ps(t.nextSibling))return F.after(t);if(Ps(t))return F(t,t.data.length)}return dr(e)?Kf(t)?F.before(t):F.after(t):F.before(t)},uP=(e,t)=>{const n=t.nextSibling;return n&&ai(n)?Ps(n)?F(n,0):F.before(n):Gf($t.Forwards,F.after(t),e)},Gf=(e,t,n)=>{let s,o,r,i;if(!FC(n)||!t)return null;if(t.isEqual(F.after(n))&&n.lastChild){if(i=F.after(n.lastChild),dr(e)&&ai(n.lastChild)&&FC(n.lastChild))return Kf(n.lastChild)?F.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Ps(a)){if(dr(e)&&c>0)return F(a,--c);if(ii(e)&&c<a.length)return F(a,++c);s=a}else{if(dr(e)&&c>0&&(o=MC(a,c-1),ai(o)))return!LC(o)&&(r=ya(o,e,Vl,o),r)?Ps(r)?F(r,r.data.length):F.after(r):Ps(o)?F(o,o.data.length):F.before(o);if(ii(e)&&c<a.childNodes.length&&(o=MC(a,c),ai(o)))return Kf(o)?uP(n,o):!LC(o)&&(r=ya(o,e,Vl,o),r)?Ps(r)?F(r,0):F.before(r):Ps(o)?F(o,0):F.after(o);s=o||i.getNode()}if((ii(e)&&i.isAtEnd()||dr(e)&&i.isAtStart())&&(s=ya(s,e,ct,n,!0),Vl(s,n)))return UC(e,s);o=ya(s,e,Vl,n);const f=Co(H(cP(a,n),lP));return f&&(!o||!f.contains(o))?(ii(e)?i=F.after(f):i=F.before(f),i):o?UC(e,o):null},Os=e=>({next:t=>Gf($t.Forwards,t,e),prev:t=>Gf($t.Backwards,t,e)}),fP=(e,t,n)=>{const s=e?F.before(n):F.after(n);return Fn(e,t,s)},dP=e=>Tt(e)?F.before(e):F.after(e),zC=e=>F.isTextPosition(e)?e.offset()===0:Jn(e.getNode()),HC=e=>{if(F.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Jn(e.getNode(!0))},VC=(e,t)=>!F.isTextPosition(e)&&!F.isTextPosition(t)&&e.getNode()===t.getNode(!0),mP=e=>!F.isTextPosition(e)&&Tt(e.getNode()),pP=(e,t,n)=>e?!VC(t,n)&&!mP(t)&&HC(t)&&zC(n):!VC(n,t)&&zC(t)&&HC(n),Fn=(e,t,n)=>{const s=Os(t);return h.from(e?s.next(n):s.prev(n))},Wl=(e,t,n)=>Fn(e,t,n).bind(s=>Rs(n,s,t)&&pP(e,n,s)?Fn(e,t,s):h.some(s)),WC=(e,t,n,s)=>Wl(e,t,n).bind(o=>s(o)?WC(e,t,o,s):h.some(o)),li=(e,t)=>{const n=e?t.firstChild:t.lastChild;return te(n)?h.some(F(n,e?0:n.data.length)):n?Jn(n)?h.some(e?F.before(n):dP(n)):fP(e,t,n):h.none()},Ln=re(Fn,!0),is=re(Fn,!1),dn=re(li,!0),Ds=re(li,!1),jC="_mce_caret",Bs=e=>we(e)&&e.id===jC,mr=(e,t)=>{for(;t&&t!==e;){if(t.id===jC)return t;t=t.parentNode}return null},gP=e=>me(e.start),hP=e=>Ie(e,"rng"),bP=e=>Ie(e,"id"),qC=e=>Ie(e,"name"),KC=e=>G.isArray(e.start),jl=e=>!qC(e)&&qn(e.forward)?e.forward:!0,GC=(e,t)=>(we(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),CP=(e,t)=>{const n=e.createRng(),s=Gb(e.getRoot(),t.start);n.setStart(s.container(),s.offset());const o=Gb(e.getRoot(),t.end);return n.setEnd(o.container(),o.offset()),{range:n,forward:jl(t)}},yP=(e,t)=>{const n=e.ownerDocument.createTextNode(jt);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},vP=e=>e.hasChildNodes()===!1,EP=(e,t)=>Ds(e).fold(pt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),YC=(e,t,n)=>vP(t)&&mr(e,t)?(yP(t,n),!0):!1,XC=(e,t,n,s)=>{const o=n[t?"start":"end"];let r,i,a,c;const f=e.getRoot();if(o){for(a=o[0],i=f,r=o.length-1;r>=1;r--){if(c=i.childNodes,YC(f,i,s))return!0;if(o[r]>c.length-1)return YC(f,i,s)?!0:EP(i,s);i=c[o[r]]}i.nodeType===3&&(a=Math.min(o[0],i.nodeValue.length)),i.nodeType===1&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},Yf=e=>te(e)&&e.data.length>0,QC=(e,t,n)=>{let s=e.get(n.id+"_"+t),o,r,i,a;const c=n.keep;let f,d;if(s){if(o=s.parentNode,t==="start"?(c?s.hasChildNodes()?(o=s.firstChild,r=1):Yf(s.nextSibling)?(o=s.nextSibling,r=0):Yf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)+1):r=e.nodeIndex(s),f=o,d=r):(c?s.hasChildNodes()?(o=s.firstChild,r=1):Yf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)):r=e.nodeIndex(s),f=o,d=r),!c){for(a=s.previousSibling,i=s.nextSibling,G.each(G.grep(s.childNodes),p=>{te(p)&&(p.nodeValue=p.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&te(a)&&!Qe.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),f=a,d=r)}return h.some(F(f,d))}else return h.none()},wP=(e,t)=>{const n=e.createRng();return XC(e,!0,t,n)&&XC(e,!1,t,n)?h.some({range:n,forward:jl(t)}):h.none()},xP=(e,t)=>{const n=QC(e,"start",t),s=QC(e,"end",t);return vn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(GC(e,o.container()),o.offset()),i.setEnd(GC(e,r.container()),r.offset()),{range:i,forward:jl(t)}})},SP=(e,t)=>h.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),_P=(e,t)=>{const n=e.dom;if(t){if(KC(t))return wP(n,t);if(gP(t))return h.some(CP(n,t));if(bP(t))return xP(n,t);if(qC(t))return SP(n,t);if(hP(t))return h.some({range:t.rng,forward:jl(t)})}return h.none()},kP=(e,t,n)=>y1(e,t,n),NP=(e,t)=>{_P(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Mn=e=>we(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",ql=(e=>t=>e===t)(Xt),xa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Xf=e=>!xa(e)&&!ql(e)&&!eb(e),AP=e=>({value:e}),Qf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},TP=e=>{const t=Qf(e.red)+Qf(e.green)+Qf(e.blue);return AP(t)},RP=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,PP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ZC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),JC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return ZC(o,r,i,a)},OP=e=>{if(e==="transparent")return h.some(ZC(0,0,0,0));const t=RP.exec(e);if(t!==null)return h.some(JC(t[1],t[2],t[3],"1"));const n=PP.exec(e);return n!==null?h.some(JC(n[1],n[2],n[3],n[4])):h.none()},Kl=e=>OP(e).map(TP).map(t=>"#"+t.value).getOr(e),Gl=e=>!!e.nodeType,DP=e=>e&&/^(IMG)$/.test(e.nodeName),ey=(e,t,n)=>{const s=n.startOffset;let o=n.startContainer;if(!(o===n.endContainer&&DP(o.childNodes[s]))&&we(o)){const r=o.childNodes;let i;s<r.length?(o=r[s],i=new Dt(o,e.getParent(o,e.isBlock))):(o=r[r.length-1],i=new Dt(o,e.getParent(o,e.isBlock)),i.next(!0));for(let a=i.current();a;a=i.next())if(te(a)&&!Jf(a)){n.setStart(a,0),t.setRng(n);return}}},ty=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(we(e)||!Jf(e))return e}},Zf=(e,t)=>(Gl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),ci=(e,t,n)=>e.schema.isValidChild(t,n),Jf=(e,t=!1)=>{if(ke(e)&&te(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return or(n)}else return!1},BP=e=>ke(e)&&te(e)&&e.length===0,no=(e,t)=>(Ge(e)?e=e(t):ke(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),ed=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),td=(e,t)=>((t==="color"||t==="backgroundColor")&&(e=Kl(e)),t==="fontWeight"&&e===700&&(e="bold"),t==="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),Yl=(e,t,n)=>td(e.getStyle(t,n),n),ny=(e,t)=>{let n;return e.getParent(t,s=>(n=e.getStyle(s,"text-decoration"),n&&n!=="none")),n},Xl=(e,t,n)=>e.getParents(t,n,e.getRoot()),IP=(e,t)=>{const n=s=>{const o=r=>r.length>1&&r.charAt(0)==="%";return M(["styles","attributes"],r=>ut(s,r).exists(i=>{const a=Nt(i)?i:ju(i);return M(a,o)}))};return M(e.formatter.get(t),n)},$P=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Wi(r,(i,a)=>M(s,c=>c===a));return M(e.formatter.get(t),r=>{const i=o(r);return M(e.formatter.get(n),a=>{const c=o(a);return Gk(i,c)})})},Is=e=>Mr(e,"block"),Tn=e=>Mr(e,"selector"),zt=e=>Mr(e,"inline"),FP=e=>Tn(e)&&zt(e)&&Hr(ut(e,"mixed"),!0),nd=e=>Tn(e)&&e.expand!==!1&&!zt(e),ui=Mn,sy=Xl,oy=Jf,LP=Zf,MP=e=>Tt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,ry=(e,t)=>{let n=t;for(;n;){if(we(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},iy=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},UP=(e,t,n)=>iy(e,t,n,s=>ql(s)||xa(s)),zP=(e,t,n)=>iy(e,t,n,Xf),ay=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,C)=>{const y=lr(e),w=o?y.backwards:y.forwards;return h.from(w(d,p,(v,x)=>ui(v.parentNode)?-1:(i=v,C(o,v,x)),a))};return c(n,s,UP).bind(d=>r?c(d.container,d.offset+(o?-1:0),zP):h.some(d)).orThunk(()=>i?h.some({container:i,offset:o?0:i.length}):h.none())},ly=(e,t,n,s,o)=>{te(s)&&ml(s.data)&&s[o]&&(s=s[o]);const r=sy(e,s);for(let i=0;i<r.length;i++)for(let a=0;a<t.length;a++){const c=t[a];if(!(ke(c.collapsed)&&c.collapsed!==n.collapsed)&&Tn(c)&&e.is(r[i],c.selector))return r[i]}return s},cy=(e,t,n,s)=>{let o=n;const r=e.dom,i=r.getRoot(),a=t[0];if(Is(a)&&(o=a.wrapper?null:r.getParent(n,a.block,i)),!o){const c=r.getParent(n,"LI,TD,TH");o=r.getParent(te(n)?n.parentNode:n,f=>f!==i&&LP(e,f),c)}if(o&&Is(a)&&a.wrapper&&(o=sy(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[s]&&!r.isBlock(o[s])&&(o=o[s],!ed(o,"br")););return o||n},uy=(e,t,n,s)=>{const o=n.parentNode;return ke(n[s])?!1:o===t||It(o)||e.isBlock(o)?!0:uy(e,t,o,s)},Ql=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(te(n)&&!oy(n)&&(o?s>0:s<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=te(c)&&!uy(e,a,c,i);if(!ui(c)&&!MP(c)&&!oy(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},fy=e=>ui(e.parentNode)||ui(e),fi=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,f=n[0];return we(o)&&o.hasChildNodes()&&(o=Ao(o,r),te(o)&&(r=0)),we(i)&&i.hasChildNodes()&&(i=Ao(i,t.collapsed?a:a-1),te(i)&&(a=i.nodeValue.length)),o=ry(c,o),i=ry(c,i),fy(o)&&(o=ui(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,te(o)&&(r=t.collapsed?o.length:0)),fy(i)&&(i=ui(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,te(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(ay(c,e.getBody(),o,r,!0,s).each(({container:C,offset:y})=>{o=C,r=y}),ay(c,e.getBody(),i,a,!1,s).each(({container:C,offset:y})=>{i=C,a=y})),(zt(f)||f.block_expand)&&((!zt(f)||!te(o)||r===0)&&(o=Ql(c,n,o,r,!0)),(!zt(f)||!te(i)||a===i.nodeValue.length)&&(i=Ql(c,n,i,a,!1))),nd(f)&&(o=ly(c,n,t,o,"previousSibling"),i=ly(c,n,t,i,"nextSibling")),(Is(f)||Tn(f))&&(o=cy(e,n,o,"previousSibling"),i=cy(e,n,i,"nextSibling"),Is(f)&&(c.isBlock(o)||(o=Ql(c,n,o,r,!0)),c.isBlock(i)||(i=Ql(c,n,i,a,!1)))),we(o)&&(r=c.nodeIndex(o),o=o.parentNode),we(i)&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},Sa=(e,t,n)=>{const s=t.startOffset,o=Ao(t.startContainer,s),r=t.endOffset,i=Ao(t.endContainer,r-1),a=v=>{const x=v[0];te(x)&&x===o&&s>=x.data.length&&v.splice(0,1);const S=v[v.length-1];return r===0&&v.length>0&&S===i&&te(S)&&v.splice(v.length-1,1),v},c=(v,x,S)=>{const P=[];for(;v&&v!==S;v=v[x])P.push(v);return P},f=(v,x)=>e.getParent(v,S=>S.parentNode===x,x),d=(v,x,S)=>{const P=S?"nextSibling":"previousSibling";for(let O=v,$=O.parentNode;O&&O!==x;O=$){$=O.parentNode;const U=c(O===v?O:O[P],P);U.length&&(S||U.reverse(),n(a(U)))}};if(o===i)return n(a([o]));const p=e.findCommonAncestor(o,i);if(e.isChildOf(o,i))return d(o,p,!0);if(e.isChildOf(i,o))return d(i,p);const C=f(o,p)||o,y=f(i,p)||i;d(o,C,!0);const w=c(C===o?C:C.nextSibling,"nextSibling",y===i?y.nextSibling:y);w.length&&n(a(w)),d(i,y)},sd=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},HP=e=>We(e,t=>{const n=Bl(t);return n?[_.fromDom(n)]:[]}),VP=e=>sd(e).length>1,WP=e=>H(HP(e),xl),jP=e=>En(e,"td[data-mce-selected],th[data-mce-selected]"),dy=(e,t)=>{const n=jP(t);return n.length>0?n:WP(e)},di=e=>dy(sd(e.selection.getSel()),_.fromDom(e.getBody())),_a=(e,t)=>ta(e,"table",t),qP=e=>{const t=e.startContainer,n=e.startOffset;return te(t)?n===0?h.some(_.fromDom(t)):h.none():h.from(t.childNodes[n]).map(_.fromDom)},KP=e=>{const t=e.endContainer,n=e.endOffset;return te(t)?n===t.data.length?h.some(_.fromDom(t)):h.none():h.from(t.childNodes[n-1]).map(_.fromDom)},my=e=>Ah(e).fold(K([e]),t=>[e].concat(my(t))),od=e=>tf(e).fold(K([e]),t=>yt(t)==="br"?Xo(t).map(n=>[e].concat(od(n))).getOr([]):[e].concat(od(t))),rd=(e,t)=>vn(qP(t),KP(t),(n,s)=>{const o=ge(my(e),re(st,n)),r=ge(od(e),re(st,s));return o.isSome()&&r.isSome()}).getOr(!1),id=(e,t,n,s)=>{const o=n,r=new Dt(n,o),i=Wi(e.schema.getMoveCaretBeforeOnEnterElements(),(a,c)=>!R(["td","th","table"],c.toLowerCase()));do{if(te(n)&&G.trim(n.nodeValue).length!==0){s?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(i[n.nodeName]){s?t.setStartBefore(n):n.nodeName==="BR"?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Zl=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},ad=(e,t)=>{const n=di(e);n.length>0?T(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},ld=(e,t,n)=>{const s=tC(e,t);n(s),e.moveToBookmark(s)},GP=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],YP=e=>Bn(e)&&mf(e)===jt,XP=(e,t,n,s)=>Xn(t).fold(()=>"skipping",o=>s==="br"||YP(t)?"valid":LT(t)?"existing":Bs(t.dom)?"caret":M(GP,r=>ks(t,r))?"valid-block":!ci(e,n,s)||!ci(e,yt(o),n)?"invalid-child":"valid"),QP=(e,t)=>{const n=fi(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},py=(e,t,n,s,o,r)=>{const{uid:i=t,...a}=n;Xi(e,aa()),Wt(e,`${ni()}`,i),Wt(e,`${ar()}`,s);const{attributes:c={},classes:f=[]}=o(i,a);if(yo(e,c),HT(e,f),r){f.length>0&&Wt(e,`${ca()}`,f.join(","));const d=Gn(c);d.length>0&&Wt(e,`${ua()}`,d.join(","))}},ZP=e=>{gl(e,aa()),Gt(e,`${ni()}`),Gt(e,`${ar()}`),Gt(e,`${la()}`);const t=Vr(e,`${ua()}`).map(s=>s.split(",")).getOr([]),n=Vr(e,`${ca()}`).map(s=>s.split(",")).getOr([]);T(t,s=>Gt(e,s)),VT(e,n),Gt(e,`${ca()}`),Gt(e,`${ua()}`)},gy=(e,t,n,s,o)=>{const r=_.fromTag("span",e);return py(r,t,n,s,o,!1),r},JP=(e,t,n,s,o,r)=>{const i=[],a=gy(e.getDoc(),n,r,s,o),c=No(),f=()=>{c.clear()},d=()=>c.get().getOrThunk(()=>{const w=si(a);return i.push(w),c.set(w),w}),p=w=>{T(w,C)},C=w=>{switch(XP(e,w,"span",yt(w))){case"invalid-child":{f();const x=Yt(w);p(x),f();break}case"valid-block":{f(),py(w,n,r,s,o,!0);break}case"valid":{const x=d();KN(w,x);break}}},y=w=>{const v=z(w,_.fromDom);p(v)};return Sa(e.dom,t,w=>{f(),y(w)}),i},eO=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=di(e).length>0,a=Tb("mce-annotation");if(r.collapsed&&!i&&QP(e,r),o.getRng().collapsed&&!i){const c=gy(e.getDoc(),a,s,t,n.decorate);sf(c,Xt),o.getRng().insertNode(c.dom),o.select(c.dom)}else ld(o,!1,()=>{ad(e,c=>{JP(e,c,a,t,n.decorate,s)})})})},hy=e=>{const t=zT();UT(e,t);const n=MT(e,t),s=gh("span"),o=r=>{T(r,i=>{s(i)?Jo(i):ZP(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{eO(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{const i=e.selection.getBookmark();Sb(e,h.some(r)).each(({elements:a})=>{o(a)}),e.selection.moveToBookmark(i)},removeAll:r=>{const i=e.selection.getBookmark();bt(Nb(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=Nb(e,r);return Vi(i,a=>z(a,c=>c.dom))}}},ka=e=>({getBookmark:re(kP,e),moveToBookmark:re(NP,e)});ka.isBookmarkNode=Mn;const by=(e,t,n)=>n.collapsed?!1:M(n.getClientRects(),s=>KT(s,e,t)),tO=(e,t)=>e.dispatch("PreProcess",t),nO=(e,t)=>e.dispatch("PostProcess",t),sO=e=>e.dispatch("remove"),oO=e=>e.dispatch("detach"),rO=(e,t)=>e.dispatch("SwitchMode",{mode:t}),iO=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},aO=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},lO=e=>e.dispatch("PreInit"),cO=e=>e.dispatch("PostRender"),uO=e=>e.dispatch("Init"),fO=(e,t)=>e.dispatch("PlaceholderToggle",{state:t}),Cy=(e,t,n)=>e.dispatch(t,n),yy=(e,t,n,s)=>e.dispatch("FormatApply",{format:t,node:n,vars:s}),cd=(e,t,n,s)=>e.dispatch("FormatRemove",{format:t,node:n,vars:s}),dO=(e,t)=>e.dispatch("BeforeSetContent",t),vy=(e,t)=>e.dispatch("SetContent",t),mO=(e,t)=>e.dispatch("BeforeGetContent",t),Ey=(e,t)=>e.dispatch("GetContent",t),pO=(e,t)=>e.dispatch("AutocompleterStart",t),gO=(e,t)=>e.dispatch("AutocompleterUpdate",t),hO=e=>e.dispatch("AutocompleterEnd"),bO=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),CO=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),wy=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),pe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||pe.metaKeyPressed(e),metaKeyPressed:e=>Qe.os.isMacOS()||Qe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},pr="data-mce-selected",yO="table,img,figure.image,hr,video,span.mce-preview-object",xy=Math.abs,Jl=Math.round,ud={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},vO=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Sy=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,f,d,p,C,y,w,v,x,S,P,O,$,U,ie;const V=ee=>ke(ee)&&(Kh(ee)||n.is(ee,"figure.image")),j=ee=>As(ee)||n.hasClass(ee,"mce-preview-object"),X=(ee,Be)=>{if(vO(ee)){const Le=ee.touches[0];return V(ee.target)&&!by(Le.clientX,Le.clientY,Be)}else return V(ee.target)&&!by(ee.clientX,ee.clientY,Be)},J=ee=>{const Be=ee.target;X(ee,t.selection.getRng())&&!ee.isDefaultPrevented()&&t.selection.select(Be)},ve=ee=>n.is(ee,"figure.image")?[ee.querySelector("img")]:n.hasClass(ee,"mce-preview-object")&&ke(ee.firstElementChild)?[ee,ee.firstElementChild]:[ee],ue=ee=>{const Be=hC(t);return!Be||ee.getAttribute("data-mce-resize")==="false"||ee===t.getBody()?!1:n.hasClass(ee,"mce-preview-object")?ks(_.fromDom(ee.firstElementChild),Be):ks(_.fromDom(ee),Be)},se=ee=>j(ee)?n.create("img",{src:Qe.transparentSrc}):ee.cloneNode(!0),ze=(ee,Be,Le)=>{if(ke(Le)){const Se=ve(ee);T(Se,xe=>{xe.style[Be]||!t.schema.isValid(xe.nodeName.toLowerCase(),Be)?n.setStyle(xe,Be,Le):n.setAttrib(xe,Be,""+Le)})}},je=(ee,Be,Le)=>{ze(ee,"width",Be),ze(ee,"height",Le)},Je=ee=>{let Be,Le,Se,xe,qe;Be=ee.screenX-p,Le=ee.screenY-C,O=Be*f[2]+v,$=Le*f[3]+x,O=O<5?5:O,$=$<5?5:$,(V(i)||j(i))&&tR(t)!==!1?Se=!pe.modifierPressed(ee):Se=pe.modifierPressed(ee),Se&&(xy(Be)>xy(Le)?($=Jl(O*S),O=Jl($/S)):(O=Jl($/S),$=Jl(O*S))),je(a,O,$),xe=f.startPos.x+Be,qe=f.startPos.y+Le,xe=xe>0?xe:0,qe=qe>0?qe:0,n.setStyles(c,{left:xe,top:qe,display:"block"}),c.innerHTML=O+" &times; "+$,f[2]<0&&a.clientWidth<=O&&n.setStyle(a,"left",y+(v-O)),f[3]<0&&a.clientHeight<=$&&n.setStyle(a,"top",w+(x-$)),Be=r.scrollWidth-U,Le=r.scrollHeight-ie,Be+Le!==0&&n.setStyles(c,{left:xe-Be,top:qe-Le}),P||(iO(t,i,v,x,"corner-"+f.name),P=!0)},Rt=()=>{const ee=P;P=!1,ee&&(ze(i,"width",O),ze(i,"height",$)),n.unbind(s,"mousemove",Je),n.unbind(s,"mouseup",Rt),o!==s&&(n.unbind(o,"mousemove",Je),n.unbind(o,"mouseup",Rt)),n.remove(a),n.remove(c),n.remove(d),Y(i),ee&&(aO(t,i,O,$,"corner-"+f.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Y=ee=>{ne();const Be=n.getPos(ee,r),Le=Be.x,Se=Be.y,xe=ee.getBoundingClientRect(),qe=xe.width||xe.right-xe.left,Ke=xe.height||xe.bottom-xe.top;i!==ee&&($e(),i=ee,O=$=0);const Pt=t.dispatch("ObjectSelected",{target:ee});ue(ee)&&!Pt.isDefaultPrevented()?bt(ud,(tt,Fe)=>{let nt;const Zt=Jt=>{const Vt=ve(i)[0];p=Jt.screenX,C=Jt.screenY,v=Vt.clientWidth,x=Vt.clientHeight,S=x/v,f=tt,f.name=Fe,f.startPos={x:qe*tt[0]+Le,y:Ke*tt[1]+Se},U=r.scrollWidth,ie=r.scrollHeight,d=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=se(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Le,top:Se,margin:0}),je(a,qe,Ke),a.removeAttribute(pr),r.appendChild(a),n.bind(s,"mousemove",Je),n.bind(s,"mouseup",Rt),o!==s&&(n.bind(o,"mousemove",Je),n.bind(o,"mouseup",Rt)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+x)};nt=n.get("mceResizeHandle"+Fe),nt&&n.remove(nt),nt=n.add(r,"div",{id:"mceResizeHandle"+Fe,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Fe+"-resize; margin:0; padding:0"}),n.bind(nt,"mousedown",Jt=>{Jt.stopImmediatePropagation(),Jt.preventDefault(),Zt(Jt)}),tt.elm=nt,n.setStyles(nt,{left:qe*tt[0]+Le-nt.offsetWidth/2,top:Ke*tt[1]+Se-nt.offsetHeight/2})}):$e(!1)},he=Dl(Y,0),$e=(ee=!0)=>{he.cancel(),ne(),i&&ee&&i.removeAttribute(pr),bt(ud,(Be,Le)=>{const Se=n.get("mceResizeHandle"+Le);Se&&(n.unbind(Se),n.remove(Se))})},De=(ee,Be)=>ke(ee)&&n.isChildOf(ee,Be),Bt=ee=>{if(P||t.removed||t.composing)return;const Be=ee.type==="mousedown"?ee.target:e.getNode(),Le=nr(_.fromDom(Be),yO).map(xe=>xe.dom).getOrUndefined(),Se=ke(Le)?n.getAttrib(Le,pr,"1"):"1";if(T(n.select(`img[${pr}],hr[${pr}]`),xe=>{xe.removeAttribute(pr)}),De(Le,r)){Ee();const xe=e.getStart(!0);if(De(xe,Le)&&De(e.getEnd(!0),Le)){n.setAttrib(Le,pr,Se),he.throttle(Le);return}}$e()},ne=()=>{bt(ud,ee=>{ee.elm&&(n.unbind(ee.elm),delete ee.elm)})},Ee=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Ee(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Bt),t.on("keyup compositionend",ee=>{i&&i.nodeName==="TABLE"&&Bt(ee)}),t.on("hide blur",$e),t.on("contextmenu longpress",J,!0)}),t.on("remove",ne),{isResizable:ue,showResizeRect:Y,hideResizeRect:$e,updateResizeRect:Bt,destroy:()=>{he.cancel(),i=a=d=null}}},EO=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},wO=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},_y=(e,t,n)=>{const s=e.document.createRange();return EO(s,t),wO(s,n),s},fd=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Na=Ts.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ky=(e,t,n)=>t(_.fromDom(n.startContainer),n.startOffset,_.fromDom(n.endContainer),n.endOffset),xO=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:h.none}),relative:(n,s)=>({ltr:Ko(()=>_y(e,n,s)),rtl:Ko(()=>h.some(_y(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Ko(()=>fd(e,n,s,o,r)),rtl:Ko(()=>h.some(fd(e,o,r,n,s)))})}),SO=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Na.rtl(_.fromDom(o.endContainer),o.endOffset,_.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>ky(e,Na.ltr,n)):ky(e,Na.ltr,n)},_O=(e,t)=>{const n=xO(e,t);return SO(e,n)};Na.ltr,Na.rtl;const Ny={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},kO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return h.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),h.some(i)})},NO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},AO=(()=>document.caretPositionFromPoint?kO:document.caretRangeFromPoint?NO:h.none)(),TO=(e,t,n)=>{const s=_.fromDom(e.document);return AO(s,t,n).map(o=>Ny.create(_.fromDom(o.startContainer),o.startOffset,_.fromDom(o.endContainer),o.endOffset))},dd=Ts.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),RO=(e,t,n,s)=>e.fold(t,n,s),PO=e=>e.fold(wt,wt,wt),OO=dd.before,DO=dd.on,BO=dd.after,so={before:OO,on:DO,after:BO,cata:RO,getStart:PO},ec=Ts.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),IO=e=>ec.exact(e.start,e.soffset,e.finish,e.foffset),$O=e=>e.match({domRange:t=>_.fromDom(t.startContainer),relative:(t,n)=>so.getStart(t),exact:(t,n,s,o)=>t}),FO=ec.domRange,LO=ec.relative,MO=ec.exact,UO=e=>{const t=$O(e);return _h(t)},zO=Ny.create,mi={domRange:FO,relative:LO,exact:MO,exactFromRange:IO,getWin:UO,range:zO},tc=(e,t)=>{const n=yt(e);return n==="input"?so.after(e):R(["br","img"],n)?t===0?so.before(e):so.after(e):so.on(e,t)},HO=(e,t)=>{const n=e.fold(so.before,tc,so.after),s=t.fold(so.before,tc,so.after);return mi.relative(n,s)},Ay=(e,t,n,s)=>{const o=tc(e,t),r=tc(n,s);return mi.relative(o,r)},VO=e=>e.match({domRange:t=>{const n=_.fromDom(t.startContainer),s=_.fromDom(t.endContainer);return Ay(n,t.startOffset,s,t.endOffset)},relative:HO,exact:Ay}),md=(e,t)=>{const s=(t||document).createDocumentFragment();return T(e,o=>{s.appendChild(o.dom)}),_.fromDom(s)},WO=e=>{const t=mi.getWin(e).dom,n=(o,r,i,a)=>fd(t,o,r,i,a),s=VO(e);return _O(t,s).match({ltr:n,rtl:n})},jO=(e,t,n)=>TO(e,t,n),Ty=(e,t,n)=>jO(n.defaultView,e,t).map(s=>{const o=n.createRange();return o.setStart(s.start.dom,s.soffset),o.setEnd(s.finish.dom,s.foffset),o}).getOrUndefined(),pd=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,qO=(e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Ry=(e,t,n)=>qO(e,t,n)!==null,KO=(e,t,n)=>Ry(e,t,s=>s.nodeName===n),gd=e=>e&&e.nodeName==="TABLE",GO=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),YO=(e,t)=>$n(e)&&Ry(e,t,Bs)===!1,Py=(e,t,n)=>{const s=new Dt(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=s[n?"prev":"next"]();)if(Tt(t))return!0},XO=(e,t)=>e.previousSibling&&e.previousSibling.nodeName===t,QO=(e,t)=>{for(;t&&t!==e;){if(vt(t))return!0;t=t.parentNode}return!1},hd=(e,t,n,s,o)=>{let r;const i=e.getRoot();let a;const c=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||i;if(s&&Tt(o)&&t&&e.isEmpty(f))return h.some(F(o.parentNode,e.nodeIndex(o)));const d=new Dt(o,f);for(;a=d[s?"prev":"next"]();){if(e.getContentEditableParent(a)==="false"||YO(a,i))return h.none();if(te(a)&&a.nodeValue.length>0)return KO(a,i,"A")===!1?h.some(F(a,s?a.nodeValue.length:0)):h.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return h.none();r=a}return lf(r)?h.none():n&&r?h.some(F(r,0)):h.none()},Oy=(e,t,n,s)=>{let o,r;const i=e.getRoot();let a,c,f=!1;o=s[(n?"start":"end")+"Container"],r=s[(n?"start":"end")+"Offset"];const d=we(o)&&r===o.childNodes.length,p=e.schema.getNonEmptyElements();if(c=n,$n(o))return h.none();if(we(o)&&r>o.childNodes.length-1&&(c=!1),cf(o)&&(o=i,r=0),o===i){if(c&&(a=o.childNodes[r>0?r-1:0],a&&($n(a)||p[a.nodeName]||gd(a))))return h.none();if(o.hasChildNodes()){if(r=Math.min(!c&&r>0?r-1:r,o.childNodes.length-1),o=o.childNodes[r],r=te(o)&&d?o.data.length:0,!t&&o===i.lastChild&&gd(o)||QO(i,o)||$n(o))return h.none();if(o.hasChildNodes()&&gd(o)===!1){a=o;const C=new Dt(o,i);do{if(vt(a)||$n(a)){f=!1;break}if(te(a)&&a.nodeValue.length>0){r=c?0:a.nodeValue.length,o=a,f=!0;break}if(p[a.nodeName.toLowerCase()]&&!GO(a)){r=e.nodeIndex(a),o=a.parentNode,c||r++,f=!0;break}}while(a=c?C.next():C.prev())}}}return t&&(te(o)&&r===0&&hd(e,d,t,!0,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),we(o)&&(a=o.childNodes[r],a||(a=o.childNodes[r-1]),a&&Tt(a)&&!XO(a,"A")&&!Py(e,a,!1)&&!Py(e,a,!0)&&hd(e,d,t,!0,a).each(C=>{o=C.container(),r=C.offset(),f=!0}))),c&&!t&&te(o)&&r===o.nodeValue.length&&hd(e,d,t,!1,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),f?h.some(F(o,r)):h.none()},nc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=F.fromRangeStart(t);return Oy(e,n,!0,s).each(r=>{(!n||!F.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||Oy(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),pd(t,s)?h.none():h.some(s)},sc=(e,t)=>e.splitText(t),oc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;return t===s&&te(t)?n>0&&n<t.nodeValue.length&&(s=sc(t,n),t=s.previousSibling,o>n?(o=o-n,t=s=sc(s,o).previousSibling,o=s.nodeValue.length,n=0):o=0):(te(t)&&n>0&&n<t.nodeValue.length&&(t=sc(t,n),n=0),te(s)&&o>0&&o<s.nodeValue.length&&(s=sc(s,o).previousSibling,o=s.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},pi=e=>({walk:(o,r)=>Sa(e,o,r),split:oc,normalize:o=>nc(e,o).fold(pt,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});pi.compareRanges=pd,pi.getCaretRangeFromPoint=Ty,pi.getSelectedNode=Bl,pi.getNode=Ao;const ZO=((e,t)=>{const n=(a,c)=>{if(!Cn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;Qi(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=Ns(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>Q(c,(f,d)=>{const p=Ns(a,d),C=p===void 0?0:parseInt(p,10);return isNaN(C)?f:f+C},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const d=r(a,f);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Wr(e)?t.getBoundingClientRect().height:t.offsetHeight}),JO=e=>ZO.get(e),Dy=()=>_.fromDom(document),By=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=By(e,o);return[s].concat(r)}),eD=(e,t)=>{const n=t.owner(e);return By(t,n)};var tD=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?h.none():h.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(_.fromDom)},owner:e=>vo(e)});const nD=e=>{const t=Dy(),n=rf(t),s=eD(e,tD),o=of(e),r=de(s,(i,a)=>{const c=of(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return jr(r.left+o.left+n.left,r.top+o.top+n.top)},bd=e=>yt(e)==="textarea",sD=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),oD=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},rD=(e,t)=>{const n=Yt(e);if(n.length===0||bd(e))return{element:e,offset:t};if(t<n.length&&!bd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return bd(s)?{element:e,offset:t}:yt(s)==="img"?{element:s,offset:1}:Bn(s)?{element:s,offset:mf(s).length}:{element:s,offset:Yt(s).length}}},Iy=(e,t)=>{const n=rA(e),s=JO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},iD=(e,t)=>{const n=rD(e,t),s=_.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+jt+"</span>");return Qn(n.element,s),Iy(s,()=>_t(s))},aD=e=>Iy(_.fromDom(e),Oe),$y=(e,t,n,s)=>{cD(e,(o,r)=>lD(e,t,n,s),n)},Fy=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(sD(e,r))return;const i=rf(t).top;n(t,i,s,o),oD(e,r)},lD=(e,t,n,s)=>{const o=_.fromDom(e.getBody()),r=_.fromDom(e.getDoc());qN(o);const i=iD(_.fromDom(n.startContainer),n.startOffset);Fy(e,r,t,i,s),i.cleanup()},Ly=(e,t,n,s)=>{const o=_.fromDom(e.getDoc());Fy(e,o,n,aD(t),s)},cD=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(_.fromDom(s),_.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},Cd=(e,t,n,s)=>{const o=e.pos;if(n)zh(o.left,o.top,s);else{const r=o.top-t+e.height;zh(o.left,r,s)}},My=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?Cd(s,n,o!==!1,e):i>r?Cd(s,n,c?o!==!1:o===!0,e):a>r&&!c&&Cd(s,n,o===!0,e)},Uy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;My(e,t,o,n,s)},zy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;My(e,t,o,n,s);const r=nD(n.element),i=Wh(window);r.top<i.y?Hh(n.element,s!==!1):r.top>i.bottom&&Hh(n.element,s===!0)},uD=(e,t,n)=>$y(e,Uy,t,n),fD=(e,t,n)=>Ly(e,t,Uy,n),dD=(e,t,n)=>$y(e,zy,t,n),mD=(e,t,n)=>Ly(e,t,zy,n),pD=(e,t,n)=>{(e.inline?fD:mD)(e,t,n)},Aa=(e,t,n)=>{(e.inline?uD:dD)(e,t,n)},Hy=e=>e.dom.focus(),Vy=e=>{const t=Qo(e).dom;return e.dom===t.activeElement},yd=(e=Dy())=>h.from(e.dom.activeElement).map(_.fromDom),gD=e=>yd(Qo(e)).filter(t=>e.dom.contains(t.dom)),Wy=(e,t)=>{const n=Bn(t)?mf(t).length:Yt(t).length+1;return e>n?n:e<0?0:e},hD=e=>mi.range(e.start,Wy(e.soffset,e.start),e.finish,Wy(e.foffset,e.finish)),jy=(e,t)=>!vl(t.dom)&&(eo(e,t)||st(e,t)),qy=e=>t=>jy(e,t.start)&&jy(e,t.finish),bD=e=>e.inline,CD=e=>mi.range(_.fromDom(e.startContainer),e.startOffset,_.fromDom(e.endContainer),e.endOffset),yD=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?h.none():h.from(t.getRangeAt(0))).map(CD)},vD=e=>{const t=_h(e);return yD(t.dom).filter(qy(e))},ED=(e,t)=>h.from(t).filter(qy(e)).map(hD),wD=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),h.some(t)}catch{return h.none()}},vd=e=>{const t=bD(e)?vD(_.fromDom(e.getBody())):h.none();e.bookmark=t.isSome()?t:e.bookmark},Ed=e=>(e.bookmark?e.bookmark:h.none()).bind(n=>ED(_.fromDom(e.getBody()),n)).bind(wD),xD=e=>{Ed(e).each(t=>e.selection.setRng(t))},Ky={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},SD=(e,t)=>(Cn(t)||(t=0),setTimeout(e,t)),_D=(e,t)=>(Cn(t)||(t=0),setInterval(e,t)),Un={setEditorTimeout:(e,t,n)=>SD(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=_D(()=>{e.removed?clearInterval(s):t()},n);return s}},kD=e=>e.type==="nodechange"&&e.selectionChange,ND=(e,t)=>{const n=()=>{t.throttle()};at.DOM.bind(document,"mouseup",n),e.on("remove",()=>{at.DOM.unbind(document,"mouseup",n)})},AD=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},TD=(e,t)=>{AD(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{kD(n)||vd(e)})},RD=e=>{const t=Dl(()=>{vd(e)},0);e.on("init",()=>{e.inline&&ND(e,t),TD(e,t)}),e.on("remove",()=>{t.cancel()})};let Ta;const wd=at.DOM,PD=e=>Ky.isEditorUIElement(e),OD=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},rc=(e,t)=>{const n=cR(e);return wd.getParent(t,o=>PD(o)||(n?e.dom.is(o,n):!1))!==null},DD=e=>{try{const t=Qo(_.fromDom(e.getElement()));return yd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},BD=(e,t)=>{const n=t.editor;RD(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Un.setEditorTimeout(n,()=>{const s=e.focusedEditor;!rc(n,DD(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ta||(Ta=s=>{const o=e.activeEditor;o&&Oh(s).each(r=>{r.ownerDocument===document&&r!==document.body&&!rc(o,r)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},wd.bind(document,"focusin",Ta))},ID=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(wd.unbind(document,"focusin",Ta),Ta=null)},$D=e=>{e.on("AddEditor",re(BD,e)),e.on("RemoveEditor",re(ID,e))},FD=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),LD=e=>e.collapsed?h.from(Ao(e.startContainer,e.startOffset)).map(_.fromDom):h.none(),MD=(e,t)=>LD(t).bind(n=>AA(n)?h.some(n):eo(e,n)===!1?h.some(e):h.none()),Gy=(e,t)=>{MD(_.fromDom(e.getBody()),t).bind(n=>dn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},xd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},UD=e=>Vy(e)||gD(e).isSome(),zD=e=>e.iframeElement&&Vy(_.fromDom(e.iframeElement)),HD=e=>{const t=e.getBody();return t&&UD(_.fromDom(t))},VD=e=>{const t=Qo(_.fromDom(e.getElement()));return yd(t).filter(n=>!OD(n.dom)&&rc(e,n.dom)).isSome()},gr=e=>e.inline?HD(e):zD(e),WD=e=>gr(e)||VD(e),jD=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&gr(e)===!1&&Ed(e).each(r=>{e.selection.setRng(r),s=r});const o=FD(e,t.getNode());if(e.dom.isChildOf(o,n)){xd(o),Gy(e,s),Sd(e);return}e.inline||(Qe.browser.isOpera()||xd(n),e.getWin().focus()),(Qe.browser.isFirefox()||e.inline)&&(xd(n),Gy(e,s)),Sd(e)},Sd=e=>e.editorManager.setActive(e),qD=(e,t)=>{e.removed||(t?Sd(e):jD(e))},Yy=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return h.from(r).map(_.fromDom).map(a=>!s||!t.collapsed?hl(a,o(a,i)).getOr(a):a).bind(a=>Yn(a)?h.some(a):Xn(a).filter(Yn)).map(a=>a.dom).getOr(e)},Xy=(e,t,n)=>Yy(e,t,!0,n,(s,o)=>Math.min(Th(s),o)),Qy=(e,t,n)=>Yy(e,t,!1,n,(s,o)=>o>0?o-1:o),Zy=(e,t)=>{const n=e;for(;e&&te(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},KD=(e,t)=>{let n,s,o;if(!t)return e;s=t.startContainer,o=t.endContainer;const r=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(s===o&&i-r<2&&s.hasChildNodes()&&(n=s.childNodes[r]),s.nodeType===3&&o.nodeType===3&&(s.length===r?s=Zy(s.nextSibling,!0):s=s.parentNode,i===0?o=Zy(o.previousSibling,!1):o=o.parentNode,s&&s===o))?s:n&&n.nodeType===3?n.parentNode:n},GD=(e,t,n,s)=>{let o;const r=[],i=e.getRoot();if(n=e.getParent(n||Xy(i,t,t.collapsed),e.isBlock),s=e.getParent(s||Qy(i,t,t.collapsed),e.isBlock),n&&n!==i&&r.push(n),n&&s&&n!==s){o=n;const a=new Dt(n,i);for(;(o=a.next())&&o!==s;)e.isBlock(o)&&r.push(o)}return s&&n!==s&&s!==i&&r.push(s),r},YD=(e,t,n)=>h.from(t).map(s=>{const o=e.nodeIndex(s),r=e.createRng();return r.setStart(s.parentNode,o),r.setEnd(s.parentNode,o+1),n&&(id(e,r,s,!0),id(e,r,s,!1)),r}),_d=(e,t)=>z(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),XD=e=>yt(e)==="img"?1:sb(e).fold(()=>Yt(e).length,t=>t.length),QD=e=>sb(e).filter(t=>t.trim().length!==0||t.indexOf(Xt)>-1).isSome(),ZD=["img","br"],Jy=e=>QD(e)||R(ZD,yt(e)),JD=e=>hA(e,Jy),eB=e=>tB(e,Jy),tB=(e,t)=>{const n=s=>{const o=Yt(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return h.some(i);const a=n(i);if(a.isSome())return a}return h.none()};return n(e)},ev="[data-mce-autocompleter]",nB=(e,t)=>{if(tv(_.fromDom(e.getBody())).isNone()){const n=_.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Lt(n,_.fromDom(t.extractContents())),t.insertNode(n.dom),Xn(n).each(s=>s.dom.normalize()),eB(n).map(s=>{e.selection.setCursorLocation(s.dom,XD(s))})}},sB=e=>nr(e,ev),tv=e=>na(e,ev),oB=(e,t)=>tv(t).each(n=>{const s=e.selection.getBookmark();Jo(n),e.selection.moveToBookmark(s)}),rB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ic=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},iB=e=>{if(!or(e.value))return!1;const t=e.parent;return!(t&&(t.name!=="span"||t.attr("style"))&&/^[ ]+$/.test(e.value))},nv=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class mn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new mn(t,rB[t]||1);return n&&bt(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;let o;if(typeof t!="string")return t!=null&&bt(t,(r,i)=>{s.attr(i,r)}),s;if(o=s.attributes){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new mn(t.name,t.type);let s;if(s=t.attributes){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent.insert(t,n),t.append(n),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o.next=s,n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s.prev=o,t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev.next=t,t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next.prev=t,t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=ic(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=ic(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){const o=this;let r=o.firstChild;if(nv(o))return!1;if(r)do{if(r.type===1){if(r.attr("data-mce-bogus"))continue;if(t[r.name]||nv(r))return!1}if(r.type===8||r.type===3&&!iB(r)||r.type===3&&r.parent&&n[r.parent.name]&&or(r.value)||s&&s(r))return!1}while(r=ic(r,o));return!0}walk(t){return ic(this,null,t)}}const aB=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),sv=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&aB(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},lB=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){Kt(c[2],"--")?a=sv(t,!1,c.index+3):a=sv(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Ys(f)||f.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Ie(r,c[2])||(i+=1),a=s.lastIndex+f[0].length;break}}return a},cB=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},ov=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=cB(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let f;r[i[1]]?f=a:f=lB(s,o,a),o=o.substring(0,a-c)+o.substring(f),n.lastIndex=a-c}return xo(o)},uB=ov,fB=(e,t)=>{const n=An(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},dB=(e,t,n)=>{let s;return t.format==="raw"?s=G.trim(uB(e.serializer,n.innerHTML)):t.format==="text"?(s=xo(n.innerText),s=s===`
`?"":s):t.format==="tree"?s=e.serializer.serialize(n,t):s=fB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Sl(_.fromDom(n))&&me(s)?G.trim(s):s},mB=(e,t)=>h.from(e.getBody()).fold(K(t.format==="tree"?new mn("body",11):""),n=>dB(e,t,n)),pB=G.each,rv=e=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const o=i=>{const a={};return pB(e.getAttribs(i),c=>{const f=c.nodeName.toLowerCase();f.indexOf("_")!==0&&f!=="style"&&f.indexOf("data-")!==0&&(a[f]=e.getAttrib(i,f))}),a},r=(i,a)=>{let c,f;for(f in i)if(Ie(i,f)){if(c=a[f],typeof c>"u"||i[f]!==c)return!1;delete a[f]}for(f in a)if(Ie(a,f))return!1;return!0};return!r(o(n),o(s))||!r(e.parseStyle(e.getAttrib(n,"style")),e.parseStyle(e.getAttrib(s,"style")))?!1:!Mn(n)&&!Mn(s)}}),iv=G.makeMap,av=e=>{const t=[];e=e||{};const n=e.indent,s=iv(e.indent_before||""),o=iv(e.indent_after||""),r=So.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{let d,p,C,y;if(n&&s[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`)),t.push("<",a),c)for(d=0,p=c.length;d<p;d++)C=c[d],t.push(" ",C.name,'="',r(C.value,!0),'"');!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`))},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Po=(e,t=ko())=>{const n=av(e);return e=e||{},e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{n.text(c.value,c.raw)},8:c=>{n.comment(c.value)},7:c=>{n.pi(c.name,c.value)},10:c=>{n.doctype(c.value)},4:c=>{n.cdata(c.value)},11:c=>{if(c=c.firstChild)do a(c);while(c=c.next)}};n.reset();const a=c=>{const f=i[c.type];if(f)f(c);else{const d=c.name,p=d in t.getVoidElements();let C=c.attributes;if(r&&C&&C.length>1){const y=[];y.map={};const w=t.getElementRule(c.name);if(w){for(let v=0,x=w.attributesOrder.length;v<x;v++){const S=w.attributesOrder[v];if(S in C.map){const P=C.map[S];y.map[S]=P,y.push({name:S,value:P})}}for(let v=0,x=C.length;v<x;v++){const S=C[v].name;if(!(S in y.map)){const P=C.map[S];y.map[S]=P,y.push({name:S,value:P})}}C=y}}if(n.start(d,C,p),!p){let y=c.firstChild;if(y){(d==="pre"||d==="textarea")&&y.type===3&&y.value[0]===`
`&&n.text(`
`,!0);do a(y);while(y=y.next)}n.end(d)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},lv=new Set;T(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{lv.add(t)});const cv=["font","text-decoration","text-emphasis"],kd=(e,t)=>Gn(e.parseStyle(e.getAttrib(t,"style"))),gB=e=>lv.has(e),hB=(e,t)=>ot(kd(e,t),n=>!gB(n)),bB=e=>H(e,t=>M(cv,n=>Kt(t,n))),CB=(e,t,n)=>{const s=kd(e,t),o=kd(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Zs(f)&&Zs(d)&&f!==d};return M(s,i=>{const a=c=>M(c,f=>f===i);if(!a(o)&&a(cv)){const c=bB(o);return M(c,r)}else return r(i)})},uv=(e,t,n)=>h.from(n.container()).filter(te).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),Nd=re(uv,!0,xa),Ad=re(uv,!1,xa),yB=e=>{const t=e.container();return te(t)&&(t.data.length===0||_l(t.data)&&ka.isBookmarkNode(t.parentNode))},Oo=(e,t)=>n=>h.from(Wf(e?0:-1,n)).filter(t).isSome(),fv=e=>Kh(e)&&Ns(_.fromDom(e),"display")==="block",dv=e=>vt(e)&&!lA(e),vB=Oo(!0,fv),EB=Oo(!1,fv),Ra=Oo(!0,As),Pa=Oo(!1,As),mv=Oo(!0,qr),pv=Oo(!1,qr),Do=Oo(!0,dv),Bo=Oo(!1,dv),wB=e=>e.slice(0,-1),xB=(e,t,n)=>eo(t,e)?wB(LN(e,s=>n(s)||st(s,t))):[],gv=(e,t)=>xB(e,t,pt),oo=(e,t)=>[e].concat(gv(e,t)),Td=(e,t,n)=>WC(e,t,n,yB),hv=(e,t)=>ge(oo(_.fromDom(t.container()),e),ss),bv=(e,t,n)=>Td(e,t.dom,n).forall(s=>hv(t,n).fold(()=>Rs(s,n,t.dom)===!1,o=>Rs(s,n,t.dom)===!1&&eo(o,_.fromDom(s.container())))),Cv=(e,t,n)=>hv(t,n).fold(()=>Td(e,t.dom,n).forall(s=>Rs(s,n,t.dom)===!1),s=>Td(e,s.dom,n).isNone()),Rd=re(Cv,!1),yv=re(Cv,!0),SB=re(bv,!1),_B=re(bv,!0),kB=e=>zl(e).exists(Yr),ac=(e,t,n)=>{const s=H(oo(_.fromDom(n.container()),t),ss),o=Ft(s).getOr(t);return Fn(e,o.dom,n).filter(kB)},Pd=(e,t)=>zl(t).exists(Yr)||ac(!0,e,t).isSome(),Od=(e,t)=>aP(t).exists(Yr)||ac(!1,e,t).isSome(),NB=re(ac,!1),AB=re(ac,!0),vv=e=>F.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Ev=(e,t)=>{const n=H(oo(_.fromDom(t.container()),e),ss);return Ft(n).getOr(e)},wv=(e,t)=>vv(t)?Ad(t):Ad(t)||is(Ev(e,t).dom,t).exists(Ad),xv=(e,t)=>vv(t)?Nd(t):Nd(t)||Ln(Ev(e,t).dom,t).exists(Nd),TB=e=>R(["pre","pre-wrap"],e),Dd=e=>zl(e).bind(t=>Gr(t,Yn)).exists(t=>TB(Ns(t,"white-space"))),RB=(e,t)=>is(e.dom,t).isNone(),PB=(e,t)=>Ln(e.dom,t).isNone(),OB=(e,t)=>RB(e,t)||PB(e,t)||Rd(e,t)||yv(e,t)||Od(e,t)||Pd(e,t),DB=e=>ke(e)&&vt(e)&&RC(e),BB=e=>t=>DB(new Dt(t,e).next()),IB=(e,t)=>{const n=Ln(e.dom,t).getOr(t),s=BB(e.dom);return t.isAtEnd()&&(s(t.container())||s(n.container()))},$B=(e,t)=>Dd(t)?!1:OB(e,t)||wv(e,t)||xv(e,t),lc=(e,t)=>Dd(t)?!1:Rd(e,t)||SB(e,t)||Od(e,t)||wv(e,t),FB=e=>{const t=e.container(),n=e.offset();return te(t)&&n<t.data.length?F(t,n+1):e},cc=(e,t)=>Dd(t)?!1:yv(e,t)||_B(e,t)||Pd(e,t)||xv(e,t)||IB(e,t),Sv=(e,t)=>lc(e,t)||cc(e,FB(t)),_v=(e,t)=>ql(e.charAt(t)),LB=e=>{const t=e.container();return te(t)&&tn(t.data,Xt)},MB=e=>{const t=e.split("");return z(t,(n,s)=>ql(n)&&s>0&&s<t.length-1&&Xf(t[s-1])&&Xf(t[s+1])?" ":n).join("")},UB=(e,t)=>{const n=t.data,s=F(t,0);return _v(n,0)&&!Sv(e,s)?(t.data=" "+n.slice(1),!0):!1},zB=e=>{const t=e.data,n=MB(t);return n!==t?(e.data=n,!0):!1},HB=(e,t)=>{const n=t.data,s=F(t,n.length-1);return _v(n,n.length-1)&&!Sv(e,s)?(t.data=n.slice(0,-1)+" ",!0):!1},VB=(e,t)=>h.some(t).filter(LB).bind(n=>{const s=n.container();return UB(e,s)||zB(s)||HB(e,s)?h.some(n):h.none()}),WB=e=>{const t=_.fromDom(e.getBody());e.selection.isCollapsed()&&VB(t,F.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},kv=(e,t,n)=>{if(n===0)return;const s=_.fromDom(e),o=Kr(s,ss).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&cc(o,F(e,e.data.length)),a=t===0&&lc(o,F(e,0));e.replaceData(t,n,ub(r,4,a,i))},uc=(e,t)=>{const n=e.data.slice(t),s=n.length-rN(n).length;kv(e,t,s)},Bd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-zg(n).length;kv(e,t-s,s)},Id=(e,t,n,s=!0)=>{const o=zg(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),_t(_.fromDom(i)),n&&uc(r,o),r},jB=(e,t)=>{const n=e.container(),s=e.offset();return F.isTextPosition(e)===!1&&n===t.parentNode&&s>F.before(t).offset()},qB=(e,t)=>jB(t,e)?F(t.container(),t.offset()-1):t,KB=e=>te(e)?F(e,0):F.before(e),GB=e=>te(e)?F(e,e.data.length):F.after(e),Nv=e=>Jn(e.previousSibling)?h.some(GB(e.previousSibling)):e.previousSibling?Ds(e.previousSibling):h.none(),Av=e=>Jn(e.nextSibling)?h.some(KB(e.nextSibling)):e.nextSibling?dn(e.nextSibling):h.none(),YB=(e,t)=>{const n=F.before(t.previousSibling?t.previousSibling:t.parentNode);return is(e,n).fold(()=>Ln(e,F.after(t)),h.some)},XB=(e,t)=>Ln(e,F.after(t)).fold(()=>is(e,F.before(t)),h.some),QB=(e,t)=>Nv(t).orThunk(()=>Av(t)).orThunk(()=>YB(e,t)),ZB=(e,t)=>Av(t).orThunk(()=>Nv(t)).orThunk(()=>XB(e,t)),JB=(e,t,n)=>e?ZB(t,n):QB(t,n),eI=(e,t,n)=>JB(e,t,n).map(re(qB,n)),Tv=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},tI=e=>t=>t.dom===e,nI=(e,t)=>t&&Ie(e.schema.getBlockElements(),yt(t)),sI=e=>{if(Mt(e)){const t=_.fromHtml('<br data-mce-bogus="1">');return ea(e),Lt(e,t),h.some(F.before(t.dom))}else return h.none()},oI=(e,t,n)=>{const s=Xo(e).filter(Bn),o=Ji(e).filter(Bn);return _t(e),wN(s,o,t,(r,i,a)=>{const c=r.dom,f=i.dom,d=c.data.length;return Id(c,f,n),a.container()===f?F(c,d):a}).orThunk(()=>(n&&(s.each(r=>Bd(r.dom,r.dom.length)),o.each(r=>uc(r.dom,0))),t))},rI=(e,t)=>Ie(e.schema.getTextInlineElements(),yt(t)),hr=(e,t,n,s=!0)=>{const o=eI(t,e.getBody(),n.dom),r=Kr(n,re(nI,e),tI(e.getBody())),i=oI(n,o,rI(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(sI).fold(()=>{s&&Tv(e,t,i)},a=>{s&&Tv(e,t,h.some(a))})},iI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,aI=e=>iI.test(e),br=(e,t)=>ks(_.fromDom(t),eR(e)),lI=e=>at.DOM.getStyle(e,"direction",!0)==="rtl"||aI(e.textContent),cI=(e,t,n)=>H(at.DOM.getParents(n.container(),"*",t),e),Io=(e,t,n)=>{const s=cI(e,t,n);return h.from(s[s.length-1])},uI=(e,t,n)=>{const s=Ro(t,e),o=Ro(n,e);return s&&s===o},fI=e=>gf(e)||hf(e),zn=(e,t)=>{if(!t)return t;const n=t.container(),s=t.offset();return e?Zr(n)?te(n.nextSibling)?F(n.nextSibling,0):F.after(n):gf(t)?F(n,s+1):t:Zr(n)?te(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):hf(t)?F(n,s-1):t},Rv=re(zn,!0),Pv=re(zn,!1),Ov=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},$d=e=>Ov(e,"Delete"),dI=e=>Ov(e,"ForwardDelete"),mI=e=>t=>st(e,_.fromDom(t.dom.parentNode)),pI=e=>NA(e)||sa(e),fc=(e,t)=>eo(e,t)?Gr(t,pI,mI(e)):h.none(),Fd=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},gI=(e,t,n)=>vn(dn(n),Ds(n),(s,o)=>{const r=zn(!0,s),i=zn(!1,o),a=zn(!1,t);return e?Ln(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):is(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),Dv=e=>(xN(e)?Xo(e):tf(e)).bind(Dv).orThunk(()=>h.some(e)),Bv=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=Dv(n).getOr(n),i=_.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?Fd(e,s):Mt(i)&&(sr(i),s&&e.selection.setCursorLocation(i.dom,0)),!st(n,i)){const a=Hr(Xn(i),n)?[]:MN(i);T(a.concat(Yt(n)),c=>{!st(c,i)&&!eo(c,i)&&Mt(c)&&_t(c)})}},hI=e=>t=>st(e,t),Ld=e=>En(e,"td,th"),bI=(e,t)=>{const n=f=>_a(_.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=vn(s,o,st).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Md=(e,t)=>({start:e,end:t}),CI=(e,t,n)=>({rng:e,table:t,cells:n}),Oa=Ts.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),dc=(e,t)=>nr(_.fromDom(e),"td,th",t),Iv=e=>!st(e.start,e.end),$v=(e,t)=>_a(e.start,t).bind(n=>_a(e.end,t).bind(s=>Zu(st(n,s),n))),yI=(e,t)=>!Iv(e)&&$v(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),vI=(e,t)=>{const n=dc(e.startContainer,t),s=dc(e.endContainer,t);return vn(n,s,Md)},EI=e=>t=>_a(t,e).bind(n=>Qs(Ld(n)).map(s=>Md(t,s))),wI=e=>t=>_a(t,e).bind(n=>Ft(Ld(n)).map(s=>Md(s,t))),Ud=e=>t=>$v(t,e).map(n=>CI(t,n,Ld(n))),Fv=(e,t,n,s)=>{if(n.collapsed||!e.forall(Iv))return h.none();if(t.isSameTable){const o=e.bind(Ud(s));return h.some({start:o,end:o})}else{const o=dc(n.startContainer,s),r=dc(n.endContainer,s),i=o.bind(EI(s)).bind(Ud(s)),a=r.bind(wI(s)).bind(Ud(s));return h.some({start:i,end:a})}},Lv=(e,t)=>Ae(e,n=>st(n,t)),zd=e=>vn(Lv(e.cells,e.rng.start),Lv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),xI=(e,t,n)=>e.exists(s=>yI(s,n)&&rd(s.start,t)),Mv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},SI=(e,t,n,s)=>Fv(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=zd(o).getOr([]);if(r&&o.cells.length===i.length)return h.some(Oa.fullTable(o.table));if(i.length>0){if(r)return h.some(Oa.partialTable(i,h.none()));{const a=Mv(n,t);return h.some(Oa.partialTable(i,h.some({...t,rng:a})))}}else return h.none()}),_I=(e,t,n,s)=>Fv(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(zd).getOr([]),a=r.bind(zd).getOr([]);if(i.length>0&&a.length>0){const c=Mv(n,t);return h.some(Oa.multiTable(i,a,c))}else return h.none()}),kI=(e,t)=>{const n=hI(e),s=vI(t,n),o=bI(t,n);return xI(s,t,n)?s.map(r=>Oa.singleCellTable(t,r.start)):o.isMultiTable?_I(s,o,t,n):SI(s,o,t,n)},Uv=e=>T(e,t=>{Gt(t,"contenteditable"),sr(t)}),NI=(e,t)=>h.from(e.dom.getParent(t,e.dom.isBlock)).map(_.fromDom),AI=(e,t,n)=>{n.each(s=>{t?_t(s):(sr(s),e.selection.setCursorLocation(s.dom,0))})},Hd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Vd(e,o,t,!1).each(r=>r())},zv=e=>{const t=di(e),n=_.fromDom(e.selection.getNode());wl(n.dom)&&Mt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&M(t,s=>st(s,n))&&Wt(n,"data-mce-selected","1")},Hv=(e,t,n)=>h.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=NI(e,i?r.endContainer:r.startContainer);r.deleteContents(),AI(e,i,a.filter(Mt));const c=i?t[0]:t[t.length-1];return Hd(e,c,s,i),Mt(c)?h.none():h.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);Uv(o),zv(e)}),TI=(e,t,n,s)=>h.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Hd(e,r,o,!0),Hd(e,i,o,!1);const a=Mt(r)?t:t.slice(1),c=Mt(i)?n:n.slice(0,-1);Uv(a.concat(c)),s.deleteContents(),zv(e)}),Vd=(e,t,n,s=!0)=>h.some(()=>{Bv(e,t,n,s)}),RI=(e,t)=>h.some(()=>hr(e,!1,t)),PI=(e,t,n)=>kI(t,n).bind(s=>s.fold(re(Vd,e),re(RI,e),re(Hv,e),re(TI,e))),OI=(e,t)=>mc(e,t),DI=(e,t,n,s)=>Wd(t,s).fold(()=>PI(e,t,n),o=>OI(e,o)),BI=(e,t,n)=>{const s=_.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?Hv(e,n,h.none()):DI(e,s,o,t)},Vv=(e,t)=>ge(oo(t,e),xl),Wd=(e,t)=>ge(oo(t,e),gh("caption")),II=(e,t,n,s,o)=>Wl(n,e.getBody(),o).bind(r=>Vv(t,_.fromDom(r.getNode())).bind(i=>st(i,s)?h.none():h.some(Oe))),mc=(e,t)=>h.some(()=>{sr(t),e.selection.setCursorLocation(t.dom,0)}),$I=(e,t,n,s)=>dn(e.dom).bind(o=>Ds(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),FI=(e,t)=>mc(e,t),LI=(e,t,n)=>Wd(e,_.fromDom(n.getNode())).fold(()=>h.some(Oe),s=>Zu(!st(s,t),Oe)),MI=(e,t,n,s,o)=>Wl(n,e.getBody(),o).fold(()=>h.some(Oe),r=>$I(s,n,o,r)?FI(e,s):LI(t,s,r)),UI=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return Vv(n,s).bind(r=>Mt(r)?mc(e,r):II(e,n,t,r,o))},zI=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return Mt(s)?mc(e,s):MI(e,n,t,s,o)},Wv=(e,t)=>e?mv(t):pv(t),HI=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Wv(t,n)||Fn(t,e.getBody(),n).exists(s=>Wv(t,s))},VI=(e,t,n)=>{const s=_.fromDom(e.getBody());return Wd(s,n).fold(()=>UI(e,t,s,n).orThunk(()=>Zu(HI(e,t),Oe)),o=>zI(e,t,s,o))},jd=(e,t)=>{const n=_.fromDom(e.selection.getStart(!0)),s=di(e);return e.selection.isCollapsed()&&s.length===0?VI(e,t,n):BI(e,n,s)},gi=(e,t)=>{for(;t&&t!==e;){if(ns(t)||vt(t))return t;t=t.parentNode}return null},qd=(e,t)=>{t(e),e.firstChild&&qd(e.firstChild,t),e.next&&qd(e.next,t)},jv=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},WI=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&qd(n.firstChild,o=>{jv(e,t,o,s)}),s},qv=(e,t)=>{const n=s=>{bt(s,o=>{const r=H(o.nodes,i=>ke(i.parent));T(o.filter.callbacks,i=>{i(r,o.filter.name,t)})})};n(e.nodes),n(e.attributes)},Kv=(e,t,n,s={})=>{const o=WI(e,t,n);qv(o,s)},Kd=(e,t,n,s)=>{t.insert&&n[s.name]?s.empty().append(new mn("br",1)):s.empty().append(new mn("#text",3)).value=Xt},jI=e=>Gv(e,"#text")&&e.firstChild.value===Xt,Gv=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,qI=(e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty},Da=(e,t,n,s)=>s.isEmpty(t,n,o=>qI(e,o)),KI=(e,t)=>e&&(e.name in t||e.name==="br"),Gd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)t.isValidChild(n.name,o.name)||Gd(o,t,n);e.unwrap()}},Yd=(e,t,n=Oe)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const f=e[c];let d,p,C;if(!f.parent||a.has(f))continue;if(s[f.name]&&f.parent.name==="li"){let w=f.next;for(;w&&s[w.name];){w.name="li",a.add(w),f.parent.insert(w,f.parent);w=w.next}f.unwrap();continue}const y=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&!i[d.name];d=d.parent)y.push(d);if(d&&y.length>1)if(t.isValidChild(d.name,f.name)){y.reverse(),p=y[0].clone(),n(p);let w=p;for(let v=0;v<y.length-1;v++){t.isValidChild(w.name,y[v].name)?(C=y[v].clone(),n(C),w.append(C)):C=w;for(let x=y[v].firstChild;x&&x!==y[v+1];){const S=x.next;C.append(x),x=S}w=C}Da(t,o,r,p)?d.insert(f,y[0],!0):(d.insert(p,y[0],!0),d.insert(f,p)),d=y[0],(Da(t,o,r,d)||Gv(d,"br"))&&d.empty().remove()}else Gd(f,t);else if(f.parent){if(f.name==="li"){let w=f.prev;if(w&&(w.name==="ul"||w.name==="ol")){w.append(f);continue}if(w=f.next,w&&(w.name==="ul"||w.name==="ol")){w.insert(f,w.firstChild,!0);continue}const v=new mn("ul",1);n(v),f.wrap(v);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const w=new mn("div",1);n(w),f.wrap(w)}else Gd(f,t)}}},GI=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},YI=e=>{const t=F.fromRangeStart(e),n=F.fromRangeEnd(e),s=e.commonAncestorContainer;return Fn(!1,s,n).map(o=>!Rs(t,n,s)&&Rs(t,o,s)?GI(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Xd=e=>e.collapsed?e:YI(e),XI=e=>e.firstChild&&e.firstChild===e.lastChild,QI=e=>e.name==="br"||e.value===Xt,ZI=(e,t)=>e.getBlockElements()[t.name]&&XI(t)&&QI(t.firstChild),JI=(e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||ZI(e,t))},e$=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),JI(e,s)&&(s=s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},t$=e=>{const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode.removeChild(n),e},n$=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return t$(o)},s$=e=>H(e.childNodes,t=>t.nodeName==="LI"),o$=e=>e.data===Xt||Tt(e),r$=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&o$(e.firstChild),i$=e=>!e.firstChild||r$(e),a$=e=>e.length>0&&i$(e[e.length-1])?e.slice(0,-1):e,Qd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},l$=(e,t)=>!!Qd(e,t),c$=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},u$=(e,t)=>{const n=F.before(e),o=Os(t).next(n);return o?o.toRange():null},Yv=(e,t)=>{const n=F.after(e),o=Os(t).prev(n);return o?o.toRange():null},f$=(e,t,n,s)=>{const o=c$(e,s),r=e.parentNode;return r.insertBefore(o[0],e),G.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e),Yv(t[t.length-1],n)},d$=(e,t,n)=>{const s=e.parentNode;return G.each(t,o=>{s.insertBefore(o,e)}),u$(e,n)},m$=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),Yv(t[0],n)),p$=(e,t,n,s)=>{const o=n$(t,e,s),r=Qd(t,n.startContainer),i=a$(s$(o.firstChild)),a=1,c=2,f=t.getRoot(),d=p=>{const C=F.fromRangeStart(n),y=Os(t.getRoot()),w=p===a?y.prev(C):y.next(C);return w?Qd(t,w.getNode())!==r:!0};return d(a)?d$(r,i,f):d(c)?m$(r,i,f,t):f$(r,i,f,n)},g$=["pre"],h$=(e,t,n,s)=>{var o;const r=t.firstChild,i=t.lastChild,a=i.attr("data-mce-type")==="bookmark"?i.prev:i,c=r===a,f=R(g$,r.name);if(c&&f){const d=r.attr("contenteditable")!=="false",p=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,C=h.from(gi(s,n)).forall(ns);return d&&p&&C}else return!1},Zd=wl,b$=(e,t,n)=>{if(n!==null){const s=e.getParent(t.endContainer,Zd);return n===s&&rd(_.fromDom(n),t)}else return!1},C$=(e,t,n)=>{if(n.getAttribute("data-mce-bogus")==="all")n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},y$=(e,t)=>{h.from(e.getParent(t,"td,th")).map(_.fromDom).each(BA)},v$=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=rv(s);G.each(s.select("*[data-mce-fragment]"),i=>{if(ke(n[i.nodeName.toLowerCase()])&&hB(s,i)){for(let c=i.parentNode;ke(c)&&c!==o&&!CB(s,i,c);c=c.parentNode)if(r.compare(c,i)){s.remove(i,!0);break}}})}},E$=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},w$=e=>{G.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},x$=e=>!!e.getAttribute("data-mce-fragment"),S$=(e,t)=>t&&!e.schema.getVoidElements()[t.nodeName],_$=(e,t)=>{let n;const s=e.dom,o=e.selection;if(!t)return;o.scrollIntoView(t);const r=gi(e.getBody(),t);if(s.getContentEditable(r)==="false"){s.remove(t),o.select(r);return}let i=s.createRng();const a=t.previousSibling;if(te(a)){i.setStart(a,a.nodeValue.length);const d=t.nextSibling;te(d)&&(a.appendData(d.data),d.parentNode.removeChild(d))}else i.setStartBefore(t),i.setEndBefore(t);const c=d=>{let p=F.fromRangeStart(d);if(p=Os(e.getBody()).next(p),p)return p.toRange()},f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(ea(_.fromDom(f)),i.setStart(f,0),i.setEnd(f,0),!Zd(f)&&!x$(f)&&(n=c(i))?(i=n,s.remove(f)):s.add(f,s.create("br",{"data-mce-bogus":"1"}))),o.setRng(i)},k$=e=>{const t=e.dom,n=Xd(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Zd);b$(t,n,s)?Vd(e,n,_.fromDom(s)):e.getDoc().execCommand("Delete",!1,null)},N$=(e,t,n)=>{var s;let o,r,i;const a=e.selection,c=e.dom,f=e.parser,d=n.merge,p=Po({validate:!0},e.schema),C='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,C),r=a.getRng();const y=r.startContainer||(r.parentElement?r.parentElement():null),w=e.getBody();y===w&&a.isCollapsed()&&c.isBlock(w.firstChild)&&S$(e,w.firstChild)&&c.isEmpty(w.firstChild)&&(r=c.createRng(),r.setStart(w.firstChild,0),r.setEnd(w.firstChild,0),a.setRng(r)),a.isCollapsed()||k$(e),o=a.getNode();const v={context:o.nodeName.toLowerCase(),data:n.data,insert:!0},x=f.parse(t,v);if(n.paste===!0&&e$(e.schema,x)&&l$(c,o))return r=p$(p,c,a.getRng(),x),a.setRng(r),t;if(n.paste===!0&&h$(c,x,o,e.getBody())&&((s=x.firstChild)===null||s===void 0||s.unwrap()),E$(x),i=x.lastChild,i.attr("id")==="mce_marker"){const S=i;for(i=i.prev;i;i=i.walk(!0))if(i.type===3||!c.isBlock(i.name)){e.schema.isValidChild(i.parent.name,"span")&&i.parent.insert(S,i,i.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(o),!v.invalid)t=p.serialize(x),C$(e,t,o);else{e.selection.setContent(C),o=a.getNode();const S=e.getBody();for(o.nodeType===9?o=i=S:i=o;i!==S;)o=i,i=i.parentNode;t=o===S?S.innerHTML:c.getOuterHTML(o);const P=f.parse(t);for(let ie=P;ie;ie=ie.walk())if(ie.attr("id")==="mce_marker"){ie.replace(x);break}const O=x.children(),$=x.parent.name;x.unwrap();const U=H(O,ie=>!e.schema.isValidChild($,ie.name));Yd(U,e.schema),Kv(f.getNodeFilters(),f.getAttributeFilters(),P),t=p.serialize(P),o===S?c.setHTML(S,t):c.setOuterHTML(o,t)}return v$(e,d),_$(e,c.get("mce_marker")),w$(e.getBody()),y$(c,a.getStart()),t},pc=e=>e instanceof mn,A$=e=>{gr(e)&&dn(e.getBody()).each(t=>{const n=t.getNode(),s=qr(n)?dn(n).getOr(t):t;e.selection.setRng(s.toRange())})},Jd=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&A$(e)},T$=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=An(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ga(e),n)):n||(n=o),Jd(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Po({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Sl(_.fromDom(t))?n:G.trim(n);return Jd(e,o,s.no_selection),{content:o,html:o}}},R$=(e,t,n,s)=>{Kv(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Po({validate:!1},e.schema).serialize(n),r=Sl(_.fromDom(t))?o:G.trim(o);return Jd(e,r,s.no_selection),{content:n,html:r}},P$=(e,t,n)=>h.from(e.getBody()).map(s=>pc(t)?R$(e,s,t,n):T$(e,s,t,n)).getOr({content:t,html:pc(n.content)?"":n.content}),O$=(e,t)=>pA(e,t).isSome(),Xv=e=>Ge(e)?e:pt,D$=(e,t,n)=>{let s=e.dom;const o=Xv(n);for(;s.parentNode;){s=s.parentNode;const r=_.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return h.none()},em=(e,t,n)=>{const s=t(e),o=Xv(n);return s.orThunk(()=>o(e)?h.none():D$(e,t,o))},tm=ed,Qv=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Tn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},nm=(e,t,n,s,o)=>{const r=e.dom.getRoot();return t===r?!1:(t=e.dom.getParent(t,i=>Qv(e,i,n)?!0:i.parentNode===r||!!$s(e,i,n,s,!0)),!!$s(e,t,n,s,o))},gc=(e,t,n)=>zt(n)&&tm(t,n.inline)||Is(n)&&tm(t,n.block)?!0:Tn(n)?we(t)&&e.is(t,n.selector):!1,Zv=(e,t,n,s,o,r)=>{const i=n[s];if(Ge(n.onmatch))return n.onmatch(t,n,s);if(i){if(At(i.length)){for(const a in i)if(Ie(i,a)){const c=s==="attributes"?e.getAttrib(t,a):Yl(e,t,a),f=no(i[a],r),d=It(c)||ml(c);if(d&&It(f))continue;if(o&&d&&!n.exact||(!o||n.exact)&&!tm(c,td(f,a)))return!1}}else for(let a=0;a<i.length;a++)if(s==="attributes"?e.getAttrib(t,i[a]):Yl(e,t,i[a]))return!0}return!0},$s=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&t)for(let a=0;a<r.length;a++){const c=r[a];if(gc(e.dom,t,c)&&Zv(i,t,c,"attributes",o,s)&&Zv(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let d=0;d<f.length;d++)if(!e.dom.hasClass(t,no(f[d],s)))return}return c}}},sm=(e,t,n,s,o)=>{if(s)return nm(e,s,t,n,o);if(s=e.selection.getNode(),nm(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&nm(e,r,t,n,o))},B$=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&$s(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},I$=(e,t)=>{const n=o=>st(o,_.fromDom(e.getBody())),s=(o,r)=>$s(e,o.dom,r)?h.some(r):h.none();return h.from(e.selection.getStart(!0)).bind(o=>em(_.fromDom(o),r=>en(t,i=>s(r,i)),n)).getOrNull()},$$=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Xl(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Tn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},F$=(e,t,n)=>Q(n,(s,o)=>{const r=IP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),hi=jt,Jv="_mce_caret",L$=(e,t)=>e.importNode(t,!0),M$=e=>{const t=[];for(;e;){if(e.nodeType===3&&e.nodeValue!==hi||e.childNodes.length>1)return[];e.nodeType===1&&t.push(e),e=e.firstChild}return t},eE=e=>M$(e).length>0,tE=e=>{if(e){const t=new Dt(e,e);for(e=t.current();e;e=t.next())if(te(e))return e}return null},om=e=>{const t=_.fromTag("span");return yo(t,{id:Jv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Lt(t,_.fromText(hi)),t},U$=e=>{const t=tE(e);return t&&t.nodeValue.charAt(0)===hi&&t.deleteData(0,1),t},rm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(eE(t))hr(e,!1,_.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,d=r.endOffset,p=U$(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&sr(_.fromDom(i)),o.setRng(r)}},im=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)rm(e,t,n);else if(t=mr(e.getBody(),o.getStart()),!t)for(;t=s.get(Jv);)rm(e,t,!1)},z$=(e,t,n)=>{const s=e.dom,o=s.getParent(n,re(Zf,e));o&&s.isEmpty(o)?n.parentNode.replaceChild(t,n):(DA(_.fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(t,n):s.insertAfter(t,n))},nE=(e,t)=>(e.appendChild(t),t),sE=(e,t)=>{const n=de(e,(s,o)=>nE(s,o.cloneNode(!1)),t);return nE(n,n.ownerDocument.createTextNode(hi))},H$=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=H(Gn(i.get()),p=>p!==s&&!tn(p,"removeformat")),f=F$(e,n,c);if(H(f,p=>!$P(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),h.some(p)}else return h.none()},V$=(e,t,n)=>{let s,o;const r=e.selection,i=r.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=mr(e.getBody(),r.getStart()),s&&(o=tE(s));const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&d.test(f.charAt(a))&&d.test(f.charAt(a-1))){const p=r.getBookmark();i.collapse(!0);let C=fi(e,i,e.formatter.get(t));C=oc(C),e.formatter.apply(t,n,C),r.moveToBookmark(p)}else(!s||o.nodeValue!==hi)&&(s=L$(e.getDoc(),om(!0).dom),o=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),r.setCursorLocation(o,a)},W$=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i,a,c;const f=[],d=r.getRng(),p=d.startContainer,C=d.startOffset;for(a=p,p.nodeType===3&&(C!==p.nodeValue.length&&(i=!0),a=a.parentNode);a;){if($s(e,a,t,n,s)){c=a;break}a.nextSibling&&(i=!0),f.push(a),a=a.parentNode}if(!!c)if(i){const y=r.getBookmark();d.collapse(!0);let w=fi(e,d,e.formatter.get(t),!0);w=oc(w),e.formatter.remove(t,n,w,s),r.moveToBookmark(y)}else{const y=mr(e.getBody(),c),w=om(!1).dom;z$(e,w,y!==null?y:c);const v=H$(e,w,c,t,n,s),x=sE(f.concat(v.toArray()),w);rm(e,y,!1),r.setCursorLocation(x,1),o.isEmpty(c)&&o.remove(c)}},j$=(e,t)=>{const n=e.selection,s=e.getBody();im(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===hi&&im(e,mr(s,n.getStart())),(t===37||t===39)&&im(e,mr(s,n.getStart()))},q$=e=>{e.on("mouseup keydown",t=>{j$(e,t.keyCode)})},K$=(e,t)=>{const n=om(!1),s=sE(t,n.dom);return Qn(_.fromDom(e),n),_t(_.fromDom(e)),F(s,0)},G$=(e,t)=>{const n=e.schema.getTextInlineElements();return Ie(n,yt(t))&&!Bs(t.dom)&&!tr(t.dom)},Y$=e=>Bs(e.dom)&&eE(e.dom),hc={},oE=Ur,rE=ji,X$=(e,t)=>{hc[e]||(hc[e]=[]),hc[e].push(t)},Q$=(e,t)=>{rE(hc[e],n=>{n(t)})};X$("pre",e=>{const t=e.selection.getRng();let n;const s=i=>r(i.previousSibling)&&Ig(n,i.previousSibling)!==-1,o=(i,a)=>{const c=_.fromDom(a),f=vo(c).dom;_t(c),Zo(_.fromDom(i),[_.fromTag("br",f),_.fromTag("br",f),...Yt(c)])},r=Zn(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),rE(oE(oE(n,r),s),i=>{o(i.previousSibling,i)}))});const am=G.each,lm=e=>we(e)&&!Mn(e)&&!Bs(e)&&!tr(e),iE=(e,t)=>{for(let n=e;n;n=n[t]){if(te(n)&&Zs(n.data))return e;if(we(n)&&!Mn(n))return n}return e},aE=(e,t,n)=>{const s=rv(e);if(t&&n&&(t=iE(t,"previousSibling"),n=iE(n,"nextSibling"),s.compare(t,n))){for(let o=t.nextSibling;o&&o!==n;){const r=o;o=o.nextSibling,t.appendChild(r)}return e.remove(n),G.each(G.grep(n.childNodes),o=>{t.appendChild(o)}),t}return n},lE=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){const o=aE(e,ty(s),s);aE(e,o,ty(o,!0))}},Z$=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";am(e.select(s,n),o=>{lm(o)&&am(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},cm=(e,t,n)=>{am(e.childNodes,s=>{lm(s)&&(t(s)&&n(s),s.hasChildNodes()&&cm(s,t,n))})},J$=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},cE=(e,t)=>n=>!!(n&&Yl(e,n,t)),uE=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),J$(e,s)},Ba=Ts.generate([{keep:[]},{rename:["name"]},{removed:[]}]),eF=/^(src|href|style)$/,um=G.each,bc=ed,tF=e=>/^(TR|TH|TD)$/.test(e.nodeName),fE=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),dE=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(we(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return te(s)&&n&&o>=s.nodeValue.length&&(s=new Dt(s,e.getBody()).next()||s),te(s)&&!n&&o===0&&(s=new Dt(s,e.getBody()).prev()||s),s},mE=(e,t)=>{const n=t?"firstChild":"lastChild";if(tF(e)&&e[n]){const s=e[n];return e.nodeName==="TR"&&s[n]||s}return e},fm=(e,t,n,s)=>{const o=e.create(n,s);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},pE=(e,t,n,s,o)=>{const r=_.fromDom(t),i=_.fromDom(e.create(s,o)),a=n?Nh(r):kh(r);return Zo(i,a),n?(Qn(r,i),Lh(i,r)):(Eo(r,i),Lt(i,r)),i.dom},nF=(e,t)=>t.links&&e.nodeName==="A",sF=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=An(e);Is(n)&&s===r.getRoot()&&(!n.list_block||!bc(t,n.list_block))&&T(ht(t.childNodes),a=>{ci(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=fm(r,a,i),r.setAttribs(o,ga(e))):o=null}),!(FP(n)&&!bc(n.inline,t))&&r.remove(t,!0)},gE=(e,t,n,s,o)=>{let r;const i=e.dom;if(!gc(i,s,t)&&!nF(s,t))return Ba.keep();const a=s;if(zt(t)&&t.remove==="all"&&Nt(t.preserve_attributes)){const c=H(i.getAttribs(a),f=>R(t.preserve_attributes,f.name.toLowerCase()));if(i.removeAllAttribs(a),T(c,f=>i.setAttrib(a,f.name,f.value)),c.length>0)return Ba.rename("span")}if(t.remove!=="all"){um(t.styles,(f,d)=>{f=td(no(f,n),d+""),Cn(d)&&(d=f,o=null),(t.remove_similar||!o||bc(Yl(i,o,d),f))&&i.setStyle(a,d,""),r=!0}),r&&i.getAttrib(a,"style")===""&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),um(t.attributes,(f,d)=>{let p;if(f=no(f,n),Cn(d)&&(d=f,o=null),t.remove_similar||!o||bc(i.getAttrib(o,d),f)){if(d==="class"&&(f=i.getAttrib(a,d),f&&(p="",T(f.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(p+=(p?" ":"")+C)}),p))){i.setAttrib(a,d,p);return}if(eF.test(d)&&a.removeAttribute("data-mce-"+d),d==="style"&&Zn(["li"])(a)&&i.getStyle(a,"list-style-type")==="none"){a.removeAttribute(d),i.setStyle(a,"list-style-type","none");return}d==="class"&&a.removeAttribute("className"),a.removeAttribute(d)}}),um(t.classes,f=>{f=no(f,n),(!o||i.hasClass(o,f))&&i.removeClass(a,f)});const c=i.getAttribs(a);for(let f=0;f<c.length;f++){const d=c[f].nodeName;if(d.indexOf("_")!==0&&d.indexOf("data-")!==0)return Ba.keep()}}return t.remove!=="none"?(sF(e,a,t),Ba.removed()):Ba.keep()},bi=(e,t,n,s,o)=>gE(e,t,n,s,o).fold(pt,r=>(e.dom.rename(s,r),!0),ct),oF=(e,t,n,s,o)=>{let r;return T(Xl(e.dom,t.parentNode).reverse(),i=>{if(!r&&i.id!=="_start"&&i.id!=="_end"){const a=$s(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},rF=(e,t,n,s)=>gE(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),iF=(e,t,n,s,o,r,i,a)=>{let c,f,d;const p=e.dom;if(n){const C=n.parentNode;for(let y=s.parentNode;y&&y!==C;y=y.parentNode){c=p.clone(y,!1);for(let w=0;w<t.length&&(c=rF(e,t[w],a,c),c!==null);w++);c&&(f&&c.appendChild(f),d||(d=c),f=c)}r&&(!i.mixed||!p.isBlock(n))&&(s=p.split(n,s)),f&&(o.parentNode.insertBefore(f,o),d.appendChild(o),zt(i)&&lE(p,i,a,f))}return s},hE=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0];let a=!0;const c=e.dom,f=e.selection,d=x=>{const S=oF(e,x,t,n,o);return iF(e,r,S,x,x,!0,i,n)},p=x=>Mn(x)&&we(x)&&(x.id==="_start"||x.id==="_end"),C=x=>M(r,S=>bi(e,S,n,x,x)),y=x=>{let S=!0,P=!1;we(x)&&c.getContentEditable(x)&&(S=a,a=c.getContentEditable(x)==="true",P=!0);const O=ht(x.childNodes);if(a&&!P){const ie=C(x)||M(r,j=>gc(c,x,j)),V=x.parentNode;!ie&&ke(V)&&nd(i)&&C(V)}if(i.deep&&O.length){for(let U=0;U<O.length;U++)y(O[U]);P&&(a=S)}T(["underline","line-through","overline"],U=>{we(x)&&e.dom.getStyle(x,"text-decoration")===U&&x.parentNode&&ny(c,x.parentNode)===U&&bi(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:U}},null,x)})},w=x=>{const S=c.get(x?"_start":"_end");let P=S[x?"firstChild":"lastChild"];return p(P)&&(P=P[x?"firstChild":"lastChild"]),te(P)&&P.data.length===0&&(P=x?S.previousSibling||S.nextSibling:S.nextSibling||S.previousSibling),c.remove(S,!0),P},v=x=>{let S,P,O=fi(e,x,r,x.collapsed);if(i.split){if(O=oc(O),S=dE(e,O,!0),P=dE(e,O),S!==P){if(S=mE(S,!0),P=mE(P,!1),fE(c,S,P)){const U=h.from(S.firstChild).getOr(S);d(pE(c,U,!0,"span",{id:"_start","data-mce-type":"bookmark"})),w(!0);return}if(fE(c,P,S)){const U=h.from(P.lastChild).getOr(P);d(pE(c,U,!1,"span",{id:"_end","data-mce-type":"bookmark"})),w(!1);return}S=fm(c,S,"span",{id:"_start","data-mce-type":"bookmark"}),P=fm(c,P,"span",{id:"_end","data-mce-type":"bookmark"});const $=c.createRng();$.setStartAfter(S),$.setEndBefore(P),Sa(c,$,U=>{T(U,ie=>{!Mn(ie)&&!Mn(ie.parentNode)&&d(ie)})}),d(S),d(P),S=w(!0),P=w()}else S=P=d(S);O.startContainer=S.parentNode?S.parentNode:S,O.startOffset=c.nodeIndex(S),O.endContainer=P.parentNode?P.parentNode:P,O.endOffset=c.nodeIndex(P)+1}Sa(c,O,$=>{T($,y)})};if(s){if(Gl(s)){const x=c.createRng();x.setStartBefore(s),x.setEndAfter(s),v(x)}else v(s);cd(e,t,s,n);return}if(c.getContentEditable(f.getNode())==="false"){s=f.getNode();for(let x=0;x<r.length&&!(r[x].ceFalseOverride&&bi(e,r[x],n,s,s));x++);cd(e,t,s,n);return}!f.isCollapsed()||!zt(i)||di(e).length?(ld(f,!0,()=>{ad(e,v)}),zt(i)&&sm(e,t,n,f.getStart())&&ey(c,f,f.getRng()),e.nodeChanged()):W$(e,t,n,o),cd(e,t,s,n)},bE=G.each,aF=(e,t,n,s)=>{const o=r=>{if(r.nodeType===1&&r.parentNode&&r.parentNode.nodeType===1){const i=ny(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(G.walk(s,o,"childNodes"),o(s))},lF=(e,t,n,s)=>{t.styles&&t.styles.backgroundColor&&cm(s,cE(e,"fontSize"),uE(e,"backgroundColor",no(t.styles.backgroundColor,n)))},cF=(e,t,n,s)=>{zt(t)&&(t.inline==="sub"||t.inline==="sup")&&(cm(s,cE(e,"fontSize"),uE(e,"fontSize","")),e.remove(e.select(t.inline==="sup"?"sub":"sup",s),!0))},uF=(e,t,n,s)=>{bE(t,o=>{zt(o)&&bE(e.dom.select(o.inline,s),r=>{!lm(r)||bi(e,o,n,r,o.exact?r:null)}),Z$(e.dom,o,s)})},fF=(e,t,n,s,o)=>{$s(e,o.parentNode,n,s)&&bi(e,t,s,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,r=>{if($s(e,r,n,s))return bi(e,t,s,o),!0})},Cc=G.each,dF=e=>we(e)&&!Mn(e)&&!Bs(e)&&!tr(e),mF=(e,t,n,s)=>{if(lR(e)&&zt(t)){const o=Cb(e.schema),r=O$(_.fromDom(n),i=>Bs(i.dom));return Mr(o,s)&&Mt(_.fromDom(n.parentNode),!1)&&!r}else return!1},CE=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(y,w=r)=>{if(Ge(w.onformat)&&w.onformat(y,w,n,s),Cc(w.styles,(v,x)=>{a.setStyle(y,x,no(v,n))}),w.styles){const v=a.getAttrib(y,"style");v&&a.setAttrib(y,"data-mce-style",v)}Cc(w.attributes,(v,x)=>{a.setAttrib(y,x,no(v,n))}),Cc(w.classes,v=>{v=no(v,n),a.hasClass(y,v)||a.addClass(y,v)})},d=(y,w)=>{let v=!1;return Cc(y,x=>{if(!Tn(x))return!1;if(!(ke(x.collapsed)&&x.collapsed!==i)&&a.is(w,x.selector)&&!Bs(w))return f(w,x),v=!0,!1}),v},p=y=>{if(me(y)){const w=a.create(y);return f(w),w}else return null},C=(y,w,v)=>{const x=[];let S=!0;const P=r.inline||r.block,O=p(P);Sa(y,w,$=>{let U;const ie=V=>{let j=!1,X=S;const J=V.nodeName.toLowerCase(),ve=V.parentNode,ue=ve.nodeName.toLowerCase();if(we(V)&&y.getContentEditable(V)&&(X=S,S=y.getContentEditable(V)==="true",j=!0),Tt(V)&&!mF(e,r,V,ue)){U=null,Is(r)&&y.remove(V);return}if(Is(r)&&r.wrapper&&$s(e,V,t,n)){U=null;return}if(S&&!j&&Is(r)&&!r.wrapper&&Zf(e,J)&&ci(e,ue,P)){const se=y.rename(V,P);f(se),x.push(se),U=null;return}if(Tn(r)){let se=d(o,V);if(!se&&ke(ve)&&nd(r)&&(se=d(o,ve)),!zt(r)||se){U=null;return}}S&&!j&&ci(e,P,J)&&ci(e,ue,P)&&!(!v&&te(V)&&_l(V.data))&&!Bs(V)&&(!zt(r)||!y.isBlock(V))?(U||(U=y.clone(O,!1),V.parentNode.insertBefore(U,V),x.push(U)),U.appendChild(V)):(U=null,T(ht(V.childNodes),ie),j&&(S=X),U=null)};T($,ie)}),r.links===!0&&T(x,$=>{const U=ie=>{ie.nodeName==="A"&&f(ie,r),T(ht(ie.childNodes),U)};U($)}),T(x,$=>{const U=j=>{let X=0;return T(j.childNodes,J=>{!BP(J)&&!Mn(J)&&X++}),X},ie=j=>ge(j.childNodes,dF).filter(J=>gc(y,J,r)).map(J=>{const ve=y.clone(J,!1);return f(ve),y.replace(ve,j,!0),y.remove(J,!0),ve}).getOr(j),V=U($);if((x.length>1||!y.isBlock($))&&V===0){y.remove($,!0);return}(zt(r)||Is(r)&&r.wrapper)&&(!r.exact&&V===1&&($=ie($)),uF(e,o,n,$),fF(e,r,t,n,$),lF(y,r,n,$),aF(y,r,n,$),cF(y,r,n,$),lE(y,r,n,$))})};if(a.getContentEditable(c.getNode())==="false"){s=c.getNode();for(let y=0,w=o.length;y<w;y++){const v=o[y];if(v.ceFalseOverride&&Tn(v)&&a.is(s,v.selector)){f(s,v);break}}yy(e,t,s,n);return}if(r){if(s)if(Gl(s)){if(!d(o,s)){const y=a.createRng();y.setStartBefore(s),y.setEndAfter(s),C(a,fi(e,y,o),!0)}}else C(a,s,!0);else!i||!zt(r)||di(e).length?(c.setRng(Xd(c.getRng())),ld(c,!0,()=>{ad(e,(y,w)=>{const v=w?y:fi(e,y,o);C(a,v,!1)})}),ey(a,c,c.getRng()),e.nodeChanged()):V$(e,t,n);Q$(t,e)}yy(e,t,s,n)},yE=e=>Ie(e,"vars"),pF=(e,t)=>{e.set({}),t.on("NodeChange",n=>{xE(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=h.from(n.node).map(o=>Gl(o)?o:o.startContainer).bind(o=>we(o)?h.some(o):h.from(o.parentElement)).getOrThunk(()=>vE(t));xE(t,s,e.get())})},vE=e=>e.selection.getStart(),EE=(e,t,n,s,o)=>Te(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!At(c)},a=>Qv(e,a,n)?!0:s?!1:ke(e.formatter.matchNode(a,n,o,!0))),wE=(e,t)=>{const n=t!=null?t:vE(e);return H(Xl(e.dom,n),s=>we(s)&&!tr(s))},xE=(e,t,n)=>{const s=wE(e,t);bt(n,(o,r)=>{const i=a=>{const c=EE(e,s,r,a.similar,yE(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const d=c.getOr(t);yE(a)?a.callback(f,{node:d,format:r,parents:s}):T(a.callbacks,p=>p(f,{node:d,format:r,parents:s}))}};T([o.withSimilar,o.withoutSimilar],i),T(o.withVars,i)})},gF=(e,t,n,s,o,r)=>{const i=t.get();T(n.split(","),a=>{const c=ut(i,a).getOrThunk(()=>{const d={withSimilar:{state:Ut(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ut(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),f=()=>{const d=wE(e);return EE(e,d,a,o,r).isSome()};if(At(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(f())}else c.withVars.push({state:Ut(f()),similar:o,vars:r,callback:s})}),t.set(i)},hF=(e,t,n)=>{const s=e.get();T(t.split(","),o=>ut(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:H(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:H(r.withoutSimilar.callbacks,i=>i!==n)},withVars:H(r.withVars,i=>i.callback!==n)}})),e.set(s)},bF=(e,t,n,s,o,r)=>(t.get()===null&&pF(t,e),gF(e,t,n,s,o,r),{unbind:()=>hF(t,n,s)}),CF=(e,t,n,s)=>{const o=e.formatter.get(t);sm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?hE(e,t,n,s):CE(e,t,n,s)};function Cr(e){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(e)}function dm(e,t){return dm=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},dm(e,t)}function yF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yc(e,t,n){return yF()?yc=Reflect.construct:yc=function(o,r,i){var a=[null];a.push.apply(a,r);var c=Function.bind.apply(o,a),f=new c;return i&&dm(f,i.prototype),f},yc.apply(null,arguments)}function as(e){return vF(e)||EF(e)||wF(e)||xF()}function vF(e){if(Array.isArray(e))return mm(e)}function EF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wF(e,t){if(!!e){if(typeof e=="string")return mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mm(e,t)}}function mm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function xF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var SF=Object.hasOwnProperty,SE=Object.setPrototypeOf,_F=Object.isFrozen,kF=Object.getPrototypeOf,NF=Object.getOwnPropertyDescriptor,wn=Object.freeze,Fs=Object.seal,AF=Object.create,_E=typeof Reflect<"u"&&Reflect,vc=_E.apply,pm=_E.construct;vc||(vc=function(t,n,s){return t.apply(n,s)}),wn||(wn=function(t){return t}),Fs||(Fs=function(t){return t}),pm||(pm=function(t,n){return yc(t,as(n))});var TF=ls(Array.prototype.forEach),RF=ls(Array.prototype.pop),Ia=ls(Array.prototype.push),Ec=ls(String.prototype.toLowerCase),PF=ls(String.prototype.match),$o=ls(String.prototype.replace),OF=ls(String.prototype.indexOf),DF=ls(String.prototype.trim),xn=ls(RegExp.prototype.test),gm=BF(TypeError);function ls(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return vc(e,t,s)}}function BF(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return pm(e,n)}}function Ze(e,t){SE&&SE(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=Ec(s);o!==s&&(_F(t)||(t[n]=o),s=o)}e[s]=!0}return e}function yr(e){var t=AF(null),n;for(n in e)vc(SF,e,[n])&&(t[n]=e[n]);return t}function wc(e,t){for(;e!==null;){var n=NF(e,t);if(n){if(n.get)return ls(n.get);if(typeof n.value=="function")return ls(n.value)}e=kF(e)}function s(o){return console.warn("fallback value for",o),null}return s}var kE=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hm=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bm=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),IF=wn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Cm=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$F=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NE=wn(["#text"]),AE=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ym=wn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TE=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xc=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FF=Fs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),LF=Fs(/<%[\w\W]*|[\w\W]*%>/gm),MF=Fs(/^data-[\-\w.\u00B7-\uFFFF]/),UF=Fs(/^aria-[\-\w]+$/),zF=Fs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HF=Fs(/^(?:\w+script|data):/i),VF=Fs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WF=Fs(/^html$/i),jF=function(){return typeof window>"u"?null:window},qF=function(t,n){if(Cr(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function RE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jF(),t=function(I){return RE(I)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,f=e.NamedNodeMap,d=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,p=e.HTMLFormElement,C=e.DOMParser,y=e.trustedTypes,w=a.prototype,v=wc(w,"cloneNode"),x=wc(w,"nextSibling"),S=wc(w,"childNodes"),P=wc(w,"parentNode");if(typeof r=="function"){var O=s.createElement("template");O.content&&O.content.ownerDocument&&(s=O.content.ownerDocument)}var $=qF(y,n),U=$?$.createHTML(""):"",ie=s,V=ie.implementation,j=ie.createNodeIterator,X=ie.createDocumentFragment,J=ie.getElementsByTagName,ve=n.importNode,ue={};try{ue=yr(s).documentMode?s.documentMode:{}}catch{}var se={};t.isSupported=typeof P=="function"&&V&&typeof V.createHTMLDocument<"u"&&ue!==9;var ze=FF,je=LF,Je=MF,Rt=UF,Y=HF,he=VF,$e=zF,De=null,Bt=Ze({},[].concat(as(kE),as(hm),as(bm),as(Cm),as(NE))),ne=null,Ee=Ze({},[].concat(as(AE),as(ym),as(TE),as(xc))),fe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,Be=null,Le=!0,Se=!0,xe=!1,qe=!1,Ke=!1,Pt=!1,tt=!1,Fe=!1,nt=!1,Zt=!1,Jt=!0,Vt=!0,ms=!1,gn={},on=null,Hn=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Lo=null,Us=Ze({},["audio","video","img","source","image","track"]),zs=null,ps=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kr="http://www.w3.org/1998/Math/MathML",Mo="http://www.w3.org/2000/svg",Vn="http://www.w3.org/1999/xhtml",gs=Vn,Nr=!1,hs,mu=["application/xhtml+xml","text/html"],Vp="text/html",lo,co=null,l_=s.createElement("form"),Wp=function(I){return I instanceof RegExp||I instanceof Function},pu=function(I){co&&co===I||((!I||Cr(I)!=="object")&&(I={}),I=yr(I),De="ALLOWED_TAGS"in I?Ze({},I.ALLOWED_TAGS):Bt,ne="ALLOWED_ATTR"in I?Ze({},I.ALLOWED_ATTR):Ee,zs="ADD_URI_SAFE_ATTR"in I?Ze(yr(ps),I.ADD_URI_SAFE_ATTR):ps,Lo="ADD_DATA_URI_TAGS"in I?Ze(yr(Us),I.ADD_DATA_URI_TAGS):Us,on="FORBID_CONTENTS"in I?Ze({},I.FORBID_CONTENTS):Hn,ee="FORBID_TAGS"in I?Ze({},I.FORBID_TAGS):{},Be="FORBID_ATTR"in I?Ze({},I.FORBID_ATTR):{},gn="USE_PROFILES"in I?I.USE_PROFILES:!1,Le=I.ALLOW_ARIA_ATTR!==!1,Se=I.ALLOW_DATA_ATTR!==!1,xe=I.ALLOW_UNKNOWN_PROTOCOLS||!1,qe=I.SAFE_FOR_TEMPLATES||!1,Ke=I.WHOLE_DOCUMENT||!1,Fe=I.RETURN_DOM||!1,nt=I.RETURN_DOM_FRAGMENT||!1,Zt=I.RETURN_TRUSTED_TYPE||!1,tt=I.FORCE_BODY||!1,Jt=I.SANITIZE_DOM!==!1,Vt=I.KEEP_CONTENT!==!1,ms=I.IN_PLACE||!1,$e=I.ALLOWED_URI_REGEXP||$e,gs=I.NAMESPACE||Vn,I.CUSTOM_ELEMENT_HANDLING&&Wp(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(fe.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&Wp(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(fe.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(fe.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hs=mu.indexOf(I.PARSER_MEDIA_TYPE)===-1?hs=Vp:hs=I.PARSER_MEDIA_TYPE,lo=hs==="application/xhtml+xml"?function(ae){return ae}:Ec,qe&&(Se=!1),nt&&(Fe=!0),gn&&(De=Ze({},as(NE)),ne=[],gn.html===!0&&(Ze(De,kE),Ze(ne,AE)),gn.svg===!0&&(Ze(De,hm),Ze(ne,ym),Ze(ne,xc)),gn.svgFilters===!0&&(Ze(De,bm),Ze(ne,ym),Ze(ne,xc)),gn.mathMl===!0&&(Ze(De,Cm),Ze(ne,TE),Ze(ne,xc))),I.ADD_TAGS&&(De===Bt&&(De=yr(De)),Ze(De,I.ADD_TAGS)),I.ADD_ATTR&&(ne===Ee&&(ne=yr(ne)),Ze(ne,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Ze(zs,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(on===Hn&&(on=yr(on)),Ze(on,I.FORBID_CONTENTS)),Vt&&(De["#text"]=!0),Ke&&Ze(De,["html","head","body"]),De.table&&(Ze(De,["tbody"]),delete ee.tbody),wn&&wn(I),co=I)},jp=Ze({},["mi","mo","mn","ms","mtext"]),uo=Ze({},["foreignobject","desc","title","annotation-xml"]),gu=Ze({},["title","style","font","a","script"]),A=Ze({},hm);Ze(A,bm),Ze(A,IF);var B=Ze({},Cm);Ze(B,$F);var q=function(I){var ae=P(I);(!ae||!ae.tagName)&&(ae={namespaceURI:Vn,tagName:"template"});var _e=Ec(I.tagName),Et=Ec(ae.tagName);return I.namespaceURI===Mo?ae.namespaceURI===Vn?_e==="svg":ae.namespaceURI===kr?_e==="svg"&&(Et==="annotation-xml"||jp[Et]):Boolean(A[_e]):I.namespaceURI===kr?ae.namespaceURI===Vn?_e==="math":ae.namespaceURI===Mo?_e==="math"&&uo[Et]:Boolean(B[_e]):I.namespaceURI===Vn?ae.namespaceURI===Mo&&!uo[Et]||ae.namespaceURI===kr&&!jp[Et]?!1:!B[_e]&&(gu[_e]||!A[_e]):!1},W=function(I){Ia(t.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=U}catch{I.remove()}}},Ce=function(I,ae){try{Ia(t.removed,{attribute:ae.getAttributeNode(I),from:ae})}catch{Ia(t.removed,{attribute:null,from:ae})}if(ae.removeAttribute(I),I==="is"&&!ne[I])if(Fe||nt)try{W(ae)}catch{}else try{ae.setAttribute(I,"")}catch{}},Ve=function(I){var ae,_e;if(tt)I="<remove></remove>"+I;else{var Et=PF(I,/^[\r\n\t ]+/);_e=Et&&Et[0]}hs==="application/xhtml+xml"&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var Pn=$?$.createHTML(I):I;if(gs===Vn)try{ae=new C().parseFromString(Pn,hs)}catch{}if(!ae||!ae.documentElement){ae=V.createDocument(gs,"template",null);try{ae.documentElement.innerHTML=Nr?"":Pn}catch{}}var hn=ae.body||ae.documentElement;return I&&_e&&hn.insertBefore(s.createTextNode(_e),hn.childNodes[0]||null),gs===Vn?J.call(ae,Ke?"html":"body")[0]:Ke?ae.documentElement:hn},He=function(I){return j.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},_n=function(I){return I instanceof p&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof d)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function")},bs=function(I){return Cr(i)==="object"?I instanceof i:I&&Cr(I)==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},fo=function(I,ae,_e){!se[I]||TF(se[I],function(Et){Et.call(t,ae,_e,co)})},c_=function(I){var ae;if(fo("beforeSanitizeElements",I,null),_n(I)||xn(/[\u0080-\uFFFF]/,I.nodeName))return W(I),!0;var _e=lo(I.nodeName);if(fo("uponSanitizeElement",I,{tagName:_e,allowedTags:De}),I.hasChildNodes()&&!bs(I.firstElementChild)&&(!bs(I.content)||!bs(I.content.firstElementChild))&&xn(/<[/\w]/g,I.innerHTML)&&xn(/<[/\w]/g,I.textContent)||_e==="select"&&xn(/<template/i,I.innerHTML))return W(I),!0;if(!De[_e]||ee[_e]){if(!ee[_e]&&f_(_e)&&(fe.tagNameCheck instanceof RegExp&&xn(fe.tagNameCheck,_e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(_e)))return!1;if(Vt&&!on[_e]){var Et=P(I)||I.parentNode,Pn=S(I)||I.childNodes;if(Pn&&Et)for(var hn=Pn.length,rn=hn-1;rn>=0;--rn)Et.insertBefore(v(Pn[rn],!0),x(I))}return W(I),!0}return I instanceof a&&!q(I)||(_e==="noscript"||_e==="noembed")&&xn(/<\/no(script|embed)/i,I.innerHTML)?(W(I),!0):(qe&&I.nodeType===3&&(ae=I.textContent,ae=$o(ae,ze," "),ae=$o(ae,je," "),I.textContent!==ae&&(Ia(t.removed,{element:I.cloneNode()}),I.textContent=ae)),fo("afterSanitizeElements",I,null),!1)},u_=function(I,ae,_e){if(Jt&&(ae==="id"||ae==="name")&&(_e in s||_e in l_))return!1;if(!(Se&&!Be[ae]&&xn(Je,ae))){if(!(Le&&xn(Rt,ae))){if(!ne[ae]||Be[ae]){if(!(f_(I)&&(fe.tagNameCheck instanceof RegExp&&xn(fe.tagNameCheck,I)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(I))&&(fe.attributeNameCheck instanceof RegExp&&xn(fe.attributeNameCheck,ae)||fe.attributeNameCheck instanceof Function&&fe.attributeNameCheck(ae))||ae==="is"&&fe.allowCustomizedBuiltInElements&&(fe.tagNameCheck instanceof RegExp&&xn(fe.tagNameCheck,_e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(_e))))return!1}else if(!zs[ae]){if(!xn($e,$o(_e,he,""))){if(!((ae==="src"||ae==="xlink:href"||ae==="href")&&I!=="script"&&OF(_e,"data:")===0&&Lo[I])){if(!(xe&&!xn(Y,$o(_e,he,"")))){if(_e)return!1}}}}}}return!0},f_=function(I){return I.indexOf("-")>0},d_=function(I){var ae,_e,Et,Pn;fo("beforeSanitizeAttributes",I,null);var hn=I.attributes;if(!!hn){var rn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};for(Pn=hn.length;Pn--;){ae=hn[Pn];var hu=ae,an=hu.name,m_=hu.namespaceURI;_e=an==="value"?ae.value:DF(ae.value),Et=lo(an);var I4=_e;if(rn.attrName=Et,rn.attrValue=_e,rn.keepAttr=!0,rn.forceKeepAttr=void 0,fo("uponSanitizeAttribute",I,rn),_e=rn.attrValue,!rn.forceKeepAttr){if(!rn.keepAttr){Ce(an,I);continue}if(xn(/\/>/i,_e)){Ce(an,I);continue}qe&&(_e=$o(_e,ze," "),_e=$o(_e,je," "));var $4=lo(I.nodeName);if(!u_($4,Et,_e)){Ce(an,I);continue}if(_e!==I4)try{m_?I.setAttributeNS(m_,an,_e):I.setAttribute(an,_e)}catch{Ce(an,I)}}}fo("afterSanitizeAttributes",I,null)}},B4=function Re(I){var ae,_e=He(I);for(fo("beforeSanitizeShadowDOM",I,null);ae=_e.nextNode();)fo("uponSanitizeShadowNode",ae,null),!c_(ae)&&(ae.content instanceof o&&Re(ae.content),d_(ae));fo("afterSanitizeShadowDOM",I,null)};return t.sanitize=function(Re,I){var ae,_e,Et,Pn,hn;if(Nr=!Re,Nr&&(Re="<!-->"),typeof Re!="string"&&!bs(Re)){if(typeof Re.toString!="function")throw gm("toString is not a function");if(Re=Re.toString(),typeof Re!="string")throw gm("dirty is not a string, aborting")}if(!t.isSupported){if(Cr(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Re=="string")return e.toStaticHTML(Re);if(bs(Re))return e.toStaticHTML(Re.outerHTML)}return Re}if(Pt||pu(I),t.removed=[],typeof Re=="string"&&(ms=!1),ms){if(Re.nodeName){var rn=lo(Re.nodeName);if(!De[rn]||ee[rn])throw gm("root node is forbidden and cannot be sanitized in-place")}}else if(Re instanceof i)ae=Ve("<!---->"),_e=ae.ownerDocument.importNode(Re,!0),_e.nodeType===1&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?ae=_e:ae.appendChild(_e);else{if(!Fe&&!qe&&!Ke&&Re.indexOf("<")===-1)return $&&Zt?$.createHTML(Re):Re;if(ae=Ve(Re),!ae)return Fe?null:Zt?U:""}ae&&tt&&W(ae.firstChild);for(var hu=He(ms?Re:ae);Et=hu.nextNode();)Et.nodeType===3&&Et===Pn||c_(Et)||(Et.content instanceof o&&B4(Et.content),d_(Et),Pn=Et);if(Pn=null,ms)return Re;if(Fe){if(nt)for(hn=X.call(ae.ownerDocument);ae.firstChild;)hn.appendChild(ae.firstChild);else hn=ae;return ne.shadowroot&&(hn=ve.call(n,hn,!0)),hn}var an=Ke?ae.outerHTML:ae.innerHTML;return Ke&&De["!doctype"]&&ae.ownerDocument&&ae.ownerDocument.doctype&&ae.ownerDocument.doctype.name&&xn(WF,ae.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+ae.ownerDocument.doctype.name+`>
`+an),qe&&(an=$o(an,ze," "),an=$o(an,je," ")),$&&Zt?$.createHTML(an):an},t.setConfig=function(Re){pu(Re),Pt=!0},t.clearConfig=function(){co=null,Pt=!1},t.isValidAttribute=function(Re,I,ae){co||pu({});var _e=lo(Re),Et=lo(I);return u_(_e,Et,ae)},t.addHook=function(Re,I){typeof I=="function"&&(se[Re]=se[Re]||[],Ia(se[Re],I))},t.removeHook=function(Re){if(se[Re])return RF(se[Re])},t.removeHooks=function(Re){se[Re]&&(se[Re]=[])},t.removeAllHooks=function(){se={}},t}var KF=RE();const PE=G.explode,OE=()=>{const e={};return{addFilter:(o,r)=>{T(PE(o),i=>{Ie(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>ju(e),removeFilter:(o,r)=>{T(PE(o),i=>{if(Ie(e,i))if(ke(r)){const a=e[i],c=H(a.callbacks,f=>f!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},GF=(e,t)=>{T(t,n=>{e.attr(n,null)})},YF=(e,t,n)=>{e.addNodeFilter("font",s=>{T(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&(r["font-size"]=n[parseInt(o.attr("size"),10)-1]),o.name="span",o.attr("style",t.serialize(r)),GF(o,["color","face","size"])})})},XF=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";T(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},QF=(e,t,n)=>{const s=Sf();t.convert_fonts_to_spans&&YF(e,s,G.explode(t.font_size_legacy_values)),XF(e,n,s)},ZF=(e,t,n)=>{t.inline_styles&&QF(e,t,n)},JF=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),eL=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},vm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?eL(s):decodeURIComponent(s);return h.some({type:o[1],data:i,base64Encoded:r})}else return h.none()},DE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return h.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return h.some(new Blob([o],{type:e}))},tL=e=>new Promise((t,n)=>{vm(e).bind(({type:s,data:o,base64Encoded:r})=>DE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),nL=e=>Kt(e,"blob:")?JF(e):Kt(e,"data:")?tL(e):Promise.reject("Unknown URI format"),BE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{n(s.error.message)},s.readAsDataURL(e)});let sL=0;const oL=e=>(e||"blobid")+sL++,IE=(e,t,n)=>vm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return h.none();{const i=r?s:btoa(s);return n(i,o)}}),$E=(e,t,n)=>{const s=e.create(oL(),t,n);return e.add(s),s},FE=(e,t,n=!1)=>IE(t,n,(s,o)=>h.from(e.getByData(s,o)).orThunk(()=>DE(o,s).map(r=>$E(e,r,s)))),rL=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Kt(t,"blob:")){const s=e.getByUri(t);return ke(s)?Promise.resolve(s):nL(t).then(o=>BE(o).then(r=>IE(r,!1,i=>h.some($E(e,o,i))).getOrThunk(n)))}else return Kt(t,"data:")?FE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},iL=e=>ke(e.attr("data-mce-bogus")),aL=e=>e.attr("src")===Qe.transparentSrc||ke(e.attr("data-mce-placeholder")),lL=(e,t)=>{const{blob_cache:n}=t,s=o=>{const r=o.attr("src");aL(o)||iL(o)||FE(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};n&&e.addAttributeFilter("src",o=>T(o,s))},cL=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(s,o,r)=>{const i=G.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;for(let f=0,d=s.length;f<d;f++){let p=s[f],C=p.parent;if(i[p.parent.name]&&p===C.lastChild){let y=p.prev;for(;y;){const w=y.name;if(w!=="span"||y.attr("data-mce-type")!=="bookmark"){w==="br"&&(p=null);break}y=y.prev}if(p&&(p.remove(),Da(n,a,c,C))){const w=n.getElementRule(C.name);w&&(w.removeEmpty?C.remove():w.paddEmpty&&Kd(t,r,i,C))}}else{let y=p;for(;C&&C.firstChild===y&&C.lastChild===y&&(y=C,!i[C.name]);)C=C.parent;if(y===C){const w=new mn("#text",3);w.value=Xt,p.replace(w)}}}}),e.addAttributeFilter("href",s=>{let o=s.length;const r=a=>a.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=a=>{const c=a?G.trim(a):"";return/\b(noopener)\b/g.test(c)?c:r(c)};if(!t.allow_unsafe_link_target)for(;o--;){const a=s[o];a.name==="a"&&a.attr("target")==="_blank"&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let o=s.length,r,i,a,c;for(;o--;)if(c=s[o],c.name==="a"&&c.firstChild&&!c.attr("href")){a=c.parent,r=c.lastChild;do i=r.prev,a.insert(r,c),r=i;while(r)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let o=s.length,r,i;for(;o--;)if(r=s[o],i=r.parent,i.name==="ul"||i.name==="ol")if(r.prev&&r.prev.name==="li")r.prev.append(r);else{const a=new mn("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",s=>{const o=n.getValidClasses();let r=s.length;for(;r--;){const i=s[r],a=i.attr("class").split(" ");let c="";for(let f=0;f<a.length;f++){const d=a[f];let p=!1,C=o["*"];C&&C[d]&&(p=!0),C=o[i.name],!p&&C&&C[d]&&(p=!0),p&&(c&&(c+=" "),c+=d)}c.length||(c=null),i.attr("class",c)}}),lL(e,t)},LE=G.each,uL=G.trim,fL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),dL={ftp:21,http:80,https:443,mailto:25},mL=["img","video"],pL=(e,t)=>ke(e)?!e:ke(t)?!R(mL,t):!0,gL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},ME=(e,t,n)=>{const s=gL(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?pL(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class cs{constructor(t,n){t=uL(t),this.settings=n||{};const s=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=this.settings.base_uri?this.settings.base_uri.path:new cs(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2]}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);LE(fL,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=So.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!ME(s,o,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href:n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(t){let n;if(t==="./")return t;const s=new cs(t,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const o=this.getURI(),r=s.getURI();return o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r?o:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(t,n){const s=new cs(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=dL[this.protocol];if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s,o=0,r=[],i;const a=/\/$/.test(n)?"/":"";let c=t.split("/");const f=n.split("/");for(LE(c,d=>{d&&r.push(d)}),c=r,s=f.length-1,r=[];s>=0;s--)if(!(f[s].length===0||f[s]===".")){if(f[s]===".."){o++;continue}if(o>0){o--;continue}r.push(f[s])}return s=c.length-o,s<=0?i=it(r).join("/"):i=c.slice(0,s).join("/")+"/"+it(r).join("/"),i.indexOf("/")!==0&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const UE=G.makeMap,zE=G.extend,hL={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},bL=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Em="data-mce-type",CL=(e,t)=>{const n={...hL};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},yL=(e,t)=>{const n=KF(),s=t.getSpecialElements(),o=e.validate;let r=0;return n.addHook("uponSanitizeElement",(i,a)=>{var c,f;i.nodeType===uh&&!e.allow_conditional_comments&&/^\[if/i.test(i.nodeValue)&&(i.nodeValue=" "+i.nodeValue);const d=a.tagName;if(i.nodeType!==Ki||d==="body")return;const p=_.fromDom(i),C=d.toLowerCase(),y=Gi(p,Em),w=In(p,"data-mce-bogus");if(!y&&me(w)){w==="all"?_t(p):Jo(p);return}const v=t.getElementRule(C);if(o&&!v){Ie(s,C)?_t(p):Jo(p);return}else a.allowedTags[d]=!0;if(o&&!y){if(T((c=v.attributesForced)!==null&&c!==void 0?c:[],x=>{Wt(p,x.name,x.value==="{$uid}"?`mce_${r++}`:x.value)}),T((f=v.attributesDefault)!==null&&f!==void 0?f:[],x=>{Gi(p,x.name)||Wt(p,x.name,x.value==="{$uid}"?`mce_${r++}`:x.value)}),v.attributesRequired&&!M(v.attributesRequired,x=>Gi(p,x))){Jo(p);return}if(v.removeEmptyAttrs&&kN(p)){Jo(p);return}v.outputName&&v.outputName!==C&&jT(p,v.outputName)}}),n.addHook("uponSanitizeAttribute",(i,a)=>{const c=i.tagName.toLowerCase(),{attrName:f,attrValue:d}=a;a.keepAttr=!o||t.isValid(c,f)||Kt(f,"data-")||Kt(f,"aria-"),f in bL&&ME(e,d,c)&&(a.keepAttr=!1),a.keepAttr?(a.allowedAttributes[f]=!0,f in t.getBoolAttrs()&&(a.attrValue=f),e.allow_svg_data_urls&&Kt(d,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):i.hasAttribute(Em)&&(f==="id"||f==="class"||f==="style")&&(a.forceKeepAttr=!0)}),n},HE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],f=new mn(c.nodeName.toLowerCase(),c.nodeType);if(we(c)){const d=c.attributes;for(let p=0,C=d.length;p<C;p++){const y=d[p];f.attr(y.name,y.value)}}else te(c)?(f.value=c.data,o&&(f.raw=!0)):(lf(c)||cA(c)||uA(c))&&(f.value=c.data);HE(f,c,n),e.append(f)}},vL=(e,t,n)=>{const s=[];for(let o=e,r=o;ke(o);r=o,o=o.walk())T(t,i=>i(o)),It(o.parent)&&o!==e?o=r:s.push(o);for(let o=s.length-1;o>=0;o--){const r=s[o];T(n,i=>i(r))}},EL=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=zE(UE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=Cb(t),f=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,C=S=>{for(S=S.parent;ke(S);){if(S.name in i)return!0;S=S.parent}return!1},y=S=>{let P=S;for(;ke(P);){if(P.name in c)return Da(t,r,i,P);P=P.parent}return!1},w=(S,P)=>{const O=P?S.prev:S.next;return ke(O)?!1:S.parent.name in a&&(S.parent!==e||s.isRootContent)};return[S=>{if(S.type===3&&!C(S)){let P=S.value;P=P.replace(f," "),(KI(S.prev,a)||w(S,!0))&&(P=P.replace(d,"")),P.length===0?S.remove():S.value=P}},S=>{var P;if(S.type===1){const O=t.getElementRule(S.name);if(o&&O){const $=Da(t,r,i,S);O.paddInEmptyBlock&&$&&y(S)?Kd(n,s,a,S):O.removeEmpty&&$?a[S.name]?S.remove():S.unwrap():O.paddEmpty&&($||jI(S))&&Kd(n,s,a,S)}}else if(S.type===3&&!C(S)){let O=S.value;(a[(P=S.next)===null||P===void 0?void 0:P.name]||w(S,!1))&&(O=O.replace(p,"")),O.length===0?S.remove():S.value=O}}]},wL=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Ci=(e={},t=ko())=>{const n=OE(),s=OE(),o={validate:!0,root_name:"body",...e},r=new DOMParser,i=yL(o,t),a=(P,O,$="html")=>{const U=$==="xhtml"?"application/xhtml+xml":"text/html",ie=Ie(t.getSpecialElements(),O.toLowerCase()),V=ie?`<${O}>${P}</${O}>`:P,j=$==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${V}</body></html>`:`<body>${V}</body>`,X=r.parseFromString(j,U).body;return i.sanitize(X,CL(o,U)),i.removed=[],ie?X.firstChild:X},c=n.addFilter,f=n.getFilters,d=n.removeFilter,p=s.addFilter,C=s.getFilters,y=s.removeFilter,w=(P,O)=>{const $=P.parent;$&&t.children[P.name]&&!t.isValidChild($.name,P.name)&&O.push(P)},v=(P,O)=>{const $=zE(UE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),U=/^[ \t\r\n]+/,ie=/[ \t\r\n]+$/;let V=P.firstChild,j=null;const X=J=>{J&&(V=J.firstChild,V&&V.type===3&&(V.value=V.value.replace(U,"")),V=J.lastChild,V&&V.type===3&&(V.value=V.value.replace(ie,"")))};if(!!t.isValidChild(P.name,O.toLowerCase())){for(;V;){const J=V.next;V.type===3||V.type===1&&V.name!=="p"&&!$[V.name]&&!V.attr(Em)?(j||(j=new mn(O,1),j.attr(o.forced_root_block_attrs),P.insert(j,V)),j.append(V)):(X(j),j=null),V=J}X(j)}},S={schema:t,addAttributeFilter:p,getAttributeFilters:C,removeAttributeFilter:y,addNodeFilter:c,getNodeFilters:f,removeNodeFilter:d,parse:(P,O={})=>{var $;const U=o.validate,ie=($=O.context)!==null&&$!==void 0?$:o.root_name,V=a(P,ie,O.format),j=new mn(ie,11);HE(j,V,t.getSpecialElements());const[X,J]=EL(j,t,o,O),ve=[],ue=U?Je=>w(Je,ve):Oe,se={nodes:{},attributes:{}},ze=Je=>jv(f(),C(),Je,se);if(vL(j,[X,ze],[J,ue]),ve.reverse(),U&&ve.length>0)if(O.context){const{pass:Je,fail:Rt}=be(ve,Y=>Y.parent===j);Yd(Rt,t,ze),O.invalid=Je.length>0}else Yd(ve,t,ze);const je=wL(o,O);return je&&(j.name==="body"||O.isRootContent)&&v(j,je),O.invalid||qv(se,O),j}};return cL(S,o),ZF(S,o,t),S},xL=e=>pc(e)?Po({validate:!1}).serialize(e):e,VE=(e,t)=>{const n=xL(e),s=t(n);if(s.isDefaultPrevented())return s;if(pc(e))if(s.content!==n){const o=Ci({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return{...s,content:o}}else return{...s,content:e};else return s},WE=(e,t)=>{if(t.no_events)return fn.value(t);{const n=mO(e,t);return n.isDefaultPrevented()?fn.error(Ey(e,{content:"",...n}).content):fn.value(n)}},jE=(e,t,n)=>n.no_events?t:VE(t,o=>Ey(e,{...n,content:o})).content,wm=(e,t)=>{if(t.no_events)return fn.value(t);{const n=VE(t.content,s=>dO(e,{...t,content:s}));return n.isDefaultPrevented()?(vy(e,n),fn.error(void 0)):fn.value(n)}},xm=(e,t,n)=>{n.no_events||vy(e,{...n,content:t})},Sm=(e,t,n)=>({element:e,width:t,rows:n}),qE=(e,t)=>({element:e,cells:t}),SL=(e,t)=>({x:e,y:t}),KE=(e,t)=>{const n=parseInt(In(e,t),10);return isNaN(n)?1:n},_L=(e,t,n,s,o)=>{const r=KE(o,"rowspan"),i=KE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=qE(Pb(s),[]));for(let f=t;f<t+i;f++){const d=a[c].cells;d[f]=c===n&&f===t?o:si(o)}}},kL=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},NL=(e,t,n)=>{for(;kL(e,t,n);)t++;return t},GE=e=>Q(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),YE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(st(o[r],t))return h.some(SL(r,s))}return h.none()},XE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(qE(i[a].element,f))}return r},AL=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?XE(e,s,o,r,i):XE(e,s,i,r,o);return Sm(e.element,GE(a),a)},TL=(e,t)=>{const n=si(e.element),s=_.fromTag("tbody");return Zo(s,t),Lt(n,s),n},RL=e=>z(e.rows,t=>{const n=z(t.cells,o=>{const r=Pb(o);return Gt(r,"colspan"),Gt(r,"rowspan"),r}),s=si(t.element);return Zo(s,n),s}),PL=e=>{const t=Sm(si(e),0,[]);return T(En(e,"tr"),(n,s)=>{T(En(n,"td,th"),(o,r)=>{_L(t,NL(t,r,s),s,n,o)})}),Sm(t.element,GE(t.rows),t.rows)},OL=e=>TL(e,RL(e)),DL=(e,t,n)=>YE(e,t).bind(s=>YE(e,n).map(o=>AL(e,s,o))),BL=e=>ge(e,t=>yt(t)==="ul"||yt(t)==="ol"),IL=(e,t)=>ge(e,n=>yt(n)==="li"&&rd(n,t)).fold(K([]),n=>BL(e).map(s=>{const o=_.fromTag(yt(s)),r=Wi($h(s),(i,a)=>Kt(a,"list-style"));return bl(o,r),[_.fromTag("li"),o]}).getOr([])),$L=(e,t)=>{const n=Q(t,(s,o)=>(Lt(o,s),o),e);return t.length>0?md([n]):n},FL=e=>sa(e)?Xn(e).filter(df).fold(K([]),t=>[e,t]):df(e)?[e]:[],LL=(e,t)=>{const n=_.fromDom(t.commonAncestorContainer),s=oo(n,e),o=H(s,RA),r=IL(s,t),i=o.concat(r.length?r:FL(n));return z(i,si)},QE=()=>md([]),ML=(e,t)=>$L(_.fromDom(t.cloneContents()),LL(e,t)),UL=(e,t)=>ta(t,"table",re(st,e)),zL=(e,t)=>UL(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=PL(n);return DL(r,s,o).map(i=>md([OL(i)]))}).getOrThunk(QE),HL=(e,t)=>t.length>0&&t[0].collapsed?QE():ML(e,t[0]),VL=(e,t)=>{const n=dy(t,e);return n.length>0?zL(e,n):HL(e,t)},Sc=(e,t)=>t>=0&&t<e.length&&xa(e.charAt(t)),ZE=e=>xo(e.innerText),WL=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),jL=e=>h.from(e.selection.getRng()).map(t=>{const n=h.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),o=WL(n),r=e.dom.add(s,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=ZE(r),a=xo(r.textContent);if(e.dom.remove(r),Sc(a,0)||Sc(a,a.length-1)){const c=n.getOr(s),f=ZE(c),d=f.indexOf(i);if(d===-1)return i;{const p=Sc(f,d-1),C=Sc(f,d+i.length);return(p?" ":"")+i+(C?" ":"")}}else return i}).getOr(""),qL=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=_d(e,sd(o)),i=t.contextual?VL(_.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},KL=(e,t)=>{if(t.format==="text")return jL(e);{const n=qL(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},GL=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),YL=(e,t,n={})=>{const s=GL(n,t);return WE(e,s).fold(wt,o=>{const r=KL(e,o);return jE(e,r,o)})},_m=0,JE=1,e0=2,XL=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,C)=>({start:d,end:p,diag:C}),i=(d,p,C,y,w)=>{const v=c(d,p,C,y);if(v===null||v.start===p&&v.diag===p-y||v.end===d&&v.diag===d-C){let x=d,S=C;for(;x<p||S<y;)x<p&&S<y&&e[x]===t[S]?(w.push([_m,e[x]]),++x,++S):p-d>y-C?(w.push([e0,e[x]]),++x):(w.push([JE,t[S]]),++S)}else{i(d,v.start,C,v.start-v.diag,w);for(let x=v.start;x<v.end;++x)w.push([_m,e[x]]);i(v.end,p,v.end-v.diag,y,w)}},a=(d,p,C,y)=>{let w=d;for(;w-p<y&&w<C&&e[w]===t[w-p];)++w;return r(d,w,p)},c=(d,p,C,y)=>{const w=p-d,v=y-C;if(w===0||v===0)return null;const x=w-v,S=v+w,P=(S%2===0?S:S+1)/2;s[1+P]=d,o[1+P]=p+1;let O,$,U,ie,V;for(O=0;O<=P;++O){for($=-O;$<=O;$+=2){for(U=$+P,$===-O||$!==O&&s[U-1]<s[U+1]?s[U]=s[U+1]:s[U]=s[U-1]+1,ie=s[U],V=ie-d+C-$;ie<p&&V<y&&e[ie]===t[V];)s[U]=++ie,++V;if(x%2!==0&&x-O<=$&&$<=x+O&&o[U-x]<=s[U])return a(o[U-x],$+d-C,p,y)}for($=x-O;$<=x+O;$+=2){for(U=$+P-x,$===x-O||$!==x+O&&o[U+1]<=o[U-1]?o[U]=o[U+1]-1:o[U]=o[U-1],ie=o[U]-1,V=ie-d+C-$;ie>=d&&V>=C&&e[ie]===t[V];)o[U]=ie--,V--;if(x%2===0&&-O<=$&&$<=O&&o[U]<=s[U+x])return a(o[U],$+d-C,p,y)}}},f=[];return i(0,e.length,0,t.length,f),f},t0=e=>we(e)?e.outerHTML:te(e)?So.encodeRaw(e.data,!1):lf(e)?"<!--"+e.data+"-->":"",QL=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},ZL=(e,t,n)=>{const s=QL(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];o.parentNode.insertBefore(s,o)}else e.appendChild(s)},JL=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}},eM=(e,t)=>{let n=0;T(e,s=>{s[0]===_m?n++:s[0]===JE?(ZL(t,s[1],n),n++):s[0]===e0&&JL(t,n)})},tM=e=>H(z(ht(e.childNodes),t0),t=>t.length>0),nM=(e,t)=>{const n=z(ht(t.childNodes),t0);return eM(XL(n,e),t),t},sM=Ko(()=>document.implementation.createHTMLDocument("undo")),oM=e=>e.indexOf("</iframe>")!==-1,rM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),iM=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),_c=e=>{const t=tM(e.getBody()),n=We(t,o=>{const r=ov(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return oM(s)?rM(n):iM(s)},km=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?nM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ke(s)&&KC(s)?!s.isFakeCaret:!0}),e.selection.moveToBookmark(s)},Nm=e=>e.type==="fragmented"?e.fragments.join(""):e.content,n0=e=>{const t=_.fromTag("body",sM());return sf(t,Nm(e)),T(En(t,"*[data-mce-bogus]"),Jo),Mh(t)},aM=(e,t)=>Nm(e)===Nm(t),lM=(e,t)=>n0(e)===n0(t),Am=(e,t)=>!e||!t?!1:aM(e,t)?!0:lM(e,t),Tm=e=>e.get()===0,kc=(e,t,n)=>{Tm(n)&&(e.typing=t)},s0=(e,t)=>{e.typing&&(kc(e,!1,t),e.add())},cM=e=>{e.typing&&(e.typing=!1,e.add())},uM=(e,t,n)=>{Tm(t)&&n.set(nC(e.selection))},fM=(e,t,n,s,o,r,i)=>{const a=_c(e);if(r=r||{},r=G.extend(r,a),Tm(s)===!1||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:r,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&Am(c,r))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const f=pR(e);if(f&&t.data.length>f){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}r.bookmark=nC(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(r),n.set(t.data.length-1);const d={level:r,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),r},dM=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},mM=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];km(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},pM=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],km(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},gM=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,kc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],km(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},hM=e=>{e.clear(),e.add()},bM=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Am(_c(e),t.data[0]),CM=(e,t)=>t.get()<e.data.length-1&&!e.typing,yM=(e,t,n)=>(s0(e,t),e.beforeChange(),e.ignore(n),e.add()),vM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},EM=(e,t)=>{const n=e.dom,s=ke(t)?t:e.getBody();At(e.hasVisual)&&(e.hasVisual=yR(e)),T(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=vR(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=yC(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},o0=e=>({init:{bindEvents:Oe},undoManager:{beforeChange:(t,n)=>uM(e,t,n),add:(t,n,s,o,r,i)=>fM(e,t,n,s,o,r,i),undo:(t,n,s)=>gM(e,t,n,s),redo:(t,n)=>pM(e,t,n),clear:(t,n)=>dM(e,t,n),reset:t=>hM(t),hasUndo:(t,n)=>bM(e,t,n),hasRedo:(t,n)=>CM(t,n),transact:(t,n,s)=>yM(t,n,s),ignore:(t,n)=>vM(t,n),extra:(t,n,s,o)=>mM(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>sm(e,t,n,s,o),matchAll:(t,n)=>B$(e,t,n),matchNode:(t,n,s,o)=>$s(e,t,n,s,o),canApply:t=>$$(e,t),closest:t=>I$(e,t),apply:(t,n,s)=>CE(e,t,n,s),remove:(t,n,s,o)=>hE(e,t,n,s,o),toggle:(t,n,s)=>CF(e,t,n,s),formatChanged:(t,n,s,o,r)=>bF(e,t,n,s,o,r)},editor:{getContent:t=>mB(e,t),setContent:(t,n)=>P$(e,t,n),insertContent:(t,n)=>N$(e,t,n),addVisual:t=>EM(e,t)},selection:{getContent:(t,n)=>YL(e,t,n)},autocompleter:{addDecoration:t=>nB(e,t),removeDecoration:()=>oB(e,_.fromDom(e.getBody()))},raw:{getModel:()=>h.none()}}),wM=e=>{const t=f=>ft(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,d,p)=>s.transact(p),ignore:(f,d)=>s.ignore(d),extra:(f,d,p,C)=>s.extra(p,C)},formatter:{match:(f,d,p,C)=>o.match(f,t(d),C),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,d,p)=>o.apply(f,t(d)),remove:(f,d,p,C)=>o.remove(f,t(d)),toggle:(f,d,p)=>o.toggle(f,t(d)),formatChanged:(f,d,p,C,y)=>o.formatChanged(d,p,C,y)},editor:{getContent:f=>r.getContent(f),setContent:(f,d)=>({content:r.setContent(f,d),html:""}),insertContent:(f,d)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>h.some(c.getRawModel())}}},xM=()=>{const e=K(null),t=K("");return{init:{bindEvents:Oe},undoManager:{beforeChange:Oe,add:e,undo:e,redo:e,clear:Oe,reset:Oe,hasUndo:pt,hasRedo:pt,transact:e,ignore:Oe,extra:Oe},formatter:{match:pt,matchAll:K([]),matchNode:K(void 0),canApply:pt,closest:t,apply:Oe,remove:Oe,toggle:Oe,formatChanged:K({unbind:Oe})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Oe},selection:{getContent:t},autocompleter:{addDecoration:Oe,removeDecoration:Oe},raw:{getModel:K(h.none())}}},ro=e=>Ie(e.plugins,"rtc"),SM=e=>ut(e.plugins,"rtc").bind(t=>h.from(t.setup)),_M=e=>{const t=e;return SM(e).fold(()=>(t.rtcInstance=o0(e),h.none()),n=>(t.rtcInstance=xM(),h.some(()=>n().then(s=>(t.rtcInstance=wM(s),s.rtc.isRemote)))))},Rm=e=>e.rtcInstance?e.rtcInstance:o0(e),kt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},kM=(e,t,n)=>{kt(e).undoManager.beforeChange(t,n)},NM=(e,t,n,s,o,r,i)=>kt(e).undoManager.add(t,n,s,o,r,i),AM=(e,t,n,s)=>kt(e).undoManager.undo(t,n,s),TM=(e,t,n)=>kt(e).undoManager.redo(t,n),RM=(e,t,n)=>{kt(e).undoManager.clear(t,n)},PM=(e,t)=>{kt(e).undoManager.reset(t)},OM=(e,t,n)=>kt(e).undoManager.hasUndo(t,n),DM=(e,t,n)=>kt(e).undoManager.hasRedo(t,n),BM=(e,t,n,s)=>kt(e).undoManager.transact(t,n,s),IM=(e,t,n)=>{kt(e).undoManager.ignore(t,n)},$M=(e,t,n,s,o)=>{kt(e).undoManager.extra(t,n,s,o)},FM=(e,t,n,s,o)=>kt(e).formatter.match(t,n,s,o),LM=(e,t,n)=>kt(e).formatter.matchAll(t,n),MM=(e,t,n,s,o)=>kt(e).formatter.matchNode(t,n,s,o),UM=(e,t)=>kt(e).formatter.canApply(t),zM=(e,t)=>kt(e).formatter.closest(t),HM=(e,t,n,s)=>{kt(e).formatter.apply(t,n,s)},VM=(e,t,n,s,o)=>{kt(e).formatter.remove(t,n,s,o)},WM=(e,t,n,s)=>{kt(e).formatter.toggle(t,n,s)},jM=(e,t,n,s,o,r)=>kt(e).formatter.formatChanged(t,n,s,o,r),qM=(e,t)=>Rm(e).editor.getContent(t),KM=(e,t,n)=>Rm(e).editor.setContent(t,n),GM=(e,t,n)=>Rm(e).editor.insertContent(t,n),YM=(e,t,n)=>kt(e).selection.getContent(t,n),XM=(e,t)=>kt(e).editor.addVisual(t),r0=e=>kt(e).init.bindEvents(),QM=(e,t)=>kt(e).autocompleter.addDecoration(t),ZM=e=>kt(e).autocompleter.removeDecoration(),JM=(e,t={})=>{const n=t.format?t.format:"html";return YM(e,n,t)},i0=e=>e.dom.length===0?(_t(e),h.none()):h.some(e),eU=(e,t)=>e.filter(n=>ka.isBookmarkNode(n.dom)).bind(t?Ji:Xo),tU=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(Id(o,r,!1,!s),n.setStart(r,i)):(Id(r,o,!1,!s),n.setEnd(r,i))},nU=(e,t)=>{Xn(e).each(n=>{const s=e.dom;t&&lc(n,F(s,0))?uc(s,0):!t&&cc(n,F(s,s.length))&&Bd(s,s.length)})},a0=(e,t,n,s)=>{e.bind(o=>((s?Bd:uc)(o.dom,s?o.dom.length:0),t.filter(Bn).map(i=>tU(o,i,n,s)))).orThunk(()=>eU(t,s).or(t).filter(Bn).map(r=>nU(r,s)))},sU=(e,t)=>{const n=h.from(t.firstChild).map(_.fromDom),s=h.from(t.lastChild).map(_.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Xo).filter(Bn).bind(i0),r=s.bind(Ji).filter(Bn).bind(i0);a0(o,n,e,!0),a0(r,s,e,!1),e.collapse(!1)},oU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),rU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Po({validate:!1},e.schema).serialize(r)}else return t.content},iU=(e,t,n={})=>{const s=oU(n,t);wm(e,s).each(o=>{const r=rU(e,o),i=e.selection.getRng();sU(i,i.createContextualFragment(r)),e.selection.setRng(i),Aa(e,i),xm(e,r,o)})},l0=(e,t,n)=>{if(e&&Ie(e,t)){const s=H(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var aU=(e,t)=>{let n,s;const o=(i,a)=>ge(a,c=>e.is(c,i)),r=i=>e.getParents(i,null,e.getRoot());return{selectorChangedWithUnbind:(i,a)=>(n||(n={},s={},t.on("NodeChange",c=>{const f=c.element,d=r(f),p={};G.each(n,(C,y)=>{o(y,d).each(w=>{s[y]||(T(C,v=>{v(!0,{node:w,selector:y,parents:d})}),s[y]=C),p[y]=C})}),G.each(s,(C,y)=>{p[y]||(delete s[y],G.each(C,w=>{w(!1,{node:f,selector:y,parents:d})}))})})),n[i]||(n[i]=[]),n[i].push(a),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{l0(n,i,a),l0(s,i,a)}})}};const c0=e=>!!(e&&e.ownerDocument)&&eo(_.fromDom(e.ownerDocument),_.fromDom(e)),lU=e=>e?c0(e.startContainer)&&c0(e.endContainer):!1,u0=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=aU(e,s),a=(Y,he)=>{const $e=e.createRng();ke(Y)&&ke(he)?($e.setStart(Y,he),$e.setEnd(Y,he),O($e),x(!1)):(id(e,$e,s.getBody(),!0),O($e))},c=Y=>JM(s,Y),f=(Y,he)=>iU(s,Y,he),d=Y=>Xy(s.getBody(),P(),Y),p=Y=>Qy(s.getBody(),P(),Y),C=(Y,he)=>Je.getBookmark(Y,he),y=Y=>Je.moveToBookmark(Y),w=(Y,he)=>(YD(e,Y,he).each(O),Y),v=()=>{const Y=P(),he=S();return!Y||Y.item?!1:Y.compareEndPoints?Y.compareEndPoints("StartToEnd",Y)===0:!he||Y.collapsed},x=Y=>{const he=P();he.collapse(!!Y),O(he)},S=()=>t.getSelection?t.getSelection():t.document.selection,P=()=>{let Y,he,$e;const De=(ne,Ee,fe)=>{try{return Ee.compareBoundaryPoints(ne,fe)}catch{return-1}},Bt=t.document;if(s.bookmark!==void 0&&gr(s)===!1){const ne=Ed(s);if(ne.isSome())return ne.map(Ee=>_d(s,[Ee])[0]).getOr(Bt.createRange())}try{(Y=S())&&!vl(Y.anchorNode)&&(Y.rangeCount>0?he=Y.getRangeAt(0):he=Y.createRange?Y.createRange():Bt.createRange(),he=_d(s,[he])[0])}catch{}return he||(he=Bt.createRange()),he.setStart&&he.startContainer.nodeType===9&&he.collapsed&&($e=e.getRoot(),he.setStart($e,0),he.setEnd($e,0)),o&&r&&(De(he.START_TO_START,he,o)===0&&De(he.END_TO_END,he,o)===0?he=r:(o=null,r=null)),he},O=(Y,he)=>{let $e;if(!lU(Y))return;const De=S();if(Y=s.dispatch("SetSelectionRange",{range:Y,forward:he}).range,De){r=Y;try{De.removeAllRanges(),De.addRange(Y)}catch{}he===!1&&De.extend&&(De.collapse(Y.endContainer,Y.endOffset),De.extend(Y.startContainer,Y.startOffset)),o=De.rangeCount>0?De.getRangeAt(0):null}!Y.collapsed&&Y.startContainer===Y.endContainer&&De.setBaseAndExtent&&Y.endOffset-Y.startOffset<2&&Y.startContainer.hasChildNodes()&&($e=Y.startContainer.childNodes[Y.startOffset],$e&&$e.tagName==="IMG"&&(De.setBaseAndExtent(Y.startContainer,Y.startOffset,Y.endContainer,Y.endOffset),(De.anchorNode!==Y.startContainer||De.focusNode!==Y.endContainer)&&De.setBaseAndExtent($e,0,$e,1))),s.dispatch("AfterSetSelectionRange",{range:Y,forward:he})},$=Y=>(f(e.getOuterHTML(Y)),Y),U=()=>KD(s.getBody(),P()),ie=(Y,he)=>GD(e,P(),Y,he),V=()=>{const Y=S(),he=Y==null?void 0:Y.anchorNode,$e=Y==null?void 0:Y.focusNode;if(!Y||!he||!$e||vl(he)||vl($e))return!0;const De=e.createRng(),Bt=e.createRng();try{De.setStart(he,Y.anchorOffset),De.collapse(!0),Bt.setStart($e,Y.focusOffset),Bt.collapse(!0)}catch{return!0}return De.compareBoundaryPoints(De.START_TO_START,Bt)<=0},je={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:s,collapse:x,setCursorLocation:a,getContent:c,setContent:f,getBookmark:C,moveToBookmark:y,select:w,isCollapsed:v,isForward:V,setNode:$,getNode:U,getSel:S,setRng:O,getRng:P,getStart:d,getEnd:p,getSelectedBlocks:ie,normalize:()=>{const Y=P(),he=S();if(!VP(he)&&Zl(s)){const $e=nc(e,Y);return $e.each(De=>{O(De,V())}),$e.getOr(Y)}return Y},selectorChanged:(Y,he)=>(i(Y,he),je),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Y,he=e.getRoot();for(;he&&he.nodeName!=="BODY";){if(he.scrollHeight>he.clientHeight){Y=he;break}he=he.parentNode}return Y},scrollIntoView:(Y,he)=>{ke(Y)?pD(s,Y,he):Aa(s,P(),he)},placeCaretAt:(Y,he)=>O(Ty(Y,he,s.getDoc())),getBoundingClientRect:()=>{const Y=P();return Y.collapsed?F.fromRangeStart(Y).getClientRects()[0]:Y.getBoundingClientRect()},destroy:()=>{t=o=r=null,Rt.destroy()}},Je=ka(je),Rt=Sy(je,s);return je.bookmarkManager=Je,je.controlSelection=Rt,je},cU=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let d=f.attr(r);d!==void 0?(f.attr(o,d.length>0?d:null),f.attr(r,null)):(d=f.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),f.name):i&&(d=i.call(a,d,o,f.name)),f.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(h.from(a.firstChild).exists(f=>!_l(f.value))?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{let o=s.length;for(;o--;){const r=s[o].firstChild;r&&(r.value=So.decode(r.value))}}),e.addNodeFilter("script,style",(s,o)=>{const r=a=>a.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const a=s[i],c=a.firstChild?a.firstChild.value:"";if(o==="script"){const f=a.attr("type");f&&a.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`// <![CDATA[
`+r(c)+`
// ]]>`)}else t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`<!--
`+r(c)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o];t.preserve_cdata&&r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{T(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},uU=e=>{const t=s=>s&&s.name==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},fU=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");G.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return tO(e,{...n,node:r}),s&&(o.doc=s),r},dU=(e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events,mU=(e,t,n)=>dU(e,n)?fU(e,t,n):t,pU=(e,t,n)=>{G.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},gU=(e,t,n)=>!t.no_events&&e?nO(e,{...t,content:n}).content:n,hU=(e,t,n)=>{const s=xo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Sl(_.fromDom(t))?s:G.trim(s)},bU=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return uU(o),o},CU=(e,t,n)=>Po(e,t).serialize(n),yU=(e,t,n,s,o)=>{const r=CU(t,n,s);return gU(e,o,r)},vU=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:at.DOM,o=t&&t.schema?t.schema:ko(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=Ci(e,o);cU(r,e,s);const i=(a,c={})=>{const f={format:"html",...c},d=mU(t,a,f),p=hU(s,d,f),C=bU(r,p,f);return f.format==="tree"?C:yU(t,e,o,C,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(pU,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},f0=(e,t)=>{const n=vU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},EU="html",wU=(e,t)=>({...e,format:t,get:!0,getInner:!0}),xU=(e,t={})=>{const n=t.format?t.format:EU,s=wU(t,n);return WE(e,s).fold(wt,o=>{const r=qM(e,o);return jE(e,r,o)})},SU="html",_U=(e,t)=>({format:SU,...e,set:!0,content:t}),Pm=(e,t,n={})=>{const s=_U(n,t);return wm(e,s).map(o=>{const r=KM(e,o.content,o);return xm(e,r.html,o),r.content}).getOr(t)},kU="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),NU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),AU=e=>{const t=H(kU,s=>Ie(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Kn(t)},TU=e=>{const t=G.makeMap(e.plugins," "),s=H(NU,o=>Ie(t,o));return Kn(s)},RU=(e,t)=>{const n=AU(e),s=TU(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+f+d)}},PU=(e,t)=>{RU(e,t)},Nc=at.DOM,OU=e=>{Nc.setStyle(e.id,"display",e.orgDisplay)},Ac=e=>h.from(e).each(t=>t.destroy()),DU=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},BU=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Nc.unbind(t,"submit reset",e.formEventDelegate))},IU=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Nc.remove(o.nextSibling),sO(e),e.editorManager.remove(e),!e.inline&&s&&OU(e),oO(e),Nc.remove(e.getContainer()),Ac(t),Ac(n),e.destroy()}},$U=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Ac(n),Ac(s)),BU(e),DU(e),e.destroyed=!0}},Tc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Ie(e,o)}})(),yi=nn.ModelManager,d0=(e,t)=>t.dom[e],m0=(e,t)=>parseInt(Ns(t,e),10),FU=re(d0,"clientWidth"),LU=re(d0,"clientHeight"),MU=re(m0,"margin-top"),UU=re(m0,"margin-left"),zU=e=>e.dom.getBoundingClientRect(),HU=(e,t,n)=>{const s=FU(e),o=LU(e);return t>=0&&n>=0&&t<=s&&n<=o},VU=(e,t,n,s)=>{const o=zU(t),r=e?o.left+t.dom.clientLeft+UU(t):0,i=e?o.top+t.dom.clientTop+MU(t):0,a=n-r,c=s-i;return{x:a,y:c}},WU=(e,t,n)=>{const s=_.fromDom(e.getBody()),o=e.inline?s:$N(s),r=VU(e.inline,o,t,n);return HU(o,r.x,r.y)},jU=e=>h.from(e).map(_.fromDom),qU=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return jU(t).map(Wr).getOr(!1)},KU=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}},p0=e=>{const t=[],n=()=>{const C=e.theme;return C&&C.getNotificationManagerImpl?C.getNotificationManagerImpl():KU()},s=()=>h.from(t[0]),o=(C,y)=>C.type===y.type&&C.text===y.text&&!C.progressBar&&!C.timeout&&!y.progressBar&&!y.timeout,r=()=>{T(t,C=>{C.reposition()})},i=C=>{t.push(C)},a=C=>{Ae(t,y=>y===C).each(y=>{t.splice(y,1)})},c=(C,y=!0)=>{if(!(e.removed||!qU(e)))return y&&e.dispatch("BeforeOpenNotification",{notification:C}),ge(t,w=>o(n().getArgs(w),C)).getOrThunk(()=>{e.editorManager.setActive(e);const w=n().open(C,()=>{a(w),r(),s().fold(()=>e.focus(),v=>Hy(_.fromDom(v.getEl())))});return i(w),r(),e.dispatch("OpenNotification",{notification:{...w}}),w})},f=()=>{s().each(C=>{n().close(C),a(C),r()})},d=K(t);return(C=>{C.on("SkinLoaded",()=>{const y=sR(C);y&&c({text:y,type:"warning",timeout:0},!1),r()}),C.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),C.on("remove",()=>{T(t.slice(),y=>{n().close(y)})})})(e),{open:c,close:f,getNotifications:d}},vi=nn.PluginManager,vr=nn.ThemeManager;var GU=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}};const g0=e=>{let t=[];const n=()=>{const v=e.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():GU()},s=(v,x)=>(...S)=>x?x.apply(v,S):void 0,o=v=>{e.dispatch("OpenWindow",{dialog:v})},r=v=>{e.dispatch("CloseWindow",{dialog:v})},i=v=>{t.push(v),o(v)},a=v=>{r(v),t=H(t,x=>x!==v),t.length===0&&e.focus()},c=()=>h.from(t[t.length-1]),f=v=>{e.editorManager.setActive(e),vd(e),e.ui.show();const x=v();return i(x),x},d=(v,x)=>f(()=>n().open(v,x,a)),p=v=>f(()=>n().openUrl(v,a)),C=(v,x,S)=>{const P=n();P.alert(v,s(S||P,x))},y=(v,x,S)=>{const P=n();P.confirm(v,s(S||P,x))},w=()=>{c().each(v=>{n().close(v),a(v)})};return e.on("remove",()=>{T(t,v=>{n().close(v)})}),{open:d,openUrl:p,alert:C,confirm:y,close:w}},h0=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Rc=(e,t)=>{e._skinLoaded?h0(e,t):e.on("SkinLoaded",()=>{h0(e,t)})},YU=(e,t)=>{Rc(e,os.translate(["Failed to upload image: {0}",t]))},$a=(e,t,n)=>{Cy(e,t,{message:n}),console.error(n)},Fa=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,XU=(e,t,n)=>{$a(e,"PluginLoadError",Fa("plugin",t,n))},QU=(e,t,n)=>{$a(e,"IconsLoadError",Fa("icons",t,n))},ZU=(e,t,n)=>{$a(e,"LanguageLoadError",Fa("language",t,n))},JU=(e,t,n)=>{$a(e,"ThemeLoadError",Fa("theme",t,n))},ez=(e,t,n)=>{$a(e,"ModelLoadError",Fa("model",t,n))},tz=(e,t,n)=>{const s=os.translate(["Failed to initialize plugin: {0}",t]);Cy(e,"PluginLoadError",{message:s}),Pc(s,n),Rc(e,s)},Pc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},nz=e=>/^[a-z0-9\-]+$/i.test(e),sz=e=>b0(e,Q1(e)),oz=e=>b0(e,gC(e)),b0=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=e.inline===!0;return z(t,i=>nz(i)&&!r?`${n}/${i}/${o}`:e.documentBaseURI.toAbsolute(i))},rz=e=>{e.contentCSS=e.contentCSS.concat(sz(e),oz(e))},iz=ct,az=(e,t,n)=>nA(e,t,iz,n),lz=e=>e?ht(e.getElementsByTagName("img")):[],cz=(e,t)=>{const n={};return{findAll:(o,r=ct)=>{const i=H(lz(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===Qe.transparentSrc?!1:Kt(f,"blob:")?!e.isUploaded(f)&&r(c):Kt(f,"data:")?r(c):!1}),a=z(i,c=>{const f=c.src;if(Ie(n,f))return n[f].then(d=>me(d)?d:{image:c,blobInfo:d.blobInfo});{const d=rL(t,f).then(p=>(delete n[f],{image:c,blobInfo:p})).catch(p=>(delete n[f],p));return n[f]=d,d}});return Promise.all(a)}}},C0=()=>{let n={};const s=(C,y)=>({status:C,resultUri:y}),o=C=>C in n;return{hasBlobUri:o,getResultUri:C=>{const y=n[C];return y?y.resultUri:null},isPending:C=>o(C)?n[C].status===1:!1,isUploaded:C=>o(C)?n[C].status===2:!1,markPending:C=>{n[C]=s(1,null)},markUploaded:(C,y)=>{n[C]=s(2,y)},removeFailed:C=>{delete n[C]},destroy:()=>{n={}}}};let uz=0;const fz=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},dz=e=>e+uz+++fz(),mz=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,C,y,w,v)=>{if(me(p))return s({id:p,name:w,filename:v,blob:C,base64:y});if(ft(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const C=p.id||dz("blobid"),y=p.name||C,w=p.blob;return{id:K(C),name:K(y),filename:K(p.filename||y+"."+t(w.type)),blob:K(w),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(w)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>ge(e,p).getOrUndefined(),i=p=>r(C=>C.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(C=>C.blobUri()===p),getByData:(p,C)=>r(y=>y.base64()===p&&y.blob().type===C),findFirst:r,removeByUri:p=>{e=H(e,C=>C.blobUri()===p?(URL.revokeObjectURL(C.blobUri()),!1):!0)},destroy:()=>{T(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},pz=(e,t)=>{const n={},s=(w,v)=>w?w.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v,o=(w,v)=>new Promise((x,S)=>{const P=new XMLHttpRequest;P.open("POST",t.url),P.withCredentials=t.credentials,P.upload.onprogress=$=>{v($.loaded/$.total*100)},P.onerror=()=>{S("Image upload failed due to a XHR Transport error. Code: "+P.status)},P.onload=()=>{if(P.status<200||P.status>=300){S("HTTP Error: "+P.status);return}const $=JSON.parse(P.responseText);if(!$||!me($.location)){S("Invalid JSON: "+P.responseText);return}x(s(t.basePath,$.location))};const O=new FormData;O.append("file",w.blob(),w.filename()),P.send(O)}),r=()=>new Promise(w=>{w([])}),i=(w,v)=>({url:v,blobInfo:w,status:!0}),a=(w,v)=>({url:"",blobInfo:w,status:!1,error:v}),c=(w,v)=>{G.each(n[w],x=>{x(v)}),delete n[w]},f=(w,v,x)=>(e.markPending(w.blobUri()),new Promise(S=>{let P,O;try{const $=()=>{P&&(P.close(),O=Oe)},U=V=>{$(),e.markUploaded(w.blobUri(),V),c(w.blobUri(),i(w,V)),S(i(w,V))},ie=V=>{$(),e.removeFailed(w.blobUri()),c(w.blobUri(),a(w,V)),S(a(w,V))};O=V=>{V<0||V>100||h.from(P).orThunk(()=>h.from(x).map(Ir)).each(j=>{P=j,j.progressBar.value(V)})},v(w,O).then(U,V=>{ie(me(V)?{message:V}:V)})}catch($){S(a(w,$))}})),d=w=>w===o,p=w=>{const v=w.blobUri();return new Promise(x=>{n[v]=n[v]||[],n[v].push(x)})},C=(w,v)=>(w=G.grep(w,x=>!e.isUploaded(x.blobUri())),Promise.all(G.map(w,x=>e.isPending(x.blobUri())?p(x):f(x,t.handler,v)))),y=(w,v)=>!t.url&&d(t.handler)?r():C(w,v);return Ge(t.handler)===!1&&(t.handler=o),{upload:y}},y0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),v0=(e,t)=>pz(t,{url:W1(e),basePath:j1(e),credentials:q1(e),handler:K1(e)}),gz=e=>{const t=C0(),n=v0(e,t);return{upload:(s,o=!0)=>n.upload(s,o?y0(e):void 0)}},hz=e=>{const t=mz();let n,s;const o=C0(),r=[],i=O=>$=>e.selection?O($):[],a=O=>O+(O.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(O,$,U)=>{let ie=0;do ie=O.indexOf($,ie),ie!==-1&&(O=O.substring(0,ie)+U+O.substr(ie+$.length),ie+=U.length-$.length+1);while(ie!==-1);return O},f=(O,$,U)=>{const ie=`src="${U}"${U===Qe.transparentSrc?' data-mce-placeholder="1"':""}`;return O=c(O,`src="${$}"`,ie),O=c(O,'data-mce-src="'+$+'"','data-mce-src="'+U+'"'),O},d=(O,$)=>{T(e.undoManager.data,U=>{U.type==="fragmented"?U.fragments=z(U.fragments,ie=>f(ie,O,$)):U.content=f(U.content,O,$)})},p=(O,$)=>{const U=e.convertURL($,"src");d(O.src,$),yo(_.fromDom(O),{src:fC(e)?a($):$,"data-mce-src":U})},C=()=>(n||(n=v0(e,o)),x().then(i(O=>{const $=z(O,U=>U.blobInfo);return n.upload($,y0(e)).then(i(U=>{const ie=[];let V=!1;const j=z(U,(X,J)=>{const ve=O[J].blobInfo,ue=O[J].image;let se=!1;return X.status&&H1(e)?(X.url&&!tn(ue.src,X.url)&&(V=!0),t.removeByUri(ue.src),ro(e)||p(ue,X.url)):X.error&&(X.error.remove&&(d(ue.getAttribute("src"),Qe.transparentSrc),ie.push(ue),se=!0),YU(e,X.error.message)),{element:ue,status:X.status,uploadUri:X.url,blobInfo:ve,removed:se}});return ie.length>0&&!ro(e)?e.undoManager.transact(()=>{T(ie,X=>{e.dom.remove(X),t.removeByUri(X.src)})}):V&&e.undoManager.dispatchChange(),j}))}))),y=()=>uC(e)?C():Promise.resolve([]),w=O=>ot(r,$=>$(O)),v=O=>{r.push(O)},x=()=>(s||(s=cz(o,t)),s.findAll(e.getBody(),w).then(i(O=>{const $=H(O,U=>me(U)?(Rc(e,U),!1):!0);return ro(e)||T($,U=>{d(U.image.src,U.blobInfo.blobUri()),U.image.src=U.blobInfo.blobUri(),U.image.removeAttribute("data-mce-src")}),$}))),S=()=>{t.destroy(),o.destroy(),s=n=null},P=O=>O.replace(/src="(blob:[^"]+)"/g,($,U)=>{const ie=o.getResultUri(U);if(ie)return'src="'+ie+'"';let V=t.getByUri(U);if(V||(V=Q(e.editorManager.get(),(j,X)=>j||X.editorUpload&&X.editorUpload.blobCache.getByUri(U),null)),V){const j=V.blob();return'src="data:'+j.type+";base64,"+V.base64()+'"'}return $});return e.on("SetContent",()=>{uC(e)?y():x()}),e.on("RawSaveContent",O=>{O.content=P(O.content)}),e.on("GetContent",O=>{O.source_view||O.format==="raw"||O.format==="tree"||(O.content=P(O.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",O=>{T(O,$=>{const U=$.attr("src");if(t.getByUri(U))return;const ie=o.getResultUri(U);ie&&$.attr("src",ie)})})}),{blobCache:t,addFilter:v,uploadImages:C,uploadImagesAuto:y,scanForImages:x,destroy:S}},bz=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>we(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{G.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},E0={remove_similar:!0,inherit:!1},Ei={selector:"td,th",...E0},Cz={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ei},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ei},tablecellbordercolor:{styles:{borderColor:"%value"},...Ei},tablecellclass:{classes:["%value"],...Ei},tableclass:{selector:"table",classes:["%value"],...E0},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ei},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ei}},yz=K(Cz),vz=e=>{const t={},n=i=>ke(i)?t[i]:t,s=i=>Ie(t,i),o=(i,a)=>{i&&(me(i)?(Nt(a)||(a=[a]),T(a,c=>{At(c.deep)&&(c.deep=!Tn(c)),At(c.split)&&(c.split=!Tn(c)||zt(c)),At(c.remove)&&Tn(c)&&!zt(c)&&(c.remove="none"),Tn(c)&&zt(c)&&(c.mixed=!0,c.block_expand=!0),me(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):bt(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(bz(e)),o(yz()),o(iR(e)),{get:n,has:s,register:o,unregister:r}},Oc=G.each,Sn=at.DOM,w0=(e,t)=>{let n,s,o;const r=t&&t.schema||ko({}),i=(d,p)=>{p.classes.length&&Sn.addClass(d,p.classes.join(" ")),Sn.setAttribs(d,p.attrs)},a=d=>{s=typeof d=="string"?{name:d,classes:[],attrs:{}}:d;const p=Sn.create(s.name);return i(p,s),p},c=(d,p)=>{const C=typeof d!="string"?d.nodeName.toLowerCase():d,y=r.getElementRule(C),w=y&&y.parentsRequired;return w&&w.length?p&&G.inArray(w,p)!==-1?p:w[0]:!1},f=(d,p,C)=>{let y,w;const v=p.length>0&&p[0],x=v&&v.name,S=c(d,x);if(S)x===S?(w=p[0],p=p.slice(1)):w=S;else if(v)w=p[0],p=p.slice(1);else if(!C)return d;return w&&(y=a(w),y.appendChild(d)),C&&(y||(y=Sn.create("div"),y.appendChild(d)),G.each(C,P=>{const O=a(P);y.insertBefore(O,d)})),f(y,p,w&&w.siblings)};return e&&e.length?(s=e[0],n=a(s),o=Sn.create("div"),o.appendChild(f(n,e.slice(1),s.siblings)),o):""},Ez=e=>{let t;const n={classes:[],attrs:{}};return e=n.selector=G.trim(e),e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":G.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},wz=e=>!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=G.map(t.split(/(?:~\+|~|\+)/),Ez),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()),xz=(e,t)=>{let n,s,o="",r,i=aR(e);if(i==="")return"";const a=d=>d.replace(/%(\w+)/g,"");if(typeof t=="string"){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t){const d=ut(t,"preview");if(Hr(d,!1))return"";i=d.getOr(i)}n=t.block||t.inline||"span";const c=wz(t.selector);c.length?(c[0].name||(c[0].name=n),n=t.selector,s=w0(c,e)):s=w0([n],e);const f=Sn.select(n,s)[0]||s.firstChild;return Oc(t.styles,(d,p)=>{const C=a(d);C&&Sn.setStyle(f,p,C)}),Oc(t.attributes,(d,p)=>{const C=a(d);C&&Sn.setAttrib(f,p,C)}),Oc(t.classes,d=>{const p=a(d);Sn.hasClass(f,p)||Sn.addClass(f,p)}),e.dispatch("PreviewFormats"),Sn.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),r=Sn.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Oc(i.split(" "),d=>{let p=Sn.getStyle(f,d,!0);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=Sn.getStyle(e.getBody(),d,!0),Kl(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&Kl(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(r===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*r+"px"}d==="border"&&p&&(o+="padding:0 2px;"),o+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),Sn.remove(s),o},Sz=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},x0=e=>{const t=vz(e),n=Ut(null);return Sz(e),q$(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{HM(e,s,o,r)},remove:(s,o,r,i)=>{VM(e,s,o,r,i)},toggle:(s,o,r)=>{WM(e,s,o,r)},match:(s,o,r,i)=>FM(e,s,o,r,i),closest:s=>zM(e,s),matchAll:(s,o)=>LM(e,s,o),matchNode:(s,o,r,i)=>MM(e,s,o,r,i),canApply:s=>UM(e,s),formatChanged:(s,o,r,i)=>jM(e,n,s,o,r,i),getCssText:re(xz,e)}},S0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},_z=(e,t,n)=>{const s=Ut(!1),o=c=>{kc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;S0(f)||(s0(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;S0(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;c.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&Am(_c(e),t.data[0])===!1&&(e.isDirty()===!1&&e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!d&&(t.beforeChange(),kc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},kz=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},_0=e=>{const t=No(),n=Ut(0),s=Ut(0),o={data:[],typing:!1,beforeChange:()=>{kM(e,n,t)},add:(r,i)=>NM(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0),e.dispatch("change",{level:_c(e),lastLevel:Lr(o.data,s.get()).getOrUndefined()})},undo:()=>AM(e,o,n,s),redo:()=>TM(e,s,o.data),clear:()=>{RM(e,o,s)},reset:()=>{PM(e,o)},hasUndo:()=>OM(e,o,s),hasRedo:()=>DM(e,o,s),transact:r=>BM(e,o,n,r),ignore:r=>{IM(e,n,r)},extra:(r,i)=>{$M(e,o,s,r,i)}};return ro(e)||_z(e,o,n),kz(e),o},Nz=[9,27,pe.HOME,pe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,pe.DOWN,pe.UP,pe.LEFT,pe.RIGHT].concat(Qe.browser.isFirefox()?[224]:[]),k0="data-mce-placeholder",N0=e=>e.type==="keydown"||e.type==="keyup",A0=e=>{const t=e.keyCode;return t===pe.BACKSPACE||t===pe.DELETE},Az=e=>{if(N0(e)){const t=e.keyCode;return!A0(e)&&(pe.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||R(Nz,t))}else return!1},Tz=e=>N0(e)&&!(A0(e)||e.type==="keyup"&&e.keyCode===229),Rz=(e,t,n)=>{if(Mt(_.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},Pz=e=>{const t=e.dom,n=An(e),s=nR(e),o=(r,i)=>{if(Az(r))return;const a=e.getBody(),c=Tz(r)?!1:Rz(t,a,n);(t.getAttrib(a,k0)!==""!==c||i)&&(t.setAttrib(a,k0,c?s:null),t.setAttrib(a,"aria-placeholder",c?s:null),fO(e,c),e.on(c?"keydown":"keyup",o),e.off(c?"keyup":"keydown",o))};s&&e.on("init",r=>{o(r,!0),e.on("change SetContent ExecCommand",o),e.on("paste",i=>Un.setEditorTimeout(e,()=>o(i)))})},Oz=(e,t)=>({block:e,position:t}),Dz=(e,t)=>({from:e,to:t}),Om=(e,t)=>{const n=_.fromDom(e),s=_.fromDom(t.container());return fc(n,s).map(o=>Oz(o,t))},Bz=e=>st(e.from.block,e.to.block)===!1,Iz=e=>Xn(e.from.block).bind(t=>Xn(e.to.block).filter(n=>st(t,n))).isSome(),$z=e=>vt(e.from.block.dom)===!1&&vt(e.to.block.dom)===!1,Fz=(e,t,n)=>Tt(n.position.getNode())&&Mt(n.block)===!1?li(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Fn(t,e,s).bind(o=>Om(e,o)):h.some(n)).getOr(n):n,Lz=(e,t,n)=>{const s=Om(e,F.fromRangeStart(n)),o=s.bind(r=>Fn(t,e,r.position).bind(i=>Om(e,i).map(a=>Fz(e,t,a))));return vn(s,o,Dz).filter(r=>Bz(r)&&Iz(r)&&$z(r))},Mz=(e,t,n)=>n.collapsed?Lz(e,t,n):h.none(),Uz=e=>{const t=Yt(e);return Ae(t,ss).fold(K(t),n=>t.slice(0,n))},T0=e=>{const t=Uz(e);return T(t,_t),t},R0=(e,t)=>{const n=oo(t,e);return ge(n.reverse(),s=>Mt(s)).each(_t)},zz=e=>H(kh(e),t=>!Mt(t)).length===0,Hz=(e,t,n,s)=>{if(Mt(n))return sr(n),dn(n.dom);zz(s)&&Mt(t)&&Qn(s,_.fromTag("br"));const o=is(n.dom,F.before(s.dom));return T(T0(t),r=>{Qn(s,r)}),R0(e,t),o},Vz=(e,t,n)=>{if(Mt(n))return _t(n),Mt(t)&&sr(t),dn(t.dom);const s=Ds(n.dom);return T(T0(t),o=>{Lt(n,o)}),R0(e,t),s},Wz=(e,t)=>{const n=oo(t,e);return h.from(n[n.length-1])},jz=(e,t)=>eo(t,e)?Wz(t,e):h.none(),P0=(e,t)=>{li(e,t.dom).map(n=>n.getNode()).map(_.fromDom).filter(Yr).each(_t)},O0=(e,t,n)=>(P0(!0,t),P0(!1,n),jz(t,n).fold(re(Vz,e,t,n),re(Hz,e,t,n))),D0=(e,t,n,s)=>t?O0(e,s,n):O0(e,n,s),Dm=(e,t)=>{const n=_.fromDom(e.getBody());return Mz(n.dom,t,e.selection.getRng()).map(o=>()=>{D0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},qz=(e,t)=>{const n=t.getRng();return vn(fc(e,_.fromDom(n.startContainer)),fc(e,_.fromDom(n.endContainer)),(s,o)=>st(s,o)===!1?h.some(()=>{n.deleteContents(),D0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})}):h.none()).getOr(h.none())},B0=(e,t)=>{const n=_.fromDom(t),s=re(st,e);return Kr(n,xl,s).isSome()},Kz=(e,t)=>B0(e,t.startContainer)||B0(e,t.endContainer),Gz=(e,t)=>{const n=is(e.dom,F.fromRangeStart(t)).isNone(),s=Ln(e.dom,F.fromRangeEnd(t)).isNone();return!Kz(e,t)&&n&&s},Yz=e=>h.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Xz=e=>{const t=_.fromDom(e.getBody()),n=e.selection.getRng();return Gz(t,n)?Yz(e):qz(t,e.selection)},Bm=(e,t)=>e.selection.isCollapsed()?h.none():Xz(e),Qz=ns,Zz=vt,io=(e,t,n,s,o)=>h.from(t._selectionOverrides.showCaret(e,n,s,o)),Jz=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},La=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?h.none():h.some(Jz(t)),eH=(e,t,n)=>{const s=jf(1,e.getBody(),t),o=F.fromRangeStart(s),r=o.getNode();if(ba(r))return io(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(ba(i))return io(1,e,i,!1,!1);const a=e.dom.getParent(o.getNode(),c=>Zz(c)||Qz(c));return ba(a)?io(1,e,a,!1,n):h.none()},Im=(e,t,n)=>t.collapsed?eH(e,t,n).getOr(t):t,tH=e=>Do(e)||Ra(e),nH=e=>Bo(e)||Pa(e),sH=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},I0=(e,t,n,s,o,r)=>{io(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),sH(e.dom,n)},oH=(e,t)=>{const n=e.selection.getRng();if(!te(n.commonAncestorContainer))return h.none();const s=t?$t.Forwards:$t.Backwards,o=Os(e.getBody()),r=re(qf,t?o.next:o.prev),i=t?tH:nH,a=wa(s,e.getBody(),n),c=zn(t,r(a));if(!c||!Hl(a,c))return h.none();if(i(c))return h.some(()=>I0(e,n,a.getNode(),s,t,c));const f=r(c);return f&&i(f)&&Hl(c,f)?h.some(()=>I0(e,n,a.getNode(),s,t,f)):h.none()},$m=(e,t)=>oH(e,t),Fm=(e,t)=>{const n=e.getBody();return t?dn(n).filter(Do):Ds(n).filter(Bo)},Lm=e=>{const t=e.selection.getRng();return!t.collapsed&&(Fm(e,!0).exists(n=>n.isEqual(F.fromRangeStart(t)))||Fm(e,!1).exists(n=>n.isEqual(F.fromRangeEnd(t))))},rH=e=>xl(_.fromDom(e))||sa(_.fromDom(e)),Rn=Ts.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),iH=(e,t)=>{const n=t.getNode(e===!1),s=e?"after":"before";return we(n)&&n.getAttribute("data-mce-caret")===s},aH=(e,t,n,s)=>{const o=r=>ff(_.fromDom(r))&&!Rs(n,s,e);return $C(!t,n).fold(()=>$C(t,s).fold(pt,o),o)},$0=(e,t,n,s)=>{const o=s.getNode(t===!1);return fc(_.fromDom(e),_.fromDom(n.getNode())).map(r=>Mt(r)?Rn.remove(r.dom):Rn.moveToElement(o)).orThunk(()=>h.some(Rn.moveToElement(o)))},F0=(e,t,n)=>Fn(t,e,n).bind(s=>rH(s.getNode())||aH(e,t,n,s)?h.none():t&&vt(s.getNode())||t===!1&&vt(s.getNode(!0))?$0(e,t,n,s):t&&Bo(n)||t===!1&&Do(n)?h.some(Rn.moveToPosition(s)):h.none()),lH=(e,t)=>e&&vt(t.nextSibling)?h.some(Rn.moveToElement(t.nextSibling)):e===!1&&vt(t.previousSibling)?h.some(Rn.moveToElement(t.previousSibling)):h.none(),cH=(e,t,n)=>n.fold(s=>h.some(Rn.remove(s)),s=>h.some(Rn.moveToElement(s)),s=>Rs(t,s,e)?h.none():h.some(Rn.moveToPosition(s))),uH=(e,t,n)=>iH(t,n)?lH(t,n.getNode(t===!1)).fold(()=>F0(e,t,n),h.some):F0(e,t,n).bind(s=>cH(e,n,s)),fH=(e,t,n)=>{const s=jf(t?1:-1,e,n),o=F.fromRangeStart(s),r=_.fromDom(e);return t===!1&&Bo(o)?h.some(Rn.remove(o.getNode(!0))):t&&Do(o)?h.some(Rn.remove(o.getNode())):t===!1&&Do(o)&&Od(r,o)?NB(r,o).map(i=>Rn.remove(i.getNode())):t&&Bo(o)&&Pd(r,o)?AB(r,o).map(i=>Rn.remove(i.getNode())):uH(e,t,o)},dH=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),hr(e,t,_.fromDom(n)),!0),mH=(e,t)=>n=>{const s=t?F.before(n):F.after(n);return e.selection.setRng(s.toRange()),!0},pH=e=>t=>(e.selection.setRng(t.toRange()),!0),L0=(e,t)=>h.from(gi(e.getBody(),t)),gH=(e,t)=>{const n=e.selection.getNode();return L0(e,n).filter(vt).fold(()=>fH(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(dH(e,t),mH(e,t),pH(e))),()=>h.some(Oe))},hH=e=>{T(En(e,".mce-offscreen-selection"),_t)},bH=(e,t)=>{const n=e.selection.getNode();return vt(n)&&!wl(n)?L0(e,n.parentNode).filter(vt).fold(()=>h.some(()=>{hH(_.fromDom(e.getBody())),hr(e,t,_.fromDom(e.selection.getNode())),Fd(e)}),()=>h.some(Oe)):Lm(e)?h.some(()=>{Bv(e,e.selection.getRng(),_.fromDom(e.getBody()))}):h.none()},M0=e=>{const t=e.dom,n=e.selection,s=gi(e.getBody(),n.getNode());if(ns(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(F.before(o).toRange())}return!0},Mm=(e,t)=>e.selection.isCollapsed()?gH(e,t):bH(e,t),CH=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Fn(t,e.getBody(),n).filter(s=>t?vB(s):EB(s)).bind(s=>h.from(Wf(t?0:-1,s))).map(s=>()=>e.selection.select(s))},Um=(e,t)=>e.selection.isCollapsed()?CH(e,t):h.none(),wi=te,U0=e=>wi(e)&&e.data[0]===jt,z0=e=>wi(e)&&e.data[e.data.length-1]===jt,H0=e=>e.ownerDocument.createTextNode(jt),yH=e=>{if(wi(e.previousSibling))return z0(e.previousSibling)||e.previousSibling.appendData(jt),e.previousSibling;if(wi(e))return U0(e)||e.insertData(0,jt),e;{const t=H0(e);return e.parentNode.insertBefore(t,e),t}},vH=e=>{if(wi(e.nextSibling))return U0(e.nextSibling)||e.nextSibling.insertData(0,jt),e.nextSibling;if(wi(e))return z0(e)||e.appendData(jt),e;{const t=H0(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}},Dc=(e,t)=>e?yH(t):vH(t),EH=re(Dc,!0),wH=re(Dc,!1),V0=(e,t)=>te(e.container())?Dc(t,e.container()):Dc(t,e.getNode()),W0=(e,t)=>{const n=t.get();return n&&e.container()===n&&Zr(n)},zm=(e,t)=>t.fold(n=>{fr(e.get());const s=EH(n);return e.set(s),h.some(F(s,s.length-1))},n=>dn(n).map(s=>{if(W0(s,e))return F(e.get(),1);{fr(e.get());const o=V0(s,!0);return e.set(o),F(o,1)}}),n=>Ds(n).map(s=>{if(W0(s,e))return F(e.get(),e.get().length-1);{fr(e.get());const o=V0(s,!1);return e.set(o),F(o,o.length-1)}}),n=>{fr(e.get());const s=wH(n);return e.set(s),h.some(F(s,1))}),j0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return h.none()},sn=Ts.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),q0=(e,t)=>{const n=Ro(t,e);return n||e},xH=(e,t,n)=>{const s=Rv(n),o=q0(t,s.container());return Io(e,o,s).fold(()=>Ln(o,s).bind(re(Io,e,o)).map(r=>sn.before(r)),h.none)},SH=(e,t)=>mr(e,t)===null,K0=(e,t,n)=>Io(e,t,n).filter(re(SH,t)),_H=(e,t,n)=>{const s=Pv(n);return K0(e,t,s).bind(o=>is(o,s).isNone()?h.some(sn.start(o)):h.none())},kH=(e,t,n)=>{const s=Rv(n);return K0(e,t,s).bind(o=>Ln(o,s).isNone()?h.some(sn.end(o)):h.none())},NH=(e,t,n)=>{const s=Pv(n),o=q0(t,s.container());return Io(e,o,s).fold(()=>is(o,s).bind(re(Io,e,o)).map(r=>sn.after(r)),h.none)},G0=e=>lI(Hm(e))===!1,Ls=(e,t,n)=>j0([xH,_H,kH,NH],[e,t,n]).filter(G0),Hm=e=>e.fold(wt,wt,wt,wt),Y0=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Bc=e=>e.fold(sn.before,sn.before,sn.after,sn.after),Vm=e=>e.fold(sn.start,sn.start,sn.end,sn.end),AH=(e,t)=>Y0(e)===Y0(t)&&Hm(e)===Hm(t),TH=(e,t,n,s,o,r)=>vn(Io(t,n,s),Io(t,n,o),(i,a)=>i!==a&&uI(n,i,a)?sn.after(e?i:a):r).getOr(r),RH=(e,t)=>e.fold(ct,n=>!AH(n,t)),PH=(e,t,n,s,o)=>{const r=zn(e,o);return Fn(e,n,r).map(re(zn,e)).fold(()=>s.map(Bc),c=>Ls(t,n,c).map(re(TH,e,t,n,r,c)).filter(re(RH,s))).filter(G0)},OH=(e,t)=>e?t.fold(Ot(h.some,sn.start),h.none,Ot(h.some,sn.after),h.none):t.fold(h.none,Ot(h.some,sn.before),h.none,Ot(h.some,sn.end)),DH=(e,t,n,s)=>{const o=zn(e,s),r=Ls(t,n,o);return Ls(t,n,o).bind(re(OH,e)).orThunk(()=>PH(e,t,n,r,s))},BH=e=>Ge(e.selection.getSel().modify),X0=(e,t,n)=>{const s=e?1:-1;return t.setRng(F(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},IH=(e,t)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n);return BH(t)?e&&gf(s)?X0(!0,t.selection,s):!e&&hf(s)?X0(!1,t.selection,s):!1:!1};var Ms;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ms||(Ms={}));const Ic=(e,t)=>e===$t.Backwards?it(t):t,$H=(e,t,n)=>e===$t.Forwards?t.next(n):t.prev(n),FH=(e,t,n,s)=>Tt(s.getNode(t===$t.Forwards))?Ms.Br:Rs(n,s)===!1?Ms.Block:Ms.Wrap,Q0=(e,t,n,s)=>{const o=Os(n);let r=s;const i=[];for(;r;){const a=$H(t,o,r);if(!a)break;if(Tt(a.getNode(!1)))return t===$t.Forwards?{positions:Ic(t,i).concat([a]),breakType:Ms.Br,breakAt:h.some(a)}:{positions:Ic(t,i),breakType:Ms.Br,breakAt:h.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=FH(n,t,r,a);return{positions:Ic(t,i),breakType:c,breakAt:h.some(a)}}i.push(a),r=a}return{positions:Ic(t,i),breakType:Ms.Eol,breakAt:h.none()}},Z0=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===$t.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Wm=(e,t)=>Q(e,(n,s)=>n.fold(()=>h.some(s),o=>vn(Ft(o.getClientRects()),Ft(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),h.none()),$c=(e,t)=>Ft(t.getClientRects()).bind(n=>Wm(e,n.left)),Ma=re(Q0,F.isAbove,-1),Ua=re(Q0,F.isBelow,1),J0=re(Z0,-1,Ma),ew=re(Z0,1,Ua),LH=(e,t)=>Ma(e,t).breakAt.isNone(),MH=(e,t)=>Ua(e,t).breakAt.isNone(),UH=e=>dn(e).map(t=>[t].concat(Ua(e,t).positions)).getOr([]),zH=e=>Ds(e).map(t=>Ma(e,t).positions.concat(t)).getOr([]),HH=(e,t)=>$c(J0(e,t),t),VH=(e,t)=>$c(ew(e,t),t),WH=vt,tw=(e,t)=>Math.abs(e.left-t),nw=(e,t)=>Math.abs(e.right-t),jH=e=>Mr(e,"node"),sw=(e,t)=>dl(e,(n,s)=>{const o=Math.min(tw(n,t),nw(n,t)),r=Math.min(tw(s,t),nw(s,t));return r===o&&jH(s)&&WH(s.node)||r<o?s:n}),qH=e=>{const t=n=>z(n,s=>{const o=cr(s);return o.node=e,o});if(we(e))return t(e.getClientRects());if(te(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},ow=e=>We(e,qH);var za;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(za||(za={}));const KH=(e,t,n,s)=>{for(;s=ya(s,e,lb,t);)if(n(s))return},rw=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let C=ow([p]);e===-1&&(C=C.reverse());for(let y=0;y<C.length;y++){const w=C[y];if(!n(w,f)){if(a.length>0&&t(w,Co(a))&&i++,w.line=i,o(w))return!0;a.push(w)}}},f=Co(r.getClientRects());if(!f)return a;const d=r.getNode();return c(d),KH(e,s,c,d),a},GH=(e,t)=>t.line>e,YH=(e,t)=>t.line===e,XH=re(rw,za.Up,fa,da),QH=re(rw,za.Down,da,fa),ZH=(e,t,n,s)=>{const o=Os(t);let r,i,a,c;const f=[];let d=0;const p=y=>Co(y.getClientRects());e===1?(r=o.next,i=da,a=fa,c=F.after(s)):(r=o.prev,i=fa,a=da,c=F.before(s));const C=p(c);do{if(!c.isVisible())continue;const y=p(c);if(a(y,C))continue;f.length>0&&i(y,Co(f))&&d++;const w=cr(y);if(w.position=c,w.line=d,n(w))return f;f.push(w)}while(c=r(c));return f},iw=e=>t=>GH(e,t),jm=e=>t=>YH(e,t),ao=(e,t)=>{e.selection.setRng(t),Aa(e,e.selection.getRng())},qm=(e,t,n)=>h.some(Im(e,t,n)),aw=(e,t,n,s,o,r)=>{const i=t===$t.Forwards,a=Os(e.getBody()),c=re(qf,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const w=Bl(n);if(r(w))return io(t,e,w,t===$t.Backwards,!1);if(Lm(e)){const v=n.cloneRange();return v.collapse(t===$t.Backwards),h.from(v)}}const d=wa(t,e.getBody(),n);if(f(d))return La(e,d.getNode(!i));const p=zn(i,c(d)),C=rb(n);if(!p)return C?h.some(n):h.none();if(f(p))return io(t,e,p.getNode(!i),i,!1);const y=c(p);return y&&f(y)&&Hl(p,y)?io(t,e,y.getNode(!i),i,!1):C?qm(e,p.toRange(),!1):h.none()},lw=(e,t,n,s,o,r)=>{const i=wa(t,e.getBody(),n),a=Co(i.getClientRects()),c=t===za.Down,f=e.getBody();if(!a)return h.none();if(Lm(e)){const x=c?F.fromRangeEnd(n):F.fromRangeStart(n);return(c?VH:HH)(f,x).orThunk(()=>h.from(x)).map(P=>P.toRange())}const p=(c?QH:XH)(f,iw(1),i),C=H(p,jm(1)),y=a.left,w=sw(C,y);if(w&&r(w.node)){const x=Math.abs(y-w.left),S=Math.abs(y-w.right);return io(t,e,w.node,x<S,!1)}let v;if(s(i)?v=i.getNode():o(i)?v=i.getNode(!0):v=Bl(n),v){const x=ZH(t,f,iw(1),v);let S=sw(H(x,jm(1)),y);if(S||(S=Co(H(x,jm(0))),S))return qm(e,S.position.toRange(),!1)}return C.length===0?Km(e,c).filter(c?o:s).map(x=>Im(e,x.toRange(),!1)):h.none()},Km=(e,t)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n),o=rP(s.container(),e.getBody());if(t){const r=Ua(o,s);return Qs(r.positions)}else{const r=Ma(o,s);return Ft(r.positions)}},cw=(e,t,n)=>Km(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Fc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},uw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},fw=(e,t,n)=>zm(t,n).map(s=>(Fc(e,s),n)),JH=(e,t,n)=>{const s=F.fromRangeStart(e);if(e.collapsed)return s;{const o=F.fromRangeEnd(e);return n?is(t,o).getOr(o):Ln(t,s).getOr(s)}},e3=(e,t,n)=>{const s=e.getBody(),o=JH(e.selection.getRng(),s,n),r=re(br,e);return DH(n,r,s,o).bind(a=>fw(e,t,a))},t3=(e,t,n)=>{const s=z(En(_.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=H(s,e),r=H(n,e);T(gt(o,r),re(uw,!1)),T(gt(r,o),re(uw,!0))},n3=(e,t)=>{if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){const n=F.fromRangeStart(e.selection.getRng());F.isTextPosition(n)&&fI(n)===!1&&(Fc(e,YR(t.get(),n)),t.set(null))}},s3=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=H(s,e);T(o,r=>{const i=F.fromRangeStart(t.selection.getRng());Ls(e,t.getBody(),i).bind(a=>fw(t,n,a))})}},dw=(e,t,n)=>ha(e)?e3(e,t,n).isSome():!1,mw=(e,t,n)=>ha(t)?IH(e,t):!1,o3=e=>{const t=Ut(null),n=re(br,e);return e.on("NodeChange",s=>{ha(e)&&(t3(n,e.dom,s.parents),n3(e,t),s3(n,e,t,s.parents))}),t},r3=re(mw,!0),i3=re(mw,!1),Lc=(e,t,n)=>{if(ha(e)){const s=Km(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?F.fromRangeEnd(o):F.fromRangeStart(o)});return Ls(re(br,e),e.getBody(),s).exists(o=>{const r=Bc(o);return zm(n,r).exists(i=>(Fc(e,i),!0))})}else return!1},a3=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},l3=e=>vn(dn(e),Ds(e),(t,n)=>{const s=zn(!0,t),o=zn(!1,n);return Ln(e,s).forall(r=>r.isEqual(o))}).getOr(!0),pw=(e,t)=>n=>zm(t,n).map(s=>()=>Fc(e,s)),gw=(e,t,n,s)=>{const o=e.getBody(),r=re(br,e);e.undoManager.ignore(()=>{e.selection.setRng(a3(n,s)),$d(e),Ls(r,o,F.fromRangeStart(e.selection.getRng())).map(Vm).bind(pw(e,t)).each(qo)}),e.nodeChanged()},c3=(e,t)=>{const n=Ro(t,e);return n||e},u3=(e,t,n,s)=>{const o=c3(e.getBody(),s.container()),r=re(br,e),i=Ls(r,o,s);return i.bind(c=>n?c.fold(K(h.some(Vm(c))),h.none,K(h.some(Bc(c))),h.none):c.fold(h.none,K(h.some(Bc(c))),h.none,K(h.some(Vm(c))))).map(pw(e,t)).getOrThunk(()=>{const c=Wl(n,o,s),f=c.bind(d=>Ls(r,o,d));return vn(i,f,()=>Io(r,o,s).bind(d=>l3(d)?h.some(()=>{hr(e,n,_.fromDom(d))}):h.none())).getOrThunk(()=>f.bind(()=>c.map(d=>()=>{n?gw(e,t,s,d):gw(e,t,d,s)})))})},Gm=(e,t,n)=>{if(e.selection.isCollapsed()&&ha(e)){const s=F.fromRangeStart(e.selection.getRng());return u3(e,t,n,s)}return h.none()},f3=(e,t)=>{const n=oo(t,e);return Ae(n,ss).fold(K(n),s=>n.slice(0,s))},d3=e=>Th(e)===1,m3=(e,t,n,s)=>{const o=re(G$,t),r=z(H(s,o),i=>i.dom);if(r.length===0)hr(t,e,n);else{const i=K$(n.dom,r);t.selection.setRng(i.toRange())}},p3=(e,t)=>{const n=_.fromDom(e.getBody()),s=_.fromDom(e.selection.getStart()),o=H(f3(n,s),d3);return Qs(o).bind(r=>{const i=F.fromRangeStart(e.selection.getRng());return gI(t,i,r.dom)&&!Y$(r)?h.some(()=>m3(t,e,r,o)):h.none()})},Ym=(e,t)=>e.selection.isCollapsed()?p3(e,t):h.none(),Xm=(e,t,n)=>h.some(()=>{e._selectionOverrides.hideFakeCaret(),hr(e,t,_.fromDom(n))}),g3=(e,t)=>{const n=t?Ra:Pa,s=t?$t.Forwards:$t.Backwards,o=wa(s,e.getBody(),e.selection.getRng());return n(o)?Xm(e,t,o.getNode(!t)):h.from(zn(t,o)).filter(r=>n(r)&&Hl(o,r)).map(r=>()=>Xm(e,t,r.getNode(!t)))},h3=(e,t)=>{const n=e.selection.getNode();return As(n)?Xm(e,t,n):h.none()},Qm=(e,t)=>e.selection.isCollapsed()?g3(e,t):h3(e,t),b3=e=>Gr(e,t=>ns(t.dom)||vt(t.dom)).exists(t=>ns(t.dom)),Zm=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},hw=(e,t)=>{const n=e||kA(t)?"margin":"padding",s=Ns(t,"direction")==="rtl"?"-right":"-left";return n+s},C3=(e,t,n,s,o,r)=>{const i=hw(n,_.fromDom(r));if(t==="outdent"){const a=Math.max(0,Zm(r.style[i])-s);e.setStyle(r,i,a?a+o:"")}else{const a=Zm(r.style[i])+s+o;e.setStyle(r,i,a)}},y3=(e,t)=>ot(t,n=>{const s=hw(pC(e),n),o=Cl(n,s).map(Zm).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),bw=e=>{const t=yw(e);return!e.mode.isReadOnly()&&(t.length>1||y3(e,t))},Cw=e=>df(e)||sa(e),v3=e=>Xn(e).exists(Cw),yw=e=>H(XN(e.selection.getSelectedBlocks()),t=>!Cw(t)&&!v3(t)&&b3(t)),vw=(e,t)=>{const{dom:n}=e,s=X1(e),o=/[a-z%]+$/i.exec(s)[0],r=parseInt(s,10),i=pC(e);T(yw(e),a=>{C3(n,t,i,r,o,a.dom)})},E3=e=>vw(e,"indent"),Ew=e=>vw(e,"outdent"),ww=e=>{if(e.selection.isCollapsed()&&bw(e)){const t=e.dom,n=e.selection.getRng(),s=F.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Rd(_.fromDom(o),s))return h.some(()=>Ew(e))}return h.none()},xw=(e,t,n)=>en([ww,Mm,$m,(s,o)=>Gm(s,t,o),Dm,jd,Um,Qm,Bm,Ym],s=>s(e,n)),w3=(e,t)=>{xw(e,t,!1).fold(()=>{$d(e),Fd(e)},qo)},x3=(e,t)=>{xw(e,t,!0).fold(()=>dI(e),qo)},S3=(e,t)=>{e.addCommand("delete",()=>{w3(e,t)}),e.addCommand("forwardDelete",()=>{x3(e,t)})},Sw=5,_3=400,_w=e=>e.touches===void 0||e.touches.length!==1?h.none():h.some(e.touches[0]),k3=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>Sw||s>Sw},N3=e=>{const t=No(),n=Ut(!1),s=Rf(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},_3);e.on("touchstart",o=>{_w(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),_w(o).each(r=>{t.on(i=>{k3(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},Jm=(e,t)=>Ie(e,t.nodeName),A3=(e,t)=>te(t)?!0:we(t)?!Jm(e,t)&&!Mn(t):!1,T3=(e,t,n)=>M(gv(_.fromDom(n),_.fromDom(t)),s=>Jm(e,s.dom)),R3=(e,t)=>{if(te(t)){if(t.nodeValue.length===0)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Jm(e,t.nextSibling)))return!0}return!1},kw=e=>e.dom.create(An(e),ga(e)),P3=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements();let r=n.getStart();const i=e.getBody();let a,c,f;const d=An(e);if(!r||!we(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||T3(o,i,r))return;const C=n.getRng(),y=C.startContainer,w=C.startOffset,v=C.endContainer,x=C.endOffset,S=gr(e);for(r=i.firstChild;r;)if(A3(o,r)){if(R3(o,r)){c=r,r=r.nextSibling,t.remove(c);continue}a||(a=kw(e),r.parentNode.insertBefore(a,r),f=!0),c=r,r=r.nextSibling,a.appendChild(c)}else a=null,r=r.nextSibling;f&&S&&(C.setStart(y,w),C.setEnd(v,x),n.setRng(C),e.nodeChanged())},Nw=(e,t,n)=>{const s=_.fromDom(kw(e)),o=pf();Lt(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},O3=e=>{e.on("NodeChange",re(P3,e))},Aw=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,D3=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},B3=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],D3(e,o,EC(e)));n.content=o}},I3=e=>{const t="contenteditable",n=" "+G.trim(LR(e))+" ",s=" "+G.trim(EC(e))+" ",o=Aw(n),r=Aw(s),i=MR(e);i.length>0&&e.on("BeforeSetContent",a=>{B3(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];!o(f)&&!r(f)||(i.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},$3=e=>na(_.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),Tw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(bf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},F3=(e,t)=>{const n=$3(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),Tw(e,n);return}ob(n)&&(Tw(e,n),e.undoManager.add())}},L3=e=>{e.on("keyup compositionstart",re(F3,e))},Rw=vt,M3=(e,t,n)=>aw(t,e,n,Do,Bo,Rw),U3=(e,t,n)=>lw(t,e,n,r=>Do(r)||mv(r),r=>Bo(r)||pv(r),Rw),z3=e=>{const t=e.dom.create(An(e));return t.innerHTML='<br data-mce-bogus="1">',t},Pw=(e,t,n)=>{const s=Os(e.getBody()),o=re(qf,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(F.fromRangeStart(n))){const a=_.fromDom(z3(e));t===1?Eo(_.fromDom(r),a):Qn(_.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},H3=(e,t)=>{const n=t?$t.Forwards:$t.Backwards,s=e.selection.getRng();return M3(n,e,s).orThunk(()=>(Pw(e,n,s),h.none()))},V3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return U3(n,e,s).orThunk(()=>(Pw(e,n,s),h.none()))},Ow=(e,t)=>H3(e,t).exists(n=>(ao(e,n),!0)),Dw=(e,t)=>V3(e,t).exists(n=>(ao(e,n),!0)),Bw=(e,t)=>cw(e,t,t?Bo:Do),Mc=(e,t)=>Fm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(ao(e,n),!0)),W3=e=>R(["figcaption"],yt(e)),j3=(e,t)=>{const n=re(st,t);return Gr(_.fromDom(e.container()),ss,n).filter(W3)},q3=(e,t,n)=>t?MH(e.dom,n):LH(e.dom,n),K3=(e,t)=>{const n=_.fromDom(e.getBody()),s=F.fromRangeStart(e.selection.getRng());return j3(s,n).exists(()=>{if(q3(n,t,s)){const r=Nw(e,n,t?Lt:Lh);return e.selection.setRng(r),!0}else return!1})},Iw=(e,t)=>e.selection.isCollapsed()?K3(e,t):!1,$w={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},G3=e=>z(e,t=>({...$w,action:Oe,...t})),Y3=e=>z(e,t=>({...$w,action:()=>h.none(),...t})),Fw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,X3=(e,t)=>We(G3(e),n=>Fw(n,t)?[n]:[]),Q3=(e,t)=>We(Y3(e),n=>Fw(n,t)?[n]:[]),Pe=(e,...t)=>()=>e.apply(null,t),Ha=(e,t)=>ge(X3(e,t),n=>n.action()),Lw=(e,t)=>en(Q3(e,t),n=>n.action()),Mw=(e,t)=>{const n=t?$t.Forwards:$t.Backwards,s=e.selection.getRng();return aw(e,n,s,Ra,Pa,As).exists(o=>(ao(e,o),!0))},Uw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return lw(e,n,s,Ra,Pa,As).exists(o=>(ao(e,o),!0))},zw=(e,t)=>cw(e,t,t?Pa:Ra),Hw=Ts.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Va={...Hw,none:e=>Hw.none(e)},Z3=(e,t)=>Vw(e,t,ct),Vw=(e,t,n)=>We(Yt(e),s=>ks(s,t)?n(s)?[s]:[]:Vw(s,t,n)),J3=(e,t,n=pt)=>{if(n(t))return h.none();if(R(e,yt(t)))return h.some(t);const s=o=>ks(o,"table")||n(o);return ta(t,e.join(","),s)},e2=(e,t)=>J3(["td","th"],e,t),t2=e=>Z3(e,"th,td"),Ww=(e,t)=>nr(e,"table",t),ep=(e,t,n,s,o=ct)=>{const r=s===1;if(!r&&n<=0)return Va.first(e[0]);if(r&&n>=e.length-1)return Va.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Va.middle(t,a):ep(e,t,i,s,o)}},jw=(e,t)=>Ww(e,t).bind(n=>{const s=t2(n);return Ae(s,r=>st(e,r)).map(r=>({index:r,all:s}))}),n2=(e,t,n)=>jw(e,n).fold(()=>Va.none(e),o=>ep(o.all,e,o.index,1,t)),s2=(e,t,n)=>jw(e,n).fold(()=>Va.none(),o=>ep(o.all,e,o.index,-1,t)),o2=e=>nr(e,"[contenteditable]"),qw=(e,t=!1)=>Wr(e)?e.dom.isContentEditable:o2(e).fold(K(t),n=>r2(n)==="true"),r2=e=>e.dom.contentEditable,i2=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),a2=(e,t)=>We(t,n=>{const s=i2(cr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),l2=(e,t,n)=>Q(e,(s,o)=>s.fold(()=>h.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return h.some(a<i?o:r)}),h.none()),Kw=(e,t,n,s,o)=>{const r=En(_.fromDom(n),"td,th,caption").map(a=>a.dom),i=H(a2(e,r),a=>t(a,o));return l2(i,s,o).map(a=>a.cell)},c2=e=>e.bottom,u2=e=>e.top,f2=(e,t)=>e.y<t,d2=(e,t)=>e.y>t,m2=re(Kw,c2,f2),p2=re(Kw,u2,d2),g2=(e,t)=>Ft(t.getClientRects()).bind(n=>m2(e,n.left,n.top)).bind(n=>$c(zH(n),t)),h2=(e,t)=>Qs(t.getClientRects()).bind(n=>p2(e,n.left,n.top)).bind(n=>$c(UH(n),t)),b2=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),C2=e=>e.breakType===Ms.Wrap&&e.positions.length===0,y2=e=>e.breakType===Ms.Br&&e.positions.length===1,Gw=(e,t,n)=>{const s=e(t,n);return C2(s)||!Tt(n.getNode())&&y2(s)?!b2(e,t,s):s.breakAt.isNone()},v2=re(Gw,Ma),E2=re(Gw,Ua),w2=(e,t,n)=>{const s=F.fromRangeStart(t);return li(!e,n).exists(o=>o.isEqual(s))},x2=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return TC()&&w2(t,o,n)?(io(r,e,n,!t,!1).each(i=>{ao(e,i)}),!0):!1},S2=(e,t,n)=>g2(t,n).orThunk(()=>Ft(n.getClientRects()).bind(s=>Wm(J0(e,F.before(t)),s.left))).getOr(F.before(t)),_2=(e,t,n)=>h2(t,n).orThunk(()=>Ft(n.getClientRects()).bind(s=>Wm(ew(e,F.after(t)),s.left))).getOr(F.after(t)),Yw=(e,t)=>{const n=t.getNode(e);return qr(n)?h.some(n):h.none()},k2=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?Eo:Qn,o=Nw(t,_.fromDom(n),s);ao(t,o)})},Xw=(e,t,n)=>{const s=Yw(!!t,n),o=t===!1;s.fold(()=>ao(e,n.toRange()),r=>li(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>ao(e,n.toRange()),i=>k2(t,e,r)))},N2=(e,t,n,s)=>{const o=e.selection.getRng(),r=F.fromRangeStart(o),i=e.getBody();if(!t&&v2(s,r)){const a=S2(i,n,r);return Xw(e,t,a),!0}else if(t&&E2(s,r)){const a=_2(i,n,r);return Xw(e,t,a),!0}else return!1},Qw=(e,t,n)=>h.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>h.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),Zw=(e,t)=>Qw(e,t,x2),Jw=(e,t)=>Qw(e,t,N2),A2=e=>{const t=mi.exact(e,0,e,0);return WO(t)},ex=(e,t,n)=>n.fold(h.none,h.none,(s,o)=>JD(o).map(r=>A2(r)),s=>(e.execCommand("mceTableInsertRowAfter"),tx(e,t,s))),tx=(e,t,n)=>ex(e,t,n2(n,qw)),T2=(e,t,n)=>ex(e,t,s2(n,qw)),nx=(e,t)=>{const n=["table","li","dl"],s=_.fromDom(e.getBody()),o=a=>{const c=yt(a);return st(a,s)||R(n,c)},r=e.selection.getRng(),i=_.fromDom(t?r.endContainer:r.startContainer);return e2(i,o).map(a=>(Ww(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?tx:T2)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},R2=(e,t,n)=>{const s=Qe.os.isMacOS()||Qe.os.isiOS();Ha([{keyCode:pe.RIGHT,action:Pe(Ow,e,!0)},{keyCode:pe.LEFT,action:Pe(Ow,e,!1)},{keyCode:pe.UP,action:Pe(Dw,e,!1)},{keyCode:pe.DOWN,action:Pe(Dw,e,!0)},...s?[{keyCode:pe.UP,action:Pe(Mc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:pe.DOWN,action:Pe(Mc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:pe.RIGHT,action:Pe(Zw,e,!0)},{keyCode:pe.LEFT,action:Pe(Zw,e,!1)},{keyCode:pe.UP,action:Pe(Jw,e,!1)},{keyCode:pe.DOWN,action:Pe(Jw,e,!0)},{keyCode:pe.RIGHT,action:Pe(Mw,e,!0)},{keyCode:pe.LEFT,action:Pe(Mw,e,!1)},{keyCode:pe.UP,action:Pe(Uw,e,!1)},{keyCode:pe.DOWN,action:Pe(Uw,e,!0)},{keyCode:pe.RIGHT,action:Pe(dw,e,t,!0)},{keyCode:pe.LEFT,action:Pe(dw,e,t,!1)},{keyCode:pe.RIGHT,ctrlKey:!s,altKey:s,action:Pe(r3,e,t)},{keyCode:pe.LEFT,ctrlKey:!s,altKey:s,action:Pe(i3,e,t)},{keyCode:pe.UP,action:Pe(Iw,e,!1)},{keyCode:pe.DOWN,action:Pe(Iw,e,!0)}],n).each(o=>{n.preventDefault()})},P2=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&R2(e,t,n)})},us=(e,t)=>({container:e,offset:t}),Uc=at.DOM,zc=e=>t=>e===t?-1:0,O2=e=>t=>e.isBlock(t)||R(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",tp=(e,t,n)=>{if(te(e)&&t>=0)return h.some(us(e,t));{const s=lr(Uc);return h.from(s.backwards(e,t,zc(e),n)).map(o=>us(o.container,o.container.data.length))}},D2=(e,t,n)=>{if(te(e)&&t>=e.length)return h.some(us(e,t));{const s=lr(Uc);return h.from(s.forwards(e,t,zc(e),n)).map(o=>us(o.container,0))}},np=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t>=0&&t<=s.length)return h.some(us(e,t));{const o=lr(Uc);return h.from(o.backwards(e,t,zc(e),n)).bind(r=>{const i=r.container.data;return np(r.container,t+i.length,n)})}},sx=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t<=s.length)return h.some(us(e,t));{const o=lr(Uc);return h.from(o.forwards(e,t,zc(e),n)).bind(r=>sx(r.container,t-s.length,n))}},sp=(e,t,n,s,o)=>{const r=lr(e,O2(e));return h.from(r.backwards(t,n,s,o))},B2=e=>e.collapsed&&e.startContainer.nodeType===3,ox=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),rx=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,op=(e,t)=>e.substring(t.length),I2=(e,t,n)=>{let s;for(s=t-1;s>=0;s--){const o=e.charAt(s);if(rx(o))return h.none();if(o===n)break}return h.some(s)},$2=(e,t,n,s=0)=>{if(!B2(t))return h.none();const o=(i,a,c)=>I2(c,a,n).getOr(a),r=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return sp(e,t.startContainer,t.startOffset,o,r).bind(i=>{const a=t.cloneRange();if(a.setStart(i.container,i.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return h.none();const c=ox(a);return c.lastIndexOf(n)!==0||op(c,n).length<s?h.none():h.some({text:op(c,n),range:a,triggerChar:n})})},ix=(e,t,n,s=0)=>sB(_.fromDom(t.startContainer)).fold(()=>$2(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=ox(r);return h.some({range:r,text:op(i,n),triggerChar:n})}),F2=e=>e.nodeType===mh,L2=e=>e.nodeType===Ki,ax=e=>{if(F2(e))return us(e,e.data.length);{const t=e.childNodes;return t.length>0?ax(t[t.length-1]):us(e,t.length)}},lx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?lx(n[t],0):n.length>0&&L2(e)&&n.length===t?ax(n[n.length-1]):us(e,t)},M2=(e,t)=>{const n=e.getParent(t.container,e.isBlock);return sp(e,t.container,t.offset,(s,o)=>o===0?-1:o,n).filter(s=>{const o=s.container.data.charAt(s.offset-1);return!rx(o)}).isSome()},U2=e=>t=>{const n=lx(t.startContainer,t.startOffset);return!M2(e,n)},z2=(e,t,n)=>en(n.triggerChars,s=>ix(e,t,s)),H2=(e,t)=>{const n=t(),s=e.selection.getRng();return z2(e.dom,s,n).bind(o=>cx(e,t,o))},cx=(e,t,n,s={})=>{const o=t(),i=e.selection.getRng().startContainer.nodeValue,a=H(o.lookupByChar(n.triggerChar),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>U2(e.dom))(n.range,i,n.text));if(a.length===0)return h.none();const c=Promise.all(z(a,f=>f.fetch(n.text,f.maxResults,s).then(p=>({matchText:n.text,items:p,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return h.some({lookupData:c,context:n})};var fs;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(fs||(fs={}));const rp=(e,t,n)=>e.stype===fs.Error?t(e.serror):n(e.svalue),V2=e=>{const t=[],n=[];return T(e,s=>{rp(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},W2=(e,t)=>e.stype===fs.Error?{stype:fs.Error,serror:t(e.serror)}:e,j2=(e,t)=>e.stype===fs.Value?{stype:fs.Value,svalue:t(e.svalue)}:e,q2=(e,t)=>e.stype===fs.Value?t(e.svalue):e,K2=(e,t)=>e.stype===fs.Error?t(e.serror):e,ux=e=>({stype:fs.Value,svalue:e}),fx=e=>({stype:fs.Error,serror:e}),Ht={fromResult:e=>e.fold(fx,ux),toResult:e=>rp(e,fn.error,fn.value),svalue:ux,partition:V2,serror:fx,bind:q2,bindError:K2,map:j2,mapError:W2,fold:rp},ip=e=>ft(e)&&Gn(e).length>100?" removed due to size":JSON.stringify(e,null,2),G2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return z(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Hc=(e,t)=>Ht.serror([{path:e,getErrorInfo:t}]),Y2=(e,t,n)=>Hc(e,()=>'Could not find valid *required* value for "'+t+'" in '+ip(n)),X2=(e,t)=>Hc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),Q2=(e,t,n)=>Hc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+ip(t)),Z2=(e,t)=>Hc(e,K(t)),J2=(e,t,n,s)=>ut(n,s).fold(()=>Q2(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),eV=(e,t)=>({extract:(o,r)=>ut(r,e).fold(()=>X2(o,e),a=>J2(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+Gn(t)}),tV=(e,t)=>t,nV=(e,t)=>Gs(e)&&Gs(t)?Vc(e,t):t,dx=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Ie(o,r)&&(n[r]=e(n[r],o[r]))}return n},Vc=dx(nV),sV=dx(tV),mx=()=>({tag:"required",process:{}}),oV=e=>({tag:"defaultedThunk",process:e}),px=e=>oV(K(e)),rV=()=>({tag:"option",process:{}}),iV=(e,t)=>e.length>0?Ht.svalue(Vc(t,sV.apply(void 0,e))):Ht.svalue(t),gx=e=>Ot(Ht.serror,Ue)(e),aV={consolidateObj:(e,t)=>{const n=Ht.partition(e);return n.errors.length>0?gx(n.errors):iV(n.values,t)},consolidateArr:e=>{const t=Ht.partition(e);return t.errors.length>0?gx(t.errors):Ht.svalue(t.values)}},lV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),cV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),hx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},ap=e=>{const t=(s,o)=>Ht.bindError(e(o),r=>Z2(s,r)),n=K("val");return{extract:t,toString:n}},uV=ap(Ht.svalue),fV=(e,t,n,s)=>ut(t,n).fold(()=>Y2(e,n,t),s),bx=(e,t,n,s)=>{const o=ut(e,t).getOrThunk(()=>n(e));return s(o)},dV=(e,t,n)=>n(ut(e,t)),mV=(e,t,n,s)=>{const o=ut(e,t).map(r=>r===!0?n(e):r);return s(o)},pV=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>Ht.svalue(h.none()),c=>{const f=o.extract(t.concat([s]),c);return Ht.map(f,h.some)});switch(e.tag){case"required":return fV(t,n,s,r);case"defaultedThunk":return bx(n,s,e.process,r);case"option":return dV(n,s,i);case"defaultedOptionThunk":return mV(n,s,e.process,i);case"mergeWithThunk":return bx(n,s,K({}),a=>{const c=Vc(e.process(n),a);return r(c)})}},gV=(e,t,n)=>{const s={},o=[];for(const r of n)hx(r,(i,a,c,f)=>{const d=pV(c,e,t,i,f);Ht.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?Ht.serror(o):Ht.svalue(s)},lp=e=>({extract:(s,o)=>gV(s,o,e),toString:()=>{const s=z(e,o=>hx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),Cx=e=>({extract:(s,o)=>{const r=z(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return aV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),hV=e=>ap(t=>e(t).fold(Ht.serror,Ht.svalue)),bV=(e,t,n)=>{const s=t.extract([e],n);return Ht.mapError(s,o=>({input:n,errors:o}))},CV=(e,t,n)=>Ht.toResult(bV(e,t,n)),yV=e=>`Errors: 
`+G2(e.errors).join(`
`)+`

Input object: `+ip(e.input),yx=(e,t)=>eV(e,Vi(t,lp)),vV=K(uV),Wc=(e,t)=>ap(n=>{const s=typeof n;return e(n)?Ht.svalue(n):Ht.serror(`Expected type: ${t} but got: ${s}`)}),EV=Wc(Cn,"number"),jc=Wc(me,"string"),wV=Wc(qn,"boolean"),cp=Wc(Ge,"function"),Wa=lV,vx=cV,xV=e=>hV(t=>R(e,t)?fn.value(t):fn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Ex=(e,t)=>Wa(e,e,mx(),t),wx=e=>Ex(e,jc),xx=e=>Ex(e,cp),SV=(e,t)=>Wa(e,e,mx(),Cx(t)),up=(e,t)=>Wa(e,e,rV(),t),qc=e=>up(e,jc),_V=e=>up(e,cp),kV=(e,t)=>Wa(e,e,px(t),vV()),xi=(e,t,n)=>Wa(e,e,px(t),n),Sx=(e,t)=>xi(e,t,EV),NV=(e,t)=>xi(e,t,jc),_x=(e,t,n)=>xi(e,t,xV(n)),fp=(e,t)=>xi(e,t,wV),dp=(e,t)=>xi(e,t,cp),AV=(e,t,n)=>xi(e,t,Cx(n)),TV=wx("type"),RV=xx("fetch"),mp=xx("onAction"),PV=dp("onSetup",()=>Oe),OV=qc("text"),DV=qc("icon"),BV=qc("tooltip"),IV=qc("label"),$V=fp("active",!1),FV=fp("enabled",!0),kx=fp("primary",!1),LV=e=>kV("columns",e),ja=e=>NV("type",e),MV=lp([TV,wx("ch"),Sx("minChars",1),LV(1),Sx("maxResults",10),_V("matches"),RV,mp,AV("highlightOn",[],jc)]),UV=e=>CV("Autocompleter",MV,e),pp=[FV,BV,DV,OV,PV],Nx=[$V].concat(pp),zV=[dp("predicate",pt),_x("scope","node",["node","editor"]),_x("position","selection",["node","selection","line"])],HV=pp.concat([ja("contextformbutton"),kx,mp,vx("original",wt)]),VV=Nx.concat([ja("contextformbutton"),kx,mp,vx("original",wt)]),WV=pp.concat([ja("contextformbutton")]),jV=Nx.concat([ja("contextformtogglebutton")]),qV=yx("type",{contextformbutton:HV,contextformtogglebutton:VV});lp([ja("contextform"),dp("initValue",K("")),IV,SV("commands",qV),up("launch",yx("type",{contextformbutton:WV,contextformtogglebutton:jV}))].concat(zV));const KV=e=>{const t=e.ui.registry.getAll().popups,n=Vi(t,i=>UV(i).fold(a=>{throw new Error(yV(a))},wt)),s=Bg(Wu(n,i=>i.ch)),o=ju(n);return{dataset:n,triggerChars:s,lookupByChar:i=>H(o,a=>a.ch===i)}},GV=(e,t)=>{const n=Rf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},YV=e=>{const t=No(),n=Ut(!1),s=t.isSet,o=()=>{s()&&(ZM(e),hO(e),n.set(!1),t.clear())},r=f=>{s()||(QM(e,f.range),t.set({triggerChar:f.triggerChar,matchLength:f.text.length}))},i=Ko(()=>KV(e)),a=f=>t.get().map(d=>ix(e.dom,e.selection.getRng(),d.triggerChar).bind(p=>cx(e,i,p,f))).getOrThunk(()=>H2(e,i)),c=f=>{a(f).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(C=>{const y=d.context;C.triggerChar===y.triggerChar&&(y.text.length-C.matchLength>=10?o():(t.set({...C,matchLength:y.text.length}),n.get()?gO(e,{lookupData:p}):(n.set(!0),pO(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(f,d)=>{const p=ft(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),GV(e,{cancelIfNecessary:o,load:c})},Ax=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Oe,inputType:n},i=yb(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},gp=Ax("input"),hp=Ax("beforeinput"),XV=(e,t,n)=>{const s=n.keyCode===pe.BACKSPACE?"deleteContentBackward":"deleteContentForward";Lw([{keyCode:pe.BACKSPACE,action:Pe(ww,e)},{keyCode:pe.BACKSPACE,action:Pe(Mm,e,!1)},{keyCode:pe.DELETE,action:Pe(Mm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe($m,e,!1)},{keyCode:pe.DELETE,action:Pe($m,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Gm,e,t,!1)},{keyCode:pe.DELETE,action:Pe(Gm,e,t,!0)},{keyCode:pe.BACKSPACE,action:Pe(jd,e,!1)},{keyCode:pe.DELETE,action:Pe(jd,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Um,e,!1)},{keyCode:pe.DELETE,action:Pe(Um,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Qm,e,!1)},{keyCode:pe.DELETE,action:Pe(Qm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Bm,e,!1)},{keyCode:pe.DELETE,action:Pe(Bm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Dm,e,!1)},{keyCode:pe.DELETE,action:Pe(Dm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Ym,e,!1)},{keyCode:pe.DELETE,action:Pe(Ym,e,!0)}],n).each(o=>{n.preventDefault(),hp(e,s).isDefaultPrevented()||(o(),gp(e,s))})},QV=(e,t)=>{Ha([{keyCode:pe.BACKSPACE,action:Pe(M0,e)},{keyCode:pe.DELETE,action:Pe(M0,e)}],t)},ZV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&XV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()===!1&&QV(e,n)})},JV=e=>{for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},qa=(e,t)=>{let n,s=t;const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=JV(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Xt),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new Dt(t,t);for(;n=a.current();){if(te(n)){i.setStart(n,0),i.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}s=n,n=a.next()}n||(i.setStart(s,0),i.setEnd(s,0))}else Tt(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),Aa(e,i)},eW=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},bp=e=>h.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),tW=e=>bp(e).fold(K(""),t=>t.nodeName.toUpperCase()),nW=e=>bp(e).filter(t=>sa(_.fromDom(t))).isSome(),sW=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,oW=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Tx=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,Rx=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),rW=e=>Rx(e)&&Rx(e.parentNode),Kc=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Gc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!we(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},iW=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng();if(n===e.getBody())return;rW(n)&&(o="LI");let a=t(o);if(Gc(n,s,!0)&&Gc(n,s,!1))if(Tx(n,"LI")){const c=Kc(n);r.insertAfter(a,c),oW(n)?r.remove(c):r.remove(n)}else r.replace(a,n);else if(Gc(n,s,!0))Tx(n,"LI")?(r.insertAfter(a,Kc(n)),a.appendChild(r.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),r.remove(s);else if(Gc(n,s,!1))r.insertAfter(a,Kc(n)),r.remove(s);else{n=Kc(n);const c=i.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&sW(f,"LI")?(a=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(a,n)),r.remove(s)}qa(e,a)},aW=e=>{T(tb(_.fromDom(e),Bn),t=>{const n=t.dom;n.nodeValue=xo(n.nodeValue)})},lW=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),cW=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),Cp=e=>{e.innerHTML='<br data-mce-bogus="1">'},yp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Px=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",uW=(e,t,n)=>{let s=n;const o=[];let r;if(!!s){for(;s=s.firstChild;){if(e.isBlock(s))return;we(s)&&!t[s.nodeName.toLowerCase()]&&o.push(s)}for(r=o.length;r--;)s=o[r],(!s.hasChildNodes()||s.firstChild===s.lastChild&&s.firstChild.nodeValue===""||lW(e,s))&&e.remove(s)}},vp=(e,t,n)=>te(t)===!1?n:e?n===1&&t.data.charAt(n-1)===jt?0:n:n===t.data.length-1&&t.data.charAt(n)===jt?t.data.length:n,fW=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,vp(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,vp(!1,e.endContainer,e.endOffset)),t},dW=e=>{do te(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},Ox=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},mW=(e,t,n)=>{const s=e.dom;h.from(n.style).map(s.parseStyle).each(c=>{const d={...$h(_.fromDom(t)),...c};s.setStyles(t,d)});const o=h.from(n.class).map(c=>c.split(/\s+/)),r=h.from(t.className).map(c=>H(c.split(/\s+/),f=>f!==""));vn(o,r,(c,f)=>{const d=H(f,C=>!R(c,C)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=Wi(n,(c,f)=>!R(i,f));s.setAttribs(t,a)},Ka=(e,t)=>{if(An(e).toLowerCase()===t.tagName.toLowerCase()){const s=ga(e);mW(e,t,s)}},pW=(e,t,n,s,o)=>{let r,i,a,c,f,d;const p=e.dom,C=Ox(p,s);if(i=p.getParent(s,p.isBlock),!i||!Px(p,i)){if(i=i||C,i===e.getBody()||cW(i)?d=i.nodeName.toLowerCase():d=i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return r=p.create(t),Ka(e,r),i.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(c=s;c.parentNode!==i;)c=c.parentNode;for(;c&&!p.isBlock(c);)a=c,c=c.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(r=p.create(t),Ka(e,r),a.parentNode.insertBefore(r,a),c=a;c&&!p.isBlock(c);)f=c.nextSibling,r.appendChild(c),c=f;n.setStart(s,o),n.setEnd(s,o)}}return s},gW=(e,t)=>{t.normalize();const n=t.lastChild;(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},hW=(e,t)=>{const n=z1(e);return It(t)?!1:me(n)?R(G.explode(n),t.nodeName.toLowerCase()):n},Dx={insert:(e,t)=>{let n,s,o,r,i,a,c,f,d;const p=e.dom,C=e.schema,y=C.getNonEmptyElements(),w=e.selection.getRng(),v=An(e),x=V=>{let j=s,X,J,ve;const ue=C.getTextInlineElements();if(V||f==="TABLE"||f==="HR"?X=p.create(V||v):X=r.cloneNode(!1),ve=X,U1(e)===!1)p.setAttrib(X,"style",null),p.setAttrib(X,"class",null);else do if(ue[j.nodeName]){if(Bs(j)||Mn(j))continue;J=j.cloneNode(!1),p.setAttrib(J,"id",""),X.hasChildNodes()?(J.appendChild(X.firstChild),X.appendChild(J)):(ve=J,X.appendChild(J))}while((j=j.parentNode)&&j!==U);return Ka(e,X),Cp(ve),X},S=V=>{let j,X;const J=vp(V,s,o);if(te(s)&&(V?J>0:J<s.nodeValue.length))return!1;if(s.parentNode===r&&d&&!V||V&&we(s)&&s===r.firstChild)return!0;if(yp(s,"TABLE")||yp(s,"HR"))return d&&!V||!d&&V;const ve=new Dt(s,r);for(te(s)&&(V&&J===0?ve.prev():!V&&J===s.nodeValue.length&&ve.next());j=ve.current();){if(we(j)){if(!j.getAttribute("data-mce-bogus")&&(X=j.nodeName.toLowerCase(),y[X]&&X!=="br"))return!1}else if(te(j)&&!or(j.nodeValue))return!1;V?ve.prev():ve.next()}return!0},P=()=>{/^(H[1-6]|PRE|FIGURE)$/.test(f)&&ie!=="HGROUP"?i=x(v):i=x(),hW(e,c)&&Px(p,c)&&p.isEmpty(r)?i=p.split(c,r):p.insertAfter(i,r),qa(e,i)};nc(p,w).each(V=>{w.setStart(V.startContainer,V.startOffset),w.setEnd(V.endContainer,V.endOffset)}),s=w.startContainer,o=w.startOffset;const O=!!(t&&t.shiftKey),$=!!(t&&t.ctrlKey);we(s)&&s.hasChildNodes()&&(d=o>s.childNodes.length-1,s=s.childNodes[Math.min(o,s.childNodes.length-1)]||s,d&&te(s)?o=s.nodeValue.length:o=0);const U=Ox(p,s);if(!U)return;O||(s=pW(e,v,w,s,o)),r=p.getParent(s,p.isBlock),c=r?p.getParent(r.parentNode,p.isBlock):null,f=r?r.nodeName.toUpperCase():"";const ie=c?c.nodeName.toUpperCase():"";if(ie==="LI"&&!$&&(r=c,c=c.parentNode,f=ie),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(r)){iW(e,x,c,r,v);return}r!==e.getBody()&&(Qr(r)?(i=bf(r),p.isEmpty(r)&&Cp(r),Ka(e,i),qa(e,i)):S()?P():S(!0)?(i=r.parentNode.insertBefore(x(),r),qa(e,yp(r,"HR")?i:r)):(n=fW(w).cloneRange(),n.setEndAfter(r),a=n.extractContents(),aW(a),dW(a),i=a.firstChild,p.insertAfter(a,r),uW(p,y,i),gW(p,r),p.isEmpty(r)&&Cp(r),i.normalize(),p.isEmpty(i)?(p.remove(i),P()):(Ka(e,i),qa(e,i))),p.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},fakeEventName:"insertParagraph"},bW=(e,t,n)=>{const s=new Dt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||o.length>0)return!0},Bx=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Aa(e,s)},CW=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i;nc(s,o).each(y=>{o.setStart(y.startContainer,y.startOffset),o.setEnd(y.endContainer,y.endOffset)});let a=o.startOffset,c=o.startContainer;if(c.nodeType===1&&c.hasChildNodes()){const y=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,y&&c.nodeType===3?a=c.nodeValue.length:a=0}let f=s.getParent(c,s.isBlock);const d=f?s.getParent(f.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",C=!!(t&&t.ctrlKey);p==="LI"&&!C&&(f=d),c&&c.nodeType===3&&a>=c.nodeValue.length&&(bW(e.schema,c,f)||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),If(s,o,r),Bx(e,r,i),e.undoManager.add()},yW=(e,t)=>{const n=_.fromTag("br");Qn(_.fromDom(t),n),e.undoManager.add()},vW=(e,t)=>{wW(e.getBody(),t)||Eo(_.fromDom(t),_.fromTag("br"));const n=_.fromTag("br");Eo(_.fromDom(t),n),Bx(e,n.dom,!1),e.undoManager.add()},EW=e=>Tt(e.getNode()),wW=(e,t)=>EW(F.after(t))?!0:Ln(e,F.after(t)).map(n=>Tt(n.getNode())).getOr(!1),Ix=e=>e&&e.nodeName==="A"&&"href"in e,xW=e=>e.fold(pt,Ix,Ix,pt),SW=e=>{const t=re(br,e),n=F.fromRangeStart(e.selection.getRng());return Ls(t,e.getBody(),n).filter(xW)},_W=(e,t)=>{t.fold(Oe,re(yW,e),re(vW,e),Oe)},$x={insert:(e,t)=>{const n=SW(e);n.isSome()?n.each(re(_W,e)):CW(e,t)},fakeEventName:"insertLineBreak"},Fx=(e,t)=>bp(e).filter(n=>t.length>0&&ks(_.fromDom(n),t)).isSome(),kW=e=>Fx(e,L1(e)),NW=e=>Fx(e,M1(e)),es=Ts.generate([{br:[]},{block:[]},{none:[]}]),AW=(e,t)=>NW(e),Lx=e=>(t,n)=>nW(t)===e,Mx=(e,t)=>(n,s)=>tW(n)===e.toUpperCase()===t,Yc=e=>Mx("pre",e),TW=()=>Mx("summary",!0),Xc=e=>(t,n)=>$1(t)===e,RW=(e,t)=>kW(e),Qc=(e,t)=>t,PW=e=>{const t=An(e),n=eW(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},ds=(e,t)=>(n,s)=>Q(e,(r,i)=>r&&i(n,s),!0)?h.some(t):h.none(),OW=(e,t)=>j0([ds([AW],es.none()),ds([TW()],es.br()),ds([Yc(!0),Xc(!1),Qc],es.br()),ds([Yc(!0),Xc(!1)],es.block()),ds([Yc(!0),Xc(!0),Qc],es.block()),ds([Yc(!0),Xc(!0)],es.br()),ds([Lx(!0),Qc],es.br()),ds([Lx(!0)],es.block()),ds([RW],es.br()),ds([Qc],es.br()),ds([PW],es.block())],[e,!!(t&&t.shiftKey)]).getOr(es.none()),Zc=(e,t,n)=>{t.selection.isCollapsed()||$d(t),!(ke(n)&&hp(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),ke(n)&&gp(t,e.fakeEventName))},Ux=(e,t)=>{const n=()=>Zc($x,e,t),s=()=>Zc(Dx,e,t),o=OW(e,t);switch(F1(e)){case"linebreak":o.fold(n,n,Oe);break;case"block":o.fold(s,s,Oe);break;case"invert":o.fold(s,n,Oe);break;default:o.fold(n,s,Oe);break}},DW=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),cM(e.undoManager),e.undoManager.transact(()=>{Ux(e,t)}))},BW=e=>{e.on("keydown",t=>{t.keyCode===pe.ENTER&&DW(e,t)})},IW=(e,t,n)=>{const s=Qe.os.isMacOS()||Qe.os.isiOS();Ha([{keyCode:pe.END,action:Pe(Bw,e,!0)},{keyCode:pe.HOME,action:Pe(Bw,e,!1)},...s?[]:[{keyCode:pe.HOME,action:Pe(Mc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:pe.END,action:Pe(Mc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:pe.END,action:Pe(zw,e,!0)},{keyCode:pe.HOME,action:Pe(zw,e,!1)},{keyCode:pe.END,action:Pe(Lc,e,!0,t)},{keyCode:pe.HOME,action:Pe(Lc,e,!1,t)}],n).each(o=>{n.preventDefault()})},$W=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&IW(e,t,n)})},FW=e=>{e.on("input",t=>{t.isComposing===!1&&WB(e)})},LW=Go(),MW=(e,t,n)=>{Ha([{keyCode:pe.PAGE_UP,action:Pe(Lc,e,!1,t)},{keyCode:pe.PAGE_DOWN,action:Pe(Lc,e,!0,t)}],n)},zx=e=>e.stopImmediatePropagation(),Hx=e=>e.keyCode===pe.PAGE_UP||e.keyCode===pe.PAGE_DOWN,Vx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",zx,!0):!n&&e.get()&&t.off("NodeChange",zx),e.set(n)},UW=(e,t)=>{if(LW.os.isMacOS())return;const n=Ut(!1);e.on("keydown",s=>{Hx(s)&&Vx(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()===!1&&MW(e,t,s),Hx(s)&&n.get()&&(Vx(n,e,!1),e.nodeChanged())})},Wx=(e,t)=>{const n=t.container(),s=t.offset();return te(n)?(n.insertData(s,e),h.some(F(n,s+e.length))):zl(t).map(o=>{const r=_.fromText(e);return t.isAtEnd()?Eo(o,r):Qn(o,r),F(r.dom,e.length)})},zW=re(Wx,Xt),HW=re(Wx," "),VW=e=>t=>t.fold(n=>is(e.dom,F.before(n)),n=>dn(n),n=>Ds(n),n=>Ln(e.dom,F.after(n))),WW=(e,t)=>n=>$B(e,n)?zW(t):HW(t),jW=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),qW=e=>{const t=F.fromRangeStart(e.selection.getRng()),n=_.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(br,e),o=F.fromRangeStart(e.selection.getRng());return Ls(s,e.getBody(),o).bind(VW(n)).map(r=>()=>WW(n,t)(r).each(jW(e)))}else return h.none()},KW=(e,t)=>{Lw([{keyCode:pe.SPACEBAR,action:Pe(qW,e)}],t).each(n=>{t.preventDefault(),hp(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),gp(e,"insertText",{data:" "}))})},GW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&KW(e,t)})},YW=e=>VR(e)?[{keyCode:pe.TAB,action:Pe(nx,e,!0)},{keyCode:pe.TAB,shiftKey:!0,action:Pe(nx,e,!1)}]:[],XW=(e,t)=>{Ha([...YW(e)],t).each(n=>{t.preventDefault()})},QW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&XW(e,t)})},ZW=e=>{if(e.addShortcut("Meta+P","","mcePrint"),YV(e),ro(e))return Ut(null);{const t=o3(e);return L3(e),P2(e,t),ZV(e,t),BW(e),GW(e),FW(e),QW(e),$W(e,t),UW(e,t),t}};class JW{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!pd(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||Zl(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Zl(t)&&(t.selection.getNode().nodeName==="IMG"?Un.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t){const n=this.editor.selection;let s,o,r;this.editor.initialized&&n&&!gR(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),s=n.getStart(!0)||r,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,r))&&(s=r),o=[],this.editor.dom.getParent(s,i=>{if(i===r)return!0;o.push(i)}),t=t||{},t.element=s,t.parents=o,this.editor.dispatch("NodeChange",t))}isSameElementPath(t){let n;const s=this.editor,o=it(s.dom.getParents(t,ct,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const jx="x-tinymce/html",Jc=K(jx),Ep="<!-- "+jx+" -->",e6=e=>Ep+e,t6=e=>e.replace(Ep,""),qx=e=>e.indexOf(Ep)!==-1,n6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),s6=(e,t)=>{let n="<"+e;const s=Wu(t,(o,r)=>r+'="'+So.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},o6=(e,t,n)=>{const s=e.split(/\n\n/),o=s6(t,n),r="</"+t+">",i=z(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:z(i,a).join("")},Kx="%MCEPASTEBIN%",r6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Kx);Qe.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},i6=(e,t)=>{const n=e.dom;if(wp(e)){let s;const o=t.get();for(;s=wp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},wp=e=>e.dom.get("mcepastebin"),a6=e=>e&&e.id==="mcepastebin",l6=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=H(e.getBody().childNodes,a6);T(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},Gx=e=>e===Kx,c6=e=>{const t=Ut(null);return{create:()=>r6(e,t),remove:()=>i6(e,t),getEl:()=>wp(e),getHtml:()=>l6(e),getLastRng:t.get}},Yx=(e,t)=>(G.each(t,n=>{Dn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),u6=e=>{const t=ko(),n=Ci({},t);let s="";const o=t.getVoidElements(),r=G.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,d=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())&&(c=c.firstChild))do a(c);while(c=c.next);i[f]&&d.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=Yx(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},Xx=e=>(e=Yx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Xt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),f6=e=>{let t=0;return()=>e+t++},d6=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(n,t)?"image/"+n[t]:"image/"+t},m6=(e,t)=>{const n=Ci({},e.schema);n.addNodeFilter("meta",o=>{G.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Po({validate:!0},e.schema).serialize(s)},Qx=(e,t)=>({content:e,cancelled:t}),p6=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=CO(e,s,n);return Qx(o.node.innerHTML,o.isDefaultPrevented())},g6=(e,t,n)=>{const s=bO(e,t,n),o=m6(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?p6(e,o,n):Qx(o,s.isDefaultPrevented())},h6=(e,t,n)=>g6(e,t,n),xp=(e,t)=>(e.insertContent(t,{merge:DR(e),paste:!0}),!0),Sp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),b6=(e,t)=>Sp(t)&&M(wC(e),n=>Ug(t.toLowerCase(),`.${n.toLowerCase()}`)),C6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),y6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),v6=(e,t,n)=>!e.selection.isCollapsed()&&Sp(t)?y6(e,t,n):!1,E6=(e,t,n)=>b6(e,t)?C6(e,t,n):!1,w6=(e,t)=>{G.each([v6,E6,xp],n=>n(e,t,xp)!==!0)},x6=(e,t,n)=>{n||!BR(e)?xp(e,t):w6(e,t)},S6=f6("mceclip"),Zx=(e,t,n,s)=>{const o=h6(e,t,n);o.cancelled===!1&&x6(e,o.content,s)},eu=(e,t,n)=>{const s=n||qx(t);Zx(e,t6(t),s,!1)},_p=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=ub(n,$R(e)),o=o6(s,An(e),ga(e));Zx(e,o,!1,!0)},Jx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Si=(e,t)=>t in e&&e[t].length>0,eS=e=>Si(e,"text/html")||Si(e,"text/plain"),_6=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ke(n)?e.dom.encode(n[1]):null},k6=(e,t,n,s)=>{const o=S6(),r=fC(e)&&ke(n.name),i=r?_6(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},N6=(e,t)=>{vm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),f=c!=null?c:k6(e,a,i,r);eu(e,`<img src="${f.blobUri()}">`,!1)})},A6=e=>e.type==="paste",T6=e=>Promise.all(z(e,t=>BE(t).then(n=>({file:t,uri:n})))),R6=e=>{const t=wC(e);return n=>Kt(n.type,"image/")&&M(t,s=>d6(s)===n.type)},P6=(e,t)=>{const n=t.items?We(ht(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?ht(t.files):[];return H(n.length>0?n:s,R6(e))},tS=(e,t,n)=>{const s=A6(t)?t.clipboardData:t.dataTransfer;if(Ml(e)&&s){const o=P6(e,s);if(o.length>0)return t.preventDefault(),T6(o).then(r=>{n&&e.selection.setRng(n),T(r,i=>{N6(e,i)})}),!0}return!1},O6=e=>{var t,n;return Qe.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},D6=e=>pe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,nS=(e,t,n,s)=>{let o=Xx(n);const r=Si(t,Jc())||qx(n),i=!r&&n6(o),a=Sp(o);(Gx(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(Si(t,"text/plain")&&i?o=t["text/plain"]:o=u6(o)),!Gx(o)&&(s?_p(e,o):eu(e,o,r))},B6=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{D6(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||O6(r))return;const i=n.get()==="text"||s;s=!1;const a=Jx(r.clipboardData);!eS(a)&&tS(e,r,o())||(Si(a,"text/html")?(r.preventDefault(),nS(e,a,a["text/html"],i)):(t.create(),Un.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),nS(e,a,c,i)},0)))})},I6=e=>{const t=o=>Kt(o,"webkit-fake-url"),n=o=>Kt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Ml(e)&&s(i))for(const a of o){const c=a.attr("src");me(c)&&!a.attr("data-mce-object")&&c!==Qe.transparentSrc&&(t(c)||!FR(e)&&n(c))&&a.remove()}})},$6=(e,t,n)=>{B6(e,t,n),I6(e)},F6=(e,t)=>{t.get()==="text"?(t.set("html"),wy(e,!1)):(t.set("text"),wy(e,!0)),e.focus()},L6=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{F6(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&eu(e,s.html,s.internal),s.text&&_p(e,s.text)})},M6=(e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Jc(),t),!0}catch{return!1}},sS=(e,t,n,s)=>{M6(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},oS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Un.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},rS=e=>({html:e6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),U6=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),iS=e=>!e.selection.isCollapsed()||U6(e),z6=e=>t=>{!t.isDefaultPrevented()&&iS(e)&&sS(t,rS(e),oS(e),()=>{if(Qe.browser.isChromium()||Qe.browser.isFirefox()){const n=e.selection.getRng();Un.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},H6=e=>t=>{!t.isDefaultPrevented()&&iS(e)&&sS(t,rS(e),oS(e),Oe)},V6=e=>{e.on("cut",z6(e)),e.on("copy",H6(e))},aS=(e,t)=>{var n,s;return pi.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},W6=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},lS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},j6=e=>M(e.files,t=>/^image\//.test(t.type)),q6=(e,t)=>{AR(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Ml(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&j6(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=aS(e,n);if(It(s))return;const o=Jx(n.dataTransfer),r=Si(o,Jc());if((!eS(o)||W6(o))&&tS(e,n,s))return;const i=o[Jc()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Un.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),lS(e,s);const c=Xx(a);o["text/html"]?eu(e,c,r):_p(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Ml(e)&&t.get()===!1&&(n.preventDefault(),lS(e,aS(e,n))),n.type==="dragend"&&t.set(!1)})},K6=e=>{const t=o=>r=>{o(e,r)},n=TR(e);Ge(n)&&e.on("PastePreProcess",t(n));const s=RR(e);Ge(s)&&e.on("PastePostProcess",t(s))},G6=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Y6=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,cS=e=>G.trim(e).replace(Y6,Kl).toLowerCase(),X6=(e,t,n)=>{const s=PR(e);if(n||s==="all"||!OR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,d)=>{const p=r.parseStyle(r.decode(f)),C={};for(let w=0;w<o.length;w++){const v=p[o[w]];let x=v,S=r.getStyle(i,o[w],!0);/color/.test(o[w])&&(x=cS(x),S=cS(S)),S!==x&&(C[o[w]]=v)}const y=r.serializeStyle(C,"span");return y?c+' style="'+y+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},Q6=e=>{(Qe.browser.isChromium()||Qe.browser.isSafari())&&G6(e,X6)},Z6=e=>{const t=Ut(!1),n=Ut(IR(e)?"text":"html"),s=c6(e);Q6(e),L6(e,n),K6(e),e.on("PreInit",()=>{V6(e),q6(e,t),$6(e,s,n)})},J6=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},ej=e=>{e.parser.addNodeFilter("details",t=>{T(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{T(t,n=>{const s=n.attr("data-mce-open");n.attr("open",me(s)?s:null),n.attr("data-mce-open",null)})})},tj=e=>{J6(e),ej(e)},nj=Tt,uS=te,sj=e=>vt(e.dom),oj=e=>ns(e.dom),fS=e=>t=>st(_.fromDom(e),t),rj=(e,t)=>Gr(_.fromDom(e),n=>oj(n)||ss(n),fS(t)).getOr(_.fromDom(t)).dom,dS=(e,t)=>Gr(_.fromDom(e),sj,fS(t)),mS=(e,t,n)=>{const s=new Dt(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!nj(i);i=o())Jn(i)&&(r=i);return r},ij=(e,t)=>{const s=F.fromRangeStart(e).getNode(),o=rj(s,t),r=mS(s,o,!1),i=mS(s,o,!0),a=document.createRange();return dS(r,o).fold(()=>{uS(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),dS(i,o).fold(()=>{uS(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a},aj=e=>{const t=ij(e.selection.getRng(),e.getBody());e.selection.setRng(Xd(t))},lj=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),aj(e))})};var Ga;(function(e){e.Before="before",e.After="after"})(Ga||(Ga={}));const cj=(e,t)=>Math.abs(e.left-t),uj=(e,t)=>Math.abs(e.right-t),fj=(e,t)=>e>=t.top&&e<=t.bottom,dj=(e,t)=>e.top<t.bottom&&e.bottom>t.top,mj=(e,t)=>{const n=YT(e,t)/Math.min(e.height,t.height);return dj(e,t)&&n>.5},pj=(e,t)=>{const n=H(e,s=>fj(t,s));return GT(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=be(e,i=>mj(i,s));return[o,r]})},gj=(e,t)=>({node:e.node,position:cj(e,t)<uj(e,t)?Ga.Before:Ga.After}),hj=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),kp=(e,t,n)=>{const s=d=>Jn(d.node)?h.some(d):we(d.node)?kp(ht(d.node.childNodes),t,n):h.none(),o=(d,p)=>{if(d.length>=2){const C=s(d[0]).getOr(d[0]),y=s(d[1]).getOr(d[1]);if(Math.abs(p(C,t,n)-p(y,t,n))<2){if(te(C.node))return h.some(C);if(te(y.node))return h.some(y)}}return h.none()},r=(d,p)=>{const C=Kn(d,(y,w)=>p(y,t,n)-p(w,t,n));return o(C,p).orThunk(()=>en(C,s))},[i,a]=pj(ow(e),n),{pass:c,fail:f}=be(a,d=>d.top<n);return r(i,hj).orThunk(()=>r(f,Ib)).orThunk(()=>r(c,Ib))},bj=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>kp(ht(r.dom.childNodes),n,s),a=>{const c=H(ht(r.dom.childNodes),f=>f!==a.dom);return kp(c,n,s)}).orThunk(()=>(st(r,e)?h.none():FN(r)).bind(c=>o(c,h.some(r))));return o(t,h.none())},Cj=(e,t,n)=>{const s=_.fromDom(e),o=vo(s),i=_.fromPoint(o,t,n).filter(a=>eo(s,a)).getOr(s);return bj(s,i,t,n)},yj=(e,t,n)=>Cj(e,t,n).filter(s=>Ca(s.node)).map(s=>gj(s,t)),pS=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-s.clientTop,left:t.left+o.pageXOffset-s.clientLeft}},vj=e=>e.inline?pS(e.getBody()):{left:0,top:0},Ej=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},wj=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},xj=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=pS(e.getContentAreaContainer()),s=wj(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},Sj=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),_j=(e,t)=>Sj(vj(e),Ej(e),xj(e,t)),Np=vt,kj=ns,Nj=(e,t)=>Np(t)&&t!==e,Aj=(e,t,n)=>t===n||e.dom.isChildOf(t,n)?!1:!Np(t),Tj=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},Rj=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},Pj=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Oj=(e,t,n,s,o,r)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(i=t.pageX+n-o),t.pageY+s>r&&(a=t.pageY+s-r),e.style.width=n-i+"px",e.style.height=s-a+"px"},gS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Dj=e=>e.button===0,Bj=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Ij=(e,t)=>n=>{if(Dj(n)){const s=ge(t.dom.getParents(n.target),JT(Np,kj)).getOr(null);if(Nj(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:Rj(t,s,s.offsetWidth,s.offsetHeight)})}}},$j=(e,t)=>{const n=Dl((s,o)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(s,o)},0);return t.on("remove",n.cancel),s=>e.on(o=>{const r=Math.max(Math.abs(s.screenX-o.screenX),Math.abs(s.screenY-o.screenY));if(!o.dragging&&r>10){if(t.dispatch("dragstart",{target:o.element}).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){const i=Bj(o,_j(t,s));Pj(o.ghost,t.getBody()),Oj(o.ghost,i,o.width,o.height,o.maxX,o.maxY),n.throttle(s.clientX,s.clientY)}})},Fj=e=>{const n=e.getSel().getRangeAt(0).startContainer;return n.nodeType===3?n.parentNode:n},Lj=(e,t)=>n=>{e.on(s=>{if(s.dragging){if(Aj(t,Fj(t.selection),s.element)){const o=Tj(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{gS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),hS(e)},Mj=(e,t)=>()=>{e.on(n=>{n.dragging&&t.dispatch("dragend")}),hS(e)},hS=e=>{e.on(t=>{gS(t.ghost)}),e.clear()},Uj=e=>{const t=No(),n=at.DOM,s=document,o=Ij(t,e),r=$j(t,e),i=Lj(t,e),a=Mj(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===pe.ESC&&a()})},zj=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(R(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Rc(e,"Dropped file type is not supported"))}},n=o=>{rc(e,o.target)&&t(o)},s=()=>{const o=at.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];T(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{T(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Un.setEditorTimeout(e,s,0)})},Hj=e=>{Uj(e),CR(e)&&zj(e)},Vj=e=>{const t=Dl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Im(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Wj=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(As(n)){const s=gi(e.getBody(),n),o=vt(s)?s:n;e.selection.getNode()!==o&&La(e,o).each(r=>e.selection.setRng(r))}})})},_i=vt,Ap=(e,t)=>gi(e.getBody(),t),jj=e=>{const t=e.selection,n=e.dom,s=n.isBlock,o=e.getBody(),r=tP(e,o,s,()=>gr(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let c;const f=j=>n.hasClass(j,"mce-offscreen-selection"),d=j=>j!==o&&(_i(j)||As(j))&&n.isChildOf(j,o),p=j=>{j&&t.setRng(j)},C=(j,X,J,ve=!0)=>e.dispatch("ShowCaret",{target:X,direction:j,before:J}).isDefaultPrevented()?null:(ve&&t.scrollIntoView(X,j===-1),r.show(J,X)),y=j=>{j.hasAttribute("data-mce-caret")&&(bf(j),t.scrollIntoView(j))},w=()=>{e.on("click",X=>{const J=Ap(e,X.target);J&&_i(J)&&(X.preventDefault(),e.focus())}),e.on("blur NewBlock",U),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",X=>{const J=X.target,ve=Ap(e,J);_i(ve)?(X.preventDefault(),La(e,ve).each($)):d(J)&&La(e,J).each($)},!0),e.on("mousedown",X=>{const J=X.target;if(J!==o&&J.nodeName!=="HTML"&&!n.isChildOf(J,o)||WU(e,X.clientX,X.clientY)===!1)return;U(),V();const ve=Ap(e,J);_i(ve)?(X.preventDefault(),La(e,ve).each($)):yj(o,X.clientX,X.clientY).each(ue=>{X.preventDefault();const se=C(1,ue.node,ue.position===Ga.Before,!1);p(se),we(ve)?ve.focus():e.getBody().focus()})}),e.on("keypress",X=>{pe.modifierPressed(X)||_i(t.getNode())&&X.preventDefault()}),e.on("GetSelectionRange",X=>{let J=X.range;if(c){if(!c.parentNode){c=null;return}J=J.cloneRange(),J.selectNode(c),X.range=J}}),e.on("SetSelectionRange",X=>{X.range=S(X.range);const J=$(X.range,X.forward);J&&(X.range=J)});const j=X=>X.id==="mcepastebin";e.on("AfterSetSelectionRange",X=>{const J=X.range,ve=J.startContainer.parentNode;!x(J)&&!j(ve)&&V(),f(ve)||U()}),Hj(e),Vj(e),Wj(e)},v=j=>$n(j)||kl(j)||Nl(j),x=j=>v(j.startContainer)||v(j.endContainer),S=j=>{const X=e.schema.getVoidElements(),J=n.createRng(),ve=j.startContainer,ue=j.startOffset,se=j.endContainer,ze=j.endOffset;return Ie(X,ve.nodeName.toLowerCase())?ue===0?J.setStartBefore(ve):J.setStartAfter(ve):J.setStart(ve,ue),Ie(X,se.nodeName.toLowerCase())?ze===0?J.setEndBefore(se):J.setEndAfter(se):J.setEnd(se,ze),J},P=(j,X)=>{const J=_.fromDom(e.getBody()),ve=e.getDoc(),ue=na(J,"#"+i).getOrThunk(()=>{const je=_.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ve);return Wt(je,"id",i),Lt(J,je),je}),se=n.createRng();ea(ue),Zo(ue,[_.fromText(Xt,ve),_.fromDom(X),_.fromText(Xt,ve)]),se.setStart(ue.dom.firstChild,1),se.setEnd(ue.dom.lastChild,0),bl(ue,{top:n.getPos(j,e.getBody()).y+"px"}),Hy(ue);const ze=t.getSel();return ze.removeAllRanges(),ze.addRange(se),se},O=j=>{const X=j.cloneNode(!0),J=e.dispatch("ObjectSelected",{target:j,targetClone:X});if(J.isDefaultPrevented())return null;const ve=P(j,J.targetClone),ue=_.fromDom(j);return T(En(_.fromDom(e.getBody()),`*[${a}]`),se=>{st(ue,se)||Gt(se,a)}),n.getAttrib(j,a)||j.setAttribute(a,"1"),c=j,V(),ve},$=(j,X)=>{if(!j)return null;if(j.collapsed){if(!x(j)){const se=X?1:-1,ze=wa(se,o,j),je=ze.getNode(!X);if(Ca(je))return C(se,je,X?!ze.isAtEnd():!1,!1);const Je=ze.getNode(X);if(Ca(Je))return C(se,Je,X?!1:!ze.isAtEnd(),!1)}return null}let J=j.startContainer,ve=j.startOffset;const ue=j.endOffset;if(J.nodeType===3&&ve===0&&_i(J.parentNode)&&(J=J.parentNode,ve=n.nodeIndex(J),J=J.parentNode),J.nodeType!==1)return null;if(ue===ve+1&&J===j.endContainer){const se=J.childNodes[ve];if(d(se))return O(se)}return null},U=()=>{c&&c.removeAttribute(a),na(_.fromDom(e.getBody()),"#"+i).each(_t),c=null},ie=()=>{r.destroy(),c=null},V=()=>{r.hide()};return ro(e)||w(),{showCaret:C,showBlockCaretContainer:y,hideFakeCaret:V,destroy:ie}},bS=(e,t,n)=>{if(te(t)&&(n<0||n>t.data.length))return[];const s=[n];let o=t;for(;o!==e&&o.parentNode;){const r=o.parentNode;for(let i=0;i<r.childNodes.length;i++)if(r.childNodes[i]===o){s.push(i);break}o=r}return o===e?s.reverse():[]},Tp=(e,t,n,s,o)=>{const r=bS(e,t,n),i=bS(e,s,o);return{start:r,end:i}},CS=(e,t)=>{const n=t.slice(),s=n.pop();return Q(n,(r,i)=>r.bind(a=>h.from(a.childNodes[i])),h.some(e)).bind(r=>te(r)&&(s<0||s>r.data.length)?h.none():h.some({node:r,offset:s}))},yS=(e,t)=>CS(e,t.start).bind(({node:n,offset:s})=>CS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),qj=(e,t)=>Tp(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset),ki=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),ki(e,s,n)}},tu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(te(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),te(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),ki(e,o,n),o!==r&&ki(e,r,n))},Rp=(e,t)=>h.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),vS=(e,t,n)=>{D2(t,0,t).each(o=>{const r=o.container;sx(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),tu(e,a,c=>c===t)})})},Kj=(e,t)=>{const n=e.dom,s=t.pattern,o=yS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return Nt(c)&&Ft(c).exists(f=>Ie(f,"block"))};return Rp(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{vS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{vS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},Gj=(e,t)=>{const n=t.replace(Xt," ");return ge(e,s=>t.indexOf(s.start)===0||n.indexOf(s.start)===0)},Yj=(e,t)=>{const n=e.dom,s=e.selection.getRng();return Rp(e,s).filter(o=>{const r=An(e),i=n.is(o,r);return o!==null&&i}).bind(o=>{const r=o.textContent;return Gj(t,r).map(a=>G.trim(r).length===a.start.length?[]:[{pattern:a,range:Tp(n.getRoot(),o,0,o,0)}])}).getOr([])},Xj=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();T(t,s=>Kj(e,s)),e.selection.moveToBookmark(n)},ES=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),nu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},wS=(e,t,n)=>{const s=yS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset);return{prefix:t,end:i.parentNode.insertBefore(ES(e,t+"-end"),i),start:a.parentNode.insertBefore(ES(e,t+"-start"),a)}},xS=(e,t,n)=>{ki(e,e.get(t.prefix+"-end"),n),ki(e,e.get(t.prefix+"-start"),n)},Pp=e=>e.start.length===0,Qj=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},SS=(e,t,n,s)=>{const o=t.start;return sp(e,s.container,s.offset,Qj(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),h.some(a)}else{const a=i.offset-o.length;return np(i.container,a,n).map(c=>{const f=e.createRng();return f.setStart(c.container,c.offset),f.setEnd(i.container,i.offset),f}).filter(c=>c.toString()===o).orThunk(()=>SS(e,t,n,us(i.container,0)))}})},Zj=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),h.some(i)}return tp(n,s,o).bind(i=>SS(e,t,o,i).bind(c=>{if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return h.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return h.none()}return h.some(c)}))},Jj=(e,t,n)=>{const s=e.dom,o=s.getRoot(),r=n.pattern,i=n.position.container,a=n.position.offset;return np(i,a-n.pattern.end.length,t).bind(c=>{const f=Tp(o,c.container,c.offset,i,a);if(Pp(r))return h.some({matches:[{pattern:r,startRng:f,endRng:f}],position:c});{const d=_S(e,n.remainingPatterns,c.container,c.offset,t),p=d.getOr({matches:[],position:c}),C=p.position;return Zj(s,r,C.container,C.offset,t,d.isNone()).map(w=>{const v=qj(o,w);return{matches:p.matches.concat([{pattern:r,startRng:v,endRng:f}]),position:us(w.startContainer,w.startOffset)}})}})},_S=(e,t,n,s,o)=>{const r=e.dom;return tp(n,s,r.getRoot()).bind(i=>{const a=r.createRng();a.setStart(o,0),a.setEnd(n,s);const c=a.toString();for(let f=0;f<t.length;f++){const d=t[f];if(!Ug(c,d.end))continue;const p=t.slice();p.splice(f,1);const C=Jj(e,o,{pattern:d,remainingPatterns:p,position:i});if(C.isSome())return C}return h.none()})},kS=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?T(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},e8=(e,t,n,s)=>{const o=nu(e.dom,n);tu(e.dom,o,s),kS(e,t,o)},t8=(e,t,n,s,o)=>{const r=e.dom,i=nu(r,s),a=nu(r,n);tu(r,a,o),tu(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=nu(r,c);kS(e,t,f)},n8=(e,t)=>{const n=Tb("mce_textpattern"),s=de(t,(o,r)=>{const i=wS(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return de(s,(o,r)=>{const i=s.length-o.length-1,a=Pp(r.pattern)?r.endMarker:wS(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:a}])},[])},NS=(e,t,n)=>{const s=e.selection.getRng();return s.collapsed===!1?[]:Rp(e,s).bind(o=>{const r=Math.max(0,s.startOffset-(n?1:0));return _S(e,t,s.startContainer,r,o)}).fold(()=>[],o=>o.matches)},AS=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=n8(n,t);T(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Pp(r.pattern)?e8(e,r.pattern,r.endMarker,a):t8(e,r.pattern,r.startMarker,r.endMarker,a),xS(n,r.endMarker,a),xS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},s8=e=>e.inlinePatterns.length>0||e.blockPatterns.length>0,o8=(e,t)=>{if(!e.selection.isCollapsed()||!s8(t))return!1;const n=NS(e,t.inlinePatterns,!1),s=Yj(e,t.blockPatterns);return s.length>0||n.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(oa),AS(e,n),Xj(e,s);const o=e.selection.getRng(),r=tp(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===oa&&(a.deleteData(i.offset-1,1),ki(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0):!1},TS=(e,t)=>{if(t.length>0){const n=NS(e,t,!0);n.length>0&&e.undoManager.transact(()=>{AS(e,n)})}},RS=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},r8=(e,t)=>RS(e,t,(n,s)=>n===s.keyCode&&pe.modifierPressed(s)===!1),i8=(e,t)=>RS(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),a8=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>k1(vC(e)),o=()=>rC(vC(e));e.on("keydown",r=>{r.keyCode===13&&!pe.modifierPressed(r)&&o8(e,s())&&r.preventDefault()},!0),e.on("keyup",r=>{r8(n,r)&&TS(e,o())}),e.on("keypress",r=>{i8(t,r)&&Un.setEditorTimeout(e,()=>{TS(e,o())})})},l8=e=>{a8(e)},c8=e=>{const t=G.each,n=pe.BACKSPACE,s=pe.DELETE,o=e.dom,r=e.selection,i=e.parser,a=Qe.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),d=Qe.deviceType.isiPhone()||Qe.deviceType.isiPad(),p=Qe.os.isMacOS()||Qe.os.isiOS(),C=(ne,Ee)=>{try{e.getDoc().execCommand(ne,!1,Ee)}catch{}},y=ne=>ne.isDefaultPrevented(),w=()=>{const ne=fe=>{const ee=o.create("body"),Be=fe.cloneContents();return ee.appendChild(Be),r.serializer.serialize(ee,{format:"html"})},Ee=fe=>{const ee=ne(fe),Be=o.createRng();Be.selectNode(e.getBody());const Le=ne(Be);return ee===Le};e.on("keydown",fe=>{const ee=fe.keyCode;let Be,Le;if(!y(fe)&&(ee===s||ee===n)){if(Be=e.selection.isCollapsed(),Le=e.getBody(),Be&&!o.isEmpty(Le)||!Be&&!Ee(e.selection.getRng()))return;fe.preventDefault(),e.setContent(""),Le.firstChild&&o.isBlock(Le.firstChild)?e.selection.setCursorLocation(Le.firstChild,0):e.selection.setCursorLocation(Le,0),e.nodeChanged()}})},v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},x=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",ne=>{let Ee;if(ne.target===e.getDoc().documentElement)if(Ee=r.getRng(),e.getBody().focus(),ne.type==="mousedown"){if($n(Ee.startContainer))return;r.placeCaretAt(ne.clientX,ne.clientY)}else r.setRng(Ee)})},S=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const Ee=r.getNode(),fe=Ee.previousSibling;if(Ee.nodeName==="HR"){o.remove(Ee),ne.preventDefault();return}fe&&fe.nodeName&&fe.nodeName.toLowerCase()==="hr"&&(o.remove(fe),ne.preventDefault())}}})},P=()=>{Range.prototype.getClientRects||e.on("mousedown",ne=>{if(!y(ne)&&ne.target.nodeName==="HTML"){const Ee=e.getBody();Ee.blur(),Un.setEditorTimeout(e,()=>{Ee.focus()})}})},O=()=>{const ne=yC(e);e.on("click",Ee=>{const fe=Ee.target;/^(IMG|HR)$/.test(fe.nodeName)&&o.getContentEditableParent(fe)!=="false"&&(Ee.preventDefault(),e.selection.select(fe),e.nodeChanged()),fe.nodeName==="A"&&o.hasClass(fe,ne)&&fe.childNodes.length===0&&(Ee.preventDefault(),r.select(fe))})},$=()=>{const ne=()=>{const fe=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const ee=r.getStart();ee!==e.getBody()&&(o.setAttrib(ee,"style",null),t(fe,Be=>{ee.setAttributeNode(Be.cloneNode(!0))}))}},Ee=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",fe=>{let ee;if(!y(fe)&&(fe.keyCode===8||fe.keyCode===46)&&Ee())return ee=ne(),e.getDoc().execCommand("delete",!1,null),ee(),fe.preventDefault(),!1}),o.bind(e.getDoc(),"cut",fe=>{let ee;!y(fe)&&Ee()&&(ee=ne(),Un.setEditorTimeout(e,()=>{ee()}))})},U=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const Ee=r.getNode().previousSibling;if(Ee&&Ee.nodeName&&Ee.nodeName.toLowerCase()==="table")return ne.preventDefault(),!1}})},ie=()=>{e.on("keydown",ne=>{let Ee,fe;if(y(ne)||ne.keyCode!==pe.BACKSPACE)return;Ee=r.getRng();const ee=Ee.startContainer,Be=Ee.startOffset,Le=o.getRoot();if(fe=ee,!(!Ee.collapsed||Be!==0)){for(;fe&&fe.parentNode&&fe.parentNode.firstChild===fe&&fe.parentNode!==Le;)fe=fe.parentNode;fe.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,fe),Ee=o.createRng(),Ee.setStart(ee,0),Ee.setEnd(ee,0),r.setRng(Ee))}})},V=()=>{const ne=()=>{C("StyleWithCSS",!1),C("enableInlineTableEditing",!1),hC(e)||C("enableObjectResizing",!1)};CC(e)||e.on("BeforeExecCommand mousedown",ne)},j=()=>{const ne=()=>{t(o.select("a"),Ee=>{let fe=Ee.parentNode;const ee=o.getRoot();if(fe.lastChild===Ee){for(;fe&&!o.isBlock(fe);){if(fe.parentNode.lastChild!==fe||fe===ee)return;fe=fe.parentNode}o.add(fe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ee=>{(Ee.type==="setcontent"||Ee.command==="mceInsertLink")&&ne()})},X=()=>{e.on("init",()=>{C("DefaultParagraphSeparator",An(e))})},J=ne=>{const Ee=ne.getBody(),fe=ne.selection.getRng();return fe.startContainer===fe.endContainer&&fe.startContainer===Ee&&fe.startOffset===0&&fe.endOffset===Ee.childNodes.length},ve=()=>{e.on("keyup focusin mouseup",ne=>{!pe.modifierPressed(ne)&&!J(e)&&r.normalize()},!0)},ue=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},se=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ze=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ne=>{let Ee;ne.target.nodeName==="HTML"&&(Ee=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ee),e.selection.normalize(),e.nodeChanged())}))},je=()=>{p&&e.on("keydown",ne=>{pe.metaKeyPressed(ne)&&!ne.shiftKey&&(ne.keyCode===37||ne.keyCode===39)&&(ne.preventDefault(),e.selection.getSel().modify("move",ne.keyCode===37?"backward":"forward","lineboundary"))})},Je=()=>{e.on("click",ne=>{let Ee=ne.target;do if(Ee.tagName==="A"){ne.preventDefault();return}while(Ee=Ee.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Rt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ne=>{ne.preventDefault()})})},Y=()=>{i.addNodeFilter("br",ne=>{let Ee=ne.length;for(;Ee--;)ne[Ee].attr("class")==="Apple-interchange-newline"&&ne[Ee].remove()})},he=Oe,$e=()=>{if(!c||e.removed)return!1;const ne=e.selection.getSel();return!ne||!ne.rangeCount||ne.rangeCount===0},De=()=>{f&&(x(),O(),Rt(),v(),d&&(se(),ze(),Je())),c&&(P(),V(),ue(),je())},Bt=()=>{ie(),w(),Qe.windowsPhone||ve(),f&&(x(),O(),X(),Rt(),U(),Y(),d?(se(),ze(),Je()):v()),c&&(S(),P(),$(),V(),j(),ue(),je(),U())};return ro(e)?De():Bt(),{refreshContentEditable:he,isHidden:$e}},Op=at.DOM,u8=(e,t)=>{const n=_.fromDom(e.getBody()),s=nf(Qo(n)),o=_.fromTag("style");Wt(o,"type","text/css"),Lt(o,_.fromText(t)),Lt(s,o),e.on("remove",()=>{_t(o)})},f8=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Dp=e=>Wi(e,t=>At(t)===!1),PS=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Dp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:f8(e),validate:!0,blob_cache:n,document:e.getDoc()})},OS=e=>{const t=e.options.get;return Dp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},d8=e=>{const t=e.options.get;return{...PS(e),...OS(e),...Dp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},m8=e=>{const t=Ci(PS(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let o=n.length,r,i;const a=e.dom,c="data-mce-"+s;for(;o--;)if(r=n[o],i=r.attr(s),i&&!r.attr(c)){if(i.indexOf("data:")===0||i.indexOf("blob:")===0)continue;s==="style"?(i=a.serializeStyle(a.parseStyle(i),r.name),i.length||(i=null),r.attr(c,i),r.attr(s,i)):s==="tabindex"?(r.attr(c,i),r.attr(s,null)):r.attr(c,e.convertURL(i,s,r.name))}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const o=n[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new mn("br",1))}}),t},p8=e=>{const t=_R(e);t&&Un.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n.destroyed||n.focus()},100)},g8=e=>{const t=e.dom.getRoot();!e.inline&&(!Zl(e)||e.selection.getStart(!0)===t)&&dn(t).each(n=>{const s=n.getNode(),o=qr(s)?dn(s).getOr(n):n;e.selection.setRng(o.toRange())})},h8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,uO(e),e.focus(!0),g8(e),e.nodeChanged({initial:!0});const t=xR(e);Ge(t)&&t.call(e,e),p8(e)},DS=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,b8=(e,t,n)=>{const s=[DS(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},BS=e=>{const t=DS(e),n=gC(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";G.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(b8(e,s,n)).then(r).catch(r),a=Z1(e);return a&&u8(e,a),i},C8=e=>{const t=e.getDoc(),n=e.getBody();lO(e),kR(e)||(t.body.spellcheck=!1,Op.setAttrib(n,"spellcheck","false")),e.quirks=c8(e),cO(e);const s=J1(e);s!==void 0&&(n.dir=s);const o=NR(e);o&&e.on("BeforeSetContent",r=>{G.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},y8=e=>{ro(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Bp=e=>{e.removed!==!0&&(y8(e),h8(e))},IS=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Op.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=CC(e),e.readonly||(e.inline&&Op.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=hz(e),e.schema=ko(OS(e)),e.dom=at(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:G1(e),referrerPolicy:Uf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=m8(e),e.serializer=f0(d8(e),e),e.selection=u0(e.dom,e.getWin(),e.serializer,e),e.annotator=hy(e),e.formatter=x0(e),e.undoManager=_0(e),e._nodeChangeDispatcher=new JW(e),e._selectionOverrides=jj(e),N3(e),tj(e),I3(e),ro(e)||(lj(e),l8(e));const o=ZW(e);S3(e,o),O3(e),Pz(e),Z6(e);const r=_M(e);C8(e),r.fold(()=>{BS(e).then(()=>Bp(e))},i=>{e.setProgressState(!0),BS(e).then(()=>{i().then(a=>{e.setProgressState(!1),Bp(e),r0(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Bp(e),r0(e)})})})},$S=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=az(_.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,IS(e)});if(Qe.browser.isFirefox()){const o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close()}else n.srcdoc=e.iframeHTML}else IS(e)},su=at.DOM,v8=(e,t,n,s)=>{const o=_.fromTag("iframe");return s.each(r=>Wt(o,"tabindex",r)),yo(o,n),yo(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Xi(o,"tox-edit-area__iframe"),o},E8=e=>{let t=D1(e)+"<html><head>";lC(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=B1(e),s=I1(e),o=e.translate(ER(e));return cC(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+cC(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},w8=(e,t)=>{const n=e.translate("Rich Text Area"),s=Vr(_.fromDom(e.getElement()),"tabindex").bind(aN),o=v8(e.id,n,O1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=E8(e),su.add(t.iframeContainer,o)},x8=(e,t)=>{w8(e,t),t.editorContainer&&(su.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=su.isHidden(t.editorContainer)),e.getElement().style.display="none",su.setAttrib(e.id,"aria-hidden","true"),$S(e)},FS=at.DOM,S8=(e,t,n)=>{const s=vi.get(n),o=vi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=G.trim(n),s&&G.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ge(r.init)&&(r.init(e,o),t.push(n))}catch(r){tz(e,n,r)}}},_8=e=>e.replace(/^\-/,""),k8=e=>{const t=[];T(Ll(e),n=>{S8(e,t,_8(n))})},N8=e=>{const t=G.trim(dC(e)),n=e.ui.registry.getAll().icons,s={...Tc.get("default").icons,...Tc.get(t).icons};bt(s,(o,r)=>{Ie(n,r)||e.ui.registry.addIcon(r,o)})},A8=e=>{const t=ri(e);if(me(t)){const n=vr.get(t);e.theme=n(e,vr.urls[t])||{},Ge(e.theme.init)&&e.theme.init(e,vr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},T8=e=>{const t=zf(e),n=yi.get(t);e.model=n(e,yi.urls[t])},R8=e=>e.theme.renderUI(),P8=e=>{const t=e.getElement(),s=ri(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},LS=e=>({editorContainer:e,iframeContainer:e,api:{}}),O8=e=>{const t=FS.create("div");return FS.insertAfter(t,e),LS(t)},D8=e=>{const t=e.getElement();return e.inline?LS(null):O8(t)},B8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,me(ri(e))?R8(e):Ge(ri(e))?P8(e):D8(e)},I8=(e,t)=>{const n={show:h.from(t.show).getOr(Oe),hide:h.from(t.hide).getOr(Oe),isEnabled:h.from(t.isEnabled).getOr(ct),setEnabled:s=>{e.mode.isReadOnly()||h.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},$8=e=>{e.dispatch("ScriptsLoaded"),N8(e),A8(e),T8(e),k8(e);const t=B8(e);I8(e,h.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,rz(e),e.inline?$S(e):x8(e,n)},Er=at.DOM,MS=e=>e.charAt(0)==="-",F8=(e,t)=>{const n=mC(t),s=Y1(t);if(os.hasCode(n)===!1&&n!=="en"){const o=Zs(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{ZU(t,o,n)})}},L8=(e,t)=>{const n=ri(e);if(me(n)&&!MS(n)&&!Ie(vr.urls,n)){const s=oR(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;vr.load(n,o).catch(()=>{JU(e,o,n)})}},M8=(e,t)=>{const n=zf(e);if(n!=="plugin"&&!Ie(yi.urls,n)){const s=rR(e),o=me(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;yi.load(n,o).catch(()=>{ez(e,o,n)})}},U8=e=>h.from(V1(e)).filter(Zs).map(t=>({url:t,name:h.none()})),US=(e,t,n)=>h.from(t).filter(s=>Zs(s)&&!Tc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:h.some(s)})),z8=(e,t,n)=>{const s=US(t,"default",n),o=U8(t).orThunk(()=>US(t,dC(t),""));T(EN([s,o]),r=>{e.add(r.url).catch(()=>{QU(t,r.url,r.name.getOrUndefined())})})},H8=(e,t)=>{const n=(s,o)=>{vi.load(s,o).catch(()=>{XU(e,o,s)})};bt(bR(e),(s,o)=>{n(o,s),e.options.set("plugins",Ll(e).concat(o))}),T(Ll(e),s=>{s=G.trim(s),s&&!vi.urls[s]&&!MS(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},V8=e=>{const t=ri(e);return!me(t)||ke(vr.get(t))},W8=e=>{const t=zf(e);return ke(yi.get(t))},j8=(e,t)=>{const n=to.ScriptLoader,s=()=>{!e.removed&&V8(e)&&W8(e)&&$8(e)};L8(e,t),M8(e,t),F8(n,e),z8(n,e,t),H8(e,t),n.loadQueue().then(s,s)},q8=(e,t)=>Zh.forElement(e,{contentCssCors:hR(t),referrerPolicy:Uf(t)}),K8=e=>{const t=e.id;os.setCode(mC(e));const n=()=>{Er.unbind(window,"ready",n),e.render()};if(!ir.Event.domLoaded){Er.bind(window,"ready",n);return}if(!e.getElement())return;const s=_.fromDom(e.getElement()),o=bh(s);e.on("remove",()=>{ce(s.dom.attributes,i=>Gt(s,i.name)),yo(s,o)}),e.ui.styleSheetLoader=q8(s,e),Hf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Er.getParent(t,"form");r&&(e.formElement=r,uR(e)&&!af(e.getElement())&&(Er.insertAfter(Er.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Er.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),fR(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=g0(e),e.notificationManager=p0(e),HR(e)&&e.on("GetContent",i=>{i.save&&(i.content=Er.encode(i.content))}),dR(e)&&e.on("submit",()=>{e.initialized&&e.save()}),mR(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),j8(e,e.suffix)},G8=(e,t)=>({sections:K(e),options:K(t)}),zS=Go().deviceType,HS=zS.isPhone(),Y8=zS.isTablet(),Ya=e=>{if(It(e))return[];{const t=Nt(e)?e:e.split(/[ ,]/),n=z(t,zr);return H(n,Zs)}},X8=(e,t)=>{const n=Kk(t,(s,o)=>R(e,o));return G8(n.t,n.f)},Q8=(e,t,n={})=>{const s=e.sections(),o=ut(s,t).getOr({});return G.extend({},n,o)},Ip=(e,t)=>Ie(e.sections(),t),Z8=(e,t)=>Ip(e,t)?e.sections()[t]:{},J8=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ut(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),e5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,s):s},t5=(e,t)=>[].concat(Ya(e)).concat(Ya(t)),n5=(e,t,n,s)=>e&&Ip(t,"mobile")?s:n,s5=(e,t,n,s)=>{const o=Ya(n.forced_plugins),r=Ya(s.plugins),i=Z8(t,"mobile"),a=i.plugins?Ya(i.plugins):r,c=n5(e,t,r,a),f=t5(o,c);return G.extend(s,{forced_plugins:o,plugins:f})},o5=(e,t)=>e&&Ip(t,"mobile"),r5=(e,t,n,s,o)=>{var r;const i=e?{mobile:J8((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=X8(["mobile"],Vc(i,o)),c=G.extend(n,s,a.options(),o5(e,a)?Q8(a,"mobile"):{},{external_plugins:e5(s,a.options())});return s5(e,a,s,c)},i5=(e,t)=>r5(HS||Y8,HS,t,e,t),a5=(e,t)=>XM(e,t),l5=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{T("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},c5=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return M(o,r=>ke(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},u5=e=>{l5(e),c5(e)},f5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Qe.os.isMacOS()||Qe.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},d5=(e,t,n)=>{const s=_.fromDom(e.getRoot());return lc(s,F.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),cc(s,F.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},m5=e=>{if(typeof e!="string"){const t=G.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},p5=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?d5(s,n.getRng(),t):t},ou=(e,t)=>{const{content:n,details:s}=m5(t);wm(e,{content:p5(e,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(o=>{const r=GM(e,o.content,s);xm(e,r,o),e.addVisual()})},g5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{ou(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{ou(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{ou(e,s)},mceInsertContent:(t,n,s)=>{ou(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},h5={"font-size":"size","font-family":"face"},b5=(e,t,n)=>{const s=r=>Cl(r,e).orThunk(()=>yt(r)==="font"?ut(h5,e).bind(i=>Vr(r,i)):h.none()),o=r=>st(_.fromDom(t),r);return em(_.fromDom(n),r=>s(r),o)},C5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),y5=(e,t)=>h.from(at.DOM.getStyle(t,e,!0)),VS=e=>(t,n)=>h.from(n).map(_.fromDom).filter(Yn).bind(s=>b5(e,t,s.dom).or(y5(e,s.dom))).getOr(""),v5=VS("font-size"),E5=Ot(C5,VS("font-family")),w5=e=>dn(e.getBody()).map(t=>{const n=t.container();return te(n)?n.parentNode:n}),x5=e=>h.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?h.none():h.from(e.selection.getStart(!0))}),S5=(e,t)=>x5(e).orThunk(re(w5,e)).map(_.fromDom).filter(Yn).bind(t),$p=(e,t)=>S5(e,St(h.some,t)),WS=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=UR(e),o=zR(e);return o?o[n-1]||t:s[n-1]||t}else return t}else return t},_5=e=>{const t=e.split(/\s*,\s*/);return z(t,n=>n.indexOf(" ")!==-1&&!(Kt(n,'"')||Kt(n,"'"))?`'${n}'`:n).join(",")},k5=(e,t)=>{const n=WS(e,t);e.formatter.toggle("fontname",{value:_5(n)}),e.nodeChanged()},N5=e=>$p(e,t=>E5(e.getBody(),t.dom)).getOr(""),A5=(e,t)=>{e.formatter.toggle("fontsize",{value:WS(e,t)}),e.nodeChanged()},T5=e=>$p(e,t=>v5(e.getBody(),t.dom)).getOr(""),R5=e=>$p(e,t=>{const n=_.fromDom(e.getBody()),s=em(t,r=>Cl(r,"line-height"),re(st,n)),o=()=>{const r=parseFloat(Ns(t,"line-height")),i=parseFloat(Ns(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),P5=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},O5=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{k5(e,o)},FontSize:(n,s,o)=>{A5(e,o)},LineHeight:(n,s,o)=>{P5(e,o)},Lang:(n,s,o)=>{t(n,{value:o.code,customValue:o.customCode})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(me(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},D5=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>N5(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>T5(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>R5(e))},B5=e=>{O5(e),D5(e)},I5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},$5=e=>{e.editorCommands.addCommands({Indent:()=>{E3(e)},Outdent:()=>{Ew(e)}}),e.editorCommands.addCommands({Outdent:()=>bw(e)},"state")},F5=e=>{const t=(n,s,o)=>{const r=me(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ft(r)&&me(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},L5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},M5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},U5=e=>{L5(e),M5(e)},z5=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Zc(Dx,e)},mceInsertNewLine:(t,n,s)=>{Ux(e,s)},InsertLineBreak:(t,n,s)=>{Zc($x,e)}})},H5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>{if(r.nodeType===1&&o++===s)return e.selection.select(r),!1},e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),ns);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},V5=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{qD(e,s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},W5=e=>{u5(e),f5(e),I5(e),H5(e),g5(e),F5(e),$5(e),z5(e),U5(e),B5(e),V5(e)};class jS{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():xD(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ge(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ge(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ge(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;bt(t,(o,r)=>{T(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const wr="data-mce-contenteditable",j5=(e,t,n)=>{ef(e,t)&&n===!1?gl(e,t):n&&Xi(e,t)},Fp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},ru=(e,t)=>{e.dom.contentEditable=t?"true":"false"},q5=e=>{T(En(e,'*[contenteditable="true"]'),t=>{Wt(t,wr,"true"),ru(t,!1)})},K5=e=>{T(En(e,`*[${wr}="true"]`),t=>{Gt(t,wr),ru(t,!0)})},G5=e=>{h.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},Y5=e=>{e.selection.setRng(e.selection.getRng())},X5=(e,t)=>{const n=_.fromDom(e.getBody());j5(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),G5(e),e.readonly=!0,ru(n,!1),q5(n)):(e.readonly=!1,ru(n,!0),K5(n),Fp(e,"StyleWithCSS",!1),Fp(e,"enableInlineTableEditing",!1),Fp(e,"enableObjectResizing",!1),WD(e)&&e.focus(),Y5(e),e.nodeChanged())},xr=e=>e.readonly,qS=e=>{e.parser.addAttributeFilter("contenteditable",t=>{xr(e)&&T(t,n=>{n.attr(wr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(wr,t=>{xr(e)&&T(t,n=>{n.attr("contenteditable",n.attr(wr))})}),e.serializer.addTempAttr(wr)},Q5=e=>{e.serializer?qS(e):e.on("PreInit",()=>{qS(e)})},Z5=e=>e.type==="click",J5=["copy"],e4=e=>R(J5,e.type),t4=(e,t)=>nr(t,"a",s=>st(s,_.fromDom(e.getBody()))).bind(s=>Vr(s,"href")),n4=(e,t)=>{if(Z5(t)&&!pe.metaKeyPressed(t)){const n=_.fromDom(t.target);t4(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${oN(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else e4(t)&&e.dispatch(t.type,t)},s4=e=>{e.on("ShowCaret",t=>{xr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{xr(e)&&t.preventDefault()})},o4=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Lp{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pt}static isNative(t){return!!o4[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=_f(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=pt),n){const r={func:n,removed:!1};o&&G.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return bt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=be(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,T(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else bt(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){return t=t.toLowerCase(),!(!this.bindings[t]||this.bindings[t].length===0)}}const Xa=e=>(e._eventDispatcher||(e._eventDispatcher=new Lp({scope:e,toggleEvent:(t,n)=>{Lp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Mp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return _f(e.toLowerCase(),t!=null?t:{},s);const o=Xa(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent()}return o},on(e,t,n){return Xa(this).on(e,t,n)},off(e,t){return Xa(this).off(e,t)},once(e,t){return Xa(this).once(e,t)},hasEventListeners(e){return Xa(this).has(e)}},iu=at.DOM;let Sr;const au=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=bC(e);return n?(e.eventRoot||(e.eventRoot=iu.select(n)[0]),e.eventRoot):e.getBody()},r4=e=>!e.hidden&&!xr(e),KS=(e,t,n)=>{r4(e)?e.dispatch(t,n):xr(e)&&n4(e,n)},GS=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const s=au(e,t);if(bC(e)){if(Sr||(Sr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Sr&&(bt(Sr,(o,r)=>{e.dom.unbind(au(e,r))}),Sr=null)})),Sr[t])return;n=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||iu.isChildOf(r,c))&&KS(i[a],t,o)}},Sr[t]=n,iu.bind(s,t,n)}else n=o=>{KS(e,t,o)},iu.bind(s,t,n),e.delegates[t]=n},YS={...Mp,bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{GS(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?GS(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(au(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(bt(e.delegates,(s,o)=>{e.dom.unbind(au(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},i4=e=>me(e)?{value:e.split(/[ ,]/),valid:!0}:Xs(e,me)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},a4=e=>{const t=(()=>{switch(e){case"array":return Nt;case"boolean":return qn;case"function":return Ge;case"number":return Cn;case"object":return ft;case"string":return me;case"string[]":return i4;case"object[]":return n=>Xs(n,ft);case"regexp":return n=>Dn(n,RegExp)}})();return n=>Up(n,t,`The value must be a ${e}.`)},l4=e=>me(e.processor),XS=(e,t)=>{const n=ml(t.message)?"":`. ${t.message}`;return e+n},QS=e=>e.valid,Up=(e,t,n="")=>{const s=t(e);return qn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},c4=(e,t,n)=>{if(!At(t)){const s=Up(t,n);if(QS(s))return s.value;console.error(XS(`Invalid default value passed for the "${e}" option`,s))}},u4=(e,t)=>{const n={},s={},o=(p,C,y)=>{const w=Up(C,y);return QS(w)?(s[p]=w.value,!0):(console.warn(XS(`Invalid value passed for the ${p} option`,w)),!1)},r=(p,C)=>{const y=l4(C)?a4(C.processor):C.processor,w=c4(p,C.default,y);n[p]={...C,default:w,processor:y},ut(s,p).orThunk(()=>ut(t,p)).each(x=>o(p,x,y))},i=p=>Ie(n,p);return{register:r,isRegistered:i,get:p=>ut(s,p).orThunk(()=>ut(n,p).map(C=>C.default)).getOrUndefined(),set:(p,C)=>{if(i(p)){const y=n[p];return y.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,C,y.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const C=i(p);return C&&delete s[p],C},isSet:p=>Ie(s,p)}},f4=["design","readonly"],ZS=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&X5(e,r.editorReadOnly),t.set(s),rO(e,s)},d4=(e,t,n,s)=>{if(s!==n.get()){if(!Ie(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?ZS(e,n,t,s):e.on("init",()=>ZS(e,n,t,s))}},m4=(e,t,n)=>{if(R(f4,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},p4=e=>{const t=Ut("design"),n=Ut({design:{activate:Oe,deactivate:Oe,editorReadOnly:!1},readonly:{activate:Oe,deactivate:Oe,editorReadOnly:!0}});return Q5(e),s4(e),{isReadOnly:()=>xr(e),set:s=>d4(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(m4(n.get(),s,o))}}},zp=G.each,Hp=G.explode,g4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},JS=G.makeMap("alt,ctrl,shift,meta,access"),h4=e=>{let t;const n={},s=Qe.os.isMacOS()||Qe.os.isiOS();zp(Hp(e.toLowerCase(),"+"),r=>{r in JS?n[r]=!0:/^[0-9]{2,}$/.test(r)?n.keyCode=parseInt(r,10):(n.charCode=r.charCodeAt(0),n.keyCode=g4[r]||r.toUpperCase().charCodeAt(0))});const o=[n.keyCode];for(t in JS)n[t]?o.push(t):n[t]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class e_{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(zp(n.shortcuts,o=>{if(n.matchShortcut(s,o))return n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return zp(Hp(G.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:G.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=G.map(Hp(t,">"),h4);return r[r.length-1]=G.extend(r[r.length-1],{func:s,scope:o||this.editor}),G.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const b4=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(f,d)=>(p,C)=>f[p.toLowerCase()]={...C,type:d},c=(f,d)=>s[f.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},C4=()=>{const e=b4();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},_r=at.DOM,t_=G.extend,y4=G.each;class lu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,t_(this,YS);const o=this;this.id=t,this.hidden=!1;const r=i5(s.defaultOptions,n);this.options=u4(o,r),P1(o);const i=this.options.get;i("deprecation_warnings")&&PU(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=Uf(o);f&&(to.ScriptLoader._setReferrerPolicy(f),at.DOM.styleSheetLoader._setReferrerPolicy(f)),nn.languageLoad=i("language_load"),nn.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new cs(lC(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Hf(o),this.shortcuts=new e_(this),this.editorCommands=new jS(this),W5(this);const d=i("cache_suffix");d&&(Qe.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:C4(),styleSheetLoader:void 0,show:Oe,hide:Oe,setEnabled:Oe,isEnabled:ct},this.mode=p4(o),s.dispatch("SetupEditor",{editor:this});const p=wR(o);Ge(p)&&p.call(o,o)}render(){K8(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return gr(this)}translate(t){return os.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(ke(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:ct,default:n})),!o.isSet(t)&&!At(n)?n:o.get(t)}hasPlugin(t,n){return R(Ll(this),t)?n?vi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(_r.show(t.getContainer()),_r.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(_r.hide(t.getContainer()),_r.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t){const n=this;let s=n.getElement(),o;if(n.removed)return"";if(s){t=t||{},t.load=!0;const r=af(s)?s.value:s.innerHTML;return o=n.setContent(r,t),t.element=s,t.no_events||n.dispatch("LoadContent",t),t.element=s=null,o}}save(t){const n=this;let s=n.getElement(),o,r;if(!(!s||!n.initialized||n.removed))return t=t||{},t.save=!0,t.element=s,o=t.content=n.getContent(t),t.no_events||n.dispatch("SaveContent",t),t.format==="raw"&&n.dispatch("RawSaveContent",t),o=t.content,af(s)?s.value=o:((t.is_removing||!n.inline)&&(s.innerHTML=o),(r=_r.getParent(n.id,"form"))&&y4(r.elements,i=>{if(i.name===n.id)return i.value=o,!1})),t.element=s=null,t.set_dirty!==!1&&n.setDirty(!1),o}setContent(t,n){return Pm(this,t,n)}getContent(t){return xU(this,t)}insertContent(t,n){n&&(t=t_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Pm(this,this.startContent,{format:"raw"}):Pm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=_r.get(t.editorContainer||t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=_r.get(this.id)),this.targetElm}getWin(){const t=this;let n;return t.contentWindow||(n=t.iframeElement,n&&(t.contentWindow=n.contentWindow)),t.contentWindow}getDoc(){const t=this;let n;return t.contentDocument||(n=t.getWin(),n&&(t.contentDocument=n.document)),t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement||(t?t.body:null)}convertURL(t,n,s){const o=this,r=o.options.get,i=SR(o);return Ge(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){a5(this,t)}remove(){IU(this)}destroy(t){$U(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ni=at.DOM,cu=G.each;let n_=!1,uu,pn=[];const fu=e=>{const t=e.type;cu(Fo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},s_=e=>{if(e!==n_){const t=at.DOM;e?(t.bind(window,"resize",fu),t.bind(window,"scroll",fu)):(t.unbind(window,"resize",fu),t.unbind(window,"scroll",fu)),n_=e}},o_=e=>{const t=pn;return pn=H(pn,n=>e!==n),Fo.activeEditor===e&&(Fo.activeEditor=pn.length>0?pn[0]:null),Fo.focusedEditor===e&&(Fo.focusedEditor=null),t.length!==pn.length},v4=e=>(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(o_(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e),E4=document.compatMode!=="CSS1Compat",Fo={...Mp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"1.2",releaseDate:"2022-07-29",i18n:os,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,s="";n=cs.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,s=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(s=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(s=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new cs(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new cs(e.baseURL),e.suffix=s,$D(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&bt(s,(o,r)=>{nn.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=ut(d,"name").filter(C=>!Ni.get(C)).getOrThunk(Ni.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>Qe.browser.isIE()||Qe.browser.isEdge()?(Pc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):E4?(Pc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):me(d.selector)?Ni.select(d.selector):ke(d.target)?[d.target]:[];let c=d=>{n=d};const f=()=>{let d=0;const p=[];let C;const y=(w,v,x)=>{const S=new lu(w,v,t);p.push(S),S.on("init",()=>{++d===C.length&&c(p)}),S.targetElm=S.targetElm||x,S.render()};Ni.unbind(window,"ready",f),i("onpageload"),C=fl(a(e)),G.each(C,w=>{v4(t.get(w.id))}),C=G.grep(C,w=>!t.get(w.id)),C.length===0?c([]):cu(C,w=>{o(e,w)?Pc("Could not initialize inline editor on invalid inline target element",w):y(r(w),e,w)})};return Ni.bind(window,"ready",f),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?pn.slice(0):me(e)?ge(pn,t=>t.id===e).getOr(null):Cn(e)&&pn[e]?pn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&pn.push(e),s_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),uu||(uu=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",uu))),e},createEditor(e,t){return this.add(new lu(e,t,this))},remove(e){const t=this;let n,s;if(!e){for(n=pn.length-1;n>=0;n--)t.remove(pn[n]);return}if(me(e)){cu(Ni.select(e),o=>{s=t.get(o.id),s&&t.remove(s)});return}return s=e,Ys(t.get(s.id))?null:(o_(s)&&t.dispatch("RemoveEditor",{editor:s}),pn.length===0&&window.removeEventListener("beforeunload",uu),s.remove(),s_(pn.length>0),s)},execCommand(e,t,n){var s;const o=this,r=ft(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new lu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{cu(pn,e=>{e.save()})},addI18n:(e,t)=>{os.add(e,t)},translate:e=>os.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new cs(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new cs(this.baseURL)}};Fo.setup();const w4=(()=>{const e=No(),t=r=>({items:r,types:Gn(r),getType:i=>ut(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),r_=Math.min,Ai=Math.max,du=Math.round,i_=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=du(c/2)),f[1]==="c"&&(s+=du(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=du(i/2)),f[4]==="c"&&(s-=du(r/2)),Ti(s,o,r,i)},x4=(e,t,n,s)=>{let o,r;for(r=0;r<s.length;r++)if(o=i_(e,t,s[r]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[r];return null},S4=(e,t,n)=>Ti(e.x-t,e.y-n,e.w+t*2,e.h+n*2),_4=(e,t)=>{const n=Ai(e.x,t.x),s=Ai(e.y,t.y),o=r_(e.x+e.w,t.x+t.w),r=r_(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Ti(n,s,o-n,r-s)},k4=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Ai(0,t.x-s),d=Ai(0,t.y-o),p=Ai(0,r-a),C=Ai(0,i-c);return s+=f,o+=d,n&&(r+=f,i+=d,s-=p,o-=C),r-=p,i-=C,Ti(s,o,r-s,i-o)},Ti=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),N4={inflate:S4,relativePosition:i_,findBestRelativePosition:x4,intersect:_4,clamp:k4,create:Ti,fromClientRect:e=>Ti(e.left,e.top,e.width,e.height)},A4=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,d))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},T4=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((d,p)=>{const C=A4(d,p);t[r]=C.resolve,to.ScriptLoader.loadScript(i).then(()=>C.start(c),()=>C.reject(a))});return e[r]=f,f}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),R4=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Qa;try{const e="__storage_test__";Qa=window.localStorage,Qa.setItem(e,e),Qa.removeItem(e)}catch{Qa=R4()}var P4=Qa;const O4={geom:{Rect:N4},util:{Delay:Un,Tools:G,VK:pe,URI:cs,EventDispatcher:Lp,Observable:Mp,I18n:os,LocalStorage:P4,ImageUploader:gz},dom:{EventUtils:ir,TreeWalker:Dt,TextSeeker:lr,DOMUtils:at,ScriptLoader:to,RangeUtils:pi,Serializer:f0,StyleSheetLoader:Qh,ControlSelection:Sy,BookmarkManager:ka,Selection:u0,Event:ir.Event},html:{Styles:Sf,Entities:So,Node:mn,Schema:ko,DomParser:Ci,Writer:av,Serializer:Po},Env:Qe,AddOnManager:nn,Annotator:hy,Formatter:x0,UndoManager:_0,EditorCommands:jS,WindowManager:g0,NotificationManager:p0,EditorObservable:YS,Shortcuts:e_,Editor:lu,FocusManager:Ky,EditorManager:Fo,DOM:at.DOM,ScriptLoader:to.ScriptLoader,PluginManager:vi,ThemeManager:vr,ModelManager:yi,IconManager:Tc,Resource:T4,FakeClipboard:w4,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},a_=G.extend(Fo,O4),D4=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(a_),D4(a_)})()})(Vk);const Zp=Vk.exports,E7=yk({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.1.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,u){const m=k9(null);let g=null,b={};function E(){if(m.value){b=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample code | ltr rtl"},l.config);const oe=l.baseUrl,ye="zh_CN",Ne="en_US";if(b.language===Ne?(delete b.language,delete b.language_url):(b.language||(b.language=ye),!b.language_url&&b.language===ye&&(b.language_url=`${oe}/@panhezeng/vue-tinymce@latest/dist/langs/${b.language}.js`),!b.font_formats&&b.language===ye&&(b.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(b.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(b.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${b.font_formats||""}`,b.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(b.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),b.external_plugins||(b.external_plugins={}),!b.external_plugins.textindentoutdent){const Me=Object.keys(b);for(let mt=Me.length-1;mt>=0;mt--){const Ct=Me[mt];if(Ct&&typeof Ct=="string"&&Ct.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(b[Ct]))){b.language===ye&&(b.external_plugins.textindentoutdentzhcn=`${oe}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),b.external_plugins.textindentoutdent=`${oe}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}b.target=m.value,b.init_instance_callback=Me=>{m.value&&(g=Me,N(),g.on(l.updateEvent,D),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(g))}}}function N(){xu().then(()=>{m.value&&g&&g.getContent()!==l.modelValue&&g.setContent(l.modelValue)})}function D(){xu().then(()=>{if(m.value&&g){const oe=g.getContent();u.emit("update:modelValue",oe),u.emit("content-change",oe)}})}function L(){try{m.value&&g&&(g.plugins.autosave&&g.plugins.autosave.removeDraft(),Zp.PluginManager.remove("autosave"),g.remove(),g.destroy(),g=null)}catch{return}}function Z(){xu().then(()=>{m.value&&(L(),E(),Zp.init(b))})}return sl(()=>l.modelValue,N),sl(()=>l.config,()=>{Z()},{deep:!0}),wk(()=>{Zp.EditorManager.baseURL=l.url,Z()}),xk(()=>{L()}),{editorElement:m}}}),w7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m},x7={class:"vue-tinymce-comp"},S7={ref:"editorElement"};function _7(l,u,m,g,b,E){return Pu(),$k("div",x7,[ts("textarea",S7,null,512)])}const Jp=w7(E7,[["render",_7]]),k7=Object.assign(Jp,{install:l=>{l.component(Jp.name,Jp)}}),Wk=l7(v7);Wk.use(k7);Wk.mount("#app");
