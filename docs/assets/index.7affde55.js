var Xj=Object.defineProperty,Qj=Object.defineProperties;var Zj=Object.getOwnPropertyDescriptors;var cu=Object.getOwnPropertySymbols;var zw=Object.prototype.hasOwnProperty,Hw=Object.prototype.propertyIsEnumerable;var Uw=(l,u,m)=>u in l?Xj(l,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[u]=m,_e=(l,u)=>{for(var m in u||(u={}))zw.call(u,m)&&Uw(l,m,u[m]);if(cu)for(var m of cu(u))Hw.call(u,m)&&Uw(l,m,u[m]);return l},ft=(l,u)=>Qj(l,Zj(u));var Vw=(l,u)=>{var m={};for(var g in l)zw.call(l,g)&&u.indexOf(g)<0&&(m[g]=l[g]);if(l!=null&&cu)for(var g of cu(l))u.indexOf(g)<0&&Hw.call(l,g)&&(m[g]=l[g]);return m};const Jj=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))g(h);new MutationObserver(h=>{for(const E of h)if(E.type==="childList")for(const T of E.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&g(T)}).observe(document,{childList:!0,subtree:!0});function m(h){const E={};return h.integrity&&(E.integrity=h.integrity),h.referrerpolicy&&(E.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?E.credentials="include":h.crossorigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function g(h){if(h.ep)return;h.ep=!0;const E=m(h);fetch(h.href,E)}};Jj();function eg(l,u){const m=Object.create(null),g=l.split(",");for(let h=0;h<g.length;h++)m[g[h]]=!0;return u?h=>!!m[h.toLowerCase()]:h=>!!m[h]}const e4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",t4=eg(e4);function b_(l){return!!l||l===""}function tg(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++){const g=l[m],h=ln(g)?o4(g):tg(g);if(h)for(const E in h)u[E]=h[E]}return u}else{if(ln(l))return l;if(cn(l))return l}}const n4=/;(?![^(]*\))/g,s4=/:(.+)/;function o4(l){const u={};return l.split(n4).forEach(m=>{if(m){const g=m.split(s4);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function ng(l){let u="";if(ln(l))u=l;else if(Qe(l))for(let m=0;m<l.length;m++){const g=ng(l[m]);g&&(u+=g+" ")}else if(cn(l))for(const m in l)l[m]&&(u+=m+" ");return u.trim()}const r4=l=>ln(l)?l:l==null?"":Qe(l)||cn(l)&&(l.toString===E_||!Xe(l.toString))?JSON.stringify(l,C_,2):String(l),C_=(l,u)=>u&&u.__v_isRef?C_(l,u.value):Ai(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((m,[g,h])=>(m[`${g} =>`]=h,m),{})}:y_(u)?{[`Set(${u.size})`]:[...u.values()]}:cn(u)&&!Qe(u)&&!x_(u)?String(u):u,_t={},Ti=[],hs=()=>{},i4=()=>!1,a4=/^on[^a-z]/,ku=l=>a4.test(l),sg=l=>l.startsWith("onUpdate:"),An=Object.assign,og=(l,u)=>{const m=l.indexOf(u);m>-1&&l.splice(m,1)},l4=Object.prototype.hasOwnProperty,st=(l,u)=>l4.call(l,u),Qe=Array.isArray,Ai=l=>Nu(l)==="[object Map]",y_=l=>Nu(l)==="[object Set]",Xe=l=>typeof l=="function",ln=l=>typeof l=="string",rg=l=>typeof l=="symbol",cn=l=>l!==null&&typeof l=="object",v_=l=>cn(l)&&Xe(l.then)&&Xe(l.catch),E_=Object.prototype.toString,Nu=l=>E_.call(l),c4=l=>Nu(l).slice(8,-1),x_=l=>Nu(l)==="[object Object]",ig=l=>ln(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,gu=eg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tu=l=>{const u=Object.create(null);return m=>u[m]||(u[m]=l(m))},u4=/-(\w)/g,Gs=Tu(l=>l.replace(u4,(u,m)=>m?m.toUpperCase():"")),f4=/\B([A-Z])/g,Di=Tu(l=>l.replace(f4,"-$1").toLowerCase()),Au=Tu(l=>l.charAt(0).toUpperCase()+l.slice(1)),Op=Tu(l=>l?`on${Au(l)}`:""),Qa=(l,u)=>!Object.is(l,u),Dp=(l,u)=>{for(let m=0;m<l.length;m++)l[m](u)},vu=(l,u,m)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,value:m})},d4=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let Ww;const m4=()=>Ww||(Ww=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ws;class p4{constructor(u=!1){this.active=!0,this.effects=[],this.cleanups=[],!u&&Ws&&(this.parent=Ws,this.index=(Ws.scopes||(Ws.scopes=[])).push(this)-1)}run(u){if(this.active){const m=Ws;try{return Ws=this,u()}finally{Ws=m}}}on(){Ws=this}off(){Ws=this.parent}stop(u){if(this.active){let m,g;for(m=0,g=this.effects.length;m<g;m++)this.effects[m].stop();for(m=0,g=this.cleanups.length;m<g;m++)this.cleanups[m]();if(this.scopes)for(m=0,g=this.scopes.length;m<g;m++)this.scopes[m].stop(!0);if(this.parent&&!u){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.active=!1}}}function g4(l,u=Ws){u&&u.active&&u.effects.push(l)}const ag=l=>{const u=new Set(l);return u.w=0,u.n=0,u},S_=l=>(l.w&qo)>0,w_=l=>(l.n&qo)>0,h4=({deps:l})=>{if(l.length)for(let u=0;u<l.length;u++)l[u].w|=qo},b4=l=>{const{deps:u}=l;if(u.length){let m=0;for(let g=0;g<u.length;g++){const h=u[g];S_(h)&&!w_(h)?h.delete(l):u[m++]=h,h.w&=~qo,h.n&=~qo}u.length=m}},Up=new WeakMap;let qa=0,qo=1;const zp=30;let ps;const Or=Symbol(""),Hp=Symbol("");class lg{constructor(u,m=null,g){this.fn=u,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,g4(this,g)}run(){if(!this.active)return this.fn();let u=ps,m=Wo;for(;u;){if(u===this)return;u=u.parent}try{return this.parent=ps,ps=this,Wo=!0,qo=1<<++qa,qa<=zp?h4(this):jw(this),this.fn()}finally{qa<=zp&&b4(this),qo=1<<--qa,ps=this.parent,Wo=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ps===this?this.deferStop=!0:this.active&&(jw(this),this.onStop&&this.onStop(),this.active=!1)}}function jw(l){const{deps:u}=l;if(u.length){for(let m=0;m<u.length;m++)u[m].delete(l);u.length=0}}let Wo=!0;const __=[];function Bi(){__.push(Wo),Wo=!1}function Ii(){const l=__.pop();Wo=l===void 0?!0:l}function Wn(l,u,m){if(Wo&&ps){let g=Up.get(l);g||Up.set(l,g=new Map);let h=g.get(m);h||g.set(m,h=ag()),k_(h)}}function k_(l,u){let m=!1;qa<=zp?w_(l)||(l.n|=qo,m=!S_(l)):m=!l.has(ps),m&&(l.add(ps),ps.deps.push(l))}function ho(l,u,m,g,h,E){const T=Up.get(l);if(!T)return;let O=[];if(u==="clear")O=[...T.values()];else if(m==="length"&&Qe(l))T.forEach((F,Q)=>{(Q==="length"||Q>=g)&&O.push(F)});else switch(m!==void 0&&O.push(T.get(m)),u){case"add":Qe(l)?ig(m)&&O.push(T.get("length")):(O.push(T.get(Or)),Ai(l)&&O.push(T.get(Hp)));break;case"delete":Qe(l)||(O.push(T.get(Or)),Ai(l)&&O.push(T.get(Hp)));break;case"set":Ai(l)&&O.push(T.get(Or));break}if(O.length===1)O[0]&&Vp(O[0]);else{const F=[];for(const Q of O)Q&&F.push(...Q);Vp(ag(F))}}function Vp(l,u){const m=Qe(l)?l:[...l];for(const g of m)g.computed&&qw(g);for(const g of m)g.computed||qw(g)}function qw(l,u){(l!==ps||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const C4=eg("__proto__,__v_isRef,__isVue"),N_=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(rg)),y4=cg(),v4=cg(!1,!0),E4=cg(!0),Kw=x4();function x4(){const l={};return["includes","indexOf","lastIndexOf"].forEach(u=>{l[u]=function(...m){const g=dt(this);for(let E=0,T=this.length;E<T;E++)Wn(g,"get",E+"");const h=g[u](...m);return h===-1||h===!1?g[u](...m.map(dt)):h}}),["push","pop","shift","unshift","splice"].forEach(u=>{l[u]=function(...m){Bi();const g=dt(this)[u].apply(this,m);return Ii(),g}}),l}function cg(l=!1,u=!1){return function(g,h,E){if(h==="__v_isReactive")return!l;if(h==="__v_isReadonly")return l;if(h==="__v_isShallow")return u;if(h==="__v_raw"&&E===(l?u?F4:O_:u?P_:R_).get(g))return g;const T=Qe(g);if(!l&&T&&st(Kw,h))return Reflect.get(Kw,h,E);const O=Reflect.get(g,h,E);return(rg(h)?N_.has(h):C4(h))||(l||Wn(g,"get",h),u)?O:an(O)?T&&ig(h)?O:O.value:cn(O)?l?D_(O):Pu(O):O}}const S4=T_(),w4=T_(!0);function T_(l=!1){return function(m,g,h,E){let T=m[g];if(Za(T)&&an(T)&&!an(h))return!1;if(!l&&!Za(h)&&(Wp(h)||(h=dt(h),T=dt(T)),!Qe(m)&&an(T)&&!an(h)))return T.value=h,!0;const O=Qe(m)&&ig(g)?Number(g)<m.length:st(m,g),F=Reflect.set(m,g,h,E);return m===dt(E)&&(O?Qa(h,T)&&ho(m,"set",g,h):ho(m,"add",g,h)),F}}function _4(l,u){const m=st(l,u);l[u];const g=Reflect.deleteProperty(l,u);return g&&m&&ho(l,"delete",u,void 0),g}function k4(l,u){const m=Reflect.has(l,u);return(!rg(u)||!N_.has(u))&&Wn(l,"has",u),m}function N4(l){return Wn(l,"iterate",Qe(l)?"length":Or),Reflect.ownKeys(l)}const A_={get:y4,set:S4,deleteProperty:_4,has:k4,ownKeys:N4},T4={get:E4,set(l,u){return!0},deleteProperty(l,u){return!0}},A4=An({},A_,{get:v4,set:w4}),ug=l=>l,Ru=l=>Reflect.getPrototypeOf(l);function uu(l,u,m=!1,g=!1){l=l.__v_raw;const h=dt(l),E=dt(u);m||(u!==E&&Wn(h,"get",u),Wn(h,"get",E));const{has:T}=Ru(h),O=g?ug:m?mg:Ja;if(T.call(h,u))return O(l.get(u));if(T.call(h,E))return O(l.get(E));l!==h&&l.get(u)}function fu(l,u=!1){const m=this.__v_raw,g=dt(m),h=dt(l);return u||(l!==h&&Wn(g,"has",l),Wn(g,"has",h)),l===h?m.has(l):m.has(l)||m.has(h)}function du(l,u=!1){return l=l.__v_raw,!u&&Wn(dt(l),"iterate",Or),Reflect.get(l,"size",l)}function Gw(l){l=dt(l);const u=dt(this);return Ru(u).has.call(u,l)||(u.add(l),ho(u,"add",l,l)),this}function Yw(l,u){u=dt(u);const m=dt(this),{has:g,get:h}=Ru(m);let E=g.call(m,l);E||(l=dt(l),E=g.call(m,l));const T=h.call(m,l);return m.set(l,u),E?Qa(u,T)&&ho(m,"set",l,u):ho(m,"add",l,u),this}function Xw(l){const u=dt(this),{has:m,get:g}=Ru(u);let h=m.call(u,l);h||(l=dt(l),h=m.call(u,l)),g&&g.call(u,l);const E=u.delete(l);return h&&ho(u,"delete",l,void 0),E}function Qw(){const l=dt(this),u=l.size!==0,m=l.clear();return u&&ho(l,"clear",void 0,void 0),m}function mu(l,u){return function(g,h){const E=this,T=E.__v_raw,O=dt(T),F=u?ug:l?mg:Ja;return!l&&Wn(O,"iterate",Or),T.forEach((Q,oe)=>g.call(h,F(Q),F(oe),E))}}function pu(l,u,m){return function(...g){const h=this.__v_raw,E=dt(h),T=Ai(E),O=l==="entries"||l===Symbol.iterator&&T,F=l==="keys"&&T,Q=h[l](...g),oe=m?ug:u?mg:Ja;return!u&&Wn(E,"iterate",F?Hp:Or),{next(){const{value:ve,done:ke}=Q.next();return ke?{value:ve,done:ke}:{value:O?[oe(ve[0]),oe(ve[1])]:oe(ve),done:ke}},[Symbol.iterator](){return this}}}}function zo(l){return function(...u){return l==="delete"?!1:this}}function R4(){const l={get(E){return uu(this,E)},get size(){return du(this)},has:fu,add:Gw,set:Yw,delete:Xw,clear:Qw,forEach:mu(!1,!1)},u={get(E){return uu(this,E,!1,!0)},get size(){return du(this)},has:fu,add:Gw,set:Yw,delete:Xw,clear:Qw,forEach:mu(!1,!0)},m={get(E){return uu(this,E,!0)},get size(){return du(this,!0)},has(E){return fu.call(this,E,!0)},add:zo("add"),set:zo("set"),delete:zo("delete"),clear:zo("clear"),forEach:mu(!0,!1)},g={get(E){return uu(this,E,!0,!0)},get size(){return du(this,!0)},has(E){return fu.call(this,E,!0)},add:zo("add"),set:zo("set"),delete:zo("delete"),clear:zo("clear"),forEach:mu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=pu(E,!1,!1),m[E]=pu(E,!0,!1),u[E]=pu(E,!1,!0),g[E]=pu(E,!0,!0)}),[l,m,u,g]}const[P4,O4,D4,B4]=R4();function fg(l,u){const m=u?l?B4:D4:l?O4:P4;return(g,h,E)=>h==="__v_isReactive"?!l:h==="__v_isReadonly"?l:h==="__v_raw"?g:Reflect.get(st(m,h)&&h in g?m:g,h,E)}const I4={get:fg(!1,!1)},$4={get:fg(!1,!0)},L4={get:fg(!0,!1)},R_=new WeakMap,P_=new WeakMap,O_=new WeakMap,F4=new WeakMap;function M4(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function U4(l){return l.__v_skip||!Object.isExtensible(l)?0:M4(c4(l))}function Pu(l){return Za(l)?l:dg(l,!1,A_,I4,R_)}function z4(l){return dg(l,!1,A4,$4,P_)}function D_(l){return dg(l,!0,T4,L4,O_)}function dg(l,u,m,g,h){if(!cn(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const E=h.get(l);if(E)return E;const T=U4(l);if(T===0)return l;const O=new Proxy(l,T===2?g:m);return h.set(l,O),O}function Ri(l){return Za(l)?Ri(l.__v_raw):!!(l&&l.__v_isReactive)}function Za(l){return!!(l&&l.__v_isReadonly)}function Wp(l){return!!(l&&l.__v_isShallow)}function B_(l){return Ri(l)||Za(l)}function dt(l){const u=l&&l.__v_raw;return u?dt(u):l}function I_(l){return vu(l,"__v_skip",!0),l}const Ja=l=>cn(l)?Pu(l):l,mg=l=>cn(l)?D_(l):l;function $_(l){Wo&&ps&&(l=dt(l),k_(l.dep||(l.dep=ag())))}function L_(l,u){l=dt(l),l.dep&&Vp(l.dep)}function an(l){return!!(l&&l.__v_isRef===!0)}function H4(l){return V4(l,!1)}function V4(l,u){return an(l)?l:new W4(l,u)}class W4{constructor(u,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?u:dt(u),this._value=m?u:Ja(u)}get value(){return $_(this),this._value}set value(u){u=this.__v_isShallow?u:dt(u),Qa(u,this._rawValue)&&(this._rawValue=u,this._value=this.__v_isShallow?u:Ja(u),L_(this))}}function j4(l){return an(l)?l.value:l}const q4={get:(l,u,m)=>j4(Reflect.get(l,u,m)),set:(l,u,m,g)=>{const h=l[u];return an(h)&&!an(m)?(h.value=m,!0):Reflect.set(l,u,m,g)}};function F_(l){return Ri(l)?l:new Proxy(l,q4)}class K4{constructor(u,m,g,h){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new lg(u,()=>{this._dirty||(this._dirty=!0,L_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=g}get value(){const u=dt(this);return $_(u),(u._dirty||!u._cacheable)&&(u._dirty=!1,u._value=u.effect.run()),u._value}set value(u){this._setter(u)}}function G4(l,u,m=!1){let g,h;const E=Xe(l);return E?(g=l,h=hs):(g=l.get,h=l.set),new K4(g,h,E||!h,m)}function jo(l,u,m,g){let h;try{h=g?l(...g):l()}catch(E){Ou(E,u,m)}return h}function bs(l,u,m,g){if(Xe(l)){const E=jo(l,u,m,g);return E&&v_(E)&&E.catch(T=>{Ou(T,u,m)}),E}const h=[];for(let E=0;E<l.length;E++)h.push(bs(l[E],u,m,g));return h}function Ou(l,u,m,g=!0){const h=u?u.vnode:null;if(u){let E=u.parent;const T=u.proxy,O=m;for(;E;){const Q=E.ec;if(Q){for(let oe=0;oe<Q.length;oe++)if(Q[oe](l,T,O)===!1)return}E=E.parent}const F=u.appContext.config.errorHandler;if(F){jo(F,null,10,[l,T,O]);return}}Y4(l,m,h,g)}function Y4(l,u,m,g=!0){console.error(l)}let Eu=!1,jp=!1;const Vn=[];let po=0;const Ga=[];let Ka=null,_i=0;const Ya=[];let Ho=null,ki=0;const M_=Promise.resolve();let pg=null,qp=null;function hu(l){const u=pg||M_;return l?u.then(this?l.bind(this):l):u}function X4(l){let u=po+1,m=Vn.length;for(;u<m;){const g=u+m>>>1;el(Vn[g])<l?u=g+1:m=g}return u}function U_(l){(!Vn.length||!Vn.includes(l,Eu&&l.allowRecurse?po+1:po))&&l!==qp&&(l.id==null?Vn.push(l):Vn.splice(X4(l.id),0,l),z_())}function z_(){!Eu&&!jp&&(jp=!0,pg=M_.then(W_))}function Q4(l){const u=Vn.indexOf(l);u>po&&Vn.splice(u,1)}function H_(l,u,m,g){Qe(l)?m.push(...l):(!u||!u.includes(l,l.allowRecurse?g+1:g))&&m.push(l),z_()}function Z4(l){H_(l,Ka,Ga,_i)}function J4(l){H_(l,Ho,Ya,ki)}function Du(l,u=null){if(Ga.length){for(qp=u,Ka=[...new Set(Ga)],Ga.length=0,_i=0;_i<Ka.length;_i++)Ka[_i]();Ka=null,_i=0,qp=null,Du(l,u)}}function V_(l){if(Du(),Ya.length){const u=[...new Set(Ya)];if(Ya.length=0,Ho){Ho.push(...u);return}for(Ho=u,Ho.sort((m,g)=>el(m)-el(g)),ki=0;ki<Ho.length;ki++)Ho[ki]();Ho=null,ki=0}}const el=l=>l.id==null?1/0:l.id;function W_(l){jp=!1,Eu=!0,Du(l),Vn.sort((m,g)=>el(m)-el(g));const u=hs;try{for(po=0;po<Vn.length;po++){const m=Vn[po];m&&m.active!==!1&&jo(m,null,14)}}finally{po=0,Vn.length=0,V_(),Eu=!1,pg=null,(Vn.length||Ga.length||Ya.length)&&W_(l)}}function e9(l,u,...m){if(l.isUnmounted)return;const g=l.vnode.props||_t;let h=m;const E=u.startsWith("update:"),T=E&&u.slice(7);if(T&&T in g){const oe=`${T==="modelValue"?"model":T}Modifiers`,{number:ve,trim:ke}=g[oe]||_t;ke&&(h=m.map(Ve=>Ve.trim())),ve&&(h=m.map(d4))}let O,F=g[O=Op(u)]||g[O=Op(Gs(u))];!F&&E&&(F=g[O=Op(Di(u))]),F&&bs(F,l,6,h);const Q=g[O+"Once"];if(Q){if(!l.emitted)l.emitted={};else if(l.emitted[O])return;l.emitted[O]=!0,bs(Q,l,6,h)}}function j_(l,u,m=!1){const g=u.emitsCache,h=g.get(l);if(h!==void 0)return h;const E=l.emits;let T={},O=!1;if(!Xe(l)){const F=Q=>{const oe=j_(Q,u,!0);oe&&(O=!0,An(T,oe))};!m&&u.mixins.length&&u.mixins.forEach(F),l.extends&&F(l.extends),l.mixins&&l.mixins.forEach(F)}return!E&&!O?(g.set(l,null),null):(Qe(E)?E.forEach(F=>T[F]=null):An(T,E),g.set(l,T),T)}function Bu(l,u){return!l||!ku(u)?!1:(u=u.slice(2).replace(/Once$/,""),st(l,u[0].toLowerCase()+u.slice(1))||st(l,Di(u))||st(l,u))}let Ks=null,q_=null;function xu(l){const u=Ks;return Ks=l,q_=l&&l.type.__scopeId||null,u}function t9(l,u=Ks,m){if(!u||l._n)return l;const g=(...h)=>{g._d&&a_(-1);const E=xu(u),T=l(...h);return xu(E),g._d&&a_(1),T};return g._n=!0,g._c=!0,g._d=!0,g}function Bp(l){const{type:u,vnode:m,proxy:g,withProxy:h,props:E,propsOptions:[T],slots:O,attrs:F,emit:Q,render:oe,renderCache:ve,data:ke,setupState:Ve,ctx:mt,inheritAttrs:ht}=l;let Je,it;const Bn=xu(l);try{if(m.shapeFlag&4){const ut=h||g;Je=qs(oe.call(ut,ut,ve,E,Ve,ke,mt)),it=F}else{const ut=u;Je=qs(ut.length>1?ut(E,{attrs:F,slots:O,emit:Q}):ut(E,null)),it=u.props?F:n9(F)}}catch(ut){Xa.length=0,Ou(ut,l,1),Je=go(Br)}let he=Je;if(it&&ht!==!1){const ut=Object.keys(it),{shapeFlag:Ys}=he;ut.length&&Ys&7&&(T&&ut.some(sg)&&(it=s9(it,T)),he=Pi(he,it))}return m.dirs&&(he=Pi(he),he.dirs=he.dirs?he.dirs.concat(m.dirs):m.dirs),m.transition&&(he.transition=m.transition),Je=he,xu(Bn),Je}const n9=l=>{let u;for(const m in l)(m==="class"||m==="style"||ku(m))&&((u||(u={}))[m]=l[m]);return u},s9=(l,u)=>{const m={};for(const g in l)(!sg(g)||!(g.slice(9)in u))&&(m[g]=l[g]);return m};function o9(l,u,m){const{props:g,children:h,component:E}=l,{props:T,children:O,patchFlag:F}=u,Q=E.emitsOptions;if(u.dirs||u.transition)return!0;if(m&&F>=0){if(F&1024)return!0;if(F&16)return g?Zw(g,T,Q):!!T;if(F&8){const oe=u.dynamicProps;for(let ve=0;ve<oe.length;ve++){const ke=oe[ve];if(T[ke]!==g[ke]&&!Bu(Q,ke))return!0}}}else return(h||O)&&(!O||!O.$stable)?!0:g===T?!1:g?T?Zw(g,T,Q):!0:!!T;return!1}function Zw(l,u,m){const g=Object.keys(u);if(g.length!==Object.keys(l).length)return!0;for(let h=0;h<g.length;h++){const E=g[h];if(u[E]!==l[E]&&!Bu(m,E))return!0}return!1}function r9({vnode:l,parent:u},m){for(;u&&u.subTree===l;)(l=u.vnode).el=m,u=u.parent}const i9=l=>l.__isSuspense;function a9(l,u){u&&u.pendingBranch?Qe(l)?u.effects.push(...l):u.effects.push(l):J4(l)}function l9(l,u){if(rn){let m=rn.provides;const g=rn.parent&&rn.parent.provides;g===m&&(m=rn.provides=Object.create(g)),m[l]=u}}function Ip(l,u,m=!1){const g=rn||Ks;if(g){const h=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(h&&l in h)return h[l];if(arguments.length>1)return m&&Xe(u)?u.call(g.proxy):u}}const Jw={};function bu(l,u,m){return K_(l,u,m)}function K_(l,u,{immediate:m,deep:g,flush:h,onTrack:E,onTrigger:T}=_t){const O=rn;let F,Q=!1,oe=!1;if(an(l)?(F=()=>l.value,Q=Wp(l)):Ri(l)?(F=()=>l,g=!0):Qe(l)?(oe=!0,Q=l.some(it=>Ri(it)||Wp(it)),F=()=>l.map(it=>{if(an(it))return it.value;if(Ri(it))return Ni(it);if(Xe(it))return jo(it,O,2)})):Xe(l)?u?F=()=>jo(l,O,2):F=()=>{if(!(O&&O.isUnmounted))return ve&&ve(),bs(l,O,3,[ke])}:F=hs,u&&g){const it=F;F=()=>Ni(it())}let ve,ke=it=>{ve=Je.onStop=()=>{jo(it,O,4)}};if(nl)return ke=hs,u?m&&bs(u,O,3,[F(),oe?[]:void 0,ke]):F(),hs;let Ve=oe?[]:Jw;const mt=()=>{if(!!Je.active)if(u){const it=Je.run();(g||Q||(oe?it.some((Bn,he)=>Qa(Bn,Ve[he])):Qa(it,Ve)))&&(ve&&ve(),bs(u,O,3,[it,Ve===Jw?void 0:Ve,ke]),Ve=it)}else Je.run()};mt.allowRecurse=!!u;let ht;h==="sync"?ht=mt:h==="post"?ht=()=>Dn(mt,O&&O.suspense):ht=()=>Z4(mt);const Je=new lg(F,ht);return u?m?mt():Ve=Je.run():h==="post"?Dn(Je.run.bind(Je),O&&O.suspense):Je.run(),()=>{Je.stop(),O&&O.scope&&og(O.scope.effects,Je)}}function c9(l,u,m){const g=this.proxy,h=ln(l)?l.includes(".")?G_(g,l):()=>g[l]:l.bind(g,g);let E;Xe(u)?E=u:(E=u.handler,m=u);const T=rn;Oi(this);const O=K_(h,E.bind(g),m);return T?Oi(T):Dr(),O}function G_(l,u){const m=u.split(".");return()=>{let g=l;for(let h=0;h<m.length&&g;h++)g=g[m[h]];return g}}function Ni(l,u){if(!cn(l)||l.__v_skip||(u=u||new Set,u.has(l)))return l;if(u.add(l),an(l))Ni(l.value,u);else if(Qe(l))for(let m=0;m<l.length;m++)Ni(l[m],u);else if(y_(l)||Ai(l))l.forEach(m=>{Ni(m,u)});else if(x_(l))for(const m in l)Ni(l[m],u);return l}function Y_(l){return Xe(l)?{setup:l,name:l.name}:l}const Cu=l=>!!l.type.__asyncLoader,X_=l=>l.type.__isKeepAlive;function u9(l,u){Q_(l,"a",u)}function f9(l,u){Q_(l,"da",u)}function Q_(l,u,m=rn){const g=l.__wdc||(l.__wdc=()=>{let h=m;for(;h;){if(h.isDeactivated)return;h=h.parent}return l()});if(Iu(u,g,m),m){let h=m.parent;for(;h&&h.parent;)X_(h.parent.vnode)&&d9(g,u,m,h),h=h.parent}}function d9(l,u,m,g){const h=Iu(u,l,g,!0);ek(()=>{og(g[u],h)},m)}function Iu(l,u,m=rn,g=!1){if(m){const h=m[l]||(m[l]=[]),E=u.__weh||(u.__weh=(...T)=>{if(m.isUnmounted)return;Bi(),Oi(m);const O=bs(u,m,l,T);return Dr(),Ii(),O});return g?h.unshift(E):h.push(E),E}}const bo=l=>(u,m=rn)=>(!nl||l==="sp")&&Iu(l,u,m),m9=bo("bm"),Z_=bo("m"),p9=bo("bu"),g9=bo("u"),J_=bo("bum"),ek=bo("um"),h9=bo("sp"),b9=bo("rtg"),C9=bo("rtc");function y9(l,u=rn){Iu("ec",l,u)}function Tr(l,u,m,g){const h=l.dirs,E=u&&u.dirs;for(let T=0;T<h.length;T++){const O=h[T];E&&(O.oldValue=E[T].value);let F=O.dir[g];F&&(Bi(),bs(F,m,8,[l.el,O,l,u]),Ii())}}const tk="components";function v9(l,u){return x9(tk,l,!0,u)||l}const E9=Symbol();function x9(l,u,m=!0,g=!1){const h=Ks||rn;if(h){const E=h.type;if(l===tk){const O=eq(E);if(O&&(O===u||O===Gs(u)||O===Au(Gs(u))))return E}const T=e_(h[l]||E[l],u)||e_(h.appContext[l],u);return!T&&g?E:T}}function e_(l,u){return l&&(l[u]||l[Gs(u)]||l[Au(Gs(u))])}const Kp=l=>l?gk(l)?Cg(l)||l.proxy:Kp(l.parent):null,Su=An(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>Kp(l.parent),$root:l=>Kp(l.root),$emit:l=>l.emit,$options:l=>sk(l),$forceUpdate:l=>l.f||(l.f=()=>U_(l.update)),$nextTick:l=>l.n||(l.n=hu.bind(l.proxy)),$watch:l=>c9.bind(l)}),S9={get({_:l},u){const{ctx:m,setupState:g,data:h,props:E,accessCache:T,type:O,appContext:F}=l;let Q;if(u[0]!=="$"){const Ve=T[u];if(Ve!==void 0)switch(Ve){case 1:return g[u];case 2:return h[u];case 4:return m[u];case 3:return E[u]}else{if(g!==_t&&st(g,u))return T[u]=1,g[u];if(h!==_t&&st(h,u))return T[u]=2,h[u];if((Q=l.propsOptions[0])&&st(Q,u))return T[u]=3,E[u];if(m!==_t&&st(m,u))return T[u]=4,m[u];Gp&&(T[u]=0)}}const oe=Su[u];let ve,ke;if(oe)return u==="$attrs"&&Wn(l,"get",u),oe(l);if((ve=O.__cssModules)&&(ve=ve[u]))return ve;if(m!==_t&&st(m,u))return T[u]=4,m[u];if(ke=F.config.globalProperties,st(ke,u))return ke[u]},set({_:l},u,m){const{data:g,setupState:h,ctx:E}=l;return h!==_t&&st(h,u)?(h[u]=m,!0):g!==_t&&st(g,u)?(g[u]=m,!0):st(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(E[u]=m,!0)},has({_:{data:l,setupState:u,accessCache:m,ctx:g,appContext:h,propsOptions:E}},T){let O;return!!m[T]||l!==_t&&st(l,T)||u!==_t&&st(u,T)||(O=E[0])&&st(O,T)||st(g,T)||st(Su,T)||st(h.config.globalProperties,T)},defineProperty(l,u,m){return m.get!=null?l._.accessCache[u]=0:st(m,"value")&&this.set(l,u,m.value,null),Reflect.defineProperty(l,u,m)}};let Gp=!0;function w9(l){const u=sk(l),m=l.proxy,g=l.ctx;Gp=!1,u.beforeCreate&&t_(u.beforeCreate,l,"bc");const{data:h,computed:E,methods:T,watch:O,provide:F,inject:Q,created:oe,beforeMount:ve,mounted:ke,beforeUpdate:Ve,updated:mt,activated:ht,deactivated:Je,beforeDestroy:it,beforeUnmount:Bn,destroyed:he,unmounted:ut,render:Ys,renderTracked:Tt,renderTriggered:Xs,errorCaptured:Cs,serverPrefetch:Pt,expose:Mt,inheritAttrs:Ne,components:Ye,directives:yn,filters:Qs}=u;if(Q&&_9(Q,g,null,l.appContext.config.unwrapInjectedRef),T)for(const kt in T){const K=T[kt];Xe(K)&&(g[kt]=K.bind(m))}if(h){const kt=h.call(m,m);cn(kt)&&(l.data=Pu(kt))}if(Gp=!0,E)for(const kt in E){const K=E[kt],St=Xe(K)?K.bind(m,m):Xe(K.get)?K.get.bind(m,m):hs,$i=!Xe(K)&&Xe(K.set)?K.set.bind(m):hs,re=bk({get:St,set:$i});Object.defineProperty(g,kt,{enumerable:!0,configurable:!0,get:()=>re.value,set:ys=>re.value=ys})}if(O)for(const kt in O)nk(O[kt],g,m,kt);if(F){const kt=Xe(F)?F.call(m):F;Reflect.ownKeys(kt).forEach(K=>{l9(K,kt[K])})}oe&&t_(oe,l,"c");function Ot(kt,K){Qe(K)?K.forEach(St=>kt(St.bind(m))):K&&kt(K.bind(m))}if(Ot(m9,ve),Ot(Z_,ke),Ot(p9,Ve),Ot(g9,mt),Ot(u9,ht),Ot(f9,Je),Ot(y9,Cs),Ot(C9,Tt),Ot(b9,Xs),Ot(J_,Bn),Ot(ek,ut),Ot(h9,Pt),Qe(Mt))if(Mt.length){const kt=l.exposed||(l.exposed={});Mt.forEach(K=>{Object.defineProperty(kt,K,{get:()=>m[K],set:St=>m[K]=St})})}else l.exposed||(l.exposed={});Ys&&l.render===hs&&(l.render=Ys),Ne!=null&&(l.inheritAttrs=Ne),Ye&&(l.components=Ye),yn&&(l.directives=yn)}function _9(l,u,m=hs,g=!1){Qe(l)&&(l=Yp(l));for(const h in l){const E=l[h];let T;cn(E)?"default"in E?T=Ip(E.from||h,E.default,!0):T=Ip(E.from||h):T=Ip(E),an(T)&&g?Object.defineProperty(u,h,{enumerable:!0,configurable:!0,get:()=>T.value,set:O=>T.value=O}):u[h]=T}}function t_(l,u,m){bs(Qe(l)?l.map(g=>g.bind(u.proxy)):l.bind(u.proxy),u,m)}function nk(l,u,m,g){const h=g.includes(".")?G_(m,g):()=>m[g];if(ln(l)){const E=u[l];Xe(E)&&bu(h,E)}else if(Xe(l))bu(h,l.bind(m));else if(cn(l))if(Qe(l))l.forEach(E=>nk(E,u,m,g));else{const E=Xe(l.handler)?l.handler.bind(m):u[l.handler];Xe(E)&&bu(h,E,l)}}function sk(l){const u=l.type,{mixins:m,extends:g}=u,{mixins:h,optionsCache:E,config:{optionMergeStrategies:T}}=l.appContext,O=E.get(u);let F;return O?F=O:!h.length&&!m&&!g?F=u:(F={},h.length&&h.forEach(Q=>wu(F,Q,T,!0)),wu(F,u,T)),E.set(u,F),F}function wu(l,u,m,g=!1){const{mixins:h,extends:E}=u;E&&wu(l,E,m,!0),h&&h.forEach(T=>wu(l,T,m,!0));for(const T in u)if(!(g&&T==="expose")){const O=k9[T]||m&&m[T];l[T]=O?O(l[T],u[T]):u[T]}return l}const k9={data:n_,props:Rr,emits:Rr,methods:Rr,computed:Rr,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:Rr,directives:Rr,watch:T9,provide:n_,inject:N9};function n_(l,u){return u?l?function(){return An(Xe(l)?l.call(this,this):l,Xe(u)?u.call(this,this):u)}:u:l}function N9(l,u){return Rr(Yp(l),Yp(u))}function Yp(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++)u[l[m]]=l[m];return u}return l}function Tn(l,u){return l?[...new Set([].concat(l,u))]:u}function Rr(l,u){return l?An(An(Object.create(null),l),u):u}function T9(l,u){if(!l)return u;if(!u)return l;const m=An(Object.create(null),l);for(const g in u)m[g]=Tn(l[g],u[g]);return m}function A9(l,u,m,g=!1){const h={},E={};vu(E,$u,1),l.propsDefaults=Object.create(null),ok(l,u,h,E);for(const T in l.propsOptions[0])T in h||(h[T]=void 0);m?l.props=g?h:z4(h):l.type.props?l.props=h:l.props=E,l.attrs=E}function R9(l,u,m,g){const{props:h,attrs:E,vnode:{patchFlag:T}}=l,O=dt(h),[F]=l.propsOptions;let Q=!1;if((g||T>0)&&!(T&16)){if(T&8){const oe=l.vnode.dynamicProps;for(let ve=0;ve<oe.length;ve++){let ke=oe[ve];if(Bu(l.emitsOptions,ke))continue;const Ve=u[ke];if(F)if(st(E,ke))Ve!==E[ke]&&(E[ke]=Ve,Q=!0);else{const mt=Gs(ke);h[mt]=Xp(F,O,mt,Ve,l,!1)}else Ve!==E[ke]&&(E[ke]=Ve,Q=!0)}}}else{ok(l,u,h,E)&&(Q=!0);let oe;for(const ve in O)(!u||!st(u,ve)&&((oe=Di(ve))===ve||!st(u,oe)))&&(F?m&&(m[ve]!==void 0||m[oe]!==void 0)&&(h[ve]=Xp(F,O,ve,void 0,l,!0)):delete h[ve]);if(E!==O)for(const ve in E)(!u||!st(u,ve)&&!0)&&(delete E[ve],Q=!0)}Q&&ho(l,"set","$attrs")}function ok(l,u,m,g){const[h,E]=l.propsOptions;let T=!1,O;if(u)for(let F in u){if(gu(F))continue;const Q=u[F];let oe;h&&st(h,oe=Gs(F))?!E||!E.includes(oe)?m[oe]=Q:(O||(O={}))[oe]=Q:Bu(l.emitsOptions,F)||(!(F in g)||Q!==g[F])&&(g[F]=Q,T=!0)}if(E){const F=dt(m),Q=O||_t;for(let oe=0;oe<E.length;oe++){const ve=E[oe];m[ve]=Xp(h,F,ve,Q[ve],l,!st(Q,ve))}}return T}function Xp(l,u,m,g,h,E){const T=l[m];if(T!=null){const O=st(T,"default");if(O&&g===void 0){const F=T.default;if(T.type!==Function&&Xe(F)){const{propsDefaults:Q}=h;m in Q?g=Q[m]:(Oi(h),g=Q[m]=F.call(null,u),Dr())}else g=F}T[0]&&(E&&!O?g=!1:T[1]&&(g===""||g===Di(m))&&(g=!0))}return g}function rk(l,u,m=!1){const g=u.propsCache,h=g.get(l);if(h)return h;const E=l.props,T={},O=[];let F=!1;if(!Xe(l)){const oe=ve=>{F=!0;const[ke,Ve]=rk(ve,u,!0);An(T,ke),Ve&&O.push(...Ve)};!m&&u.mixins.length&&u.mixins.forEach(oe),l.extends&&oe(l.extends),l.mixins&&l.mixins.forEach(oe)}if(!E&&!F)return g.set(l,Ti),Ti;if(Qe(E))for(let oe=0;oe<E.length;oe++){const ve=Gs(E[oe]);s_(ve)&&(T[ve]=_t)}else if(E)for(const oe in E){const ve=Gs(oe);if(s_(ve)){const ke=E[oe],Ve=T[ve]=Qe(ke)||Xe(ke)?{type:ke}:ke;if(Ve){const mt=i_(Boolean,Ve.type),ht=i_(String,Ve.type);Ve[0]=mt>-1,Ve[1]=ht<0||mt<ht,(mt>-1||st(Ve,"default"))&&O.push(ve)}}}const Q=[T,O];return g.set(l,Q),Q}function s_(l){return l[0]!=="$"}function o_(l){const u=l&&l.toString().match(/^\s*function (\w+)/);return u?u[1]:l===null?"null":""}function r_(l,u){return o_(l)===o_(u)}function i_(l,u){return Qe(u)?u.findIndex(m=>r_(m,l)):Xe(u)&&r_(u,l)?0:-1}const ik=l=>l[0]==="_"||l==="$stable",gg=l=>Qe(l)?l.map(qs):[qs(l)],P9=(l,u,m)=>{if(u._n)return u;const g=t9((...h)=>gg(u(...h)),m);return g._c=!1,g},ak=(l,u,m)=>{const g=l._ctx;for(const h in l){if(ik(h))continue;const E=l[h];if(Xe(E))u[h]=P9(h,E,g);else if(E!=null){const T=gg(E);u[h]=()=>T}}},lk=(l,u)=>{const m=gg(u);l.slots.default=()=>m},O9=(l,u)=>{if(l.vnode.shapeFlag&32){const m=u._;m?(l.slots=dt(u),vu(u,"_",m)):ak(u,l.slots={})}else l.slots={},u&&lk(l,u);vu(l.slots,$u,1)},D9=(l,u,m)=>{const{vnode:g,slots:h}=l;let E=!0,T=_t;if(g.shapeFlag&32){const O=u._;O?m&&O===1?E=!1:(An(h,u),!m&&O===1&&delete h._):(E=!u.$stable,ak(u,h)),T=u}else u&&(lk(l,u),T={default:1});if(E)for(const O in h)!ik(O)&&!(O in T)&&delete h[O]};function ck(){return{app:null,config:{isNativeTag:i4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let B9=0;function I9(l,u){return function(g,h=null){Xe(g)||(g=Object.assign({},g)),h!=null&&!cn(h)&&(h=null);const E=ck(),T=new Set;let O=!1;const F=E.app={_uid:B9++,_component:g,_props:h,_container:null,_context:E,_instance:null,version:nq,get config(){return E.config},set config(Q){},use(Q,...oe){return T.has(Q)||(Q&&Xe(Q.install)?(T.add(Q),Q.install(F,...oe)):Xe(Q)&&(T.add(Q),Q(F,...oe))),F},mixin(Q){return E.mixins.includes(Q)||E.mixins.push(Q),F},component(Q,oe){return oe?(E.components[Q]=oe,F):E.components[Q]},directive(Q,oe){return oe?(E.directives[Q]=oe,F):E.directives[Q]},mount(Q,oe,ve){if(!O){const ke=go(g,h);return ke.appContext=E,oe&&u?u(ke,Q):l(ke,Q,ve),O=!0,F._container=Q,Q.__vue_app__=F,Cg(ke.component)||ke.component.proxy}},unmount(){O&&(l(null,F._container),delete F._container.__vue_app__)},provide(Q,oe){return E.provides[Q]=oe,F}};return F}}function Qp(l,u,m,g,h=!1){if(Qe(l)){l.forEach((ke,Ve)=>Qp(ke,u&&(Qe(u)?u[Ve]:u),m,g,h));return}if(Cu(g)&&!h)return;const E=g.shapeFlag&4?Cg(g.component)||g.component.proxy:g.el,T=h?null:E,{i:O,r:F}=l,Q=u&&u.r,oe=O.refs===_t?O.refs={}:O.refs,ve=O.setupState;if(Q!=null&&Q!==F&&(ln(Q)?(oe[Q]=null,st(ve,Q)&&(ve[Q]=null)):an(Q)&&(Q.value=null)),Xe(F))jo(F,O,12,[T,oe]);else{const ke=ln(F),Ve=an(F);if(ke||Ve){const mt=()=>{if(l.f){const ht=ke?oe[F]:F.value;h?Qe(ht)&&og(ht,E):Qe(ht)?ht.includes(E)||ht.push(E):ke?(oe[F]=[E],st(ve,F)&&(ve[F]=oe[F])):(F.value=[E],l.k&&(oe[l.k]=F.value))}else ke?(oe[F]=T,st(ve,F)&&(ve[F]=T)):an(F)&&(F.value=T,l.k&&(oe[l.k]=T))};T?(mt.id=-1,Dn(mt,m)):mt()}}}const Dn=a9;function $9(l){return L9(l)}function L9(l,u){const m=m4();m.__VUE__=!0;const{insert:g,remove:h,patchProp:E,createElement:T,createText:O,createComment:F,setText:Q,setElementText:oe,parentNode:ve,nextSibling:ke,setScopeId:Ve=hs,cloneNode:mt,insertStaticContent:ht}=l,Je=(k,P,U,z=null,R=null,ce=null,Ce=!1,H=null,fe=!!P.dynamicChildren)=>{if(k===P)return;k&&!ja(k,P)&&(z=b(k),vs(k,R,ce,!0),k=null),P.patchFlag===-2&&(fe=!1,P.dynamicChildren=null);const{type:X,ref:Re,shapeFlag:de}=P;switch(X){case hg:it(k,P,U,z);break;case Br:Bn(k,P,U,z);break;case $p:k==null&&he(P,U,z,Ce);break;case js:yn(k,P,U,z,R,ce,Ce,H,fe);break;default:de&1?Tt(k,P,U,z,R,ce,Ce,H,fe):de&6?Qs(k,P,U,z,R,ce,Ce,H,fe):(de&64||de&128)&&X.process(k,P,U,z,R,ce,Ce,H,fe,Co)}Re!=null&&R&&Qp(Re,k&&k.ref,ce,P||k,!P)},it=(k,P,U,z)=>{if(k==null)g(P.el=O(P.children),U,z);else{const R=P.el=k.el;P.children!==k.children&&Q(R,P.children)}},Bn=(k,P,U,z)=>{k==null?g(P.el=F(P.children||""),U,z):P.el=k.el},he=(k,P,U,z)=>{[k.el,k.anchor]=ht(k.children,P,U,z,k.el,k.anchor)},ut=({el:k,anchor:P},U,z)=>{let R;for(;k&&k!==P;)R=ke(k),g(k,U,z),k=R;g(P,U,z)},Ys=({el:k,anchor:P})=>{let U;for(;k&&k!==P;)U=ke(k),h(k),k=U;h(P)},Tt=(k,P,U,z,R,ce,Ce,H,fe)=>{Ce=Ce||P.type==="svg",k==null?Xs(P,U,z,R,ce,Ce,H,fe):Mt(k,P,R,ce,Ce,H,fe)},Xs=(k,P,U,z,R,ce,Ce,H)=>{let fe,X;const{type:Re,props:de,shapeFlag:Te,transition:Ue,patchFlag:Ke,dirs:et}=k;if(k.el&&mt!==void 0&&Ke===-1)fe=k.el=mt(k.el);else{if(fe=k.el=T(k.type,ce,de&&de.is,de),Te&8?oe(fe,k.children):Te&16&&Pt(k.children,fe,null,z,R,ce&&Re!=="foreignObject",Ce,H),et&&Tr(k,null,z,"created"),de){for(const bt in de)bt!=="value"&&!gu(bt)&&E(fe,bt,null,de[bt],ce,k.children,z,R,at);"value"in de&&E(fe,"value",null,de.value),(X=de.onVnodeBeforeMount)&&Vs(X,z,k)}Cs(fe,k,k.scopeId,Ce,z)}et&&Tr(k,null,z,"beforeMount");const ot=(!R||R&&!R.pendingBranch)&&Ue&&!Ue.persisted;ot&&Ue.beforeEnter(fe),g(fe,P,U),((X=de&&de.onVnodeMounted)||ot||et)&&Dn(()=>{X&&Vs(X,z,k),ot&&Ue.enter(fe),et&&Tr(k,null,z,"mounted")},R)},Cs=(k,P,U,z,R)=>{if(U&&Ve(k,U),z)for(let ce=0;ce<z.length;ce++)Ve(k,z[ce]);if(R){let ce=R.subTree;if(P===ce){const Ce=R.vnode;Cs(k,Ce,Ce.scopeId,Ce.slotScopeIds,R.parent)}}},Pt=(k,P,U,z,R,ce,Ce,H,fe=0)=>{for(let X=fe;X<k.length;X++){const Re=k[X]=H?Vo(k[X]):qs(k[X]);Je(null,Re,P,U,z,R,ce,Ce,H)}},Mt=(k,P,U,z,R,ce,Ce)=>{const H=P.el=k.el;let{patchFlag:fe,dynamicChildren:X,dirs:Re}=P;fe|=k.patchFlag&16;const de=k.props||_t,Te=P.props||_t;let Ue;U&&Ar(U,!1),(Ue=Te.onVnodeBeforeUpdate)&&Vs(Ue,U,P,k),Re&&Tr(P,k,U,"beforeUpdate"),U&&Ar(U,!0);const Ke=R&&P.type!=="foreignObject";if(X?Ne(k.dynamicChildren,X,H,U,z,Ke,ce):Ce||St(k,P,H,null,U,z,Ke,ce,!1),fe>0){if(fe&16)Ye(H,P,de,Te,U,z,R);else if(fe&2&&de.class!==Te.class&&E(H,"class",null,Te.class,R),fe&4&&E(H,"style",de.style,Te.style,R),fe&8){const et=P.dynamicProps;for(let ot=0;ot<et.length;ot++){const bt=et[ot],vn=de[bt],jn=Te[bt];(jn!==vn||bt==="value")&&E(H,bt,vn,jn,R,k.children,U,z,at)}}fe&1&&k.children!==P.children&&oe(H,P.children)}else!Ce&&X==null&&Ye(H,P,de,Te,U,z,R);((Ue=Te.onVnodeUpdated)||Re)&&Dn(()=>{Ue&&Vs(Ue,U,P,k),Re&&Tr(P,k,U,"updated")},z)},Ne=(k,P,U,z,R,ce,Ce)=>{for(let H=0;H<P.length;H++){const fe=k[H],X=P[H],Re=fe.el&&(fe.type===js||!ja(fe,X)||fe.shapeFlag&70)?ve(fe.el):U;Je(fe,X,Re,null,z,R,ce,Ce,!0)}},Ye=(k,P,U,z,R,ce,Ce)=>{if(U!==z){for(const H in z){if(gu(H))continue;const fe=z[H],X=U[H];fe!==X&&H!=="value"&&E(k,H,X,fe,Ce,P.children,R,ce,at)}if(U!==_t)for(const H in U)!gu(H)&&!(H in z)&&E(k,H,U[H],null,Ce,P.children,R,ce,at);"value"in z&&E(k,"value",U.value,z.value)}},yn=(k,P,U,z,R,ce,Ce,H,fe)=>{const X=P.el=k?k.el:O(""),Re=P.anchor=k?k.anchor:O("");let{patchFlag:de,dynamicChildren:Te,slotScopeIds:Ue}=P;Ue&&(H=H?H.concat(Ue):Ue),k==null?(g(X,U,z),g(Re,U,z),Pt(P.children,U,Re,R,ce,Ce,H,fe)):de>0&&de&64&&Te&&k.dynamicChildren?(Ne(k.dynamicChildren,Te,U,R,ce,Ce,H),(P.key!=null||R&&P===R.subTree)&&uk(k,P,!0)):St(k,P,U,Re,R,ce,Ce,H,fe)},Qs=(k,P,U,z,R,ce,Ce,H,fe)=>{P.slotScopeIds=H,k==null?P.shapeFlag&512?R.ctx.activate(P,U,z,Ce,fe):Ie(P,U,z,R,ce,Ce,fe):Ot(k,P,fe)},Ie=(k,P,U,z,R,ce,Ce)=>{const H=k.component=Y9(k,z,R);if(X_(k)&&(H.ctx.renderer=Co),X9(H),H.asyncDep){if(R&&R.registerDep(H,kt),!k.el){const fe=H.subTree=go(Br);Bn(null,fe,P,U)}return}kt(H,k,P,U,R,ce,Ce)},Ot=(k,P,U)=>{const z=P.component=k.component;if(o9(k,P,U))if(z.asyncDep&&!z.asyncResolved){K(z,P,U);return}else z.next=P,Q4(z.update),z.update();else P.el=k.el,z.vnode=P},kt=(k,P,U,z,R,ce,Ce)=>{const H=()=>{if(k.isMounted){let{next:Re,bu:de,u:Te,parent:Ue,vnode:Ke}=k,et=Re,ot;Ar(k,!1),Re?(Re.el=Ke.el,K(k,Re,Ce)):Re=Ke,de&&Dp(de),(ot=Re.props&&Re.props.onVnodeBeforeUpdate)&&Vs(ot,Ue,Re,Ke),Ar(k,!0);const bt=Bp(k),vn=k.subTree;k.subTree=bt,Je(vn,bt,ve(vn.el),b(vn),k,R,ce),Re.el=bt.el,et===null&&r9(k,bt.el),Te&&Dn(Te,R),(ot=Re.props&&Re.props.onVnodeUpdated)&&Dn(()=>Vs(ot,Ue,Re,Ke),R)}else{let Re;const{el:de,props:Te}=P,{bm:Ue,m:Ke,parent:et}=k,ot=Cu(P);if(Ar(k,!1),Ue&&Dp(Ue),!ot&&(Re=Te&&Te.onVnodeBeforeMount)&&Vs(Re,et,P),Ar(k,!0),de&&Lr){const bt=()=>{k.subTree=Bp(k),Lr(de,k.subTree,k,R,null)};ot?P.type.__asyncLoader().then(()=>!k.isUnmounted&&bt()):bt()}else{const bt=k.subTree=Bp(k);Je(null,bt,U,z,k,R,ce),P.el=bt.el}if(Ke&&Dn(Ke,R),!ot&&(Re=Te&&Te.onVnodeMounted)){const bt=P;Dn(()=>Vs(Re,et,bt),R)}(P.shapeFlag&256||et&&Cu(et.vnode)&&et.vnode.shapeFlag&256)&&k.a&&Dn(k.a,R),k.isMounted=!0,P=U=z=null}},fe=k.effect=new lg(H,()=>U_(X),k.scope),X=k.update=()=>fe.run();X.id=k.uid,Ar(k,!0),X()},K=(k,P,U)=>{P.component=k;const z=k.vnode.props;k.vnode=P,k.next=null,R9(k,P.props,z,U),D9(k,P.children,U),Bi(),Du(void 0,k.update),Ii()},St=(k,P,U,z,R,ce,Ce,H,fe=!1)=>{const X=k&&k.children,Re=k?k.shapeFlag:0,de=P.children,{patchFlag:Te,shapeFlag:Ue}=P;if(Te>0){if(Te&128){re(X,de,U,z,R,ce,Ce,H,fe);return}else if(Te&256){$i(X,de,U,z,R,ce,Ce,H,fe);return}}Ue&8?(Re&16&&at(X,R,ce),de!==X&&oe(U,de)):Re&16?Ue&16?re(X,de,U,z,R,ce,Ce,H,fe):at(X,R,ce,!0):(Re&8&&oe(U,""),Ue&16&&Pt(de,U,z,R,ce,Ce,H,fe))},$i=(k,P,U,z,R,ce,Ce,H,fe)=>{k=k||Ti,P=P||Ti;const X=k.length,Re=P.length,de=Math.min(X,Re);let Te;for(Te=0;Te<de;Te++){const Ue=P[Te]=fe?Vo(P[Te]):qs(P[Te]);Je(k[Te],Ue,U,null,R,ce,Ce,H,fe)}X>Re?at(k,R,ce,!0,!1,de):Pt(P,U,z,R,ce,Ce,H,fe,de)},re=(k,P,U,z,R,ce,Ce,H,fe)=>{let X=0;const Re=P.length;let de=k.length-1,Te=Re-1;for(;X<=de&&X<=Te;){const Ue=k[X],Ke=P[X]=fe?Vo(P[X]):qs(P[X]);if(ja(Ue,Ke))Je(Ue,Ke,U,null,R,ce,Ce,H,fe);else break;X++}for(;X<=de&&X<=Te;){const Ue=k[de],Ke=P[Te]=fe?Vo(P[Te]):qs(P[Te]);if(ja(Ue,Ke))Je(Ue,Ke,U,null,R,ce,Ce,H,fe);else break;de--,Te--}if(X>de){if(X<=Te){const Ue=Te+1,Ke=Ue<Re?P[Ue].el:z;for(;X<=Te;)Je(null,P[X]=fe?Vo(P[X]):qs(P[X]),U,Ke,R,ce,Ce,H,fe),X++}}else if(X>Te)for(;X<=de;)vs(k[X],R,ce,!0),X++;else{const Ue=X,Ke=X,et=new Map;for(X=Ke;X<=Te;X++){const gt=P[X]=fe?Vo(P[X]):qs(P[X]);gt.key!=null&&et.set(gt.key,X)}let ot,bt=0;const vn=Te-Ke+1;let jn=!1,Fr=0;const Ut=new Array(vn);for(X=0;X<vn;X++)Ut[X]=0;for(X=Ue;X<=de;X++){const gt=k[X];if(bt>=vn){vs(gt,R,ce,!0);continue}let tn;if(gt.key!=null)tn=et.get(gt.key);else for(ot=Ke;ot<=Te;ot++)if(Ut[ot-Ke]===0&&ja(gt,P[ot])){tn=ot;break}tn===void 0?vs(gt,R,ce,!0):(Ut[tn-Ke]=X+1,tn>=Fr?Fr=tn:jn=!0,Je(gt,P[tn],U,null,R,ce,Ce,H,fe),bt++)}const Es=jn?F9(Ut):Ti;for(ot=Es.length-1,X=vn-1;X>=0;X--){const gt=Ke+X,tn=P[gt],sl=gt+1<Re?P[gt+1].el:z;Ut[X]===0?Je(null,tn,U,sl,R,ce,Ce,H,fe):jn&&(ot<0||X!==Es[ot]?ys(tn,U,sl,2):ot--)}}},ys=(k,P,U,z,R=null)=>{const{el:ce,type:Ce,transition:H,children:fe,shapeFlag:X}=k;if(X&6){ys(k.component.subTree,P,U,z);return}if(X&128){k.suspense.move(P,U,z);return}if(X&64){Ce.move(k,P,U,Co);return}if(Ce===js){g(ce,P,U);for(let de=0;de<fe.length;de++)ys(fe[de],P,U,z);g(k.anchor,P,U);return}if(Ce===$p){ut(k,P,U);return}if(z!==2&&X&1&&H)if(z===0)H.beforeEnter(ce),g(ce,P,U),Dn(()=>H.enter(ce),R);else{const{leave:de,delayLeave:Te,afterLeave:Ue}=H,Ke=()=>g(ce,P,U),et=()=>{de(ce,()=>{Ke(),Ue&&Ue()})};Te?Te(ce,Ke,et):et()}else g(ce,P,U)},vs=(k,P,U,z=!1,R=!1)=>{const{type:ce,props:Ce,ref:H,children:fe,dynamicChildren:X,shapeFlag:Re,patchFlag:de,dirs:Te}=k;if(H!=null&&Qp(H,null,U,k,!0),Re&256){P.ctx.deactivate(k);return}const Ue=Re&1&&Te,Ke=!Cu(k);let et;if(Ke&&(et=Ce&&Ce.onVnodeBeforeUnmount)&&Vs(et,P,k),Re&6)pt(k.component,U,z);else{if(Re&128){k.suspense.unmount(U,z);return}Ue&&Tr(k,null,P,"beforeUnmount"),Re&64?k.type.remove(k,P,U,R,Co,z):X&&(ce!==js||de>0&&de&64)?at(X,P,U,!1,!0):(ce===js&&de&384||!R&&Re&16)&&at(fe,P,U),z&&Ir(k)}(Ke&&(et=Ce&&Ce.onVnodeUnmounted)||Ue)&&Dn(()=>{et&&Vs(et,P,k),Ue&&Tr(k,null,P,"unmounted")},U)},Ir=k=>{const{type:P,el:U,anchor:z,transition:R}=k;if(P===js){Ko(U,z);return}if(P===$p){Ys(k);return}const ce=()=>{h(U),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(k.shapeFlag&1&&R&&!R.persisted){const{leave:Ce,delayLeave:H}=R,fe=()=>Ce(U,ce);H?H(k.el,ce,fe):fe()}else ce()},Ko=(k,P)=>{let U;for(;k!==P;)U=ke(k),h(k),k=U;h(P)},pt=(k,P,U)=>{const{bum:z,scope:R,update:ce,subTree:Ce,um:H}=k;z&&Dp(z),R.stop(),ce&&(ce.active=!1,vs(Ce,k,P,U)),H&&Dn(H,P),Dn(()=>{k.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},at=(k,P,U,z=!1,R=!1,ce=0)=>{for(let Ce=ce;Ce<k.length;Ce++)vs(k[Ce],P,U,z,R)},b=k=>k.shapeFlag&6?b(k.component.subTree):k.shapeFlag&128?k.suspense.next():ke(k.anchor||k.el),$r=(k,P,U)=>{k==null?P._vnode&&vs(P._vnode,null,null,!0):Je(P._vnode||null,k,P,null,null,null,U),V_(),P._vnode=k},Co={p:Je,um:vs,m:ys,r:Ir,mt:Ie,mc:Pt,pc:St,pbc:Ne,n:b,o:l};let Li,Lr;return u&&([Li,Lr]=u(Co)),{render:$r,hydrate:Li,createApp:I9($r,Li)}}function Ar({effect:l,update:u},m){l.allowRecurse=u.allowRecurse=m}function uk(l,u,m=!1){const g=l.children,h=u.children;if(Qe(g)&&Qe(h))for(let E=0;E<g.length;E++){const T=g[E];let O=h[E];O.shapeFlag&1&&!O.dynamicChildren&&((O.patchFlag<=0||O.patchFlag===32)&&(O=h[E]=Vo(h[E]),O.el=T.el),m||uk(T,O))}}function F9(l){const u=l.slice(),m=[0];let g,h,E,T,O;const F=l.length;for(g=0;g<F;g++){const Q=l[g];if(Q!==0){if(h=m[m.length-1],l[h]<Q){u[g]=h,m.push(g);continue}for(E=0,T=m.length-1;E<T;)O=E+T>>1,l[m[O]]<Q?E=O+1:T=O;Q<l[m[E]]&&(E>0&&(u[g]=m[E-1]),m[E]=g)}}for(E=m.length,T=m[E-1];E-- >0;)m[E]=T,T=u[T];return m}const M9=l=>l.__isTeleport,js=Symbol(void 0),hg=Symbol(void 0),Br=Symbol(void 0),$p=Symbol(void 0),Xa=[];let gs=null;function _u(l=!1){Xa.push(gs=l?null:[])}function U9(){Xa.pop(),gs=Xa[Xa.length-1]||null}let tl=1;function a_(l){tl+=l}function fk(l){return l.dynamicChildren=tl>0?gs||Ti:null,U9(),tl>0&&gs&&gs.push(l),l}function dk(l,u,m,g,h,E){return fk(Jn(l,u,m,g,h,E,!0))}function mk(l,u,m,g,h){return fk(go(l,u,m,g,h,!0))}function z9(l){return l?l.__v_isVNode===!0:!1}function ja(l,u){return l.type===u.type&&l.key===u.key}const $u="__vInternal",pk=({key:l})=>l!=null?l:null,yu=({ref:l,ref_key:u,ref_for:m})=>l!=null?ln(l)||an(l)||Xe(l)?{i:Ks,r:l,k:u,f:!!m}:l:null;function Jn(l,u=null,m=null,g=0,h=null,E=l===js?0:1,T=!1,O=!1){const F={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&pk(u),ref:u&&yu(u),scopeId:q_,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:g,dynamicProps:h,dynamicChildren:null,appContext:null};return O?(bg(F,m),E&128&&l.normalize(F)):m&&(F.shapeFlag|=ln(m)?8:16),tl>0&&!T&&gs&&(F.patchFlag>0||E&6)&&F.patchFlag!==32&&gs.push(F),F}const go=H9;function H9(l,u=null,m=null,g=0,h=null,E=!1){if((!l||l===E9)&&(l=Br),z9(l)){const O=Pi(l,u,!0);return m&&bg(O,m),tl>0&&!E&&gs&&(O.shapeFlag&6?gs[gs.indexOf(l)]=O:gs.push(O)),O.patchFlag|=-2,O}if(tq(l)&&(l=l.__vccOpts),u){u=V9(u);let{class:O,style:F}=u;O&&!ln(O)&&(u.class=ng(O)),cn(F)&&(B_(F)&&!Qe(F)&&(F=An({},F)),u.style=tg(F))}const T=ln(l)?1:i9(l)?128:M9(l)?64:cn(l)?4:Xe(l)?2:0;return Jn(l,u,m,g,h,T,E,!0)}function V9(l){return l?B_(l)||$u in l?An({},l):l:null}function Pi(l,u,m=!1){const{props:g,ref:h,patchFlag:E,children:T}=l,O=u?q9(g||{},u):g;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:O,key:O&&pk(O),ref:u&&u.ref?m&&h?Qe(h)?h.concat(yu(u)):[h,yu(u)]:yu(u):h,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:T,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==js?E===-1?16:E|16:E,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Pi(l.ssContent),ssFallback:l.ssFallback&&Pi(l.ssFallback),el:l.el,anchor:l.anchor}}function W9(l=" ",u=0){return go(hg,null,l,u)}function j9(l="",u=!1){return u?(_u(),mk(Br,null,l)):go(Br,null,l)}function qs(l){return l==null||typeof l=="boolean"?go(Br):Qe(l)?go(js,null,l.slice()):typeof l=="object"?Vo(l):go(hg,null,String(l))}function Vo(l){return l.el===null||l.memo?l:Pi(l)}function bg(l,u){let m=0;const{shapeFlag:g}=l;if(u==null)u=null;else if(Qe(u))m=16;else if(typeof u=="object")if(g&65){const h=u.default;h&&(h._c&&(h._d=!1),bg(l,h()),h._c&&(h._d=!0));return}else{m=32;const h=u._;!h&&!($u in u)?u._ctx=Ks:h===3&&Ks&&(Ks.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Xe(u)?(u={default:u,_ctx:Ks},m=32):(u=String(u),g&64?(m=16,u=[W9(u)]):m=8);l.children=u,l.shapeFlag|=m}function q9(...l){const u={};for(let m=0;m<l.length;m++){const g=l[m];for(const h in g)if(h==="class")u.class!==g.class&&(u.class=ng([u.class,g.class]));else if(h==="style")u.style=tg([u.style,g.style]);else if(ku(h)){const E=u[h],T=g[h];T&&E!==T&&!(Qe(E)&&E.includes(T))&&(u[h]=E?[].concat(E,T):T)}else h!==""&&(u[h]=g[h])}return u}function Vs(l,u,m,g=null){bs(l,u,7,[m,g])}const K9=ck();let G9=0;function Y9(l,u,m){const g=l.type,h=(u?u.appContext:l.appContext)||K9,E={uid:G9++,vnode:l,type:g,parent:u,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new p4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rk(g,h),emitsOptions:j_(g,h),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:g.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=u?u.root:E,E.emit=e9.bind(null,E),l.ce&&l.ce(E),E}let rn=null;const Oi=l=>{rn=l,l.scope.on()},Dr=()=>{rn&&rn.scope.off(),rn=null};function gk(l){return l.vnode.shapeFlag&4}let nl=!1;function X9(l,u=!1){nl=u;const{props:m,children:g}=l.vnode,h=gk(l);A9(l,m,h,u),O9(l,g);const E=h?Q9(l,u):void 0;return nl=!1,E}function Q9(l,u){const m=l.type;l.accessCache=Object.create(null),l.proxy=I_(new Proxy(l.ctx,S9));const{setup:g}=m;if(g){const h=l.setupContext=g.length>1?J9(l):null;Oi(l),Bi();const E=jo(g,l,0,[l.props,h]);if(Ii(),Dr(),v_(E)){if(E.then(Dr,Dr),u)return E.then(T=>{l_(l,T,u)}).catch(T=>{Ou(T,l,0)});l.asyncDep=E}else l_(l,E,u)}else hk(l,u)}function l_(l,u,m){Xe(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:cn(u)&&(l.setupState=F_(u)),hk(l,m)}let c_;function hk(l,u,m){const g=l.type;if(!l.render){if(!u&&c_&&!g.render){const h=g.template;if(h){const{isCustomElement:E,compilerOptions:T}=l.appContext.config,{delimiters:O,compilerOptions:F}=g,Q=An(An({isCustomElement:E,delimiters:O},T),F);g.render=c_(h,Q)}}l.render=g.render||hs}Oi(l),Bi(),w9(l),Ii(),Dr()}function Z9(l){return new Proxy(l.attrs,{get(u,m){return Wn(l,"get","$attrs"),u[m]}})}function J9(l){const u=g=>{l.exposed=g||{}};let m;return{get attrs(){return m||(m=Z9(l))},slots:l.slots,emit:l.emit,expose:u}}function Cg(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(F_(I_(l.exposed)),{get(u,m){if(m in u)return u[m];if(m in Su)return Su[m](l)}}))}function eq(l){return Xe(l)&&l.displayName||l.name}function tq(l){return Xe(l)&&"__vccOpts"in l}const bk=(l,u)=>G4(l,u,nl),nq="3.2.36",sq="http://www.w3.org/2000/svg",Pr=typeof document!="undefined"?document:null,u_=Pr&&Pr.createElement("template"),oq={insert:(l,u,m)=>{u.insertBefore(l,m||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,m,g)=>{const h=u?Pr.createElementNS(sq,l):Pr.createElement(l,m?{is:m}:void 0);return l==="select"&&g&&g.multiple!=null&&h.setAttribute("multiple",g.multiple),h},createText:l=>Pr.createTextNode(l),createComment:l=>Pr.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Pr.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},cloneNode(l){const u=l.cloneNode(!0);return"_value"in l&&(u._value=l._value),u},insertStaticContent(l,u,m,g,h,E){const T=m?m.previousSibling:u.lastChild;if(h&&(h===E||h.nextSibling))for(;u.insertBefore(h.cloneNode(!0),m),!(h===E||!(h=h.nextSibling)););else{u_.innerHTML=g?`<svg>${l}</svg>`:l;const O=u_.content;if(g){const F=O.firstChild;for(;F.firstChild;)O.appendChild(F.firstChild);O.removeChild(F)}u.insertBefore(O,m)}return[T?T.nextSibling:u.firstChild,m?m.previousSibling:u.lastChild]}};function rq(l,u,m){const g=l._vtc;g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?l.removeAttribute("class"):m?l.setAttribute("class",u):l.className=u}function iq(l,u,m){const g=l.style,h=ln(m);if(m&&!h){for(const E in m)Zp(g,E,m[E]);if(u&&!ln(u))for(const E in u)m[E]==null&&Zp(g,E,"")}else{const E=g.display;h?u!==m&&(g.cssText=m):u&&l.removeAttribute("style"),"_vod"in l&&(g.display=E)}}const f_=/\s*!important$/;function Zp(l,u,m){if(Qe(m))m.forEach(g=>Zp(l,u,g));else if(m==null&&(m=""),u.startsWith("--"))l.setProperty(u,m);else{const g=aq(l,u);f_.test(m)?l.setProperty(Di(g),m.replace(f_,""),"important"):l[g]=m}}const d_=["Webkit","Moz","ms"],Lp={};function aq(l,u){const m=Lp[u];if(m)return m;let g=Gs(u);if(g!=="filter"&&g in l)return Lp[u]=g;g=Au(g);for(let h=0;h<d_.length;h++){const E=d_[h]+g;if(E in l)return Lp[u]=E}return u}const m_="http://www.w3.org/1999/xlink";function lq(l,u,m,g,h){if(g&&u.startsWith("xlink:"))m==null?l.removeAttributeNS(m_,u.slice(6,u.length)):l.setAttributeNS(m_,u,m);else{const E=t4(u);m==null||E&&!b_(m)?l.removeAttribute(u):l.setAttribute(u,E?"":m)}}function cq(l,u,m,g,h,E,T){if(u==="innerHTML"||u==="textContent"){g&&T(g,h,E),l[u]=m==null?"":m;return}if(u==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const F=m==null?"":m;(l.value!==F||l.tagName==="OPTION")&&(l.value=F),m==null&&l.removeAttribute(u);return}let O=!1;if(m===""||m==null){const F=typeof l[u];F==="boolean"?m=b_(m):m==null&&F==="string"?(m="",O=!0):F==="number"&&(m=0,O=!0)}try{l[u]=m}catch{}O&&l.removeAttribute(u)}const[Ck,uq]=(()=>{let l=Date.now,u=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(l=performance.now.bind(performance));const m=navigator.userAgent.match(/firefox\/(\d+)/i);u=!!(m&&Number(m[1])<=53)}return[l,u]})();let Jp=0;const fq=Promise.resolve(),dq=()=>{Jp=0},mq=()=>Jp||(fq.then(dq),Jp=Ck());function pq(l,u,m,g){l.addEventListener(u,m,g)}function gq(l,u,m,g){l.removeEventListener(u,m,g)}function hq(l,u,m,g,h=null){const E=l._vei||(l._vei={}),T=E[u];if(g&&T)T.value=g;else{const[O,F]=bq(u);if(g){const Q=E[u]=Cq(g,h);pq(l,O,Q,F)}else T&&(gq(l,O,T,F),E[u]=void 0)}}const p_=/(?:Once|Passive|Capture)$/;function bq(l){let u;if(p_.test(l)){u={};let m;for(;m=l.match(p_);)l=l.slice(0,l.length-m[0].length),u[m[0].toLowerCase()]=!0}return[Di(l.slice(2)),u]}function Cq(l,u){const m=g=>{const h=g.timeStamp||Ck();(uq||h>=m.attached-1)&&bs(yq(g,m.value),u,5,[g])};return m.value=l,m.attached=mq(),m}function yq(l,u){if(Qe(u)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},u.map(g=>h=>!h._stopped&&g&&g(h))}else return u}const g_=/^on[a-z]/,vq=(l,u,m,g,h=!1,E,T,O,F)=>{u==="class"?rq(l,g,h):u==="style"?iq(l,m,g):ku(u)?sg(u)||hq(l,u,m,g,T):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):Eq(l,u,g,h))?cq(l,u,g,E,T,O,F):(u==="true-value"?l._trueValue=g:u==="false-value"&&(l._falseValue=g),lq(l,u,g,h))};function Eq(l,u,m,g){return g?!!(u==="innerHTML"||u==="textContent"||u in l&&g_.test(u)&&Xe(m)):u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA"||g_.test(u)&&ln(m)?!1:u in l}const xq=An({patchProp:vq},oq);let h_;function Sq(){return h_||(h_=$9(xq))}const wq=(...l)=>{const u=Sq().createApp(...l),{mount:m}=u;return u.mount=g=>{const h=_q(g);if(!h)return;const E=u._component;!Xe(E)&&!E.render&&!E.template&&(E.template=h.innerHTML),h.innerHTML="";const T=m(h,!1,h instanceof SVGElement);return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),T},u};function _q(l){return ln(l)?document.querySelector(l):l}var kq=(l,u)=>{const m=l.__vccOpts||l;for(const[g,h]of u)m[g]=h;return m};const Nq=Y_({name:"App",components:{},setup(){const l=Pu({content:"init content",show:!0,locale:""}),u=bk(()=>{let g={};return l.locale==="en"&&(g={language:"en_US"}),g});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:u,switchLanguage:m}}}),Tq=Jn("h1",null,"VueTinymce example",-1),Aq=Jn("br",null,null,-1),Rq=Jn("br",null,null,-1),Pq=Jn("br",null,null,-1),Oq=Jn("br",null,null,-1),Dq=Jn("h2",null,"output",-1),Bq=["innerHTML"];function Iq(l,u,m,g,h,E){const T=v9("vue-tinymce");return _u(),dk(js,null,[Tq,Jn("button",{onClick:u[0]||(u[0]=O=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+r4(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),Aq,Rq,Jn("button",{onClick:u[1]||(u[1]=(...O)=>l.switchLanguage&&l.switchLanguage(...O))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),Pq,Oq,l.data.show?(_u(),mk(T,{key:0,modelValue:l.data.content,"onUpdate:modelValue":u[2]||(u[2]=O=>l.data.content=O),config:l.config},null,8,["modelValue","config"])):j9("",!0),Dq,Jn("div",{innerHTML:l.data.content},null,8,Bq)],64)}var $q=kq(Nq,[["render",Iq]]),yk={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},g=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},h=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},T=E(function(e,t){return e===t}),O=T,F=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},Q=function(e,t){return h(F(e),function(n){return g(n,t)})},oe=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!Q(O).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},ve=E(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:m(n)?e===t:n==="array"?F(ve).eq(e,t):n==="object"?oe(ve).eq(e,t):!1});const ke=Object.getPrototypeOf,Ve=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},mt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Ve(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},ht=e=>t=>mt(t)===e,Je=e=>t=>typeof t===e,it=e=>t=>e===t,Bn=(e,t)=>ut(e)&&Ve(e,t,(n,s)=>ke(n)===s),he=ht("string"),ut=ht("object"),Ys=e=>Bn(e,Object),Tt=ht("array"),Xs=it(null),Cs=Je("boolean"),Pt=it(void 0),Mt=e=>e==null,Ne=e=>!Mt(e),Ye=Je("function"),yn=Je("number"),Qs=(e,t)=>{if(Tt(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Ie=()=>{},Ot=(e,t)=>(...n)=>e(t.apply(null,n)),kt=(e,t)=>n=>e(t(n)),K=e=>()=>e,St=e=>e,$i=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const ys=e=>t=>!e(t),vs=e=>()=>{throw new Error(e)},Ir=e=>e(),Ko=e=>{e()},pt=K(!1),at=K(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return Ne(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const $r=Array.prototype.slice,Co=Array.prototype.indexOf,Li=Array.prototype.push,Lr=(e,t)=>Co.call(e,t),k=(e,t)=>{const n=Lr(e,t);return n===-1?b.none():b.some(n)},P=(e,t)=>Lr(e,t)>-1,U=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},z=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},R=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},ce=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},Ce=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},H=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},fe=(e,t,n)=>(ce(e,(s,o)=>{n=t(n,s,o)}),n),X=(e,t,n)=>(R(e,(s,o)=>{n=t(n,s,o)}),n),Re=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},de=(e,t)=>Re(e,t,pt),Te=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},Ue=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Tt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Li.apply(t,e[n])}return t},Ke=(e,t)=>Ue(z(e,t)),et=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},ot=e=>{const t=$r.call(e,0);return t.reverse(),t},bt=(e,t)=>H(e,n=>!P(t,n)),vn=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},jn=(e,t)=>{const n=$r.call(e,0);return n.sort(t),n},Fr=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),Ut=e=>Fr(e,0),Es=e=>Fr(e,e.length-1),gt=Ye(Array.from)?Array.from:e=>$r.call(e),tn=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},sl=(e,t)=>{const n=[],s=Ye(t)?o=>U(n,r=>t(r,o)):o=>P(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},es=Object.keys,Ek=Object.hasOwnProperty,Ct=(e,t)=>{const n=es(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},Fi=(e,t)=>xk(e,(n,s)=>({k:s,v:t(n,s)})),xk=(e,t)=>{const n={};return Ct(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Lu=e=>(t,n)=>{e[n]=t},yg=(e,t,n,s)=>{const o={};return Ct(e,(r,i)=>{(t(r,i)?n:s)(r,i)}),o},Sk=(e,t)=>{const n={},s={};return yg(e,t,Lu(n),Lu(s)),{t:n,f:s}},Mi=(e,t)=>{const n={};return yg(e,t,Lu(n),Ie),n},Fu=(e,t)=>{const n=[];return Ct(e,(s,o)=>{n.push(t(s,o))}),n},vg=e=>Fu(e,St),lt=(e,t)=>Fe(e,t)?b.from(e[t]):b.none(),Fe=(e,t)=>Ek.call(e,t),Mr=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,wk=(e,t,n=ve)=>oe(n).eq(e,t),Eg=e=>{const t={};return R(e,n=>{t[n]={}}),es(t)},Mu=Array.isArray,_k=e=>{if(Mu(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Ui=(e,t,n)=>{let s,o;if(!e)return!1;if(n=n||e,e.length!==void 0){for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(s in e)if(Fe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Uu=(e,t)=>{const n=[];return Ui(e,(s,o)=>{n.push(t(s,o,e))}),n},Ur=(e,t)=>{const n=[];return Ui(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},xg=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},ol=(e,t,n,s)=>{let o=Pt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Sg=(e,t,n)=>{let s,o;for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},yo=e=>e[e.length-1],Go=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},kk=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(f),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},Nk=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},Tk=(e,t)=>{const n=Nk(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return zu(s(1),s(2))},Ak=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?wg():Tk(e,n)},wg=()=>zu(0,0),zu=(e,t)=>({major:e,minor:t}),zi={nu:zu,detect:Ak,unknown:wg},Rk=(e,t)=>tn(t.brands,n=>{const s=n.brand.toLowerCase();return de(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:zi.nu(parseInt(n.version,10),0)}))}),_g=(e,t)=>{const n=String(t).toLowerCase();return de(e,s=>s.search(n))},Pk=(e,t)=>_g(e,t).map(n=>{const s=zi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Ok=(e,t)=>_g(e,t).map(n=>{const s=zi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Dk=(e,t)=>e.substring(t),kg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Bk=(e,t)=>qn(e,t)?Dk(e,t.length):e,un=(e,t)=>e.indexOf(t)!==-1,qn=(e,t)=>kg(e,t,0),Ng=(e,t)=>kg(e,t,e.length-t.length),Hu=e=>t=>t.replace(e,""),zr=Hu(/^\s+|\s+$/g),Ik=Hu(/^\s+/g),Tg=Hu(/\s+$/g),Zs=e=>e.length>0,rl=e=>!Zs(e),$k=(e,t)=>t<=0?"":new Array(t+1).join(e),Lk=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},Vu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Js=e=>t=>un(t,e),Fk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>un(e,"edge/")&&un(e,"chrome")&&un(e,"safari")&&un(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Vu],search:e=>un(e,"chrome")&&!un(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>un(e,"msie")||un(e,"trident")},{name:"Opera",versionRegexes:[Vu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Js("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Js("firefox")},{name:"Safari",versionRegexes:[Vu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(un(e,"safari")||un(e,"mobile/"))&&un(e,"applewebkit")}],Mk=[{name:"Windows",search:Js("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>un(e,"iphone")||un(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Js("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Js("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Js("linux"),versionRegexes:[]},{name:"Solaris",search:Js("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Js("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Js("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ag={browsers:K(Fk),oses:K(Mk)},Rg="Edge",Pg="Chromium",Og="IE",Dg="Opera",Bg="Firefox",Ig="Safari",Uk=()=>$g({current:void 0,version:zi.unknown()}),$g=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Rg),isChromium:s(Pg),isIE:s(Og),isOpera:s(Dg),isFirefox:s(Bg),isSafari:s(Ig)}},Lg={unknown:Uk,nu:$g,edge:K(Rg),chromium:K(Pg),ie:K(Og),opera:K(Dg),firefox:K(Bg),safari:K(Ig)},Fg="Windows",Mg="iOS",Ug="Android",zg="Linux",Hg="macOS",Vg="Solaris",Wg="FreeBSD",jg="ChromeOS",zk=()=>qg({current:void 0,version:zi.unknown()}),qg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Fg),isiOS:s(Mg),isAndroid:s(Ug),isMacOS:s(Hg),isLinux:s(zg),isSolaris:s(Vg),isFreeBSD:s(Wg),isChromeOS:s(jg)}},Kg={unknown:zk,nu:qg,windows:K(Fg),ios:K(Mg),android:K(Ug),linux:K(zg),macos:K(Hg),solaris:K(Vg),freebsd:K(Wg),chromeos:K(jg)},Hk={detect:(e,t,n)=>{const s=Ag.browsers(),o=Ag.oses(),r=t.bind(c=>Rk(s,c)).orThunk(()=>Pk(s,e)).fold(Lg.unknown,Lg.nu),i=Ok(o,e).fold(Kg.unknown,Kg.nu),a=kk(i,r,e,n);return{browser:r,os:i,deviceType:a}}},Vk=e=>window.matchMedia(e).matches;let Wk=Go(()=>Hk.detect(navigator.userAgent,b.from(navigator.userAgentData),Vk));const vo=()=>Wk(),jk=navigator.userAgent,Wu=vo(),xs=Wu.browser,Ss=Wu.os,Yo=Wu.deviceType,qk=jk.indexOf("Windows Phone")!==-1,tt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:xs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!xs.isIE(),windowsPhone:qk,browser:{current:xs.current,version:xs.version,isChromium:xs.isChromium,isEdge:xs.isEdge,isFirefox:xs.isFirefox,isIE:xs.isIE,isOpera:xs.isOpera,isSafari:xs.isSafari},os:{current:Ss.current,version:Ss.version,isAndroid:Ss.isAndroid,isChromeOS:Ss.isChromeOS,isFreeBSD:Ss.isFreeBSD,isiOS:Ss.isiOS,isLinux:Ss.isLinux,isMacOS:Ss.isMacOS,isSolaris:Ss.isSolaris,isWindows:Ss.isWindows},deviceType:{isDesktop:Yo.isDesktop,isiPad:Yo.isiPad,isiPhone:Yo.isiPhone,isPhone:Yo.isPhone,isTablet:Yo.isTablet,isTouch:Yo.isTouch,isWebView:Yo.isWebView}},Kk=/^\s*|\s*$/g,Gg=e=>e==null?"":(""+e).replace(Kk,""),Yg=(e,t)=>t?t==="array"&&Mu(e)?!0:typeof e===t:e!==void 0,Gk=(e,t,n)=>{let s;for(e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},s=e.length;s--;)n[e[s]]={};return n},Yk=Fe,Xk=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Fe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Xg=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Ui(e,(o,r)=>{if(t.call(s,o,r,n)===!1)return!1;Xg(o,t,n,s)}))},G={trim:Gg,isArray:Mu,is:Yg,toArray:_k,makeMap:Gk,each:Ui,map:Uu,grep:Ur,inArray:xg,hasOwn:Yk,extend:Xk,walk:Xg,resolve:(e,t)=>{let n,s;for(t=t||window,e=e.split("."),n=0,s=e.length;n<s&&(t=t[e[n]],!!t);n++);return t},explode:(e,t)=>!e||Yg(e,"array")?e:Uu(e.split(t||","),Gg),_addCacheSuffix:e=>{const t=tt.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Hr=(e,t,n=$i)=>e.exists(s=>n(s,t)),Qk=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},En=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),Zk=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),ju=(e,t)=>e?b.some(t):b.none();typeof window!="undefined"||Function("return this;")();const Qg=8,Zg=9,Jg=11,Hi=1,eh=3,yt=e=>e.dom.nodeName.toLowerCase(),th=e=>e.dom.nodeType,il=e=>t=>th(t)===e,Jk=e=>th(e)===Qg||yt(e)==="#comment",Kn=il(Hi),In=il(eh),eN=il(Zg),tN=il(Jg),nN=e=>t=>Kn(t)&&yt(t)===e,nh=(e,t,n)=>{if(he(n)||Cs(n)||yn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},fn=(e,t,n)=>{nh(e.dom,t,n)},ws=(e,t)=>{const n=e.dom;Ct(t,(s,o)=>{nh(n,o,s)})},$n=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},al=(e,t)=>b.from($n(e,t)),ll=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Gn=(e,t)=>{e.dom.removeAttribute(t)},sN=e=>{const t=e.dom.attributes;return t==null||t.length===0},sh=e=>X(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),qu=(e,t)=>{const n=$n(e,t);return n===void 0||n===""?[]:n.split(" ")},oN=(e,t,n)=>{const o=qu(e,t).concat([n]);return fn(e,t,o.join(" ")),!0},rN=(e,t,n)=>{const s=H(qu(e,t),o=>o!==n);return s.length>0?fn(e,t,s.join(" ")):Gn(e,t),!1},Vi=e=>e.dom.classList!==void 0,oh=e=>qu(e,"class"),rh=(e,t)=>oN(e,"class",t),ih=(e,t)=>rN(e,"class",t),iN=(e,t)=>P(oh(e),t)?ih(e,t):rh(e,t),Wi=(e,t)=>{Vi(e)?e.dom.classList.add(t):rh(e,t)},ah=e=>{(Vi(e)?e.dom.classList:oh(e)).length===0&&Gn(e,"class")},lh=(e,t)=>{Vi(e)?e.dom.classList.remove(t):ih(e,t),ah(e)},aN=(e,t)=>{const n=Vi(e)?e.dom.classList.toggle(t):iN(e,t);return ah(e),n},Ku=(e,t)=>Vi(e)&&e.dom.classList.contains(t),ji=e=>e.style!==void 0&&Ye(e.style.getPropertyValue),lN=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return qi(s.childNodes[0])},cN=(e,t)=>{const s=(t||document).createElement(e);return qi(s)},uN=(e,t)=>{const s=(t||document).createTextNode(e);return qi(s)},qi=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},_={fromHtml:lN,fromTag:cN,fromText:uN,fromDom:qi,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(qi)},ch=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},eo=(e,t)=>{const n=e.dom;if(n.nodeType!==Hi)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},uh=e=>e.nodeType!==Hi&&e.nodeType!==Zg&&e.nodeType!==Jg||e.childElementCount===0,fN=(e,t)=>{const n=t===void 0?document:t.dom;return uh(n)?[]:z(n.querySelectorAll(e),_.fromDom)},dN=(e,t)=>{const n=t===void 0?document:t.dom;return uh(n)?b.none():b.from(n.querySelector(e)).map(_.fromDom)},nt=(e,t)=>e.dom===t.dom,to=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},fh=e=>_.fromDom(e.dom.ownerDocument),Eo=e=>eN(e)?e:fh(e),mN=e=>_.fromDom(Eo(e).dom.documentElement),dh=e=>_.fromDom(Eo(e).dom.defaultView),Yn=e=>b.from(e.dom.parentNode).map(_.fromDom),pN=e=>b.from(e.dom.parentElement).map(_.fromDom),gN=(e,t)=>{const n=Ye(t)?t:pt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=_.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},hN=e=>{const t=n=>H(n,s=>!nt(e,s));return Yn(e).map(Yt).map(t).getOr([])},Xo=e=>b.from(e.dom.previousSibling).map(_.fromDom),Ki=e=>b.from(e.dom.nextSibling).map(_.fromDom),mh=e=>ot(ch(e,Xo)),ph=e=>ch(e,Ki),Yt=e=>z(e.dom.childNodes,_.fromDom),cl=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(_.fromDom)},gh=e=>cl(e,0),Gu=e=>cl(e,e.dom.childNodes.length-1),hh=e=>e.dom.childNodes.length,bN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return _.fromDom(t)},bh=e=>tN(e)&&Ne(e.dom.host),Ch=Ye(Element.prototype.attachShadow)&&Ye(Node.prototype.getRootNode),CN=K(Ch),Qo=Ch?e=>_.fromDom(e.dom.getRootNode()):Eo,Yu=e=>bh(e)?e:bN(Eo(e)),yN=e=>{const t=Qo(e);return bh(t)?b.some(t):b.none()},vN=e=>_.fromDom(e.dom.host),yh=e=>{if(CN()&&Ne(e.target)){const t=_.fromDom(e.target);if(Kn(t)&&EN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ut(n)}}return b.from(e.target)},EN=e=>Ne(e.dom.shadowRoot),Vr=e=>{const t=In(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return yN(_.fromDom(t)).fold(()=>n.body.contains(t),kt(Vr,vN))},vh=(e,t,n)=>{if(!he(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ji(e)&&e.style.setProperty(t,n)},xN=(e,t)=>{ji(e)&&e.style.removeProperty(t)},Eh=(e,t,n)=>{const s=e.dom;vh(s,t,n)},ul=(e,t)=>{const n=e.dom;Ct(t,(s,o)=>{vh(n,o,s)})},_s=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Vr(e)?xh(n,t):o},xh=(e,t)=>ji(e)?e.style.getPropertyValue(t):"",fl=(e,t)=>{const n=e.dom,s=xh(n,t);return b.from(s).filter(o=>o.length>0)},Sh=e=>{const t={},n=e.dom;if(ji(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},wh=(e,t)=>{const n=e.dom;xN(n,t),Hr(al(e,"style").map(zr),"")&&Gn(e,"style")},SN=e=>e.dom.offsetWidth,Xn=(e,t)=>{Yn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},xo=(e,t)=>{Ki(e).fold(()=>{Yn(e).each(o=>{It(o,t)})},s=>{Xn(s,t)})},_h=(e,t)=>{gh(e).fold(()=>{It(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},It=(e,t)=>{e.dom.appendChild(t.dom)},wN=(e,t)=>{Xn(e,t),It(t,e)},_N=(e,t)=>{R(t,(n,s)=>{const o=s===0?e:t[s-1];xo(o,n)})},Zo=(e,t)=>{R(t,n=>{It(e,n)})},Gi=e=>{e.dom.textContent="",R(Yt(e),t=>{At(t)})},At=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},So=e=>{const t=Yt(e);t.length>0&&_N(e,t),At(e)},kN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Yt(_.fromDom(s))},NN=e=>z(e,_.fromDom),kh=e=>e.dom.innerHTML,Xu=(e,t)=>{const s=fh(e).dom,o=_.fromDom(s.createDocumentFragment()),r=kN(t,s);Zo(o,r),Gi(e),It(e,o)},TN=e=>{const t=_.fromTag("div"),n=_.fromDom(e.dom.cloneNode(!0));return It(t,n),kh(t)},AN=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),RN=e=>{const t=_.fromDom(yh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Ot(s,n);return AN(t,e.clientX,e.clientY,n,s,o,e)},PN=(e,t)=>n=>{e(n)&&t(RN(n))},ON=(e,t,n,s,o)=>{const r=PN(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(BN,e,t,r,o)}},DN=(e,t,n,s)=>ON(e,t,n,s,!1),BN=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Nh=(e,t)=>({left:e,top:t,translate:(s,o)=>Nh(e+s,t+o)}),Wr=Nh,IN=e=>{const t=e.getBoundingClientRect();return Wr(t.left,t.top)},dl=(e,t)=>e!==void 0?e:t!==void 0?t:0,$N=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Wr(n.offsetLeft,n.offsetTop);const r=dl(s==null?void 0:s.pageYOffset,o.scrollTop),i=dl(s==null?void 0:s.pageXOffset,o.scrollLeft),a=dl(o.clientTop,n.clientTop),c=dl(o.clientLeft,n.clientLeft);return Qu(e).translate(i-c,r-a)},Qu=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Wr(s.offsetLeft,s.offsetTop):Vr(e)?IN(t):Wr(0,0)},Zu=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Wr(n,s)},Th=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Ah=(e,t)=>{vo().browser.isSafari()&&Ye(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},LN=e=>{const t=e===void 0?window:e;return vo().browser.isFirefox()?b.none():b.from(t.visualViewport)},Rh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Ph=e=>{const t=e===void 0?window:e,n=t.document,s=Zu(_.fromDom(n));return LN(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return Rh(s.left,s.top,r,i)},o=>Rh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},Jo=e=>t=>!!t&&t.nodeType===e,ml=e=>!!e&&!Object.getPrototypeOf(e),Ee=Jo(1),Qn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return P(t,s)}return!1}},pl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Ee(s))for(let o=0;o<n.length;o++){const r=s.ownerDocument.defaultView.getComputedStyle(s,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},Oh=e=>t=>Ee(t)&&t.hasAttribute(e),FN=(e,t)=>n=>Ee(n)&&n.getAttribute(e)===t,er=e=>Ee(e)&&e.hasAttribute("data-mce-bogus"),MN=e=>Ee(e)&&e.getAttribute("data-mce-bogus")==="all",Yi=e=>Ee(e)&&e.tagName==="TABLE",Dh=e=>t=>!!(Ee(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ju=Qn(["textarea","input"]),ne=Jo(3),UN=Jo(4),zN=Jo(7),Bh=Jo(8),ef=Jo(9),tf=Jo(11),Dt=Qn(["br"]),Ih=Qn(["img"]),no=Dh("true"),wt=Dh("false"),gl=Qn(["td","th"]),ks=Qn(["video","audio","object","embed"]),HN=vo().browser,$h=e=>de(e,Kn),VN=e=>HN.isFirefox()&&yt(e)==="table"?$h(Yt(e)).filter(t=>yt(t)==="caption").bind(t=>$h(ph(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Lh=(e,t)=>e.children&&P(e.children,t),WN=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&_s(_.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!Lh(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Lh(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=VN(_.fromDom(t))}return{x:s,y:o}};var Fh=(e,t,n,s,o)=>e(n,s)?b.some(n):Ye(o)&&o(n)?b.none():t(n,s,o);const jr=(e,t,n)=>{let s=e.dom;const o=Ye(n)?n:pt;for(;s.parentNode;){s=s.parentNode;const r=_.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},hl=(e,t,n)=>Fh((o,r)=>r(o),jr,e,t,n),jN=(e,t)=>{const n=e.dom;return n.parentNode?qN(_.fromDom(n.parentNode),s=>!nt(e,s)&&t(s)):b.none()},qN=(e,t)=>{const n=o=>t(_.fromDom(o));return de(e.dom.childNodes,n).map(_.fromDom)},KN=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=_.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},Xi=(e,t,n)=>jr(e,s=>eo(s,t),n),Qi=(e,t)=>dN(t,e),tr=(e,t,n)=>Fh((o,r)=>eo(o,r),Xi,e,t,n),Mh=(e,t={})=>{let n=0;const s={},o=_.fromDom(e),r=Eo(o),i=t.maxLoadTime||5e3,a=v=>{t.referrerPolicy=v},c=v=>{It(Yu(o),v)},f=v=>{const S=Yu(o);Qi(S,"#"+v).each(At)},d=v=>lt(s,v).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=v=>new Promise((S,w)=>{let A;const M=G._addCacheSuffix(v),B=d(M);s[M]=B,B.count++;const $=(ae,se)=>{R(ae,Ko),B.status=se,B.passed=[],B.failed=[],A&&(A.onload=null,A.onerror=null,A=null)},te=()=>$(B.passed,2),W=()=>$(B.failed,3),q=(ae,se)=>{ae()||(Date.now()-xe<i?setTimeout(se):W())},Z=()=>{q(()=>{const ae=e.styleSheets;let se=ae.length;for(;se--;){const je=ae[se].ownerNode;if(je&&je.id===A.id)return te(),!0}return!1},Z)};if(S&&B.passed.push(S),w&&B.failed.push(w),B.status===1)return;if(B.status===2){te();return}if(B.status===3){W();return}B.status=1;const ee=_.fromTag("link",r.dom);ws(ee,{rel:"stylesheet",type:"text/css",id:B.id});const xe=Date.now();t.contentCssCors&&fn(ee,"crossOrigin","anonymous"),t.referrerPolicy&&fn(ee,"referrerpolicy",t.referrerPolicy),A=ee.dom,A.onload=Z,A.onerror=W,c(ee),fn(ee,"href",M)}),y=v=>Promise.allSettled(z(v,w=>p(w).then(K(w)))).then(w=>{const A=Ce(w,M=>M.status==="fulfilled");return A.fail.length>0?Promise.reject(z(A.fail,M=>M.reason)):z(A.pass,M=>M.value)}),C=v=>{const S=G._addCacheSuffix(v);lt(s,S).each(w=>{--w.count===0&&(delete s[S],f(w.id))})};return{load:p,loadAll:y,unload:C,unloadAll:v=>{R(v,S=>{C(S)})},_setReferrerPolicy:a}},Uh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Qo(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=Mh(r,s);return e.set(r,i),i})}}})();class zt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node}findSibling(t,n,s,o){let r,i;if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){if(r=t[s],r)return r;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n,s,o){let r,i,a;if(t){if(r=t[s],this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(a=r[n];a;a=a[n])if(!a[n])return a}return r}if(i=t.parentNode,i&&i!==this.rootNode)return i}}}const GN=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],YN=["td","th"],XN=["thead","tbody","tfoot"],QN=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ZN=["h1","h2","h3","h4","h5","h6"],JN=["li","dd","dt"],eT=["ul","ol","dl"],tT=["pre","script","textarea","style"],wo=e=>{let t;return n=>(t=t||vn(e,at),Fe(t,yt(n)))},nT=wo(ZN),Ns=wo(GN),sT=e=>yt(e)==="table",nf=e=>Kn(e)&&!Ns(e),qr=e=>Kn(e)&&yt(e)==="br",zh=wo(QN),sf=wo(eT),Zi=wo(JN),oT=wo(XN),bl=wo(YN),Cl=wo(tT),rT=(e,t,n)=>Xi(e,t,n).isSome(),Ji="\uFEFF",Xt="\xA0",Hh=e=>e===Ji,iT=e=>e.replace(/\uFEFF/g,""),Kt=Ji,yl=Hh,_o=iT,aT=Ee,Kr=ne,Gr=e=>(Kr(e)&&(e=e.parentNode),aT(e)&&e.hasAttribute("data-mce-caret")),Yr=e=>Kr(e)&&yl(e.data),Ln=e=>Gr(e)||Yr(e),Vh=e=>e.firstChild!==e.lastChild||!Dt(e.firstChild),lT=(e,t)=>{const s=e.ownerDocument.createTextNode(Kt),o=e.parentNode;if(t){const r=e.previousSibling;if(Kr(r)){if(Ln(r))return r;if(El(r))return r.splitText(r.data.length-1)}o.insertBefore(s,e)}else{const r=e.nextSibling;if(Kr(r)){if(Ln(r))return r;if(vl(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(s,e.nextSibling):o.appendChild(s)}return s},of=e=>{const t=e.container();return ne(t)?t.data.charAt(e.offset())===Kt||e.isAtStart()&&Yr(t.previousSibling):!1},rf=e=>{const t=e.container();return ne(t)?t.data.charAt(e.offset()-1)===Kt||e.isAtEnd()&&Yr(t.nextSibling):!1},cT=()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},uT=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(cT());const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},vl=e=>Kr(e)&&e.data[0]===Kt,El=e=>Kr(e)&&e.data[e.data.length-1]===Kt,fT=e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];er(n)&&n.parentNode.removeChild(n)},af=e=>e&&e.hasAttribute("data-mce-caret")?(fT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Wh=e=>Gr(e.startContainer),jh=no,dT=wt,mT=Dt,pT=ne,gT=Qn(["script","style","textarea"]),qh=Qn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),hT=Qn(["table"]),bT=Ln,ts=e=>bT(e)?!1:pT(e)?!gT(e.parentNode):qh(e)||mT(e)||hT(e)||lf(e),CT=e=>Ee(e)&&e.getAttribute("unselectable")==="true",lf=e=>CT(e)===!1&&dT(e),yT=(e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(lf(e))return!1;if(jh(e))return!0}return!0},vT=e=>lf(e)?X(gt(e.getElementsByTagName("*")),(t,n)=>t||jh(n),!1)!==!0:!1,ET=e=>qh(e)||vT(e),Kh=(e,t)=>ts(e)&&yT(e,t),xT=/^[ \t\r\n]*$/,nr=e=>xT.test(e),ST=e=>" \f	\v".indexOf(e)!==-1,Gh=e=>e===`
`||e==="\r",wT=(e,t)=>t<e.length&&t>=0?Gh(e[t]):!1,Yh=(e,t=4,n=!0,s=!0)=>{const o=$k(" ",t),r=e.replace(/\t/g,o);return X(r,(a,c)=>ST(c)||c===Xt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||wT(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Xt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Gh(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},_T=(e,t)=>{const n=_.fromDom(t),s=_.fromDom(e);return rT(s,"pre,code",re(nt,n))},kT=(e,t)=>ne(e)&&nr(e.data)&&_T(e,t)===!1,NT=e=>Ee(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),xl=(e,t)=>ts(e)&&kT(e,t)===!1||NT(e)||TT(e),TT=Oh("data-mce-bookmark"),AT=Oh("data-mce-bogus"),RT=FN("data-mce-bogus","all"),PT=(e,t)=>{let n=0;if(xl(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new zt(s,e);do{if(t){if(RT(s)){s=o.next(!0);continue}if(AT(s)){s=o.next();continue}}if(Dt(s)){n++,s=o.next();continue}if(xl(s,e))return!1;s=o.next()}while(s);return n<=1}},Ht=(e,t=!0)=>PT(e.dom,t),OT=e=>e.nodeName.toLowerCase()==="span",Xh=(e,t)=>Ne(e)&&(xl(e,t)||nf(_.fromDom(e))),DT=(e,t)=>{const n=new zt(e,t).prev(!1),s=new zt(e,t).next(!1),o=Pt(n)||Xh(n,t),r=Pt(s)||Xh(s,t);return o&&r},Qh=e=>OT(e)&&e.getAttribute("data-mce-type")==="bookmark",BT=(e,t)=>ne(e)&&e.data.length>0&&DT(e,t),IT=e=>Ee(e)?e.childNodes.length>0:!1,$T=e=>tf(e)||ef(e),cf=(e,t,n)=>{const s=n||t;if(Ee(t)&&Qh(t))return t;const o=t.childNodes;for(let r=o.length-1;r>=0;r--)cf(e,o[r],s);if(Ee(t)){const r=t.childNodes;r.length===1&&Qh(r[0])&&t.parentNode.insertBefore(r[0],t)}return!$T(t)&&!xl(t,s)&&!IT(t)&&!BT(t,s)&&e.remove(t),t},LT=G.makeMap,Sl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,FT=/[<>&\"\']/g,MT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,UT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},sr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},zT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},HT=e=>{const t=_.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Zh=(e,t)=>{let n,s,o;const r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)s=String.fromCharCode(parseInt(e[n],t)),sr[s]||(o="&"+e[n+1]+";",r[s]=o,r[o]=s);return r}},uf=Zh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Jh=(e,t)=>e.replace(t?Sl:wl,n=>sr[n]||n),VT=e=>(""+e).replace(FT,t=>sr[t]||t),eb=(e,t)=>e.replace(t?Sl:wl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":sr[n]||"&#"+n.charCodeAt(0)+";"),ff=(e,t,n)=>(n=n||uf,e.replace(t?Sl:wl,s=>sr[s]||n[s]||s)),ko={encodeRaw:Jh,encodeAllRaw:VT,encodeNumeric:eb,encodeNamed:ff,getEncodeFunc:(e,t)=>{const n=Zh(t)||uf,s=(i,a)=>i.replace(a?Sl:wl,c=>sr[c]!==void 0?sr[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>ff(i,a,n),r=LT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:ff:r.numeric?eb:Jh},decode:e=>e.replace(MT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):UT[n]||String.fromCharCode(n)):zT[t]||uf[t]||HT(t))},No={},WT={},Xr=G.makeMap,Qt=G.each,df=G.extend,tb=G.explode,jT=G.inArray,Gt=(e,t)=>(e=G.trim(e),e?e.split(t||" "):[]),nb=(e,t)=>{const n=Xr(e," ",Xr(e.toUpperCase()," "));return df(n,t)},sb=e=>nb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),qT=e=>{const t={};let n,s,o,r,i,a;const c=(d,p="",y="")=>{const C=Gt(y),x=Gt(d);let v=x.length;for(;v--;){const S=Gt([n,p].join(" "));t[x[v]]={attributes:vn(S,()=>({})),attributesOrder:S,children:vn(C,K(WT))}}},f=(d,p)=>{const y=Gt(d),C=Gt(p);let x=y.length;for(;x--;){const v=t[y[x]];for(let S=0,w=C.length;S<w;S++)v.attributes[C[S]]={},v.attributesOrder.push(C[S])}};return No[e]?No[e]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",o=[o,a].join(" "),Qt(Gt(a),d=>{c(d,"",o)}),i="center dir isindex noframes",s=[s,i].join(" "),r=[s,o].join(" "),Qt(Gt(i),d=>{c(d,"",r)})),r=r||[s,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),c("address dt dd div caption","",r),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",r),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",r),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",r),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",r),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),c("param","name value"),c("map","name",[r,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",r),c("th","colspan rowspan headers scope abbr",r),c("form","accept-charset action autocomplete enctype method name novalidate target",r),c("fieldset","disabled form name",[r,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[r,"li"].join(" ")),c("noscript","",r),e!=="html4"&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",r),c("mark rt rp summary bdi","",o),c("canvas","width height",r),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",r),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[r,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",r),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[r,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),e!=="html4"&&R([t.video,t.audio],d=>{delete d.children.audio,delete d.children.video}),Qt(Gt("a form meter progress dfn"),d=>{t[d]&&delete t[d].children[d]}),delete t.caption.children.table,delete t.script,No[e]=t,t)},mf=(e,t)=>{let n;return e&&(n={},typeof e=="string"&&(e={"*":e}),Qt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Xr(s,/[, ]/):tb(s,/[, ]/)})),n},To=e=>{var t;const n={},s={};let o=[];const r={},i={},a=(Y,pe,Ae)=>{let Pe=e[Y];return Pe?Pe=Xr(Pe,/[, ]/,Xr(Pe.toUpperCase(),/[, ]/)):(Pe=No[Y],Pe||(Pe=nb(pe,Ae),No[Y]=Pe)),Pe};e=e||{};const c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=qT(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=mf(e.valid_styles),p=mf(e.invalid_styles,"map"),y=mf(e.valid_classes,"map"),C=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),x=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),w="td th iframe video audio object script code",A=a("non_empty_elements",w+" pre",v),M=a("move_caret_before_on_enter_elements",w+" table",v),B=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),$=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",B),te=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Qt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Y=>{i[Y]=new RegExp("</"+Y+"[^>]*>","gi")});const W=Y=>new RegExp("^"+Y.replace(/([?+*])/g,".$1")+"$"),q=Y=>{let pe,Ae,Pe,qe,ze,Le,Et,Zt,Jt,Bt,Ft,en,Rt,hn,Mo,zs,Hs,us;const kr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Uo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Hn=/[*?+]/;if(Y){const fs=Gt(Y,",");for(n["@"]&&(zs=n["@"].attributes,Hs=n["@"].attributesOrder),pe=0,Ae=fs.length;pe<Ae;pe++)if(ze=kr.exec(fs[pe]),ze){if(hn=ze[1],Jt=ze[2],Mo=ze[3],Zt=ze[5],en={},Rt=[],Le={attributes:en,attributesOrder:Rt},hn==="#"&&(Le.paddEmpty=!0),hn==="-"&&(Le.removeEmpty=!0),ze[4]==="!"&&(Le.removeEmptyAttrs=!0),zs&&(Ct(zs,(Nr,ds)=>{en[ds]=Nr}),Rt.push.apply(Rt,Hs)),Zt){for(Zt=Gt(Zt,"|"),Pe=0,qe=Zt.length;Pe<qe;Pe++)if(ze=Uo.exec(Zt[Pe]),ze){if(Et={},Ft=ze[1],Bt=ze[2].replace(/[\\:]:/g,":"),hn=ze[3],us=ze[4],Ft==="!"&&(Le.attributesRequired=Le.attributesRequired||[],Le.attributesRequired.push(Bt),Et.required=!0),Ft==="-"){delete en[Bt],Rt.splice(jT(Rt,Bt),1);continue}hn&&(hn==="="&&(Le.attributesDefault=Le.attributesDefault||[],Le.attributesDefault.push({name:Bt,value:us}),Et.defaultValue=us),hn==="~"&&(Le.attributesForced=Le.attributesForced||[],Le.attributesForced.push({name:Bt,value:us}),Et.forcedValue=us),hn==="<"&&(Et.validValues=Xr(us,"?"))),Hn.test(Bt)?(Le.attributePatterns=Le.attributePatterns||[],Et.pattern=W(Bt),Le.attributePatterns.push(Et)):(en[Bt]||Rt.push(Bt),en[Bt]=Et)}}!zs&&Jt==="@"&&(zs=en,Hs=Rt),Mo&&(Le.outputName=Jt,n[Mo]=Le),Hn.test(Jt)?(Le.pattern=W(Jt),o.push(Le)):n[Jt]=Le}}},Z=Y=>{o=[],R(es(n),pe=>{delete n[pe]}),q(Y),Qt(f,(pe,Ae)=>{s[Ae]=pe.children})},ee=Y=>{const pe=/^(~)?(.+)$/;Y&&(No.text_block_elements=No.block_elements=null,Qt(Gt(Y,","),Ae=>{const Pe=pe.exec(Ae),qe=Pe[1]==="~",ze=qe?"span":"div",Le=Pe[2];if(s[Le]=s[ze],r[Le]=ze,qe||($[Le.toUpperCase()]={},$[Le]={}),!n[Le]){let Et=n[ze];Et=df({},Et),delete Et.removeEmptyAttrs,delete Et.removeEmpty,n[Le]=Et}Qt(s,(Et,Zt)=>{Et[ze]&&(s[Zt]=Et=df({},s[Zt]),Et[Le]=Et[ze])})}))},xe=Y=>{const pe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;No[c]=null,Y&&Qt(Gt(Y,","),Ae=>{const Pe=pe.exec(Ae);let qe,ze;Pe&&(ze=Pe[1],ze?qe=s[Pe[2]]:qe=s[Pe[2]]={"#comment":{}},qe=s[Pe[2]],Qt(Gt(Pe[3],"|"),Le=>{ze==="-"?delete qe[Le]:qe[Le]={}}))})},ae=Y=>{let pe=n[Y],Ae;if(pe)return pe;for(Ae=o.length;Ae--;)if(pe=o[Ae],pe.pattern.test(Y))return pe};e.valid_elements?Z(e.valid_elements):(Qt(f,(Y,pe)=>{n[pe]={attributes:Y.attributes,attributesOrder:Y.attributesOrder},s[pe]=Y.children}),Qt(Gt("strong/b em/i"),Y=>{const pe=Gt(Y,"/");n[pe[1]].outputName=pe[0]}),Qt(te,(Y,pe)=>{n[pe]&&(e.padd_empty_block_inline_children&&(n[pe].paddInEmptyBlock=!0),n[pe].removeEmpty=!0)}),Qt(Gt("ol ul blockquote a table tbody"),Y=>{n[Y]&&(n[Y].removeEmpty=!0)}),Qt(Gt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Y=>{n[Y].paddEmpty=!0}),Qt(Gt("span"),Y=>{n[Y].removeEmptyAttrs=!0})),ee(e.custom_elements),xe(e.valid_children),q(e.extended_valid_elements),xe("+ol[ul|ol],+ul[ul|ol]"),Qt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Y,pe)=>{n[pe]&&(n[pe].parentsRequired=Gt(Y))}),e.invalid_elements&&Qt(tb(e.invalid_elements),Y=>{n[Y]&&delete n[Y]}),ae("span")||q("span[!data-mce-type|*]");const se=K(d),Ge=K(p),je=K(y),ct=K(S),qt=K($),J=K(B),ge=K(te),Me=K(Object.seal(v)),De=K(x),me=K(A),le=K(M),Se=K(C),Be=K(Object.seal(i)),vt=(Y,pe)=>{const Ae=s[Y.toLowerCase()];return!!(Ae&&Ae[pe.toLowerCase()])},Lt=(Y,pe)=>{let Ae,Pe;const qe=ae(Y);if(qe)if(pe){if(qe.attributes[pe])return!0;if(Ae=qe.attributePatterns,Ae){for(Pe=Ae.length;Pe--;)if(Ae[Pe].pattern.test(pe))return!0}}else return!0;return!1},_r=K(r);return{type:c,children:s,elements:n,getValidStyles:se,getValidClasses:je,getBlockElements:qt,getInvalidStyles:Ge,getVoidElements:Me,getTextBlockElements:J,getTextInlineElements:ge,getBoolAttrs:ct,getElementRule:ae,getSelfClosingElements:De,getNonEmptyElements:me,getMoveCaretBeforeOnEnterElements:le,getWhitespaceElements:Se,getSpecialElements:Be,isValidChild:vt,isValid:Lt,getCustomElements:_r,addValidElements:q,setValidElements:Z,addCustomElements:ee,addValidChildren:xe}},pf=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/;let r;const i={};let a,c;const f=Ji;e=e||{},t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+f).split(" ");for(r=0;r<d.length;r++)i[d[r]]=f+r,i[f+r]=d[r];const p={parse:y=>{const C={};let x,v,S,w;const A=e.url_converter,M=e.url_converter_scope||p,B=(ae,se,Ge)=>{const je=C[ae+"-top"+se];if(!je)return;const ct=C[ae+"-right"+se];if(!ct)return;const qt=C[ae+"-bottom"+se];if(!qt)return;const J=C[ae+"-left"+se];if(!J)return;const ge=[je,ct,qt,J];for(r=ge.length-1;r--&&ge[r]===ge[r+1];);r>-1&&Ge||(C[ae+se]=r===-1?ge[0]:ge.join(" "),delete C[ae+"-top"+se],delete C[ae+"-right"+se],delete C[ae+"-bottom"+se],delete C[ae+"-left"+se])},$=ae=>{let se=C[ae],Ge;if(!!se){for(se=se.split(" "),Ge=se.length;Ge--;)if(se[Ge]!==se[0])return!1;return C[ae]=se[0],!0}},te=(ae,se,Ge,je)=>{!$(se)||!$(Ge)||!$(je)||(C[ae]=C[se]+" "+C[Ge]+" "+C[je],delete C[se],delete C[Ge],delete C[je])},W=ae=>(w=!0,i[ae]),q=(ae,se)=>(w&&(ae=ae.replace(/\uFEFF[0-9]/g,Ge=>i[Ge])),se||(ae=ae.replace(/\\([\'\";:])/g,"$1")),ae),Z=ae=>String.fromCharCode(parseInt(ae.slice(1),16)),ee=ae=>ae.replace(/\\[0-9a-f]+/gi,Z),xe=(ae,se,Ge,je,ct,qt)=>{if(ct=ct||qt,ct)return ct=q(ct),"'"+ct.replace(/\'/g,"\\'")+"'";if(se=q(se||Ge||je),!e.allow_script_urls){const J=se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(J)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(J))return""}return A&&(se=A.call(M,se,"style")),"url('"+se.replace(/\'/g,"\\'")+"')"};if(y){for(y=y.replace(/[\u0000-\u001F]/g,""),y=y.replace(/\\[\"\';:\uFEFF]/g,W).replace(/\"[^\"]+\"|\'[^\']+\'/g,ae=>ae.replace(/[;:]/g,W));x=s.exec(y);)if(s.lastIndex=x.index+x[0].length,v=x[1].replace(o,"").toLowerCase(),S=x[2].replace(o,""),v&&S){if(v=ee(v),S=ee(S),v.indexOf(f)!==-1||v.indexOf('"')!==-1||!e.allow_script_urls&&(v==="behavior"||/expression\s*\(|\/\*|\*\//.test(S)))continue;v==="font-weight"&&S==="700"?S="bold":(v==="color"||v==="background-color")&&(S=S.toLowerCase()),S=S.replace(n,xe),C[v]=w?q(S,!0):S}B("border","",!0),B("border","-width"),B("border","-color"),B("border","-style"),B("padding",""),B("margin",""),te("border","border-width","border-style","border-color"),C.border==="medium none"&&delete C.border,C["border-image"]==="none"&&delete C["border-image"]}return C},serialize:(y,C)=>{let x="";const v=w=>{let A;const M=a[w];if(M)for(let B=0,$=M.length;B<$;B++)w=M[B],A=y[w],A&&(x+=(x.length>0?" ":"")+w+": "+A+";")},S=(w,A)=>{let M=c["*"];return M&&M[w]?!1:(M=c[A],!(M&&M[w]))};return C&&a?(v("*"),v(C)):Ct(y,(w,A)=>{w&&(!c||S(A,C))&&(x+=(x.length>0?" ":"")+A+": "+w+";")}),x}};return p},KT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},GT=e=>e instanceof Event||Ye(e.initEvent),YT=e=>e.isDefaultPrevented===at||e.isDefaultPrevented===pt,XT=e=>Mt(e.preventDefault)||GT(e),ob=(e,t)=>{const n=t!=null?t:{};for(const s in e)Fe(KT,s)||(n[s]=e[s]);return Ne(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},gf=(e,t,n,s)=>{var o;const r=ob(t,s);return r.type=e,Mt(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),XT(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=at,Ye(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=at,Ye(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=at,r.stopPropagation()},YT(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?at:pt,r.isPropagationStopped=r.cancelBubble===!0?at:pt,r.isImmediatePropagationStopped=pt)),r},QT="mce-data-",ZT=/^(?:mouse|contextmenu)|click/,hf=(e,t,n,s)=>{e.addEventListener?e.addEventListener(t,n,s||!1):e.attachEvent&&e.attachEvent("on"+t,n)},_l=(e,t,n,s)=>{e.removeEventListener?e.removeEventListener(t,n,s||!1):e.detachEvent&&e.detachEvent("on"+t,n)},JT=e=>Ne(e)&&ZT.test(e.type),Qr=(e,t)=>{const n=gf(e.type,e,document,t);if(JT(e)&&Pt(e.pageX)&&!Pt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},eA=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{_l(e,"DOMContentLoaded",i),_l(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():hf(e,"DOMContentLoaded",i),n.domLoaded||hf(e,"load",i)};class or{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=QT+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i,a,c,f,d,p,y;const C=window,x=S=>{r.executeHandlers(Qr(S||C.event),i)};if(!t||t.nodeType===3||t.nodeType===8)return;t[r.expando]?i=t[r.expando]:(i=r.count++,t[r.expando]=i,r.events[i]={}),o=o||t;const v=n.split(" ");for(c=v.length;c--;){if(f=v[c],p=x,d=y=!1,f==="DOMContentLoaded"&&(f="ready"),r.domLoaded&&f==="ready"&&t.readyState==="complete"){s.call(o,Qr({type:f}));continue}r.hasMouseEnterLeave||(d=r.mouseEnterLeave[f],d&&(p=S=>{const w=S.currentTarget;let A=S.relatedTarget;if(A&&w.contains)A=w.contains(A);else for(;A&&A!==w;)A=A.parentNode;A||(S=Qr(S||C.event),S.type=S.type==="mouseout"?"mouseleave":"mouseenter",S.target=w,r.executeHandlers(S,i))})),!r.hasFocusIn&&(f==="focusin"||f==="focusout")&&(y=!0,d=f==="focusin"?"focus":"blur",p=S=>{S=Qr(S||C.event),S.type=S.type==="focus"?"focusin":"focusout",r.executeHandlers(S,i)}),a=r.events[i][f],a?f==="ready"&&r.domLoaded?s(Qr({type:f})):a.push({func:s,scope:o}):(r.events[i][f]=a=[{func:s,scope:o}],a.fakeName=d,a.capture=y,a.nativeHandler=p,f==="ready"?eA(t,p,r):hf(t,d||f,p,y))}return t=a=null,s}unbind(t,n,s){let o,r,i,a,c;if(!t||t.nodeType===3||t.nodeType===8)return this;const f=t[this.expando];if(f){if(c=this.events[f],n){const d=n.split(" ");for(r=d.length;r--;)if(a=d[r],o=c[a],o){if(s){for(i=o.length;i--;)if(o[i].func===s){const p=o.nativeHandler,y=o.fakeName,C=o.capture;o=o.slice(0,i).concat(o.slice(i+1)),o.nativeHandler=p,o.fakeName=y,o.capture=C,c[a]=o}}(!s||o.length===0)&&(delete c[a],_l(t,o.fakeName||a,o.nativeHandler,o.capture))}}else Ct(c,(d,p)=>{_l(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(a in c)if(Fe(c,a))return this;delete this.events[f];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){let o;if(!t||t.nodeType===3||t.nodeType===8)return this;const r=Qr({type:n,target:t},s);do o=t[this.expando],o&&this.executeHandlers(r,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return this}clean(t){let n,s;if(!t||t.nodeType===3||t.nodeType===8)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),s=t.getElementsByTagName("*"),n=s.length;n--;)t=s[n],t[this.expando]&&this.unbind(t);return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}or.Event=new or;const bf=G.each,tA=G.grep,Cf="data-mce-style",ea=(e,t,n)=>{Mt(n)||n===""?Gn(e,t):fn(e,t,n)},nA=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=_.fromDom(i);Ye(t.url_converter)&&Ne(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),a,c,i[0]));const d="data-mce-"+c;ea(f,d,a),ea(f,c,a)},get:(i,a)=>{const c=_.fromDom(i);return $n(c,"data-mce-"+a)||$n(c,a)}},r={style:{set:(i,a)=>{const c=_.fromDom(i);if(ut(a)){ul(c,a);return}s&&ea(c,Cf,a),Gn(c,"style"),he(a)&&ul(c,e.parse(a))},get:i=>{const a=_.fromDom(i),c=$n(a,Cf)||$n(a,"style");return e.serialize(e.parse(c),yt(a))}}};return s&&(r.href=r.src=o),r},sA=(e,t)=>{const n=$n(t,"style"),s=e.serialize(e.parse(n),yt(t));ea(t,Cf,s)},Zr=(e,t)=>{let n=0,s,o;if(e)for(s=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,!(t&&o===3&&(o===s||!e.nodeValue.length))&&(n++,s=o);return n},oA=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),rb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),rt=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=Uh.forElement(_.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],d=t.schema?t.schema:To({}),p=pf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),y=t.ownEvents?new or:or.Event,C=d.getBlockElements(),x=N=>he(N)?Fe(C,N):Ee(N)&&Fe(C,N.nodeName),v=N=>N&&e&&he(N)?e.getElementById(N):N,S=N=>{const D=v(N);return Ne(D)?_.fromDom(D):null},w=(N,D,j)=>{let V;const ye=S(N);if(Ne(ye)&&Kn(ye)){const We=au[D];We&&We.get?V=We.get(ye.dom,D):V=$n(ye,D)}return Ne(V)?V:j!=null?j:""},A=N=>{const D=v(N);return Mt(D)?[]:D.attributes},M=(N,D,j)=>{Me(N,V=>{if(Ee(V)){const ye=_.fromDom(V);j===""&&(j=null);const We=$n(ye,D),He=au[D];He&&He.set?He.set(ye.dom,j,D):ea(ye,D,j),We!==j&&t.onSetAttrib&&t.onSetAttrib({attrElm:ye,attrName:D,attrValue:j})}})},B=(N,D)=>N.cloneNode(D),$=()=>t.root_element||e.body,te=N=>{const D=Ph(N);return{x:D.x,y:D.y,w:D.width,h:D.height}},W=(N,D)=>WN(e.body,v(N),D),q=(N,D,j)=>{const V=(We,He)=>he(We)?We:yn(We)?Fe(oA,He)?We+"":We+"px":Fi(We,V),ye=(We,He,Nn)=>{const ms=rb(He);Mt(Nn)||Nn===""?wh(We,ms):Eh(We,ms,V(Nn,ms))};Me(N,We=>{const He=_.fromDom(We);he(D)?ye(He,D,j):Ct(D,(Nn,ms)=>{ye(He,ms,Nn)}),t.update_styles&&sA(p,He)})},Z=(N,D)=>{q(N,D)},ee=(N,D,j)=>{const V=v(N);if(!(Mt(V)||!Ee(V)))return j?_s(_.fromDom(V),rb(D)):(D=D.replace(/-(\D)/g,(ye,We)=>We.toUpperCase()),D==="float"&&(D="cssFloat"),V.style?V.style[D]:void 0)},xe=N=>{let D,j;const V=v(N);return D=ee(V,"width"),j=ee(V,"height"),D.indexOf("px")===-1&&(D=0),j.indexOf("px")===-1&&(j=0),{w:parseInt(D,10)||V.offsetWidth||V.clientWidth,h:parseInt(j,10)||V.offsetHeight||V.clientHeight}},ae=N=>{const D=v(N),j=W(D),V=xe(D);return{x:j.x,y:j.y,w:V.w,h:V.h}},se=(N,D)=>{if(!N)return!1;const j=Tt(N)?N:[N];return U(j,V=>eo(_.fromDom(V),D))},Ge=(N,D,j,V)=>{const ye=[];let We,He=v(N);for(V=V===void 0,j=j||($().nodeName!=="BODY"?$().parentNode:null),he(D)&&(We=D,D==="*"?D=Ee:D=Nn=>se(Nn,We));He&&!(He===j||Mt(He.nodeType)||ef(He)||tf(He));){if(!D||D(He))if(V)ye.push(He);else return[He];He=He.parentNode}return V?ye:null},je=(N,D,j)=>{const V=Ge(N,D,j,!1);return V&&V.length>0?V[0]:null},ct=(N,D,j)=>{let V=D;if(N){for(he(D)&&(V=ye=>se(ye,D)),N=N[j];N;N=N[j])if(Ye(V)&&V(N))return N}return null},qt=(N,D)=>ct(N,D,"nextSibling"),J=(N,D)=>ct(N,D,"previousSibling"),ge=(N,D)=>{var j,V;const ye=(V=(j=v(D))!==null&&j!==void 0?j:t.root_element)!==null&&V!==void 0?V:e;return gt(ye.querySelectorAll(N))},Me=function(N,D,j){const V=j!=null?j:this,ye=he(N)?v(N):N;if(!ye)return!1;if(Tt(ye)&&(ye.length||ye.length===0)){const We=[];return bf(ye,(He,Nn)=>{He&&We.push(D.call(V,he(He)?v(He):He,Nn))}),We}else return D.call(V,ye)},De=(N,D)=>{Me(N,j=>{Ct(D,(V,ye)=>{M(j,ye,V)})})},me=(N,D)=>{Me(N,j=>{const V=_.fromDom(j);Xu(V,D)})},le=(N,D,j,V,ye)=>Me(N,We=>{const He=he(D)?e.createElement(D):D;return Ne(j)&&De(He,j),V&&(!he(V)&&V.nodeType?He.appendChild(V):he(V)&&me(He,V)),ye?He:We.appendChild(He)}),Se=(N,D,j)=>le(e.createElement(N),N,D,j,!0),Be=ko.decode,vt=ko.encodeAllRaw,Lt=(N,D,j="")=>{let V="",ye;V+="<"+N;for(ye in D)Mr(D,ye)&&(V+=" "+ye+'="'+vt(D[ye])+'"');return rl(j)&&Fe(d.getVoidElements(),N)?V+" />":V+">"+j+"</"+N+">"},_r=N=>{let D;const j=e.createElement("div"),V=e.createDocumentFragment();for(V.appendChild(j),N&&(j.innerHTML=N);D=j.firstChild;)V.appendChild(D);return V.removeChild(j),V},Y=(N,D)=>Me(N,j=>{const V=_.fromDom(j);return D&&R(Yt(V),ye=>{In(ye)&&ye.dom.length===0?At(ye):Xn(V,ye)}),At(V),V.dom}),pe=N=>Me(N,D=>{const j=D.attributes;for(let V=j.length-1;V>=0;V--)D.removeAttributeNode(j.item(V))}),Ae=N=>p.parse(N),Pe=(N,D)=>p.serialize(N,D),qe=N=>{let D,j;if(fo!==rt.DOM&&e===document){if(n[N])return;n[N]=!0}j=e.getElementById("mceDefaultStyles"),j||(j=e.createElement("style"),j.id="mceDefaultStyles",j.type="text/css",D=e.getElementsByTagName("head")[0],D.firstChild?D.insertBefore(j,D.firstChild):D.appendChild(j)),j.styleSheet?j.styleSheet.cssText+=N:j.appendChild(e.createTextNode(N))},ze=N=>{N||(N=""),R(N.split(","),D=>{o[D]=!0,c.load(D).catch(Ie)})},Le=(N,D,j)=>{Me(N,V=>{if(Ee(V)){const ye=_.fromDom(V),We=D.split(" ");R(We,He=>{Ne(j)?(j?Wi:lh)(ye,He):aN(ye,He)})}})},Et=(N,D)=>{Le(N,D,!0)},Zt=(N,D)=>{Le(N,D,!1)},Jt=(N,D)=>{const j=S(N),V=D.split(" ");return et(V,ye=>Ku(j,ye))},Bt=N=>{Me(N,D=>wh(_.fromDom(D),"display"))},Ft=N=>{Me(N,D=>Eh(_.fromDom(D),"display","none"))},en=N=>{const D=S(N);return Hr(fl(D,"display"),"none")},Rt=N=>(N||"mce_")+r++,hn=N=>{const D=S(N);return Ee(D.dom)?D.dom.outerHTML:TN(D)},Mo=(N,D)=>{Me(N,j=>{Ee(j)&&(j.outerHTML=D)})},zs=(N,D)=>{const j=v(D);return Me(N,V=>{const ye=j.parentNode,We=j.nextSibling;return We?ye.insertBefore(V,We):ye.appendChild(V),V})},Hs=(N,D,j)=>Me(D,V=>(Tt(V)&&(N=N.cloneNode(!0)),j&&bf(tA(V.childNodes),ye=>{N.appendChild(ye)}),V.parentNode.replaceChild(N,V))),us=(N,D)=>{let j;return N.nodeName!==D.toUpperCase()&&(j=Se(D),bf(A(N),V=>{M(j,V.nodeName,w(N,V.nodeName))}),Hs(j,N,!0)),j||N},kr=(N,D)=>{let j=N,V;for(;j;){for(V=D;V&&j!==V;)V=V.parentNode;if(j===V)break;j=j.parentNode}return!j&&N.ownerDocument?N.ownerDocument.documentElement:j},Uo=N=>{if(Ee(N)){const D=N.nodeName.toLowerCase()==="a"&&!w(N,"href")&&w(N,"id");if(w(N,"name")||w(N,"data-mce-bookmark")||D)return!0}return!1},Hn=(N,D)=>{let j,V,ye=0;if(Uo(N))return!1;if(N=N.firstChild,N){const We=new zt(N,N.parentNode),He=d?d.getWhitespaceElements():{};D=D||(d?d.getNonEmptyElements():null);do{if(j=N.nodeType,Ee(N)){const Nn=N.getAttribute("data-mce-bogus");if(Nn){N=We.next(Nn==="all");continue}if(V=N.nodeName.toLowerCase(),D&&D[V]){if(V==="br"){ye++,N=We.next();continue}return!1}if(Uo(N))return!1}if(j===8||j===3&&!nr(N.nodeValue)||j===3&&N.parentNode&&He[N.parentNode.nodeName]&&nr(N.nodeValue))return!1;N=We.next()}while(N)}return ye<=1},fs=()=>e.createRange(),Nr=(N,D,j)=>{let V=fs(),ye,We,He;if(N&&D)return V.setStart(N.parentNode,Zr(N)),V.setEnd(D.parentNode,Zr(D)),ye=V.extractContents(),V=fs(),V.setStart(D.parentNode,Zr(D)+1),V.setEnd(N.parentNode,Zr(N)+1),We=V.extractContents(),He=N.parentNode,He.insertBefore(cf(fo,ye),N),j?He.insertBefore(j,N):He.insertBefore(D,N),He.insertBefore(cf(fo,We),N),Y(N),j||D},ds=(N,D,j,V)=>{if(Tt(N)){let ye=N.length;const We=[];for(;ye--;)We[ye]=ds(N[ye],D,j,V);return We}else return t.collect&&(N===e||N===s)&&f.push([N,D,j,V]),y.bind(N,D,j,V||fo)},ru=(N,D,j)=>{if(Tt(N)){let V=N.length;const ye=[];for(;V--;)ye[V]=ru(N[V],D,j);return ye}else{if(f.length>0&&(N===e||N===s)){let V=f.length;for(;V--;){const ye=f[V];N===ye[0]&&(!D||D===ye[1])&&(!j||j===ye[2])&&y.unbind(ye[0],ye[1],ye[2])}}return y.unbind(N,D,j)}},Ap=(N,D,j)=>y.dispatch(N,D,j),co=(N,D,j)=>y.dispatch(N,D,j),uo=N=>{if(N&&Ee(N)){const D=N.getAttribute("data-mce-contenteditable");return D&&D!=="inherit"?D:N.contentEditable!=="inherit"?N.contentEditable:null}else return null},fo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:d,events:y,isBlock:x,root:null,clone:B,getRoot:$,getViewPort:te,getRect:ae,getSize:xe,getParent:je,getParents:Ge,get:v,getNext:qt,getPrev:J,select:ge,is:se,add:le,create:Se,createHTML:Lt,createFragment:_r,remove:Y,setStyle:q,getStyle:ee,setStyles:Z,removeAllAttribs:pe,setAttrib:M,setAttribs:De,getAttrib:w,getPos:W,parseStyle:Ae,serializeStyle:Pe,addStyle:qe,loadCSS:ze,addClass:Et,removeClass:Zt,hasClass:Jt,toggleClass:Le,show:Bt,hide:Ft,isHidden:en,uniqueId:Rt,setHTML:me,getOuterHTML:hn,setOuterHTML:Mo,decode:Be,encode:vt,insertAfter:zs,replace:Hs,rename:us,findCommonAncestor:kr,run:Me,getAttribs:A,isEmpty:Hn,createRng:fs,nodeIndex:Zr,split:Nr,bind:ds,unbind:ru,fire:co,dispatch:Ap,getContentEditable:uo,getContentEditableParent:N=>{const D=$();let j=null;for(;N&&N!==D&&(j=uo(N),j===null);N=N.parentNode);return j},destroy:()=>{if(f.length>0){let N=f.length;for(;N--;){const D=f[N];y.unbind(D[0],D[1],D[2])}}Ct(o,(N,D)=>{c.unload(D),delete o[D]})},isChildOf:(N,D)=>N===D||D.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},au=nA(p,t,K(fo));return fo};rt.DOM=rt(document),rt.nodeIndex=Zr;const rA=rt.DOM,iA=0,aA=1,kl=2,ib=3;class so{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=rA;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===kl}markDone(t){this.states[t]=kl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=iA),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{lt(n.scriptLoadedCallbacks,f).each(d=>{R(d,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=H(c,d=>d.status==="rejected");return f.length>0?Promise.reject(Ke(f,({reason:d})=>Tt(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(z(c,f=>n.states[f]===kl?(s("resolve",f),Promise.resolve()):n.states[f]===ib?(s("reject",f),Promise.reject(f)):(n.states[f]=aA,n.loadScript(f).then(()=>{n.states[f]=kl,s("resolve",f);const d=n.queue;if(d.length>0)return n.queue=[],r(d).then(o)},()=>(n.states[f]=ib,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return b.from(d).each(Ko),o(f)})),a=Eg(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,f))}):i(a)}}so.ScriptLoader=new so;const $t=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},lA=e=>ut(e)&&Fe(e,"raw"),cA=e=>Tt(e)&&e.length>1,ta={},yf=$t("en"),ab=()=>lt(ta,yf.get()),ns={getData:()=>Fi(ta,e=>_e({},e)),setCode:e=>{e&&yf.set(e)},getCode:()=>yf.get(),add:(e,t)=>{let n=ta[e];n||(ta[e]=n={}),Ct(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=ab().getOr({}),n=i=>Ye(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return lt(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(lA(e))return n(e.raw);if(cA(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Fe(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>ab().bind(e=>lt(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Fe(ta,e)},nn=()=>{const e=[],t={},n={},s=[],o=(v,S)=>{const w=H(s,A=>A.name===v&&A.state===S);R(w,A=>A.resolve())},r=v=>Fe(t,v),i=v=>Fe(n,v),a=v=>{if(n[v])return n[v].instance},c=(v,S)=>{const w=ns.getCode(),A=","+(S||"")+",";!w||S&&A.indexOf(","+w+",")===-1||so.ScriptLoader.add(t[v]+"/langs/"+w+".js")},f=(v,S)=>{nn.languageLoad!==!1&&(r(v)?c(v,S):x(v,"loaded").then(()=>c(v,S)))},d=(v,S)=>(e.push(S),n[v]={instance:S},o(v,"added"),S),p=v=>{delete t[v],delete n[v]},y=(v,S)=>he(S)?he(v)?{prefix:"",resource:S,suffix:""}:{prefix:v.prefix,resource:S,suffix:v.suffix}:S,C=(v,S)=>{if(t[v])return Promise.resolve();let w=he(S)?S:S.prefix+S.resource+S.suffix;w.indexOf("/")!==0&&w.indexOf("://")===-1&&(w=nn.baseURL+"/"+w),t[v]=w.substring(0,w.lastIndexOf("/"));const A=()=>(o(v,"loaded"),Promise.resolve());return n[v]?A():so.ScriptLoader.add(w).then(A)},x=(v,S="added")=>S==="added"&&i(v)||S==="loaded"&&r(v)?Promise.resolve():new Promise(w=>{s.push({name:v,state:S,resolve:w})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:d,remove:p,createUrl:y,load:C,waitFor:x}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const uA=e=>{const t=$t(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(a))}}},Ao=()=>{const e=uA(Ie),t=n=>e.get().each(n);return ft(_e({},e),{on:t})},Nl=(e,t)=>{let n=null;return{cancel:()=>{Xs(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Xs(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},vf=(e,t)=>{let n=null;const s=()=>{Xs(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},lb=(e,t)=>{let n=[];return R(Yt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(lb(s,t))}),n},xn=(e,t)=>fN(t,e),Ef=K("mce-annotation"),na=K("data-mce-annotation"),Tl=K("data-mce-annotation-uid"),xf=K("data-mce-annotation-active"),cb=(e,t)=>{const n=e.selection.getRng(),s=_.fromDom(n.startContainer),o=_.fromDom(e.getBody()),r=t.fold(()=>"."+Ef(),f=>`[${na()}="${f}"]`),i=cl(s,n.startOffset).getOr(s),a=tr(i,r,f=>nt(f,o)),c=(f,d)=>ll(f,d)?b.some($n(f,d)):b.none();return a.bind(f=>c(f,`${Tl()}`).bind(d=>c(f,`${na()}`).map(p=>{const y=ub(e,d);return{uid:d,name:p,elements:y}})))},fA=e=>Kn(e)&&Ku(e,Ef()),ub=(e,t)=>{const n=_.fromDom(e.getBody());return xn(n,`[${Tl()}="${t}"]`)},fb=(e,t)=>{const n=_.fromDom(e.getBody()),s=xn(n,`[${na()}="${t}"]`),o={};return R(s,r=>{const i=$n(r,Tl()),a=lt(o,i).getOr([]);o[i]=a.concat([r])}),o},dA=(e,t)=>{const n=$t({}),s=()=>({listeners:[],previous:Ao()}),o=(p,y)=>{r(p,C=>(y(C),C))},r=(p,y)=>{const C=n.get(),x=lt(C,p).getOrThunk(s),v=y(x);C[p]=v,n.set(C)},i=(p,y,C)=>{o(p,x=>{R(x.listeners,v=>v(!0,p,{uid:y,nodes:z(C,S=>S.dom)}))})},a=p=>{o(p,y=>{R(y.listeners,C=>C(!1,p))})},c=(p,y)=>{R(ub(e,p),C=>{y?fn(C,xf(),"true"):Gn(C,xf())})},f=vf(()=>{const p=jn(t.getNames());R(p,y=>{r(y,C=>{const x=C.previous.get();return cb(e,b.some(y)).fold(()=>{x.each(v=>{a(y),C.previous.clear(),c(v,!1)})},({uid:v,name:S,elements:w})=>{Hr(x,v)||(x.each(A=>c(A,!1)),i(S,v,w),C.previous.set(v),c(v,!0))}),{previous:C.previous,listeners:C.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,y)=>{r(p,C=>({previous:C.previous,listeners:C.listeners.concat([y])}))}}},mA=(e,t)=>{const n=s=>b.from(s.attr(na())).bind(t.lookup);e.serializer.addTempAttr(xf()),e.serializer.addNodeFilter("span",s=>{R(s,o=>{n(o).each(r=>{r.persistent===!1&&o.unwrap()})})})},pA=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>lt(e,o).map(r=>r.settings),getNames:()=>es(e)}};let db=0;const mb=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return db++,e+"_"+s+db+String(n)},gA=(e,t)=>{R(t,n=>{Wi(e,n)})},pb=(e,t)=>_.fromDom(e.dom.cloneNode(t)),Jr=e=>pb(e,!1),gb=e=>pb(e,!0),hA=(e,t)=>{const n=_.fromTag(t),s=sh(e);return ws(n,s),n},bA=(e,t)=>{const n=hA(e,t);xo(e,n);const s=Yt(e);return Zo(n,s),At(e),n},hb=(e,t,n=pt)=>{const s=new zt(e,t),o=r=>{let i;do i=s[r]();while(i&&!ne(i)&&!n(i));return b.from(i).filter(ne)};return{current:()=>b.from(s.current()).filter(ne),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},rr=(e,t)=>{const n=t||(i=>e.isBlock(i)||Dt(i)||wt(i)),s=(i,a,c,f)=>{if(ne(i)){const d=f(i,a,i.data);if(d!==-1)return b.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,f))};return{backwards:(i,a,c,f)=>{const d=hb(i,f,n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const d=hb(i,f,n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},ei=Math.round,ir=e=>e?{left:ei(e.left),top:ei(e.top),bottom:ei(e.bottom),right:ei(e.right),width:ei(e.width),height:ei(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},bb=(e,t)=>(e=ir(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),CA=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Cb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,sa=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Cb(t.top-e.bottom,e,t)},oa=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Cb(t.bottom-e.top,e,t),yA=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,vA=e=>X(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),b.none()),yb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},EA=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),xA=(e,t,n)=>Math.min(Math.max(e,t),n),Al=e=>{const t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ro=(e,t)=>{if(Ee(e)&&e.hasChildNodes()){const n=e.childNodes,s=xA(t,0,n.length-1);return n[s]}else return e},SA=(e,t)=>{if(!(t<0&&Ee(e)&&e.hasChildNodes()))return Ro(e,t)},wA=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),vb=e=>typeof e=="string"&&e.charCodeAt(0)>=768&&wA.test(e),_A=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},kA=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Eb=Ee,NA=ts,xb=pl("display","block table"),TA=pl("float","left right"),ra=kA(Eb,NA,ys(TA)),AA=ys(pl("white-space","pre pre-line pre-wrap")),ia=ne,Sf=Dt,Sb=rt.nodeIndex,Rl=SA,wf=e=>"createRange"in e?e.createRange():rt.DOM.createRng(),_f=e=>e&&/[\r\n\t ]/.test(e),wb=e=>!!e.setStart&&!!e.setEnd,kf=e=>{const t=e.startContainer,n=e.startOffset;if(_f(e.toString())&&AA(t.parentNode)&&ne(t)){const s=t.data;if(_f(s[n-1])||_f(s[n+1]))return!0}return!1},RA=e=>{const t=e.ownerDocument,n=wf(t),s=t.createTextNode(Xt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=ir(n.getBoundingClientRect());return o.removeChild(s),r},PA=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&ne(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Po(r)}else return null},_b=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Po=e=>{let t;const n=e.getClientRects();return n.length>0?t=ir(n[0]):t=ir(e.getBoundingClientRect()),!wb(e)&&Sf(e)&&_b(t)?RA(e):_b(t)&&wb(e)?PA(e):t},ar=(e,t)=>{const n=bb(e,t);return n.width=1,n.right=n.left+1,n},OA=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&CA(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=wf(i.ownerDocument);if(a<i.data.length){if(vb(i.data[a]))return t;if(vb(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!kf(c)))return n(ar(Po(c),!1)),t}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),kf(c)||n(ar(Po(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),kf(c)||n(ar(Po(c),!0)))},o=e.container(),r=e.offset();if(ia(o))return s(o,r),t;if(Eb(o))if(e.isAtEnd()){const i=Rl(o,r);ia(i)&&s(i,i.data.length),ra(i)&&!Sf(i)&&n(ar(Po(i),!1))}else{const i=Rl(o,r);if(ia(i)&&s(i,0),ra(i)&&e.isAtEnd())return n(ar(Po(i),!1)),t;const a=Rl(e.container(),e.offset()-1);ra(a)&&!Sf(a)&&(xb(a)||xb(i)||!ra(i))&&n(ar(Po(a),!1)),ra(i)&&n(ar(Po(i),!0))}return t},L=(e,t,n)=>{const s=()=>(ia(e),t===0),o=()=>ia(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=wf(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=OA(L(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),f=d=>Rl(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};L.fromRangeStart=e=>L(e.startContainer,e.startOffset),L.fromRangeEnd=e=>L(e.endContainer,e.endOffset),L.after=e=>L(e.parentNode,Sb(e)+1),L.before=e=>L(e.parentNode,Sb(e)),L.isAbove=(e,t)=>En(Ut(t.getClientRects()),Es(e.getClientRects()),sa).getOr(!1),L.isBelow=(e,t)=>En(Es(t.getClientRects()),Ut(e.getClientRects()),oa).getOr(!1),L.isAtStart=e=>e?e.isAtStart():!1,L.isAtEnd=e=>e?e.isAtEnd():!1,L.isTextPosition=e=>e?ne(e.container()):!1,L.isElementPosition=e=>L.isTextPosition(e)===!1;const Pl=(e,t)=>{ne(t)&&t.data.length===0&&e.remove(t)},DA=(e,t,n)=>{t.insertNode(n),Pl(e,n.previousSibling),Pl(e,n.nextSibling)},BA=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>Pl(e,r.previousSibling)),o.each(r=>Pl(e,r.nextSibling))},Nf=(e,t,n)=>{tf(n)?BA(e,t,n):DA(e,t,n)},ss=ne,kb=er,Nb=rt.nodeIndex,Tb=e=>{const t=e.parentNode;return kb(t)?Tb(t):t},Tf=e=>e?ol(e.childNodes,(t,n)=>(kb(n)&&n.nodeName!=="BR"?t=t.concat(Tf(n)):t.push(n),t),[]):[],IA=(e,t)=>{for(;(e=e.previousSibling)&&ss(e);)t+=e.data.length;return t},Ab=e=>t=>e===t,$A=e=>{let t,n;t=Tf(Tb(e)),n=Sg(t,Ab(e),e),t=t.slice(0,n+1);const s=ol(t,(o,r,i)=>(ss(r)&&ss(t[i-1])&&o++,o),0);return t=Ur(t,Qn([e.nodeName])),n=Sg(t,Ab(e),e),n-s},Rb=e=>{let t;return ss(e)?t="text()":t=e.nodeName.toLowerCase(),t+"["+$A(e)+"]"},LA=(e,t,n)=>{const s=[];for(t=t.parentNode;t!==e&&!(n&&n(t));t=t.parentNode)s.push(t);return s},Pb=(e,t)=>{let n,s,o=[],r,i,a;return n=t.container(),s=t.offset(),ss(n)?r=IA(n,s):(i=n.childNodes,s>=i.length?(r="after",s=i.length-1):r="before",n=i[s]),o.push(Rb(n)),a=LA(e,n),a=Ur(a,ys(er)),o=o.concat(Uu(a,c=>Rb(c))),o.reverse().join("/")+","+r},FA=(e,t,n)=>{let s=Tf(e);return s=Ur(s,(o,r)=>!ss(o)||!ss(s[r-1])),s=Ur(s,Qn([t])),s[n]},MA=(e,t)=>{let n=e,s=0,o;for(;ss(n);){if(o=n.data.length,t>=s&&t<=s+o){e=n,t=t-s;break}if(!ss(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return ss(e)&&t>e.data.length&&(t=e.data.length),L(e,t)},Ob=(e,t)=>{let n;if(!t)return null;const s=t.split(","),o=s[0].split("/");n=s.length>1?s[1]:"before";const r=ol(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),FA(i,c[1],parseInt(c[2],10))):null},e);return r?ss(r)?MA(r,parseInt(n,10)):(n==="after"?n=Nb(r)+1:n=Nb(r),L(r.parentNode,n)):null},Ol=wt,UA=(e,t,n)=>{let s,o;for(o=e(t.data.slice(0,n)).length,s=t.previousSibling;s&&ne(s);s=s.previousSibling)o+=e(s.data).length;return o},Db=(e,t,n,s,o)=>{let r=s[o?"startContainer":"endContainer"],i=s[o?"startOffset":"endOffset"];const a=[];let c,f=0;const d=e.getRoot();for(ne(r)?a.push(n?UA(t,r,i):i):(c=r.childNodes,i>=c.length&&c.length&&(f=1,i=Math.max(0,c.length-1)),a.push(e.nodeIndex(c[i],n)+f));r&&r!==d;r=r.parentNode)a.push(e.nodeIndex(r,n));return a},zA=(e,t,n,s)=>{const o=t.dom,r={};return r.start=Db(o,e,n,s,!0),t.isCollapsed()||(r.end=Db(o,e,n,s,!1)),Wh(s)&&(r.isFakeCaret=!0),r},Af=(e,t,n)=>{let s=0;return G.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++}}),s},Bb=(e,t)=>{let n,s,o;const r=t?"start":"end";n=e[r+"Container"],s=e[r+"Offset"],Ee(n)&&n.nodeName==="TR"&&(o=n.childNodes,n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,s)))},Ib=e=>(Bb(e,!0),Bb(e,!1),e),$b=(e,t)=>{let n;if(Ee(e)&&(e=Ro(e,t),Ol(e)))return e;if(Ln(e)&&(ne(e)&&Gr(e)&&(e=e.parentNode),n=e.previousSibling,Ol(n)||(n=e.nextSibling,Ol(n))))return n},HA=e=>$b(e.startContainer,e.startOffset)||$b(e.endContainer,e.endOffset),Lb=(e,t,n)=>{const s=n.getNode();let o=s?s.nodeName:null;const r=n.getRng();if(Ol(s)||o==="IMG")return{name:o,index:Af(n.dom,o,s)};const i=HA(r);return i?(o=i.tagName,{name:o,index:Af(n.dom,o,i)}):zA(e,n,t,r)},VA=e=>{const t=e.getRng();return{start:Pb(e.dom.getRoot(),L.fromRangeStart(t)),end:Pb(e.dom.getRoot(),L.fromRangeEnd(t))}},WA=e=>({rng:e.getRng()}),Fb=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},Mb=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName;if(a==="IMG")return{name:a,index:Af(n,a,i)};const c=Ib(s.cloneRange());if(!r){c.collapse(!1);const d=Fb(n,o+"_end",t);Nf(n,c,d)}s=Ib(s),s.collapse(!0);const f=Fb(n,o+"_start",t);return Nf(n,s,f),e.moveToBookmark({id:o,keep:!0}),{id:o}},jA=(e,t,n)=>t===2?Lb(_o,n,e):t===3?VA(e):t?WA(e):Mb(e,!1),Ub=re(Lb,St,!0),zb=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:at,isError:pt,map:r=>dn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},Hb=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:pt,isError:at,map:t,mapError:s=>dn.error(s(e)),bind:t,exists:pt,forall:at,getOr:St,or:St,getOrThunk:Ir,orThunk:Ir,getOrDie:vs(String(e)),each:Ie,toOptional:b.none};return n},dn={value:zb,error:Hb,fromOption:(e,t)=>e.fold(()=>Hb(t),zb)},Ts={generate:e=>{if(!Tt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return R(e,(s,o)=>{const r=es(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Tt(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const y=es(p);if(t.length!==y.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+y.join(","));if(!et(t,x=>P(y,x)))throw new Error("Not all branches were specified when using match. Specified: "+y.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Ts.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const qA=e=>{const t=[],n=[];return R(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},KA=e=>e.type==="inline-command"||e.type==="inline-format",GA=e=>e.type==="block-command"||e.type==="block-format",YA=e=>jn(e,(t,n)=>t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1),XA=e=>{const t=s=>dn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(Tt(e.format)){if(!et(e.format,he))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(he(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return dn.value(o(i))}else return e.cmd!==void 0?he(e.cmd)?dn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!ut(e))return t("Raw pattern is not an object");if(!he(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!he(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?he(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):dn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},QA=e=>YA(H(e,GA)),Vb=e=>H(e,KA),ZA=e=>({inlinePatterns:Vb(e),blockPatterns:QA(e)}),JA=e=>{const t=qA(z(e,XA));return R(t.errors,n=>console.error(n.message,n.pattern)),t.values},Rf=vo().deviceType,e1=Rf.isTouch(),t1=rt.DOM,n1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return X(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[zr(r)]=zr(i),n},{})},Wb=e=>Bn(e,RegExp),ue=e=>t=>t.options.get(e),Pf=e=>he(e)||ut(e),jb=(e,t="")=>n=>{const s=he(n);if(s)if(n.indexOf("=")!==-1){const o=n1(n);return{value:lt(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},s1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:jb(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:jb(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=he(n)&&Zs(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:"boolean",default:!1}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||he(n)||Qs(n,he);return s?he(n)?{value:z(n.split(","),zr),valid:s}:Tt(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Bf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=he(n)||Qs(n,he);return s?{value:Tt(n)?n:z(n.split(","),zr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),t("object_resizing",{processor:n=>{const s=Cs(n)||he(n);return s?n===!1||Rf.isiPhone()||Rf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!e1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||he(n)||Ye(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:n=>{const s=n===!1||he(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Pf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Pf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Pf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>he(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Qs(n,ut)||n===!1?{value:JA(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Qs(n,Wb)?{value:n,valid:!0}:Wb(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ns.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:t1.getAttrib(e.getElement(),"placeholder")})})},o1=ue("iframe_attrs"),r1=ue("doctype"),qb=ue("document_base_url"),i1=ue("body_id"),a1=ue("body_class"),Kb=ue("content_security_policy"),l1=ue("br_in_pre"),Sn=ue("forced_root_block"),lr=ue("forced_root_block_attrs"),c1=ue("br_newline_selector"),u1=ue("no_newline_selector"),f1=ue("keep_styles"),d1=ue("end_container_on_empty_block"),Gb=ue("automatic_uploads"),Yb=ue("images_reuse_filename"),m1=ue("images_replace_blob_uris"),Xb=ue("icons"),p1=ue("icons_url"),g1=ue("images_upload_url"),h1=ue("images_upload_base_path"),b1=ue("images_upload_credentials"),C1=ue("images_upload_handler"),y1=ue("content_css_cors"),Of=ue("referrer_policy"),Qb=ue("language"),v1=ue("language_url"),Zb=ue("indent_use_margin"),E1=ue("indentation"),x1=ue("content_css"),S1=ue("content_style"),Jb=ue("font_css"),w1=ue("directionality"),_1=ue("inline_boundaries_selector"),eC=ue("object_resizing"),k1=ue("resize_img_proportional"),N1=ue("placeholder"),tC=ue("event_root"),T1=ue("service_message"),ti=ue("theme"),A1=ue("theme_url"),Df=ue("model"),R1=ue("model_url"),aa=ue("inline_boundaries"),P1=ue("formats"),O1=ue("preview_styles"),D1=ue("format_empty_lines"),B1=ue("custom_ui_selector"),Bf=ue("inline"),I1=ue("hidden_input"),$1=ue("submit_patch"),L1=ue("add_form_submit_trigger"),F1=ue("add_unload_trigger"),M1=ue("custom_undo_redo_levels"),U1=ue("disable_nodechange"),nC=ue("readonly"),z1=ue("content_css_cors"),Dl=ue("plugins"),H1=ue("external_plugins"),V1=ue("block_unsupported_drop"),W1=ue("visual"),j1=ue("visual_table_class"),sC=ue("visual_anchor_class"),q1=ue("iframe_aria_text"),K1=ue("setup"),G1=ue("init_instance_callback"),Y1=ue("urlconverter_callback"),X1=ue("auto_focus"),Q1=ue("browser_spellcheck"),Z1=ue("protect"),J1=ue("paste_block_drop"),Bl=ue("paste_data_images"),eR=ue("paste_preprocess"),tR=ue("paste_postprocess"),nR=ue("paste_webkit_styles"),sR=ue("paste_remove_styles_if_webkit"),oR=ue("paste_merge_formats"),rR=ue("smart_paste"),iR=ue("paste_as_text"),aR=ue("paste_tab_spaces"),lR=ue("allow_html_data_urls"),oC=ue("text_patterns"),rC=ue("noneditable_class"),cR=ue("editable_class"),uR=ue("noneditable_regexp"),fR=e=>G.explode(e.options.get("font_size_style_values")),dR=e=>G.explode(e.options.get("font_size_classes")),mR=e=>e.options.get("encoding")==="xml",iC=e=>G.explode(e.options.get("images_file_types")),pR=ue("table_tab_navigation"),gR=Ee,aC=ne,lC=e=>{const t=e.parentNode;t&&t.removeChild(e)},cC=e=>{const t=_o(e);return{count:e.length-t.length,text:t}},uC=e=>{let t;for(;(t=e.data.lastIndexOf(Kt))!==-1;)e.deleteData(t,1)},fC=(e,t)=>(cr(e),t),hR=(e,t)=>{const n=cC(e.data.substr(0,t.offset())),s=cC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(uC(e),L(e,t.offset()-n.count)):t},bR=(e,t)=>{const n=t.container(),s=k(gt(n.childNodes),e).map(o=>o<t.offset()?L(n,t.offset()-1):t).getOr(t);return cr(e),s},CR=(e,t)=>aC(e)&&t.container()===e?hR(e,t):fC(e,t),yR=(e,t)=>t.container()===e.parentNode?bR(e,t):fC(e,t),vR=(e,t)=>L.isTextPosition(t)?CR(e,t):yR(e,t),cr=e=>{gR(e)&&Ln(e)&&(Vh(e)?e.removeAttribute("data-mce-caret"):lC(e)),aC(e)&&(uC(e),e.data.length===0&&lC(e))},ER=wt,xR=ks,SR=gl,wR="*[contentEditable=false],video,audio,embed,object",dC=(e,t,n)=>{const s=bb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},_R=e=>{const t=xn(_.fromDom(e),wR);for(let n=0;n<t.length;n++){const s=t[n].dom;let o=s.previousSibling;if(El(o)){const r=o.data;r.length===1?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)}o=s.nextSibling,vl(o)&&(o.data.length===1?o.parentNode.removeChild(o):o.deleteData(0,1))}},kR=(e,t,n,s)=>{const o=Ao();let r,i;const a=Sn(e),c=e.dom,f=(v,S)=>{let w;if(d(),SR(S))return null;if(n(S)){i=uT(a,S,v);const A=dC(t,S,v);c.setStyle(i,"top",A.top);const M=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(M,_e({},A)),c.add(t,M),o.set({caret:M,element:S,before:v}),v&&c.addClass(M,"mce-visual-caret-before"),p(),w=S.ownerDocument.createRange(),w.setStart(i,0),w.setEnd(i,0)}else return i=lT(S,v),w=S.ownerDocument.createRange(),la(i.nextSibling)?(w.setStart(i,0),w.setEnd(i,0)):(w.setStart(i,1),w.setEnd(i,1)),w;return w},d=()=>{_R(t),i&&(cr(i),i=null),o.on(v=>{c.remove(v.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(v=>{s()?c.toggleClass(v.caret,"mce-visual-caret-hidden"):c.addClass(v.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(v=>{const S=dC(t,v.element,v.before);c.setStyles(v.caret,_e({},S))})},destroy:()=>clearInterval(r)}},mC=()=>tt.browser.isFirefox(),la=e=>ER(e)||xR(e),ca=e=>la(e)||Yi(e)&&mC(),NR=no,If=wt,TR=ks,AR=pl("display","block table table-cell table-caption list-item"),pC=Ln,gC=Gr,hC=Ee,RR=ts,ni=e=>e>0,ur=e=>e<0,Il=(e,t)=>{let n;for(;n=e(t);)if(!gC(n))return n;return null},ua=(e,t,n,s,o)=>{const r=new zt(e,s),i=If(e)||gC(e);if(ur(t)){if(i&&(e=Il(r.prev.bind(r),!0),n(e)))return e;for(;e=Il(r.prev.bind(r),o);)if(n(e))return e}if(ni(t)){if(i&&(e=Il(r.next.bind(r),!0),n(e)))return e;for(;e=Il(r.next.bind(r),o);)if(n(e))return e}return null},PR=(e,t)=>{const n=o=>NR(o.dom),s=o=>o.dom===t;return jr(_.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Oo=(e,t)=>{for(;e&&e!==t;){if(AR(e))return e;e=e.parentNode}return null},As=(e,t,n)=>Oo(e.container(),n)===Oo(t.container(),n),$f=(e,t)=>{if(!t)return null;const n=t.container(),s=t.offset();return hC(n)?n.childNodes[s+e]:null},bC=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},OR=(e,t,n)=>Oo(t,e)===Oo(n,e),CC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let o=n[s];if(pC(o)&&(o=o[s]),If(o)||TR(o)){if(OR(t,o,n))return o;break}if(RR(o))break;n=n.parentNode}return null},fa=re(bC,!0),da=re(bC,!1),Lf=(e,t,n)=>{let s;const o=re(CC,!0,t),r=re(CC,!1,t);let i=n.startContainer;const a=n.startOffset;if(Gr(i)){hC(i)||(i=i.parentNode);const c=i.getAttribute("data-mce-caret");if(c==="before"&&(s=i.nextSibling,ca(s)))return fa(s);if(c==="after"&&(s=i.previousSibling,ca(s)))return da(s)}if(!n.collapsed)return n;if(ne(i)){if(pC(i)){if(e===1){if(s=r(i),s)return fa(s);if(s=o(i),s)return da(s)}if(e===-1){if(s=o(i),s)return da(s);if(s=r(i),s)return fa(s)}return n}if(El(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?fa(s):n;if(vl(i)&&a<=1)return e===-1&&(s=o(i),s)?da(s):n;if(a===i.data.length)return s=r(i),s?fa(s):n;if(a===0)return s=o(i),s?da(s):n}return n},yC=(e,t)=>b.from($f(e?0:-1,t)).filter(If),ma=(e,t,n)=>{const s=Lf(e,t,n);return e===-1?L.fromRangeStart(s):L.fromRangeEnd(s)},$l=e=>b.from(e.getNode()).map(_.fromDom),DR=e=>b.from(e.getNode(!0)).map(_.fromDom),Ff=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Ll=(e,t)=>{const n=As(e,t);return!n&&Dt(e.getNode())?!0:n};var Vt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Vt||(Vt={}));const BR=wt,Rs=ne,vC=Ee,Mf=Dt,si=ts,EC=ET,Fl=Kh,IR=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},xC=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,SC=(e,t)=>{if(ni(e)){if(si(t.previousSibling)&&!Rs(t.previousSibling))return L.before(t);if(Rs(t))return L(t,0)}if(ur(e)){if(si(t.nextSibling)&&!Rs(t.nextSibling))return L.after(t);if(Rs(t))return L(t,t.data.length)}return ur(e)?Mf(t)?L.before(t):L.after(t):L.before(t)},$R=(e,t)=>{const n=t.nextSibling;return n&&si(n)?Rs(n)?L(n,0):L.before(n):Uf(Vt.Forwards,L.after(t),e)},Uf=(e,t,n)=>{let s,o,r,i;if(!vC(n)||!t)return null;if(t.isEqual(L.after(n))&&n.lastChild){if(i=L.after(n.lastChild),ur(e)&&si(n.lastChild)&&vC(n.lastChild))return Mf(n.lastChild)?L.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Rs(a)){if(ur(e)&&c>0)return L(a,--c);if(ni(e)&&c<a.length)return L(a,++c);s=a}else{if(ur(e)&&c>0&&(o=xC(a,c-1),si(o)))return!EC(o)&&(r=ua(o,e,Fl,o),r)?Rs(r)?L(r,r.data.length):L.after(r):Rs(o)?L(o,o.data.length):L.before(o);if(ni(e)&&c<a.childNodes.length&&(o=xC(a,c),si(o)))return Mf(o)?$R(n,o):!EC(o)&&(r=ua(o,e,Fl,o),r)?Rs(r)?L(r,0):L.before(r):Rs(o)?L(o,0):L.after(o);s=o||i.getNode()}if((ni(e)&&i.isAtEnd()||ur(e)&&i.isAtStart())&&(s=ua(s,e,at,n,!0),Fl(s,n)))return SC(e,s);o=ua(s,e,Fl,n);const f=yo(H(IR(a,n),BR));return f&&(!o||!f.contains(o))?(ni(e)?i=L.after(f):i=L.before(f),i):o?SC(e,o):null},Ps=e=>({next:t=>Uf(Vt.Forwards,t,e),prev:t=>Uf(Vt.Backwards,t,e)}),LR=(e,t,n)=>{const s=e?L.before(n):L.after(n);return Fn(e,t,s)},FR=e=>Dt(e)?L.before(e):L.after(e),wC=e=>L.isTextPosition(e)?e.offset()===0:ts(e.getNode()),_C=e=>{if(L.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ts(e.getNode(!0))},kC=(e,t)=>!L.isTextPosition(e)&&!L.isTextPosition(t)&&e.getNode()===t.getNode(!0),MR=e=>!L.isTextPosition(e)&&Dt(e.getNode()),UR=(e,t,n)=>e?!kC(t,n)&&!MR(t)&&_C(t)&&wC(n):!kC(n,t)&&wC(t)&&_C(n),Fn=(e,t,n)=>{const s=Ps(t);return b.from(e?s.next(n):s.prev(n))},Ml=(e,t,n)=>Fn(e,t,n).bind(s=>As(n,s,t)&&UR(e,n,s)?Fn(e,t,s):b.some(s)),NC=(e,t,n,s)=>Ml(e,t,n).bind(o=>s(o)?NC(e,t,o,s):b.some(o)),oi=(e,t)=>{const n=e?t.firstChild:t.lastChild;return ne(n)?b.some(L(n,e?0:n.data.length)):n?ts(n)?b.some(e?L.before(n):FR(n)):LR(e,t,n):b.none()},os=re(Fn,!0),Os=re(Fn,!1),mn=re(oi,!0),Ds=re(oi,!1),TC="_mce_caret",Bs=e=>Ee(e)&&e.id===TC,fr=(e,t)=>{for(;t&&t!==e;){if(t.id===TC)return t;t=t.parentNode}return null},zR=e=>he(e.start),HR=e=>Fe(e,"rng"),VR=e=>Fe(e,"id"),WR=e=>Fe(e,"name"),AC=e=>G.isArray(e.start),RC=(e,t)=>(Ee(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),jR=(e,t)=>{let n;const s=e.createRng();return n=Ob(e.getRoot(),t.start),s.setStart(n.container(),n.offset()),n=Ob(e.getRoot(),t.end),s.setEnd(n.container(),n.offset()),s},qR=(e,t)=>{const n=e.ownerDocument.createTextNode(Kt);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},KR=e=>e.hasChildNodes()===!1,GR=(e,t)=>Ds(e).fold(pt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),PC=(e,t,n)=>KR(t)&&fr(e,t)?(qR(t,n),!0):!1,OC=(e,t,n,s)=>{const o=n[t?"start":"end"];let r,i,a,c;const f=e.getRoot();if(o){for(a=o[0],i=f,r=o.length-1;r>=1;r--){if(c=i.childNodes,PC(f,i,s))return!0;if(o[r]>c.length-1)return PC(f,i,s)?!0:GR(i,s);i=c[o[r]]}i.nodeType===3&&(a=Math.min(o[0],i.nodeValue.length)),i.nodeType===1&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},zf=e=>ne(e)&&e.data.length>0,DC=(e,t,n)=>{let s=e.get(n.id+"_"+t),o,r,i,a;const c=n.keep;let f,d;if(s){if(o=s.parentNode,t==="start"?(c?s.hasChildNodes()?(o=s.firstChild,r=1):zf(s.nextSibling)?(o=s.nextSibling,r=0):zf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)+1):r=e.nodeIndex(s),f=o,d=r):(c?s.hasChildNodes()?(o=s.firstChild,r=1):zf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)):r=e.nodeIndex(s),f=o,d=r),!c){for(a=s.previousSibling,i=s.nextSibling,G.each(G.grep(s.childNodes),p=>{ne(p)&&(p.nodeValue=p.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&ne(a)&&!tt.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),f=a,d=r)}return b.some(L(f,d))}else return b.none()},YR=(e,t)=>{const n=e.createRng();return OC(e,!0,t,n)&&OC(e,!1,t,n)?b.some(n):b.none()},XR=(e,t)=>{const n=DC(e,"start",t),s=DC(e,"end",t);return En(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(RC(e,o.container()),o.offset()),i.setEnd(RC(e,r.container()),r.offset()),i})},QR=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),s}),ZR=(e,t)=>{const n=e.dom;if(t){if(AC(t))return YR(n,t);if(zR(t))return b.some(jR(n,t));if(VR(t))return XR(n,t);if(WR(t))return QR(n,t);if(HR(t))return b.some(t.rng)}return b.none()},JR=(e,t,n)=>jA(e,t,n),eP=(e,t)=>{ZR(e,t).each(n=>{e.setRng(n)})},Mn=e=>Ee(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ul=(e=>t=>e===t)(Xt),pa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Hf=e=>!pa(e)&&!Ul(e)&&!Hh(e),tP=e=>({value:e}),Vf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},nP=e=>{const t=Vf(e.red)+Vf(e.green)+Vf(e.blue);return tP(t)},sP=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,oP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,BC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),IC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return BC(o,r,i,a)},rP=e=>{if(e==="transparent")return b.some(BC(0,0,0,0));const t=sP.exec(e);if(t!==null)return b.some(IC(t[1],t[2],t[3],"1"));const n=oP.exec(e);return n!==null?b.some(IC(n[1],n[2],n[3],n[4])):b.none()},zl=e=>rP(e).map(nP).map(t=>"#"+t.value).getOr(e),Hl=e=>!!e.nodeType,iP=e=>e&&/^(IMG)$/.test(e.nodeName),$C=(e,t,n)=>{const s=n.startOffset;let o=n.startContainer;if(!(o===n.endContainer&&iP(o.childNodes[s]))&&Ee(o)){const r=o.childNodes;let i;s<r.length?(o=r[s],i=new zt(o,e.getParent(o,e.isBlock))):(o=r[r.length-1],i=new zt(o,e.getParent(o,e.isBlock)),i.next(!0));for(let a=i.current();a;a=i.next())if(ne(a)&&!jf(a)){n.setStart(a,0),t.setRng(n);return}}},LC=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(Ee(e)||!jf(e))return e}},Wf=(e,t)=>(Hl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),ri=(e,t,n)=>e.schema.isValidChild(t,n),jf=(e,t=!1)=>{if(Ne(e)&&ne(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return nr(n)}else return!1},aP=e=>Ne(e)&&ne(e)&&e.length===0,oo=(e,t)=>(Ye(e)?e=e(t):Ne(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),qf=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Kf=(e,t)=>((t==="color"||t==="backgroundColor")&&(e=zl(e)),t==="fontWeight"&&e===700&&(e="bold"),t==="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),Vl=(e,t,n)=>Kf(e.getStyle(t,n),n),FC=(e,t)=>{let n;return e.getParent(t,s=>(n=e.getStyle(s,"text-decoration"),n&&n!=="none")),n},Wl=(e,t,n)=>e.getParents(t,n,e.getRoot()),lP=(e,t)=>{const n=s=>{const o=r=>r.length>1&&r.charAt(0)==="%";return U(["styles","attributes"],r=>lt(s,r).exists(i=>{const a=Tt(i)?i:vg(i);return U(a,o)}))};return U(e.formatter.get(t),n)},cP=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Mi(r,(i,a)=>U(s,c=>c===a));return U(e.formatter.get(t),r=>{const i=o(r);return U(e.formatter.get(n),a=>{const c=o(a);return wk(i,c)})})},Is=e=>Mr(e,"block"),Rn=e=>Mr(e,"selector"),Wt=e=>Mr(e,"inline"),uP=e=>Rn(e)&&Wt(e)&&Hr(lt(e,"mixed"),!0),Gf=e=>Rn(e)&&e.expand!==!1&&!Wt(e),ii=Mn,MC=Wl,UC=jf,fP=Wf,dP=e=>Dt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,zC=(e,t)=>{let n=t;for(;n;){if(Ee(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},HC=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},mP=(e,t,n)=>HC(e,t,n,s=>Ul(s)||pa(s)),pP=(e,t,n)=>HC(e,t,n,Hf),VC=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,y)=>{const C=rr(e),x=o?C.backwards:C.forwards;return b.from(x(d,p,(v,S)=>ii(v.parentNode)?-1:(i=v,y(o,v,S)),a))};return c(n,s,mP).bind(d=>r?c(d.container,d.offset+(o?-1:0),pP):b.some(d)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},WC=(e,t,n,s,o)=>{ne(s)&&rl(s.data)&&s[o]&&(s=s[o]);const r=MC(e,s);for(let i=0;i<r.length;i++)for(let a=0;a<t.length;a++){const c=t[a];if(!(Ne(c.collapsed)&&c.collapsed!==n.collapsed)&&Rn(c)&&e.is(r[i],c.selector))return r[i]}return s},jC=(e,t,n,s)=>{let o=n;const r=e.dom,i=r.getRoot(),a=t[0];if(Is(a)&&(o=a.wrapper?null:r.getParent(n,a.block,i)),!o){const c=r.getParent(n,"LI,TD,TH");o=r.getParent(ne(n)?n.parentNode:n,f=>f!==i&&fP(e,f),c)}if(o&&Is(a)&&a.wrapper&&(o=MC(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[s]&&!r.isBlock(o[s])&&(o=o[s],!qf(o,"br")););return o||n},qC=(e,t,n,s)=>{const o=n.parentNode;return Ne(n[s])?!1:o===t||Mt(o)||e.isBlock(o)?!0:qC(e,t,o,s)},jl=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(ne(n)&&!UC(n)&&(o?s>0:s<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=ne(c)&&!qC(e,a,c,i);if(!ii(c)&&!dP(c)&&!UC(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},KC=e=>ii(e.parentNode)||ii(e),ai=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,f=n[0];return Ee(o)&&o.hasChildNodes()&&(o=Ro(o,r),ne(o)&&(r=0)),Ee(i)&&i.hasChildNodes()&&(i=Ro(i,t.collapsed?a:a-1),ne(i)&&(a=i.nodeValue.length)),o=zC(c,o),i=zC(c,i),KC(o)&&(o=ii(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,ne(o)&&(r=t.collapsed?o.length:0)),KC(i)&&(i=ii(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,ne(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(VC(c,e.getBody(),o,r,!0,s).each(({container:y,offset:C})=>{o=y,r=C}),VC(c,e.getBody(),i,a,!1,s).each(({container:y,offset:C})=>{i=y,a=C})),(Wt(f)||f.block_expand)&&((!Wt(f)||!ne(o)||r===0)&&(o=jl(c,n,o,r,!0)),(!Wt(f)||!ne(i)||a===i.nodeValue.length)&&(i=jl(c,n,i,a,!1))),Gf(f)&&(o=WC(c,n,t,o,"previousSibling"),i=WC(c,n,t,i,"nextSibling")),(Is(f)||Rn(f))&&(o=jC(e,n,o,"previousSibling"),i=jC(e,n,i,"nextSibling"),Is(f)&&(c.isBlock(o)||(o=jl(c,n,o,r,!0)),c.isBlock(i)||(i=jl(c,n,i,a,!1)))),Ee(o)&&(r=c.nodeIndex(o),o=o.parentNode),Ee(i)&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},ga=(e,t,n)=>{const s=t.startOffset,o=Ro(t.startContainer,s),r=t.endOffset,i=Ro(t.endContainer,r-1),a=v=>{const S=v[0];ne(S)&&S===o&&s>=S.data.length&&v.splice(0,1);const w=v[v.length-1];return r===0&&v.length>0&&w===i&&ne(w)&&v.splice(v.length-1,1),v},c=(v,S,w)=>{const A=[];for(;v&&v!==w;v=v[S])A.push(v);return A},f=(v,S)=>e.getParent(v,w=>w.parentNode===S,S),d=(v,S,w)=>{const A=w?"nextSibling":"previousSibling";for(let M=v,B=M.parentNode;M&&M!==S;M=B){B=M.parentNode;const $=c(M===v?M:M[A],A);$.length&&(w||$.reverse(),n(a($)))}};if(o===i)return n(a([o]));const p=e.findCommonAncestor(o,i);if(e.isChildOf(o,i))return d(o,p,!0);if(e.isChildOf(i,o))return d(i,p);const y=f(o,p)||o,C=f(i,p)||i;d(o,y,!0);const x=c(y===o?y:y.nextSibling,"nextSibling",C===i?C.nextSibling:C);x.length&&n(a(x)),d(i,C)},Yf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},gP=e=>Ke(e,t=>{const n=Al(t);return n?[_.fromDom(n)]:[]}),hP=e=>Yf(e).length>1,bP=e=>H(gP(e),bl),CP=e=>xn(e,"td[data-mce-selected],th[data-mce-selected]"),GC=(e,t)=>{const n=CP(t);return n.length>0?n:bP(e)},li=e=>GC(Yf(e.selection.getSel()),_.fromDom(e.getBody())),ha=(e,t)=>Xi(e,"table",t),yP=e=>{const t=e.startContainer,n=e.startOffset;return ne(t)?n===0?b.some(_.fromDom(t)):b.none():b.from(t.childNodes[n]).map(_.fromDom)},vP=e=>{const t=e.endContainer,n=e.endOffset;return ne(t)?n===t.data.length?b.some(_.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(_.fromDom)},YC=e=>gh(e).fold(K([e]),t=>[e].concat(YC(t))),Xf=e=>Gu(e).fold(K([e]),t=>yt(t)==="br"?Xo(t).map(n=>[e].concat(Xf(n))).getOr([]):[e].concat(Xf(t))),Qf=(e,t)=>En(yP(t),vP(t),(n,s)=>{const o=de(YC(e),re(nt,n)),r=de(Xf(e),re(nt,s));return o.isSome()&&r.isSome()}).getOr(!1),Zf=(e,t,n,s)=>{const o=n,r=new zt(n,o),i=Mi(e.schema.getMoveCaretBeforeOnEnterElements(),(a,c)=>!P(["td","th","table"],c.toLowerCase()));do{if(ne(n)&&G.trim(n.nodeValue).length!==0){s?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(i[n.nodeName]){s?t.setStartBefore(n):n.nodeName==="BR"?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},ql=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},Jf=(e,t)=>{const n=li(e);n.length>0?R(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},ed=(e,t,n)=>{const s=Mb(e,t);n(s),e.moveToBookmark(s)},XC=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(In,"text"),td=e=>XC.get(e),QC=e=>XC.getOption(e),EP=e=>In(e)&&td(e)===Kt,xP=(e,t,n,s)=>Yn(t).fold(()=>"skipping",o=>s==="br"||EP(t)?"valid":fA(t)?"existing":Bs(t.dom)?"caret":!ri(e,n,s)||!ri(e,yt(o),n)?"invalid-child":"valid"),SP=(e,t)=>{const n=ai(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},ZC=(e,r,s,o)=>{var i=r,{uid:t=mb("mce-annotation")}=i,n=Vw(i,["uid"]);const a=_.fromTag("span",e);Wi(a,Ef()),fn(a,`${Tl()}`,t),fn(a,`${na()}`,s);const{attributes:c={},classes:f=[]}=o(t,n);return ws(a,c),gA(a,f),a},wP=(e,t,n,s,o)=>{const r=[],i=ZC(e.getDoc(),o,n,s),a=Ao(),c=()=>{a.clear()},f=()=>a.get().getOrThunk(()=>{const C=Jr(i);return r.push(C),a.set(C),C}),d=C=>{R(C,p)},p=C=>{switch(xP(e,C,"span",yt(C))){case"invalid-child":{c();const v=Yt(C);d(v),c();break}case"valid":{const v=f();wN(C,v);break}}},y=C=>{const x=z(C,_.fromDom);d(x)};return ga(e.dom,t,C=>{c(),y(C)}),r},_P=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=li(e).length>0;if(r.collapsed&&!i&&SP(e,r),o.getRng().collapsed&&!i){const a=ZC(e.getDoc(),s,t,n.decorate);Xu(a,Xt),o.getRng().insertNode(a.dom),o.select(a.dom)}else ed(o,!1,()=>{Jf(e,a=>{wP(e,a,t,n.decorate,s)})})})},JC=e=>{const t=pA();mA(e,t);const n=dA(e,t);return{register:(s,o)=>{t.register(s,o)},annotate:(s,o)=>{t.lookup(s).each(r=>{_P(e,s,r,o)})},annotationChanged:(s,o)=>{n.addListener(s,o)},remove:s=>{const o=e.selection.getBookmark();cb(e,b.some(s)).each(({elements:r})=>{R(r,So)}),e.selection.moveToBookmark(o)},removeAll:s=>{const o=e.selection.getBookmark();Ct(fb(e,s),(r,i)=>R(r,So)),e.selection.moveToBookmark(o)},getAll:s=>{const o=fb(e,s);return Fi(o,r=>z(r,i=>i.dom))}}},ba=e=>({getBookmark:re(JR,e),moveToBookmark:re(eP,e)});ba.isBookmarkNode=Mn;const ey=(e,t,n)=>n.collapsed?!1:U(n.getClientRects(),s=>yA(s,e,t)),kP=(e,t)=>e.dispatch("PreProcess",t),NP=(e,t)=>e.dispatch("PostProcess",t),TP=e=>e.dispatch("remove"),AP=e=>e.dispatch("detach"),RP=(e,t)=>e.dispatch("SwitchMode",{mode:t}),PP=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},OP=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},DP=e=>e.dispatch("PreInit"),BP=e=>e.dispatch("PostRender"),IP=e=>e.dispatch("Init"),$P=(e,t)=>e.dispatch("PlaceholderToggle",{state:t}),ty=(e,t,n)=>e.dispatch(t,n),ny=(e,t,n,s)=>e.dispatch("FormatApply",{format:t,node:n,vars:s}),nd=(e,t,n,s)=>e.dispatch("FormatRemove",{format:t,node:n,vars:s}),LP=(e,t)=>e.dispatch("BeforeSetContent",t),sy=(e,t)=>e.dispatch("SetContent",t),FP=(e,t)=>e.dispatch("BeforeGetContent",t),oy=(e,t)=>e.dispatch("GetContent",t),MP=(e,t)=>e.dispatch("AutocompleterStart",t),UP=(e,t)=>e.dispatch("AutocompleterUpdate",t),zP=e=>e.dispatch("AutocompleterEnd"),HP=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),VP=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),ry=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),be={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||be.metaKeyPressed(e),metaKeyPressed:e=>tt.os.isMacOS()||tt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},iy=(e,t)=>{const n="data-mce-selected",s=t.dom,o=G.each;let r,i,a,c,f,d,p,y,C,x,v,S,w,A,M;const B=t.getDoc(),$=document,te=Math.abs,W=Math.round,q=t.getBody();let Z,ee;const xe={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ae=Y=>Ne(Y)&&(Ih(Y)||t.dom.is(Y,"figure.image")),se=Y=>ks(Y)||s.hasClass(Y,"mce-preview-object"),Ge=(Y,pe)=>{if(Y.type==="longpress"||Y.type.indexOf("touch")===0){const Ae=Y.touches[0];return ae(Y.target)&&!ey(Ae.clientX,Ae.clientY,pe)}else return ae(Y.target)&&!ey(Y.clientX,Y.clientY,pe)},je=Y=>{const pe=Y.target;Ge(Y,t.selection.getRng())&&!Y.isDefaultPrevented()&&t.selection.select(pe)},ct=Y=>s.is(Y,"figure.image")?[Y.querySelector("img")]:s.hasClass(Y,"mce-preview-object")&&Ne(Y.firstElementChild)?[Y,Y.firstElementChild]:[Y],qt=Y=>{const pe=eC(t);return!pe||Y.getAttribute("data-mce-resize")==="false"||Y===t.getBody()?!1:s.hasClass(Y,"mce-preview-object")?eo(_.fromDom(Y.firstElementChild),pe):eo(_.fromDom(Y),pe)},J=Y=>se(Y)?s.create("img",{src:tt.transparentSrc}):Y.cloneNode(!0),ge=(Y,pe,Ae)=>{if(Ne(Ae)){const Pe=ct(Y);R(Pe,qe=>{qe.style[pe]||!t.schema.isValid(qe.nodeName.toLowerCase(),pe)?s.setStyle(qe,pe,Ae):s.setAttrib(qe,pe,""+Ae)})}},Me=(Y,pe,Ae)=>{ge(Y,"width",pe),ge(Y,"height",Ae)},De=Y=>{let pe,Ae,Pe,qe,ze;pe=Y.screenX-d,Ae=Y.screenY-p,A=pe*c[2]+x,M=Ae*c[3]+v,A=A<5?5:A,M=M<5?5:M,(ae(r)||se(r))&&k1(t)!==!1?Pe=!be.modifierPressed(Y):Pe=be.modifierPressed(Y),Pe&&(te(pe)>te(Ae)?(M=W(A*S),A=W(M/S)):(A=W(M/S),M=W(A*S))),Me(i,A,M),qe=c.startPos.x+pe,ze=c.startPos.y+Ae,qe=qe>0?qe:0,ze=ze>0?ze:0,s.setStyles(a,{left:qe,top:ze,display:"block"}),a.innerHTML=A+" &times; "+M,c[2]<0&&i.clientWidth<=A&&s.setStyle(i,"left",y+(x-A)),c[3]<0&&i.clientHeight<=M&&s.setStyle(i,"top",C+(v-M)),pe=q.scrollWidth-Z,Ae=q.scrollHeight-ee,pe+Ae!==0&&s.setStyles(a,{left:qe-pe,top:ze-Ae}),w||(PP(t,r,x,v,"corner-"+c.name),w=!0)},me=()=>{const Y=w;w=!1,Y&&(ge(r,"width",A),ge(r,"height",M)),s.unbind(B,"mousemove",De),s.unbind(B,"mouseup",me),$!==B&&(s.unbind($,"mousemove",De),s.unbind($,"mouseup",me)),s.remove(i),s.remove(a),s.remove(f),le(r),Y&&(OP(t,r,A,M,"corner-"+c.name),s.setAttrib(r,"style",s.getAttrib(r,"style"))),t.nodeChanged()},le=Y=>{vt();const pe=s.getPos(Y,q),Ae=pe.x,Pe=pe.y,qe=Y.getBoundingClientRect(),ze=qe.width||qe.right-qe.left,Le=qe.height||qe.bottom-qe.top;r!==Y&&(Se(),r=Y,A=M=0);const Et=t.dispatch("ObjectSelected",{target:Y}),Zt=s.getAttrib(r,n,"1");qt(Y)&&!Et.isDefaultPrevented()?o(xe,(Jt,Bt)=>{let Ft;const en=Rt=>{const hn=ct(r)[0];d=Rt.screenX,p=Rt.screenY,x=hn.clientWidth,v=hn.clientHeight,S=v/x,c=Jt,c.name=Bt,c.startPos={x:ze*Jt[0]+Ae,y:Le*Jt[1]+Pe},Z=q.scrollWidth,ee=q.scrollHeight,f=s.add(q,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(f,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=J(r),s.addClass(i,"mce-clonedresizable"),s.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",s.setStyles(i,{left:Ae,top:Pe,margin:0}),Me(i,ze,Le),i.removeAttribute(n),q.appendChild(i),s.bind(B,"mousemove",De),s.bind(B,"mouseup",me),$!==B&&(s.bind($,"mousemove",De),s.bind($,"mouseup",me)),a=s.add(q,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},x+" &times; "+v)};Ft=s.get("mceResizeHandle"+Bt),Ft&&s.remove(Ft),Ft=s.add(q,"div",{id:"mceResizeHandle"+Bt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Bt+"-resize; margin:0; padding:0"}),s.bind(Ft,"mousedown",Rt=>{Rt.stopImmediatePropagation(),Rt.preventDefault(),en(Rt)}),Jt.elm=Ft,s.setStyles(Ft,{left:ze*Jt[0]+Ae-Ft.offsetWidth/2,top:Le*Jt[1]+Pe-Ft.offsetHeight/2})}):Se(),s.getAttrib(r,n)||r.setAttribute(n,Zt)},Se=()=>{vt(),r&&r.removeAttribute(n),Ct(xe,(Y,pe)=>{const Ae=s.get("mceResizeHandle"+pe);Ae&&(s.unbind(Ae),s.remove(Ae))})},Be=Y=>{var pe;let Ae,Pe;const qe=(ze,Le)=>{if(ze)do if(ze===Le)return!0;while(ze=ze.parentNode)};if(!(w||t.removed)){if(o(s.select("img[data-mce-selected],hr[data-mce-selected]"),ze=>{ze.removeAttribute(n)}),Pe=Y.type==="mousedown"?Y.target:e.getNode(),Pe=(pe=tr(_.fromDom(Pe),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())===null||pe===void 0?void 0:pe.dom,qe(Pe,q)&&(Lt(),Ae=e.getStart(!0),qe(Ae,Pe)&&qe(e.getEnd(!0),Pe))){le(Pe);return}Se()}},vt=()=>{Ct(xe,Y=>{Y.elm&&(s.unbind(Y.elm),delete Y.elm)})},Lt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Lt();const Y=Nl(pe=>{t.composing||Be(pe)},0);t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",Y.throttle),t.on("keyup compositionend",pe=>{r&&r.nodeName==="TABLE"&&Y.throttle(pe)}),t.on("hide blur",Se),t.on("contextmenu longpress",je,!0)}),t.on("remove",vt),{isResizable:qt,showResizeRect:le,hideResizeRect:Se,updateResizeRect:Be,destroy:()=>{r=i=f=null}}},WP=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},jP=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},ay=(e,t,n)=>{const s=e.document.createRange();return WP(s,t),jP(s,n),s},sd=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Ca=Ts.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ly=(e,t,n)=>t(_.fromDom(n.startContainer),n.startOffset,_.fromDom(n.endContainer),n.endOffset),qP=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:b.none}),relative:(n,s)=>({ltr:Go(()=>ay(e,n,s)),rtl:Go(()=>b.some(ay(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Go(()=>sd(e,n,s,o,r)),rtl:Go(()=>b.some(sd(e,o,r,n,s)))})}),KP=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Ca.rtl(_.fromDom(o.endContainer),o.endOffset,_.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>ly(e,Ca.ltr,n)):ly(e,Ca.ltr,n)},GP=(e,t)=>{const n=qP(e,t);return KP(e,n)};Ca.ltr,Ca.rtl;const cy={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},YP=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return b.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),b.some(i)})},XP=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},QP=(()=>document.caretPositionFromPoint?YP:document.caretRangeFromPoint?XP:b.none)(),ZP=(e,t,n)=>{const s=_.fromDom(e.document);return QP(s,t,n).map(o=>cy.create(_.fromDom(o.startContainer),o.startOffset,_.fromDom(o.endContainer),o.endOffset))},od=Ts.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),JP=(e,t,n,s)=>e.fold(t,n,s),eO=e=>e.fold(St,St,St),tO=od.before,nO=od.on,sO=od.after,ro={before:tO,on:nO,after:sO,cata:JP,getStart:eO},Kl=Ts.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),oO=e=>Kl.exact(e.start,e.soffset,e.finish,e.foffset),rO=e=>e.match({domRange:t=>_.fromDom(t.startContainer),relative:(t,n)=>ro.getStart(t),exact:(t,n,s,o)=>t}),iO=Kl.domRange,aO=Kl.relative,lO=Kl.exact,cO=e=>{const t=rO(e);return dh(t)},uO=cy.create,ci={domRange:iO,relative:aO,exact:lO,exactFromRange:oO,getWin:cO,range:uO},Gl=(e,t)=>{const n=yt(e);return n==="input"?ro.after(e):P(["br","img"],n)?t===0?ro.before(e):ro.after(e):ro.on(e,t)},fO=(e,t)=>{const n=e.fold(ro.before,Gl,ro.after),s=t.fold(ro.before,Gl,ro.after);return ci.relative(n,s)},uy=(e,t,n,s)=>{const o=Gl(e,t),r=Gl(n,s);return ci.relative(o,r)},dO=e=>e.match({domRange:t=>{const n=_.fromDom(t.startContainer),s=_.fromDom(t.endContainer);return uy(n,t.startOffset,s,t.endOffset)},relative:fO,exact:uy}),rd=(e,t)=>{const s=(t||document).createDocumentFragment();return R(e,o=>{s.appendChild(o.dom)}),_.fromDom(s)},mO=e=>{const t=ci.getWin(e).dom,n=(o,r,i,a)=>sd(t,o,r,i,a),s=dO(e);return GP(t,s).match({ltr:n,rtl:n})},pO=(e,t,n)=>ZP(e,t,n),fy=(e,t,n)=>pO(n.defaultView,e,t).map(s=>{const o=n.createRange();return o.setStart(s.start.dom,s.soffset),o.setEnd(s.finish.dom,s.foffset),o}).getOrUndefined(),id=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,gO=(e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},dy=(e,t,n)=>gO(e,t,n)!==null,hO=(e,t,n)=>dy(e,t,s=>s.nodeName===n),ad=e=>e&&e.nodeName==="TABLE",bO=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),CO=(e,t)=>Ln(e)&&dy(e,t,Bs)===!1,my=(e,t,n)=>{const s=new zt(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=s[n?"prev":"next"]();)if(Dt(t))return!0},yO=(e,t)=>e.previousSibling&&e.previousSibling.nodeName===t,vO=(e,t)=>{for(;t&&t!==e;){if(wt(t))return!0;t=t.parentNode}return!1},ld=(e,t,n,s,o)=>{let r;const i=e.getRoot();let a;const c=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||i;if(s&&Dt(o)&&t&&e.isEmpty(f))return b.some(L(o.parentNode,e.nodeIndex(o)));const d=new zt(o,f);for(;a=d[s?"prev":"next"]();){if(e.getContentEditableParent(a)==="false"||CO(a,i))return b.none();if(ne(a)&&a.nodeValue.length>0)return hO(a,i,"A")===!1?b.some(L(a,s?a.nodeValue.length:0)):b.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return b.none();r=a}return n&&r?b.some(L(r,0)):b.none()},py=(e,t,n,s)=>{let o,r;const i=e.getRoot();let a,c,f=!1;o=s[(n?"start":"end")+"Container"],r=s[(n?"start":"end")+"Offset"];const d=Ee(o)&&r===o.childNodes.length,p=e.schema.getNonEmptyElements();if(c=n,Ln(o))return b.none();if(Ee(o)&&r>o.childNodes.length-1&&(c=!1),ef(o)&&(o=i,r=0),o===i){if(c&&(a=o.childNodes[r>0?r-1:0],a&&(Ln(a)||p[a.nodeName]||ad(a))))return b.none();if(o.hasChildNodes()){if(r=Math.min(!c&&r>0?r-1:r,o.childNodes.length-1),o=o.childNodes[r],r=ne(o)&&d?o.data.length:0,!t&&o===i.lastChild&&ad(o)||vO(i,o)||Ln(o))return b.none();if(o.hasChildNodes()&&ad(o)===!1){a=o;const y=new zt(o,i);do{if(wt(a)||Ln(a)){f=!1;break}if(ne(a)&&a.nodeValue.length>0){r=c?0:a.nodeValue.length,o=a,f=!0;break}if(p[a.nodeName.toLowerCase()]&&!bO(a)){r=e.nodeIndex(a),o=a.parentNode,c||r++,f=!0;break}}while(a=c?y.next():y.prev())}}}return t&&(ne(o)&&r===0&&ld(e,d,t,!0,o).each(y=>{o=y.container(),r=y.offset(),f=!0}),Ee(o)&&(a=o.childNodes[r],a||(a=o.childNodes[r-1]),a&&Dt(a)&&!yO(a,"A")&&!my(e,a,!1)&&!my(e,a,!0)&&ld(e,d,t,!0,a).each(y=>{o=y.container(),r=y.offset(),f=!0}))),c&&!t&&ne(o)&&r===o.nodeValue.length&&ld(e,d,t,!1,o).each(y=>{o=y.container(),r=y.offset(),f=!0}),f?b.some(L(o,r)):b.none()},Yl=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=L.fromRangeStart(t);return py(e,n,!0,s).each(r=>{(!n||!L.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||py(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),id(t,s)?b.none():b.some(s)},Xl=(e,t)=>e.splitText(t),Ql=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;return t===s&&ne(t)?n>0&&n<t.nodeValue.length&&(s=Xl(t,n),t=s.previousSibling,o>n?(o=o-n,t=s=Xl(s,o).previousSibling,o=s.nodeValue.length,n=0):o=0):(ne(t)&&n>0&&n<t.nodeValue.length&&(t=Xl(t,n),n=0),ne(s)&&o>0&&o<s.nodeValue.length&&(s=Xl(s,o).previousSibling,o=s.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},ui=e=>({walk:(o,r)=>ga(e,o,r),split:Ql,normalize:o=>Yl(e,o).fold(pt,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});ui.compareRanges=id,ui.getCaretRangeFromPoint=fy,ui.getSelectedNode=Al,ui.getNode=Ro;const EO=((e,t)=>{const n=(a,c)=>{if(!yn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;ji(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=_s(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>X(c,(f,d)=>{const p=_s(a,d),y=p===void 0?0:parseInt(p,10);return isNaN(y)?f:f+y},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const d=r(a,f);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Vr(e)?t.getBoundingClientRect().height:t.offsetHeight}),xO=e=>EO.get(e),gy=()=>_.fromDom(document),hy=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=hy(e,o);return[s].concat(r)}),SO=(e,t)=>{const n=t.owner(e);return hy(t,n)};var wO=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(_.fromDom)},owner:e=>Eo(e)});const _O=e=>{const t=gy(),n=Zu(t),s=SO(e,wO),o=Qu(e),r=fe(s,(i,a)=>{const c=Qu(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return Wr(r.left+o.left+n.left,r.top+o.top+n.top)},cd=e=>yt(e)==="textarea",kO=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),NO=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},TO=(e,t)=>{const n=Yt(e);if(n.length===0||cd(e))return{element:e,offset:t};if(t<n.length&&!cd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return cd(s)?{element:e,offset:t}:yt(s)==="img"?{element:s,offset:1}:In(s)?{element:s,offset:td(s).length}:{element:s,offset:Yt(s).length}}},by=(e,t)=>{const n=$N(e),s=xO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},AO=(e,t)=>{const n=TO(e,t),s=_.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Kt+"</span>");return Xn(n.element,s),by(s,()=>At(s))},RO=e=>by(_.fromDom(e),Ie),Cy=(e,t,n,s)=>{OO(e,(o,r)=>PO(e,t,n,s),n)},yy=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(kO(e,r))return;const i=Zu(t).top;n(t,i,s,o),NO(e,r)},PO=(e,t,n,s)=>{const o=_.fromDom(e.getBody()),r=_.fromDom(e.getDoc());SN(o);const i=AO(_.fromDom(n.startContainer),n.startOffset);yy(e,r,t,i,s),i.cleanup()},vy=(e,t,n,s)=>{const o=_.fromDom(e.getDoc());yy(e,o,n,RO(t),s)},OO=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(_.fromDom(s),_.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},ud=(e,t,n,s)=>{const o=e.pos;if(n)Th(o.left,o.top,s);else{const r=o.top-t+e.height;Th(o.left,r,s)}},Ey=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?ud(s,n,o!==!1,e):i>r?ud(s,n,c?o!==!1:o===!0,e):a>r&&!c&&ud(s,n,o===!0,e)},xy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Ey(e,t,o,n,s)},Sy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Ey(e,t,o,n,s);const r=_O(n.element),i=Ph(window);r.top<i.y?Ah(n.element,s!==!1):r.top>i.bottom&&Ah(n.element,s===!0)},DO=(e,t,n)=>Cy(e,xy,t,n),BO=(e,t,n)=>vy(e,t,xy,n),IO=(e,t,n)=>Cy(e,Sy,t,n),$O=(e,t,n)=>vy(e,t,Sy,n),LO=(e,t,n)=>{(e.inline?BO:$O)(e,t,n)},ya=(e,t,n)=>{(e.inline?DO:IO)(e,t,n)},wy=e=>e.dom.focus(),_y=e=>{const t=Qo(e).dom;return e.dom===t.activeElement},fd=(e=gy())=>b.from(e.dom.activeElement).map(_.fromDom),FO=e=>fd(Qo(e)).filter(t=>e.dom.contains(t.dom)),ky=(e,t)=>{const n=In(t)?td(t).length:Yt(t).length+1;return e>n?n:e<0?0:e},MO=e=>ci.range(e.start,ky(e.soffset,e.start),e.finish,ky(e.foffset,e.finish)),Ny=(e,t)=>!ml(t.dom)&&(to(e,t)||nt(e,t)),Ty=e=>t=>Ny(e,t.start)&&Ny(e,t.finish),UO=e=>e.inline,zO=e=>ci.range(_.fromDom(e.startContainer),e.startOffset,_.fromDom(e.endContainer),e.endOffset),HO=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(zO)},VO=e=>{const t=dh(e);return HO(t.dom).filter(Ty(e))},WO=(e,t)=>b.from(t).filter(Ty(e)).map(MO),jO=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},dd=e=>{const t=UO(e)?VO(_.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},md=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>WO(_.fromDom(e.getBody()),n)).bind(jO),qO=e=>{md(e).each(t=>e.selection.setRng(t))},Ay={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},KO=(e,t)=>(yn(t)||(t=0),setTimeout(e,t)),GO=(e,t)=>(yn(t)||(t=0),setInterval(e,t)),Un={setEditorTimeout:(e,t,n)=>KO(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=GO(()=>{e.removed?clearInterval(s):t()},n);return s}},YO=e=>e.type==="nodechange"&&e.selectionChange,XO=(e,t)=>{const n=()=>{t.throttle()};rt.DOM.bind(document,"mouseup",n),e.on("remove",()=>{rt.DOM.unbind(document,"mouseup",n)})},QO=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},ZO=(e,t)=>{QO(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{YO(n)||dd(e)})},JO=e=>{const t=Nl(()=>{dd(e)},0);e.on("init",()=>{e.inline&&XO(e,t),ZO(e,t)}),e.on("remove",()=>{t.cancel()})};let va;const pd=rt.DOM,eD=e=>Ay.isEditorUIElement(e),tD=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Zl=(e,t)=>{const n=B1(e);return pd.getParent(t,o=>eD(o)||(n?e.dom.is(o,n):!1))!==null},nD=e=>{try{const t=Qo(_.fromDom(e.getElement()));return fd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},sD=(e,t)=>{const n=t.editor;JO(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Un.setEditorTimeout(n,()=>{const s=e.focusedEditor;!Zl(n,nD(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),va||(va=s=>{const o=e.activeEditor;o&&yh(s).each(r=>{r.ownerDocument===document&&r!==document.body&&!Zl(o,r)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},pd.bind(document,"focusin",va))},oD=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(pd.unbind(document,"focusin",va),va=null)},rD=e=>{e.on("AddEditor",re(sD,e)),e.on("RemoveEditor",re(oD,e))},iD=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),aD=e=>e.collapsed?b.from(Ro(e.startContainer,e.startOffset)).map(_.fromDom):b.none(),lD=(e,t)=>aD(t).bind(n=>oT(n)?b.some(n):to(e,n)===!1?b.some(e):b.none()),Ry=(e,t)=>{lD(_.fromDom(e.getBody()),t).bind(n=>mn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},gd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},cD=e=>_y(e)||FO(e).isSome(),uD=e=>e.iframeElement&&_y(_.fromDom(e.iframeElement)),fD=e=>{const t=e.getBody();return t&&cD(_.fromDom(t))},dD=e=>{const t=Qo(_.fromDom(e.getElement()));return fd(t).filter(n=>!tD(n.dom)&&Zl(e,n.dom)).isSome()},dr=e=>e.inline?fD(e):uD(e),mD=e=>dr(e)||dD(e),pD=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&dr(e)===!1&&md(e).each(r=>{e.selection.setRng(r),s=r});const o=iD(e,t.getNode());if(e.dom.isChildOf(o,n)){gd(o),Ry(e,s),hd(e);return}e.inline||(tt.browser.isOpera()||gd(n),e.getWin().focus()),(tt.browser.isFirefox()||e.inline)&&(gd(n),Ry(e,s)),hd(e)},hd=e=>e.editorManager.setActive(e),gD=(e,t)=>{e.removed||(t?hd(e):pD(e))},Py=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(_.fromDom).map(a=>!s||!t.collapsed?cl(a,o(a,i)).getOr(a):a).bind(a=>Kn(a)?b.some(a):Yn(a).filter(Kn)).map(a=>a.dom).getOr(e)},Oy=(e,t,n)=>Py(e,t,!0,n,(s,o)=>Math.min(hh(s),o)),Dy=(e,t,n)=>Py(e,t,!1,n,(s,o)=>o>0?o-1:o),By=(e,t)=>{const n=e;for(;e&&ne(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},hD=(e,t)=>{let n,s,o;if(!t)return e;s=t.startContainer,o=t.endContainer;const r=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(s===o&&i-r<2&&s.hasChildNodes()&&(n=s.childNodes[r]),s.nodeType===3&&o.nodeType===3&&(s.length===r?s=By(s.nextSibling,!0):s=s.parentNode,i===0?o=By(o.previousSibling,!1):o=o.parentNode,s&&s===o))?s:n&&n.nodeType===3?n.parentNode:n},bD=(e,t,n,s)=>{let o;const r=[],i=e.getRoot();if(n=e.getParent(n||Oy(i,t,t.collapsed),e.isBlock),s=e.getParent(s||Dy(i,t,t.collapsed),e.isBlock),n&&n!==i&&r.push(n),n&&s&&n!==s){o=n;const a=new zt(n,i);for(;(o=a.next())&&o!==s;)e.isBlock(o)&&r.push(o)}return s&&n!==s&&s!==i&&r.push(s),r},CD=(e,t,n)=>b.from(t).map(s=>{const o=e.nodeIndex(s),r=e.createRng();return r.setStart(s.parentNode,o),r.setEnd(s.parentNode,o+1),n&&(Zf(e,r,s,!0),Zf(e,r,s,!1)),r}),bd=(e,t)=>z(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),yD=e=>yt(e)==="img"?1:QC(e).fold(()=>Yt(e).length,t=>t.length),vD=e=>QC(e).filter(t=>t.trim().length!==0||t.indexOf(Xt)>-1).isSome(),ED=["img","br"],Iy=e=>vD(e)||P(ED,yt(e)),xD=e=>KN(e,Iy),SD=e=>wD(e,Iy),wD=(e,t)=>{const n=s=>{const o=Yt(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return b.some(i);const a=n(i);if(a.isSome())return a}return b.none()};return n(e)},$y="[data-mce-autocompleter]",_D=(e,t)=>{if(Ly(_.fromDom(e.getBody())).isNone()){const n=_.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());It(n,_.fromDom(t.extractContents())),t.insertNode(n.dom),Yn(n).each(s=>s.dom.normalize()),SD(n).map(s=>{e.selection.setCursorLocation(s.dom,yD(s))})}},kD=e=>tr(e,$y),Ly=e=>Qi(e,$y),ND=(e,t)=>Ly(t).each(n=>{const s=e.selection.getBookmark();So(n),e.selection.moveToBookmark(s)}),TD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Jl=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},AD=e=>{if(!nr(e.value))return!1;const t=e.parent;return!(t&&(t.name!=="span"||t.attr("style"))&&/^[ ]+$/.test(e.value))},Fy=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class pn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new pn(t,TD[t]||1);return n&&Ct(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;let o;if(typeof t!="string")return t!=null&&Ct(t,(r,i)=>{s.attr(i,r)}),s;if(o=s.attributes){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new pn(t.name,t.type);let s;if(s=t.attributes){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent.insert(t,n),t.append(n),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o.next=s,n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s.prev=o,t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev.next=t,t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next.prev=t,t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Jl(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Jl(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){const o=this;let r=o.firstChild;if(Fy(o))return!1;if(r)do{if(r.type===1){if(r.attr("data-mce-bogus"))continue;if(t[r.name]||Fy(r))return!1}if(r.type===8||r.type===3&&!AD(r)||r.type===3&&r.parent&&n[r.parent.name]&&nr(r.value)||s&&s(r))return!1}while(r=Jl(r,o));return!0}walk(t){return Jl(this,null,t)}}const RD=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),My=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&RD(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},PD=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){qn(c[2],"--")?a=My(t,!1,c.index+3):a=My(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Xs(f)||f.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Fe(r,c[2])||(i+=1),a=s.lastIndex+f[0].length;break}}return a},OD=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},Uy=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=OD(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let f;r[i[1]]?f=a:f=PD(s,o,a),o=o.substring(0,a-c)+o.substring(f),n.lastIndex=a-c}return _o(o)},DD=Uy,BD=(e,t)=>{const n=Sn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},ID=(e,t,n)=>{let s;return t.format==="raw"?s=G.trim(DD(e.serializer,n.innerHTML)):t.format==="text"?s=e.dom.isEmpty(n)?"":_o(n.innerText||n.textContent):t.format==="tree"?s=e.serializer.serialize(n,t):s=BD(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Cl(_.fromDom(n))&&he(s)?G.trim(s):s},$D=(e,t)=>b.from(e.getBody()).fold(K(t.format==="tree"?new pn("body",11):""),n=>ID(e,t,n)),LD=G.each,zy=e=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const o=i=>{const a={};return LD(e.getAttribs(i),c=>{const f=c.nodeName.toLowerCase();f.indexOf("_")!==0&&f!=="style"&&f.indexOf("data-")!==0&&(a[f]=e.getAttrib(i,f))}),a},r=(i,a)=>{let c,f;for(f in i)if(Fe(i,f)){if(c=a[f],typeof c=="undefined"||i[f]!==c)return!1;delete a[f]}for(f in a)if(Fe(a,f))return!1;return!0};return!r(o(n),o(s))||!r(e.parseStyle(e.getAttrib(n,"style")),e.parseStyle(e.getAttrib(s,"style")))?!1:!Mn(n)&&!Mn(s)}}),Hy=G.makeMap,Vy=e=>{const t=[];e=e||{};const n=e.indent,s=Hy(e.indent_before||""),o=Hy(e.indent_after||""),r=ko.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{let d,p,y,C;if(n&&s[a]&&t.length>0&&(C=t[t.length-1],C.length>0&&C!==`
`&&t.push(`
`)),t.push("<",a),c)for(d=0,p=c.length;d<p;d++)y=c[d],t.push(" ",y.name,'="',r(y.value,!0),'"');!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0&&(C=t[t.length-1],C.length>0&&C!==`
`&&t.push(`
`))},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Do=(e,t=To())=>{const n=Vy(e);return e=e||{},e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{n.text(c.value,c.raw)},8:c=>{n.comment(c.value)},7:c=>{n.pi(c.name,c.value)},10:c=>{n.doctype(c.value)},4:c=>{n.cdata(c.value)},11:c=>{if(c=c.firstChild)do a(c);while(c=c.next)}};n.reset();const a=c=>{const f=i[c.type];if(f)f(c);else{const d=c.name,p=d in t.getVoidElements();let y=c.attributes;if(r&&y&&y.length>1){const C=[];C.map={};const x=t.getElementRule(c.name);if(x){for(let v=0,S=x.attributesOrder.length;v<S;v++){const w=x.attributesOrder[v];if(w in y.map){const A=y.map[w];C.map[w]=A,C.push({name:w,value:A})}}for(let v=0,S=y.length;v<S;v++){const w=y[v].name;if(!(w in C.map)){const A=y.map[w];C.map[w]=A,C.push({name:w,value:A})}}y=C}}if(n.start(d,y,p),!p){let C=c.firstChild;if(C){(d==="pre"||d==="textarea")&&C.type===3&&C.value[0]===`
`&&n.text(`
`,!0);do a(C);while(C=C.next)}n.end(d)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},Wy=new Set;R(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Wy.add(t)});const jy=["font","text-decoration","text-emphasis"],Cd=(e,t)=>es(e.parseStyle(e.getAttrib(t,"style"))),FD=e=>Wy.has(e),MD=(e,t)=>et(Cd(e,t),n=>!FD(n)),UD=e=>H(e,t=>U(jy,n=>qn(t,n))),zD=(e,t,n)=>{const s=Cd(e,t),o=Cd(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Zs(f)&&Zs(d)&&f!==d};return U(s,i=>{const a=c=>U(c,f=>f===i);if(!a(o)&&a(jy)){const c=UD(o);return U(c,r)}else return r(i)})},qy=(e,t,n)=>b.from(n.container()).filter(ne).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),yd=re(qy,!0,pa),vd=re(qy,!1,pa),HD=e=>{const t=e.container();return ne(t)&&(t.data.length===0||yl(t.data)&&ba.isBookmarkNode(t.parentNode))},Bo=(e,t)=>n=>b.from($f(e?0:-1,n)).filter(t).isSome(),Ky=e=>Ih(e)&&_s(_.fromDom(e),"display")==="block",Gy=e=>wt(e)&&!MN(e),VD=Bo(!0,Ky),WD=Bo(!1,Ky),Ea=Bo(!0,ks),xa=Bo(!1,ks),Yy=Bo(!0,Yi),Xy=Bo(!1,Yi),mr=Bo(!0,Gy),pr=Bo(!1,Gy),jD=e=>{const t=[];let n=e.dom;for(;n;)t.push(_.fromDom(n)),n=n.lastChild;return t},qD=e=>{const t=xn(e,"br"),n=H(jD(e).slice(-1),qr);t.length===n.length&&R(n,At)},gr=e=>{Gi(e),It(e,_.fromHtml('<br data-mce-bogus="1">'))},KD=e=>{Gu(e).each(t=>{Xo(t).each(n=>{Ns(e)&&qr(t)&&Ns(n)&&At(t)})})},GD=e=>e.slice(0,-1),YD=(e,t,n)=>to(t,e)?GD(gN(e,s=>n(s)||nt(s,t))):[],Qy=(e,t)=>YD(e,t,pt),io=(e,t)=>[e].concat(Qy(e,t)),Ed=(e,t,n)=>NC(e,t,n,HD),Zy=(e,t)=>de(io(_.fromDom(t.container()),e),Ns),Jy=(e,t,n)=>Ed(e,t.dom,n).forall(s=>Zy(t,n).fold(()=>As(s,n,t.dom)===!1,o=>As(s,n,t.dom)===!1&&to(o,_.fromDom(s.container())))),ev=(e,t,n)=>Zy(t,n).fold(()=>Ed(e,t.dom,n).forall(s=>As(s,n,t.dom)===!1),s=>Ed(e,s.dom,n).isNone()),xd=re(ev,!1),tv=re(ev,!0),XD=re(Jy,!1),QD=re(Jy,!0),ZD=e=>$l(e).exists(qr),ec=(e,t,n)=>{const s=H(io(_.fromDom(n.container()),t),Ns),o=Ut(s).getOr(t);return Fn(e,o.dom,n).filter(ZD)},Sd=(e,t)=>$l(t).exists(qr)||ec(!0,e,t).isSome(),wd=(e,t)=>DR(t).exists(qr)||ec(!1,e,t).isSome(),JD=re(ec,!1),eB=re(ec,!0),nv=e=>L.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),sv=(e,t)=>{const n=H(io(_.fromDom(t.container()),e),Ns);return Ut(n).getOr(e)},ov=(e,t)=>nv(t)?vd(t):vd(t)||Os(sv(e,t).dom,t).exists(vd),rv=(e,t)=>nv(t)?yd(t):yd(t)||os(sv(e,t).dom,t).exists(yd),tB=e=>P(["pre","pre-wrap"],e),_d=e=>$l(e).bind(t=>hl(t,Kn)).exists(t=>tB(_s(t,"white-space"))),nB=(e,t)=>Os(e.dom,t).isNone(),sB=(e,t)=>os(e.dom,t).isNone(),oB=(e,t)=>nB(e,t)||sB(e,t)||xd(e,t)||tv(e,t)||wd(e,t)||Sd(e,t),rB=(e,t)=>_d(t)?!1:oB(e,t)||ov(e,t)||rv(e,t),tc=(e,t)=>_d(t)?!1:xd(e,t)||XD(e,t)||wd(e,t)||ov(e,t),iB=e=>{const t=e.container(),n=e.offset();return ne(t)&&n<t.data.length?L(t,n+1):e},nc=(e,t)=>_d(t)?!1:tv(e,t)||QD(e,t)||Sd(e,t)||rv(e,t),iv=(e,t)=>tc(e,t)||nc(e,iB(t)),av=(e,t)=>Ul(e.charAt(t)),aB=e=>{const t=e.container();return ne(t)&&un(t.data,Xt)},lB=e=>{const t=e.split("");return z(t,(n,s)=>Ul(n)&&s>0&&s<t.length-1&&Hf(t[s-1])&&Hf(t[s+1])?" ":n).join("")},cB=(e,t)=>{const n=t.data,s=L(t,0);return av(n,0)&&!iv(e,s)?(t.data=" "+n.slice(1),!0):!1},uB=e=>{const t=e.data,n=lB(t);return n!==t?(e.data=n,!0):!1},fB=(e,t)=>{const n=t.data,s=L(t,n.length-1);return av(n,n.length-1)&&!iv(e,s)?(t.data=n.slice(0,-1)+" ",!0):!1},dB=(e,t)=>b.some(t).filter(aB).bind(n=>{const s=n.container();return cB(e,s)||uB(s)||fB(e,s)?b.some(n):b.none()}),mB=e=>{const t=_.fromDom(e.getBody());e.selection.isCollapsed()&&dB(t,L.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},lv=(e,t,n)=>{if(n===0)return;const s=_.fromDom(e),o=jr(s,Ns).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&nc(o,L(e,e.data.length)),a=t===0&&tc(o,L(e,0));e.replaceData(t,n,Yh(r,4,a,i))},sc=(e,t)=>{const n=e.data.slice(t),s=n.length-Ik(n).length;lv(e,t,s)},kd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-Tg(n).length;lv(e,t-s,s)},Nd=(e,t,n,s=!0)=>{const o=Tg(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),At(_.fromDom(i)),n&&sc(r,o),r},pB=(e,t)=>{const n=e.container(),s=e.offset();return L.isTextPosition(e)===!1&&n===t.parentNode&&s>L.before(t).offset()},gB=(e,t)=>pB(t,e)?L(t.container(),t.offset()-1):t,hB=e=>ne(e)?L(e,0):L.before(e),bB=e=>ne(e)?L(e,e.data.length):L.after(e),cv=e=>ts(e.previousSibling)?b.some(bB(e.previousSibling)):e.previousSibling?Ds(e.previousSibling):b.none(),uv=e=>ts(e.nextSibling)?b.some(hB(e.nextSibling)):e.nextSibling?mn(e.nextSibling):b.none(),CB=(e,t)=>{const n=L.before(t.previousSibling?t.previousSibling:t.parentNode);return Os(e,n).fold(()=>os(e,L.after(t)),b.some)},yB=(e,t)=>os(e,L.after(t)).fold(()=>Os(e,L.before(t)),b.some),vB=(e,t)=>cv(t).orThunk(()=>uv(t)).orThunk(()=>CB(e,t)),EB=(e,t)=>uv(t).orThunk(()=>cv(t)).orThunk(()=>yB(e,t)),xB=(e,t,n)=>e?EB(t,n):vB(t,n),SB=(e,t,n)=>xB(e,t,n).map(re(gB,n)),fv=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},wB=e=>t=>t.dom===e,_B=(e,t)=>t&&Fe(e.schema.getBlockElements(),yt(t)),kB=e=>{if(Ht(e)){const t=_.fromHtml('<br data-mce-bogus="1">');return Gi(e),It(e,t),b.some(L.before(t.dom))}else return b.none()},NB=(e,t,n)=>{const s=Xo(e).filter(In),o=Ki(e).filter(In);return At(e),Zk(s,o,t,(r,i,a)=>{const c=r.dom,f=i.dom,d=c.data.length;return Nd(c,f,n),a.container()===f?L(c,d):a}).orThunk(()=>(n&&(s.each(r=>kd(r.dom,r.dom.length)),o.each(r=>sc(r.dom,0))),t))},TB=(e,t)=>Fe(e.schema.getTextInlineElements(),yt(t)),hr=(e,t,n,s=!0)=>{const o=SB(t,e.getBody(),n.dom),r=jr(n,re(_B,e),wB(e.getBody())),i=NB(n,o,TB(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(kB).fold(()=>{s&&fv(e,t,i)},a=>{s&&fv(e,t,b.some(a))})},AB=e=>t=>nt(e,t),Td=e=>xn(e,"td,th"),RB=(e,t)=>{const n=f=>ha(_.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=En(s,o,nt).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Ad=(e,t)=>({start:e,end:t}),PB=(e,t,n)=>({rng:e,table:t,cells:n}),Sa=Ts.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),oc=(e,t)=>tr(_.fromDom(e),"td,th",t),dv=e=>!nt(e.start,e.end),mv=(e,t)=>ha(e.start,t).bind(n=>ha(e.end,t).bind(s=>ju(nt(n,s),n))),OB=(e,t)=>!dv(e)&&mv(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),DB=(e,t)=>{const n=oc(e.startContainer,t),s=oc(e.endContainer,t);return En(n,s,Ad)},BB=e=>t=>ha(t,e).bind(n=>Es(Td(n)).map(s=>Ad(t,s))),IB=e=>t=>ha(t,e).bind(n=>Ut(Td(n)).map(s=>Ad(s,t))),Rd=e=>t=>mv(t,e).map(n=>PB(t,n,Td(n))),pv=(e,t,n,s)=>{if(n.collapsed||!e.forall(dv))return b.none();if(t.isSameTable){const o=e.bind(Rd(s));return b.some({start:o,end:o})}else{const o=oc(n.startContainer,s),r=oc(n.endContainer,s),i=o.bind(BB(s)).bind(Rd(s)),a=r.bind(IB(s)).bind(Rd(s));return b.some({start:i,end:a})}},gv=(e,t)=>Te(e,n=>nt(n,t)),Pd=e=>En(gv(e.cells,e.rng.start),gv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),$B=(e,t,n)=>e.exists(s=>OB(s,n)&&Qf(s.start,t)),hv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},LB=(e,t,n,s)=>pv(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=Pd(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(Sa.fullTable(o.table));if(i.length>0){if(r)return b.some(Sa.partialTable(i,b.none()));{const a=hv(n,t);return b.some(Sa.partialTable(i,b.some(ft(_e({},t),{rng:a}))))}}else return b.none()}),FB=(e,t,n,s)=>pv(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(Pd).getOr([]),a=r.bind(Pd).getOr([]);if(i.length>0&&a.length>0){const c=hv(n,t);return b.some(Sa.multiTable(i,a,c))}else return b.none()}),MB=(e,t)=>{const n=AB(e),s=DB(t,n),o=RB(t,n);return $B(s,t,n)?s.map(r=>Sa.singleCellTable(t,r.start)):o.isMultiTable?FB(s,o,t,n):LB(s,o,t,n)},bv=e=>(Jk(e)?Xo(e):Gu(e)).bind(bv).orThunk(()=>b.some(e)),Cv=e=>R(e,t=>{Gn(t,"contenteditable"),gr(t)}),UB=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(_.fromDom),zB=(e,t,n)=>{n.each(s=>{t?At(s):(gr(s),e.selection.setCursorLocation(s.dom,0))})},Od=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Dd(e,o,t,!1).each(r=>r())},yv=e=>{const t=li(e),n=_.fromDom(e.selection.getNode());gl(n.dom)&&Ht(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&U(t,s=>nt(s,n))&&fn(n,"data-mce-selected","1")},vv=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=UB(e,i?r.endContainer:r.startContainer);r.deleteContents(),zB(e,i,a.filter(Ht));const c=i?t[0]:t[t.length-1];return Od(e,c,s,i),Ht(c)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);Cv(o),yv(e)}),HB=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Od(e,r,o,!0),Od(e,i,o,!1);const a=Ht(r)?t:t.slice(1),c=Ht(i)?n:n.slice(0,-1);Cv(a.concat(c)),s.deleteContents(),yv(e)}),Dd=(e,t,n,s=!0)=>b.some(()=>{t.deleteContents();const o=bv(n).getOr(n),r=_.fromDom(e.dom.getParent(o.dom,e.dom.isBlock));if(Ht(r)&&(gr(r),s&&e.selection.setCursorLocation(r.dom,0)),!nt(n,r)){const i=Hr(Yn(r),n)?[]:hN(r);R(i.concat(Yt(n)),a=>{!nt(a,r)&&!to(a,r)&&Ht(a)&&At(a)})}}),VB=(e,t)=>b.some(()=>hr(e,!1,t)),WB=(e,t,n)=>MB(t,n).bind(s=>s.fold(re(Dd,e),re(VB,e),re(vv,e),re(HB,e))),jB=(e,t)=>rc(e,t),qB=(e,t,n,s)=>Bd(t,s).fold(()=>WB(e,t,n),o=>jB(e,o)),KB=(e,t,n)=>{const s=_.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?vv(e,n,b.none()):qB(e,s,o,t)},Ev=(e,t)=>de(io(t,e),bl),Bd=(e,t)=>de(io(t,e),nN("caption")),GB=(e,t,n,s,o)=>Ml(n,e.getBody(),o).bind(r=>Ev(t,_.fromDom(r.getNode())).bind(i=>nt(i,s)?b.none():b.some(Ie))),rc=(e,t)=>b.some(()=>{gr(t),e.selection.setCursorLocation(t.dom,0)}),YB=(e,t,n,s)=>mn(e.dom).bind(o=>Ds(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),XB=(e,t)=>rc(e,t),QB=(e,t,n)=>Bd(e,_.fromDom(n.getNode())).fold(()=>b.some(Ie),s=>ju(!nt(s,t),Ie)),ZB=(e,t,n,s,o)=>Ml(n,e.getBody(),o).fold(()=>b.some(Ie),r=>YB(s,n,o,r)?XB(e,s):QB(t,s,r)),JB=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return Ev(n,s).bind(r=>Ht(r)?rc(e,r):GB(e,n,t,r,o))},eI=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return Ht(s)?rc(e,s):ZB(e,n,t,s,o)},xv=(e,t)=>e?Yy(t):Xy(t),tI=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return xv(t,n)||Fn(t,e.getBody(),n).exists(s=>xv(t,s))},nI=(e,t,n)=>{const s=_.fromDom(e.getBody());return Bd(s,n).fold(()=>JB(e,t,s,n).orThunk(()=>ju(tI(e,t),Ie)),o=>eI(e,t,s,o))},Id=(e,t)=>{const n=_.fromDom(e.selection.getStart(!0)),s=li(e);return e.selection.isCollapsed()&&s.length===0?nI(e,t,n):KB(e,n,s)},wa=(e,t)=>{for(;t&&t!==e;){if(no(t)||wt(t))return t;t=t.parentNode}return null},$d=(e,t)=>{t(e),e.firstChild&&$d(e.firstChild,t),e.next&&$d(e.next,t)},Sv=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},sI=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&$d(n.firstChild,o=>{Sv(e,t,o,s)}),s},wv=(e,t)=>{const n=s=>{Ct(s,o=>{const r=H(o.nodes,i=>Ne(i.parent));R(o.filter.callbacks,i=>{i(r,o.filter.name,t)})})};n(e.nodes),n(e.attributes)},_v=(e,t,n,s={})=>{const o=sI(e,t,n);wv(o,s)},Ld=(e,t,n,s)=>{t.insert&&n[s.name]?s.empty().append(new pn("br",1)):s.empty().append(new pn("#text",3)).value=Xt},oI=e=>kv(e,"#text")&&e.firstChild.value===Xt,kv=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,rI=(e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty},_a=(e,t,n,s)=>s.isEmpty(t,n,o=>rI(e,o)),iI=(e,t)=>e&&(e.name in t||e.name==="br"),Fd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)t.isValidChild(n.name,o.name)||Fd(o,t,n);e.unwrap()}},Md=(e,t,n=Ie)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const f=e[c];let d,p,y;if(!f.parent||a.has(f))continue;if(s[f.name]&&f.parent.name==="li"){let x=f.next;for(;x&&s[x.name];){x.name="li",a.add(x),f.parent.insert(x,f.parent);x=x.next}f.unwrap();continue}const C=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&!i[d.name];d=d.parent)C.push(d);if(d&&C.length>1)if(t.isValidChild(d.name,f.name)){C.reverse(),p=C[0].clone(),n(p);let x=p;for(let v=0;v<C.length-1;v++){t.isValidChild(x.name,C[v].name)?(y=C[v].clone(),n(y),x.append(y)):y=x;for(let S=C[v].firstChild;S&&S!==C[v+1];){const w=S.next;y.append(S),S=w}x=y}_a(t,o,r,p)?d.insert(f,C[0],!0):(d.insert(p,C[0],!0),d.insert(f,p)),d=C[0],(_a(t,o,r,d)||kv(d,"br"))&&d.empty().remove()}else Fd(f,t);else if(f.parent){if(f.name==="li"){let x=f.prev;if(x&&(x.name==="ul"||x.name==="ol")){x.append(f);continue}if(x=f.next,x&&(x.name==="ul"||x.name==="ol")){x.insert(f,x.firstChild,!0);continue}const v=new pn("ul",1);n(v),f.wrap(v);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const x=new pn("div",1);n(x),f.wrap(x)}else Fd(f,t)}}},aI=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},lI=e=>{const t=L.fromRangeStart(e),n=L.fromRangeEnd(e),s=e.commonAncestorContainer;return Fn(!1,s,n).map(o=>!As(t,n,s)&&As(t,o,s)?aI(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Ud=e=>e.collapsed?e:lI(e),cI=e=>e.firstChild&&e.firstChild===e.lastChild,uI=e=>e.name==="br"||e.value===Xt,fI=(e,t)=>e.getBlockElements()[t.name]&&cI(t)&&uI(t.firstChild),dI=(e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||fI(e,t))},mI=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),dI(e,s)&&(s=s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},pI=e=>{const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode.removeChild(n),e},gI=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return pI(o)},hI=e=>H(e.childNodes,t=>t.nodeName==="LI"),bI=e=>e.data===Xt||Dt(e),CI=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&bI(e.firstChild),yI=e=>!e.firstChild||CI(e),vI=e=>e.length>0&&yI(e[e.length-1])?e.slice(0,-1):e,zd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},EI=(e,t)=>!!zd(e,t),xI=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},SI=(e,t)=>{const n=L.before(e),o=Ps(t).next(n);return o?o.toRange():null},Nv=(e,t)=>{const n=L.after(e),o=Ps(t).prev(n);return o?o.toRange():null},wI=(e,t,n,s)=>{const o=xI(e,s),r=e.parentNode;return r.insertBefore(o[0],e),G.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e),Nv(t[t.length-1],n)},_I=(e,t,n)=>{const s=e.parentNode;return G.each(t,o=>{s.insertBefore(o,e)}),SI(e,n)},kI=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),Nv(t[0],n)),NI=(e,t,n,s)=>{const o=gI(t,e,s),r=zd(t,n.startContainer),i=vI(hI(o.firstChild)),a=1,c=2,f=t.getRoot(),d=p=>{const y=L.fromRangeStart(n),C=Ps(t.getRoot()),x=p===a?C.prev(y):C.next(y);return x?zd(t,x.getNode())!==r:!0};return d(a)?_I(r,i,f):d(c)?kI(r,i,f,t):wI(r,i,f,n)},Hd=gl,TI=(e,t,n)=>{if(n!==null){const s=e.getParent(t.endContainer,Hd);return n===s&&Qf(_.fromDom(n),t)}else return!1},AI=(e,t,n)=>{if(n.getAttribute("data-mce-bogus")==="all")n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},RI=(e,t)=>{b.from(e.getParent(t,"td,th")).map(_.fromDom).each(KD)},PI=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=zy(s);G.each(s.select("*[data-mce-fragment]"),i=>{if(Ne(n[i.nodeName.toLowerCase()])&&MD(s,i)){for(let c=i.parentNode;Ne(c)&&c!==o&&!zD(s,i,c);c=c.parentNode)if(r.compare(c,i)){s.remove(i,!0);break}}})}},OI=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},DI=e=>{G.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},BI=e=>!!e.getAttribute("data-mce-fragment"),II=(e,t)=>t&&!e.schema.getVoidElements()[t.nodeName],$I=(e,t)=>{let n;const s=e.dom,o=e.selection;if(!t)return;o.scrollIntoView(t);const r=wa(e.getBody(),t);if(s.getContentEditable(r)==="false"){s.remove(t),o.select(r);return}let i=s.createRng();const a=t.previousSibling;if(ne(a)){i.setStart(a,a.nodeValue.length);const d=t.nextSibling;ne(d)&&(a.appendData(d.data),d.parentNode.removeChild(d))}else i.setStartBefore(t),i.setEndBefore(t);const c=d=>{let p=L.fromRangeStart(d);if(p=Ps(e.getBody()).next(p),p)return p.toRange()},f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(Gi(_.fromDom(f)),i.setStart(f,0),i.setEnd(f,0),!Hd(f)&&!BI(f)&&(n=c(i))?(i=n,s.remove(f)):s.add(f,s.create("br",{"data-mce-bogus":"1"}))),o.setRng(i)},LI=e=>{const t=e.dom,n=Ud(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Hd);TI(t,n,s)?Dd(e,n,_.fromDom(s)):e.getDoc().execCommand("Delete",!1,null)},FI=(e,t,n)=>{let s,o,r;const i=e.selection,a=e.dom,c=e.parser,f=n.merge,d=Do({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p),o=i.getRng();const y=o.startContainer||(o.parentElement?o.parentElement():null),C=e.getBody();y===C&&i.isCollapsed()&&a.isBlock(C.firstChild)&&II(e,C.firstChild)&&a.isEmpty(C.firstChild)&&(o=a.createRng(),o.setStart(C.firstChild,0),o.setEnd(C.firstChild,0),i.setRng(o)),i.isCollapsed()||LI(e),s=i.getNode();const x={context:s.nodeName.toLowerCase(),data:n.data,insert:!0},v=c.parse(t,x);if(n.paste===!0&&mI(e.schema,v)&&EI(a,s))return o=NI(d,a,i.getRng(),v),i.setRng(o),t;if(OI(v),r=v.lastChild,r.attr("id")==="mce_marker"){const S=r;for(r=r.prev;r;r=r.walk(!0))if(r.type===3||!a.isBlock(r.name)){e.schema.isValidChild(r.parent.name,"span")&&r.parent.insert(S,r,r.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(s),!x.invalid)t=d.serialize(v),AI(e,t,s);else{e.selection.setContent(p),s=i.getNode();const S=e.getBody();for(s.nodeType===9?s=r=S:r=s;r!==S;)s=r,r=r.parentNode;t=s===S?S.innerHTML:a.getOuterHTML(s);const w=c.parse(t);for(let $=w;$;$=$.walk())if($.attr("id")==="mce_marker"){$.replace(v);break}const A=v.children(),M=v.parent.name;v.unwrap();const B=H(A,$=>!e.schema.isValidChild(M,$.name));Md(B,e.schema),_v(c.getNodeFilters(),c.getAttributeFilters(),w),t=d.serialize(w),s===S?a.setHTML(S,t):a.setOuterHTML(s,t)}return PI(e,f),$I(e,a.get("mce_marker")),DI(e.getBody()),RI(a,i.getStart()),t},ic=e=>e instanceof pn,MI=e=>{dr(e)&&mn(e.getBody()).each(t=>{const n=t.getNode(),s=Yi(n)?mn(n).getOr(t):t;e.selection.setRng(s.toRange())})},Vd=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&MI(e)},UI=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Sn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,lr(e),n)):n||(n=o),Vd(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Do({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Cl(_.fromDom(t))?n:G.trim(n);return Vd(e,o,s.no_selection),{content:o,html:o}}},zI=(e,t,n,s)=>{_v(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Do({validate:!1},e.schema).serialize(n),r=Cl(_.fromDom(t))?o:G.trim(o);return Vd(e,r,s.no_selection),{content:n,html:r}},HI=(e,t,n)=>b.from(e.getBody()).map(s=>ic(t)?zI(e,s,t,n):UI(e,s,t,n)).getOr({content:t,html:ic(n.content)?"":n.content}),VI=(e,t)=>jN(e,t).isSome(),Tv=e=>Ye(e)?e:pt,WI=(e,t,n)=>{let s=e.dom;const o=Tv(n);for(;s.parentNode;){s=s.parentNode;const r=_.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},Wd=(e,t,n)=>{const s=t(e),o=Tv(n);return s.orThunk(()=>o(e)?b.none():WI(e,t,o))},jd=qf,Av=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Rn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},qd=(e,t,n,s,o)=>{const r=e.dom.getRoot();return t===r?!1:(t=e.dom.getParent(t,i=>Av(e,i,n)?!0:i.parentNode===r||!!$s(e,i,n,s,!0)),!!$s(e,t,n,s,o))},ac=(e,t,n)=>Wt(n)&&jd(t,n.inline)||Is(n)&&jd(t,n.block)?!0:Rn(n)?Ee(t)&&e.is(t,n.selector):!1,Rv=(e,t,n,s,o,r)=>{const i=n[s];if(Ye(n.onmatch))return n.onmatch(t,n,s);if(i){if(Pt(i.length)){for(const a in i)if(Fe(i,a)){const c=s==="attributes"?e.getAttrib(t,a):Vl(e,t,a),f=oo(i[a],r),d=Mt(c)||rl(c);if(d&&Mt(f))continue;if(o&&d&&!n.exact||(!o||n.exact)&&!jd(c,Kf(f,a)))return!1}}else for(let a=0;a<i.length;a++)if(s==="attributes"?e.getAttrib(t,i[a]):Vl(e,t,i[a]))return!0}return!0},$s=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&t)for(let a=0;a<r.length;a++){const c=r[a];if(ac(e.dom,t,c)&&Rv(i,t,c,"attributes",o,s)&&Rv(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let d=0;d<f.length;d++)if(!e.dom.hasClass(t,oo(f[d],s)))return}return c}}},Kd=(e,t,n,s,o)=>{if(s)return qd(e,s,t,n,o);if(s=e.selection.getNode(),qd(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&qd(e,r,t,n,o))},jI=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&$s(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},qI=(e,t)=>{const n=o=>nt(o,_.fromDom(e.getBody())),s=(o,r)=>$s(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>Wd(_.fromDom(o),r=>tn(t,i=>s(r,i)),n)).getOrNull()},KI=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Wl(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Rn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},GI=(e,t,n)=>X(n,(s,o)=>{const r=lP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),fi=Kt,Pv="_mce_caret",YI=(e,t)=>e.importNode(t,!0),XI=e=>{const t=[];for(;e;){if(e.nodeType===3&&e.nodeValue!==fi||e.childNodes.length>1)return[];e.nodeType===1&&t.push(e),e=e.firstChild}return t},Ov=e=>XI(e).length>0,Dv=e=>{if(e){const t=new zt(e,e);for(e=t.current();e;e=t.next())if(ne(e))return e}return null},Gd=e=>{const t=_.fromTag("span");return ws(t,{id:Pv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&It(t,_.fromText(fi)),t},QI=e=>{const t=Dv(e);return t&&t.nodeValue.charAt(0)===fi&&t.deleteData(0,1),t},Yd=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(Ov(t))hr(e,!1,_.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,d=r.endOffset,p=QI(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&gr(_.fromDom(i)),o.setRng(r)}},Xd=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)Yd(e,t,n);else if(t=fr(e.getBody(),o.getStart()),!t)for(;t=s.get(Pv);)Yd(e,t,!1)},ZI=(e,t,n)=>{const s=e.dom,o=s.getParent(n,re(Wf,e));o&&s.isEmpty(o)?n.parentNode.replaceChild(t,n):(qD(_.fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(t,n):s.insertAfter(t,n))},Bv=(e,t)=>(e.appendChild(t),t),Iv=(e,t)=>{const n=fe(e,(s,o)=>Bv(s,o.cloneNode(!1)),t);return Bv(n,n.ownerDocument.createTextNode(fi))},JI=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=H(es(i.get()),p=>p!==s&&!un(p,"removeformat")),f=GI(e,n,c);if(H(f,p=>!cP(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),b.some(p)}else return b.none()},e$=(e,t,n)=>{let s,o;const r=e.selection,i=r.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=fr(e.getBody(),r.getStart()),s&&(o=Dv(s));const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&d.test(f.charAt(a))&&d.test(f.charAt(a-1))){const p=r.getBookmark();i.collapse(!0);let y=ai(e,i,e.formatter.get(t));y=Ql(y),e.formatter.apply(t,n,y),r.moveToBookmark(p)}else(!s||o.nodeValue!==fi)&&(s=YI(e.getDoc(),Gd(!0).dom),o=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),r.setCursorLocation(o,a)},t$=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i,a,c;const f=[],d=r.getRng(),p=d.startContainer,y=d.startOffset;for(a=p,p.nodeType===3&&(y!==p.nodeValue.length&&(i=!0),a=a.parentNode);a;){if($s(e,a,t,n,s)){c=a;break}a.nextSibling&&(i=!0),f.push(a),a=a.parentNode}if(!!c)if(i){const C=r.getBookmark();d.collapse(!0);let x=ai(e,d,e.formatter.get(t),!0);x=Ql(x),e.formatter.remove(t,n,x,s),r.moveToBookmark(C)}else{const C=fr(e.getBody(),c),x=Gd(!1).dom;ZI(e,x,C!==null?C:c);const v=JI(e,x,c,t,n,s),S=Iv(f.concat(v.toArray()),x);Yd(e,C,!1),r.setCursorLocation(S,1),o.isEmpty(c)&&o.remove(c)}},n$=(e,t)=>{const n=e.selection,s=e.getBody();Xd(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===fi&&Xd(e,fr(s,n.getStart())),(t===37||t===39)&&Xd(e,fr(s,n.getStart()))},s$=e=>{e.on("mouseup keydown",t=>{n$(e,t.keyCode)})},o$=(e,t)=>{const n=Gd(!1),s=Iv(t,n.dom);return Xn(_.fromDom(e),n),At(_.fromDom(e)),L(s,0)},r$=(e,t)=>{const n=e.schema.getTextInlineElements();return Fe(n,yt(t))&&!Bs(t.dom)&&!er(t.dom)},i$=e=>Bs(e.dom)&&Ov(e.dom),lc={},$v=Ur,Lv=Ui,a$=(e,t)=>{lc[e]||(lc[e]=[]),lc[e].push(t)},l$=(e,t)=>{Lv(lc[e],n=>{n(t)})};a$("pre",e=>{const t=e.selection.getRng();let n;const s=i=>r(i.previousSibling)&&xg(n,i.previousSibling)!==-1,o=(i,a)=>{const c=_.fromDom(a),f=Eo(c).dom;At(c),Zo(_.fromDom(i),[_.fromTag("br",f),_.fromTag("br",f),...Yt(c)])},r=Qn(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),Lv($v($v(n,r),s),i=>{o(i.previousSibling,i)}))});const Qd=G.each,Zd=e=>Ee(e)&&!Mn(e)&&!Bs(e)&&!er(e),Fv=(e,t)=>{for(let n=e;n;n=n[t]){if(ne(n)&&Zs(n.data))return e;if(Ee(n)&&!Mn(n))return n}return e},Mv=(e,t,n)=>{const s=zy(e);if(t&&n&&(t=Fv(t,"previousSibling"),n=Fv(n,"nextSibling"),s.compare(t,n))){for(let o=t.nextSibling;o&&o!==n;){const r=o;o=o.nextSibling,t.appendChild(r)}return e.remove(n),G.each(G.grep(n.childNodes),o=>{t.appendChild(o)}),t}return n},Uv=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){const o=Mv(e,LC(s),s);Mv(e,o,LC(o,!0))}},c$=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Qd(e.select(s,n),o=>{Zd(o)&&Qd(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},Jd=(e,t,n)=>{Qd(e.childNodes,s=>{Zd(s)&&(t(s)&&n(s),s.hasChildNodes()&&Jd(s,t,n))})},u$=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},zv=(e,t)=>n=>!!(n&&Vl(e,n,t)),Hv=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),u$(e,s)},ka=Ts.generate([{keep:[]},{rename:["name"]},{removed:[]}]),f$=/^(src|href|style)$/,em=G.each,cc=qf,d$=e=>/^(TR|TH|TD)$/.test(e.nodeName),Vv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Wv=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ee(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return ne(s)&&n&&o>=s.nodeValue.length&&(s=new zt(s,e.getBody()).next()||s),ne(s)&&!n&&o===0&&(s=new zt(s,e.getBody()).prev()||s),s},jv=(e,t)=>{const n=t?"firstChild":"lastChild";if(d$(e)&&e[n]){const s=e[n];return e.nodeName==="TR"&&s[n]||s}return e},tm=(e,t,n,s)=>{const o=e.create(n,s);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},qv=(e,t,n,s,o)=>{const r=_.fromDom(t),i=_.fromDom(e.create(s,o)),a=n?ph(r):mh(r);return Zo(i,a),n?(Xn(r,i),_h(i,r)):(xo(r,i),It(i,r)),i.dom},m$=(e,t)=>t.links&&e.nodeName==="A",p$=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Sn(e);Is(n)&&s===r.getRoot()&&(!n.list_block||!cc(t,n.list_block))&&R(gt(t.childNodes),a=>{ri(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=tm(r,a,i),r.setAttribs(o,lr(e))):o=null}),!(uP(n)&&!cc(n.inline,t))&&r.remove(t,!0)},Kv=(e,t,n,s,o)=>{let r;const i=e.dom;if(!ac(i,s,t)&&!m$(s,t))return ka.keep();const a=s;if(Wt(t)&&t.remove==="all"&&Tt(t.preserve_attributes)){const c=H(i.getAttribs(a),f=>P(t.preserve_attributes,f.name.toLowerCase()));if(i.removeAllAttribs(a),R(c,f=>i.setAttrib(a,f.name,f.value)),c.length>0)return ka.rename("span")}if(t.remove!=="all"){em(t.styles,(f,d)=>{f=Kf(oo(f,n),d+""),yn(d)&&(d=f,o=null),(t.remove_similar||!o||cc(Vl(i,o,d),f))&&i.setStyle(a,d,""),r=!0}),r&&i.getAttrib(a,"style")===""&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),em(t.attributes,(f,d)=>{let p;if(f=oo(f,n),yn(d)&&(d=f,o=null),t.remove_similar||!o||cc(i.getAttrib(o,d),f)){if(d==="class"&&(f=i.getAttrib(a,d),f&&(p="",R(f.split(/\s+/),y=>{/mce\-\w+/.test(y)&&(p+=(p?" ":"")+y)}),p))){i.setAttrib(a,d,p);return}if(f$.test(d)&&a.removeAttribute("data-mce-"+d),d==="style"&&Qn(["li"])(a)&&i.getStyle(a,"list-style-type")==="none"){a.removeAttribute(d),i.setStyle(a,"list-style-type","none");return}d==="class"&&a.removeAttribute("className"),a.removeAttribute(d)}}),em(t.classes,f=>{f=oo(f,n),(!o||i.hasClass(o,f))&&i.removeClass(a,f)});const c=i.getAttribs(a);for(let f=0;f<c.length;f++){const d=c[f].nodeName;if(d.indexOf("_")!==0&&d.indexOf("data-")!==0)return ka.keep()}}return t.remove!=="none"?(p$(e,a,t),ka.removed()):ka.keep()},di=(e,t,n,s,o)=>Kv(e,t,n,s,o).fold(pt,r=>(e.dom.rename(s,r),!0),at),g$=(e,t,n,s,o)=>{let r;return R(Wl(e.dom,t.parentNode).reverse(),i=>{if(!r&&i.id!=="_start"&&i.id!=="_end"){const a=$s(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},h$=(e,t,n,s)=>Kv(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),b$=(e,t,n,s,o,r,i,a)=>{let c,f,d;const p=e.dom;if(n){const y=n.parentNode;for(let C=s.parentNode;C&&C!==y;C=C.parentNode){c=p.clone(C,!1);for(let x=0;x<t.length&&(c=h$(e,t[x],a,c),c!==null);x++);c&&(f&&c.appendChild(f),d||(d=c),f=c)}r&&(!i.mixed||!p.isBlock(n))&&(s=p.split(n,s)),f&&(o.parentNode.insertBefore(f,o),d.appendChild(o),Wt(i)&&Uv(p,i,a,f))}return s},Gv=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0];let a=!0;const c=e.dom,f=e.selection,d=S=>{const w=g$(e,S,t,n,o);return b$(e,r,w,S,S,!0,i,n)},p=S=>Mn(S)&&Ee(S)&&(S.id==="_start"||S.id==="_end"),y=S=>U(r,w=>di(e,w,n,S,S)),C=S=>{let w=!0,A=!1;Ee(S)&&c.getContentEditable(S)&&(w=a,a=c.getContentEditable(S)==="true",A=!0);const M=gt(S.childNodes);if(a&&!A){const te=y(S)||U(r,q=>ac(c,S,q)),W=S.parentNode;!te&&Ne(W)&&Gf(i)&&y(W)}if(i.deep&&M.length){for(let $=0;$<M.length;$++)C(M[$]);A&&(a=w)}R(["underline","line-through","overline"],$=>{Ee(S)&&e.dom.getStyle(S,"text-decoration")===$&&S.parentNode&&FC(c,S.parentNode)===$&&di(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:$}},null,S)})},x=S=>{const w=c.get(S?"_start":"_end");let A=w[S?"firstChild":"lastChild"];return p(A)&&(A=A[S?"firstChild":"lastChild"]),ne(A)&&A.data.length===0&&(A=S?w.previousSibling||w.nextSibling:w.nextSibling||w.previousSibling),c.remove(w,!0),A},v=S=>{let w,A,M=ai(e,S,r,S.collapsed);if(i.split){if(M=Ql(M),w=Wv(e,M,!0),A=Wv(e,M),w!==A){if(w=jv(w,!0),A=jv(A,!1),Vv(c,w,A)){const $=b.from(w.firstChild).getOr(w);d(qv(c,$,!0,"span",{id:"_start","data-mce-type":"bookmark"})),x(!0);return}if(Vv(c,A,w)){const $=b.from(A.lastChild).getOr(A);d(qv(c,$,!1,"span",{id:"_end","data-mce-type":"bookmark"})),x(!1);return}w=tm(c,w,"span",{id:"_start","data-mce-type":"bookmark"}),A=tm(c,A,"span",{id:"_end","data-mce-type":"bookmark"});const B=c.createRng();B.setStartAfter(w),B.setEndBefore(A),ga(c,B,$=>{R($,te=>{!Mn(te)&&!Mn(te.parentNode)&&d(te)})}),d(w),d(A),w=x(!0),A=x()}else w=A=d(w);M.startContainer=w.parentNode?w.parentNode:w,M.startOffset=c.nodeIndex(w),M.endContainer=A.parentNode?A.parentNode:A,M.endOffset=c.nodeIndex(A)+1}ga(c,M,B=>{R(B,C)})};if(s){if(Hl(s)){const S=c.createRng();S.setStartBefore(s),S.setEndAfter(s),v(S)}else v(s);nd(e,t,s,n);return}if(c.getContentEditable(f.getNode())==="false"){s=f.getNode();for(let S=0;S<r.length&&!(r[S].ceFalseOverride&&di(e,r[S],n,s,s));S++);nd(e,t,s,n);return}!f.isCollapsed()||!Wt(i)||li(e).length?(ed(f,!0,()=>{Jf(e,v)}),Wt(i)&&Kd(e,t,n,f.getStart())&&$C(c,f,f.getRng()),e.nodeChanged()):t$(e,t,n,o),nd(e,t,s,n)},Yv=G.each,C$=(e,t,n,s)=>{const o=r=>{if(r.nodeType===1&&r.parentNode&&r.parentNode.nodeType===1){const i=FC(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(G.walk(s,o,"childNodes"),o(s))},y$=(e,t,n,s)=>{t.styles&&t.styles.backgroundColor&&Jd(s,zv(e,"fontSize"),Hv(e,"backgroundColor",oo(t.styles.backgroundColor,n)))},v$=(e,t,n,s)=>{Wt(t)&&(t.inline==="sub"||t.inline==="sup")&&(Jd(s,zv(e,"fontSize"),Hv(e,"fontSize","")),e.remove(e.select(t.inline==="sup"?"sub":"sup",s),!0))},E$=(e,t,n,s)=>{Yv(t,o=>{Wt(o)&&Yv(e.dom.select(o.inline,s),r=>{!Zd(r)||di(e,o,n,r,o.exact?r:null)}),c$(e.dom,o,s)})},x$=(e,t,n,s,o)=>{$s(e,o.parentNode,n,s)&&di(e,t,s,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,r=>{if($s(e,r,n,s))return di(e,t,s,o),!0})},uc=G.each,S$=e=>Ee(e)&&!Mn(e)&&!Bs(e)&&!er(e),w$=(e,t,n,s)=>{if(D1(e)&&Wt(t)){const o=sb(e.schema),r=VI(_.fromDom(n),i=>Bs(i.dom));return Mr(o,s)&&Ht(_.fromDom(n.parentNode),!1)&&!r}else return!1},Xv=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(C,x=r)=>{if(Ye(x.onformat)&&x.onformat(C,x,n,s),uc(x.styles,(v,S)=>{a.setStyle(C,S,oo(v,n))}),x.styles){const v=a.getAttrib(C,"style");v&&a.setAttrib(C,"data-mce-style",v)}uc(x.attributes,(v,S)=>{a.setAttrib(C,S,oo(v,n))}),uc(x.classes,v=>{v=oo(v,n),a.hasClass(C,v)||a.addClass(C,v)})},d=(C,x)=>{let v=!1;return uc(C,S=>{if(!Rn(S))return!1;if(!(Ne(S.collapsed)&&S.collapsed!==i)&&a.is(x,S.selector)&&!Bs(x))return f(x,S),v=!0,!1}),v},p=C=>{if(he(C)){const x=a.create(C);return f(x),x}else return null},y=(C,x,v)=>{const S=[];let w=!0;const A=r.inline||r.block,M=p(A);ga(C,x,B=>{let $;const te=W=>{let q=!1,Z=w;const ee=W.nodeName.toLowerCase(),xe=W.parentNode,ae=xe.nodeName.toLowerCase();if(Ee(W)&&C.getContentEditable(W)&&(Z=w,w=C.getContentEditable(W)==="true",q=!0),Dt(W)&&!w$(e,r,W,ae)){$=null,Is(r)&&C.remove(W);return}if(Is(r)&&r.wrapper&&$s(e,W,t,n)){$=null;return}if(w&&!q&&Is(r)&&!r.wrapper&&Wf(e,ee)&&ri(e,ae,A)){const se=C.rename(W,A);f(se),S.push(se),$=null;return}if(Rn(r)){let se=d(o,W);if(!se&&Ne(xe)&&Gf(r)&&(se=d(o,xe)),!Wt(r)||se){$=null;return}}w&&!q&&ri(e,A,ee)&&ri(e,ae,A)&&!(!v&&ne(W)&&yl(W.data))&&!Bs(W)&&(!Wt(r)||!C.isBlock(W))?($||($=C.clone(M,!1),W.parentNode.insertBefore($,W),S.push($)),$.appendChild(W)):($=null,R(gt(W.childNodes),te),q&&(w=Z),$=null)};R(B,te)}),r.links===!0&&R(S,B=>{const $=te=>{te.nodeName==="A"&&f(te,r),R(gt(te.childNodes),$)};$(B)}),R(S,B=>{const $=q=>{let Z=0;return R(q.childNodes,ee=>{!aP(ee)&&!Mn(ee)&&Z++}),Z},te=q=>de(q.childNodes,S$).filter(ee=>ac(C,ee,r)).map(ee=>{const xe=C.clone(ee,!1);return f(xe),C.replace(xe,q,!0),C.remove(ee,!0),xe}).getOr(q),W=$(B);if((S.length>1||!C.isBlock(B))&&W===0){C.remove(B,!0);return}(Wt(r)||Is(r)&&r.wrapper)&&(!r.exact&&W===1&&(B=te(B)),E$(e,o,n,B),x$(e,r,t,n,B),y$(C,r,n,B),C$(C,r,n,B),v$(C,r,n,B),Uv(C,r,n,B))})};if(a.getContentEditable(c.getNode())==="false"){s=c.getNode();for(let C=0,x=o.length;C<x;C++){const v=o[C];if(v.ceFalseOverride&&Rn(v)&&a.is(s,v.selector)){f(s,v);break}}ny(e,t,s,n);return}if(r){if(s)if(Hl(s)){if(!d(o,s)){const C=a.createRng();C.setStartBefore(s),C.setEndAfter(s),y(a,ai(e,C,o),!0)}}else y(a,s,!0);else!i||!Wt(r)||li(e).length?(c.setRng(Ud(c.getRng())),ed(c,!0,()=>{Jf(e,(C,x)=>{const v=x?C:ai(e,C,o);y(a,v,!1)})}),$C(a,c,c.getRng()),e.nodeChanged()):e$(e,t,n);l$(t,e)}ny(e,t,s,n)},Qv=e=>Fe(e,"vars"),_$=(e,t)=>{e.set({}),t.on("NodeChange",n=>{tE(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>Hl(o)?o:o.startContainer).bind(o=>Ee(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>Zv(t));tE(t,s,e.get())})},Zv=e=>e.selection.getStart(),Jv=(e,t,n,s,o)=>Re(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!Pt(c)},a=>Av(e,a,n)?!0:s?!1:Ne(e.formatter.matchNode(a,n,o,!0))),eE=(e,t)=>{const n=t!=null?t:Zv(e);return H(Wl(e.dom,n),s=>Ee(s)&&!er(s))},tE=(e,t,n)=>{const s=eE(e,t);Ct(n,(o,r)=>{const i=a=>{const c=Jv(e,s,r,a.similar,Qv(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const d=c.getOr(t);Qv(a)?a.callback(f,{node:d,format:r,parents:s}):R(a.callbacks,p=>p(f,{node:d,format:r,parents:s}))}};R([o.withSimilar,o.withoutSimilar],i),R(o.withVars,i)})},k$=(e,t,n,s,o,r)=>{const i=t.get();R(n.split(","),a=>{const c=lt(i,a).getOrThunk(()=>{const d={withSimilar:{state:$t(!1),similar:!0,callbacks:[]},withoutSimilar:{state:$t(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),f=()=>{const d=eE(e);return Jv(e,d,a,o,r).isSome()};if(Pt(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(f())}else c.withVars.push({state:$t(f()),similar:o,vars:r,callback:s})}),t.set(i)},N$=(e,t,n)=>{const s=e.get();R(t.split(","),o=>lt(s,o).each(r=>{s[o]={withSimilar:ft(_e({},r.withSimilar),{callbacks:H(r.withSimilar.callbacks,i=>i!==n)}),withoutSimilar:ft(_e({},r.withoutSimilar),{callbacks:H(r.withoutSimilar.callbacks,i=>i!==n)}),withVars:H(r.withVars,i=>i.callback!==n)}})),e.set(s)},T$=(e,t,n,s,o,r)=>(t.get()===null&&_$(t,e),k$(e,t,n,s,o,r),{unbind:()=>N$(t,n,s)}),A$=(e,t,n,s)=>{const o=e.formatter.get(t);Kd(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?Gv(e,t,n,s):Xv(e,t,n,s)};function R$(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var P$=Object.hasOwnProperty,nE=Object.setPrototypeOf,O$=Object.isFrozen,D$=Object.getPrototypeOf,B$=Object.getOwnPropertyDescriptor,wn=Object.freeze,Ls=Object.seal,I$=Object.create,sE=typeof Reflect!="undefined"&&Reflect,fc=sE.apply,nm=sE.construct;fc||(fc=function(t,n,s){return t.apply(n,s)}),wn||(wn=function(t){return t}),Ls||(Ls=function(t){return t}),nm||(nm=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(R$(n))))});var $$=rs(Array.prototype.forEach),L$=rs(Array.prototype.pop),Na=rs(Array.prototype.push),dc=rs(String.prototype.toLowerCase),F$=rs(String.prototype.match),Io=rs(String.prototype.replace),M$=rs(String.prototype.indexOf),U$=rs(String.prototype.trim),_n=rs(RegExp.prototype.test),sm=z$(TypeError);function rs(e){return function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return fc(e,t,s)}}function z$(e){return function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];return nm(e,n)}}function Ze(e,t){nE&&nE(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=dc(s);o!==s&&(O$(t)||(t[n]=o),s=o)}e[s]=!0}return e}function br(e){var t=I$(null),n=void 0;for(n in e)fc(P$,e,[n])&&(t[n]=e[n]);return t}function mc(e,t){for(;e!==null;){var n=B$(e,t);if(n){if(n.get)return rs(n.get);if(typeof n.value=="function")return rs(n.value)}e=D$(e)}function s(o){return console.warn("fallback value for",o),null}return s}var oE=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),om=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rm=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),H$=wn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),im=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),V$=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rE=wn(["#text"]),iE=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),am=wn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aE=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pc=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W$=Ls(/\{\{[\s\S]*|[\s\S]*\}\}/gm),j$=Ls(/<%[\s\S]*|[\s\S]*%>/gm),q$=Ls(/^data-[\-\w.\u00B7-\uFFFF]/),K$=Ls(/^aria-[\-\w]+$/),G$=Ls(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y$=Ls(/^(?:\w+script|data):/i),X$=Ls(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q$=Ls(/^html$/i),Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Fs(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var Z$=function(){return typeof window=="undefined"?null:window},J$=function(t,n){if((typeof t=="undefined"?"undefined":Ta(t))!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function lE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z$(),t=function(I){return lE(I)};if(t.version="2.3.6",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,f=e.NamedNodeMap,d=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,p=e.HTMLFormElement,y=e.DOMParser,C=e.trustedTypes,x=a.prototype,v=mc(x,"cloneNode"),S=mc(x,"nextSibling"),w=mc(x,"childNodes"),A=mc(x,"parentNode");if(typeof r=="function"){var M=s.createElement("template");M.content&&M.content.ownerDocument&&(s=M.content.ownerDocument)}var B=J$(C,n),$=B?B.createHTML(""):"",te=s,W=te.implementation,q=te.createNodeIterator,Z=te.createDocumentFragment,ee=te.getElementsByTagName,xe=n.importNode,ae={};try{ae=br(s).documentMode?s.documentMode:{}}catch{}var se={};t.isSupported=typeof A=="function"&&W&&typeof W.createHTMLDocument!="undefined"&&ae!==9;var Ge=W$,je=j$,ct=q$,qt=K$,J=Y$,ge=X$,Me=G$,De=null,me=Ze({},[].concat(Fs(oE),Fs(om),Fs(rm),Fs(im),Fs(rE))),le=null,Se=Ze({},[].concat(Fs(iE),Fs(am),Fs(aE),Fs(pc))),Be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,Lt=null,_r=!0,Y=!0,pe=!1,Ae=!1,Pe=!1,qe=!1,ze=!1,Le=!1,Et=!1,Zt=!1,Jt=!0,Bt=!0,Ft=!1,en={},Rt=null,hn=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Mo=null,zs=Ze({},["audio","video","img","source","image","track"]),Hs=null,us=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kr="http://www.w3.org/1998/Math/MathML",Uo="http://www.w3.org/2000/svg",Hn="http://www.w3.org/1999/xhtml",fs=Hn,Nr=!1,ds=void 0,ru=["application/xhtml+xml","text/html"],Ap="text/html",co=void 0,uo=null,Bw=s.createElement("form"),Rp=function(I){return I instanceof RegExp||I instanceof Function},iu=function(I){uo&&uo===I||((!I||(typeof I=="undefined"?"undefined":Ta(I))!=="object")&&(I={}),I=br(I),De="ALLOWED_TAGS"in I?Ze({},I.ALLOWED_TAGS):me,le="ALLOWED_ATTR"in I?Ze({},I.ALLOWED_ATTR):Se,Hs="ADD_URI_SAFE_ATTR"in I?Ze(br(us),I.ADD_URI_SAFE_ATTR):us,Mo="ADD_DATA_URI_TAGS"in I?Ze(br(zs),I.ADD_DATA_URI_TAGS):zs,Rt="FORBID_CONTENTS"in I?Ze({},I.FORBID_CONTENTS):hn,vt="FORBID_TAGS"in I?Ze({},I.FORBID_TAGS):{},Lt="FORBID_ATTR"in I?Ze({},I.FORBID_ATTR):{},en="USE_PROFILES"in I?I.USE_PROFILES:!1,_r=I.ALLOW_ARIA_ATTR!==!1,Y=I.ALLOW_DATA_ATTR!==!1,pe=I.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=I.SAFE_FOR_TEMPLATES||!1,Pe=I.WHOLE_DOCUMENT||!1,Le=I.RETURN_DOM||!1,Et=I.RETURN_DOM_FRAGMENT||!1,Zt=I.RETURN_TRUSTED_TYPE||!1,ze=I.FORCE_BODY||!1,Jt=I.SANITIZE_DOM!==!1,Bt=I.KEEP_CONTENT!==!1,Ft=I.IN_PLACE||!1,Me=I.ALLOWED_URI_REGEXP||Me,fs=I.NAMESPACE||Hn,I.CUSTOM_ELEMENT_HANDLING&&Rp(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&Rp(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ds=ru.indexOf(I.PARSER_MEDIA_TYPE)===-1?ds=Ap:ds=I.PARSER_MEDIA_TYPE,co=ds==="application/xhtml+xml"?function(ie){return ie}:dc,Ae&&(Y=!1),Et&&(Le=!0),en&&(De=Ze({},[].concat(Fs(rE))),le=[],en.html===!0&&(Ze(De,oE),Ze(le,iE)),en.svg===!0&&(Ze(De,om),Ze(le,am),Ze(le,pc)),en.svgFilters===!0&&(Ze(De,rm),Ze(le,am),Ze(le,pc)),en.mathMl===!0&&(Ze(De,im),Ze(le,aE),Ze(le,pc))),I.ADD_TAGS&&(De===me&&(De=br(De)),Ze(De,I.ADD_TAGS)),I.ADD_ATTR&&(le===Se&&(le=br(le)),Ze(le,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Ze(Hs,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(Rt===hn&&(Rt=br(Rt)),Ze(Rt,I.FORBID_CONTENTS)),Bt&&(De["#text"]=!0),Pe&&Ze(De,["html","head","body"]),De.table&&(Ze(De,["tbody"]),delete vt.tbody),wn&&wn(I),uo=I)},Pp=Ze({},["mi","mo","mn","ms","mtext"]),fo=Ze({},["foreignobject","desc","title","annotation-xml"]),au=Ze({},["title","style","font","a","script"]),N=Ze({},om);Ze(N,rm),Ze(N,H$);var D=Ze({},im);Ze(D,V$);var j=function(I){var ie=A(I);(!ie||!ie.tagName)&&(ie={namespaceURI:Hn,tagName:"template"});var we=dc(I.tagName),xt=dc(ie.tagName);return I.namespaceURI===Uo?ie.namespaceURI===Hn?we==="svg":ie.namespaceURI===kr?we==="svg"&&(xt==="annotation-xml"||Pp[xt]):Boolean(N[we]):I.namespaceURI===kr?ie.namespaceURI===Hn?we==="math":ie.namespaceURI===Uo?we==="math"&&fo[xt]:Boolean(D[we]):I.namespaceURI===Hn?ie.namespaceURI===Uo&&!fo[xt]||ie.namespaceURI===kr&&!Pp[xt]?!1:!D[we]&&(au[we]||!N[we]):!1},V=function(I){Na(t.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=$}catch{I.remove()}}},ye=function(I,ie){try{Na(t.removed,{attribute:ie.getAttributeNode(I),from:ie})}catch{Na(t.removed,{attribute:null,from:ie})}if(ie.removeAttribute(I),I==="is"&&!le[I])if(Le||Et)try{V(ie)}catch{}else try{ie.setAttribute(I,"")}catch{}},We=function(I){var ie=void 0,we=void 0;if(ze)I="<remove></remove>"+I;else{var xt=F$(I,/^[\r\n\t ]+/);we=xt&&xt[0]}ds==="application/xhtml+xml"&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var On=B?B.createHTML(I):I;if(fs===Hn)try{ie=new y().parseFromString(On,ds)}catch{}if(!ie||!ie.documentElement){ie=W.createDocument(fs,"template",null);try{ie.documentElement.innerHTML=Nr?"":On}catch{}}var bn=ie.body||ie.documentElement;return I&&we&&bn.insertBefore(s.createTextNode(we),bn.childNodes[0]||null),fs===Hn?ee.call(ie,Pe?"html":"body")[0]:Pe?ie.documentElement:bn},He=function(I){return q.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Nn=function(I){return I instanceof p&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof d)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function")},ms=function(I){return(typeof i=="undefined"?"undefined":Ta(i))==="object"?I instanceof i:I&&(typeof I=="undefined"?"undefined":Ta(I))==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},mo=function(I,ie,we){!se[I]||$$(se[I],function(xt){xt.call(t,ie,we,uo)})},Iw=function(I){var ie=void 0;if(mo("beforeSanitizeElements",I,null),Nn(I)||_n(/[\u0080-\uFFFF]/,I.nodeName))return V(I),!0;var we=co(I.nodeName);if(mo("uponSanitizeElement",I,{tagName:we,allowedTags:De}),I.hasChildNodes()&&!ms(I.firstElementChild)&&(!ms(I.content)||!ms(I.content.firstElementChild))&&_n(/<[/\w]/g,I.innerHTML)&&_n(/<[/\w]/g,I.textContent)||we==="select"&&_n(/<template/i,I.innerHTML))return V(I),!0;if(!De[we]||vt[we]){if(!vt[we]&&Lw(we)&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,we)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(we)))return!1;if(Bt&&!Rt[we]){var xt=A(I)||I.parentNode,On=w(I)||I.childNodes;if(On&&xt)for(var bn=On.length,on=bn-1;on>=0;--on)xt.insertBefore(v(On[on],!0),S(I))}return V(I),!0}return I instanceof a&&!j(I)||(we==="noscript"||we==="noembed")&&_n(/<\/no(script|embed)/i,I.innerHTML)?(V(I),!0):(Ae&&I.nodeType===3&&(ie=I.textContent,ie=Io(ie,Ge," "),ie=Io(ie,je," "),I.textContent!==ie&&(Na(t.removed,{element:I.cloneNode()}),I.textContent=ie)),mo("afterSanitizeElements",I,null),!1)},$w=function(I,ie,we){if(Jt&&(ie==="id"||ie==="name")&&(we in s||we in Bw))return!1;if(!(Y&&!Lt[ie]&&_n(ct,ie))){if(!(_r&&_n(qt,ie))){if(!le[ie]||Lt[ie]){if(!(Lw(I)&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,I)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(I))&&(Be.attributeNameCheck instanceof RegExp&&_n(Be.attributeNameCheck,ie)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(ie))||ie==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,we)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(we))))return!1}else if(!Hs[ie]){if(!_n(Me,Io(we,ge,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&I!=="script"&&M$(we,"data:")===0&&Mo[I])){if(!(pe&&!_n(J,Io(we,ge,"")))){if(we)return!1}}}}}}return!0},Lw=function(I){return I.indexOf("-")>0},Fw=function(I){var ie=void 0,we=void 0,xt=void 0,On=void 0;mo("beforeSanitizeAttributes",I,null);var bn=I.attributes;if(!!bn){var on={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for(On=bn.length;On--;){ie=bn[On];var lu=ie,Cn=lu.name,Mw=lu.namespaceURI;we=U$(ie.value),xt=co(Cn);var Gj=we;if(on.attrName=xt,on.attrValue=we,on.keepAttr=!0,on.forceKeepAttr=void 0,mo("uponSanitizeAttribute",I,on),we=on.attrValue,!on.forceKeepAttr){if(!on.keepAttr){ye(Cn,I);continue}if(_n(/\/>/i,we)){ye(Cn,I);continue}Ae&&(we=Io(we,Ge," "),we=Io(we,je," "));var Yj=co(I.nodeName);if(!$w(Yj,xt,we)){ye(Cn,I);continue}if(we!==Gj)try{Mw?I.setAttributeNS(Mw,Cn,we):I.setAttribute(Cn,we)}catch{ye(Cn,I)}}}mo("afterSanitizeAttributes",I,null)}},Kj=function Oe(I){var ie=void 0,we=He(I);for(mo("beforeSanitizeShadowDOM",I,null);ie=we.nextNode();)mo("uponSanitizeShadowNode",ie,null),!Iw(ie)&&(ie.content instanceof o&&Oe(ie.content),Fw(ie));mo("afterSanitizeShadowDOM",I,null)};return t.sanitize=function(Oe,I){var ie=void 0,we=void 0,xt=void 0,On=void 0,bn=void 0;if(Nr=!Oe,Nr&&(Oe="<!-->"),typeof Oe!="string"&&!ms(Oe)){if(typeof Oe.toString!="function")throw sm("toString is not a function");if(Oe=Oe.toString(),typeof Oe!="string")throw sm("dirty is not a string, aborting")}if(!t.isSupported){if(Ta(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Oe=="string")return e.toStaticHTML(Oe);if(ms(Oe))return e.toStaticHTML(Oe.outerHTML)}return Oe}if(qe||iu(I),t.removed=[],typeof Oe=="string"&&(Ft=!1),Ft){if(Oe.nodeName){var on=co(Oe.nodeName);if(!De[on]||vt[on])throw sm("root node is forbidden and cannot be sanitized in-place")}}else if(Oe instanceof i)ie=We("<!---->"),we=ie.ownerDocument.importNode(Oe,!0),we.nodeType===1&&we.nodeName==="BODY"||we.nodeName==="HTML"?ie=we:ie.appendChild(we);else{if(!Le&&!Ae&&!Pe&&Oe.indexOf("<")===-1)return B&&Zt?B.createHTML(Oe):Oe;if(ie=We(Oe),!ie)return Le?null:Zt?$:""}ie&&ze&&V(ie.firstChild);for(var lu=He(Ft?Oe:ie);xt=lu.nextNode();)xt.nodeType===3&&xt===On||Iw(xt)||(xt.content instanceof o&&Kj(xt.content),Fw(xt),On=xt);if(On=null,Ft)return Oe;if(Le){if(Et)for(bn=Z.call(ie.ownerDocument);ie.firstChild;)bn.appendChild(ie.firstChild);else bn=ie;return le.shadowroot&&(bn=xe.call(n,bn,!0)),bn}var Cn=Pe?ie.outerHTML:ie.innerHTML;return Pe&&De["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&_n(Q$,ie.ownerDocument.doctype.name)&&(Cn="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+Cn),Ae&&(Cn=Io(Cn,Ge," "),Cn=Io(Cn,je," ")),B&&Zt?B.createHTML(Cn):Cn},t.setConfig=function(Oe){iu(Oe),qe=!0},t.clearConfig=function(){uo=null,qe=!1},t.isValidAttribute=function(Oe,I,ie){uo||iu({});var we=co(Oe),xt=co(I);return $w(we,xt,ie)},t.addHook=function(Oe,I){typeof I=="function"&&(se[Oe]=se[Oe]||[],Na(se[Oe],I))},t.removeHook=function(Oe){se[Oe]&&L$(se[Oe])},t.removeHooks=function(Oe){se[Oe]&&(se[Oe]=[])},t.removeAllHooks=function(){se={}},t}var eL=lE();const tL=(e,t)=>{R(t,n=>{e.attr(n,null)})},nL=(e,t,n)=>{e.addNodeFilter("font",s=>{R(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&(r["font-size"]=n[parseInt(o.attr("size"),10)-1]),o.name="span",o.attr("style",t.serialize(r)),tL(o,["color","face","size"])})})},sL=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";R(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},oL=(e,t,n)=>{const s=pf();t.convert_fonts_to_spans&&nL(e,s,G.explode(t.font_size_legacy_values)),sL(e,n,s)},rL=(e,t,n)=>{t.inline_styles&&oL(e,t,n)},iL=e=>new Promise((t,n)=>{const s=()=>{n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=()=>{o.status===200?t(o.response):s()},o.onerror=s,o.send()}catch{s()}}),gc=e=>{let t;const n=decodeURIComponent(e).split(","),s=/data:([^;]+)/.exec(n[0]);return s&&(t=s[1]),{type:t,data:n[1]}},cE=(e,t)=>{let n;try{n=atob(t)}catch{return b.none()}const s=new Uint8Array(n.length);for(let o=0;o<s.length;o++)s[o]=n.charCodeAt(o);return b.some(new Blob([s],{type:e}))},aL=e=>new Promise(t=>{const{type:n,data:s}=gc(e);cE(n,s).fold(()=>t(new Blob([])),t)}),uE=e=>e.indexOf("blob:")===0?iL(e):e.indexOf("data:")===0?aL(e):null,fE=e=>new Promise(t=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(e)});let lL=0;const lm=e=>(e||"blobid")+lL++,cL=(e,t,n,s)=>{let o,r;if(t.src.indexOf("blob:")===0){r=e.getByUri(t.src),r?n({image:t,blobInfo:r}):uE(t.src).then(c=>{fE(c).then(f=>{o=gc(f).data,r=e.create(lm(),c,o),e.add(r),n({image:t,blobInfo:r})})},c=>{s(c)});return}const{data:i,type:a}=gc(t.src);o=i,r=e.getByData(o,a),r?n({image:t,blobInfo:r}):uE(t.src).then(c=>{r=e.create(lm(),c,o),e.add(r),n({image:t,blobInfo:r})},c=>{s(c)})},uL=e=>e?gt(e.getElementsByTagName("img")):[],fL=(e,t)=>{const n={};return{findAll:(o,r)=>{r||(r=at);const i=H(uL(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===tt.transparentSrc?!1:f.indexOf("blob:")===0?!e.isUploaded(f)&&r(c):f.indexOf("data:")===0?r(c):!1}),a=z(i,c=>{if(n[c.src]!==void 0)return new Promise(d=>{n[c.src].then(p=>{if(typeof p=="string")return p;d({image:c,blobInfo:p.blobInfo})})});const f=new Promise((d,p)=>{cL(t,c,d,p)}).then(d=>(delete n[d.image.src],d)).catch(d=>(delete n[c.src],d));return n[c.src]=f,f});return Promise.all(a)}}},dL=e=>{const t=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return t?b.some({type:t[1],data:decodeURIComponent(t[2])}):b.none()},mL=e=>Ne(e.attr("data-mce-bogus")),pL=e=>e.attr("src")===tt.transparentSrc||Ne(e.attr("data-mce-placeholder")),gL=(e,t)=>{const{blob_cache:n}=t,s=o=>{const r=o.attr("src");pL(o)||mL(o)||dL(r).bind(({type:i,data:a})=>b.from(n.getByData(a,i)).orThunk(()=>cE(i,a).map(c=>{const f=n.create(lm(),c,a);return n.add(f),f}))).each(i=>{o.attr("src",i.blobUri())})};n&&e.addAttributeFilter("src",o=>R(o,s))},hL=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(s,o,r)=>{const i=G.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;for(let f=0,d=s.length;f<d;f++){let p=s[f],y=p.parent;if(i[p.parent.name]&&p===y.lastChild){let C=p.prev;for(;C;){const x=C.name;if(x!=="span"||C.attr("data-mce-type")!=="bookmark"){x==="br"&&(p=null);break}C=C.prev}if(p&&(p.remove(),_a(n,a,c,y))){const x=n.getElementRule(y.name);x&&(x.removeEmpty?y.remove():x.paddEmpty&&Ld(t,r,i,y))}}else{let C=p;for(;y&&y.firstChild===C&&y.lastChild===C&&(C=y,!i[y.name]);)y=y.parent;if(C===y){const x=new pn("#text",3);x.value=Xt,p.replace(x)}}}}),e.addAttributeFilter("href",s=>{let o=s.length;const r=a=>a.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=a=>{const c=a?G.trim(a):"";return/\b(noopener)\b/g.test(c)?c:r(c)};if(!t.allow_unsafe_link_target)for(;o--;){const a=s[o];a.name==="a"&&a.attr("target")==="_blank"&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let o=s.length,r,i,a,c;for(;o--;)if(c=s[o],c.name==="a"&&c.firstChild&&!c.attr("href")){a=c.parent,r=c.lastChild;do i=r.prev,a.insert(r,c),r=i;while(r)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let o=s.length,r,i;for(;o--;)if(r=s[o],i=r.parent,i.name==="ul"||i.name==="ol")if(r.prev&&r.prev.name==="li")r.prev.append(r);else{const a=new pn("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",s=>{const o=n.getValidClasses();let r=s.length;for(;r--;){const i=s[r],a=i.attr("class").split(" ");let c="";for(let f=0;f<a.length;f++){const d=a[f];let p=!1,y=o["*"];y&&y[d]&&(p=!0),y=o[i.name],!p&&y&&y[d]&&(p=!0),p&&(c&&(c+=" "),c+=d)}c.length||(c=null),i.attr("class",c)}}),gL(e,t)},dE=G.each,bL=G.trim,CL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),yL={ftp:21,http:80,https:443,mailto:25},vL=["img","video"],EL=(e,t)=>Ne(e)?!e:Ne(t)?!P(vL,t):!0,xL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},mE=(e,t,n)=>{const s=xL(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?EL(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class is{constructor(t,n){t=bL(t),this.settings=n||{};const s=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=this.settings.base_uri?this.settings.base_uri.path:new is(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2]}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);dE(CL,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=ko.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!mE(s,o,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href:n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(t){let n;if(t==="./")return t;const s=new is(t,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const o=this.getURI(),r=s.getURI();return o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r?o:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(t,n){const s=new is(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=yL[this.protocol];if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s,o=0,r=[],i;const a=/\/$/.test(n)?"/":"";let c=t.split("/");const f=n.split("/");for(dE(c,d=>{d&&r.push(d)}),c=r,s=f.length-1,r=[];s>=0;s--)if(!(f[s].length===0||f[s]===".")){if(f[s]===".."){o++;continue}if(o>0){o--;continue}r.push(f[s])}return s=c.length-o,s<=0?i=ot(r).join("/"):i=c.slice(0,s).join("/")+"/"+ot(r).join("/"),i.indexOf("/")!==0&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const pE=G.makeMap,gE=G.each,hE=G.explode,bE=G.extend,SL={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},wL=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),cm="data-mce-type",_L=(e,t)=>{const n=_e({},SL);return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},kL=(e,t)=>{const n=eL(),s=e.validate;let o=0;return n.addHook("uponSanitizeElement",(r,i)=>{var a,c;r.nodeType===Qg&&!e.allow_conditional_comments&&/^\[if/i.test(r.nodeValue)&&(r.nodeValue=" "+r.nodeValue);const f=i.tagName;if(r.nodeType!==Hi||f==="body")return;const d=_.fromDom(r),p=ll(d,cm),y=$n(d,"data-mce-bogus");if(!p&&he(y)){y==="all"?At(d):So(d);return}const C=t.getElementRule(f.toLowerCase());if(s&&!C){So(d);return}else i.allowedTags[f]=!0;if(s&&!p){if(R((a=C.attributesForced)!==null&&a!==void 0?a:[],x=>{fn(d,x.name,x.value==="{$uid}"?`mce_${o++}`:x.value)}),R((c=C.attributesDefault)!==null&&c!==void 0?c:[],x=>{ll(d,x.name)||fn(d,x.name,x.value==="{$uid}"?`mce_${o++}`:x.value)}),C.attributesRequired&&!U(C.attributesRequired,x=>ll(d,x))){So(d);return}if(C.removeEmptyAttrs&&sN(d)){So(d);return}C.outputName&&C.outputName!==f.toLowerCase()&&bA(d,C.outputName)}}),n.addHook("uponSanitizeAttribute",(r,i)=>{const a=r.tagName.toLowerCase(),{attrName:c,attrValue:f}=i;i.keepAttr=!s||t.isValid(a,c)||qn(c,"data-")||qn(c,"aria-"),c in wL&&mE(e,f,a)&&(i.keepAttr=!1),i.keepAttr?(i.allowedAttributes[c]=!0,c in t.getBoolAttrs()&&(i.attrValue=c),e.allow_svg_data_urls&&qn(f,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):r.hasAttribute(cm)&&(c==="id"||c==="class"||c==="style")&&(i.forceKeepAttr=!0)}),n},CE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],f=new pn(c.nodeName.toLowerCase(),c.nodeType);if(Ee(c)){const d=c.attributes;for(let p=0,y=d.length;p<y;p++){const C=d[p];f.attr(C.name,C.value)}}else ne(c)?(f.value=c.data,o&&(f.raw=!0)):(Bh(c)||UN(c)||zN(c))&&(f.value=c.data);CE(f,c,n),e.append(f)}},NL=(e,t,n)=>{const s=[];for(let o=e,r=o;Ne(o);r=o,o=o.walk())R(t,i=>i(o)),Mt(o.parent)&&o!==e?o=r:s.push(o);for(let o=s.length-1;o>=0;o--){const r=s[o];R(n,i=>i(r))}},TL=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=bE(pE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=sb(t),f=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,y=w=>{for(w=w.parent;Ne(w);){if(w.name in i)return!0;w=w.parent}return!1},C=w=>{let A=w;for(;Ne(A);){if(A.name in c)return _a(t,r,i,A);A=A.parent}return!1},x=(w,A)=>{const M=A?w.prev:w.next;return Ne(M)?!1:w.parent.name in a&&(w.parent!==e||s.isRootContent)};return[w=>{if(w.type===3&&!y(w)){let A=w.value;A=A.replace(f," "),(iI(w.prev,a)||x(w,!0))&&(A=A.replace(d,"")),A.length===0?w.remove():w.value=A}},w=>{var A;if(w.type===1){const M=t.getElementRule(w.name);if(o&&M){const B=_a(t,r,i,w);M.paddInEmptyBlock&&B&&C(w)?Ld(n,s,a,w):M.removeEmpty&&B?a[w.name]?w.remove():w.unwrap():M.paddEmpty&&(B||oI(w))&&Ld(n,s,a,w)}}else if(w.type===3&&!y(w)){let M=w.value;(a[(A=w.next)===null||A===void 0?void 0:A.name]||x(w,!1))&&(M=M.replace(p,"")),M.length===0?w.remove():w.value=M}}]},AL=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},mi=(e={},t=To())=>{const n={},s=[],o=_e({validate:!0,root_name:"body"},e),r=new DOMParser,i=kL(o,t),a=(S,w,A="html")=>{const M=A==="xhtml"?"application/xhtml+xml":"text/html",B=Fe(t.getSpecialElements(),w.toLowerCase()),$=B?`<${w}>${S}</${w}>`:S,te=A==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${$}</body></html>`:`<body>${$}</body>`,W=r.parseFromString(te,M).body;return i.sanitize(W,_L(o,M)),i.removed=[],B?W.firstChild:W},c=(S,w)=>{gE(hE(S),A=>{let M=n[A];M||(n[A]=M=[]),M.push(w)})},f=()=>{const S=[];for(const w in n)Fe(n,w)&&S.push({name:w,callbacks:n[w]});return S},d=(S,w)=>{gE(hE(S),A=>{let M;for(M=0;M<s.length;M++)if(s[M].name===A){s[M].callbacks.push(w);return}s.push({name:A,callbacks:[w]})})},p=()=>[].concat(s),y=(S,w)=>{const A=S.parent;A&&t.children[S.name]&&!t.isValidChild(A.name,S.name)&&w.push(S)},C=(S,w)=>{const A=bE(pE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),M=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/;let $=S.firstChild,te=null;const W=q=>{q&&($=q.firstChild,$&&$.type===3&&($.value=$.value.replace(M,"")),$=q.lastChild,$&&$.type===3&&($.value=$.value.replace(B,"")))};if(!!t.isValidChild(S.name,w.toLowerCase())){for(;$;){const q=$.next;$.type===3||$.type===1&&$.name!=="p"&&!A[$.name]&&!$.attr(cm)?(te||(te=new pn(w,1),te.attr(o.forced_root_block_attrs),S.insert(te,$)),te.append($)):(W(te),te=null),$=q}W(te)}},v={schema:t,addAttributeFilter:d,getAttributeFilters:p,addNodeFilter:c,getNodeFilters:f,parse:(S,w={})=>{var A;const M=o.validate,B=(A=w.context)!==null&&A!==void 0?A:o.root_name,$=a(S,B,w.format),te=new pn(B,11);CE(te,$,t.getSpecialElements());const[W,q]=TL(te,t,o,w),Z=[],ee=M?je=>y(je,Z):Ie,xe=f(),ae={nodes:{},attributes:{}},se=je=>Sv(xe,s,je,ae);if(NL(te,[W,se],[q,ee]),Z.reverse(),M&&Z.length>0)if(w.context){const{pass:je,fail:ct}=Ce(Z,qt=>qt.parent===te);Md(ct,t,se),w.invalid=je.length>0}else Md(Z,t,se);const Ge=AL(o,w);return Ge&&(te.name==="body"||w.isRootContent)&&C(te,Ge),w.invalid||wv(ae,w),te}};return hL(v,o),rL(v,o,t),v},RL=e=>ic(e)?Do({validate:!1}).serialize(e):e,yE=(e,t)=>{const n=RL(e),s=t(n);if(s.isDefaultPrevented())return s;if(ic(e))if(s.content!==n){const o=mi({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return ft(_e({},s),{content:o})}else return ft(_e({},s),{content:e});else return s},vE=(e,t)=>{if(t.no_events)return dn.value(t);{const n=FP(e,t);return n.isDefaultPrevented()?dn.error(oy(e,_e({content:""},n)).content):dn.value(n)}},EE=(e,t,n)=>n.no_events?t:yE(t,o=>oy(e,ft(_e({},n),{content:o}))).content,um=(e,t)=>{if(t.no_events)return dn.value(t);{const n=yE(t.content,s=>LP(e,ft(_e({},t),{content:s})));return n.isDefaultPrevented()?(sy(e,n),dn.error(void 0)):dn.value(n)}},fm=(e,t,n)=>{n.no_events||sy(e,ft(_e({},n),{content:t}))},dm=(e,t,n)=>({element:e,width:t,rows:n}),xE=(e,t)=>({element:e,cells:t}),PL=(e,t)=>({x:e,y:t}),SE=(e,t)=>{const n=parseInt($n(e,t),10);return isNaN(n)?1:n},OL=(e,t,n,s,o)=>{const r=SE(o,"rowspan"),i=SE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=xE(gb(s),[]));for(let f=t;f<t+i;f++){const d=a[c].cells;d[f]=c===n&&f===t?o:Jr(o)}}},DL=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},BL=(e,t,n)=>{for(;DL(e,t,n);)t++;return t},wE=e=>X(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),_E=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(nt(o[r],t))return b.some(PL(r,s))}return b.none()},kE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(xE(i[a].element,f))}return r},IL=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?kE(e,s,o,r,i):kE(e,s,i,r,o);return dm(e.element,wE(a),a)},$L=(e,t)=>{const n=Jr(e.element),s=_.fromTag("tbody");return Zo(s,t),It(n,s),n},LL=e=>z(e.rows,t=>{const n=z(t.cells,o=>{const r=gb(o);return Gn(r,"colspan"),Gn(r,"rowspan"),r}),s=Jr(t.element);return Zo(s,n),s}),FL=e=>{const t=dm(Jr(e),0,[]);return R(xn(e,"tr"),(n,s)=>{R(xn(n,"td,th"),(o,r)=>{OL(t,BL(t,r,s),s,n,o)})}),dm(t.element,wE(t.rows),t.rows)},ML=e=>$L(e,LL(e)),UL=(e,t,n)=>_E(e,t).bind(s=>_E(e,n).map(o=>IL(e,s,o))),zL=e=>de(e,t=>yt(t)==="ul"||yt(t)==="ol"),HL=(e,t)=>de(e,n=>yt(n)==="li"&&Qf(n,t)).fold(K([]),n=>zL(e).map(s=>{const o=_.fromTag(yt(s)),r=Mi(Sh(s),(i,a)=>qn(a,"list-style"));return ul(o,r),[_.fromTag("li"),o]}).getOr([])),VL=(e,t)=>{const n=X(t,(s,o)=>(It(o,s),o),e);return t.length>0?rd([n]):n},WL=e=>Zi(e)?Yn(e).filter(sf).fold(K([]),t=>[e,t]):sf(e)?[e]:[],jL=(e,t)=>{const n=_.fromDom(t.commonAncestorContainer),s=io(n,e),o=H(s,a=>nf(a)||nT(a)),r=HL(s,t),i=o.concat(r.length?r:WL(n));return z(i,Jr)},NE=()=>rd([]),qL=(e,t)=>VL(_.fromDom(t.cloneContents()),jL(e,t)),KL=(e,t)=>Xi(t,"table",re(nt,e)),GL=(e,t)=>KL(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=FL(n);return UL(r,s,o).map(i=>rd([ML(i)]))}).getOrThunk(NE),YL=(e,t)=>t.length>0&&t[0].collapsed?NE():qL(e,t[0]),XL=(e,t)=>{const n=GC(t,e);return n.length>0?GL(e,n):YL(e,t)},hc=(e,t)=>t>=0&&t<e.length&&pa(e.charAt(t)),TE=e=>_o(e.innerText),QL=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),ZL=e=>b.from(e.selection.getRng()).map(t=>{const n=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),o=QL(n),r=e.dom.add(s,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=TE(r),a=_o(r.textContent);if(e.dom.remove(r),hc(a,0)||hc(a,a.length-1)){const c=n.getOr(s),f=TE(c),d=f.indexOf(i);if(d===-1)return i;{const p=hc(f,d-1),y=hc(f,d+i.length);return(p?" ":"")+i+(y?" ":"")}}else return i}).getOr(""),JL=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=bd(e,Yf(o)),i=t.contextual?XL(_.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},eF=(e,t)=>{if(t.format==="text")return ZL(e);{const n=JL(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},tF=(e,t)=>ft(_e({},e),{format:t,get:!0,selection:!0,getInner:!0}),nF=(e,t,n={})=>{const s=tF(n,t);return vE(e,s).fold(St,o=>{const r=eF(e,o);return EE(e,r,o)})},mm=0,AE=1,RE=2,sF=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,y)=>({start:d,end:p,diag:y}),i=(d,p,y,C,x)=>{const v=c(d,p,y,C);if(v===null||v.start===p&&v.diag===p-C||v.end===d&&v.diag===d-y){let S=d,w=y;for(;S<p||w<C;)S<p&&w<C&&e[S]===t[w]?(x.push([mm,e[S]]),++S,++w):p-d>C-y?(x.push([RE,e[S]]),++S):(x.push([AE,t[w]]),++w)}else{i(d,v.start,y,v.start-v.diag,x);for(let S=v.start;S<v.end;++S)x.push([mm,e[S]]);i(v.end,p,v.end-v.diag,C,x)}},a=(d,p,y,C)=>{let x=d;for(;x-p<C&&x<y&&e[x]===t[x-p];)++x;return r(d,x,p)},c=(d,p,y,C)=>{const x=p-d,v=C-y;if(x===0||v===0)return null;const S=x-v,w=v+x,A=(w%2===0?w:w+1)/2;s[1+A]=d,o[1+A]=p+1;let M,B,$,te,W;for(M=0;M<=A;++M){for(B=-M;B<=M;B+=2){for($=B+A,B===-M||B!==M&&s[$-1]<s[$+1]?s[$]=s[$+1]:s[$]=s[$-1]+1,te=s[$],W=te-d+y-B;te<p&&W<C&&e[te]===t[W];)s[$]=++te,++W;if(S%2!==0&&S-M<=B&&B<=S+M&&o[$-S]<=s[$])return a(o[$-S],B+d-y,p,C)}for(B=S-M;B<=S+M;B+=2){for($=B+A-S,B===S-M||B!==S+M&&o[$+1]<=o[$-1]?o[$]=o[$+1]-1:o[$]=o[$-1],te=o[$]-1,W=te-d+y-B;te>=d&&W>=y&&e[te]===t[W];)o[$]=te--,W--;if(S%2===0&&-M<=B&&B<=M&&o[$]<=s[$+S])return a(o[$],B+d-y,p,C)}}},f=[];return i(0,e.length,0,t.length,f),f},PE=e=>Ee(e)?e.outerHTML:ne(e)?ko.encodeRaw(e.data,!1):Bh(e)?"<!--"+e.data+"-->":"",oF=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},rF=(e,t,n)=>{const s=oF(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];o.parentNode.insertBefore(s,o)}else e.appendChild(s)},iF=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}},aF=(e,t)=>{let n=0;R(e,s=>{s[0]===mm?n++:s[0]===AE?(rF(t,s[1],n),n++):s[0]===RE&&iF(t,n)})},lF=e=>H(z(gt(e.childNodes),PE),t=>t.length>0),cF=(e,t)=>{const n=z(gt(t.childNodes),PE);return aF(sF(n,e),t),t},uF=Go(()=>document.implementation.createHTMLDocument("undo")),fF=e=>e.indexOf("</iframe>")!==-1,dF=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),mF=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),pm=e=>{const t=lF(e.getBody()),n=Ke(t,o=>{const r=Uy(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return fF(s)?dF(n):mF(s)},gm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?cF(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:Ne(s)&&AC(s)?!s.isFakeCaret:!0}),e.selection.moveToBookmark(s)},hm=e=>e.type==="fragmented"?e.fragments.join(""):e.content,OE=e=>{const t=_.fromTag("body",uF());return Xu(t,hm(e)),R(xn(t,"*[data-mce-bogus]"),So),kh(t)},pF=(e,t)=>hm(e)===hm(t),gF=(e,t)=>OE(e)===OE(t),bc=(e,t)=>!e||!t?!1:pF(e,t)?!0:gF(e,t),bm=e=>e.get()===0,Cc=(e,t,n)=>{bm(n)&&(e.typing=t)},DE=(e,t)=>{e.typing&&(Cc(e,!1,t),e.add())},hF=e=>{e.typing&&(e.typing=!1,e.add())},bF=(e,t,n)=>{bm(t)&&n.set(Ub(e.selection))},CF=(e,t,n,s,o,r,i)=>{const a=pm(e);if(r=r||{},r=G.extend(r,a),bm(s)===!1||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:r,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&bc(c,r))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const f=M1(e);if(f&&t.data.length>f){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}r.bookmark=Ub(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(r),n.set(t.data.length-1);const d={level:r,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),r},yF=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},vF=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];gm(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},EF=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],gm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},xF=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Cc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],gm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},SF=e=>{e.clear(),e.add()},wF=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!bc(pm(e),t.data[0]),_F=(e,t)=>t.get()<e.data.length-1&&!e.typing,kF=(e,t,n)=>(DE(e,t),e.beforeChange(),e.ignore(n),e.add()),NF=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},TF=(e,t)=>{const n=e.dom,s=Ne(t)?t:e.getBody();Pt(e.hasVisual)&&(e.hasVisual=W1(e)),R(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=j1(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=sC(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},BE=e=>({init:{bindEvents:Ie},undoManager:{beforeChange:(t,n)=>bF(e,t,n),add:(t,n,s,o,r,i)=>CF(e,t,n,s,o,r,i),undo:(t,n,s)=>xF(e,t,n,s),redo:(t,n)=>EF(e,t,n),clear:(t,n)=>yF(e,t,n),reset:t=>SF(t),hasUndo:(t,n)=>wF(e,t,n),hasRedo:(t,n)=>_F(t,n),transact:(t,n,s)=>kF(t,n,s),ignore:(t,n)=>NF(t,n),extra:(t,n,s,o)=>vF(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>Kd(e,t,n,s,o),matchAll:(t,n)=>jI(e,t,n),matchNode:(t,n,s,o)=>$s(e,t,n,s,o),canApply:t=>KI(e,t),closest:t=>qI(e,t),apply:(t,n,s)=>Xv(e,t,n,s),remove:(t,n,s,o)=>Gv(e,t,n,s,o),toggle:(t,n,s)=>A$(e,t,n,s),formatChanged:(t,n,s,o,r)=>T$(e,t,n,s,o,r)},editor:{getContent:t=>$D(e,t),setContent:(t,n)=>HI(e,t,n),insertContent:(t,n)=>FI(e,t,n),addVisual:t=>TF(e,t)},selection:{getContent:(t,n)=>nF(e,t,n)},autocompleter:{addDecoration:t=>_D(e,t),removeDecoration:()=>ND(e,_.fromDom(e.getBody()))},raw:{getModel:()=>b.none()}}),AF=e=>{const t=f=>ut(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,d,p)=>s.transact(p),ignore:(f,d)=>s.ignore(d),extra:(f,d,p,y)=>s.extra(p,y)},formatter:{match:(f,d,p,y)=>o.match(f,t(d),y),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,d,p)=>o.apply(f,t(d)),remove:(f,d,p,y)=>o.remove(f,t(d)),toggle:(f,d,p)=>o.toggle(f,t(d)),formatChanged:(f,d,p,y,C)=>o.formatChanged(d,p,y,C)},editor:{getContent:f=>r.getContent(f),setContent:(f,d)=>({content:r.setContent(f,d),html:""}),insertContent:(f,d)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>b.some(c.getRawModel())}}},RF=()=>{const e=K(null),t=K("");return{init:{bindEvents:Ie},undoManager:{beforeChange:Ie,add:e,undo:e,redo:e,clear:Ie,reset:Ie,hasUndo:pt,hasRedo:pt,transact:e,ignore:Ie,extra:Ie},formatter:{match:pt,matchAll:K([]),matchNode:K(void 0),canApply:pt,closest:t,apply:Ie,remove:Ie,toggle:Ie,formatChanged:K({unbind:Ie})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Ie},selection:{getContent:t},autocompleter:{addDecoration:Ie,removeDecoration:Ie},raw:{getModel:K(b.none())}}},ao=e=>Fe(e.plugins,"rtc"),PF=e=>lt(e.plugins,"rtc").bind(t=>b.from(t.setup)),OF=e=>{const t=e;return PF(e).fold(()=>(t.rtcInstance=BE(e),b.none()),n=>(t.rtcInstance=RF(),b.some(()=>n().then(s=>(t.rtcInstance=AF(s),s.rtc.isRemote)))))},Cm=e=>e.rtcInstance?e.rtcInstance:BE(e),Nt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},DF=(e,t,n)=>{Nt(e).undoManager.beforeChange(t,n)},BF=(e,t,n,s,o,r,i)=>Nt(e).undoManager.add(t,n,s,o,r,i),IF=(e,t,n,s)=>Nt(e).undoManager.undo(t,n,s),$F=(e,t,n)=>Nt(e).undoManager.redo(t,n),LF=(e,t,n)=>{Nt(e).undoManager.clear(t,n)},FF=(e,t)=>{Nt(e).undoManager.reset(t)},MF=(e,t,n)=>Nt(e).undoManager.hasUndo(t,n),UF=(e,t,n)=>Nt(e).undoManager.hasRedo(t,n),zF=(e,t,n,s)=>Nt(e).undoManager.transact(t,n,s),HF=(e,t,n)=>{Nt(e).undoManager.ignore(t,n)},VF=(e,t,n,s,o)=>{Nt(e).undoManager.extra(t,n,s,o)},WF=(e,t,n,s,o)=>Nt(e).formatter.match(t,n,s,o),jF=(e,t,n)=>Nt(e).formatter.matchAll(t,n),qF=(e,t,n,s,o)=>Nt(e).formatter.matchNode(t,n,s,o),KF=(e,t)=>Nt(e).formatter.canApply(t),GF=(e,t)=>Nt(e).formatter.closest(t),YF=(e,t,n,s)=>{Nt(e).formatter.apply(t,n,s)},XF=(e,t,n,s,o)=>{Nt(e).formatter.remove(t,n,s,o)},QF=(e,t,n,s)=>{Nt(e).formatter.toggle(t,n,s)},ZF=(e,t,n,s,o,r)=>Nt(e).formatter.formatChanged(t,n,s,o,r),JF=(e,t)=>Cm(e).editor.getContent(t),eM=(e,t,n)=>Cm(e).editor.setContent(t,n),tM=(e,t,n)=>Cm(e).editor.insertContent(t,n),nM=(e,t,n)=>Nt(e).selection.getContent(t,n),sM=(e,t)=>Nt(e).editor.addVisual(t),IE=e=>Nt(e).init.bindEvents(),oM=(e,t)=>Nt(e).autocompleter.addDecoration(t),rM=e=>Nt(e).autocompleter.removeDecoration(),iM=(e,t={})=>{const n=t.format?t.format:"html";return nM(e,n,t)},$E=e=>e.dom.length===0?(At(e),b.none()):b.some(e),aM=(e,t)=>e.filter(n=>ba.isBookmarkNode(n.dom)).bind(t?Ki:Xo),lM=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(Nd(o,r,!1,!s),n.setStart(r,i)):(Nd(r,o,!1,!s),n.setEnd(r,i))},cM=(e,t)=>{Yn(e).each(n=>{const s=e.dom;t&&tc(n,L(s,0))?sc(s,0):!t&&nc(n,L(s,s.length))&&kd(s,s.length)})},LE=(e,t,n,s)=>{e.bind(o=>((s?kd:sc)(o.dom,s?o.dom.length:0),t.filter(In).map(i=>lM(o,i,n,s)))).orThunk(()=>aM(t,s).or(t).filter(In).map(r=>cM(r,s)))},uM=(e,t)=>{const n=b.from(t.firstChild).map(_.fromDom),s=b.from(t.lastChild).map(_.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Xo).filter(In).bind($E),r=s.bind(Ki).filter(In).bind($E);LE(o,n,e,!0),LE(r,s,e,!1),e.collapse(!1)},fM=(e,t)=>ft(_e({format:"html"},e),{set:!0,selection:!0,content:t}),dM=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,_e(_e({forced_root_block:!1},o),t));return Do({validate:!1},e.schema).serialize(r)}else return t.content},mM=(e,t,n={})=>{const s=fM(n,t);um(e,s).each(o=>{const r=dM(e,o),i=e.selection.getRng();uM(i,i.createContextualFragment(r)),e.selection.setRng(i),ya(e,i),fm(e,r,o)})},FE=(e,t,n)=>{if(e&&Fe(e,t)){const s=H(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var pM=(e,t)=>{let n,s;const o=(i,a)=>de(a,c=>e.is(c,i)),r=i=>e.getParents(i,null,e.getRoot());return{selectorChangedWithUnbind:(i,a)=>(n||(n={},s={},t.on("NodeChange",c=>{const f=c.element,d=r(f),p={};G.each(n,(y,C)=>{o(C,d).each(x=>{s[C]||(R(y,v=>{v(!0,{node:x,selector:C,parents:d})}),s[C]=y),p[C]=y})}),G.each(s,(y,C)=>{p[C]||(delete s[C],G.each(y,x=>{x(!1,{node:f,selector:C,parents:d})}))})})),n[i]||(n[i]=[]),n[i].push(a),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{FE(n,i,a),FE(s,i,a)}})}};const ME=e=>!!(e&&e.ownerDocument)&&to(_.fromDom(e.ownerDocument),_.fromDom(e)),gM=e=>e?ME(e.startContainer)&&ME(e.endContainer):!1,UE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=pM(e,s),a=(J,ge)=>{const Me=e.createRng();Ne(J)&&Ne(ge)?(Me.setStart(J,ge),Me.setEnd(J,ge),M(Me),S(!1)):(Zf(e,Me,s.getBody(),!0),M(Me))},c=J=>iM(s,J),f=(J,ge)=>mM(s,J,ge),d=J=>Oy(s.getBody(),A(),J),p=J=>Dy(s.getBody(),A(),J),y=(J,ge)=>ct.getBookmark(J,ge),C=J=>ct.moveToBookmark(J),x=(J,ge)=>(CD(e,J,ge).each(M),J),v=()=>{const J=A(),ge=w();return!J||J.item?!1:J.compareEndPoints?J.compareEndPoints("StartToEnd",J)===0:!ge||J.collapsed},S=J=>{const ge=A();ge.collapse(!!J),M(ge)},w=()=>t.getSelection?t.getSelection():t.document.selection,A=()=>{let J,ge,Me;const De=(le,Se,Be)=>{try{return Se.compareBoundaryPoints(le,Be)}catch{return-1}},me=t.document;if(s.bookmark!==void 0&&dr(s)===!1){const le=md(s);if(le.isSome())return le.map(Se=>bd(s,[Se])[0]).getOr(me.createRange())}try{(J=w())&&!ml(J.anchorNode)&&(J.rangeCount>0?ge=J.getRangeAt(0):ge=J.createRange?J.createRange():me.createRange(),ge=bd(s,[ge])[0])}catch{}return ge||(ge=me.createRange()),ge.setStart&&ge.startContainer.nodeType===9&&ge.collapsed&&(Me=e.getRoot(),ge.setStart(Me,0),ge.setEnd(Me,0)),o&&r&&(De(ge.START_TO_START,ge,o)===0&&De(ge.END_TO_END,ge,o)===0?ge=r:(o=null,r=null)),ge},M=(J,ge)=>{let Me;if(!gM(J))return;const De=w();if(J=s.dispatch("SetSelectionRange",{range:J,forward:ge}).range,De){r=J;try{De.removeAllRanges(),De.addRange(J)}catch{}ge===!1&&De.extend&&(De.collapse(J.endContainer,J.endOffset),De.extend(J.startContainer,J.startOffset)),o=De.rangeCount>0?De.getRangeAt(0):null}!J.collapsed&&J.startContainer===J.endContainer&&De.setBaseAndExtent&&J.endOffset-J.startOffset<2&&J.startContainer.hasChildNodes()&&(Me=J.startContainer.childNodes[J.startOffset],Me&&Me.tagName==="IMG"&&(De.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),(De.anchorNode!==J.startContainer||De.focusNode!==J.endContainer)&&De.setBaseAndExtent(Me,0,Me,1))),s.dispatch("AfterSetSelectionRange",{range:J,forward:ge})},B=J=>(f(e.getOuterHTML(J)),J),$=()=>hD(s.getBody(),A()),te=(J,ge)=>bD(e,A(),J,ge),W=()=>{const J=w(),ge=J==null?void 0:J.anchorNode,Me=J==null?void 0:J.focusNode;if(!J||!ge||!Me||ml(ge)||ml(Me))return!0;const De=e.createRng();De.setStart(ge,J.anchorOffset),De.collapse(!0);const me=e.createRng();return me.setStart(Me,J.focusOffset),me.collapse(!0),De.compareBoundaryPoints(De.START_TO_START,me)<=0},je={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:s,collapse:S,setCursorLocation:a,getContent:c,setContent:f,getBookmark:y,moveToBookmark:C,select:x,isCollapsed:v,isForward:W,setNode:B,getNode:$,getSel:w,setRng:M,getRng:A,getStart:d,getEnd:p,getSelectedBlocks:te,normalize:()=>{const J=A(),ge=w();if(!hP(ge)&&ql(s)){const Me=Yl(e,J);return Me.each(De=>{M(De,W())}),Me.getOr(J)}return J},selectorChanged:(J,ge)=>(i(J,ge),je),selectorChangedWithUnbind:i,getScrollContainer:()=>{let J,ge=e.getRoot();for(;ge&&ge.nodeName!=="BODY";){if(ge.scrollHeight>ge.clientHeight){J=ge;break}ge=ge.parentNode}return J},scrollIntoView:(J,ge)=>{Ne(J)?LO(s,J,ge):ya(s,A(),ge)},placeCaretAt:(J,ge)=>M(fy(J,ge,s.getDoc())),getBoundingClientRect:()=>{const J=A();return J.collapsed?L.fromRangeStart(J).getClientRects()[0]:J.getBoundingClientRect()},destroy:()=>{t=o=r=null,qt.destroy()}},ct=ba(je),qt=iy(je,s);return je.bookmarkManager=ct,je.controlSelection=qt,je},hM=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let d=f.attr(r);d!==void 0?(f.attr(o,d.length>0?d:null),f.attr(r,null)):(d=f.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),f.name):i&&(d=i.call(a,d,o,f.name)),f.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(a.firstChild).exists(f=>!yl(f.value))?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{let o=s.length;for(;o--;){const r=s[o].firstChild;r&&(r.value=ko.decode(r.value))}}),e.addNodeFilter("script,style",(s,o)=>{const r=a=>a.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const a=s[i],c=a.firstChild?a.firstChild.value:"";if(o==="script"){const f=a.attr("type");f&&a.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`// <![CDATA[
`+r(c)+`
// ]]>`)}else t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`<!--
`+r(c)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o];t.preserve_cdata&&r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{R(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},bM=e=>{const t=s=>s&&s.name==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},CM=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");G.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return kP(e,ft(_e({},n),{node:r})),s&&(o.doc=s),r},yM=(e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events,vM=(e,t,n)=>yM(e,n)?CM(e,t,n):t,EM=(e,t,n)=>{G.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},xM=(e,t,n)=>!t.no_events&&e?NP(e,ft(_e({},t),{content:n})).content:n,SM=(e,t,n)=>{const s=_o(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Cl(_.fromDom(t))?s:G.trim(s)},wM=(e,t,n)=>{const s=n.selection?_e({forced_root_block:!1},n):n,o=e.parse(t,s);return bM(o),o},_M=(e,t,n)=>Do(e,t).serialize(n),kM=(e,t,n,s,o)=>{const r=_M(t,n,s);return xM(e,o,r)},NM=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:rt.DOM,o=t&&t.schema?t.schema:To(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=mi(e,o);hM(r,e,s);const i=(a,c={})=>{const f=_e({format:"html"},c),d=vM(t,a,f),p=SM(s,d,f),y=wM(r,p,f);return f.format==="tree"?y:kM(t,e,o,y,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(EM,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters}},zE=(e,t)=>{const n=NM(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},TM="html",AM=(e,t)=>ft(_e({},e),{format:t,get:!0,getInner:!0}),RM=(e,t={})=>{const n=t.format?t.format:TM,s=AM(t,n);return vE(e,s).fold(St,o=>{const r=JF(e,o);return EE(e,r,o)})},PM="html",OM=(e,t)=>ft(_e({format:PM},e),{set:!0,content:t}),ym=(e,t,n={})=>{const s=OM(n,t);return um(e,s).map(o=>{const r=eM(e,o.content,o);return fm(e,r.html,o),r.content}).getOr(t)},DM="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),BM="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),IM=e=>{const t=H(DM,s=>Fe(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),jn(t)},$M=e=>{const t=G.makeMap(e.plugins," "),s=H(BM,o=>Fe(t,o));return jn(s)},LM=(e,t)=>{const n=IM(e),s=$M(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+f+d)}},FM=(e,t)=>{LM(e,t)},yc=rt.DOM,MM=e=>{yc.setStyle(e.id,"display",e.orgDisplay)},vc=e=>b.from(e).each(t=>t.destroy()),UM=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},zM=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),yc.unbind(t,"submit reset",e.formEventDelegate))},HM=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&yc.remove(o.nextSibling),TP(e),e.editorManager.remove(e),!e.inline&&s&&MM(e),AP(e),yc.remove(e.getContainer()),vc(t),vc(n),e.destroy()}},VM=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),vc(n),vc(s)),zM(e),UM(e),e.destroyed=!0}},Ec=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Fe(e,o)}})(),pi=nn.ModelManager,HE=(e,t)=>t.dom[e],VE=(e,t)=>parseInt(_s(t,e),10),WM=re(HE,"clientWidth"),jM=re(HE,"clientHeight"),qM=re(VE,"margin-top"),KM=re(VE,"margin-left"),GM=e=>e.dom.getBoundingClientRect(),YM=(e,t,n)=>{const s=WM(e),o=jM(e);return t>=0&&n>=0&&t<=s&&n<=o},XM=(e,t,n,s)=>{const o=GM(t),r=e?o.left+t.dom.clientLeft+KM(t):0,i=e?o.top+t.dom.clientTop+qM(t):0,a=n-r,c=s-i;return{x:a,y:c}},QM=(e,t,n)=>{const s=_.fromDom(e.getBody()),o=e.inline?s:mN(s),r=XM(e.inline,o,t,n);return YM(o,r.x,r.y)},ZM=e=>b.from(e).map(_.fromDom),JM=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return ZM(t).map(Vr).getOr(!1)},eU=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}},WE=e=>{const t=[],n=()=>{const y=e.theme;return y&&y.getNotificationManagerImpl?y.getNotificationManagerImpl():eU()},s=()=>b.from(t[0]),o=(y,C)=>y.type===C.type&&y.text===C.text&&!y.progressBar&&!y.timeout&&!C.progressBar&&!C.timeout,r=()=>{R(t,y=>{y.reposition()})},i=y=>{t.push(y)},a=y=>{Te(t,C=>C===y).each(C=>{t.splice(C,1)})},c=(y,C=!0)=>{if(!(e.removed||!JM(e)))return C&&e.dispatch("BeforeOpenNotification",{notification:y}),de(t,x=>o(n().getArgs(x),y)).getOrThunk(()=>{e.editorManager.setActive(e);const x=n().open(y,()=>{a(x),r(),s().fold(()=>e.focus(),v=>wy(_.fromDom(v.getEl())))});return i(x),r(),e.dispatch("OpenNotification",{notification:_e({},x)}),x})},f=()=>{s().each(y=>{n().close(y),a(y),r()})},d=K(t);return(y=>{y.on("SkinLoaded",()=>{const C=T1(y);C&&c({text:C,type:"warning",timeout:0},!1),r()}),y.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),y.on("remove",()=>{R(t.slice(),C=>{n().close(C)})})})(e),{open:c,close:f,getNotifications:d}},gi=nn.PluginManager,Cr=nn.ThemeManager;var tU=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}};const jE=e=>{let t=[];const n=()=>{const v=e.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():tU()},s=(v,S)=>(...w)=>S?S.apply(v,w):void 0,o=v=>{e.dispatch("OpenWindow",{dialog:v})},r=v=>{e.dispatch("CloseWindow",{dialog:v})},i=v=>{t.push(v),o(v)},a=v=>{r(v),t=H(t,S=>S!==v),t.length===0&&e.focus()},c=()=>b.from(t[t.length-1]),f=v=>{e.editorManager.setActive(e),dd(e),e.ui.show();const S=v();return i(S),S},d=(v,S)=>f(()=>n().open(v,S,a)),p=v=>f(()=>n().openUrl(v,a)),y=(v,S,w)=>{const A=n();A.alert(v,s(w||A,S))},C=(v,S,w)=>{const A=n();A.confirm(v,s(w||A,S))},x=()=>{c().each(v=>{n().close(v),a(v)})};return e.on("remove",()=>{R(t,v=>{n().close(v)})}),{open:d,openUrl:p,alert:y,confirm:C,close:x}},qE=(e,t)=>{e.notificationManager.open({type:"error",text:t})},xc=(e,t)=>{e._skinLoaded?qE(e,t):e.on("SkinLoaded",()=>{qE(e,t)})},nU=(e,t)=>{xc(e,ns.translate(["Failed to upload image: {0}",t]))},Aa=(e,t,n)=>{ty(e,t,{message:n}),console.error(n)},Ra=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,sU=(e,t,n)=>{Aa(e,"PluginLoadError",Ra("plugin",t,n))},oU=(e,t,n)=>{Aa(e,"IconsLoadError",Ra("icons",t,n))},rU=(e,t,n)=>{Aa(e,"LanguageLoadError",Ra("language",t,n))},iU=(e,t,n)=>{Aa(e,"ThemeLoadError",Ra("theme",t,n))},aU=(e,t,n)=>{Aa(e,"ModelLoadError",Ra("model",t,n))},lU=(e,t,n)=>{const s=ns.translate(["Failed to initialize plugin: {0}",t]);ty(e,"PluginLoadError",{message:s}),Sc(s,n),xc(e,s)},Sc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},cU=e=>/^[a-z0-9\-]+$/i.test(e),uU=e=>KE(e,x1(e)),fU=e=>KE(e,Jb(e)),KE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=e.inline===!0;return z(t,i=>cU(i)&&!r?`${n}/${i}/${o}`:e.documentBaseURI.toAbsolute(i))},dU=e=>{e.contentCSS=e.contentCSS.concat(uU(e),fU(e))},mU=at,pU=(e,t,n)=>DN(e,t,mU,n),GE=()=>{let n={};const s=(y,C)=>({status:y,resultUri:C}),o=y=>y in n;return{hasBlobUri:o,getResultUri:y=>{const C=n[y];return C?C.resultUri:null},isPending:y=>o(y)?n[y].status===1:!1,isUploaded:y=>o(y)?n[y].status===2:!1,markPending:y=>{n[y]=s(1,null)},markUploaded:(y,C)=>{n[y]=s(2,C)},removeFailed:y=>{delete n[y]},destroy:()=>{n={}}}};let gU=0;const hU=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},bU=e=>e+gU+++hU(),CU=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,y,C,x,v)=>{if(he(p))return s({id:p,name:x,filename:v,blob:y,base64:C});if(ut(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const y=p.id||bU("blobid"),C=p.name||y,x=p.blob;return{id:K(y),name:K(C),filename:K(p.filename||C+"."+t(x.type)),blob:K(x),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(x)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>de(e,p).getOrUndefined(),i=p=>r(y=>y.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(y=>y.blobUri()===p),getByData:(p,y)=>r(C=>C.base64()===p&&C.blob().type===y),findFirst:r,removeByUri:p=>{e=H(e,y=>y.blobUri()===p?(URL.revokeObjectURL(y.blobUri()),!1):!0)},destroy:()=>{R(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},yU=(e,t)=>{const n={},s=(x,v)=>x?x.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v,o=(x,v)=>new Promise((S,w)=>{const A=new XMLHttpRequest;A.open("POST",t.url),A.withCredentials=t.credentials,A.upload.onprogress=B=>{v(B.loaded/B.total*100)},A.onerror=()=>{w("Image upload failed due to a XHR Transport error. Code: "+A.status)},A.onload=()=>{if(A.status<200||A.status>=300){w("HTTP Error: "+A.status);return}const B=JSON.parse(A.responseText);if(!B||!he(B.location)){w("Invalid JSON: "+A.responseText);return}S(s(t.basePath,B.location))};const M=new FormData;M.append("file",x.blob(),x.filename()),A.send(M)}),r=()=>new Promise(x=>{x([])}),i=(x,v)=>({url:v,blobInfo:x,status:!0}),a=(x,v)=>({url:"",blobInfo:x,status:!1,error:v}),c=(x,v)=>{G.each(n[x],S=>{S(v)}),delete n[x]},f=(x,v,S)=>(e.markPending(x.blobUri()),new Promise(w=>{let A,M;try{const B=()=>{A&&(A.close(),M=Ie)},$=W=>{B(),e.markUploaded(x.blobUri(),W),c(x.blobUri(),i(x,W)),w(i(x,W))},te=W=>{B(),e.removeFailed(x.blobUri()),c(x.blobUri(),a(x,W)),w(a(x,W))};M=W=>{W<0||W>100||b.from(A).orThunk(()=>b.from(S).map(Ir)).each(q=>{A=q,q.progressBar.value(W)})},v(x,M).then($,W=>{te(he(W)?{message:W}:W)})}catch(B){w(a(x,B))}})),d=x=>x===o,p=x=>{const v=x.blobUri();return new Promise(S=>{n[v]=n[v]||[],n[v].push(S)})},y=(x,v)=>(x=G.grep(x,S=>!e.isUploaded(S.blobUri())),Promise.all(G.map(x,S=>e.isPending(S.blobUri())?p(S):f(S,t.handler,v)))),C=(x,v)=>!t.url&&d(t.handler)?r():y(x,v);return Ye(t.handler)===!1&&(t.handler=o),{upload:C}},YE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),XE=(e,t)=>yU(t,{url:g1(e),basePath:h1(e),credentials:b1(e),handler:C1(e)}),vU=e=>{const t=GE(),n=XE(e,t);return{upload:(s,o=!0)=>n.upload(s,o?YE(e):void 0)}},EU=e=>{const t=$t(null);return e.on("change AddUndo",s=>{t.set(_e({},s.level))}),{fireIfChanged:()=>{const s=e.undoManager.data;Es(s).filter(o=>!bc(t.get(),o)).each(o=>{e.setDirty(!0),e.dispatch("change",{level:o,lastLevel:Fr(s,s.length-2).getOrNull()})})}}},xU=e=>{const t=CU();let n,s;const o=GE(),r=[],i=EU(e),a=B=>$=>e.selection?B($):[],c=B=>B+(B.indexOf("?")===-1?"?":"&")+new Date().getTime(),f=(B,$,te)=>{let W=0;do W=B.indexOf($,W),W!==-1&&(B=B.substring(0,W)+te+B.substr(W+$.length),W+=te.length-$.length+1);while(W!==-1);return B},d=(B,$,te)=>{const W=`src="${te}"${te===tt.transparentSrc?' data-mce-placeholder="1"':""}`;return B=f(B,`src="${$}"`,W),B=f(B,'data-mce-src="'+$+'"','data-mce-src="'+te+'"'),B},p=(B,$)=>{R(e.undoManager.data,te=>{te.type==="fragmented"?te.fragments=z(te.fragments,W=>d(W,B,$)):te.content=d(te.content,B,$)})},y=(B,$)=>{const te=e.convertURL($,"src");p(B.src,$),ws(_.fromDom(B),{src:Yb(e)?c($):$,"data-mce-src":te})},C=()=>(n||(n=XE(e,o)),w().then(a(B=>{const $=z(B,te=>te.blobInfo);return n.upload($,YE(e)).then(a(te=>{const W=[],q=z(te,(Z,ee)=>{const xe=B[ee].blobInfo,ae=B[ee].image;let se=!1;return Z.status&&m1(e)?(t.removeByUri(ae.src),ao(e)||y(ae,Z.url)):Z.error&&(Z.error.remove&&(p(ae.getAttribute("src"),tt.transparentSrc),W.push(ae),se=!0),nU(e,Z.error.message)),{element:ae,status:Z.status,uploadUri:Z.url,blobInfo:xe,removed:se}});return q.length>0&&i.fireIfChanged(),W.length>0&&!ao(e)&&e.undoManager.transact(()=>{R(W,Z=>{e.dom.remove(Z),t.removeByUri(Z.src)})}),q}))}))),x=()=>Gb(e)?C():Promise.resolve([]),v=B=>et(r,$=>$(B)),S=B=>{r.push(B)},w=()=>(s||(s=fL(o,t)),s.findAll(e.getBody(),v).then(a(B=>(B=H(B,$=>typeof $=="string"?(xc(e,$),!1):!0),ao(e)||R(B,$=>{p($.image.src,$.blobInfo.blobUri()),$.image.src=$.blobInfo.blobUri(),$.image.removeAttribute("data-mce-src")}),B)))),A=()=>{t.destroy(),o.destroy(),s=n=null},M=B=>B.replace(/src="(blob:[^"]+)"/g,($,te)=>{const W=o.getResultUri(te);if(W)return'src="'+W+'"';let q=t.getByUri(te);if(q||(q=X(e.editorManager.get(),(Z,ee)=>Z||ee.editorUpload&&ee.editorUpload.blobCache.getByUri(te),null)),q){const Z=q.blob();return'src="data:'+Z.type+";base64,"+q.base64()+'"'}return $});return e.on("SetContent",()=>{Gb(e)?x():w()}),e.on("RawSaveContent",B=>{B.content=M(B.content)}),e.on("GetContent",B=>{B.source_view||B.format==="raw"||B.format==="tree"||(B.content=M(B.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",B=>{R(B,$=>{const te=$.attr("src");if(t.getByUri(te))return;const W=o.getResultUri(te);W&&$.attr("src",W)})})}),{blobCache:t,addFilter:S,uploadImages:C,uploadImagesAuto:x,scanForImages:w,destroy:A}},SU=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>Ee(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{G.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},QE={remove_similar:!0,inherit:!1},hi=_e({selector:"td,th"},QE),wU={tablecellbackgroundcolor:_e({styles:{backgroundColor:"%value"}},hi),tablecellverticalalign:_e({styles:{"vertical-align":"%value"}},hi),tablecellbordercolor:_e({styles:{borderColor:"%value"}},hi),tablecellclass:_e({classes:["%value"]},hi),tableclass:_e({selector:"table",classes:["%value"]},QE),tablecellborderstyle:_e({styles:{borderStyle:"%value"}},hi),tablecellborderwidth:_e({styles:{borderWidth:"%value"}},hi)},_U=K(wU),kU=e=>{const t={},n=i=>Ne(i)?t[i]:t,s=i=>Fe(t,i),o=(i,a)=>{i&&(he(i)?(Tt(a)||(a=[a]),R(a,c=>{Pt(c.deep)&&(c.deep=!Rn(c)),Pt(c.split)&&(c.split=!Rn(c)||Wt(c)),Pt(c.remove)&&Rn(c)&&!Wt(c)&&(c.remove="none"),Rn(c)&&Wt(c)&&(c.mixed=!0,c.block_expand=!0),he(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):Ct(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(SU(e)),o(_U()),o(P1(e)),{get:n,has:s,register:o,unregister:r}},wc=G.each,kn=rt.DOM,ZE=(e,t)=>{let n,s,o;const r=t&&t.schema||To({}),i=(d,p)=>{p.classes.length&&kn.addClass(d,p.classes.join(" ")),kn.setAttribs(d,p.attrs)},a=d=>{s=typeof d=="string"?{name:d,classes:[],attrs:{}}:d;const p=kn.create(s.name);return i(p,s),p},c=(d,p)=>{const y=typeof d!="string"?d.nodeName.toLowerCase():d,C=r.getElementRule(y),x=C&&C.parentsRequired;return x&&x.length?p&&G.inArray(x,p)!==-1?p:x[0]:!1},f=(d,p,y)=>{let C,x;const v=p.length>0&&p[0],S=v&&v.name,w=c(d,S);if(w)S===w?(x=p[0],p=p.slice(1)):x=w;else if(v)x=p[0],p=p.slice(1);else if(!y)return d;return x&&(C=a(x),C.appendChild(d)),y&&(C||(C=kn.create("div"),C.appendChild(d)),G.each(y,A=>{const M=a(A);C.insertBefore(M,d)})),f(C,p,x&&x.siblings)};return e&&e.length?(s=e[0],n=a(s),o=kn.create("div"),o.appendChild(f(n,e.slice(1),s.siblings)),o):""},NU=e=>{let t;const n={classes:[],attrs:{}};return e=n.selector=G.trim(e),e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":G.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},TU=e=>!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=G.map(t.split(/(?:~\+|~|\+)/),NU),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()),AU=(e,t)=>{let n,s,o="",r,i=O1(e);if(i==="")return"";const a=d=>d.replace(/%(\w+)/g,"");if(typeof t=="string"){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t){const d=lt(t,"preview");if(Hr(d,!1))return"";i=d.getOr(i)}n=t.block||t.inline||"span";const c=TU(t.selector);c.length?(c[0].name||(c[0].name=n),n=t.selector,s=ZE(c,e)):s=ZE([n],e);const f=kn.select(n,s)[0]||s.firstChild;return wc(t.styles,(d,p)=>{const y=a(d);y&&kn.setStyle(f,p,y)}),wc(t.attributes,(d,p)=>{const y=a(d);y&&kn.setAttrib(f,p,y)}),wc(t.classes,d=>{const p=a(d);kn.hasClass(f,p)||kn.addClass(f,p)}),e.dispatch("PreviewFormats"),kn.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),r=kn.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,wc(i.split(" "),d=>{let p=kn.getStyle(f,d,!0);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=kn.getStyle(e.getBody(),d,!0),zl(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&zl(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(r===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*r+"px"}d==="border"&&p&&(o+="padding:0 2px;"),o+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),kn.remove(s),o},RU=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},JE=e=>{const t=kU(e),n=$t(null);return RU(e),s$(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{YF(e,s,o,r)},remove:(s,o,r,i)=>{XF(e,s,o,r,i)},toggle:(s,o,r)=>{QF(e,s,o,r)},match:(s,o,r,i)=>WF(e,s,o,r,i),closest:s=>GF(e,s),matchAll:(s,o)=>jF(e,s,o),matchNode:(s,o,r,i)=>qF(e,s,o,r,i),canApply:s=>KF(e,s),formatChanged:(s,o,r,i)=>ZF(e,n,s,o,r,i),getCssText:re(AU,e)}},e0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},PU=(e,t,n)=>{const s=$t(!1),o=c=>{Cc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;e0(f)||(DE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;e0(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;c.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&bc(pm(e),t.data[0])===!1&&(e.isDirty()===!1&&e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!d&&(t.beforeChange(),Cc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},OU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},t0=e=>{const t=Ao(),n=$t(0),s=$t(0),o={data:[],typing:!1,beforeChange:()=>{DF(e,n,t)},add:(r,i)=>BF(e,o,s,n,t,r,i),undo:()=>IF(e,o,n,s),redo:()=>$F(e,s,o.data),clear:()=>{LF(e,o,s)},reset:()=>{FF(e,o)},hasUndo:()=>MF(e,o,s),hasRedo:()=>UF(e,o,s),transact:r=>zF(e,o,n,r),ignore:r=>{HF(e,n,r)},extra:(r,i)=>{VF(e,o,s,r,i)}};return ao(e)||PU(e,o,n),OU(e),o},DU=[9,27,be.HOME,be.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,be.DOWN,be.UP,be.LEFT,be.RIGHT].concat(tt.browser.isFirefox()?[224]:[]),n0="data-mce-placeholder",s0=e=>e.type==="keydown"||e.type==="keyup",o0=e=>{const t=e.keyCode;return t===be.BACKSPACE||t===be.DELETE},BU=e=>{if(s0(e)){const t=e.keyCode;return!o0(e)&&(be.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||P(DU,t))}else return!1},IU=e=>s0(e)&&!(o0(e)||e.type==="keyup"&&e.keyCode===229),$U=(e,t,n)=>{if(Ht(_.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},LU=e=>{const t=e.dom,n=Sn(e),s=N1(e),o=(r,i)=>{if(BU(r))return;const a=e.getBody(),c=IU(r)?!1:$U(t,a,n);(t.getAttrib(a,n0)!==""!==c||i)&&(t.setAttrib(a,n0,c?s:null),t.setAttrib(a,"aria-placeholder",c?s:null),$P(e,c),e.on(c?"keydown":"keyup",o),e.off(c?"keyup":"keydown",o))};s&&e.on("init",r=>{o(r,!0),e.on("change SetContent ExecCommand",o),e.on("paste",i=>Un.setEditorTimeout(e,()=>o(i)))})},FU=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,MU=e=>FU.test(e),yr=(e,t)=>eo(_.fromDom(t),_1(e)),UU=e=>rt.DOM.getStyle(e,"direction",!0)==="rtl"||MU(e.textContent),zU=(e,t,n)=>H(rt.DOM.getParents(n.container(),"*",t),e),$o=(e,t,n)=>{const s=zU(e,t,n);return b.from(s[s.length-1])},HU=(e,t,n)=>{const s=Oo(t,e),o=Oo(n,e);return s&&s===o},VU=e=>of(e)||rf(e),zn=(e,t)=>{if(!t)return t;const n=t.container(),s=t.offset();return e?Yr(n)?ne(n.nextSibling)?L(n.nextSibling,0):L.after(n):of(t)?L(n,s+1):t:Yr(n)?ne(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):rf(t)?L(n,s-1):t},r0=re(zn,!0),i0=re(zn,!1),a0=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},vm=e=>a0(e,"Delete"),WU=e=>a0(e,"ForwardDelete"),jU=e=>t=>nt(e,_.fromDom(t.dom.parentNode)),qU=e=>zh(e)||Zi(e),_c=(e,t)=>to(e,t)?hl(t,qU,jU(e)):b.none(),KU=e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},l0=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),KU(e))},GU=(e,t,n)=>En(mn(n),Ds(n),(s,o)=>{const r=zn(!0,s),i=zn(!1,o),a=zn(!1,t);return e?os(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):Os(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),YU=(e,t)=>({block:e,position:t}),XU=(e,t)=>({from:e,to:t}),Em=(e,t)=>{const n=_.fromDom(e),s=_.fromDom(t.container());return _c(n,s).map(o=>YU(o,t))},QU=e=>nt(e.from.block,e.to.block)===!1,ZU=e=>Yn(e.from.block).bind(t=>Yn(e.to.block).filter(n=>nt(t,n))).isSome(),JU=e=>wt(e.from.block.dom)===!1&&wt(e.to.block.dom)===!1,ez=(e,t,n)=>Dt(n.position.getNode())&&Ht(n.block)===!1?oi(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Fn(t,e,s).bind(o=>Em(e,o)):b.some(n)).getOr(n):n,tz=(e,t,n)=>{const s=Em(e,L.fromRangeStart(n)),o=s.bind(r=>Fn(t,e,r.position).bind(i=>Em(e,i).map(a=>ez(e,t,a))));return En(s,o,XU).filter(r=>QU(r)&&ZU(r)&&JU(r))},nz=(e,t,n)=>n.collapsed?tz(e,t,n):b.none(),sz=e=>{const t=Yt(e);return Te(t,Ns).fold(K(t),n=>t.slice(0,n))},c0=e=>{const t=sz(e);return R(t,At),t},u0=(e,t)=>{const n=io(t,e);return de(n.reverse(),s=>Ht(s)).each(At)},oz=e=>H(mh(e),t=>!Ht(t)).length===0,rz=(e,t,n,s)=>{if(Ht(n))return gr(n),mn(n.dom);oz(s)&&Ht(t)&&Xn(s,_.fromTag("br"));const o=Os(n.dom,L.before(s.dom));return R(c0(t),r=>{Xn(s,r)}),u0(e,t),o},iz=(e,t,n)=>{if(Ht(n))return At(n),Ht(t)&&gr(t),mn(t.dom);const s=Ds(n.dom);return R(c0(t),o=>{It(n,o)}),u0(e,t),s},az=(e,t)=>{const n=io(t,e);return b.from(n[n.length-1])},lz=(e,t)=>to(t,e)?az(t,e):b.none(),f0=(e,t)=>{oi(e,t.dom).map(n=>n.getNode()).map(_.fromDom).filter(qr).each(At)},d0=(e,t,n)=>(f0(!0,t),f0(!1,n),lz(t,n).fold(re(iz,e,t,n),re(rz,e,t,n))),m0=(e,t,n,s)=>t?d0(e,s,n):d0(e,n,s),xm=(e,t)=>{const n=_.fromDom(e.getBody());return nz(n.dom,t,e.selection.getRng()).map(o=>()=>{m0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},cz=(e,t)=>{const n=t.getRng();return En(_c(e,_.fromDom(n.startContainer)),_c(e,_.fromDom(n.endContainer)),(s,o)=>nt(s,o)===!1?b.some(()=>{n.deleteContents(),m0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})}):b.none()).getOr(b.none())},p0=(e,t)=>{const n=_.fromDom(t),s=re(nt,e);return jr(n,bl,s).isSome()},uz=(e,t)=>p0(e,t.startContainer)||p0(e,t.endContainer),fz=(e,t)=>{const n=Os(e.dom,L.fromRangeStart(t)).isNone(),s=os(e.dom,L.fromRangeEnd(t)).isNone();return!uz(e,t)&&n&&s},dz=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),mz=e=>{const t=_.fromDom(e.getBody()),n=e.selection.getRng();return fz(t,n)?dz(e):cz(t,e.selection)},Sm=(e,t)=>e.selection.isCollapsed()?b.none():mz(e),pz=no,gz=wt,lo=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),hz=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Pa=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(hz(t)),bz=(e,t,n)=>{const s=Lf(1,e.getBody(),t),o=L.fromRangeStart(s),r=o.getNode();if(la(r))return lo(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(la(i))return lo(1,e,i,!1,!1);const a=e.dom.getParent(o.getNode(),c=>gz(c)||pz(c));return la(a)?lo(1,e,a,!1,n):b.none()},wm=(e,t,n)=>t.collapsed?bz(e,t,n).getOr(t):t,Cz=e=>mr(e)||Ea(e),yz=e=>pr(e)||xa(e),vz=(e,t)=>{ne(t)&&t.data.length===0&&e.remove(t)},g0=(e,t,n,s,o,r)=>{lo(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),vz(e.dom,n)},Ez=(e,t)=>{const n=e.selection.getRng();if(!ne(n.commonAncestorContainer))return b.none();const s=t?Vt.Forwards:Vt.Backwards,o=Ps(e.getBody()),r=re(Ff,t?o.next:o.prev),i=t?Cz:yz,a=ma(s,e.getBody(),n),c=zn(t,r(a));if(!c||!Ll(a,c))return b.none();if(i(c))return b.some(()=>g0(e,n,a.getNode(),s,t,c));const f=r(c);return f&&i(f)&&Ll(c,f)?b.some(()=>g0(e,n,a.getNode(),s,t,f)):b.none()},_m=(e,t)=>Ez(e,t),xz=e=>bl(_.fromDom(e))||Zi(_.fromDom(e)),Pn=Ts.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Sz=(e,t)=>{const n=t.getNode(e===!1),s=e?"after":"before";return Ee(n)&&n.getAttribute("data-mce-caret")===s},wz=(e,t,n,s)=>{const o=r=>nf(_.fromDom(r))&&!As(n,s,e);return yC(!t,n).fold(()=>yC(t,s).fold(pt,o),o)},h0=(e,t,n,s)=>{const o=s.getNode(t===!1);return _c(_.fromDom(e),_.fromDom(n.getNode())).map(r=>Ht(r)?Pn.remove(r.dom):Pn.moveToElement(o)).orThunk(()=>b.some(Pn.moveToElement(o)))},b0=(e,t,n)=>Fn(t,e,n).bind(s=>xz(s.getNode())||wz(e,t,n,s)?b.none():t&&wt(s.getNode())||t===!1&&wt(s.getNode(!0))?h0(e,t,n,s):t&&pr(n)||t===!1&&mr(n)?b.some(Pn.moveToPosition(s)):b.none()),_z=(e,t)=>e&&wt(t.nextSibling)?b.some(Pn.moveToElement(t.nextSibling)):e===!1&&wt(t.previousSibling)?b.some(Pn.moveToElement(t.previousSibling)):b.none(),kz=(e,t,n)=>n.fold(s=>b.some(Pn.remove(s)),s=>b.some(Pn.moveToElement(s)),s=>As(t,s,e)?b.none():b.some(Pn.moveToPosition(s))),Nz=(e,t,n)=>Sz(t,n)?_z(t,n.getNode(t===!1)).fold(()=>b0(e,t,n),b.some):b0(e,t,n).bind(s=>kz(e,n,s)),Tz=(e,t,n)=>{const s=Lf(t?1:-1,e,n),o=L.fromRangeStart(s),r=_.fromDom(e);return t===!1&&pr(o)?b.some(Pn.remove(o.getNode(!0))):t&&mr(o)?b.some(Pn.remove(o.getNode())):t===!1&&mr(o)&&wd(r,o)?JD(r,o).map(i=>Pn.remove(i.getNode())):t&&pr(o)&&Sd(r,o)?eB(r,o).map(i=>Pn.remove(i.getNode())):Nz(e,t,o)},Az=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),hr(e,t,_.fromDom(n)),!0),Rz=(e,t)=>n=>{const s=t?L.before(n):L.after(n);return e.selection.setRng(s.toRange()),!0},Pz=e=>t=>(e.selection.setRng(t.toRange()),!0),C0=(e,t)=>b.from(wa(e.getBody(),t)),Oz=(e,t)=>{const n=e.selection.getNode();return C0(e,n).filter(wt).fold(()=>Tz(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(Az(e,t),Rz(e,t),Pz(e))),()=>b.some(Ie))},Dz=e=>{R(xn(e,".mce-offscreen-selection"),At)},Bz=(e,t)=>{const n=e.selection.getNode();return wt(n)&&!gl(n)?C0(e,n.parentNode).filter(wt).fold(()=>b.some(()=>{Dz(_.fromDom(e.getBody())),hr(e,t,_.fromDom(e.selection.getNode())),l0(e)}),()=>b.some(Ie)):b.none()},y0=e=>{const t=e.dom,n=e.selection,s=wa(e.getBody(),n.getNode());if(no(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(L.before(o).toRange())}return!0},km=(e,t)=>e.selection.isCollapsed()?Oz(e,t):Bz(e,t),Iz=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return Fn(t,e.getBody(),n).filter(s=>t?VD(s):WD(s)).bind(s=>b.from($f(t?0:-1,s))).map(s=>()=>e.selection.select(s))},Nm=(e,t)=>e.selection.isCollapsed()?Iz(e,t):b.none(),bi=ne,v0=e=>bi(e)&&e.data[0]===Kt,E0=e=>bi(e)&&e.data[e.data.length-1]===Kt,x0=e=>e.ownerDocument.createTextNode(Kt),$z=e=>{if(bi(e.previousSibling))return E0(e.previousSibling)||e.previousSibling.appendData(Kt),e.previousSibling;if(bi(e))return v0(e)||e.insertData(0,Kt),e;{const t=x0(e);return e.parentNode.insertBefore(t,e),t}},Lz=e=>{if(bi(e.nextSibling))return v0(e.nextSibling)||e.nextSibling.insertData(0,Kt),e.nextSibling;if(bi(e))return E0(e)||e.appendData(Kt),e;{const t=x0(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}},kc=(e,t)=>e?$z(t):Lz(t),Fz=re(kc,!0),Mz=re(kc,!1),S0=(e,t)=>ne(e.container())?kc(t,e.container()):kc(t,e.getNode()),w0=(e,t)=>{const n=t.get();return n&&e.container()===n&&Yr(n)},Tm=(e,t)=>t.fold(n=>{cr(e.get());const s=Fz(n);return e.set(s),b.some(L(s,s.length-1))},n=>mn(n).map(s=>{if(w0(s,e))return L(e.get(),1);{cr(e.get());const o=S0(s,!0);return e.set(o),L(o,1)}}),n=>Ds(n).map(s=>{if(w0(s,e))return L(e.get(),e.get().length-1);{cr(e.get());const o=S0(s,!1);return e.set(o),L(o,o.length-1)}}),n=>{cr(e.get());const s=Mz(n);return e.set(s),b.some(L(s,1))}),_0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},sn=Ts.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),k0=(e,t)=>{const n=Oo(t,e);return n||e},Uz=(e,t,n)=>{const s=r0(n),o=k0(t,s.container());return $o(e,o,s).fold(()=>os(o,s).bind(re($o,e,o)).map(r=>sn.before(r)),b.none)},zz=(e,t)=>fr(e,t)===null,N0=(e,t,n)=>$o(e,t,n).filter(re(zz,t)),Hz=(e,t,n)=>{const s=i0(n);return N0(e,t,s).bind(o=>Os(o,s).isNone()?b.some(sn.start(o)):b.none())},Vz=(e,t,n)=>{const s=r0(n);return N0(e,t,s).bind(o=>os(o,s).isNone()?b.some(sn.end(o)):b.none())},Wz=(e,t,n)=>{const s=i0(n),o=k0(t,s.container());return $o(e,o,s).fold(()=>Os(o,s).bind(re($o,e,o)).map(r=>sn.after(r)),b.none)},T0=e=>UU(Am(e))===!1,Ms=(e,t,n)=>_0([Uz,Hz,Vz,Wz],[e,t,n]).filter(T0),Am=e=>e.fold(St,St,St,St),A0=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Nc=e=>e.fold(sn.before,sn.before,sn.after,sn.after),Rm=e=>e.fold(sn.start,sn.start,sn.end,sn.end),jz=(e,t)=>A0(e)===A0(t)&&Am(e)===Am(t),qz=(e,t,n,s,o,r)=>En($o(t,n,s),$o(t,n,o),(i,a)=>i!==a&&HU(n,i,a)?sn.after(e?i:a):r).getOr(r),Kz=(e,t)=>e.fold(at,n=>!jz(n,t)),Gz=(e,t,n,s,o)=>{const r=zn(e,o);return Fn(e,n,r).map(re(zn,e)).fold(()=>s.map(Nc),c=>Ms(t,n,c).map(re(qz,e,t,n,r,c)).filter(re(Kz,s))).filter(T0)},Yz=(e,t)=>e?t.fold(Ot(b.some,sn.start),b.none,Ot(b.some,sn.after),b.none):t.fold(b.none,Ot(b.some,sn.before),b.none,Ot(b.some,sn.end)),Xz=(e,t,n,s)=>{const o=zn(e,s),r=Ms(t,n,o);return Ms(t,n,o).bind(re(Yz,e)).orThunk(()=>Gz(e,t,n,r,s))},Qz=e=>Ye(e.selection.getSel().modify),R0=(e,t,n)=>{const s=e?1:-1;return t.setRng(L(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Zz=(e,t)=>{const n=t.selection.getRng(),s=e?L.fromRangeEnd(n):L.fromRangeStart(n);return Qz(t)?e&&of(s)?R0(!0,t.selection,s):!e&&rf(s)?R0(!1,t.selection,s):!1:!1};var Us;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Us||(Us={}));const Tc=(e,t)=>e===Vt.Backwards?ot(t):t,Jz=(e,t,n)=>e===Vt.Forwards?t.next(n):t.prev(n),eH=(e,t,n,s)=>Dt(s.getNode(t===Vt.Forwards))?Us.Br:As(n,s)===!1?Us.Block:Us.Wrap,P0=(e,t,n,s)=>{const o=Ps(n);let r=s;const i=[];for(;r;){const a=Jz(t,o,r);if(!a)break;if(Dt(a.getNode(!1)))return t===Vt.Forwards?{positions:Tc(t,i).concat([a]),breakType:Us.Br,breakAt:b.some(a)}:{positions:Tc(t,i),breakType:Us.Br,breakAt:b.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=eH(n,t,r,a);return{positions:Tc(t,i),breakType:c,breakAt:b.some(a)}}i.push(a),r=a}return{positions:Tc(t,i),breakType:Us.Eol,breakAt:b.none()}},O0=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Vt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Pm=(e,t)=>X(e,(n,s)=>n.fold(()=>b.some(s),o=>En(Ut(o.getClientRects()),Ut(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),b.none()),D0=(e,t)=>Ut(t.getClientRects()).bind(n=>Pm(e,n.left)),Oa=re(P0,L.isAbove,-1),Da=re(P0,L.isBelow,1),tH=re(O0,-1,Oa),nH=re(O0,1,Da),sH=(e,t)=>Oa(e,t).breakAt.isNone(),oH=(e,t)=>Da(e,t).breakAt.isNone(),rH=e=>mn(e).map(t=>[t].concat(Da(e,t).positions)).getOr([]),iH=e=>Ds(e).map(t=>Oa(e,t).positions.concat(t)).getOr([]),aH=wt,B0=(e,t)=>Math.abs(e.left-t),I0=(e,t)=>Math.abs(e.right-t),lH=e=>Mr(e,"node"),$0=(e,t)=>ol(e,(n,s)=>{const o=Math.min(B0(n,t),I0(n,t)),r=Math.min(B0(s,t),I0(s,t));return r===o&&lH(s)&&aH(s.node)||r<o?s:n}),cH=e=>{const t=n=>z(n,s=>{const o=ir(s);return o.node=e,o});if(Ee(e))return t(e.getClientRects());if(ne(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},L0=e=>Ke(e,cH);var Ba;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ba||(Ba={}));const uH=(e,t,n,s)=>{for(;s=ua(s,e,Kh,t);)if(n(s))return},F0=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let y=L0([p]);e===-1&&(y=y.reverse());for(let C=0;C<y.length;C++){const x=y[C];if(!n(x,f)){if(a.length>0&&t(x,yo(a))&&i++,x.line=i,o(x))return!0;a.push(x)}}},f=yo(r.getClientRects());if(!f)return a;const d=r.getNode();return c(d),uH(e,s,c,d),a},fH=(e,t)=>t.line>e,dH=(e,t)=>t.line===e,mH=re(F0,Ba.Up,sa,oa),pH=re(F0,Ba.Down,oa,sa),gH=(e,t,n,s)=>{const o=Ps(t);let r,i,a,c;const f=[];let d=0;const p=C=>yo(C.getClientRects());e===1?(r=o.next,i=oa,a=sa,c=L.after(s)):(r=o.prev,i=sa,a=oa,c=L.before(s));const y=p(c);do{if(!c.isVisible())continue;const C=p(c);if(a(C,y))continue;f.length>0&&i(C,yo(f))&&d++;const x=ir(C);if(x.position=c,x.line=d,n(x))return f;f.push(x)}while(c=r(c));return f},M0=e=>t=>fH(e,t),Om=e=>t=>dH(e,t),Lo=(e,t)=>{e.selection.setRng(t),ya(e,e.selection.getRng())},Dm=(e,t,n)=>b.some(wm(e,t,n)),U0=(e,t,n,s,o,r)=>{const i=t===Vt.Forwards,a=Ps(e.getBody()),c=re(Ff,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const x=Al(n);if(r(x))return lo(t,e,x,t===Vt.Backwards,!1)}const d=ma(t,e.getBody(),n);if(f(d))return Pa(e,d.getNode(!i));const p=zn(i,c(d)),y=Wh(n);if(!p)return y?b.some(n):b.none();if(f(p))return lo(t,e,p.getNode(!i),i,!1);const C=c(p);return C&&f(C)&&Ll(p,C)?lo(t,e,C.getNode(!i),i,!1):y?Dm(e,p.toRange(),!1):b.none()},z0=(e,t,n,s,o,r)=>{const i=ma(t,e.getBody(),n),a=yo(i.getClientRects()),c=t===Ba.Down;if(!a)return b.none();const d=(c?pH:mH)(e.getBody(),M0(1),i),p=H(d,Om(1)),y=a.left,C=$0(p,y);if(C&&r(C.node)){const v=Math.abs(y-C.left),S=Math.abs(y-C.right);return lo(t,e,C.node,v<S,!1)}let x;if(s(i)?x=i.getNode():o(i)?x=i.getNode(!0):x=Al(n),x){const v=gH(t,e.getBody(),M0(1),x);let S=$0(H(v,Om(1)),y);if(S||(S=yo(H(v,Om(0))),S))return Dm(e,S.position.toRange(),!1)}return p.length===0?Bm(e,c).filter(c?o:s).map(v=>wm(e,v.toRange(),!1)):b.none()},Bm=(e,t)=>{const n=e.selection.getRng(),s=t?L.fromRangeEnd(n):L.fromRangeStart(n),o=PR(s.container(),e.getBody());if(t){const r=Da(o,s);return Es(r.positions)}else{const r=Oa(o,s);return Ut(r.positions)}},H0=(e,t,n)=>Bm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Ac=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},V0=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},W0=(e,t,n)=>Tm(t,n).map(s=>(Ac(e,s),n)),hH=(e,t,n)=>{const s=e.getBody(),o=L.fromRangeStart(e.selection.getRng()),r=re(yr,e);return Xz(n,r,s,o).bind(a=>W0(e,t,a))},bH=(e,t,n)=>{const s=z(xn(_.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=H(s,e),r=H(n,e);R(bt(o,r),re(V0,!1)),R(bt(r,o),re(V0,!0))},CH=(e,t)=>{if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){const n=L.fromRangeStart(e.selection.getRng());L.isTextPosition(n)&&VU(n)===!1&&(Ac(e,vR(t.get(),n)),t.set(null))}},yH=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=H(s,e);R(o,r=>{const i=L.fromRangeStart(t.selection.getRng());Ms(e,t.getBody(),i).bind(a=>W0(t,n,a))})}},j0=(e,t,n)=>aa(e)?hH(e,t,n).isSome():!1,q0=(e,t,n)=>aa(t)?Zz(e,t):!1,vH=e=>{const t=$t(null),n=re(yr,e);return e.on("NodeChange",s=>{aa(e)&&(bH(n,e.dom,s.parents),CH(e,t),yH(n,e,t,s.parents))}),t},EH=re(q0,!0),xH=re(q0,!1),Rc=(e,t,n)=>{if(aa(e)){const s=Bm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?L.fromRangeEnd(o):L.fromRangeStart(o)});return Ms(re(yr,e),e.getBody(),s).exists(o=>{const r=Nc(o);return Tm(n,r).exists(i=>(Ac(e,i),!0))})}else return!1},SH=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},wH=e=>En(mn(e),Ds(e),(t,n)=>{const s=zn(!0,t),o=zn(!1,n);return os(e,s).forall(r=>r.isEqual(o))}).getOr(!0),K0=(e,t)=>n=>Tm(t,n).map(s=>()=>Ac(e,s)),G0=(e,t,n,s)=>{const o=e.getBody(),r=re(yr,e);e.undoManager.ignore(()=>{e.selection.setRng(SH(n,s)),vm(e),Ms(r,o,L.fromRangeStart(e.selection.getRng())).map(Rm).bind(K0(e,t)).each(Ko)}),e.nodeChanged()},_H=(e,t)=>{const n=Oo(t,e);return n||e},kH=(e,t,n,s)=>{const o=_H(e.getBody(),s.container()),r=re(yr,e),i=Ms(r,o,s);return i.bind(c=>n?c.fold(K(b.some(Rm(c))),b.none,K(b.some(Nc(c))),b.none):c.fold(b.none,K(b.some(Nc(c))),b.none,K(b.some(Rm(c))))).map(K0(e,t)).getOrThunk(()=>{const c=Ml(n,o,s),f=c.bind(d=>Ms(r,o,d));return En(i,f,()=>$o(r,o,s).bind(d=>wH(d)?b.some(()=>{hr(e,n,_.fromDom(d))}):b.none())).getOrThunk(()=>f.bind(()=>c.map(d=>()=>{n?G0(e,t,s,d):G0(e,t,d,s)})))})},Im=(e,t,n)=>{if(e.selection.isCollapsed()&&aa(e)){const s=L.fromRangeStart(e.selection.getRng());return kH(e,t,n,s)}return b.none()},NH=(e,t)=>{const n=io(t,e);return Te(n,Ns).fold(K(n),s=>n.slice(0,s))},TH=e=>hh(e)===1,AH=(e,t,n,s)=>{const o=re(r$,t),r=z(H(s,o),i=>i.dom);if(r.length===0)hr(t,e,n);else{const i=o$(n.dom,r);t.selection.setRng(i.toRange())}},RH=(e,t)=>{const n=_.fromDom(e.getBody()),s=_.fromDom(e.selection.getStart()),o=H(NH(n,s),TH);return Es(o).bind(r=>{const i=L.fromRangeStart(e.selection.getRng());return GU(t,i,r.dom)&&!i$(r)?b.some(()=>AH(t,e,r,o)):b.none()})},$m=(e,t)=>e.selection.isCollapsed()?RH(e,t):b.none(),Lm=(e,t,n)=>b.some(()=>{e._selectionOverrides.hideFakeCaret(),hr(e,t,_.fromDom(n))}),PH=(e,t)=>{const n=t?Ea:xa,s=t?Vt.Forwards:Vt.Backwards,o=ma(s,e.getBody(),e.selection.getRng());return n(o)?Lm(e,t,o.getNode(!t)):b.from(zn(t,o)).filter(r=>n(r)&&Ll(o,r)).map(r=>()=>Lm(e,t,r.getNode(!t)))},OH=(e,t)=>{const n=e.selection.getNode();return ks(n)?Lm(e,t,n):b.none()},Fm=(e,t)=>e.selection.isCollapsed()?PH(e,t):OH(e,t),DH=e=>hl(e,t=>no(t.dom)||wt(t.dom)).exists(t=>no(t.dom)),Mm=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},Y0=(e,t)=>{const n=e||sT(t)?"margin":"padding",s=_s(t,"direction")==="rtl"?"-right":"-left";return n+s},BH=(e,t,n,s,o,r)=>{const i=Y0(n,_.fromDom(r));if(t==="outdent"){const a=Math.max(0,Mm(r.style[i])-s);e.setStyle(r,i,a?a+o:"")}else{const a=Mm(r.style[i])+s+o;e.setStyle(r,i,a)}},IH=(e,t)=>et(t,n=>{const s=Y0(Zb(e),n),o=fl(n,s).map(Mm).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),X0=e=>{const t=Z0(e);return!e.mode.isReadOnly()&&(t.length>1||IH(e,t))},Q0=e=>sf(e)||Zi(e),$H=e=>Yn(e).exists(Q0),Z0=e=>H(NN(e.selection.getSelectedBlocks()),t=>!Q0(t)&&!$H(t)&&DH(t)),J0=(e,t)=>{const{dom:n}=e,s=E1(e),o=/[a-z%]+$/i.exec(s)[0],r=parseInt(s,10),i=Zb(e);R(Z0(e),a=>{BH(n,t,i,r,o,a.dom)})},LH=e=>J0(e,"indent"),ex=e=>J0(e,"outdent"),tx=e=>{if(e.selection.isCollapsed()&&X0(e)){const t=e.dom,n=e.selection.getRng(),s=L.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&xd(_.fromDom(o),s))return b.some(()=>ex(e))}return b.none()},nx=(e,t,n)=>tn([tx,km,_m,(s,o)=>Im(s,t,o),xm,Id,Nm,Fm,Sm,$m],s=>s(e,n)),FH=(e,t)=>{nx(e,t,!1).fold(()=>{vm(e),l0(e)},Ko)},MH=(e,t)=>{nx(e,t,!0).fold(()=>WU(e),Ko)},UH=(e,t)=>{e.addCommand("delete",()=>{FH(e,t)}),e.addCommand("forwardDelete",()=>{MH(e,t)})},sx=5,zH=400,ox=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),HH=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>sx||s>sx},VH=e=>{const t=Ao(),n=$t(!1),s=vf(o=>{e.dispatch("longpress",ft(_e({},o),{type:"longpress"})),n.set(!0)},zH);e.on("touchstart",o=>{ox(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),ox(o).each(r=>{t.on(i=>{HH(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",ft(_e({},o),{type:"tap"}))})},!0)},Um=(e,t)=>Fe(e,t.nodeName),WH=(e,t)=>ne(t)?!0:Ee(t)?!Um(e,t)&&!Mn(t):!1,jH=(e,t,n)=>U(Qy(_.fromDom(n),_.fromDom(t)),s=>Um(e,s.dom)),qH=(e,t)=>{if(ne(t)){if(t.nodeValue.length===0)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Um(e,t.nextSibling)))return!0}return!1},KH=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements();let r=n.getStart();const i=e.getBody();let a,c,f;const d=Sn(e);if(!r||!Ee(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||jH(o,i,r))return;const y=n.getRng(),C=y.startContainer,x=y.startOffset,v=y.endContainer,S=y.endOffset,w=dr(e);for(r=i.firstChild;r;)if(WH(o,r)){if(qH(o,r)){c=r,r=r.nextSibling,t.remove(c);continue}a||(a=t.create(d,lr(e)),r.parentNode.insertBefore(a,r),f=!0),c=r,r=r.nextSibling,a.appendChild(c)}else a=null,r=r.nextSibling;f&&w&&(y.setStart(C,x),y.setEnd(v,S),n.setRng(y),e.nodeChanged())},GH=e=>{e.on("NodeChange",re(KH,e))},rx=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,YH=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},XH=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],YH(e,o,rC(e)));n.content=o}},QH=e=>{const t="contenteditable",n=" "+G.trim(cR(e))+" ",s=" "+G.trim(rC(e))+" ",o=rx(n),r=rx(s),i=uR(e);i.length>0&&e.on("BeforeSetContent",a=>{XH(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];!o(f)&&!r(f)||(i.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},ZH=e=>Qi(_.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),ix=(e,t)=>{t.hasAttribute("data-mce-caret")&&(af(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},JH=(e,t)=>{const n=ZH(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),ix(e,n);return}Vh(n)&&(ix(e,n),e.undoManager.add())}},e3=e=>{e.on("keyup compositionstart",re(JH,e))},ax=wt,t3=(e,t,n)=>U0(t,e,n,mr,pr,ax),n3=(e,t,n)=>z0(t,e,n,r=>mr(r)||Yy(r),r=>pr(r)||Xy(r),ax),s3=e=>{const t=e.dom.create(Sn(e));return t.innerHTML='<br data-mce-bogus="1">',t},lx=(e,t,n)=>{const s=Ps(e.getBody()),o=re(Ff,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(L.fromRangeStart(n))){const a=_.fromDom(s3(e));t===1?xo(_.fromDom(r),a):Xn(_.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},o3=(e,t)=>{const n=t?Vt.Forwards:Vt.Backwards,s=e.selection.getRng();return t3(n,e,s).orThunk(()=>(lx(e,n,s),b.none()))},r3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return n3(n,e,s).orThunk(()=>(lx(e,n,s),b.none()))},cx=(e,t)=>o3(e,t).exists(n=>(Lo(e,n),!0)),ux=(e,t)=>r3(e,t).exists(n=>(Lo(e,n),!0)),fx=(e,t)=>H0(e,t,t?pr:mr),i3=e=>P(["figcaption"],yt(e)),a3=e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},l3=(e,t,n)=>{n?It(e,t):_h(e,t)},c3=(e,t,n,s)=>{const o=_.fromTag(n),r=_.fromTag("br");return ws(o,s),It(o,r),l3(e,o,t),a3(r)},u3=(e,t)=>{const n=re(nt,t);return hl(_.fromDom(e.container()),Ns,n).filter(i3)},f3=(e,t,n)=>t?oH(e.dom,n):sH(e.dom,n),d3=(e,t)=>{const n=_.fromDom(e.getBody()),s=L.fromRangeStart(e.selection.getRng()),o=Sn(e),r=lr(e);return u3(s,n).exists(()=>{if(f3(n,t,s)){const i=c3(n,t,o,r);return e.selection.setRng(i),!0}else return!1})},dx=(e,t)=>e.selection.isCollapsed()?d3(e,t):!1,mx={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},m3=e=>z(e,t=>_e(ft(_e({},mx),{action:Ie}),t)),p3=e=>z(e,t=>_e(ft(_e({},mx),{action:()=>b.none()}),t)),px=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,g3=(e,t)=>Ke(m3(e),n=>px(n,t)?[n]:[]),h3=(e,t)=>Ke(p3(e),n=>px(n,t)?[n]:[]),$e=(e,...t)=>()=>e.apply(null,t),Ia=(e,t)=>de(g3(e,t),n=>n.action()),gx=(e,t)=>tn(h3(e,t),n=>n.action()),hx=(e,t)=>{const n=t?Vt.Forwards:Vt.Backwards,s=e.selection.getRng();return U0(e,n,s,Ea,xa,ks).exists(o=>(Lo(e,o),!0))},bx=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return z0(e,n,s,Ea,xa,ks).exists(o=>(Lo(e,o),!0))},Cx=(e,t)=>H0(e,t,t?xa:Ea),yx=Ts.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),b3=e=>yx.none(e),$a=ft(_e({},yx),{none:b3}),C3=(e,t)=>vx(e,t,at),vx=(e,t,n)=>Ke(Yt(e),s=>eo(s,t)?n(s)?[s]:[]:vx(s,t,n)),y3=(e,t,n=pt)=>{if(n(t))return b.none();if(P(e,yt(t)))return b.some(t);const s=o=>eo(o,"table")||n(o);return Xi(t,e.join(","),s)},v3=(e,t)=>y3(["td","th"],e,t),E3=e=>C3(e,"th,td"),Ex=(e,t)=>tr(e,"table",t),zm=(e,t,n,s,o=at)=>{const r=s===1;if(!r&&n<=0)return $a.first(e[0]);if(r&&n>=e.length-1)return $a.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?$a.middle(t,a):zm(e,t,i,s,o)}},xx=(e,t)=>Ex(e,t).bind(n=>{const s=E3(n);return Te(s,r=>nt(e,r)).map(r=>({index:r,all:s}))}),x3=(e,t,n)=>xx(e,n).fold(()=>$a.none(e),o=>zm(o.all,e,o.index,1,t)),S3=(e,t,n)=>xx(e,n).fold(()=>$a.none(),o=>zm(o.all,e,o.index,-1,t)),w3=e=>tr(e,"[contenteditable]"),Sx=(e,t=!1)=>Vr(e)?e.dom.isContentEditable:w3(e).fold(K(t),n=>_3(n)==="true"),_3=e=>e.dom.contentEditable,k3=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),N3=(e,t)=>Ke(t,n=>{const s=k3(ir(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),T3=(e,t,n)=>X(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(a<i?o:r)}),b.none()),wx=(e,t,n,s,o)=>{const r=xn(_.fromDom(n),"td,th,caption").map(a=>a.dom),i=H(N3(e,r),a=>t(a,o));return T3(i,s,o).map(a=>a.cell)},A3=e=>e.bottom,R3=e=>e.top,P3=(e,t)=>e.y<t,O3=(e,t)=>e.y>t,D3=re(wx,A3,P3),B3=re(wx,R3,O3),I3=(e,t)=>Ut(t.getClientRects()).bind(n=>D3(e,n.left,n.top)).bind(n=>D0(iH(n),t)),$3=(e,t)=>Es(t.getClientRects()).bind(n=>B3(e,n.left,n.top)).bind(n=>D0(rH(n),t)),L3=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),F3=e=>e.breakType===Us.Wrap&&e.positions.length===0,M3=e=>e.breakType===Us.Br&&e.positions.length===1,_x=(e,t,n)=>{const s=e(t,n);return F3(s)||!Dt(n.getNode())&&M3(s)?!L3(e,t,s):s.breakAt.isNone()},U3=re(_x,Oa),z3=re(_x,Da),H3=(e,t,n)=>{const s=L.fromRangeStart(t);return oi(!e,n).exists(o=>o.isEqual(s))},V3=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return mC()&&H3(t,o,n)?(lo(r,e,n,!t,!1).each(i=>{Lo(e,i)}),!0):!1},W3=(e,t,n)=>I3(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>Pm(tH(e,L.before(t)),s.left))).getOr(L.before(t)),j3=(e,t,n)=>$3(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>Pm(nH(e,L.after(t)),s.left))).getOr(L.after(t)),kx=(e,t)=>{const n=t.getNode(e);return Ee(n)&&n.nodeName==="TABLE"?b.some(n):b.none()},q3=(e,t,n)=>{const s=Sn(t);t.undoManager.transact(()=>{const o=_.fromTag(s);ws(o,lr(t)),It(o,_.fromTag("br")),e?xo(_.fromDom(n),o):Xn(_.fromDom(n),o);const r=t.dom.createRng();r.setStart(o.dom,0),r.setEnd(o.dom,0),Lo(t,r)})},Nx=(e,t,n)=>{const s=kx(!!t,n),o=t===!1;s.fold(()=>Lo(e,n.toRange()),r=>oi(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>Lo(e,n.toRange()),i=>q3(t,e,r)))},K3=(e,t,n,s)=>{const o=e.selection.getRng(),r=L.fromRangeStart(o),i=e.getBody();if(!t&&U3(s,r)){const a=W3(i,n,r);return Nx(e,t,a),!0}else if(t&&z3(s,r)){const a=j3(i,n,r);return Nx(e,t,a),!0}else return!1},Tx=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),Ax=(e,t)=>Tx(e,t,V3),Rx=(e,t)=>Tx(e,t,K3),G3=e=>{const t=ci.exact(e,0,e,0);return mO(t)},Px=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>xD(o).map(r=>G3(r)),s=>(e.execCommand("mceTableInsertRowAfter"),Ox(e,t,s))),Ox=(e,t,n)=>Px(e,t,x3(n,Sx)),Y3=(e,t,n)=>Px(e,t,S3(n,Sx)),Dx=(e,t)=>{const n=["table","li","dl"],s=_.fromDom(e.getBody()),o=a=>{const c=yt(a);return nt(a,s)||P(n,c)},r=e.selection.getRng(),i=_.fromDom(t?r.endContainer:r.startContainer);return v3(i,o).map(a=>(Ex(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?Ox:Y3)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},X3=(e,t,n)=>{const s=vo().os;Ia([{keyCode:be.RIGHT,action:$e(cx,e,!0)},{keyCode:be.LEFT,action:$e(cx,e,!1)},{keyCode:be.UP,action:$e(ux,e,!1)},{keyCode:be.DOWN,action:$e(ux,e,!0)},{keyCode:be.RIGHT,action:$e(Ax,e,!0)},{keyCode:be.LEFT,action:$e(Ax,e,!1)},{keyCode:be.UP,action:$e(Rx,e,!1)},{keyCode:be.DOWN,action:$e(Rx,e,!0)},{keyCode:be.RIGHT,action:$e(hx,e,!0)},{keyCode:be.LEFT,action:$e(hx,e,!1)},{keyCode:be.UP,action:$e(bx,e,!1)},{keyCode:be.DOWN,action:$e(bx,e,!0)},{keyCode:be.RIGHT,action:$e(j0,e,t,!0)},{keyCode:be.LEFT,action:$e(j0,e,t,!1)},{keyCode:be.RIGHT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:$e(EH,e,t)},{keyCode:be.LEFT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:$e(xH,e,t)},{keyCode:be.UP,action:$e(dx,e,!1)},{keyCode:be.DOWN,action:$e(dx,e,!0)}],n).each(o=>{n.preventDefault()})},Q3=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&X3(e,t,n)})},as=(e,t)=>({container:e,offset:t}),Pc=rt.DOM,Oc=e=>t=>e===t?-1:0,Z3=e=>t=>e.isBlock(t)||P(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Hm=(e,t,n)=>{if(ne(e)&&t>=0)return b.some(as(e,t));{const s=rr(Pc);return b.from(s.backwards(e,t,Oc(e),n)).map(o=>as(o.container,o.container.data.length))}},J3=(e,t,n)=>{if(ne(e)&&t>=e.length)return b.some(as(e,t));{const s=rr(Pc);return b.from(s.forwards(e,t,Oc(e),n)).map(o=>as(o.container,0))}},Vm=(e,t,n)=>{if(!ne(e))return b.none();const s=e.textContent;if(t>=0&&t<=s.length)return b.some(as(e,t));{const o=rr(Pc);return b.from(o.backwards(e,t,Oc(e),n)).bind(r=>{const i=r.container.data;return Vm(r.container,t+i.length,n)})}},Bx=(e,t,n)=>{if(!ne(e))return b.none();const s=e.textContent;if(t<=s.length)return b.some(as(e,t));{const o=rr(Pc);return b.from(o.forwards(e,t,Oc(e),n)).bind(r=>Bx(r.container,t-s.length,n))}},Wm=(e,t,n,s,o)=>{const r=rr(e,Z3(e));return b.from(r.backwards(t,n,s,o))},e2=e=>e.collapsed&&e.startContainer.nodeType===3,Ix=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),$x=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,jm=(e,t)=>e.substring(t.length),t2=(e,t,n)=>{let s;for(s=t-1;s>=0;s--){const o=e.charAt(s);if($x(o))return b.none();if(o===n)break}return b.some(s)},n2=(e,t,n,s=0)=>{if(!e2(t))return b.none();const o=(i,a,c)=>t2(c,a,n).getOr(a),r=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Wm(e,t.startContainer,t.startOffset,o,r).bind(i=>{const a=t.cloneRange();if(a.setStart(i.container,i.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return b.none();const c=Ix(a);return c.lastIndexOf(n)!==0||jm(c,n).length<s?b.none():b.some({text:jm(c,n),range:a,triggerChar:n})})},Lx=(e,t,n,s=0)=>kD(_.fromDom(t.startContainer)).fold(()=>n2(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=Ix(r);return b.some({range:r,text:jm(i,n),triggerChar:n})}),s2=e=>e.nodeType===eh,o2=e=>e.nodeType===Hi,Fx=e=>{if(s2(e))return as(e,e.data.length);{const t=e.childNodes;return t.length>0?Fx(t[t.length-1]):as(e,t.length)}},Mx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Mx(n[t],0):n.length>0&&o2(e)&&n.length===t?Fx(n[n.length-1]):as(e,t)},r2=(e,t)=>Wm(e,t.container,t.offset,(n,s)=>s===0?-1:s,e.getRoot()).filter(n=>{const s=n.container.data.charAt(n.offset-1);return!$x(s)}).isSome(),i2=e=>t=>{const n=Mx(t.startContainer,t.startOffset);return!r2(e,n)},a2=(e,t,n)=>tn(n.triggerChars,s=>Lx(e,t,s)),l2=(e,t)=>{const n=t(),s=e.selection.getRng();return a2(e.dom,s,n).bind(o=>Ux(e,t,o))},Ux=(e,t,n,s={})=>{const o=t(),i=e.selection.getRng().startContainer.nodeValue,a=H(o.lookupByChar(n.triggerChar),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>i2(e.dom))(n.range,i,n.text));if(a.length===0)return b.none();const c=Promise.all(z(a,f=>f.fetch(n.text,f.maxResults,s).then(p=>({matchText:n.text,items:p,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return b.some({lookupData:c,context:n})};var ls;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ls||(ls={}));const qm=(e,t,n)=>e.stype===ls.Error?t(e.serror):n(e.svalue),c2=e=>{const t=[],n=[];return R(e,s=>{qm(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},u2=(e,t)=>e.stype===ls.Error?{stype:ls.Error,serror:t(e.serror)}:e,f2=(e,t)=>e.stype===ls.Value?{stype:ls.Value,svalue:t(e.svalue)}:e,d2=(e,t)=>e.stype===ls.Value?t(e.svalue):e,m2=(e,t)=>e.stype===ls.Error?t(e.serror):e,zx=e=>({stype:ls.Value,svalue:e}),Hx=e=>({stype:ls.Error,serror:e}),jt={fromResult:e=>e.fold(Hx,zx),toResult:e=>qm(e,dn.error,dn.value),svalue:zx,partition:c2,serror:Hx,bind:d2,bindError:m2,map:f2,mapError:u2,fold:qm},Km=e=>ut(e)&&es(e).length>100?" removed due to size":JSON.stringify(e,null,2),p2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return z(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Dc=(e,t)=>jt.serror([{path:e,getErrorInfo:t}]),g2=(e,t,n)=>Dc(e,()=>'Could not find valid *required* value for "'+t+'" in '+Km(n)),h2=(e,t)=>Dc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),b2=(e,t,n)=>Dc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Km(t)),C2=(e,t)=>Dc(e,K(t)),y2=(e,t,n,s)=>lt(n,s).fold(()=>b2(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),v2=(e,t)=>({extract:(o,r)=>lt(r,e).fold(()=>h2(o,e),a=>y2(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+es(t)}),E2=(e,t)=>t,x2=(e,t)=>Ys(e)&&Ys(t)?Bc(e,t):t,Vx=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Fe(o,r)&&(n[r]=e(n[r],o[r]))}return n},Bc=Vx(x2),S2=Vx(E2),Wx=()=>({tag:"required",process:{}}),w2=e=>({tag:"defaultedThunk",process:e}),jx=e=>w2(K(e)),_2=()=>({tag:"option",process:{}}),k2=(e,t)=>e.length>0?jt.svalue(Bc(t,S2.apply(void 0,e))):jt.svalue(t),qx=e=>Ot(jt.serror,Ue)(e),N2={consolidateObj:(e,t)=>{const n=jt.partition(e);return n.errors.length>0?qx(n.errors):k2(n.values,t)},consolidateArr:e=>{const t=jt.partition(e);return t.errors.length>0?qx(t.errors):jt.svalue(t.values)}},T2=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),A2=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Kx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Gm=e=>{const t=(s,o)=>jt.bindError(e(o),r=>C2(s,r)),n=K("val");return{extract:t,toString:n}},R2=Gm(jt.svalue),P2=(e,t,n,s)=>lt(t,n).fold(()=>g2(e,n,t),s),Gx=(e,t,n,s)=>{const o=lt(e,t).getOrThunk(()=>n(e));return s(o)},O2=(e,t,n)=>n(lt(e,t)),D2=(e,t,n,s)=>{const o=lt(e,t).map(r=>r===!0?n(e):r);return s(o)},B2=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>jt.svalue(b.none()),c=>{const f=o.extract(t.concat([s]),c);return jt.map(f,b.some)});switch(e.tag){case"required":return P2(t,n,s,r);case"defaultedThunk":return Gx(n,s,e.process,r);case"option":return O2(n,s,i);case"defaultedOptionThunk":return D2(n,s,e.process,i);case"mergeWithThunk":return Gx(n,s,K({}),a=>{const c=Bc(e.process(n),a);return r(c)})}},I2=(e,t,n)=>{const s={},o=[];for(const r of n)Kx(r,(i,a,c,f)=>{const d=B2(c,e,t,i,f);jt.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?jt.serror(o):jt.svalue(s)},Ym=e=>({extract:(s,o)=>I2(s,o,e),toString:()=>{const s=z(e,o=>Kx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),Yx=e=>({extract:(s,o)=>{const r=z(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return N2.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),$2=e=>Gm(t=>e(t).fold(jt.serror,jt.svalue)),L2=(e,t,n)=>{const s=t.extract([e],n);return jt.mapError(s,o=>({input:n,errors:o}))},F2=(e,t,n)=>jt.toResult(L2(e,t,n)),M2=e=>`Errors: 
`+p2(e.errors).join(`
`)+`

Input object: `+Km(e.input),Xx=(e,t)=>v2(e,Fi(t,Ym)),U2=K(R2),Ic=(e,t)=>Gm(n=>{const s=typeof n;return e(n)?jt.svalue(n):jt.serror(`Expected type: ${t} but got: ${s}`)}),z2=Ic(yn,"number"),$c=Ic(he,"string"),H2=Ic(Cs,"boolean"),Xm=Ic(Ye,"function"),La=T2,Qx=A2,V2=e=>$2(t=>P(e,t)?dn.value(t):dn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Zx=(e,t)=>La(e,e,Wx(),t),Jx=e=>Zx(e,$c),eS=e=>Zx(e,Xm),W2=(e,t)=>La(e,e,Wx(),Yx(t)),Qm=(e,t)=>La(e,e,_2(),t),Lc=e=>Qm(e,$c),j2=e=>Qm(e,Xm),q2=(e,t)=>La(e,e,jx(t),U2()),Ci=(e,t,n)=>La(e,e,jx(t),n),tS=(e,t)=>Ci(e,t,z2),K2=(e,t)=>Ci(e,t,$c),nS=(e,t,n)=>Ci(e,t,V2(n)),Zm=(e,t)=>Ci(e,t,H2),Jm=(e,t)=>Ci(e,t,Xm),G2=(e,t,n)=>Ci(e,t,Yx(n)),Y2=Jx("type"),X2=eS("fetch"),ep=eS("onAction"),Q2=Jm("onSetup",()=>Ie),Z2=Lc("text"),J2=Lc("icon"),eV=Lc("tooltip"),tV=Lc("label"),nV=Zm("active",!1),sV=Zm("enabled",!0),sS=Zm("primary",!1),oV=e=>q2("columns",e),Fa=e=>K2("type",e),rV=Ym([Y2,Jx("ch"),tS("minChars",1),oV(1),tS("maxResults",10),j2("matches"),X2,ep,G2("highlightOn",[],$c)]),iV=e=>F2("Autocompleter",rV,e),tp=[sV,eV,J2,Z2,Q2],oS=[nV].concat(tp),aV=[Jm("predicate",pt),nS("scope","node",["node","editor"]),nS("position","selection",["node","selection","line"])],lV=tp.concat([Fa("contextformbutton"),sS,ep,Qx("original",St)]),cV=oS.concat([Fa("contextformbutton"),sS,ep,Qx("original",St)]),uV=tp.concat([Fa("contextformbutton")]),fV=oS.concat([Fa("contextformtogglebutton")]),dV=Xx("type",{contextformbutton:lV,contextformtogglebutton:cV});Ym([Fa("contextform"),Jm("initValue",K("")),tV,W2("commands",dV),Qm("launch",Xx("type",{contextformbutton:uV,contextformtogglebutton:fV}))].concat(aV));const mV=e=>{const t=e.ui.registry.getAll().popups,n=Fi(t,i=>iV(i).fold(a=>{throw new Error(M2(a))},St)),s=Eg(Fu(n,i=>i.ch)),o=vg(n);return{dataset:n,triggerChars:s,lookupByChar:i=>H(o,a=>a.ch===i)}},pV=(e,t)=>{const n=vf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},gV=e=>{const t=Ao(),n=$t(!1),s=t.isSet,o=()=>{s()&&(rM(e),zP(e),n.set(!1),t.clear())},r=f=>{s()||(oM(e,f.range),t.set({triggerChar:f.triggerChar,matchLength:f.text.length}))},i=Go(()=>mV(e)),a=f=>t.get().map(d=>Lx(e.dom,e.selection.getRng(),d.triggerChar).bind(p=>Ux(e,i,p,f))).getOrThunk(()=>l2(e,i)),c=f=>{a(f).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(y=>{const C=d.context;y.triggerChar===C.triggerChar&&(C.text.length-y.matchLength>=10?o():(t.set(ft(_e({},y),{matchLength:C.text.length})),n.get()?UP(e,{lookupData:p}):(n.set(!0),MP(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(f,d)=>{const p=ut(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),pV(e,{cancelIfNecessary:o,load:c})},rS=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Ie,inputType:n},i=ob(new InputEvent(e));return t.dispatch(e,_e(_e(_e({},i),r),s))},Fc=rS("input"),Mc=rS("beforeinput"),hV=(e,t,n)=>{const s=n.keyCode===be.BACKSPACE?"deleteContentBackward":"deleteContentForward";gx([{keyCode:be.BACKSPACE,action:$e(tx,e)},{keyCode:be.BACKSPACE,action:$e(km,e,!1)},{keyCode:be.DELETE,action:$e(km,e,!0)},{keyCode:be.BACKSPACE,action:$e(_m,e,!1)},{keyCode:be.DELETE,action:$e(_m,e,!0)},{keyCode:be.BACKSPACE,action:$e(Im,e,t,!1)},{keyCode:be.DELETE,action:$e(Im,e,t,!0)},{keyCode:be.BACKSPACE,action:$e(Id,e,!1)},{keyCode:be.DELETE,action:$e(Id,e,!0)},{keyCode:be.BACKSPACE,action:$e(Nm,e,!1)},{keyCode:be.DELETE,action:$e(Nm,e,!0)},{keyCode:be.BACKSPACE,action:$e(Fm,e,!1)},{keyCode:be.DELETE,action:$e(Fm,e,!0)},{keyCode:be.BACKSPACE,action:$e(Sm,e,!1)},{keyCode:be.DELETE,action:$e(Sm,e,!0)},{keyCode:be.BACKSPACE,action:$e(xm,e,!1)},{keyCode:be.DELETE,action:$e(xm,e,!0)},{keyCode:be.BACKSPACE,action:$e($m,e,!1)},{keyCode:be.DELETE,action:$e($m,e,!0)}],n).each(o=>{n.preventDefault(),Mc(e,s).isDefaultPrevented()||(o(),Fc(e,s))})},bV=(e,t)=>{Ia([{keyCode:be.BACKSPACE,action:$e(y0,e)},{keyCode:be.DELETE,action:$e(y0,e)}],t)},CV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&hV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()===!1&&bV(e,n)})},yV=e=>{for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},Ma=(e,t)=>{let n,s=t;const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=yV(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Xt),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new zt(t,t);for(;n=a.current();){if(ne(n)){i.setStart(n,0),i.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}s=n,n=a.next()}n||(i.setStart(s,0),i.setEnd(s,0))}else Dt(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),ya(e,i)},vV=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},np=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),EV=e=>np(e).fold(K(""),t=>t.nodeName.toUpperCase()),xV=e=>np(e).filter(t=>Zi(_.fromDom(t))).isSome(),SV=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,wV=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},iS=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,aS=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),_V=e=>aS(e)&&aS(e.parentNode),Uc=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},zc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Ee(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},kV=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng();if(n===e.getBody())return;_V(n)&&(o="LI");let a=t(o);if(zc(n,s,!0)&&zc(n,s,!1))if(iS(n,"LI")){const c=Uc(n);r.insertAfter(a,c),wV(n)?r.remove(c):r.remove(n)}else r.replace(a,n);else if(zc(n,s,!0))iS(n,"LI")?(r.insertAfter(a,Uc(n)),a.appendChild(r.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),r.remove(s);else if(zc(n,s,!1))r.insertAfter(a,Uc(n)),r.remove(s);else{n=Uc(n);const c=i.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&SV(f,"LI")?(a=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(a,n)),r.remove(s)}Ma(e,a)},NV=e=>{R(lb(_.fromDom(e),In),t=>{const n=t.dom;n.nodeValue=_o(n.nodeValue)})},TV=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),AV=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),sp=e=>{e.innerHTML='<br data-mce-bogus="1">'},op=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,lS=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",RV=(e,t,n)=>{let s=n;const o=[];let r;if(!!s){for(;s=s.firstChild;){if(e.isBlock(s))return;Ee(s)&&!t[s.nodeName.toLowerCase()]&&o.push(s)}for(r=o.length;r--;)s=o[r],(!s.hasChildNodes()||s.firstChild===s.lastChild&&s.firstChild.nodeValue===""||TV(e,s))&&e.remove(s)}},rp=(e,t,n)=>ne(t)===!1?n:e?n===1&&t.data.charAt(n-1)===Kt?0:n:n===t.data.length-1&&t.data.charAt(n)===Kt?t.data.length:n,PV=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,rp(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,rp(!1,e.endContainer,e.endOffset)),t},OV=e=>{do ne(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},cS=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},DV=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(c=>{const f=Sh(_.fromDom(t)),d=_e(_e({},f),c);s.setStyles(t,d)});const o=b.from(n.class).map(c=>c.split(/\s+/)),r=b.from(t.className).map(c=>H(c.split(/\s+/),f=>f!==""));En(o,r,(c,f)=>{const d=H(f,y=>!P(c,y)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=Mi(n,(c,f)=>!P(i,f));s.setAttribs(t,a)},Ua=(e,t)=>{if(Sn(e).toLowerCase()===t.tagName.toLowerCase()){const s=lr(e);DV(e,t,s)}},BV=(e,t,n,s,o)=>{let r,i,a,c,f,d;const p=e.dom,y=cS(p,s);if(i=p.getParent(s,p.isBlock),!i||!lS(p,i)){if(i=i||y,i===e.getBody()||AV(i)?d=i.nodeName.toLowerCase():d=i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return r=p.create(t),Ua(e,r),i.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(c=s;c.parentNode!==i;)c=c.parentNode;for(;c&&!p.isBlock(c);)a=c,c=c.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(r=p.create(t),Ua(e,r),a.parentNode.insertBefore(r,a),c=a;c&&!p.isBlock(c);)f=c.nextSibling,r.appendChild(c),c=f;n.setStart(s,o),n.setEnd(s,o)}}return s},IV=(e,t)=>{t.normalize();const n=t.lastChild;(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},$V=(e,t)=>{let n,s,o,r,i,a,c,f,d;const p=e.dom,y=e.schema,C=y.getNonEmptyElements(),x=e.selection.getRng(),v=Sn(e),S=W=>{let q=s,Z,ee,xe;const ae=y.getTextInlineElements();if(W||f==="TABLE"||f==="HR"?Z=p.create(W||v):Z=r.cloneNode(!1),xe=Z,f1(e)===!1)p.setAttrib(Z,"style",null),p.setAttrib(Z,"class",null);else do if(ae[q.nodeName]){if(Bs(q)||Mn(q))continue;ee=q.cloneNode(!1),p.setAttrib(ee,"id",""),Z.hasChildNodes()?(ee.appendChild(Z.firstChild),Z.appendChild(ee)):(xe=ee,Z.appendChild(ee))}while((q=q.parentNode)&&q!==$);return Ua(e,Z),sp(xe),Z},w=W=>{let q,Z;const ee=rp(W,s,o);if(ne(s)&&(W?ee>0:ee<s.nodeValue.length))return!1;if(s.parentNode===r&&d&&!W||W&&Ee(s)&&s===r.firstChild)return!0;if(op(s,"TABLE")||op(s,"HR"))return d&&!W||!d&&W;const xe=new zt(s,r);for(ne(s)&&(W&&ee===0?xe.prev():!W&&ee===s.nodeValue.length&&xe.next());q=xe.current();){if(Ee(q)){if(!q.getAttribute("data-mce-bogus")&&(Z=q.nodeName.toLowerCase(),C[Z]&&Z!=="br"))return!1}else if(ne(q)&&!nr(q.nodeValue))return!1;W?xe.prev():xe.next()}return!0},A=()=>{/^(H[1-6]|PRE|FIGURE)$/.test(f)&&te!=="HGROUP"?i=S(v):i=S(),d1(e)&&lS(p,c)&&p.isEmpty(r)?i=p.split(c,r):p.insertAfter(i,r),Ma(e,i)};Yl(p,x).each(W=>{x.setStart(W.startContainer,W.startOffset),x.setEnd(W.endContainer,W.endOffset)}),s=x.startContainer,o=x.startOffset;const M=!!(t&&t.shiftKey),B=!!(t&&t.ctrlKey);Ee(s)&&s.hasChildNodes()&&(d=o>s.childNodes.length-1,s=s.childNodes[Math.min(o,s.childNodes.length-1)]||s,d&&ne(s)?o=s.nodeValue.length:o=0);const $=cS(p,s);if(!$)return;M||(s=BV(e,v,x,s,o)),r=p.getParent(s,p.isBlock),c=r?p.getParent(r.parentNode,p.isBlock):null,f=r?r.nodeName.toUpperCase():"";const te=c?c.nodeName.toUpperCase():"";if(te==="LI"&&!B&&(r=c,c=c.parentNode,f=te),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(r)){kV(e,S,c,r,v);return}r!==e.getBody()&&(Gr(r)?(i=af(r),p.isEmpty(r)&&sp(r),Ua(e,i),Ma(e,i)):w()?A():w(!0)?(i=r.parentNode.insertBefore(S(),r),Ma(e,op(r,"HR")?i:r)):(n=PV(x).cloneRange(),n.setEndAfter(r),a=n.extractContents(),NV(a),OV(a),i=a.firstChild,p.insertAfter(a,r),RV(p,C,i),IV(p,r),p.isEmpty(r)&&sp(r),i.normalize(),p.isEmpty(i)?(p.remove(i),A()):(Ua(e,i),Ma(e,i))),p.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},LV=(e,t,n)=>{const s=new zt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||o.length>0)return!0},uS=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),ya(e,s)},FV=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i;Yl(s,o).each(C=>{o.setStart(C.startContainer,C.startOffset),o.setEnd(C.endContainer,C.endOffset)});let a=o.startOffset,c=o.startContainer;if(c.nodeType===1&&c.hasChildNodes()){const C=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,C&&c.nodeType===3?a=c.nodeValue.length:a=0}let f=s.getParent(c,s.isBlock);const d=f?s.getParent(f.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",y=!!(t&&t.ctrlKey);p==="LI"&&!y&&(f=d),c&&c.nodeType===3&&a>=c.nodeValue.length&&(LV(e.schema,c,f)||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Nf(s,o,r),uS(e,r,i),e.undoManager.add()},MV=(e,t)=>{const n=_.fromTag("br");Xn(_.fromDom(t),n),e.undoManager.add()},UV=(e,t)=>{HV(e.getBody(),t)||xo(_.fromDom(t),_.fromTag("br"));const n=_.fromTag("br");xo(_.fromDom(t),n),uS(e,n.dom,!1),e.undoManager.add()},zV=e=>Dt(e.getNode()),HV=(e,t)=>zV(L.after(t))?!0:os(e,L.after(t)).map(n=>Dt(n.getNode())).getOr(!1),fS=e=>e&&e.nodeName==="A"&&"href"in e,VV=e=>e.fold(pt,fS,fS,pt),WV=e=>{const t=re(yr,e),n=L.fromRangeStart(e.selection.getRng());return Ms(t,e.getBody(),n).filter(VV)},jV=(e,t)=>{t.fold(Ie,re(MV,e),re(UV,e),Ie)},dS=(e,t)=>{const n=WV(e);n.isSome()?n.each(re(jV,e)):FV(e,t)},mS=(e,t)=>np(e).filter(n=>t.length>0&&eo(_.fromDom(n),t)).isSome(),qV=e=>mS(e,c1(e)),KV=e=>mS(e,u1(e)),Zn=Ts.generate([{br:[]},{block:[]},{none:[]}]),GV=(e,t)=>KV(e),pS=e=>(t,n)=>xV(t)===e,gS=(e,t)=>(n,s)=>EV(n)===e.toUpperCase()===t,Hc=e=>gS("pre",e),YV=()=>gS("summary",!0),Vc=e=>(t,n)=>l1(t)===e,XV=(e,t)=>qV(e),Wc=(e,t)=>t,QV=e=>{const t=Sn(e),n=vV(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},cs=(e,t)=>(n,s)=>X(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),ZV=(e,t)=>_0([cs([GV],Zn.none()),cs([YV()],Zn.br()),cs([Hc(!0),Vc(!1),Wc],Zn.br()),cs([Hc(!0),Vc(!1)],Zn.block()),cs([Hc(!0),Vc(!0),Wc],Zn.block()),cs([Hc(!0),Vc(!0)],Zn.br()),cs([pS(!0),Wc],Zn.br()),cs([pS(!0)],Zn.block()),cs([XV],Zn.br()),cs([Wc],Zn.br()),cs([QV],Zn.block())],[e,!!(t&&t.shiftKey)]).getOr(Zn.none()),ip=(e,t)=>{ZV(e,t).fold(()=>{Ne(t)&&Mc(e,"insertLineBreak").isDefaultPrevented()||(dS(e,t),Ne(t)&&Fc(e,"insertLineBreak"))},()=>{Ne(t)&&Mc(e,"insertParagraph").isDefaultPrevented()||($V(e,t),Ne(t)&&Fc(e,"insertParagraph"))},Ie)},JV=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),hF(e.undoManager),e.undoManager.transact(()=>{e.selection.isCollapsed()===!1&&vm(e),ip(e,t)}))},e6=e=>{e.on("keydown",t=>{t.keyCode===be.ENTER&&JV(e,t)})},t6=(e,t,n)=>{Ia([{keyCode:be.END,action:$e(fx,e,!0)},{keyCode:be.HOME,action:$e(fx,e,!1)},{keyCode:be.END,action:$e(Cx,e,!0)},{keyCode:be.HOME,action:$e(Cx,e,!1)},{keyCode:be.END,action:$e(Rc,e,!0,t)},{keyCode:be.HOME,action:$e(Rc,e,!1,t)}],n).each(s=>{n.preventDefault()})},n6=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&t6(e,t,n)})},s6=e=>{e.on("input",t=>{t.isComposing===!1&&mB(e)})},o6=vo(),r6=(e,t,n)=>{Ia([{keyCode:be.PAGE_UP,action:$e(Rc,e,!1,t)},{keyCode:be.PAGE_DOWN,action:$e(Rc,e,!0,t)}],n)},hS=e=>e.stopImmediatePropagation(),bS=e=>e.keyCode===be.PAGE_UP||e.keyCode===be.PAGE_DOWN,CS=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",hS,!0):!n&&e.get()&&t.off("NodeChange",hS),e.set(n)},i6=(e,t)=>{if(o6.os.isMacOS())return;const n=$t(!1);e.on("keydown",s=>{bS(s)&&CS(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()===!1&&r6(e,t,s),bS(s)&&n.get()&&(CS(n,e,!1),e.nodeChanged())})},yS=(e,t)=>{const n=t.container(),s=t.offset();return ne(n)?(n.insertData(s,e),b.some(L(n,s+e.length))):$l(t).map(o=>{const r=_.fromText(e);return t.isAtEnd()?xo(o,r):Xn(o,r),L(r.dom,e.length)})},a6=re(yS,Xt),l6=re(yS," "),c6=e=>t=>t.fold(n=>Os(e.dom,L.before(n)),n=>mn(n),n=>Ds(n),n=>os(e.dom,L.after(n))),u6=(e,t)=>n=>rB(e,n)?a6(t):l6(t),f6=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),d6=e=>{const t=L.fromRangeStart(e.selection.getRng()),n=_.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(yr,e),o=L.fromRangeStart(e.selection.getRng());return Ms(s,e.getBody(),o).bind(c6(n)).map(r=>()=>u6(n,t)(r).each(f6(e)))}else return b.none()},m6=(e,t)=>{gx([{keyCode:be.SPACEBAR,action:$e(d6,e)}],t).each(n=>{t.preventDefault(),Mc(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Fc(e,"insertText",{data:" "}))})},p6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&m6(e,t)})},g6=e=>pR(e)?[{keyCode:be.TAB,action:$e(Dx,e,!0)},{keyCode:be.TAB,shiftKey:!0,action:$e(Dx,e,!1)}]:[],h6=(e,t)=>{Ia([...g6(e)],t).each(n=>{t.preventDefault()})},b6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&h6(e,t)})},C6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),gV(e),ao(e))return $t(null);{const t=vH(e);return e3(e),Q3(e,t),CV(e,t),e6(e),p6(e),s6(e),b6(e),n6(e,t),i6(e,t),t}};class y6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!id(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||ql(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&ql(t)&&(t.selection.getNode().nodeName==="IMG"?Un.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t){const n=this.editor.selection;let s,o,r;this.editor.initialized&&n&&!U1(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),s=n.getStart(!0)||r,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,r))&&(s=r),o=[],this.editor.dom.getParent(s,i=>{if(i===r)return!0;o.push(i)}),t=t||{},t.element=s,t.parents=o,this.editor.dispatch("NodeChange",t))}isSameElementPath(t){let n;const s=this.editor,o=ot(s.dom.getParents(t,at,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const vS="x-tinymce/html",jc=K(vS),ap="<!-- "+vS+" -->",v6=e=>ap+e,E6=e=>e.replace(ap,""),ES=e=>e.indexOf(ap)!==-1,x6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),S6=(e,t)=>{let n="<"+e;const s=Fu(t,(o,r)=>r+'="'+ko.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},w6=(e,t,n)=>{const s=e.split(/\n\n/),o=S6(t,n),r="</"+t+">",i=z(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:z(i,a).join("")},xS="%MCEPASTEBIN%",_6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},xS);tt.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},k6=(e,t)=>{const n=e.dom;if(lp(e)){let s;const o=t.get();for(;s=lp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},lp=e=>e.dom.get("mcepastebin"),N6=e=>e&&e.id==="mcepastebin",T6=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=H(e.getBody().childNodes,N6);R(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},SS=e=>e===xS,A6=e=>{const t=$t(null);return{create:()=>_6(e,t),remove:()=>k6(e,t),getEl:()=>lp(e),getHtml:()=>T6(e),getLastRng:t.get}},wS=(e,t)=>(G.each(t,n=>{Bn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),R6=e=>{const t=To(),n=mi({},t);let s="";const o=t.getVoidElements(),r=G.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,d=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())&&(c=c.firstChild))do a(c);while(c=c.next);i[f]&&d.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=wS(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},_S=e=>(e=wS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Xt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),P6=e=>{let t=0;return()=>e+t++},O6=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(n,t)?"image/"+n[t]:"image/"+t},D6=(e,t)=>{const n=mi({},e.schema);n.addNodeFilter("meta",o=>{G.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Do({validate:!0},e.schema).serialize(s)},kS=(e,t)=>({content:e,cancelled:t}),B6=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=VP(e,s,n);return kS(o.node.innerHTML,o.isDefaultPrevented())},I6=(e,t,n)=>{const s=HP(e,t,n),o=D6(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?B6(e,o,n):kS(o,s.isDefaultPrevented())},$6=(e,t,n)=>I6(e,t,n),cp=(e,t)=>(e.insertContent(t,{merge:oR(e),paste:!0}),!0),up=e=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e),L6=(e,t)=>up(t)&&U(iC(e),n=>Ng(t.toLowerCase(),`.${n.toLowerCase()}`)),F6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),M6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),U6=(e,t,n)=>!e.selection.isCollapsed()&&up(t)?M6(e,t,n):!1,z6=(e,t,n)=>L6(e,t)?F6(e,t,n):!1,H6=(e,t)=>{G.each([U6,z6,cp],n=>n(e,t,cp)!==!0)},V6=(e,t,n)=>{n||!rR(e)?cp(e,t):H6(e,t)},W6=P6("mceclip"),NS=(e,t,n,s)=>{const o=$6(e,t,n);o.cancelled===!1&&V6(e,o.content,s)},qc=(e,t,n)=>{const s=n||ES(t);NS(e,E6(t),s,!1)},fp=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=Yh(n,aR(e)),o=w6(s,Sn(e),lr(e));NS(e,o,!1,!0)},TS=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},yi=(e,t)=>t in e&&e[t].length>0,AS=e=>yi(e,"text/html")||yi(e,"text/plain"),j6=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ne(n)?e.dom.encode(n[1]):null},q6=(e,t,n,s)=>{const o=W6(),r=Yb(e)&&Ne(n.name),i=r?j6(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},K6=(e,t)=>{const{data:n,type:s}=gc(t.uri),o=t.file,r=e.editorUpload.blobCache,i=r.getByData(n,s),a=i!=null?i:q6(e,r,o,n);qc(e,`<img src="${a.blobUri()}">`,!1)},G6=e=>e.type==="paste",Y6=e=>Promise.all(z(e,t=>fE(t).then(n=>({file:t,uri:n})))),X6=e=>{const t=iC(e);return n=>qn(n.type,"image/")&&U(t,s=>O6(s)===n.type)},Q6=(e,t)=>{const n=t.items?Ke(gt(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?gt(t.files):[];return H(n.length>0?n:s,X6(e))},RS=(e,t,n)=>{const s=G6(t)?t.clipboardData:t.dataTransfer;if(Bl(e)&&s){const o=Q6(e,s);if(o.length>0)return t.preventDefault(),Y6(o).then(r=>{n&&e.selection.setRng(n),R(r,i=>{K6(e,i)})}),!0}return!1},Z6=e=>{var t,n;return tt.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},J6=e=>be.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,PS=(e,t,n,s)=>{let o=_S(n);const r=yi(t,jc())||ES(n),i=!r&&x6(o),a=up(o);(SS(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(yi(t,"text/plain")&&i?o=t["text/plain"]:o=R6(o)),!SS(o)&&(s?fp(e,o):qc(e,o,r))},eW=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{J6(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||Z6(r))return;const i=n.get()==="text"||s;s=!1;const a=TS(r.clipboardData);!AS(a)&&RS(e,r,o())||(yi(a,"text/html")?(r.preventDefault(),PS(e,a,a["text/html"],i)):(t.create(),Un.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),PS(e,a,c,i)},0)))})},tW=e=>{const t=o=>qn(o,"webkit-fake-url"),n=o=>qn(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Bl(e)&&s(i))for(const a of o){const c=a.attr("src");he(c)&&!a.attr("data-mce-object")&&c!==tt.transparentSrc&&(t(c)||!lR(e)&&n(c))&&a.remove()}})},nW=(e,t,n)=>{eW(e,t,n),tW(e)},sW=(e,t)=>{t.get()==="text"?(t.set("html"),ry(e,!1)):(t.set("text"),ry(e,!0)),e.focus()},oW=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{sW(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&qc(e,s.html,s.internal),s.text&&fp(e,s.text)})},rW=(e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(jc(),t),!0}catch{return!1}},OS=(e,t,n,s)=>{rW(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},DS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Un.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},BS=e=>({html:v6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),iW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),IS=e=>!e.selection.isCollapsed()||iW(e),aW=e=>t=>{!t.isDefaultPrevented()&&IS(e)&&OS(t,BS(e),DS(e),()=>{if(tt.browser.isChromium()||tt.browser.isFirefox()){const n=e.selection.getRng();Un.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},lW=e=>t=>{!t.isDefaultPrevented()&&IS(e)&&OS(t,BS(e),DS(e),Ie)},cW=e=>{e.on("cut",aW(e)),e.on("copy",lW(e))},$S=(e,t)=>{var n,s;return ui.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},uW=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},LS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},fW=e=>U(e.files,t=>/^image\//.test(t.type)),dW=(e,t)=>{J1(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Bl(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&fW(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=$S(e,n);if(Mt(s))return;const o=TS(n.dataTransfer),r=yi(o,jc());if((!AS(o)||uW(o))&&RS(e,n,s))return;const i=o[jc()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Un.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),LS(e,s);const c=_S(a);o["text/html"]?qc(e,c,r):fp(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Bl(e)&&t.get()===!1&&(n.preventDefault(),LS(e,$S(e,n))),n.type==="dragend"&&t.set(!1)})},mW=e=>{const t=o=>r=>{o(e,r)},n=eR(e);Ye(n)&&e.on("PastePreProcess",t(n));const s=tR(e);Ye(s)&&e.on("PastePostProcess",t(s))},pW=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},gW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,FS=e=>G.trim(e).replace(gW,zl).toLowerCase(),hW=(e,t,n)=>{const s=nR(e);if(n||s==="all"||!sR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,d)=>{const p=r.parseStyle(r.decode(f)),y={};for(let x=0;x<o.length;x++){const v=p[o[x]];let S=v,w=r.getStyle(i,o[x],!0);/color/.test(o[x])&&(S=FS(S),w=FS(w)),w!==S&&(y[o[x]]=v)}const C=r.serializeStyle(y,"span");return C?c+' style="'+C+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},bW=e=>{(tt.browser.isChromium()||tt.browser.isSafari())&&pW(e,hW)},CW=e=>{const t=$t(!1),n=$t(iR(e)?"text":"html"),s=A6(e);bW(e),oW(e,n),mW(e),e.on("PreInit",()=>{cW(e),dW(e,t),nW(e,s,n)})},yW=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},vW=e=>{e.parser.addNodeFilter("details",t=>{R(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{R(t,n=>{const s=n.attr("data-mce-open");n.attr("open",he(s)?s:null),n.attr("data-mce-open",null)})})},EW=e=>{yW(e),vW(e)},MS=e=>Ee(e)&&zh(_.fromDom(e)),xW=e=>{const t=e.selection.getRng(),n=L.fromRangeStart(t),s=L.fromRangeEnd(t);if(L.isElementPosition(n)){const o=n.container();MS(o)&&mn(o).each(r=>t.setStart(r.container(),r.offset()))}if(L.isElementPosition(s)){const o=n.container();MS(o)&&Ds(o).each(r=>t.setEnd(r.container(),r.offset()))}e.selection.setRng(Ud(t))},SW=e=>{e.on("click",t=>{t.detail>=3&&xW(e)})};var za;(function(e){e.Before="before",e.After="after"})(za||(za={}));const wW=(e,t)=>Math.abs(e.left-t),_W=(e,t)=>Math.abs(e.right-t),kW=(e,t)=>e>=t.top&&e<=t.bottom,NW=(e,t)=>e.top<t.bottom&&e.bottom>t.top,TW=(e,t)=>{const n=EA(e,t)/Math.min(e.height,t.height);return NW(e,t)&&n>.5},AW=(e,t)=>{const n=H(e,s=>kW(t,s));return vA(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=Ce(e,i=>TW(i,s));return[o,r]})},RW=(e,t)=>({node:e.node,position:wW(e,t)<_W(e,t)?za.Before:za.After}),PW=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),dp=(e,t,n)=>{const s=d=>ts(d.node)?b.some(d):Ee(d.node)?dp(gt(d.node.childNodes),t,n):b.none(),o=(d,p)=>{if(d.length>=2){const y=s(d[0]).getOr(d[0]),C=s(d[1]).getOr(d[1]);if(Math.abs(p(y,t,n)-p(C,t,n))<2){if(ne(y.node))return b.some(y);if(ne(C.node))return b.some(C)}}return b.none()},r=(d,p)=>{const y=jn(d,(C,x)=>p(C,t,n)-p(x,t,n));return o(y,p).orThunk(()=>tn(y,s))},[i,a]=AW(L0(e),n),{pass:c,fail:f}=Ce(a,d=>d.top<n);return r(i,PW).orThunk(()=>r(f,yb)).orThunk(()=>r(c,yb))},OW=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>dp(gt(r.dom.childNodes),n,s),a=>{const c=H(gt(r.dom.childNodes),f=>f!==a.dom);return dp(c,n,s)}).orThunk(()=>(nt(r,e)?b.none():pN(r)).bind(c=>o(c,b.some(r))));return o(t,b.none())},DW=(e,t,n)=>{const s=_.fromDom(e),o=Eo(s),i=_.fromPoint(o,t,n).filter(a=>to(s,a)).getOr(s);return OW(s,i,t,n)},BW=(e,t,n)=>DW(e,t,n).filter(s=>ca(s.node)).map(s=>RW(s,t)),US=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-s.clientTop,left:t.left+o.pageXOffset-s.clientLeft}},IW=e=>e.inline?US(e.getBody()):{left:0,top:0},$W=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},LW=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},FW=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=US(e.getContentAreaContainer()),s=LW(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},MW=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),UW=(e,t)=>MW(IW(e),$W(e),FW(e,t)),mp=wt,zW=no,HW=(e,t)=>mp(t)&&t!==e,VW=(e,t,n)=>t===n||e.dom.isChildOf(t,n)?!1:!mp(t),WW=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},jW=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},qW=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},KW=(e,t,n,s,o,r)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(i=t.pageX+n-o),t.pageY+s>r&&(a=t.pageY+s-r),e.style.width=n-i+"px",e.style.height=s-a+"px"},zS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},GW=e=>e.button===0,YW=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),XW=(e,t)=>n=>{if(GW(n)){const s=de(t.dom.getParents(n.target),_A(mp,zW)).getOr(null);if(HW(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:jW(t,s,s.offsetWidth,s.offsetHeight)})}}},QW=(e,t)=>{const n=Nl((s,o)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(s,o)},0);return t.on("remove",n.cancel),s=>e.on(o=>{const r=Math.max(Math.abs(s.screenX-o.screenX),Math.abs(s.screenY-o.screenY));if(!o.dragging&&r>10){if(t.dispatch("dragstart",{target:o.element}).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){const i=YW(o,UW(t,s));qW(o.ghost,t.getBody()),KW(o.ghost,i,o.width,o.height,o.maxX,o.maxY),n.throttle(s.clientX,s.clientY)}})},ZW=e=>{const n=e.getSel().getRangeAt(0).startContainer;return n.nodeType===3?n.parentNode:n},JW=(e,t)=>n=>{e.on(s=>{if(s.dragging){if(VW(t,ZW(t.selection),s.element)){const o=WW(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{zS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),HS(e)},e8=(e,t)=>()=>{e.on(n=>{n.dragging&&t.dispatch("dragend")}),HS(e)},HS=e=>{e.on(t=>{zS(t.ghost)}),e.clear()},t8=e=>{const t=Ao(),n=rt.DOM,s=document,o=XW(t,e),r=QW(t,e),i=JW(t,e),a=e8(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===be.ESC&&a()})},n8=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(P(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&xc(e,"Dropped file type is not supported"))}},n=o=>{Zl(e,o.target)&&t(o)},s=()=>{const o=rt.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];R(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{R(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Un.setEditorTimeout(e,s,0)})},s8=e=>{t8(e),V1(e)&&n8(e)},o8=e=>{const t=Nl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=wm(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},r8=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(ks(n)){const s=wa(e.getBody(),n),o=wt(s)?s:n;e.selection.getNode()!==o&&Pa(e,o).each(r=>e.selection.setRng(r))}})})},vi=wt,pp=(e,t)=>wa(e.getBody(),t),i8=e=>{const t=e.selection,n=e.dom,s=n.isBlock,o=e.getBody(),r=kR(e,o,s,()=>dr(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let c;const f=q=>n.hasClass(q,"mce-offscreen-selection"),d=q=>q!==o&&(vi(q)||ks(q))&&n.isChildOf(q,o),p=q=>{q&&t.setRng(q)},y=(q,Z,ee,xe=!0)=>e.dispatch("ShowCaret",{target:Z,direction:q,before:ee}).isDefaultPrevented()?null:(xe&&t.scrollIntoView(Z,q===-1),r.show(ee,Z)),C=q=>{q.hasAttribute("data-mce-caret")&&(af(q),t.scrollIntoView(q))},x=()=>{e.on("click",Z=>{const ee=pp(e,Z.target);ee&&vi(ee)&&(Z.preventDefault(),e.focus())}),e.on("blur NewBlock",$),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",Z=>{const ee=Z.target,xe=pp(e,ee);vi(xe)?(Z.preventDefault(),Pa(e,xe).each(B)):d(ee)&&Pa(e,ee).each(B)},!0),e.on("mousedown",Z=>{const ee=Z.target;if(ee!==o&&ee.nodeName!=="HTML"&&!n.isChildOf(ee,o)||QM(e,Z.clientX,Z.clientY)===!1)return;$(),W();const xe=pp(e,ee);vi(xe)?(Z.preventDefault(),Pa(e,xe).each(B)):BW(o,Z.clientX,Z.clientY).each(ae=>{Z.preventDefault();const se=y(1,ae.node,ae.position===za.Before,!1);p(se),Ee(xe)?xe.focus():e.getBody().focus()})}),e.on("keypress",Z=>{be.modifierPressed(Z)||vi(t.getNode())&&Z.preventDefault()}),e.on("GetSelectionRange",Z=>{let ee=Z.range;if(c){if(!c.parentNode){c=null;return}ee=ee.cloneRange(),ee.selectNode(c),Z.range=ee}}),e.on("SetSelectionRange",Z=>{Z.range=w(Z.range);const ee=B(Z.range,Z.forward);ee&&(Z.range=ee)});const q=Z=>Z.id==="mcepastebin";e.on("AfterSetSelectionRange",Z=>{const ee=Z.range,xe=ee.startContainer.parentNode;!S(ee)&&!q(xe)&&W(),f(xe)||$()}),s8(e),o8(e),r8(e)},v=q=>Ln(q)||vl(q)||El(q),S=q=>v(q.startContainer)||v(q.endContainer),w=q=>{const Z=e.schema.getVoidElements(),ee=n.createRng(),xe=q.startContainer,ae=q.startOffset,se=q.endContainer,Ge=q.endOffset;return Fe(Z,xe.nodeName.toLowerCase())?ae===0?ee.setStartBefore(xe):ee.setStartAfter(xe):ee.setStart(xe,ae),Fe(Z,se.nodeName.toLowerCase())?Ge===0?ee.setEndBefore(se):ee.setEndAfter(se):ee.setEnd(se,Ge),ee},A=(q,Z)=>{const ee=_.fromDom(e.getBody()),xe=e.getDoc(),ae=Qi(ee,"#"+i).getOrThunk(()=>{const je=_.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',xe);return fn(je,"id",i),It(ee,je),je}),se=n.createRng();Gi(ae),Zo(ae,[_.fromText(Xt,xe),_.fromDom(Z),_.fromText(Xt,xe)]),se.setStart(ae.dom.firstChild,1),se.setEnd(ae.dom.lastChild,0),ul(ae,{top:n.getPos(q,e.getBody()).y+"px"}),wy(ae);const Ge=t.getSel();return Ge.removeAllRanges(),Ge.addRange(se),se},M=q=>{const Z=q.cloneNode(!0),ee=e.dispatch("ObjectSelected",{target:q,targetClone:Z});if(ee.isDefaultPrevented())return null;const xe=A(q,ee.targetClone),ae=_.fromDom(q);return R(xn(_.fromDom(e.getBody()),"*[data-mce-selected]"),se=>{nt(ae,se)||Gn(se,a)}),n.getAttrib(q,a)||q.setAttribute(a,"1"),c=q,W(),xe},B=(q,Z)=>{if(!q)return null;if(q.collapsed){if(!S(q)){const se=Z?1:-1,Ge=ma(se,o,q),je=Ge.getNode(!Z);if(ca(je))return y(se,je,Z?!Ge.isAtEnd():!1,!1);const ct=Ge.getNode(Z);if(ca(ct))return y(se,ct,Z?!1:!Ge.isAtEnd(),!1)}return null}let ee=q.startContainer,xe=q.startOffset;const ae=q.endOffset;if(ee.nodeType===3&&xe===0&&vi(ee.parentNode)&&(ee=ee.parentNode,xe=n.nodeIndex(ee),ee=ee.parentNode),ee.nodeType!==1)return null;if(ae===xe+1&&ee===q.endContainer){const se=ee.childNodes[xe];if(d(se))return M(se)}return null},$=()=>{c&&c.removeAttribute(a),Qi(_.fromDom(e.getBody()),"#"+i).each(At),c=null},te=()=>{r.destroy(),c=null},W=()=>{r.hide()};return ao(e)||x(),{showCaret:y,showBlockCaretContainer:C,hideFakeCaret:W,destroy:te}},VS=(e,t,n)=>{if(ne(t)&&(n<0||n>t.data.length))return[];const s=[n];let o=t;for(;o!==e&&o.parentNode;){const r=o.parentNode;for(let i=0;i<r.childNodes.length;i++)if(r.childNodes[i]===o){s.push(i);break}o=r}return o===e?s.reverse():[]},gp=(e,t,n,s,o)=>{const r=VS(e,t,n),i=VS(e,s,o);return{start:r,end:i}},WS=(e,t)=>{const n=t.slice(),s=n.pop();return X(n,(r,i)=>r.bind(a=>b.from(a.childNodes[i])),b.some(e)).bind(r=>ne(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s}))},jS=(e,t)=>WS(e,t.start).bind(({node:n,offset:s})=>WS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),a8=(e,t)=>gp(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset),Ei=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Ei(e,s,n)}},Kc=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(ne(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),ne(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ei(e,o,n),o!==r&&Ei(e,r,n))},hp=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),qS=(e,t,n)=>{J3(t,0,t).each(o=>{const r=o.container;Bx(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),Kc(e,a,c=>c===t)})})},l8=(e,t)=>{const n=e.dom,s=t.pattern,o=jS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return Tt(c)&&Ut(c).exists(f=>Fe(f,"block"))};return hp(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{qS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{qS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},c8=(e,t)=>{const n=t.replace(Xt," ");return de(e,s=>t.indexOf(s.start)===0||n.indexOf(s.start)===0)},u8=(e,t)=>{const n=e.dom,s=e.selection.getRng();return hp(e,s).filter(o=>{const r=Sn(e),i=n.is(o,r);return o!==null&&i}).bind(o=>{const r=o.textContent;return c8(t,r).map(a=>G.trim(r).length===a.start.length?[]:[{pattern:a,range:gp(n.getRoot(),o,0,o,0)}])}).getOr([])},f8=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();R(t,s=>l8(e,s)),e.selection.moveToBookmark(n)},KS=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Gc=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},GS=(e,t,n)=>{const s=jS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset);return{prefix:t,end:i.parentNode.insertBefore(KS(e,t+"-end"),i),start:a.parentNode.insertBefore(KS(e,t+"-start"),a)}},YS=(e,t,n)=>{Ei(e,e.get(t.prefix+"-end"),n),Ei(e,e.get(t.prefix+"-start"),n)},bp=e=>e.start.length===0,d8=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},XS=(e,t,n,s)=>{const o=t.start;return Wm(e,s.container,s.offset,d8(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),b.some(a)}else{const a=i.offset-o.length;return Vm(i.container,a,n).map(c=>{const f=e.createRng();return f.setStart(c.container,c.offset),f.setEnd(i.container,i.offset),f}).filter(c=>c.toString()===o).orThunk(()=>XS(e,t,n,as(i.container,0)))}})},m8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return Hm(n,s,o).bind(i=>XS(e,t,o,i).bind(c=>{if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return b.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return b.none()}return b.some(c)}))},p8=(e,t,n)=>{const s=e.dom,o=s.getRoot(),r=n.pattern,i=n.position.container,a=n.position.offset;return Vm(i,a-n.pattern.end.length,t).bind(c=>{const f=gp(o,c.container,c.offset,i,a);if(bp(r))return b.some({matches:[{pattern:r,startRng:f,endRng:f}],position:c});{const d=QS(e,n.remainingPatterns,c.container,c.offset,t),p=d.getOr({matches:[],position:c}),y=p.position;return m8(s,r,y.container,y.offset,t,d.isNone()).map(x=>{const v=a8(o,x);return{matches:p.matches.concat([{pattern:r,startRng:v,endRng:f}]),position:as(x.startContainer,x.startOffset)}})}})},QS=(e,t,n,s,o)=>{const r=e.dom;return Hm(n,s,r.getRoot()).bind(i=>{const a=r.createRng();a.setStart(o,0),a.setEnd(n,s);const c=a.toString();for(let f=0;f<t.length;f++){const d=t[f];if(!Ng(c,d.end))continue;const p=t.slice();p.splice(f,1);const y=p8(e,o,{pattern:d,remainingPatterns:p,position:i});if(y.isSome())return y}return b.none()})},ZS=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?R(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},g8=(e,t,n,s)=>{const o=Gc(e.dom,n);Kc(e.dom,o,s),ZS(e,t,o)},h8=(e,t,n,s,o)=>{const r=e.dom,i=Gc(r,s),a=Gc(r,n);Kc(r,a,o),Kc(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=Gc(r,c);ZS(e,t,f)},b8=(e,t)=>{const n=mb("mce_textpattern"),s=fe(t,(o,r)=>{const i=GS(e,n+`_end${o.length}`,r.endRng);return o.concat([ft(_e({},r),{endMarker:i})])},[]);return fe(s,(o,r)=>{const i=s.length-o.length-1,a=bp(r.pattern)?r.endMarker:GS(e,n+`_start${i}`,r.startRng);return o.concat([ft(_e({},r),{startMarker:a})])},[])},JS=(e,t,n)=>{const s=e.selection.getRng();return s.collapsed===!1?[]:hp(e,s).bind(o=>{const r=Math.max(0,s.startOffset-(n?1:0));return QS(e,t,s.startContainer,r,o)}).fold(()=>[],o=>o.matches)},ew=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=b8(n,t);R(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;bp(r.pattern)?g8(e,r.pattern,r.endMarker,a):h8(e,r.pattern,r.startMarker,r.endMarker,a),YS(n,r.endMarker,a),YS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},C8=e=>e.inlinePatterns.length>0||e.blockPatterns.length>0,y8=(e,t)=>{if(!e.selection.isCollapsed()||!C8(t))return!1;const n=JS(e,t.inlinePatterns,!1),s=u8(e,t.blockPatterns);return s.length>0||n.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Ji),ew(e,n),f8(e,s);const o=e.selection.getRng(),r=Hm(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===Ji&&(a.deleteData(i.offset-1,1),Ei(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0):!1},tw=(e,t)=>{if(t.length>0){const n=JS(e,t,!0);n.length>0&&e.undoManager.transact(()=>{ew(e,n)})}},nw=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},v8=(e,t)=>nw(e,t,(n,s)=>n===s.keyCode&&be.modifierPressed(s)===!1),E8=(e,t)=>nw(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),x8=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>ZA(oC(e)),o=()=>Vb(oC(e));e.on("keydown",r=>{r.keyCode===13&&!be.modifierPressed(r)&&y8(e,s())&&r.preventDefault()},!0),e.on("keyup",r=>{v8(n,r)&&tw(e,o())}),e.on("keypress",r=>{E8(t,r)&&Un.setEditorTimeout(e,()=>{tw(e,o())})})},S8=e=>{x8(e)},w8=e=>{const t=G.each,n=be.BACKSPACE,s=be.DELETE,o=e.dom,r=e.selection,i=e.parser,a=tt.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),d=tt.deviceType.isiPhone()||tt.deviceType.isiPad(),p=tt.os.isMacOS()||tt.os.isiOS(),y=(me,le)=>{try{e.getDoc().execCommand(me,!1,le)}catch{}},C=me=>me.isDefaultPrevented(),x=()=>{const me=Se=>{const Be=o.create("body"),vt=Se.cloneContents();return Be.appendChild(vt),r.serializer.serialize(Be,{format:"html"})},le=Se=>{const Be=me(Se),vt=o.createRng();vt.selectNode(e.getBody());const Lt=me(vt);return Be===Lt};e.on("keydown",Se=>{const Be=Se.keyCode;let vt,Lt;if(!C(Se)&&(Be===s||Be===n)){if(vt=e.selection.isCollapsed(),Lt=e.getBody(),vt&&!o.isEmpty(Lt)||!vt&&!le(e.selection.getRng()))return;Se.preventDefault(),e.setContent(""),Lt.firstChild&&o.isBlock(Lt.firstChild)?e.selection.setCursorLocation(Lt.firstChild,0):e.selection.setCursorLocation(Lt,0),e.nodeChanged()}})},v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",me=>{let le;if(me.target===e.getDoc().documentElement)if(le=r.getRng(),e.getBody().focus(),me.type==="mousedown"){if(Ln(le.startContainer))return;r.placeCaretAt(me.clientX,me.clientY)}else r.setRng(le)})},w=()=>{e.on("keydown",me=>{if(!C(me)&&me.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const le=r.getNode(),Se=le.previousSibling;if(le.nodeName==="HR"){o.remove(le),me.preventDefault();return}Se&&Se.nodeName&&Se.nodeName.toLowerCase()==="hr"&&(o.remove(Se),me.preventDefault())}}})},A=()=>{Range.prototype.getClientRects||e.on("mousedown",me=>{if(!C(me)&&me.target.nodeName==="HTML"){const le=e.getBody();le.blur(),Un.setEditorTimeout(e,()=>{le.focus()})}})},M=()=>{const me=sC(e);e.on("click",le=>{const Se=le.target;/^(IMG|HR)$/.test(Se.nodeName)&&o.getContentEditableParent(Se)!=="false"&&(le.preventDefault(),e.selection.select(Se),e.nodeChanged()),Se.nodeName==="A"&&o.hasClass(Se,me)&&Se.childNodes.length===0&&(le.preventDefault(),r.select(Se))})},B=()=>{const me=()=>{const Se=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const Be=r.getStart();Be!==e.getBody()&&(o.setAttrib(Be,"style",null),t(Se,vt=>{Be.setAttributeNode(vt.cloneNode(!0))}))}},le=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",Se=>{let Be;if(!C(Se)&&(Se.keyCode===8||Se.keyCode===46)&&le())return Be=me(),e.getDoc().execCommand("delete",!1,null),Be(),Se.preventDefault(),!1}),o.bind(e.getDoc(),"cut",Se=>{let Be;!C(Se)&&le()&&(Be=me(),Un.setEditorTimeout(e,()=>{Be()}))})},$=()=>{e.on("keydown",me=>{if(!C(me)&&me.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const le=r.getNode().previousSibling;if(le&&le.nodeName&&le.nodeName.toLowerCase()==="table")return me.preventDefault(),!1}})},te=()=>{e.on("keydown",me=>{let le,Se;if(C(me)||me.keyCode!==be.BACKSPACE)return;le=r.getRng();const Be=le.startContainer,vt=le.startOffset,Lt=o.getRoot();if(Se=Be,!(!le.collapsed||vt!==0)){for(;Se&&Se.parentNode&&Se.parentNode.firstChild===Se&&Se.parentNode!==Lt;)Se=Se.parentNode;Se.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,Se),le=o.createRng(),le.setStart(Be,0),le.setEnd(Be,0),r.setRng(le))}})},W=()=>{const me=()=>{y("StyleWithCSS",!1),y("enableInlineTableEditing",!1),eC(e)||y("enableObjectResizing",!1)};nC(e)||e.on("BeforeExecCommand mousedown",me)},q=()=>{const me=()=>{t(o.select("a"),le=>{let Se=le.parentNode;const Be=o.getRoot();if(Se.lastChild===le){for(;Se&&!o.isBlock(Se);){if(Se.parentNode.lastChild!==Se||Se===Be)return;Se=Se.parentNode}o.add(Se,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",le=>{(le.type==="setcontent"||le.command==="mceInsertLink")&&me()})},Z=()=>{e.on("init",()=>{y("DefaultParagraphSeparator",Sn(e))})},ee=()=>{e.on("keyup focusin mouseup",me=>{be.modifierPressed(me)||r.normalize()},!0)},xe=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ae=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},se=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",me=>{let le;me.target.nodeName==="HTML"&&(le=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(le),e.selection.normalize(),e.nodeChanged())}))},Ge=()=>{p&&e.on("keydown",me=>{be.metaKeyPressed(me)&&!me.shiftKey&&(me.keyCode===37||me.keyCode===39)&&(me.preventDefault(),e.selection.getSel().modify("move",me.keyCode===37?"backward":"forward","lineboundary"))})},je=()=>{e.on("click",me=>{let le=me.target;do if(le.tagName==="A"){me.preventDefault();return}while(le=le.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ct=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",me=>{me.preventDefault()})})},qt=()=>{i.addNodeFilter("br",me=>{let le=me.length;for(;le--;)me[le].attr("class")==="Apple-interchange-newline"&&me[le].remove()})},J=Ie,ge=()=>{if(!c||e.removed)return!1;const me=e.selection.getSel();return!me||!me.rangeCount||me.rangeCount===0},Me=()=>{f&&(S(),M(),ct(),v(),d&&(ae(),se(),je())),c&&(A(),W(),xe(),Ge())},De=()=>{te(),x(),tt.windowsPhone||ee(),f&&(S(),M(),Z(),ct(),$(),qt(),d?(ae(),se(),je()):v()),c&&(w(),A(),B(),W(),q(),xe(),Ge(),$())};return ao(e)?Me():De(),{refreshContentEditable:J,isHidden:ge}},Cp=rt.DOM,_8=(e,t)=>{const n=_.fromDom(e.getBody()),s=Yu(Qo(n)),o=_.fromTag("style");fn(o,"type","text/css"),It(o,_.fromText(t)),It(s,o),e.on("remove",()=>{At(o)})},k8=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,yp=e=>Mi(e,t=>Pt(t)===!1),sw=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return yp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:k8(e),validate:!0,blob_cache:n,document:e.getDoc()})},ow=e=>{const t=e.options.get;return yp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},N8=e=>{const t=e.options.get;return _e(_e(_e({},sw(e)),ow(e)),yp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))},T8=e=>{const t=mi(sw(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let o=n.length,r,i;const a=e.dom,c="data-mce-"+s;for(;o--;)if(r=n[o],i=r.attr(s),i&&!r.attr(c)){if(i.indexOf("data:")===0||i.indexOf("blob:")===0)continue;s==="style"?(i=a.serializeStyle(a.parseStyle(i),r.name),i.length||(i=null),r.attr(c,i),r.attr(s,i)):s==="tabindex"?(r.attr(c,i),r.attr(s,null)):r.attr(c,e.convertURL(i,s,r.name))}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const o=n[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new pn("br",1))}}),t},A8=e=>{const t=X1(e);t&&Un.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n.destroyed||n.focus()},100)},R8=e=>{const t=e.dom.getRoot();!e.inline&&(!ql(e)||e.selection.getStart(!0)===t)&&mn(t).each(n=>{const s=n.getNode(),o=Yi(s)?mn(s).getOr(n):n;e.selection.setRng(o.toRange())})},P8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,IP(e),e.focus(!0),R8(e),e.nodeChanged({initial:!0});const t=G1(e);Ye(t)&&t.call(e,e),A8(e)},rw=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,O8=(e,t,n)=>{const s=[rw(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},iw=e=>{const t=rw(e),n=Jb(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";G.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(O8(e,s,n)).then(r).catch(r),a=S1(e);return a&&_8(e,a),i},D8=e=>{const t=e.getDoc(),n=e.getBody();DP(e),Q1(e)||(t.body.spellcheck=!1,Cp.setAttrib(n,"spellcheck","false")),e.quirks=w8(e),BP(e);const s=w1(e);s!==void 0&&(n.dir=s);const o=Z1(e);o&&e.on("BeforeSetContent",r=>{G.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},B8=e=>{ao(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},vp=e=>{e.removed!==!0&&(B8(e),P8(e))},aw=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Cp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=nC(e),e.readonly||(e.inline&&Cp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=xU(e),e.schema=To(ow(e)),e.dom=rt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:y1(e),referrerPolicy:Of(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=T8(e),e.serializer=zE(N8(e),e),e.selection=UE(e.dom,e.getWin(),e.serializer,e),e.annotator=JC(e),e.formatter=JE(e),e.undoManager=t0(e),e._nodeChangeDispatcher=new y6(e),e._selectionOverrides=i8(e),VH(e),EW(e),QH(e),ao(e)||(SW(e),S8(e));const o=C6(e);UH(e,o),GH(e),LU(e),CW(e);const r=OF(e);D8(e),r.fold(()=>{iw(e).then(()=>vp(e))},i=>{e.setProgressState(!0),iw(e).then(()=>{i().then(a=>{e.setProgressState(!1),vp(e),IE(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),vp(e),IE(e)})})})},lw=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=pU(_.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,aw(e)});n.srcdoc=e.iframeHTML}else aw(e)},Yc=rt.DOM,I8=(e,t,n,s)=>{const o=_.fromTag("iframe");return s.each(r=>fn(o,"tabindex",r)),ws(o,n),ws(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Wi(o,"tox-edit-area__iframe"),o},$8=e=>{let t=r1(e)+"<html><head>";qb(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=i1(e),s=a1(e),o=e.translate(q1(e));return Kb(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Kb(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},L8=(e,t)=>{const n=e.translate("Rich Text Area"),s=al(_.fromDom(e.getElement()),"tabindex").bind(Lk),o=I8(e.id,n,o1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=$8(e),Yc.add(t.iframeContainer,o)},F8=(e,t)=>{L8(e,t),t.editorContainer&&(Yc.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Yc.isHidden(t.editorContainer)),e.getElement().style.display="none",Yc.setAttrib(e.id,"aria-hidden","true"),lw(e)},cw=rt.DOM,M8=(e,t,n)=>{const s=gi.get(n),o=gi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=G.trim(n),s&&G.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ye(r.init)&&(r.init(e,o),t.push(n))}catch(r){lU(e,n,r)}}},U8=e=>e.replace(/^\-/,""),z8=e=>{const t=[];R(Dl(e),n=>{M8(e,t,U8(n))})},H8=e=>{const t=G.trim(Xb(e)),n=e.ui.registry.getAll().icons,s=_e(_e({},Ec.get("default").icons),Ec.get(t).icons);Ct(s,(o,r)=>{Fe(n,r)||e.ui.registry.addIcon(r,o)})},V8=e=>{const t=ti(e);if(he(t)){const n=Cr.get(t);e.theme=n(e,Cr.urls[t])||{},Ye(e.theme.init)&&e.theme.init(e,Cr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},W8=e=>{const t=Df(e),n=pi.get(t);e.model=n(e,pi.urls[t])},j8=e=>e.theme.renderUI(),q8=e=>{const t=e.getElement(),s=ti(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},uw=e=>({editorContainer:e,iframeContainer:e,api:{}}),K8=e=>{const t=cw.create("div");return cw.insertAfter(t,e),uw(t)},G8=e=>{const t=e.getElement();return e.inline?uw(null):K8(t)},Y8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,he(ti(e))?j8(e):Ye(ti(e))?q8(e):G8(e)},X8=(e,t)=>{const n={show:b.from(t.show).getOr(Ie),hide:b.from(t.hide).getOr(Ie),isEnabled:b.from(t.isEnabled).getOr(at),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui=_e(_e({},e.ui),n)},Q8=e=>{e.dispatch("ScriptsLoaded"),H8(e),V8(e),W8(e),z8(e);const t=Y8(e);X8(e,b.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,dU(e),e.inline?lw(e):F8(e,n)},vr=rt.DOM,fw=e=>e.charAt(0)==="-",Z8=(e,t)=>{const n=Qb(t),s=v1(t);if(ns.hasCode(n)===!1&&n!=="en"){const o=Zs(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{rU(t,o,n)})}},J8=(e,t)=>{const n=ti(e);if(he(n)&&!fw(n)&&!Fe(Cr.urls,n)){const s=A1(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;Cr.load(n,o).catch(()=>{iU(e,o,n)})}},e5=(e,t)=>{const n=Df(e);if(n!=="plugin"&&!Fe(pi.urls,n)){const s=R1(e),o=he(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;pi.load(n,o).catch(()=>{aU(e,o,n)})}},t5=e=>b.from(p1(e)).filter(Zs).map(t=>({url:t,name:b.none()})),dw=(e,t,n)=>b.from(t).filter(s=>Zs(s)&&!Ec.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),n5=(e,t,n)=>{const s=dw(t,"default",n),o=t5(t).orThunk(()=>dw(t,Xb(t),""));R(Qk([s,o]),r=>{e.add(r.url).catch(()=>{oU(t,r.url,r.name.getOrUndefined())})})},s5=(e,t)=>{const n=(s,o)=>{gi.load(s,o).catch(()=>{sU(e,o,s)})};Ct(H1(e),(s,o)=>{n(o,s),e.options.set("plugins",Dl(e).concat(o))}),R(Dl(e),s=>{s=G.trim(s),s&&!gi.urls[s]&&!fw(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},o5=e=>{const t=ti(e);return!he(t)||Ne(Cr.get(t))},r5=e=>{const t=Df(e);return Ne(pi.get(t))},i5=(e,t)=>{const n=so.ScriptLoader,s=()=>{!e.removed&&o5(e)&&r5(e)&&Q8(e)};J8(e,t),e5(e,t),Z8(n,e),n5(n,e,t),s5(e,t),n.loadQueue().then(s,s)},a5=(e,t)=>Uh.forElement(e,{contentCssCors:z1(t),referrerPolicy:Of(t)}),l5=e=>{const t=e.id;ns.setCode(Qb(e));const n=()=>{vr.unbind(window,"ready",n),e.render()};if(!or.Event.domLoaded){vr.bind(window,"ready",n);return}if(!e.getElement())return;const s=_.fromDom(e.getElement()),o=sh(s);e.on("remove",()=>{ce(s.dom.attributes,i=>Gn(s,i.name)),ws(s,o)}),e.ui.styleSheetLoader=a5(s,e),Bf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||vr.getParent(t,"form");r&&(e.formElement=r,I1(e)&&!Ju(e.getElement())&&(vr.insertAfter(vr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},vr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),$1(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=jE(e),e.notificationManager=WE(e),mR(e)&&e.on("GetContent",i=>{i.save&&(i.content=vr.encode(i.content))}),L1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),F1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),i5(e,e.suffix)},c5=(e,t)=>({sections:K(e),options:K(t)}),mw=vo().deviceType,pw=mw.isPhone(),u5=mw.isTablet(),Ha=e=>{if(Mt(e))return[];{const t=Tt(e)?e:e.split(/[ ,]/),n=z(t,zr);return H(n,Zs)}},f5=(e,t)=>{const n=Sk(t,(s,o)=>P(e,o));return c5(n.t,n.f)},d5=(e,t,n={})=>{const s=e.sections(),o=lt(s,t).getOr({});return G.extend({},n,o)},Ep=(e,t)=>Fe(e.sections(),t),m5=(e,t)=>Ep(e,t)?e.sections()[t]:{},p5=(e,t)=>{const n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:lt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},s={menubar:!1};return _e(_e({},n),t?s:{})},g5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,s):s},h5=(e,t)=>[].concat(Ha(e)).concat(Ha(t)),b5=(e,t,n,s)=>e&&Ep(t,"mobile")?s:n,C5=(e,t,n,s)=>{const o=Ha(n.forced_plugins),r=Ha(s.plugins),i=m5(t,"mobile"),a=i.plugins?Ha(i.plugins):r,c=b5(e,t,r,a),f=h5(o,c);return G.extend(s,{forced_plugins:o,plugins:f})},y5=(e,t)=>e&&Ep(t,"mobile"),v5=(e,t,n,s,o)=>{var r;const i=e?{mobile:p5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=f5(["mobile"],Bc(i,o)),c=G.extend(n,s,a.options(),y5(e,a)?d5(a,"mobile"):{},{external_plugins:g5(s,a.options())});return C5(e,a,s,c)},E5=(e,t)=>v5(pw||u5,pw,t,e,t),x5=(e,t)=>sM(e,t),S5=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{R("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},w5=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return U(o,r=>Ne(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},_5=e=>{S5(e),w5(e)},k5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tt.os.isMacOS()||tt.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},N5=(e,t,n)=>{const s=_.fromDom(e.getRoot());return tc(s,L.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),nc(s,L.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},T5=e=>{if(typeof e!="string"){const t=G.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},A5=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?N5(s,n.getRng(),t):t},Xc=(e,t)=>{const{content:n,details:s}=T5(t);um(e,{content:A5(e,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(o=>{const r=tM(e,o.content,s);fm(e,r,o),e.addVisual()})},R5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Xc(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Xc(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Xc(e,s)},mceInsertContent:(t,n,s)=>{Xc(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},P5={"font-size":"size","font-family":"face"},O5=(e,t,n)=>{const s=r=>fl(r,e).orThunk(()=>yt(r)==="font"?lt(P5,e).bind(i=>al(r,i)):b.none()),o=r=>nt(_.fromDom(t),r);return Wd(_.fromDom(n),r=>s(r),o)},D5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),B5=(e,t)=>b.from(rt.DOM.getStyle(t,e,!0)),gw=e=>(t,n)=>b.from(n).map(_.fromDom).filter(Kn).bind(s=>O5(e,t,s.dom).or(B5(e,s.dom))).getOr(""),I5=gw("font-size"),$5=Ot(D5,gw("font-family")),L5=e=>mn(e.getBody()).map(t=>{const n=t.container();return ne(n)?n.parentNode:n}),F5=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),M5=(e,t)=>F5(e).orThunk(re(L5,e)).map(_.fromDom).filter(Kn).bind(t),xp=(e,t)=>M5(e,kt(b.some,t)),hw=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=fR(e),o=dR(e);return o?o[n-1]||t:s[n-1]||t}else return t}else return t},U5=e=>{const t=e.split(/\s*,\s*/);return z(t,n=>n.indexOf(" ")!==-1&&!(qn(n,'"')||qn(n,"'"))?`'${n}'`:n).join(",")},z5=(e,t)=>{const n=hw(e,t);e.formatter.toggle("fontname",{value:U5(n)}),e.nodeChanged()},H5=e=>xp(e,t=>$5(e.getBody(),t.dom)).getOr(""),V5=(e,t)=>{e.formatter.toggle("fontsize",{value:hw(e,t)}),e.nodeChanged()},W5=e=>xp(e,t=>I5(e.getBody(),t.dom)).getOr(""),j5=e=>xp(e,t=>{const n=_.fromDom(e.getBody()),s=Wd(t,r=>fl(r,"line-height"),re(nt,n)),o=()=>{const r=parseFloat(_s(t,"line-height")),i=parseFloat(_s(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),q5=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},K5=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{z5(e,o)},FontSize:(n,s,o)=>{V5(e,o)},LineHeight:(n,s,o)=>{q5(e,o)},Lang:(n,s,o)=>{t(n,{value:o.code,customValue:o.customCode})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(he(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},G5=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>H5(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>W5(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>j5(e))},Y5=e=>{K5(e),G5(e)},X5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Q5=e=>{e.editorCommands.addCommands({Indent:()=>{LH(e)},Outdent:()=>{ex(e)}}),e.editorCommands.addCommands({Outdent:()=>X0(e)},"state")},Z5=e=>{const t=(n,s,o)=>{const r=he(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ut(r)&&he(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},J5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},ej=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},tj=e=>{J5(e),ej(e)},nj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{ip(e)},mceInsertNewLine:(t,n,s)=>{ip(e,s)},InsertLineBreak:(t,n,s)=>{dS(e,s)}})},sj=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>{if(r.nodeType===1&&o++===s)return e.selection.select(r),!1},e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),no);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},oj=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{gD(e,s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},rj=e=>{_5(e),k5(e),X5(e),sj(e),R5(e),Z5(e),Q5(e),nj(e),tj(e),Y5(e),oj(e)};class bw{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():qO(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ye(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ye(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ye(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;Ct(t,(o,r)=>{R(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const Er="data-mce-contenteditable",ij=(e,t,n)=>{Ku(e,t)&&n===!1?lh(e,t):n&&Wi(e,t)},Sp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Qc=(e,t)=>{e.dom.contentEditable=t?"true":"false"},aj=e=>{R(xn(e,'*[contenteditable="true"]'),t=>{fn(t,Er,"true"),Qc(t,!1)})},lj=e=>{R(xn(e,`*[${Er}="true"]`),t=>{Gn(t,Er),Qc(t,!0)})},cj=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},uj=e=>{e.selection.setRng(e.selection.getRng())},fj=(e,t)=>{const n=_.fromDom(e.getBody());ij(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),cj(e),e.readonly=!0,Qc(n,!1),aj(n)):(e.readonly=!1,Qc(n,!0),lj(n),Sp(e,"StyleWithCSS",!1),Sp(e,"enableInlineTableEditing",!1),Sp(e,"enableObjectResizing",!1),mD(e)&&e.focus(),uj(e),e.nodeChanged())},xr=e=>e.readonly,Cw=e=>{e.parser.addAttributeFilter("contenteditable",t=>{xr(e)&&R(t,n=>{n.attr(Er,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Er,t=>{xr(e)&&R(t,n=>{n.attr("contenteditable",n.attr(Er))})}),e.serializer.addTempAttr(Er)},dj=e=>{e.serializer?Cw(e):e.on("PreInit",()=>{Cw(e)})},mj=e=>e.type==="click",pj=(e,t)=>tr(t,"a",s=>nt(s,_.fromDom(e.getBody()))).bind(s=>al(s,"href")),gj=(e,t)=>{if(mj(t)&&!be.metaKeyPressed(t)){const n=_.fromDom(t.target);pj(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${Bk(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},hj=e=>{e.on("ShowCaret",t=>{xr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{xr(e)&&t.preventDefault()})},bj=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class wp{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pt}static isNative(t){return!!bj[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=gf(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=pt),n){const r={func:n,removed:!1};o&&G.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return Ct(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=Ce(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,R(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else Ct(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){return t=t.toLowerCase(),!(!this.bindings[t]||this.bindings[t].length===0)}}const Va=e=>(e._eventDispatcher||(e._eventDispatcher=new wp({scope:e,toggleEvent:(t,n)=>{wp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),_p={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return gf(e.toLowerCase(),t!=null?t:{},s);const o=Va(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent()}return o},on(e,t,n){return Va(this).on(e,t,n)},off(e,t){return Va(this).off(e,t)},once(e,t){return Va(this).once(e,t)},hasEventListeners(e){return Va(this).has(e)}},Zc=rt.DOM;let Sr;const Jc=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=tC(e);return n?(e.eventRoot||(e.eventRoot=Zc.select(n)[0]),e.eventRoot):e.getBody()},Cj=e=>!e.hidden&&!xr(e),yw=(e,t,n)=>{Cj(e)?e.dispatch(t,n):xr(e)&&gj(e,n)},vw=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const s=Jc(e,t);if(tC(e)){if(Sr||(Sr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Sr&&(Ct(Sr,(o,r)=>{e.dom.unbind(Jc(e,r))}),Sr=null)})),Sr[t])return;n=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||Zc.isChildOf(r,c))&&yw(i[a],t,o)}},Sr[t]=n,Zc.bind(s,t,n)}else n=o=>{yw(e,t,o)},Zc.bind(s,t,n),e.delegates[t]=n},Ew=ft(_e({},_p),{bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{vw(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?vw(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Jc(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ct(e.delegates,(s,o)=>{e.dom.unbind(Jc(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),yj=e=>he(e)?{value:e.split(/[ ,]/),valid:!0}:Qs(e,he)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},vj=e=>{const t=(()=>{switch(e){case"array":return Tt;case"boolean":return Cs;case"function":return Ye;case"number":return yn;case"object":return ut;case"string":return he;case"string[]":return yj;case"object[]":return n=>Qs(n,ut);case"regexp":return n=>Bn(n,RegExp)}})();return n=>kp(n,t,`The value must be a ${e}.`)},Ej=e=>he(e.processor),xw=(e,t)=>{const n=rl(t.message)?"":`. ${t.message}`;return e+n},Sw=e=>e.valid,kp=(e,t,n="")=>{const s=t(e);return Cs(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},xj=(e,t,n)=>{if(!Pt(t)){const s=kp(t,n);if(Sw(s))return s.value;console.error(xw(`Invalid default value passed for the "${e}" option`,s))}},Sj=(e,t)=>{const n={},s={},o=(p,y,C)=>{const x=kp(y,C);return Sw(x)?(s[p]=x.value,!0):(console.warn(xw(`Invalid value passed for the ${p} option`,x)),!1)},r=(p,y)=>{const C=Ej(y)?vj(y.processor):y.processor,x=xj(p,y.default,C);n[p]=ft(_e({},y),{default:x,processor:C}),lt(s,p).orThunk(()=>lt(t,p)).each(S=>o(p,S,C))},i=p=>Fe(n,p);return{register:r,isRegistered:i,get:p=>lt(s,p).orThunk(()=>lt(n,p).map(y=>y.default)).getOrUndefined(),set:(p,y)=>{if(i(p)){const C=n[p];return C.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,y,C.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const y=i(p);return y&&delete s[p],y},isSet:p=>Fe(s,p)}},wj=["design","readonly"],ww=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&fj(e,r.editorReadOnly),t.set(s),RP(e,s)},_j=(e,t,n,s)=>{if(s!==n.get()){if(!Fe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?ww(e,n,t,s):e.on("init",()=>ww(e,n,t,s))}},kj=(e,t,n)=>{if(P(wj,t))throw new Error(`Cannot override default mode ${t}`);return ft(_e({},e),{[t]:ft(_e({},n),{deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}})})},Nj=e=>{const t=$t("design"),n=$t({design:{activate:Ie,deactivate:Ie,editorReadOnly:!1},readonly:{activate:Ie,deactivate:Ie,editorReadOnly:!0}});return dj(e),hj(e),{isReadOnly:()=>xr(e),set:s=>_j(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(kj(n.get(),s,o))}}},Np=G.each,Tp=G.explode,Tj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},_w=G.makeMap("alt,ctrl,shift,meta,access"),Aj=e=>{let t;const n={},s=tt.os.isMacOS()||tt.os.isiOS();Np(Tp(e.toLowerCase(),"+"),r=>{r in _w?n[r]=!0:/^[0-9]{2,}$/.test(r)?n.keyCode=parseInt(r,10):(n.charCode=r.charCodeAt(0),n.keyCode=Tj[r]||r.toUpperCase().charCodeAt(0))});const o=[n.keyCode];for(t in _w)n[t]?o.push(t):n[t]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class kw{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(Np(n.shortcuts,o=>{if(n.matchShortcut(s,o))return n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return Np(Tp(G.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:G.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=G.map(Tp(t,">"),Aj);return r[r.length-1]=G.extend(r[r.length-1],{func:s,scope:o||this.editor}),G.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const Rj=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(f,d)=>(p,y)=>f[p.toLowerCase()]=ft(_e({},y),{type:d}),c=(f,d)=>s[f.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},Pj=()=>{const e=Rj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},wr=rt.DOM,Nw=G.extend,Oj=G.each;class eu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Nw(this,Ew);const o=this;this.id=t,this.hidden=!1;const r=E5(s.defaultOptions,n);this.options=Sj(o,r),s1(o);const i=this.options.get;i("deprecation_warnings")&&FM(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=Of(o);f&&(so.ScriptLoader._setReferrerPolicy(f),rt.DOM.styleSheetLoader._setReferrerPolicy(f)),nn.languageLoad=i("language_load"),nn.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new is(qb(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Bf(o),this.shortcuts=new kw(this),this.editorCommands=new bw(this),rj(this);const d=i("cache_suffix");d&&(tt.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:Pj(),styleSheetLoader:void 0,show:Ie,hide:Ie,setEnabled:Ie,isEnabled:at},this.mode=Nj(o),s.dispatch("SetupEditor",{editor:this});const p=K1(o);Ye(p)&&p.call(o,o)}render(){l5(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return dr(this)}translate(t){return ns.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(Ne(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:at,default:n})),!o.isSet(t)&&!Pt(n)?n:o.get(t)}hasPlugin(t,n){return P(Dl(this),t)?n?gi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(wr.show(t.getContainer()),wr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(wr.hide(t.getContainer()),wr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t){const n=this;let s=n.getElement(),o;if(n.removed)return"";if(s){t=t||{},t.load=!0;const r=Ju(s)?s.value:s.innerHTML;return o=n.setContent(r,t),t.element=s,t.no_events||n.dispatch("LoadContent",t),t.element=s=null,o}}save(t){const n=this;let s=n.getElement(),o,r;if(!(!s||!n.initialized||n.removed))return t=t||{},t.save=!0,t.element=s,o=t.content=n.getContent(t),t.no_events||n.dispatch("SaveContent",t),t.format==="raw"&&n.dispatch("RawSaveContent",t),o=t.content,Ju(s)?s.value=o:((t.is_removing||!n.inline)&&(s.innerHTML=o),(r=wr.getParent(n.id,"form"))&&Oj(r.elements,i=>{if(i.name===n.id)return i.value=o,!1})),t.element=s=null,t.set_dirty!==!1&&n.setDirty(!1),o}setContent(t,n){return ym(this,t,n)}getContent(t){return RM(this,t)}insertContent(t,n){n&&(t=Nw({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?ym(this,this.startContent,{format:"raw"}):ym(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=wr.get(t.editorContainer||t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=wr.get(this.id)),this.targetElm}getWin(){const t=this;let n;return t.contentWindow||(n=t.iframeElement,n&&(t.contentWindow=n.contentWindow)),t.contentWindow}getDoc(){const t=this;let n;return t.contentDocument||(n=t.getWin(),n&&(t.contentDocument=n.document)),t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement||(t?t.body:null)}convertURL(t,n,s){const o=this,r=o.options.get,i=Y1(o);return Ye(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){x5(this,t)}remove(){HM(this)}destroy(t){VM(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const xi=rt.DOM,tu=G.each;let Tw=!1,nu,gn=[];const su=e=>{const t=e.type;tu(Fo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},Aw=e=>{if(e!==Tw){const t=rt.DOM;e?(t.bind(window,"resize",su),t.bind(window,"scroll",su)):(t.unbind(window,"resize",su),t.unbind(window,"scroll",su)),Tw=e}},Rw=e=>{const t=gn;return gn=H(gn,n=>e!==n),Fo.activeEditor===e&&(Fo.activeEditor=gn.length>0?gn[0]:null),Fo.focusedEditor===e&&(Fo.focusedEditor=null),t.length!==gn.length},Dj=e=>(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Rw(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e),Bj=document.compatMode!=="CSS1Compat",Fo=ft(_e({},_p),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.3",releaseDate:"2022-05-25",i18n:ns,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,s="";n=is.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,s=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(s=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(s=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new is(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new is(e.baseURL),e.suffix=s,rD(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&Ct(s,(o,r)=>{nn.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=lt(d,"name").filter(y=>!xi.get(y)).getOrThunk(xi.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>tt.browser.isIE()||tt.browser.isEdge()?(Sc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Bj?(Sc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):he(d.selector)?xi.select(d.selector):Ne(d.target)?[d.target]:[];let c=d=>{n=d};const f=()=>{let d=0;const p=[];let y;const C=(x,v,S)=>{const w=new eu(x,v,t);p.push(w),w.on("init",()=>{++d===y.length&&c(p)}),w.targetElm=w.targetElm||S,w.render()};xi.unbind(window,"ready",f),i("onpageload"),y=sl(a(e)),G.each(y,x=>{Dj(t.get(x.id))}),y=G.grep(y,x=>!t.get(x.id)),y.length===0?c([]):tu(y,x=>{o(e,x)?Sc("Could not initialize inline editor on invalid inline target element",x):C(r(x),e,x)})};return xi.bind(window,"ready",f),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?gn.slice(0):he(e)?de(gn,t=>t.id===e).getOr(null):yn(e)&&gn[e]?gn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&gn.push(e),Aw(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),nu||(nu=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",nu))),e},createEditor(e,t){return this.add(new eu(e,t,this))},remove(e){const t=this;let n,s;if(!e){for(n=gn.length-1;n>=0;n--)t.remove(gn[n]);return}if(he(e)){tu(xi.select(e),o=>{s=t.get(o.id),s&&t.remove(s)});return}return s=e,Xs(t.get(s.id))?null:(Rw(s)&&t.dispatch("RemoveEditor",{editor:s}),gn.length===0&&window.removeEventListener("beforeunload",nu),s.remove(),Aw(gn.length>0),s)},execCommand(e,t,n){var s;const o=this,r=ut(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new eu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{tu(gn,e=>{e.save()})},addI18n:(e,t)=>{ns.add(e,t)},translate:e=>ns.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new is(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new is(this.baseURL)}});Fo.setup();const Ij=(()=>{const e=Ao(),t=r=>({items:r,types:es(r),getType:i=>lt(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Pw=Math.min,Si=Math.max,ou=Math.round,Ow=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=ou(c/2)),f[1]==="c"&&(s+=ou(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=ou(i/2)),f[4]==="c"&&(s-=ou(r/2)),wi(s,o,r,i)},$j=(e,t,n,s)=>{let o,r;for(r=0;r<s.length;r++)if(o=Ow(e,t,s[r]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[r];return null},Lj=(e,t,n)=>wi(e.x-t,e.y-n,e.w+t*2,e.h+n*2),Fj=(e,t)=>{const n=Si(e.x,t.x),s=Si(e.y,t.y),o=Pw(e.x+e.w,t.x+t.w),r=Pw(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:wi(n,s,o-n,r-s)},Mj=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Si(0,t.x-s),d=Si(0,t.y-o),p=Si(0,r-a),y=Si(0,i-c);return s+=f,o+=d,n&&(r+=f,i+=d,s-=p,o-=y),r-=p,i-=y,wi(s,o,r-s,i-o)},wi=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),Uj={inflate:Lj,relativePosition:Ow,findBestRelativePosition:$j,intersect:Fj,clamp:Mj,create:wi,fromClientRect:e=>wi(e.left,e.top,e.width,e.height)},zj=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,d))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},Hj=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((d,p)=>{const y=zj(d,p);t[r]=y.resolve,so.ScriptLoader.loadScript(i).then(()=>y.start(c),()=>y.reject(a))});return e[r]=f,f}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),Vj=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Wa;try{const e="__storage_test__";Wa=window.localStorage,Wa.setItem(e,e),Wa.removeItem(e)}catch{Wa=Vj()}var Wj=Wa;const jj={geom:{Rect:Uj},util:{Delay:Un,Tools:G,VK:be,URI:is,EventDispatcher:wp,Observable:_p,I18n:ns,LocalStorage:Wj,ImageUploader:vU},dom:{EventUtils:or,TreeWalker:zt,TextSeeker:rr,DOMUtils:rt,ScriptLoader:so,RangeUtils:ui,Serializer:zE,StyleSheetLoader:Mh,ControlSelection:iy,BookmarkManager:ba,Selection:UE,Event:or.Event},html:{Styles:pf,Entities:ko,Node:pn,Schema:To,DomParser:mi,Writer:Vy,Serializer:Do},Env:tt,AddOnManager:nn,Annotator:JC,Formatter:JE,UndoManager:t0,EditorCommands:bw,WindowManager:jE,NotificationManager:WE,EditorObservable:Ew,Shortcuts:kw,Editor:eu,FocusManager:Ay,EditorManager:Fo,DOM:rt.DOM,ScriptLoader:so.ScriptLoader,PluginManager:gi,ThemeManager:Cr,ModelManager:pi,IconManager:Ec,Resource:Hj,FakeClipboard:Ij,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},Dw=G.extend(Fo,jj),qj=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Dw),qj(Dw)})()})(yk);var Fp=yk.exports,Lq=(l,u)=>{const m=l.__vccOpts||l;for(const[g,h]of u)m[g]=h;return m};const Fq=Y_({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.0.3"},baseUrl:{type:String,default:"https://unpkg.com/"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,u){const m=H4(null);let g=null,h={};function E(){if(m.value){h=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},l.config);const oe=l.baseUrl,ve="zh_CN",ke="en_US";if(h.language===ke?(delete h.language,delete h.language_url):(h.language||(h.language=ve),!h.language_url&&h.language===ve&&(h.language_url=`${oe}@panhezeng/vue-tinymce@latest/dist/langs/${h.language}.js`),!h.font_formats&&h.language===ve&&(h.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(h.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${h.font_formats||""}`,h.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(h.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${h.font_formats||""}`,h.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(h.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${h.font_formats||""}`,h.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),h.external_plugins||(h.external_plugins={}),!h.external_plugins.textindentoutdent){const Ve=Object.keys(h);for(let mt=Ve.length-1;mt>=0;mt--){const ht=Ve[mt];if(ht&&typeof ht=="string"&&ht.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(h[ht]))){h.language===ve&&(h.external_plugins.textindentoutdentzhcn=`${oe}@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),h.external_plugins.textindentoutdent=`${oe}@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}h.target=m.value,h.init_instance_callback=Ve=>{m.value&&(g=Ve,T(),g.on(l.updateEvent,O),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(g))}}}function T(){hu().then(()=>{m.value&&g&&g.getContent()!==l.modelValue&&g.setContent(l.modelValue)})}function O(){hu().then(()=>{if(m.value&&g){const oe=g.getContent();u.emit("update:modelValue",oe),u.emit("content-change",oe)}})}function F(){try{m.value&&g&&(g.plugins.autosave&&g.plugins.autosave.removeDraft(),Fp.PluginManager.remove("autosave"),g.remove(),g.destroy(),g=null)}catch{return}}function Q(){hu().then(()=>{m.value&&(F(),E(),Fp.init(h))})}return bu(()=>l.config,()=>{Q()},{deep:!0}),Z_(()=>{Fp.EditorManager.baseURL=l.url,Q()}),J_(()=>{F()}),{editorElement:m}}}),Mq={class:"vue-tinymce-comp"},Uq={ref:"editorElement"};function zq(l,u,m,g,h,E){return _u(),dk("div",Mq,[Jn("textarea",Uq,null,512)])}var Mp=Lq(Fq,[["render",zq]]);const Hq=Object.assign(Mp,{install:l=>{l.component(Mp.name,Mp)}}),vk=wq($q);vk.use(Hq);vk.mount("#app");
