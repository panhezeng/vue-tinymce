const M4=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))g(b);new MutationObserver(b=>{for(const E of b)if(E.type==="childList")for(const N of E.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&g(N)}).observe(document,{childList:!0,subtree:!0});function m(b){const E={};return b.integrity&&(E.integrity=b.integrity),b.referrerpolicy&&(E.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?E.credentials="include":b.crossorigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function g(b){if(b.ep)return;b.ep=!0;const E=m(b);fetch(b.href,E)}};M4();function dg(l,u){const m=Object.create(null),g=l.split(",");for(let b=0;b<g.length;b++)m[g[b]]=!0;return u?b=>!!m[b.toLowerCase()]:b=>!!m[b]}const U4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",z4=dg(U4);function L_(l){return!!l||l===""}function mg(l){if(Xe(l)){const u={};for(let m=0;m<l.length;m++){const g=l[m],b=cn(g)?W4(g):mg(g);if(b)for(const E in b)u[E]=b[E]}return u}else{if(cn(l))return l;if(un(l))return l}}const H4=/;(?![^(]*\))/g,V4=/:(.+)/;function W4(l){const u={};return l.split(H4).forEach(m=>{if(m){const g=m.split(V4);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function pg(l){let u="";if(cn(l))u=l;else if(Xe(l))for(let m=0;m<l.length;m++){const g=pg(l[m]);g&&(u+=g+" ")}else if(un(l))for(const m in l)l[m]&&(u+=m+" ");return u.trim()}const j4=l=>cn(l)?l:l==null?"":Xe(l)||un(l)&&(l.toString===H_||!Ye(l.toString))?JSON.stringify(l,M_,2):String(l),M_=(l,u)=>u&&u.__v_isRef?M_(l,u.value):Di(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((m,[g,b])=>(m[`${g} =>`]=b,m),{})}:U_(u)?{[`Set(${u.size})`]:[...u.values()]}:un(u)&&!Xe(u)&&!V_(u)?String(u):u,xt={},Oi=[],ys=()=>{},q4=()=>!1,K4=/^on[^a-z]/,Ou=l=>K4.test(l),gg=l=>l.startsWith("onUpdate:"),An=Object.assign,hg=(l,u)=>{const m=l.indexOf(u);m>-1&&l.splice(m,1)},G4=Object.prototype.hasOwnProperty,rt=(l,u)=>G4.call(l,u),Xe=Array.isArray,Di=l=>Du(l)==="[object Map]",U_=l=>Du(l)==="[object Set]",Ye=l=>typeof l=="function",cn=l=>typeof l=="string",bg=l=>typeof l=="symbol",un=l=>l!==null&&typeof l=="object",z_=l=>un(l)&&Ye(l.then)&&Ye(l.catch),H_=Object.prototype.toString,Du=l=>H_.call(l),Y4=l=>Du(l).slice(8,-1),V_=l=>Du(l)==="[object Object]",Cg=l=>cn(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,wu=dg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bu=l=>{const u=Object.create(null);return m=>u[m]||(u[m]=l(m))},X4=/-(\w)/g,Gs=Bu(l=>l.replace(X4,(u,m)=>m?m.toUpperCase():"")),Q4=/\B([A-Z])/g,Fi=Bu(l=>l.replace(Q4,"-$1").toLowerCase()),$u=Bu(l=>l.charAt(0).toUpperCase()+l.slice(1)),Wp=Bu(l=>l?`on${$u(l)}`:""),rl=(l,u)=>!Object.is(l,u),jp=(l,u)=>{for(let m=0;m<l.length;m++)l[m](u)},ku=(l,u,m)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,value:m})},Z4=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let f_;const J4=()=>f_||(f_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ws;class e9{constructor(u=!1){this.active=!0,this.effects=[],this.cleanups=[],!u&&Ws&&(this.parent=Ws,this.index=(Ws.scopes||(Ws.scopes=[])).push(this)-1)}run(u){if(this.active){const m=Ws;try{return Ws=this,u()}finally{Ws=m}}}on(){Ws=this}off(){Ws=this.parent}stop(u){if(this.active){let m,g;for(m=0,g=this.effects.length;m<g;m++)this.effects[m].stop();for(m=0,g=this.cleanups.length;m<g;m++)this.cleanups[m]();if(this.scopes)for(m=0,g=this.scopes.length;m<g;m++)this.scopes[m].stop(!0);if(this.parent&&!u){const b=this.parent.scopes.pop();b&&b!==this&&(this.parent.scopes[this.index]=b,b.index=this.index)}this.active=!1}}}function t9(l,u=Ws){u&&u.active&&u.effects.push(l)}const yg=l=>{const u=new Set(l);return u.w=0,u.n=0,u},W_=l=>(l.w&jo)>0,j_=l=>(l.n&jo)>0,n9=({deps:l})=>{if(l.length)for(let u=0;u<l.length;u++)l[u].w|=jo},s9=l=>{const{deps:u}=l;if(u.length){let m=0;for(let g=0;g<u.length;g++){const b=u[g];W_(b)&&!j_(b)?b.delete(l):u[m++]=b,b.w&=~jo,b.n&=~jo}u.length=m}},Zp=new WeakMap;let Ja=0,jo=1;const Jp=30;let bs;const Dr=Symbol(""),eg=Symbol("");class vg{constructor(u,m=null,g){this.fn=u,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,t9(this,g)}run(){if(!this.active)return this.fn();let u=bs,m=Vo;for(;u;){if(u===this)return;u=u.parent}try{return this.parent=bs,bs=this,Vo=!0,jo=1<<++Ja,Ja<=Jp?n9(this):d_(this),this.fn()}finally{Ja<=Jp&&s9(this),jo=1<<--Ja,bs=this.parent,Vo=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){bs===this?this.deferStop=!0:this.active&&(d_(this),this.onStop&&this.onStop(),this.active=!1)}}function d_(l){const{deps:u}=l;if(u.length){for(let m=0;m<u.length;m++)u[m].delete(l);u.length=0}}let Vo=!0;const q_=[];function Li(){q_.push(Vo),Vo=!1}function Mi(){const l=q_.pop();Vo=l===void 0?!0:l}function jn(l,u,m){if(Vo&&bs){let g=Zp.get(l);g||Zp.set(l,g=new Map);let b=g.get(m);b||g.set(m,b=yg()),K_(b)}}function K_(l,u){let m=!1;Ja<=Jp?j_(l)||(l.n|=jo,m=!W_(l)):m=!l.has(bs),m&&(l.add(bs),bs.deps.push(l))}function ho(l,u,m,g,b,E){const N=Zp.get(l);if(!N)return;let D=[];if(u==="clear")D=[...N.values()];else if(m==="length"&&Xe(l))N.forEach((L,Z)=>{(Z==="length"||Z>=g)&&D.push(L)});else switch(m!==void 0&&D.push(N.get(m)),u){case"add":Xe(l)?Cg(m)&&D.push(N.get("length")):(D.push(N.get(Dr)),Di(l)&&D.push(N.get(eg)));break;case"delete":Xe(l)||(D.push(N.get(Dr)),Di(l)&&D.push(N.get(eg)));break;case"set":Di(l)&&D.push(N.get(Dr));break}if(D.length===1)D[0]&&tg(D[0]);else{const L=[];for(const Z of D)Z&&L.push(...Z);tg(yg(L))}}function tg(l,u){const m=Xe(l)?l:[...l];for(const g of m)g.computed&&m_(g);for(const g of m)g.computed||m_(g)}function m_(l,u){(l!==bs||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const o9=dg("__proto__,__v_isRef,__isVue"),G_=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(bg)),r9=Eg(),i9=Eg(!1,!0),a9=Eg(!0),p_=l9();function l9(){const l={};return["includes","indexOf","lastIndexOf"].forEach(u=>{l[u]=function(...m){const g=dt(this);for(let E=0,N=this.length;E<N;E++)jn(g,"get",E+"");const b=g[u](...m);return b===-1||b===!1?g[u](...m.map(dt)):b}}),["push","pop","shift","unshift","splice"].forEach(u=>{l[u]=function(...m){Li();const g=dt(this)[u].apply(this,m);return Mi(),g}}),l}function Eg(l=!1,u=!1){return function(g,b,E){if(b==="__v_isReactive")return!l;if(b==="__v_isReadonly")return l;if(b==="__v_isShallow")return u;if(b==="__v_raw"&&E===(l?u?S9:J_:u?Z_:Q_).get(g))return g;const N=Xe(g);if(!l&&N&&rt(p_,b))return Reflect.get(p_,b,E);const D=Reflect.get(g,b,E);return(bg(b)?G_.has(b):o9(b))||(l||jn(g,"get",b),u)?D:bn(D)?N&&Cg(b)?D:D.value:un(D)?l?ek(D):Fu(D):D}}const c9=Y_(),u9=Y_(!0);function Y_(l=!1){return function(m,g,b,E){let N=m[g];if(il(N)&&bn(N)&&!bn(b))return!1;if(!l&&!il(b)&&(ng(b)||(b=dt(b),N=dt(N)),!Xe(m)&&bn(N)&&!bn(b)))return N.value=b,!0;const D=Xe(m)&&Cg(g)?Number(g)<m.length:rt(m,g),L=Reflect.set(m,g,b,E);return m===dt(E)&&(D?rl(b,N)&&ho(m,"set",g,b):ho(m,"add",g,b)),L}}function f9(l,u){const m=rt(l,u);l[u];const g=Reflect.deleteProperty(l,u);return g&&m&&ho(l,"delete",u,void 0),g}function d9(l,u){const m=Reflect.has(l,u);return(!bg(u)||!G_.has(u))&&jn(l,"has",u),m}function m9(l){return jn(l,"iterate",Xe(l)?"length":Dr),Reflect.ownKeys(l)}const X_={get:r9,set:c9,deleteProperty:f9,has:d9,ownKeys:m9},p9={get:a9,set(l,u){return!0},deleteProperty(l,u){return!0}},g9=An({},X_,{get:i9,set:u9}),wg=l=>l,Iu=l=>Reflect.getPrototypeOf(l);function bu(l,u,m=!1,g=!1){l=l.__v_raw;const b=dt(l),E=dt(u);m||(u!==E&&jn(b,"get",u),jn(b,"get",E));const{has:N}=Iu(b),D=g?wg:m?_g:al;if(N.call(b,u))return D(l.get(u));if(N.call(b,E))return D(l.get(E));l!==b&&l.get(u)}function Cu(l,u=!1){const m=this.__v_raw,g=dt(m),b=dt(l);return u||(l!==b&&jn(g,"has",l),jn(g,"has",b)),l===b?m.has(l):m.has(l)||m.has(b)}function yu(l,u=!1){return l=l.__v_raw,!u&&jn(dt(l),"iterate",Dr),Reflect.get(l,"size",l)}function g_(l){l=dt(l);const u=dt(this);return Iu(u).has.call(u,l)||(u.add(l),ho(u,"add",l,l)),this}function h_(l,u){u=dt(u);const m=dt(this),{has:g,get:b}=Iu(m);let E=g.call(m,l);E||(l=dt(l),E=g.call(m,l));const N=b.call(m,l);return m.set(l,u),E?rl(u,N)&&ho(m,"set",l,u):ho(m,"add",l,u),this}function b_(l){const u=dt(this),{has:m,get:g}=Iu(u);let b=m.call(u,l);b||(l=dt(l),b=m.call(u,l)),g&&g.call(u,l);const E=u.delete(l);return b&&ho(u,"delete",l,void 0),E}function C_(){const l=dt(this),u=l.size!==0,m=l.clear();return u&&ho(l,"clear",void 0,void 0),m}function vu(l,u){return function(g,b){const E=this,N=E.__v_raw,D=dt(N),L=u?wg:l?_g:al;return!l&&jn(D,"iterate",Dr),N.forEach((Z,se)=>g.call(b,L(Z),L(se),E))}}function Eu(l,u,m){return function(...g){const b=this.__v_raw,E=dt(b),N=Di(E),D=l==="entries"||l===Symbol.iterator&&N,L=l==="keys"&&N,Z=b[l](...g),se=m?wg:u?_g:al;return!u&&jn(E,"iterate",L?eg:Dr),{next(){const{value:ye,done:Ne}=Z.next();return Ne?{value:ye,done:Ne}:{value:D?[se(ye[0]),se(ye[1])]:se(ye),done:Ne}},[Symbol.iterator](){return this}}}}function Uo(l){return function(...u){return l==="delete"?!1:this}}function h9(){const l={get(E){return bu(this,E)},get size(){return yu(this)},has:Cu,add:g_,set:h_,delete:b_,clear:C_,forEach:vu(!1,!1)},u={get(E){return bu(this,E,!1,!0)},get size(){return yu(this)},has:Cu,add:g_,set:h_,delete:b_,clear:C_,forEach:vu(!1,!0)},m={get(E){return bu(this,E,!0)},get size(){return yu(this,!0)},has(E){return Cu.call(this,E,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:vu(!0,!1)},g={get(E){return bu(this,E,!0,!0)},get size(){return yu(this,!0)},has(E){return Cu.call(this,E,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:vu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=Eu(E,!1,!1),m[E]=Eu(E,!0,!1),u[E]=Eu(E,!1,!0),g[E]=Eu(E,!0,!0)}),[l,m,u,g]}const[b9,C9,y9,v9]=h9();function xg(l,u){const m=u?l?v9:y9:l?C9:b9;return(g,b,E)=>b==="__v_isReactive"?!l:b==="__v_isReadonly"?l:b==="__v_raw"?g:Reflect.get(rt(m,b)&&b in g?m:g,b,E)}const E9={get:xg(!1,!1)},w9={get:xg(!1,!0)},x9={get:xg(!0,!1)},Q_=new WeakMap,Z_=new WeakMap,J_=new WeakMap,S9=new WeakMap;function _9(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function k9(l){return l.__v_skip||!Object.isExtensible(l)?0:_9(Y4(l))}function Fu(l){return il(l)?l:Sg(l,!1,X_,E9,Q_)}function N9(l){return Sg(l,!1,g9,w9,Z_)}function ek(l){return Sg(l,!0,p9,x9,J_)}function Sg(l,u,m,g,b){if(!un(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const E=b.get(l);if(E)return E;const N=k9(l);if(N===0)return l;const D=new Proxy(l,N===2?g:m);return b.set(l,D),D}function Bi(l){return il(l)?Bi(l.__v_raw):!!(l&&l.__v_isReactive)}function il(l){return!!(l&&l.__v_isReadonly)}function ng(l){return!!(l&&l.__v_isShallow)}function tk(l){return Bi(l)||il(l)}function dt(l){const u=l&&l.__v_raw;return u?dt(u):l}function nk(l){return ku(l,"__v_skip",!0),l}const al=l=>un(l)?Fu(l):l,_g=l=>un(l)?ek(l):l;function sk(l){Vo&&bs&&(l=dt(l),K_(l.dep||(l.dep=yg())))}function ok(l,u){l=dt(l),l.dep&&tg(l.dep)}function bn(l){return!!(l&&l.__v_isRef===!0)}function A9(l){return T9(l,!1)}function T9(l,u){return bn(l)?l:new R9(l,u)}class R9{constructor(u,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?u:dt(u),this._value=m?u:al(u)}get value(){return sk(this),this._value}set value(u){u=this.__v_isShallow?u:dt(u),rl(u,this._rawValue)&&(this._rawValue=u,this._value=this.__v_isShallow?u:al(u),ok(this))}}function P9(l){return bn(l)?l.value:l}const O9={get:(l,u,m)=>P9(Reflect.get(l,u,m)),set:(l,u,m,g)=>{const b=l[u];return bn(b)&&!bn(m)?(b.value=m,!0):Reflect.set(l,u,m,g)}};function rk(l){return Bi(l)?l:new Proxy(l,O9)}class D9{constructor(u,m,g,b){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new vg(u,()=>{this._dirty||(this._dirty=!0,ok(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!b,this.__v_isReadonly=g}get value(){const u=dt(this);return sk(u),(u._dirty||!u._cacheable)&&(u._dirty=!1,u._value=u.effect.run()),u._value}set value(u){this._setter(u)}}function B9(l,u,m=!1){let g,b;const E=Ye(l);return E?(g=l,b=ys):(g=l.get,b=l.set),new D9(g,b,E||!b,m)}function Wo(l,u,m,g){let b;try{b=g?l(...g):l()}catch(E){Lu(E,u,m)}return b}function vs(l,u,m,g){if(Ye(l)){const E=Wo(l,u,m,g);return E&&z_(E)&&E.catch(N=>{Lu(N,u,m)}),E}const b=[];for(let E=0;E<l.length;E++)b.push(vs(l[E],u,m,g));return b}function Lu(l,u,m,g=!0){const b=u?u.vnode:null;if(u){let E=u.parent;const N=u.proxy,D=m;for(;E;){const Z=E.ec;if(Z){for(let se=0;se<Z.length;se++)if(Z[se](l,N,D)===!1)return}E=E.parent}const L=u.appContext.config.errorHandler;if(L){Wo(L,null,10,[l,N,D]);return}}$9(l,m,b,g)}function $9(l,u,m,g=!0){console.error(l)}let Nu=!1,sg=!1;const Wn=[];let po=0;const tl=[];let el=null,Ti=0;const nl=[];let zo=null,Ri=0;const ik=Promise.resolve();let kg=null,og=null;function xu(l){const u=kg||ik;return l?u.then(this?l.bind(this):l):u}function I9(l){let u=po+1,m=Wn.length;for(;u<m;){const g=u+m>>>1;ll(Wn[g])<l?u=g+1:m=g}return u}function ak(l){(!Wn.length||!Wn.includes(l,Nu&&l.allowRecurse?po+1:po))&&l!==og&&(l.id==null?Wn.push(l):Wn.splice(I9(l.id),0,l),lk())}function lk(){!Nu&&!sg&&(sg=!0,kg=ik.then(fk))}function F9(l){const u=Wn.indexOf(l);u>po&&Wn.splice(u,1)}function ck(l,u,m,g){Xe(l)?m.push(...l):(!u||!u.includes(l,l.allowRecurse?g+1:g))&&m.push(l),lk()}function L9(l){ck(l,el,tl,Ti)}function M9(l){ck(l,zo,nl,Ri)}function Mu(l,u=null){if(tl.length){for(og=u,el=[...new Set(tl)],tl.length=0,Ti=0;Ti<el.length;Ti++)el[Ti]();el=null,Ti=0,og=null,Mu(l,u)}}function uk(l){if(Mu(),nl.length){const u=[...new Set(nl)];if(nl.length=0,zo){zo.push(...u);return}for(zo=u,zo.sort((m,g)=>ll(m)-ll(g)),Ri=0;Ri<zo.length;Ri++)zo[Ri]();zo=null,Ri=0}}const ll=l=>l.id==null?1/0:l.id;function fk(l){sg=!1,Nu=!0,Mu(l),Wn.sort((m,g)=>ll(m)-ll(g));const u=ys;try{for(po=0;po<Wn.length;po++){const m=Wn[po];m&&m.active!==!1&&Wo(m,null,14)}}finally{po=0,Wn.length=0,uk(),Nu=!1,kg=null,(Wn.length||tl.length||nl.length)&&fk(l)}}function U9(l,u,...m){if(l.isUnmounted)return;const g=l.vnode.props||xt;let b=m;const E=u.startsWith("update:"),N=E&&u.slice(7);if(N&&N in g){const se=`${N==="modelValue"?"model":N}Modifiers`,{number:ye,trim:Ne}=g[se]||xt;Ne&&(b=m.map(Me=>Me.trim())),ye&&(b=m.map(Z4))}let D,L=g[D=Wp(u)]||g[D=Wp(Gs(u))];!L&&E&&(L=g[D=Wp(Fi(u))]),L&&vs(L,l,6,b);const Z=g[D+"Once"];if(Z){if(!l.emitted)l.emitted={};else if(l.emitted[D])return;l.emitted[D]=!0,vs(Z,l,6,b)}}function dk(l,u,m=!1){const g=u.emitsCache,b=g.get(l);if(b!==void 0)return b;const E=l.emits;let N={},D=!1;if(!Ye(l)){const L=Z=>{const se=dk(Z,u,!0);se&&(D=!0,An(N,se))};!m&&u.mixins.length&&u.mixins.forEach(L),l.extends&&L(l.extends),l.mixins&&l.mixins.forEach(L)}return!E&&!D?(g.set(l,null),null):(Xe(E)?E.forEach(L=>N[L]=null):An(N,E),g.set(l,N),N)}function Uu(l,u){return!l||!Ou(u)?!1:(u=u.slice(2).replace(/Once$/,""),rt(l,u[0].toLowerCase()+u.slice(1))||rt(l,Fi(u))||rt(l,u))}let Ks=null,mk=null;function Au(l){const u=Ks;return Ks=l,mk=l&&l.type.__scopeId||null,u}function z9(l,u=Ks,m){if(!u||l._n)return l;const g=(...b)=>{g._d&&A_(-1);const E=Au(u),N=l(...b);return Au(E),g._d&&A_(1),N};return g._n=!0,g._c=!0,g._d=!0,g}function qp(l){const{type:u,vnode:m,proxy:g,withProxy:b,props:E,propsOptions:[N],slots:D,attrs:L,emit:Z,render:se,renderCache:ye,data:Ne,setupState:Me,ctx:mt,inheritAttrs:Ct}=l;let et,lt;const Dn=Au(l);try{if(m.shapeFlag&4){const ft=b||g;et=qs(se.call(ft,ft,ye,E,Me,Ne,mt)),lt=L}else{const ft=u;et=qs(ft.length>1?ft(E,{attrs:L,slots:D,emit:Z}):ft(E,null)),lt=u.props?L:H9(L)}}catch(ft){ol.length=0,Lu(ft,l,1),et=go($r)}let me=et;if(lt&&Ct!==!1){const ft=Object.keys(lt),{shapeFlag:Ys}=me;ft.length&&Ys&7&&(N&&ft.some(gg)&&(lt=V9(lt,N)),me=$i(me,lt))}return m.dirs&&(me=$i(me),me.dirs=me.dirs?me.dirs.concat(m.dirs):m.dirs),m.transition&&(me.transition=m.transition),et=me,Au(Dn),et}const H9=l=>{let u;for(const m in l)(m==="class"||m==="style"||Ou(m))&&((u||(u={}))[m]=l[m]);return u},V9=(l,u)=>{const m={};for(const g in l)(!gg(g)||!(g.slice(9)in u))&&(m[g]=l[g]);return m};function W9(l,u,m){const{props:g,children:b,component:E}=l,{props:N,children:D,patchFlag:L}=u,Z=E.emitsOptions;if(u.dirs||u.transition)return!0;if(m&&L>=0){if(L&1024)return!0;if(L&16)return g?y_(g,N,Z):!!N;if(L&8){const se=u.dynamicProps;for(let ye=0;ye<se.length;ye++){const Ne=se[ye];if(N[Ne]!==g[Ne]&&!Uu(Z,Ne))return!0}}}else return(b||D)&&(!D||!D.$stable)?!0:g===N?!1:g?N?y_(g,N,Z):!0:!!N;return!1}function y_(l,u,m){const g=Object.keys(u);if(g.length!==Object.keys(l).length)return!0;for(let b=0;b<g.length;b++){const E=g[b];if(u[E]!==l[E]&&!Uu(m,E))return!0}return!1}function j9({vnode:l,parent:u},m){for(;u&&u.subTree===l;)(l=u.vnode).el=m,u=u.parent}const q9=l=>l.__isSuspense;function K9(l,u){u&&u.pendingBranch?Xe(l)?u.effects.push(...l):u.effects.push(l):M9(l)}function G9(l,u){if(ln){let m=ln.provides;const g=ln.parent&&ln.parent.provides;g===m&&(m=ln.provides=Object.create(g)),m[l]=u}}function Kp(l,u,m=!1){const g=ln||Ks;if(g){const b=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(b&&l in b)return b[l];if(arguments.length>1)return m&&Ye(u)?u.call(g.proxy):u}}const v_={};function sl(l,u,m){return pk(l,u,m)}function pk(l,u,{immediate:m,deep:g,flush:b,onTrack:E,onTrigger:N}=xt){const D=ln;let L,Z=!1,se=!1;if(bn(l)?(L=()=>l.value,Z=ng(l)):Bi(l)?(L=()=>l,g=!0):Xe(l)?(se=!0,Z=l.some(lt=>Bi(lt)||ng(lt)),L=()=>l.map(lt=>{if(bn(lt))return lt.value;if(Bi(lt))return Pi(lt);if(Ye(lt))return Wo(lt,D,2)})):Ye(l)?u?L=()=>Wo(l,D,2):L=()=>{if(!(D&&D.isUnmounted))return ye&&ye(),vs(l,D,3,[Ne])}:L=ys,u&&g){const lt=L;L=()=>Pi(lt())}let ye,Ne=lt=>{ye=et.onStop=()=>{Wo(lt,D,4)}};if(ul)return Ne=ys,u?m&&vs(u,D,3,[L(),se?[]:void 0,Ne]):L(),ys;let Me=se?[]:v_;const mt=()=>{if(!!et.active)if(u){const lt=et.run();(g||Z||(se?lt.some((Dn,me)=>rl(Dn,Me[me])):rl(lt,Me)))&&(ye&&ye(),vs(u,D,3,[lt,Me===v_?void 0:Me,Ne]),Me=lt)}else et.run()};mt.allowRecurse=!!u;let Ct;b==="sync"?Ct=mt:b==="post"?Ct=()=>On(mt,D&&D.suspense):Ct=()=>L9(mt);const et=new vg(L,Ct);return u?m?mt():Me=et.run():b==="post"?On(et.run.bind(et),D&&D.suspense):et.run(),()=>{et.stop(),D&&D.scope&&hg(D.scope.effects,et)}}function Y9(l,u,m){const g=this.proxy,b=cn(l)?l.includes(".")?gk(g,l):()=>g[l]:l.bind(g,g);let E;Ye(u)?E=u:(E=u.handler,m=u);const N=ln;Ii(this);const D=pk(b,E.bind(g),m);return N?Ii(N):Br(),D}function gk(l,u){const m=u.split(".");return()=>{let g=l;for(let b=0;b<m.length&&g;b++)g=g[m[b]];return g}}function Pi(l,u){if(!un(l)||l.__v_skip||(u=u||new Set,u.has(l)))return l;if(u.add(l),bn(l))Pi(l.value,u);else if(Xe(l))for(let m=0;m<l.length;m++)Pi(l[m],u);else if(U_(l)||Di(l))l.forEach(m=>{Pi(m,u)});else if(V_(l))for(const m in l)Pi(l[m],u);return l}function hk(l){return Ye(l)?{setup:l,name:l.name}:l}const Su=l=>!!l.type.__asyncLoader,bk=l=>l.type.__isKeepAlive;function X9(l,u){Ck(l,"a",u)}function Q9(l,u){Ck(l,"da",u)}function Ck(l,u,m=ln){const g=l.__wdc||(l.__wdc=()=>{let b=m;for(;b;){if(b.isDeactivated)return;b=b.parent}return l()});if(zu(u,g,m),m){let b=m.parent;for(;b&&b.parent;)bk(b.parent.vnode)&&Z9(g,u,m,b),b=b.parent}}function Z9(l,u,m,g){const b=zu(u,l,g,!0);Ek(()=>{hg(g[u],b)},m)}function zu(l,u,m=ln,g=!1){if(m){const b=m[l]||(m[l]=[]),E=u.__weh||(u.__weh=(...N)=>{if(m.isUnmounted)return;Li(),Ii(m);const D=vs(u,m,l,N);return Br(),Mi(),D});return g?b.unshift(E):b.push(E),E}}const bo=l=>(u,m=ln)=>(!ul||l==="sp")&&zu(l,u,m),J9=bo("bm"),yk=bo("m"),eq=bo("bu"),tq=bo("u"),vk=bo("bum"),Ek=bo("um"),nq=bo("sp"),sq=bo("rtg"),oq=bo("rtc");function rq(l,u=ln){zu("ec",l,u)}function Tr(l,u,m,g){const b=l.dirs,E=u&&u.dirs;for(let N=0;N<b.length;N++){const D=b[N];E&&(D.oldValue=E[N].value);let L=D.dir[g];L&&(Li(),vs(L,m,8,[l.el,D,l,u]),Mi())}}const wk="components";function iq(l,u){return lq(wk,l,!0,u)||l}const aq=Symbol();function lq(l,u,m=!0,g=!1){const b=Ks||ln;if(b){const E=b.type;if(l===wk){const D=Uq(E,!1);if(D&&(D===u||D===Gs(u)||D===$u(Gs(u))))return E}const N=E_(b[l]||E[l],u)||E_(b.appContext[l],u);return!N&&g?E:N}}function E_(l,u){return l&&(l[u]||l[Gs(u)]||l[$u(Gs(u))])}const rg=l=>l?Ik(l)?Rg(l)||l.proxy:rg(l.parent):null,Tu=An(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>rg(l.parent),$root:l=>rg(l.root),$emit:l=>l.emit,$options:l=>Sk(l),$forceUpdate:l=>l.f||(l.f=()=>ak(l.update)),$nextTick:l=>l.n||(l.n=xu.bind(l.proxy)),$watch:l=>Y9.bind(l)}),cq={get({_:l},u){const{ctx:m,setupState:g,data:b,props:E,accessCache:N,type:D,appContext:L}=l;let Z;if(u[0]!=="$"){const Me=N[u];if(Me!==void 0)switch(Me){case 1:return g[u];case 2:return b[u];case 4:return m[u];case 3:return E[u]}else{if(g!==xt&&rt(g,u))return N[u]=1,g[u];if(b!==xt&&rt(b,u))return N[u]=2,b[u];if((Z=l.propsOptions[0])&&rt(Z,u))return N[u]=3,E[u];if(m!==xt&&rt(m,u))return N[u]=4,m[u];ig&&(N[u]=0)}}const se=Tu[u];let ye,Ne;if(se)return u==="$attrs"&&jn(l,"get",u),se(l);if((ye=D.__cssModules)&&(ye=ye[u]))return ye;if(m!==xt&&rt(m,u))return N[u]=4,m[u];if(Ne=L.config.globalProperties,rt(Ne,u))return Ne[u]},set({_:l},u,m){const{data:g,setupState:b,ctx:E}=l;return b!==xt&&rt(b,u)?(b[u]=m,!0):g!==xt&&rt(g,u)?(g[u]=m,!0):rt(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(E[u]=m,!0)},has({_:{data:l,setupState:u,accessCache:m,ctx:g,appContext:b,propsOptions:E}},N){let D;return!!m[N]||l!==xt&&rt(l,N)||u!==xt&&rt(u,N)||(D=E[0])&&rt(D,N)||rt(g,N)||rt(Tu,N)||rt(b.config.globalProperties,N)},defineProperty(l,u,m){return m.get!=null?l._.accessCache[u]=0:rt(m,"value")&&this.set(l,u,m.value,null),Reflect.defineProperty(l,u,m)}};let ig=!0;function uq(l){const u=Sk(l),m=l.proxy,g=l.ctx;ig=!1,u.beforeCreate&&w_(u.beforeCreate,l,"bc");const{data:b,computed:E,methods:N,watch:D,provide:L,inject:Z,created:se,beforeMount:ye,mounted:Ne,beforeUpdate:Me,updated:mt,activated:Ct,deactivated:et,beforeDestroy:lt,beforeUnmount:Dn,destroyed:me,unmounted:ft,render:Ys,renderTracked:kt,renderTriggered:Xs,errorCaptured:qn,serverPrefetch:At,expose:$t,inheritAttrs:ke,components:Ge,directives:Cn,filters:Qs}=u;if(Z&&fq(Z,g,null,l.appContext.config.unwrapInjectedRef),N)for(const St in N){const K=N[St];Ye(K)&&(g[St]=K.bind(m))}if(b){const St=b.call(m,m);un(St)&&(l.data=Fu(St))}if(ig=!0,E)for(const St in E){const K=E[St],wt=Ye(K)?K.bind(m,m):Ye(K.get)?K.get.bind(m,m):ys,Ui=!Ye(K)&&Ye(K.set)?K.set.bind(m):ys,re=Lk({get:wt,set:Ui});Object.defineProperty(g,St,{enumerable:!0,configurable:!0,get:()=>re.value,set:Es=>re.value=Es})}if(D)for(const St in D)xk(D[St],g,m,St);if(L){const St=Ye(L)?L.call(m):L;Reflect.ownKeys(St).forEach(K=>{G9(K,St[K])})}se&&w_(se,l,"c");function Ot(St,K){Xe(K)?K.forEach(wt=>St(wt.bind(m))):K&&St(K.bind(m))}if(Ot(J9,ye),Ot(yk,Ne),Ot(eq,Me),Ot(tq,mt),Ot(X9,Ct),Ot(Q9,et),Ot(rq,qn),Ot(oq,kt),Ot(sq,Xs),Ot(vk,Dn),Ot(Ek,ft),Ot(nq,At),Xe($t))if($t.length){const St=l.exposed||(l.exposed={});$t.forEach(K=>{Object.defineProperty(St,K,{get:()=>m[K],set:wt=>m[K]=wt})})}else l.exposed||(l.exposed={});Ys&&l.render===ys&&(l.render=Ys),ke!=null&&(l.inheritAttrs=ke),Ge&&(l.components=Ge),Cn&&(l.directives=Cn)}function fq(l,u,m=ys,g=!1){Xe(l)&&(l=ag(l));for(const b in l){const E=l[b];let N;un(E)?"default"in E?N=Kp(E.from||b,E.default,!0):N=Kp(E.from||b):N=Kp(E),bn(N)&&g?Object.defineProperty(u,b,{enumerable:!0,configurable:!0,get:()=>N.value,set:D=>N.value=D}):u[b]=N}}function w_(l,u,m){vs(Xe(l)?l.map(g=>g.bind(u.proxy)):l.bind(u.proxy),u,m)}function xk(l,u,m,g){const b=g.includes(".")?gk(m,g):()=>m[g];if(cn(l)){const E=u[l];Ye(E)&&sl(b,E)}else if(Ye(l))sl(b,l.bind(m));else if(un(l))if(Xe(l))l.forEach(E=>xk(E,u,m,g));else{const E=Ye(l.handler)?l.handler.bind(m):u[l.handler];Ye(E)&&sl(b,E,l)}}function Sk(l){const u=l.type,{mixins:m,extends:g}=u,{mixins:b,optionsCache:E,config:{optionMergeStrategies:N}}=l.appContext,D=E.get(u);let L;return D?L=D:!b.length&&!m&&!g?L=u:(L={},b.length&&b.forEach(Z=>Ru(L,Z,N,!0)),Ru(L,u,N)),E.set(u,L),L}function Ru(l,u,m,g=!1){const{mixins:b,extends:E}=u;E&&Ru(l,E,m,!0),b&&b.forEach(N=>Ru(l,N,m,!0));for(const N in u)if(!(g&&N==="expose")){const D=dq[N]||m&&m[N];l[N]=D?D(l[N],u[N]):u[N]}return l}const dq={data:x_,props:Pr,emits:Pr,methods:Pr,computed:Pr,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,beforeUnmount:Nn,destroyed:Nn,unmounted:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:Pr,directives:Pr,watch:pq,provide:x_,inject:mq};function x_(l,u){return u?l?function(){return An(Ye(l)?l.call(this,this):l,Ye(u)?u.call(this,this):u)}:u:l}function mq(l,u){return Pr(ag(l),ag(u))}function ag(l){if(Xe(l)){const u={};for(let m=0;m<l.length;m++)u[l[m]]=l[m];return u}return l}function Nn(l,u){return l?[...new Set([].concat(l,u))]:u}function Pr(l,u){return l?An(An(Object.create(null),l),u):u}function pq(l,u){if(!l)return u;if(!u)return l;const m=An(Object.create(null),l);for(const g in u)m[g]=Nn(l[g],u[g]);return m}function gq(l,u,m,g=!1){const b={},E={};ku(E,Hu,1),l.propsDefaults=Object.create(null),_k(l,u,b,E);for(const N in l.propsOptions[0])N in b||(b[N]=void 0);m?l.props=g?b:N9(b):l.type.props?l.props=b:l.props=E,l.attrs=E}function hq(l,u,m,g){const{props:b,attrs:E,vnode:{patchFlag:N}}=l,D=dt(b),[L]=l.propsOptions;let Z=!1;if((g||N>0)&&!(N&16)){if(N&8){const se=l.vnode.dynamicProps;for(let ye=0;ye<se.length;ye++){let Ne=se[ye];if(Uu(l.emitsOptions,Ne))continue;const Me=u[Ne];if(L)if(rt(E,Ne))Me!==E[Ne]&&(E[Ne]=Me,Z=!0);else{const mt=Gs(Ne);b[mt]=lg(L,D,mt,Me,l,!1)}else Me!==E[Ne]&&(E[Ne]=Me,Z=!0)}}}else{_k(l,u,b,E)&&(Z=!0);let se;for(const ye in D)(!u||!rt(u,ye)&&((se=Fi(ye))===ye||!rt(u,se)))&&(L?m&&(m[ye]!==void 0||m[se]!==void 0)&&(b[ye]=lg(L,D,ye,void 0,l,!0)):delete b[ye]);if(E!==D)for(const ye in E)(!u||!rt(u,ye)&&!0)&&(delete E[ye],Z=!0)}Z&&ho(l,"set","$attrs")}function _k(l,u,m,g){const[b,E]=l.propsOptions;let N=!1,D;if(u)for(let L in u){if(wu(L))continue;const Z=u[L];let se;b&&rt(b,se=Gs(L))?!E||!E.includes(se)?m[se]=Z:(D||(D={}))[se]=Z:Uu(l.emitsOptions,L)||(!(L in g)||Z!==g[L])&&(g[L]=Z,N=!0)}if(E){const L=dt(m),Z=D||xt;for(let se=0;se<E.length;se++){const ye=E[se];m[ye]=lg(b,L,ye,Z[ye],l,!rt(Z,ye))}}return N}function lg(l,u,m,g,b,E){const N=l[m];if(N!=null){const D=rt(N,"default");if(D&&g===void 0){const L=N.default;if(N.type!==Function&&Ye(L)){const{propsDefaults:Z}=b;m in Z?g=Z[m]:(Ii(b),g=Z[m]=L.call(null,u),Br())}else g=L}N[0]&&(E&&!D?g=!1:N[1]&&(g===""||g===Fi(m))&&(g=!0))}return g}function kk(l,u,m=!1){const g=u.propsCache,b=g.get(l);if(b)return b;const E=l.props,N={},D=[];let L=!1;if(!Ye(l)){const se=ye=>{L=!0;const[Ne,Me]=kk(ye,u,!0);An(N,Ne),Me&&D.push(...Me)};!m&&u.mixins.length&&u.mixins.forEach(se),l.extends&&se(l.extends),l.mixins&&l.mixins.forEach(se)}if(!E&&!L)return g.set(l,Oi),Oi;if(Xe(E))for(let se=0;se<E.length;se++){const ye=Gs(E[se]);S_(ye)&&(N[ye]=xt)}else if(E)for(const se in E){const ye=Gs(se);if(S_(ye)){const Ne=E[se],Me=N[ye]=Xe(Ne)||Ye(Ne)?{type:Ne}:Ne;if(Me){const mt=N_(Boolean,Me.type),Ct=N_(String,Me.type);Me[0]=mt>-1,Me[1]=Ct<0||mt<Ct,(mt>-1||rt(Me,"default"))&&D.push(ye)}}}const Z=[N,D];return g.set(l,Z),Z}function S_(l){return l[0]!=="$"}function __(l){const u=l&&l.toString().match(/^\s*function (\w+)/);return u?u[1]:l===null?"null":""}function k_(l,u){return __(l)===__(u)}function N_(l,u){return Xe(u)?u.findIndex(m=>k_(m,l)):Ye(u)&&k_(u,l)?0:-1}const Nk=l=>l[0]==="_"||l==="$stable",Ng=l=>Xe(l)?l.map(qs):[qs(l)],bq=(l,u,m)=>{if(u._n)return u;const g=z9((...b)=>Ng(u(...b)),m);return g._c=!1,g},Ak=(l,u,m)=>{const g=l._ctx;for(const b in l){if(Nk(b))continue;const E=l[b];if(Ye(E))u[b]=bq(b,E,g);else if(E!=null){const N=Ng(E);u[b]=()=>N}}},Tk=(l,u)=>{const m=Ng(u);l.slots.default=()=>m},Cq=(l,u)=>{if(l.vnode.shapeFlag&32){const m=u._;m?(l.slots=dt(u),ku(u,"_",m)):Ak(u,l.slots={})}else l.slots={},u&&Tk(l,u);ku(l.slots,Hu,1)},yq=(l,u,m)=>{const{vnode:g,slots:b}=l;let E=!0,N=xt;if(g.shapeFlag&32){const D=u._;D?m&&D===1?E=!1:(An(b,u),!m&&D===1&&delete b._):(E=!u.$stable,Ak(u,b)),N=u}else u&&(Tk(l,u),N={default:1});if(E)for(const D in b)!Nk(D)&&!(D in N)&&delete b[D]};function Rk(){return{app:null,config:{isNativeTag:q4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vq=0;function Eq(l,u){return function(g,b=null){Ye(g)||(g=Object.assign({},g)),b!=null&&!un(b)&&(b=null);const E=Rk(),N=new Set;let D=!1;const L=E.app={_uid:vq++,_component:g,_props:b,_container:null,_context:E,_instance:null,version:Hq,get config(){return E.config},set config(Z){},use(Z,...se){return N.has(Z)||(Z&&Ye(Z.install)?(N.add(Z),Z.install(L,...se)):Ye(Z)&&(N.add(Z),Z(L,...se))),L},mixin(Z){return E.mixins.includes(Z)||E.mixins.push(Z),L},component(Z,se){return se?(E.components[Z]=se,L):E.components[Z]},directive(Z,se){return se?(E.directives[Z]=se,L):E.directives[Z]},mount(Z,se,ye){if(!D){const Ne=go(g,b);return Ne.appContext=E,se&&u?u(Ne,Z):l(Ne,Z,ye),D=!0,L._container=Z,Z.__vue_app__=L,Rg(Ne.component)||Ne.component.proxy}},unmount(){D&&(l(null,L._container),delete L._container.__vue_app__)},provide(Z,se){return E.provides[Z]=se,L}};return L}}function cg(l,u,m,g,b=!1){if(Xe(l)){l.forEach((Ne,Me)=>cg(Ne,u&&(Xe(u)?u[Me]:u),m,g,b));return}if(Su(g)&&!b)return;const E=g.shapeFlag&4?Rg(g.component)||g.component.proxy:g.el,N=b?null:E,{i:D,r:L}=l,Z=u&&u.r,se=D.refs===xt?D.refs={}:D.refs,ye=D.setupState;if(Z!=null&&Z!==L&&(cn(Z)?(se[Z]=null,rt(ye,Z)&&(ye[Z]=null)):bn(Z)&&(Z.value=null)),Ye(L))Wo(L,D,12,[N,se]);else{const Ne=cn(L),Me=bn(L);if(Ne||Me){const mt=()=>{if(l.f){const Ct=Ne?se[L]:L.value;b?Xe(Ct)&&hg(Ct,E):Xe(Ct)?Ct.includes(E)||Ct.push(E):Ne?(se[L]=[E],rt(ye,L)&&(ye[L]=se[L])):(L.value=[E],l.k&&(se[l.k]=L.value))}else Ne?(se[L]=N,rt(ye,L)&&(ye[L]=N)):Me&&(L.value=N,l.k&&(se[l.k]=N))};N?(mt.id=-1,On(mt,m)):mt()}}}const On=K9;function wq(l){return xq(l)}function xq(l,u){const m=J4();m.__VUE__=!0;const{insert:g,remove:b,patchProp:E,createElement:N,createText:D,createComment:L,setText:Z,setElementText:se,parentNode:ye,nextSibling:Ne,setScopeId:Me=ys,cloneNode:mt,insertStaticContent:Ct}=l,et=(k,R,U,z=null,T=null,le=null,be=!1,H=null,de=!!R.dynamicChildren)=>{if(k===R)return;k&&!Za(k,R)&&(z=h(k),ws(k,T,le,!0),k=null),R.patchFlag===-2&&(de=!1,R.dynamicChildren=null);const{type:Q,ref:Te,shapeFlag:ge}=R;switch(Q){case Ag:lt(k,R,U,z);break;case $r:Dn(k,R,U,z);break;case Gp:k==null&&me(R,U,z,be);break;case js:Cn(k,R,U,z,T,le,be,H,de);break;default:ge&1?kt(k,R,U,z,T,le,be,H,de):ge&6?Qs(k,R,U,z,T,le,be,H,de):(ge&64||ge&128)&&Q.process(k,R,U,z,T,le,be,H,de,Co)}Te!=null&&T&&cg(Te,k&&k.ref,le,R||k,!R)},lt=(k,R,U,z)=>{if(k==null)g(R.el=D(R.children),U,z);else{const T=R.el=k.el;R.children!==k.children&&Z(T,R.children)}},Dn=(k,R,U,z)=>{k==null?g(R.el=L(R.children||""),U,z):R.el=k.el},me=(k,R,U,z)=>{[k.el,k.anchor]=Ct(k.children,R,U,z,k.el,k.anchor)},ft=({el:k,anchor:R},U,z)=>{let T;for(;k&&k!==R;)T=Ne(k),g(k,U,z),k=T;g(R,U,z)},Ys=({el:k,anchor:R})=>{let U;for(;k&&k!==R;)U=Ne(k),b(k),k=U;b(R)},kt=(k,R,U,z,T,le,be,H,de)=>{be=be||R.type==="svg",k==null?Xs(R,U,z,T,le,be,H,de):$t(k,R,T,le,be,H,de)},Xs=(k,R,U,z,T,le,be,H)=>{let de,Q;const{type:Te,props:ge,shapeFlag:Ae,transition:Ue,patchFlag:We,dirs:ot}=k;if(k.el&&mt!==void 0&&We===-1)de=k.el=mt(k.el);else{if(de=k.el=N(k.type,le,ge&&ge.is,ge),Ae&8?se(de,k.children):Ae&16&&At(k.children,de,null,z,T,le&&Te!=="foreignObject",be,H),ot&&Tr(k,null,z,"created"),ge){for(const gt in ge)gt!=="value"&&!wu(gt)&&E(de,gt,null,ge[gt],le,k.children,z,T,ct);"value"in ge&&E(de,"value",null,ge.value),(Q=ge.onVnodeBeforeMount)&&Vs(Q,z,k)}qn(de,k,k.scopeId,be,z)}ot&&Tr(k,null,z,"beforeMount");const it=(!T||T&&!T.pendingBranch)&&Ue&&!Ue.persisted;it&&Ue.beforeEnter(de),g(de,R,U),((Q=ge&&ge.onVnodeMounted)||it||ot)&&On(()=>{Q&&Vs(Q,z,k),it&&Ue.enter(de),ot&&Tr(k,null,z,"mounted")},T)},qn=(k,R,U,z,T)=>{if(U&&Me(k,U),z)for(let le=0;le<z.length;le++)Me(k,z[le]);if(T){let le=T.subTree;if(R===le){const be=T.vnode;qn(k,be,be.scopeId,be.slotScopeIds,T.parent)}}},At=(k,R,U,z,T,le,be,H,de=0)=>{for(let Q=de;Q<k.length;Q++){const Te=k[Q]=H?Ho(k[Q]):qs(k[Q]);et(null,Te,R,U,z,T,le,be,H)}},$t=(k,R,U,z,T,le,be)=>{const H=R.el=k.el;let{patchFlag:de,dynamicChildren:Q,dirs:Te}=R;de|=k.patchFlag&16;const ge=k.props||xt,Ae=R.props||xt;let Ue;U&&Rr(U,!1),(Ue=Ae.onVnodeBeforeUpdate)&&Vs(Ue,U,R,k),Te&&Tr(R,k,U,"beforeUpdate"),U&&Rr(U,!0);const We=T&&R.type!=="foreignObject";if(Q?ke(k.dynamicChildren,Q,H,U,z,We,le):be||wt(k,R,H,null,U,z,We,le,!1),de>0){if(de&16)Ge(H,R,ge,Ae,U,z,T);else if(de&2&&ge.class!==Ae.class&&E(H,"class",null,Ae.class,T),de&4&&E(H,"style",ge.style,Ae.style,T),de&8){const ot=R.dynamicProps;for(let it=0;it<ot.length;it++){const gt=ot[it],yn=ge[gt],Kn=Ae[gt];(Kn!==yn||gt==="value")&&E(H,gt,yn,Kn,T,k.children,U,z,ct)}}de&1&&k.children!==R.children&&se(H,R.children)}else!be&&Q==null&&Ge(H,R,ge,Ae,U,z,T);((Ue=Ae.onVnodeUpdated)||Te)&&On(()=>{Ue&&Vs(Ue,U,R,k),Te&&Tr(R,k,U,"updated")},z)},ke=(k,R,U,z,T,le,be)=>{for(let H=0;H<R.length;H++){const de=k[H],Q=R[H],Te=de.el&&(de.type===js||!Za(de,Q)||de.shapeFlag&70)?ye(de.el):U;et(de,Q,Te,null,z,T,le,be,!0)}},Ge=(k,R,U,z,T,le,be)=>{if(U!==z){for(const H in z){if(wu(H))continue;const de=z[H],Q=U[H];de!==Q&&H!=="value"&&E(k,H,Q,de,be,R.children,T,le,ct)}if(U!==xt)for(const H in U)!wu(H)&&!(H in z)&&E(k,H,U[H],null,be,R.children,T,le,ct);"value"in z&&E(k,"value",U.value,z.value)}},Cn=(k,R,U,z,T,le,be,H,de)=>{const Q=R.el=k?k.el:D(""),Te=R.anchor=k?k.anchor:D("");let{patchFlag:ge,dynamicChildren:Ae,slotScopeIds:Ue}=R;Ue&&(H=H?H.concat(Ue):Ue),k==null?(g(Q,U,z),g(Te,U,z),At(R.children,U,Te,T,le,be,H,de)):ge>0&&ge&64&&Ae&&k.dynamicChildren?(ke(k.dynamicChildren,Ae,U,T,le,be,H),(R.key!=null||T&&R===T.subTree)&&Pk(k,R,!0)):wt(k,R,U,Te,T,le,be,H,de)},Qs=(k,R,U,z,T,le,be,H,de)=>{R.slotScopeIds=H,k==null?R.shapeFlag&512?T.ctx.activate(R,U,z,be,de):Oe(R,U,z,T,le,be,de):Ot(k,R,de)},Oe=(k,R,U,z,T,le,be)=>{const H=k.component=$q(k,z,T);if(bk(k)&&(H.ctx.renderer=Co),Iq(H),H.asyncDep){if(T&&T.registerDep(H,St),!k.el){const de=H.subTree=go($r);Dn(null,de,R,U)}return}St(H,k,R,U,T,le,be)},Ot=(k,R,U)=>{const z=R.component=k.component;if(W9(k,R,U))if(z.asyncDep&&!z.asyncResolved){K(z,R,U);return}else z.next=R,F9(z.update),z.update();else R.el=k.el,z.vnode=R},St=(k,R,U,z,T,le,be)=>{const H=()=>{if(k.isMounted){let{next:Te,bu:ge,u:Ae,parent:Ue,vnode:We}=k,ot=Te,it;Rr(k,!1),Te?(Te.el=We.el,K(k,Te,be)):Te=We,ge&&jp(ge),(it=Te.props&&Te.props.onVnodeBeforeUpdate)&&Vs(it,Ue,Te,We),Rr(k,!0);const gt=qp(k),yn=k.subTree;k.subTree=gt,et(yn,gt,ye(yn.el),h(yn),k,T,le),Te.el=gt.el,ot===null&&j9(k,gt.el),Ae&&On(Ae,T),(it=Te.props&&Te.props.onVnodeUpdated)&&On(()=>Vs(it,Ue,Te,We),T)}else{let Te;const{el:ge,props:Ae}=R,{bm:Ue,m:We,parent:ot}=k,it=Su(R);if(Rr(k,!1),Ue&&jp(Ue),!it&&(Te=Ae&&Ae.onVnodeBeforeMount)&&Vs(Te,ot,R),Rr(k,!0),ge&&Lr){const gt=()=>{k.subTree=qp(k),Lr(ge,k.subTree,k,T,null)};it?R.type.__asyncLoader().then(()=>!k.isUnmounted&&gt()):gt()}else{const gt=k.subTree=qp(k);et(null,gt,U,z,k,T,le),R.el=gt.el}if(We&&On(We,T),!it&&(Te=Ae&&Ae.onVnodeMounted)){const gt=R;On(()=>Vs(Te,ot,gt),T)}(R.shapeFlag&256||ot&&Su(ot.vnode)&&ot.vnode.shapeFlag&256)&&k.a&&On(k.a,T),k.isMounted=!0,R=U=z=null}},de=k.effect=new vg(H,()=>ak(Q),k.scope),Q=k.update=()=>de.run();Q.id=k.uid,Rr(k,!0),Q()},K=(k,R,U)=>{R.component=k;const z=k.vnode.props;k.vnode=R,k.next=null,hq(k,R.props,z,U),yq(k,R.children,U),Li(),Mu(void 0,k.update),Mi()},wt=(k,R,U,z,T,le,be,H,de=!1)=>{const Q=k&&k.children,Te=k?k.shapeFlag:0,ge=R.children,{patchFlag:Ae,shapeFlag:Ue}=R;if(Ae>0){if(Ae&128){re(Q,ge,U,z,T,le,be,H,de);return}else if(Ae&256){Ui(Q,ge,U,z,T,le,be,H,de);return}}Ue&8?(Te&16&&ct(Q,T,le),ge!==Q&&se(U,ge)):Te&16?Ue&16?re(Q,ge,U,z,T,le,be,H,de):ct(Q,T,le,!0):(Te&8&&se(U,""),Ue&16&&At(ge,U,z,T,le,be,H,de))},Ui=(k,R,U,z,T,le,be,H,de)=>{k=k||Oi,R=R||Oi;const Q=k.length,Te=R.length,ge=Math.min(Q,Te);let Ae;for(Ae=0;Ae<ge;Ae++){const Ue=R[Ae]=de?Ho(R[Ae]):qs(R[Ae]);et(k[Ae],Ue,U,null,T,le,be,H,de)}Q>Te?ct(k,T,le,!0,!1,ge):At(R,U,z,T,le,be,H,de,ge)},re=(k,R,U,z,T,le,be,H,de)=>{let Q=0;const Te=R.length;let ge=k.length-1,Ae=Te-1;for(;Q<=ge&&Q<=Ae;){const Ue=k[Q],We=R[Q]=de?Ho(R[Q]):qs(R[Q]);if(Za(Ue,We))et(Ue,We,U,null,T,le,be,H,de);else break;Q++}for(;Q<=ge&&Q<=Ae;){const Ue=k[ge],We=R[Ae]=de?Ho(R[Ae]):qs(R[Ae]);if(Za(Ue,We))et(Ue,We,U,null,T,le,be,H,de);else break;ge--,Ae--}if(Q>ge){if(Q<=Ae){const Ue=Ae+1,We=Ue<Te?R[Ue].el:z;for(;Q<=Ae;)et(null,R[Q]=de?Ho(R[Q]):qs(R[Q]),U,We,T,le,be,H,de),Q++}}else if(Q>Ae)for(;Q<=ge;)ws(k[Q],T,le,!0),Q++;else{const Ue=Q,We=Q,ot=new Map;for(Q=We;Q<=Ae;Q++){const ht=R[Q]=de?Ho(R[Q]):qs(R[Q]);ht.key!=null&&ot.set(ht.key,Q)}let it,gt=0;const yn=Ae-We+1;let Kn=!1,Mr=0;const Lt=new Array(yn);for(Q=0;Q<yn;Q++)Lt[Q]=0;for(Q=Ue;Q<=ge;Q++){const ht=k[Q];if(gt>=yn){ws(ht,T,le,!0);continue}let en;if(ht.key!=null)en=ot.get(ht.key);else for(it=We;it<=Ae;it++)if(Lt[it-We]===0&&Za(ht,R[it])){en=it;break}en===void 0?ws(ht,T,le,!0):(Lt[en-We]=Q+1,en>=Mr?Mr=en:Kn=!0,et(ht,R[en],U,null,T,le,be,H,de),gt++)}const Zs=Kn?Sq(Lt):Oi;for(it=Zs.length-1,Q=yn-1;Q>=0;Q--){const ht=We+Q,en=R[ht],fl=ht+1<Te?R[ht+1].el:z;Lt[Q]===0?et(null,en,U,fl,T,le,be,H,de):Kn&&(it<0||Q!==Zs[it]?Es(en,U,fl,2):it--)}}},Es=(k,R,U,z,T=null)=>{const{el:le,type:be,transition:H,children:de,shapeFlag:Q}=k;if(Q&6){Es(k.component.subTree,R,U,z);return}if(Q&128){k.suspense.move(R,U,z);return}if(Q&64){be.move(k,R,U,Co);return}if(be===js){g(le,R,U);for(let ge=0;ge<de.length;ge++)Es(de[ge],R,U,z);g(k.anchor,R,U);return}if(be===Gp){ft(k,R,U);return}if(z!==2&&Q&1&&H)if(z===0)H.beforeEnter(le),g(le,R,U),On(()=>H.enter(le),T);else{const{leave:ge,delayLeave:Ae,afterLeave:Ue}=H,We=()=>g(le,R,U),ot=()=>{ge(le,()=>{We(),Ue&&Ue()})};Ae?Ae(le,We,ot):ot()}else g(le,R,U)},ws=(k,R,U,z=!1,T=!1)=>{const{type:le,props:be,ref:H,children:de,dynamicChildren:Q,shapeFlag:Te,patchFlag:ge,dirs:Ae}=k;if(H!=null&&cg(H,null,U,k,!0),Te&256){R.ctx.deactivate(k);return}const Ue=Te&1&&Ae,We=!Su(k);let ot;if(We&&(ot=be&&be.onVnodeBeforeUnmount)&&Vs(ot,R,k),Te&6)pt(k.component,U,z);else{if(Te&128){k.suspense.unmount(U,z);return}Ue&&Tr(k,null,R,"beforeUnmount"),Te&64?k.type.remove(k,R,U,T,Co,z):Q&&(le!==js||ge>0&&ge&64)?ct(Q,R,U,!1,!0):(le===js&&ge&384||!T&&Te&16)&&ct(de,R,U),z&&Ir(k)}(We&&(ot=be&&be.onVnodeUnmounted)||Ue)&&On(()=>{ot&&Vs(ot,R,k),Ue&&Tr(k,null,R,"unmounted")},U)},Ir=k=>{const{type:R,el:U,anchor:z,transition:T}=k;if(R===js){qo(U,z);return}if(R===Gp){Ys(k);return}const le=()=>{b(U),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(k.shapeFlag&1&&T&&!T.persisted){const{leave:be,delayLeave:H}=T,de=()=>be(U,le);H?H(k.el,le,de):de()}else le()},qo=(k,R)=>{let U;for(;k!==R;)U=Ne(k),b(k),k=U;b(R)},pt=(k,R,U)=>{const{bum:z,scope:T,update:le,subTree:be,um:H}=k;z&&jp(z),T.stop(),le&&(le.active=!1,ws(be,k,R,U)),H&&On(H,R),On(()=>{k.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ct=(k,R,U,z=!1,T=!1,le=0)=>{for(let be=le;be<k.length;be++)ws(k[be],R,U,z,T)},h=k=>k.shapeFlag&6?h(k.component.subTree):k.shapeFlag&128?k.suspense.next():Ne(k.anchor||k.el),Fr=(k,R,U)=>{k==null?R._vnode&&ws(R._vnode,null,null,!0):et(R._vnode||null,k,R,null,null,null,U),uk(),R._vnode=k},Co={p:et,um:ws,m:Es,r:Ir,mt:Oe,mc:At,pc:wt,pbc:ke,n:h,o:l};let zi,Lr;return u&&([zi,Lr]=u(Co)),{render:Fr,hydrate:zi,createApp:Eq(Fr,zi)}}function Rr({effect:l,update:u},m){l.allowRecurse=u.allowRecurse=m}function Pk(l,u,m=!1){const g=l.children,b=u.children;if(Xe(g)&&Xe(b))for(let E=0;E<g.length;E++){const N=g[E];let D=b[E];D.shapeFlag&1&&!D.dynamicChildren&&((D.patchFlag<=0||D.patchFlag===32)&&(D=b[E]=Ho(b[E]),D.el=N.el),m||Pk(N,D))}}function Sq(l){const u=l.slice(),m=[0];let g,b,E,N,D;const L=l.length;for(g=0;g<L;g++){const Z=l[g];if(Z!==0){if(b=m[m.length-1],l[b]<Z){u[g]=b,m.push(g);continue}for(E=0,N=m.length-1;E<N;)D=E+N>>1,l[m[D]]<Z?E=D+1:N=D;Z<l[m[E]]&&(E>0&&(u[g]=m[E-1]),m[E]=g)}}for(E=m.length,N=m[E-1];E-- >0;)m[E]=N,N=u[N];return m}const _q=l=>l.__isTeleport,js=Symbol(void 0),Ag=Symbol(void 0),$r=Symbol(void 0),Gp=Symbol(void 0),ol=[];let Cs=null;function Pu(l=!1){ol.push(Cs=l?null:[])}function kq(){ol.pop(),Cs=ol[ol.length-1]||null}let cl=1;function A_(l){cl+=l}function Ok(l){return l.dynamicChildren=cl>0?Cs||Oi:null,kq(),cl>0&&Cs&&Cs.push(l),l}function Dk(l,u,m,g,b,E){return Ok(ts(l,u,m,g,b,E,!0))}function Bk(l,u,m,g,b){return Ok(go(l,u,m,g,b,!0))}function Nq(l){return l?l.__v_isVNode===!0:!1}function Za(l,u){return l.type===u.type&&l.key===u.key}const Hu="__vInternal",$k=({key:l})=>l!=null?l:null,_u=({ref:l,ref_key:u,ref_for:m})=>l!=null?cn(l)||bn(l)||Ye(l)?{i:Ks,r:l,k:u,f:!!m}:l:null;function ts(l,u=null,m=null,g=0,b=null,E=l===js?0:1,N=!1,D=!1){const L={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&$k(u),ref:u&&_u(u),scopeId:mk,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:g,dynamicProps:b,dynamicChildren:null,appContext:null};return D?(Tg(L,m),E&128&&l.normalize(L)):m&&(L.shapeFlag|=cn(m)?8:16),cl>0&&!N&&Cs&&(L.patchFlag>0||E&6)&&L.patchFlag!==32&&Cs.push(L),L}const go=Aq;function Aq(l,u=null,m=null,g=0,b=null,E=!1){if((!l||l===aq)&&(l=$r),Nq(l)){const D=$i(l,u,!0);return m&&Tg(D,m),cl>0&&!E&&Cs&&(D.shapeFlag&6?Cs[Cs.indexOf(l)]=D:Cs.push(D)),D.patchFlag|=-2,D}if(zq(l)&&(l=l.__vccOpts),u){u=Tq(u);let{class:D,style:L}=u;D&&!cn(D)&&(u.class=pg(D)),un(L)&&(tk(L)&&!Xe(L)&&(L=An({},L)),u.style=mg(L))}const N=cn(l)?1:q9(l)?128:_q(l)?64:un(l)?4:Ye(l)?2:0;return ts(l,u,m,g,b,N,E,!0)}function Tq(l){return l?tk(l)||Hu in l?An({},l):l:null}function $i(l,u,m=!1){const{props:g,ref:b,patchFlag:E,children:N}=l,D=u?Oq(g||{},u):g;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:D,key:D&&$k(D),ref:u&&u.ref?m&&b?Xe(b)?b.concat(_u(u)):[b,_u(u)]:_u(u):b,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:N,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==js?E===-1?16:E|16:E,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&$i(l.ssContent),ssFallback:l.ssFallback&&$i(l.ssFallback),el:l.el,anchor:l.anchor}}function Rq(l=" ",u=0){return go(Ag,null,l,u)}function Pq(l="",u=!1){return u?(Pu(),Bk($r,null,l)):go($r,null,l)}function qs(l){return l==null||typeof l=="boolean"?go($r):Xe(l)?go(js,null,l.slice()):typeof l=="object"?Ho(l):go(Ag,null,String(l))}function Ho(l){return l.el===null||l.memo?l:$i(l)}function Tg(l,u){let m=0;const{shapeFlag:g}=l;if(u==null)u=null;else if(Xe(u))m=16;else if(typeof u=="object")if(g&65){const b=u.default;b&&(b._c&&(b._d=!1),Tg(l,b()),b._c&&(b._d=!0));return}else{m=32;const b=u._;!b&&!(Hu in u)?u._ctx=Ks:b===3&&Ks&&(Ks.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Ye(u)?(u={default:u,_ctx:Ks},m=32):(u=String(u),g&64?(m=16,u=[Rq(u)]):m=8);l.children=u,l.shapeFlag|=m}function Oq(...l){const u={};for(let m=0;m<l.length;m++){const g=l[m];for(const b in g)if(b==="class")u.class!==g.class&&(u.class=pg([u.class,g.class]));else if(b==="style")u.style=mg([u.style,g.style]);else if(Ou(b)){const E=u[b],N=g[b];N&&E!==N&&!(Xe(E)&&E.includes(N))&&(u[b]=E?[].concat(E,N):N)}else b!==""&&(u[b]=g[b])}return u}function Vs(l,u,m,g=null){vs(l,u,7,[m,g])}const Dq=Rk();let Bq=0;function $q(l,u,m){const g=l.type,b=(u?u.appContext:l.appContext)||Dq,E={uid:Bq++,vnode:l,type:g,parent:u,appContext:b,root:null,next:null,subTree:null,effect:null,update:null,scope:new e9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(b.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kk(g,b),emitsOptions:dk(g,b),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:g.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=u?u.root:E,E.emit=U9.bind(null,E),l.ce&&l.ce(E),E}let ln=null;const Ii=l=>{ln=l,l.scope.on()},Br=()=>{ln&&ln.scope.off(),ln=null};function Ik(l){return l.vnode.shapeFlag&4}let ul=!1;function Iq(l,u=!1){ul=u;const{props:m,children:g}=l.vnode,b=Ik(l);gq(l,m,b,u),Cq(l,g);const E=b?Fq(l,u):void 0;return ul=!1,E}function Fq(l,u){const m=l.type;l.accessCache=Object.create(null),l.proxy=nk(new Proxy(l.ctx,cq));const{setup:g}=m;if(g){const b=l.setupContext=g.length>1?Mq(l):null;Ii(l),Li();const E=Wo(g,l,0,[l.props,b]);if(Mi(),Br(),z_(E)){if(E.then(Br,Br),u)return E.then(N=>{T_(l,N,u)}).catch(N=>{Lu(N,l,0)});l.asyncDep=E}else T_(l,E,u)}else Fk(l,u)}function T_(l,u,m){Ye(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:un(u)&&(l.setupState=rk(u)),Fk(l,m)}let R_;function Fk(l,u,m){const g=l.type;if(!l.render){if(!u&&R_&&!g.render){const b=g.template;if(b){const{isCustomElement:E,compilerOptions:N}=l.appContext.config,{delimiters:D,compilerOptions:L}=g,Z=An(An({isCustomElement:E,delimiters:D},N),L);g.render=R_(b,Z)}}l.render=g.render||ys}Ii(l),Li(),uq(l),Mi(),Br()}function Lq(l){return new Proxy(l.attrs,{get(u,m){return jn(l,"get","$attrs"),u[m]}})}function Mq(l){const u=g=>{l.exposed=g||{}};let m;return{get attrs(){return m||(m=Lq(l))},slots:l.slots,emit:l.emit,expose:u}}function Rg(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(rk(nk(l.exposed)),{get(u,m){if(m in u)return u[m];if(m in Tu)return Tu[m](l)}}))}function Uq(l,u=!0){return Ye(l)?l.displayName||l.name:l.name||u&&l.__name}function zq(l){return Ye(l)&&"__vccOpts"in l}const Lk=(l,u)=>B9(l,u,ul),Hq="3.2.37",Vq="http://www.w3.org/2000/svg",Or=typeof document!="undefined"?document:null,P_=Or&&Or.createElement("template"),Wq={insert:(l,u,m)=>{u.insertBefore(l,m||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,m,g)=>{const b=u?Or.createElementNS(Vq,l):Or.createElement(l,m?{is:m}:void 0);return l==="select"&&g&&g.multiple!=null&&b.setAttribute("multiple",g.multiple),b},createText:l=>Or.createTextNode(l),createComment:l=>Or.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Or.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},cloneNode(l){const u=l.cloneNode(!0);return"_value"in l&&(u._value=l._value),u},insertStaticContent(l,u,m,g,b,E){const N=m?m.previousSibling:u.lastChild;if(b&&(b===E||b.nextSibling))for(;u.insertBefore(b.cloneNode(!0),m),!(b===E||!(b=b.nextSibling)););else{P_.innerHTML=g?`<svg>${l}</svg>`:l;const D=P_.content;if(g){const L=D.firstChild;for(;L.firstChild;)D.appendChild(L.firstChild);D.removeChild(L)}u.insertBefore(D,m)}return[N?N.nextSibling:u.firstChild,m?m.previousSibling:u.lastChild]}};function jq(l,u,m){const g=l._vtc;g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?l.removeAttribute("class"):m?l.setAttribute("class",u):l.className=u}function qq(l,u,m){const g=l.style,b=cn(m);if(m&&!b){for(const E in m)ug(g,E,m[E]);if(u&&!cn(u))for(const E in u)m[E]==null&&ug(g,E,"")}else{const E=g.display;b?u!==m&&(g.cssText=m):u&&l.removeAttribute("style"),"_vod"in l&&(g.display=E)}}const O_=/\s*!important$/;function ug(l,u,m){if(Xe(m))m.forEach(g=>ug(l,u,g));else if(m==null&&(m=""),u.startsWith("--"))l.setProperty(u,m);else{const g=Kq(l,u);O_.test(m)?l.setProperty(Fi(g),m.replace(O_,""),"important"):l[g]=m}}const D_=["Webkit","Moz","ms"],Yp={};function Kq(l,u){const m=Yp[u];if(m)return m;let g=Gs(u);if(g!=="filter"&&g in l)return Yp[u]=g;g=$u(g);for(let b=0;b<D_.length;b++){const E=D_[b]+g;if(E in l)return Yp[u]=E}return u}const B_="http://www.w3.org/1999/xlink";function Gq(l,u,m,g,b){if(g&&u.startsWith("xlink:"))m==null?l.removeAttributeNS(B_,u.slice(6,u.length)):l.setAttributeNS(B_,u,m);else{const E=z4(u);m==null||E&&!L_(m)?l.removeAttribute(u):l.setAttribute(u,E?"":m)}}function Yq(l,u,m,g,b,E,N){if(u==="innerHTML"||u==="textContent"){g&&N(g,b,E),l[u]=m==null?"":m;return}if(u==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const L=m==null?"":m;(l.value!==L||l.tagName==="OPTION")&&(l.value=L),m==null&&l.removeAttribute(u);return}let D=!1;if(m===""||m==null){const L=typeof l[u];L==="boolean"?m=L_(m):m==null&&L==="string"?(m="",D=!0):L==="number"&&(m=0,D=!0)}try{l[u]=m}catch{}D&&l.removeAttribute(u)}const[Mk,Xq]=(()=>{let l=Date.now,u=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(l=performance.now.bind(performance));const m=navigator.userAgent.match(/firefox\/(\d+)/i);u=!!(m&&Number(m[1])<=53)}return[l,u]})();let fg=0;const Qq=Promise.resolve(),Zq=()=>{fg=0},Jq=()=>fg||(Qq.then(Zq),fg=Mk());function e7(l,u,m,g){l.addEventListener(u,m,g)}function t7(l,u,m,g){l.removeEventListener(u,m,g)}function n7(l,u,m,g,b=null){const E=l._vei||(l._vei={}),N=E[u];if(g&&N)N.value=g;else{const[D,L]=s7(u);if(g){const Z=E[u]=o7(g,b);e7(l,D,Z,L)}else N&&(t7(l,D,N,L),E[u]=void 0)}}const $_=/(?:Once|Passive|Capture)$/;function s7(l){let u;if($_.test(l)){u={};let m;for(;m=l.match($_);)l=l.slice(0,l.length-m[0].length),u[m[0].toLowerCase()]=!0}return[Fi(l.slice(2)),u]}function o7(l,u){const m=g=>{const b=g.timeStamp||Mk();(Xq||b>=m.attached-1)&&vs(r7(g,m.value),u,5,[g])};return m.value=l,m.attached=Jq(),m}function r7(l,u){if(Xe(u)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},u.map(g=>b=>!b._stopped&&g&&g(b))}else return u}const I_=/^on[a-z]/,i7=(l,u,m,g,b=!1,E,N,D,L)=>{u==="class"?jq(l,g,b):u==="style"?qq(l,m,g):Ou(u)?gg(u)||n7(l,u,m,g,N):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):a7(l,u,g,b))?Yq(l,u,g,E,N,D,L):(u==="true-value"?l._trueValue=g:u==="false-value"&&(l._falseValue=g),Gq(l,u,g,b))};function a7(l,u,m,g){return g?!!(u==="innerHTML"||u==="textContent"||u in l&&I_.test(u)&&Ye(m)):u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA"||I_.test(u)&&cn(m)?!1:u in l}const l7=An({patchProp:i7},Wq);let F_;function c7(){return F_||(F_=wq(l7))}const u7=(...l)=>{const u=c7().createApp(...l),{mount:m}=u;return u.mount=g=>{const b=f7(g);if(!b)return;const E=u._component;!Ye(E)&&!E.render&&!E.template&&(E.template=b.innerHTML),b.innerHTML="";const N=m(b,!1,b instanceof SVGElement);return b instanceof Element&&(b.removeAttribute("v-cloak"),b.setAttribute("data-v-app","")),N},u};function f7(l){return cn(l)?document.querySelector(l):l}var d7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m};const m7=hk({name:"App",components:{},setup(){const l=Fu({content:"init content",show:!0,locale:""}),u=Lk(()=>{let g={};return l.locale==="en"&&(g={language:"en_US"}),g});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:u,switchLanguage:m}}}),p7=ts("h1",null,"VueTinymce example",-1),g7=ts("br",null,null,-1),h7=ts("br",null,null,-1),b7=ts("br",null,null,-1),C7=ts("br",null,null,-1),y7=ts("h2",null,"output",-1),v7=["innerHTML"];function E7(l,u,m,g,b,E){const N=iq("vue-tinymce");return Pu(),Dk(js,null,[p7,ts("button",{onClick:u[0]||(u[0]=D=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+j4(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),g7,h7,ts("button",{onClick:u[1]||(u[1]=(...D)=>l.switchLanguage&&l.switchLanguage(...D))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),b7,C7,l.data.show?(Pu(),Bk(N,{key:0,modelValue:l.data.content,"onUpdate:modelValue":u[2]||(u[2]=D=>l.data.content=D),config:l.config},null,8,["modelValue","config"])):Pq("",!0),y7,ts("div",{innerHTML:l.data.content},null,8,v7)],64)}var w7=d7(m7,[["render",E7]]),Uk={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},g=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},b=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},N=E(function(e,t){return e===t}),D=N,L=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},Z=function(e,t){return b(L(e),function(n){return g(n,t)})},se=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!Z(D).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},ye=E(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:m(n)?e===t:n==="array"?L(ye).eq(e,t):n==="object"?se(ye).eq(e,t):!1});const Ne=Object.getPrototypeOf,Me=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},mt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Me(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Ct=e=>t=>mt(t)===e,et=e=>t=>typeof t===e,lt=e=>t=>e===t,Dn=(e,t)=>ft(e)&&Me(e,t,(n,s)=>Ne(n)===s),me=Ct("string"),ft=Ct("object"),Ys=e=>Dn(e,Object),kt=Ct("array"),Xs=lt(null),qn=et("boolean"),At=lt(void 0),$t=e=>e==null,ke=e=>!$t(e),Ge=et("function"),Cn=et("number"),Qs=(e,t)=>{if(kt(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Oe=()=>{},Ot=(e,t)=>(...n)=>e(t.apply(null,n)),St=(e,t)=>n=>e(t(n)),K=e=>()=>e,wt=e=>e,Ui=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const Es=e=>t=>!e(t),ws=e=>()=>{throw new Error(e)},Ir=e=>e(),qo=e=>{e()},pt=K(!1),ct=K(!0);class h{constructor(t,n){this.tag=t,this.value=n}static some(t){return new h(!0,t)}static none(){return h.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?h.some(t(this.value)):h.none()}bind(t){return this.tag?t(this.value):h.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:h.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return ke(t)?h.some(t):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const Fr=Array.prototype.slice,Co=Array.prototype.indexOf,zi=Array.prototype.push,Lr=(e,t)=>Co.call(e,t),k=(e,t)=>{const n=Lr(e,t);return n===-1?h.none():h.some(n)},R=(e,t)=>Lr(e,t)>-1,U=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},z=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},T=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},le=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},be=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},H=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},de=(e,t,n)=>(le(e,(s,o)=>{n=t(n,s,o)}),n),Q=(e,t,n)=>(T(e,(s,o)=>{n=t(n,s,o)}),n),Te=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return h.some(r);if(n(r,s))break}return h.none()},ge=(e,t)=>Te(e,t,pt),Ae=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return h.some(n)}return h.none()},Ue=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!kt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);zi.apply(t,e[n])}return t},We=(e,t)=>Ue(z(e,t)),ot=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},it=e=>{const t=Fr.call(e,0);return t.reverse(),t},gt=(e,t)=>H(e,n=>!R(t,n)),yn=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Kn=(e,t)=>{const n=Fr.call(e,0);return n.sort(t),n},Mr=(e,t)=>t>=0&&t<e.length?h.some(e[t]):h.none(),Lt=e=>Mr(e,0),Zs=e=>Mr(e,e.length-1),ht=Ge(Array.from)?Array.from:e=>Fr.call(e),en=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return h.none()},fl=(e,t)=>{const n=[],s=Ge(t)?o=>U(n,r=>t(r,o)):o=>R(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},Gn=Object.keys,Hk=Object.hasOwnProperty,bt=(e,t)=>{const n=Gn(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},Hi=(e,t)=>Vk(e,(n,s)=>({k:s,v:t(n,s)})),Vk=(e,t)=>{const n={};return bt(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Vu=e=>(t,n)=>{e[n]=t},Pg=(e,t,n,s)=>{const o={};return bt(e,(r,i)=>{(t(r,i)?n:s)(r,i)}),o},Wk=(e,t)=>{const n={},s={};return Pg(e,t,Vu(n),Vu(s)),{t:n,f:s}},Vi=(e,t)=>{const n={};return Pg(e,t,Vu(n),Oe),n},Wu=(e,t)=>{const n=[];return bt(e,(s,o)=>{n.push(t(s,o))}),n},ju=e=>Wu(e,wt),ut=(e,t)=>Ie(e,t)?h.from(e[t]):h.none(),Ie=(e,t)=>Hk.call(e,t),Ur=(e,t)=>Ie(e,t)&&e[t]!==void 0&&e[t]!==null,jk=(e,t,n=ye)=>se(n).eq(e,t),Og=e=>{const t={};return T(e,n=>{t[n]={}}),Gn(t)},qu=Array.isArray,qk=e=>{if(qu(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Wi=(e,t,n)=>{let s,o;if(!e)return!1;if(n=n||e,e.length!==void 0){for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(s in e)if(Ie(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Ku=(e,t)=>{const n=[];return Wi(e,(s,o)=>{n.push(t(s,o,e))}),n},zr=(e,t)=>{const n=[];return Wi(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},Dg=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},dl=(e,t,n,s)=>{let o=At(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Bg=(e,t,n)=>{let s,o;for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},yo=e=>e[e.length-1],Ko=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},Kk=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(f),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},Gk=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},Yk=(e,t)=>{const n=Gk(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Gu(s(1),s(2))},Xk=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?$g():Yk(e,n)},$g=()=>Gu(0,0),Gu=(e,t)=>({major:e,minor:t}),ji={nu:Gu,detect:Xk,unknown:$g},Qk=(e,t)=>en(t.brands,n=>{const s=n.brand.toLowerCase();return ge(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:ji.nu(parseInt(n.version,10),0)}))}),Ig=(e,t)=>{const n=String(t).toLowerCase();return ge(e,s=>s.search(n))},Zk=(e,t)=>Ig(e,t).map(n=>{const s=ji.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Jk=(e,t)=>Ig(e,t).map(n=>{const s=ji.detect(n.versionRegexes,t);return{current:n.name,version:s}}),eN=(e,t)=>e.substring(t),Fg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,tN=(e,t)=>qt(e,t)?eN(e,t.length):e,tn=(e,t)=>e.indexOf(t)!==-1,qt=(e,t)=>Fg(e,t,0),Lg=(e,t)=>Fg(e,t,e.length-t.length),Yu=e=>t=>t.replace(e,""),Hr=Yu(/^\s+|\s+$/g),nN=Yu(/^\s+/g),Mg=Yu(/\s+$/g),Js=e=>e.length>0,ml=e=>!Js(e),sN=(e,t)=>t<=0?"":new Array(t+1).join(e),oN=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?h.none():h.some(n)},Xu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,eo=e=>t=>tn(t,e),rN=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>tn(e,"edge/")&&tn(e,"chrome")&&tn(e,"safari")&&tn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xu],search:e=>tn(e,"chrome")&&!tn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>tn(e,"msie")||tn(e,"trident")},{name:"Opera",versionRegexes:[Xu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:eo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:eo("firefox")},{name:"Safari",versionRegexes:[Xu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(tn(e,"safari")||tn(e,"mobile/"))&&tn(e,"applewebkit")}],iN=[{name:"Windows",search:eo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>tn(e,"iphone")||tn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:eo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:eo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:eo("linux"),versionRegexes:[]},{name:"Solaris",search:eo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:eo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:eo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ug={browsers:K(rN),oses:K(iN)},zg="Edge",Hg="Chromium",Vg="IE",Wg="Opera",jg="Firefox",qg="Safari",aN=()=>Kg({current:void 0,version:ji.unknown()}),Kg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(zg),isChromium:s(Hg),isIE:s(Vg),isOpera:s(Wg),isFirefox:s(jg),isSafari:s(qg)}},Gg={unknown:aN,nu:Kg,edge:K(zg),chromium:K(Hg),ie:K(Vg),opera:K(Wg),firefox:K(jg),safari:K(qg)},Yg="Windows",Xg="iOS",Qg="Android",Zg="Linux",Jg="macOS",eh="Solaris",th="FreeBSD",nh="ChromeOS",lN=()=>sh({current:void 0,version:ji.unknown()}),sh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Yg),isiOS:s(Xg),isAndroid:s(Qg),isMacOS:s(Jg),isLinux:s(Zg),isSolaris:s(eh),isFreeBSD:s(th),isChromeOS:s(nh)}},oh={unknown:lN,nu:sh,windows:K(Yg),ios:K(Xg),android:K(Qg),linux:K(Zg),macos:K(Jg),solaris:K(eh),freebsd:K(th),chromeos:K(nh)},cN={detect:(e,t,n)=>{const s=Ug.browsers(),o=Ug.oses(),r=t.bind(c=>Qk(s,c)).orThunk(()=>Zk(s,e)).fold(Gg.unknown,Gg.nu),i=Jk(o,e).fold(oh.unknown,oh.nu),a=Kk(i,r,e,n);return{browser:r,os:i,deviceType:a}}},uN=e=>window.matchMedia(e).matches;let fN=Ko(()=>cN.detect(navigator.userAgent,h.from(navigator.userAgentData),uN));const Go=()=>fN(),dN=navigator.userAgent,Qu=Go(),xs=Qu.browser,Ss=Qu.os,Yo=Qu.deviceType,mN=dN.indexOf("Windows Phone")!==-1,Qe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:xs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!xs.isIE(),windowsPhone:mN,browser:{current:xs.current,version:xs.version,isChromium:xs.isChromium,isEdge:xs.isEdge,isFirefox:xs.isFirefox,isIE:xs.isIE,isOpera:xs.isOpera,isSafari:xs.isSafari},os:{current:Ss.current,version:Ss.version,isAndroid:Ss.isAndroid,isChromeOS:Ss.isChromeOS,isFreeBSD:Ss.isFreeBSD,isiOS:Ss.isiOS,isLinux:Ss.isLinux,isMacOS:Ss.isMacOS,isSolaris:Ss.isSolaris,isWindows:Ss.isWindows},deviceType:{isDesktop:Yo.isDesktop,isiPad:Yo.isiPad,isiPhone:Yo.isiPhone,isPhone:Yo.isPhone,isTablet:Yo.isTablet,isTouch:Yo.isTouch,isWebView:Yo.isWebView}},pN=/^\s*|\s*$/g,rh=e=>e==null?"":(""+e).replace(pN,""),ih=(e,t)=>t?t==="array"&&qu(e)?!0:typeof e===t:e!==void 0,gN=(e,t,n)=>{let s;for(e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},s=e.length;s--;)n[e[s]]={};return n},hN=Ie,bN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Ie(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},ah=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Wi(e,(o,r)=>{if(t.call(s,o,r,n)===!1)return!1;ah(o,t,n,s)}))},G={trim:rh,isArray:qu,is:ih,toArray:qk,makeMap:gN,each:Wi,map:Ku,grep:zr,inArray:Dg,hasOwn:hN,extend:bN,walk:ah,resolve:(e,t)=>{let n,s;for(t=t||window,e=e.split("."),n=0,s=e.length;n<s&&(t=t[e[n]],!!t);n++);return t},explode:(e,t)=>!e||ih(e,"array")?e:Ku(e.split(t||","),rh),_addCacheSuffix:e=>{const t=Qe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Vr=(e,t,n=Ui)=>e.exists(s=>n(s,t)),CN=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},vn=(e,t,n)=>e.isSome()&&t.isSome()?h.some(n(e.getOrDie(),t.getOrDie())):h.none(),yN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?h.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):h.none(),Zu=(e,t)=>e?h.some(t):h.none();typeof window!="undefined"||Function("return this;")();const lh=8,ch=9,uh=11,qi=1,fh=3,yt=e=>e.dom.nodeName.toLowerCase(),dh=e=>e.dom.nodeType,pl=e=>t=>dh(t)===e,vN=e=>dh(e)===lh||yt(e)==="#comment",Yn=pl(qi),Bn=pl(fh),EN=pl(ch),wN=pl(uh),mh=e=>t=>Yn(t)&&yt(t)===e,ph=(e,t,n)=>{if(me(n)||qn(n)||Cn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Kt=(e,t,n)=>{ph(e.dom,t,n)},_s=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{ph(n,o,s)})},$n=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Wr=(e,t)=>h.from($n(e,t)),Ki=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Gt=(e,t)=>{e.dom.removeAttribute(t)},xN=e=>{const t=e.dom.attributes;return t==null||t.length===0},gh=e=>Q(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Ju=(e,t)=>{const n=$n(e,t);return n===void 0||n===""?[]:n.split(" ")},SN=(e,t,n)=>{const o=Ju(e,t).concat([n]);return Kt(e,t,o.join(" ")),!0},_N=(e,t,n)=>{const s=H(Ju(e,t),o=>o!==n);return s.length>0?Kt(e,t,s.join(" ")):Gt(e,t),!1},Gi=e=>e.dom.classList!==void 0,hh=e=>Ju(e,"class"),bh=(e,t)=>SN(e,"class",t),Ch=(e,t)=>_N(e,"class",t),kN=(e,t)=>R(hh(e),t)?Ch(e,t):bh(e,t),Yi=(e,t)=>{Gi(e)?e.dom.classList.add(t):bh(e,t)},yh=e=>{(Gi(e)?e.dom.classList:hh(e)).length===0&&Gt(e,"class")},gl=(e,t)=>{Gi(e)?e.dom.classList.remove(t):Ch(e,t),yh(e)},NN=(e,t)=>{const n=Gi(e)?e.dom.classList.toggle(t):kN(e,t);return yh(e),n},ef=(e,t)=>Gi(e)&&e.dom.classList.contains(t),Xi=e=>e.style!==void 0&&Ge(e.style.getPropertyValue),AN=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Qi(s.childNodes[0])},TN=(e,t)=>{const s=(t||document).createElement(e);return Qi(s)},RN=(e,t)=>{const s=(t||document).createTextNode(e);return Qi(s)},Qi=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:AN,fromTag:TN,fromText:RN,fromDom:Qi,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(Qi)},vh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},ks=(e,t)=>{const n=e.dom;if(n.nodeType!==qi)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Eh=e=>e.nodeType!==qi&&e.nodeType!==ch&&e.nodeType!==uh||e.childElementCount===0,PN=(e,t)=>{const n=t===void 0?document:t.dom;return Eh(n)?[]:z(n.querySelectorAll(e),S.fromDom)},ON=(e,t)=>{const n=t===void 0?document:t.dom;return Eh(n)?h.none():h.from(n.querySelector(e)).map(S.fromDom)},st=(e,t)=>e.dom===t.dom,to=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},wh=e=>S.fromDom(e.dom.ownerDocument),vo=e=>EN(e)?e:wh(e),DN=e=>S.fromDom(vo(e).dom.documentElement),xh=e=>S.fromDom(vo(e).dom.defaultView),Xn=e=>h.from(e.dom.parentNode).map(S.fromDom),BN=e=>h.from(e.dom.parentElement).map(S.fromDom),$N=(e,t)=>{const n=Ge(t)?t:pt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=S.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},IN=e=>{const t=n=>H(n,s=>!st(e,s));return Xn(e).map(Yt).map(t).getOr([])},Xo=e=>h.from(e.dom.previousSibling).map(S.fromDom),Zi=e=>h.from(e.dom.nextSibling).map(S.fromDom),Sh=e=>it(vh(e,Xo)),_h=e=>vh(e,Zi),Yt=e=>z(e.dom.childNodes,S.fromDom),hl=(e,t)=>{const n=e.dom.childNodes;return h.from(n[t]).map(S.fromDom)},kh=e=>hl(e,0),tf=e=>hl(e,e.dom.childNodes.length-1),Nh=e=>e.dom.childNodes.length,FN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return S.fromDom(t)},Ah=e=>wN(e)&&ke(e.dom.host),Th=Ge(Element.prototype.attachShadow)&&Ge(Node.prototype.getRootNode),LN=K(Th),Qo=Th?e=>S.fromDom(e.dom.getRootNode()):vo,nf=e=>Ah(e)?e:FN(vo(e)),MN=e=>{const t=Qo(e);return Ah(t)?h.some(t):h.none()},UN=e=>S.fromDom(e.dom.host),Rh=e=>{if(LN()&&ke(e.target)){const t=S.fromDom(e.target);if(Yn(t)&&zN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Lt(n)}}return h.from(e.target)},zN=e=>ke(e.dom.shadowRoot),jr=e=>{const t=Bn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return MN(S.fromDom(t)).fold(()=>n.body.contains(t),St(jr,UN))},Ph=(e,t,n)=>{if(!me(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Xi(e)&&e.style.setProperty(t,n)},HN=(e,t)=>{Xi(e)&&e.style.removeProperty(t)},Oh=(e,t,n)=>{const s=e.dom;Ph(s,t,n)},bl=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{Ph(n,o,s)})},Ns=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!jr(e)?Dh(n,t):o},Dh=(e,t)=>Xi(e)?e.style.getPropertyValue(t):"",Cl=(e,t)=>{const n=e.dom,s=Dh(n,t);return h.from(s).filter(o=>o.length>0)},Bh=e=>{const t={},n=e.dom;if(Xi(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},$h=(e,t)=>{const n=e.dom;HN(n,t),Vr(Wr(e,"style").map(Hr),"")&&Gt(e,"style")},VN=e=>e.dom.offsetWidth,Qn=(e,t)=>{Xn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Eo=(e,t)=>{Zi(e).fold(()=>{Xn(e).each(o=>{It(o,t)})},s=>{Qn(s,t)})},Ih=(e,t)=>{kh(e).fold(()=>{It(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},It=(e,t)=>{e.dom.appendChild(t.dom)},WN=(e,t)=>{Qn(e,t),It(t,e)},jN=(e,t)=>{T(t,(n,s)=>{const o=s===0?e:t[s-1];Eo(o,n)})},Zo=(e,t)=>{T(t,n=>{It(e,n)})},Ji=e=>{e.dom.textContent="",T(Yt(e),t=>{Nt(t)})},Nt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Jo=e=>{const t=Yt(e);t.length>0&&jN(e,t),Nt(e)},qN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Yt(S.fromDom(s))},KN=e=>z(e,S.fromDom),Fh=e=>e.dom.innerHTML,sf=(e,t)=>{const s=wh(e).dom,o=S.fromDom(s.createDocumentFragment()),r=qN(t,s);Zo(o,r),Ji(e),It(e,o)},GN=e=>{const t=S.fromTag("div"),n=S.fromDom(e.dom.cloneNode(!0));return It(t,n),Fh(t)},YN=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),XN=e=>{const t=S.fromDom(Rh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Ot(s,n);return YN(t,e.clientX,e.clientY,n,s,o,e)},QN=(e,t)=>n=>{e(n)&&t(XN(n))},ZN=(e,t,n,s,o)=>{const r=QN(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(eA,e,t,r,o)}},JN=(e,t,n,s)=>ZN(e,t,n,s,!1),eA=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Lh=(e,t)=>({left:e,top:t,translate:(s,o)=>Lh(e+s,t+o)}),qr=Lh,tA=e=>{const t=e.getBoundingClientRect();return qr(t.left,t.top)},yl=(e,t)=>e!==void 0?e:t!==void 0?t:0,nA=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return qr(n.offsetLeft,n.offsetTop);const r=yl(s==null?void 0:s.pageYOffset,o.scrollTop),i=yl(s==null?void 0:s.pageXOffset,o.scrollLeft),a=yl(o.clientTop,n.clientTop),c=yl(o.clientLeft,n.clientLeft);return of(e).translate(i-c,r-a)},of=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?qr(s.offsetLeft,s.offsetTop):jr(e)?tA(t):qr(0,0)},rf=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return qr(n,s)},Mh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Uh=(e,t)=>{Go().browser.isSafari()&&Ge(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},sA=e=>{const t=e===void 0?window:e;return Go().browser.isFirefox()?h.none():h.from(t.visualViewport)},zh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Hh=e=>{const t=e===void 0?window:e,n=t.document,s=rf(S.fromDom(n));return sA(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return zh(s.left,s.top,r,i)},o=>zh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},er=e=>t=>!!t&&t.nodeType===e,vl=e=>!!e&&!Object.getPrototypeOf(e),Ee=er(1),Zn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return R(t,s)}return!1}},El=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Ee(s))for(let o=0;o<n.length;o++){const r=s.ownerDocument.defaultView.getComputedStyle(s,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},Vh=e=>t=>Ee(t)&&t.hasAttribute(e),oA=(e,t)=>n=>Ee(n)&&n.getAttribute(e)===t,tr=e=>Ee(e)&&e.hasAttribute("data-mce-bogus"),rA=e=>Ee(e)&&e.getAttribute("data-mce-bogus")==="all",ea=e=>Ee(e)&&e.tagName==="TABLE",Wh=e=>t=>!!(Ee(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),af=Zn(["textarea","input"]),te=er(3),iA=er(4),aA=er(7),lf=er(8),cf=er(9),uf=er(11),Tt=Zn(["br"]),jh=Zn(["img"]),As=Wh("true"),vt=Wh("false"),wl=Zn(["td","th"]),Ts=Zn(["video","audio","object","embed"]),lA=Go().browser,qh=e=>ge(e,Yn),cA=e=>lA.isFirefox()&&yt(e)==="table"?qh(Yt(e)).filter(t=>yt(t)==="caption").bind(t=>qh(_h(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Kh=(e,t)=>e.children&&R(e.children,t),uA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Ns(S.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!Kh(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Kh(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=cA(S.fromDom(t))}return{x:s,y:o}};var Gh=(e,t,n,s,o)=>e(n,s)?h.some(n):Ge(o)&&o(n)?h.none():t(n,s,o);const Kr=(e,t,n)=>{let s=e.dom;const o=Ge(n)?n:pt;for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s);if(t(r))return h.some(r);if(o(r))break}return h.none()},Gr=(e,t,n)=>Gh((o,r)=>r(o),Kr,e,t,n),fA=(e,t)=>{const n=e.dom;return n.parentNode?dA(S.fromDom(n.parentNode),s=>!st(e,s)&&t(s)):h.none()},dA=(e,t)=>{const n=o=>t(S.fromDom(o));return ge(e.dom.childNodes,n).map(S.fromDom)},mA=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=S.fromDom(s.childNodes[o]);if(t(r))return h.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return h.none()};return n(e.dom)},ta=(e,t,n)=>Kr(e,s=>ks(s,t),n),na=(e,t)=>ON(t,e),nr=(e,t,n)=>Gh((o,r)=>ks(o,r),ta,e,t,n),Yh=(e,t={})=>{let n=0;const s={},o=S.fromDom(e),r=vo(o),i=t.maxLoadTime||5e3,a=v=>{t.referrerPolicy=v},c=v=>{It(nf(o),v)},f=v=>{const x=nf(o);na(x,"#"+v).each(Nt)},d=v=>ut(s,v).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=v=>new Promise((x,_)=>{let P;const O=G._addCacheSuffix(v),I=d(O);s[O]=I,I.count++;const M=(ue,oe)=>{T(ue,qo),I.status=oe,I.passed=[],I.failed=[],P&&(P.onload=null,P.onerror=null,P=null)},ce=()=>M(I.passed,2),V=()=>M(I.failed,3),j=(ue,oe)=>{ue()||(Date.now()-ve<i?setTimeout(oe):V())},X=()=>{j(()=>{const ue=e.styleSheets;let oe=ue.length;for(;oe--;){const je=ue[oe].ownerNode;if(je&&je.id===P.id)return ce(),!0}return!1},X)};if(x&&I.passed.push(x),_&&I.failed.push(_),I.status===1)return;if(I.status===2){ce();return}if(I.status===3){V();return}I.status=1;const J=S.fromTag("link",r.dom);_s(J,{rel:"stylesheet",type:"text/css",id:I.id});const ve=Date.now();t.contentCssCors&&Kt(J,"crossOrigin","anonymous"),t.referrerPolicy&&Kt(J,"referrerpolicy",t.referrerPolicy),P=J.dom,P.onload=X,P.onerror=V,c(J),Kt(J,"href",O)}),C=v=>Promise.allSettled(z(v,_=>p(_).then(K(_)))).then(_=>{const P=be(_,O=>O.status==="fulfilled");return P.fail.length>0?Promise.reject(z(P.fail,O=>O.reason)):z(P.pass,O=>O.value)}),y=v=>{const x=G._addCacheSuffix(v);ut(s,x).each(_=>{--_.count===0&&(delete s[x],f(_.id))})};return{load:p,loadAll:C,unload:y,unloadAll:v=>{T(v,x=>{y(x)})},_setReferrerPolicy:a}},Xh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Qo(n).dom;return h.from(e.get(r)).getOrThunk(()=>{const i=Yh(r,s);return e.set(r,i),i})}}})();class Dt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){let r,i;if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){if(r=t[s],r)return r;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){let s,o,r;if(t){if(s=t.previousSibling,this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}if(o=t.parentNode,o&&o!==this.rootNode)return o}}}const pA=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],gA=["td","th"],hA=["thead","tbody","tfoot"],bA=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],CA=["h1","h2","h3","h4","h5","h6"],yA=["li","dd","dt"],vA=["ul","ol","dl"],EA=["pre","script","textarea","style"],wA=["pre"].concat(CA),wo=e=>{let t;return n=>(t=t||yn(e,ct),Ie(t,yt(n)))},ns=wo(pA),xA=e=>yt(e)==="table",ff=e=>Yn(e)&&!ns(e),Yr=e=>Yn(e)&&yt(e)==="br",SA=wo(bA),df=wo(vA),sa=wo(yA),_A=wo(hA),xl=wo(gA),Sl=wo(EA),kA=wo(wA),NA=e=>kA(e)||ff(e),Qh=(e,t,n)=>ta(e,t,n).isSome(),oa="\uFEFF",Xt="\xA0",Zh=e=>e===oa,AA=e=>e.replace(/\uFEFF/g,""),Wt=oa,_l=Zh,xo=AA,TA=Ee,Xr=te,Qr=e=>(Xr(e)&&(e=e.parentNode),TA(e)&&e.hasAttribute("data-mce-caret")),Zr=e=>Xr(e)&&_l(e.data),In=e=>Qr(e)||Zr(e),Jh=e=>e.firstChild!==e.lastChild||!Tt(e.firstChild),RA=(e,t)=>{const s=e.ownerDocument.createTextNode(Wt),o=e.parentNode;if(t){const r=e.previousSibling;if(Xr(r)){if(In(r))return r;if(Nl(r))return r.splitText(r.data.length-1)}o.insertBefore(s,e)}else{const r=e.nextSibling;if(Xr(r)){if(In(r))return r;if(kl(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(s,e.nextSibling):o.appendChild(s)}return s},mf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset())===Wt||e.isAtStart()&&Zr(t.previousSibling):!1},pf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset()-1)===Wt||e.isAtEnd()&&Zr(t.nextSibling):!1},PA=()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},OA=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(PA());const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},kl=e=>Xr(e)&&e.data[0]===Wt,Nl=e=>Xr(e)&&e.data[e.data.length-1]===Wt,DA=e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];tr(n)&&n.parentNode.removeChild(n)},gf=e=>e&&e.hasAttribute("data-mce-caret")?(DA(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,eb=e=>Qr(e.startContainer),tb=As,BA=vt,$A=Tt,IA=te,FA=Zn(["script","style","textarea"]),nb=Zn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),LA=Zn(["table"]),MA=In,Jn=e=>MA(e)?!1:IA(e)?!FA(e.parentNode):nb(e)||$A(e)||LA(e)||hf(e),UA=e=>Ee(e)&&e.getAttribute("unselectable")==="true",hf=e=>UA(e)===!1&&BA(e),zA=(e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(hf(e))return!1;if(tb(e))return!0}return!0},HA=e=>hf(e)?Q(ht(e.getElementsByTagName("*")),(t,n)=>t||tb(n),!1)!==!0:!1,VA=e=>nb(e)||HA(e),sb=(e,t)=>Jn(e)&&zA(e,t),WA=/^[ \t\r\n]*$/,sr=e=>WA.test(e),jA=e=>" \f	\v".indexOf(e)!==-1,ob=e=>e===`
`||e==="\r",qA=(e,t)=>t<e.length&&t>=0?ob(e[t]):!1,rb=(e,t=4,n=!0,s=!0)=>{const o=sN(" ",t),r=e.replace(/\t/g,o);return Q(r,(a,c)=>jA(c)||c===Xt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||qA(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Xt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:ob(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},KA=(e,t)=>{const n=S.fromDom(t),s=S.fromDom(e);return Qh(s,"pre,code",re(st,n))},GA=(e,t)=>te(e)&&sr(e.data)&&KA(e,t)===!1,YA=e=>Ee(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Al=(e,t)=>Jn(e)&&GA(e,t)===!1||YA(e)||XA(e),XA=Vh("data-mce-bookmark"),QA=Vh("data-mce-bogus"),ZA=oA("data-mce-bogus","all"),JA=(e,t)=>{let n=0;if(Al(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new Dt(s,e);do{if(t){if(ZA(s)){s=o.next(!0);continue}if(QA(s)){s=o.next();continue}}if(Tt(s)){n++,s=o.next();continue}if(Al(s,e))return!1;s=o.next()}while(s);return n<=1}},Mt=(e,t=!0)=>JA(e.dom,t),eT=e=>e.nodeName.toLowerCase()==="span",ib=(e,t)=>ke(e)&&(Al(e,t)||ff(S.fromDom(e))),tT=(e,t)=>{const n=new Dt(e,t).prev(!1),s=new Dt(e,t).next(!1),o=At(n)||ib(n,t),r=At(s)||ib(s,t);return o&&r},ab=e=>eT(e)&&e.getAttribute("data-mce-type")==="bookmark",nT=(e,t)=>te(e)&&e.data.length>0&&tT(e,t),sT=e=>Ee(e)?e.childNodes.length>0:!1,oT=e=>uf(e)||cf(e),bf=(e,t,n)=>{const s=n||t;if(Ee(t)&&ab(t))return t;const o=t.childNodes;for(let r=o.length-1;r>=0;r--)bf(e,o[r],s);if(Ee(t)){const r=t.childNodes;r.length===1&&ab(r[0])&&t.parentNode.insertBefore(r[0],t)}return!oT(t)&&!Al(t,s)&&!sT(t)&&!nT(t,s)&&e.remove(t),t},rT=G.makeMap,Tl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,iT=/[<>&\"\']/g,aT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,lT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},or={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},cT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},uT=e=>{const t=S.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},lb=(e,t)=>{let n,s,o;const r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)s=String.fromCharCode(parseInt(e[n],t)),or[s]||(o="&"+e[n+1]+";",r[s]=o,r[o]=s);return r}},Cf=lb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),cb=(e,t)=>e.replace(t?Tl:Rl,n=>or[n]||n),fT=e=>(""+e).replace(iT,t=>or[t]||t),ub=(e,t)=>e.replace(t?Tl:Rl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":or[n]||"&#"+n.charCodeAt(0)+";"),yf=(e,t,n)=>(n=n||Cf,e.replace(t?Tl:Rl,s=>or[s]||n[s]||s)),So={encodeRaw:cb,encodeAllRaw:fT,encodeNumeric:ub,encodeNamed:yf,getEncodeFunc:(e,t)=>{const n=lb(t)||Cf,s=(i,a)=>i.replace(a?Tl:Rl,c=>or[c]!==void 0?or[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>yf(i,a,n),r=rT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:yf:r.numeric?ub:cb},decode:e=>e.replace(aT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):lT[n]||String.fromCharCode(n)):cT[t]||Cf[t]||uT(t))},_o={},dT={},Jr=G.makeMap,Qt=G.each,vf=G.extend,fb=G.explode,mT=G.inArray,jt=(e,t)=>(e=G.trim(e),e?e.split(t||" "):[]),db=(e,t)=>{const n=Jr(e," ",Jr(e.toUpperCase()," "));return vf(n,t)},mb=e=>db("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),pT=e=>{const t={};let n,s,o,r,i,a;const c=(d,p="",C="")=>{const y=jt(C),w=jt(d);let v=w.length;for(;v--;){const x=jt([n,p].join(" "));t[w[v]]={attributes:yn(x,()=>({})),attributesOrder:x,children:yn(y,K(dT))}}},f=(d,p)=>{const C=jt(d),y=jt(p);let w=C.length;for(;w--;){const v=t[C[w]];for(let x=0,_=y.length;x<_;x++)v.attributes[y[x]]={},v.attributesOrder.push(y[x])}};return _o[e]?_o[e]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",o=[o,a].join(" "),Qt(jt(a),d=>{c(d,"",o)}),i="center dir isindex noframes",s=[s,i].join(" "),r=[s,o].join(" "),Qt(jt(i),d=>{c(d,"",r)})),r=r||[s,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),c("address dt dd div caption","",r),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",r),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",r),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",r),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",r),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),c("param","name value"),c("map","name",[r,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",r),c("th","colspan rowspan headers scope abbr",r),c("form","accept-charset action autocomplete enctype method name novalidate target",r),c("fieldset","disabled form name",[r,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[r,"li"].join(" ")),c("noscript","",r),e!=="html4"&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",r),c("mark rt rp summary bdi","",o),c("canvas","width height",r),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",r),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[r,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",r),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[r,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),e!=="html4"&&T([t.video,t.audio],d=>{delete d.children.audio,delete d.children.video}),Qt(jt("a form meter progress dfn"),d=>{t[d]&&delete t[d].children[d]}),delete t.caption.children.table,delete t.script,_o[e]=t,t)},Ef=(e,t)=>{let n;return e&&(n={},typeof e=="string"&&(e={"*":e}),Qt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Jr(s,/[, ]/):fb(s,/[, ]/)})),n},ko=e=>{var t;const n={},s={};let o=[];const r={},i={},a=(Se,xe,qe)=>{let Ke=e[Se];return Ke?Ke=Jr(Ke,/[, ]/,Jr(Ke.toUpperCase(),/[, ]/)):(Ke=_o[Se],Ke||(Ke=db(xe,qe),_o[Se]=Ke)),Ke};e=e||{};const c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=pT(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Ef(e.valid_styles),p=Ef(e.invalid_styles,"map"),C=Ef(e.valid_classes,"map"),y=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_="td th iframe video audio object script code",P=a("non_empty_elements",_+" pre",v),O=a("move_caret_before_on_enter_elements",_+" table",v),I=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),M=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",I),ce=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Qt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Se=>{i[Se]=new RegExp("</"+Se+"[^>]*>","gi")});const V=Se=>new RegExp("^"+Se.replace(/([?+*])/g,".$1")+"$"),j=Se=>{let xe,qe,Ke,Pt,tt,Fe,nt,Zt,Jt,Vt,ds,gn,on,Hn,Lo,zs,Hs,ms;const Nr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Mo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Vn=/[*?+]/;if(Se){const ps=jt(Se,",");for(n["@"]&&(zs=n["@"].attributes,Hs=n["@"].attributesOrder),xe=0,qe=ps.length;xe<qe;xe++)if(tt=Nr.exec(ps[xe]),tt){if(Hn=tt[1],Jt=tt[2],Lo=tt[3],Zt=tt[5],gn={},on=[],Fe={attributes:gn,attributesOrder:on},Hn==="#"&&(Fe.paddEmpty=!0),Hn==="-"&&(Fe.removeEmpty=!0),tt[4]==="!"&&(Fe.removeEmptyAttrs=!0),zs&&(bt(zs,(Ar,gs)=>{gn[gs]=Ar}),on.push.apply(on,Hs)),Zt){for(Zt=jt(Zt,"|"),Ke=0,Pt=Zt.length;Ke<Pt;Ke++)if(tt=Mo.exec(Zt[Ke]),tt){if(nt={},ds=tt[1],Vt=tt[2].replace(/[\\:]:/g,":"),Hn=tt[3],ms=tt[4],ds==="!"&&(Fe.attributesRequired=Fe.attributesRequired||[],Fe.attributesRequired.push(Vt),nt.required=!0),ds==="-"){delete gn[Vt],on.splice(mT(on,Vt),1);continue}Hn&&(Hn==="="&&(Fe.attributesDefault=Fe.attributesDefault||[],Fe.attributesDefault.push({name:Vt,value:ms}),nt.defaultValue=ms),Hn==="~"&&(Fe.attributesForced=Fe.attributesForced||[],Fe.attributesForced.push({name:Vt,value:ms}),nt.forcedValue=ms),Hn==="<"&&(nt.validValues=Jr(ms,"?"))),Vn.test(Vt)?(Fe.attributePatterns=Fe.attributePatterns||[],nt.pattern=V(Vt),Fe.attributePatterns.push(nt)):(gn[Vt]||on.push(Vt),gn[Vt]=nt)}}!zs&&Jt==="@"&&(zs=gn,Hs=on),Lo&&(Fe.outputName=Jt,n[Lo]=Fe),Vn.test(Jt)?(Fe.pattern=V(Jt),o.push(Fe)):n[Jt]=Fe}}},X=Se=>{o=[],T(Gn(n),xe=>{delete n[xe]}),j(Se),Qt(f,(xe,qe)=>{s[qe]=xe.children})},J=Se=>{const xe=/^(~)?(.+)$/;Se&&(_o.text_block_elements=_o.block_elements=null,Qt(jt(Se,","),qe=>{const Ke=xe.exec(qe),Pt=Ke[1]==="~",tt=Pt?"span":"div",Fe=Ke[2];if(s[Fe]=s[tt],r[Fe]=tt,P[Fe.toUpperCase()]={},P[Fe]={},Pt||(M[Fe.toUpperCase()]={},M[Fe]={}),!n[Fe]){let nt=n[tt];nt=vf({},nt),delete nt.removeEmptyAttrs,delete nt.removeEmpty,n[Fe]=nt}Qt(s,(nt,Zt)=>{nt[tt]&&(s[Zt]=nt=vf({},s[Zt]),nt[Fe]=nt[tt])})}))},ve=Se=>{const xe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;_o[c]=null,Se&&Qt(jt(Se,","),qe=>{const Ke=xe.exec(qe);let Pt,tt;Ke&&(tt=Ke[1],tt?Pt=s[Ke[2]]:Pt=s[Ke[2]]={"#comment":{}},Pt=s[Ke[2]],Qt(jt(Ke[3],"|"),Fe=>{tt==="-"?delete Pt[Fe]:Pt[Fe]={}}))})},ue=Se=>{let xe=n[Se],qe;if(xe)return xe;for(qe=o.length;qe--;)if(xe=o[qe],xe.pattern.test(Se))return xe};e.valid_elements?X(e.valid_elements):(Qt(f,(Se,xe)=>{n[xe]={attributes:Se.attributes,attributesOrder:Se.attributesOrder},s[xe]=Se.children}),Qt(jt("strong/b em/i"),Se=>{const xe=jt(Se,"/");n[xe[1]].outputName=xe[0]}),Qt(ce,(Se,xe)=>{n[xe]&&(e.padd_empty_block_inline_children&&(n[xe].paddInEmptyBlock=!0),n[xe].removeEmpty=!0)}),Qt(jt("ol ul blockquote a table tbody"),Se=>{n[Se]&&(n[Se].removeEmpty=!0)}),Qt(jt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Se=>{n[Se].paddEmpty=!0}),Qt(jt("span"),Se=>{n[Se].removeEmptyAttrs=!0})),J(e.custom_elements),ve(e.valid_children),j(e.extended_valid_elements),ve("+ol[ul|ol],+ul[ul|ol]"),Qt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Se,xe)=>{n[xe]&&(n[xe].parentsRequired=jt(Se))}),e.invalid_elements&&Qt(fb(e.invalid_elements),Se=>{n[Se]&&delete n[Se]}),ue("span")||j("span[!data-mce-type|*]");const oe=K(d),ze=K(p),je=K(C),Je=K(x),Rt=K(M),Y=K(I),he=K(ce),$e=K(Object.seal(v)),De=K(w),Bt=K(P),ne=K(O),we=K(y),fe=K(Object.seal(i)),ee=(Se,xe)=>{const qe=s[Se.toLowerCase()];return!!(qe&&qe[xe.toLowerCase()])},Be=(Se,xe)=>{let qe,Ke;const Pt=ue(Se);if(Pt)if(xe){if(Pt.attributes[xe])return!0;if(qe=Pt.attributePatterns,qe){for(Ke=qe.length;Ke--;)if(qe[Ke].pattern.test(xe))return!0}}else return!0;return!1},Le=K(r);return{type:c,children:s,elements:n,getValidStyles:oe,getValidClasses:je,getBlockElements:Rt,getInvalidStyles:ze,getVoidElements:$e,getTextBlockElements:Y,getTextInlineElements:he,getBoolAttrs:Je,getElementRule:ue,getSelfClosingElements:De,getNonEmptyElements:Bt,getMoveCaretBeforeOnEnterElements:ne,getWhitespaceElements:we,getSpecialElements:fe,isValidChild:ee,isValid:Be,getCustomElements:Le,addValidElements:j,setValidElements:X,addCustomElements:J,addValidChildren:ve}},wf=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/;let r;const i={};let a,c;const f=oa;e=e||{},t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+f).split(" ");for(r=0;r<d.length;r++)i[d[r]]=f+r,i[f+r]=d[r];const p={parse:C=>{const y={};let w,v,x,_;const P=e.url_converter,O=e.url_converter_scope||p,I=(ue,oe,ze)=>{const je=y[ue+"-top"+oe];if(!je)return;const Je=y[ue+"-right"+oe];if(!Je)return;const Rt=y[ue+"-bottom"+oe];if(!Rt)return;const Y=y[ue+"-left"+oe];if(!Y)return;const he=[je,Je,Rt,Y];for(r=he.length-1;r--&&he[r]===he[r+1];);r>-1&&ze||(y[ue+oe]=r===-1?he[0]:he.join(" "),delete y[ue+"-top"+oe],delete y[ue+"-right"+oe],delete y[ue+"-bottom"+oe],delete y[ue+"-left"+oe])},M=ue=>{let oe=y[ue],ze;if(!!oe){for(oe=oe.split(" "),ze=oe.length;ze--;)if(oe[ze]!==oe[0])return!1;return y[ue]=oe[0],!0}},ce=(ue,oe,ze,je)=>{!M(oe)||!M(ze)||!M(je)||(y[ue]=y[oe]+" "+y[ze]+" "+y[je],delete y[oe],delete y[ze],delete y[je])},V=ue=>(_=!0,i[ue]),j=(ue,oe)=>(_&&(ue=ue.replace(/\uFEFF[0-9]/g,ze=>i[ze])),oe||(ue=ue.replace(/\\([\'\";:])/g,"$1")),ue),X=ue=>String.fromCharCode(parseInt(ue.slice(1),16)),J=ue=>ue.replace(/\\[0-9a-f]+/gi,X),ve=(ue,oe,ze,je,Je,Rt)=>{if(Je=Je||Rt,Je)return Je=j(Je),"'"+Je.replace(/\'/g,"\\'")+"'";if(oe=j(oe||ze||je),!e.allow_script_urls){const Y=oe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Y)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Y))return""}return P&&(oe=P.call(O,oe,"style")),"url('"+oe.replace(/\'/g,"\\'")+"')"};if(C){for(C=C.replace(/[\u0000-\u001F]/g,""),C=C.replace(/\\[\"\';:\uFEFF]/g,V).replace(/\"[^\"]+\"|\'[^\']+\'/g,ue=>ue.replace(/[;:]/g,V));w=s.exec(C);)if(s.lastIndex=w.index+w[0].length,v=w[1].replace(o,"").toLowerCase(),x=w[2].replace(o,""),v&&x){if(v=J(v),x=J(x),v.indexOf(f)!==-1||v.indexOf('"')!==-1||!e.allow_script_urls&&(v==="behavior"||/expression\s*\(|\/\*|\*\//.test(x)))continue;v==="font-weight"&&x==="700"?x="bold":(v==="color"||v==="background-color")&&(x=x.toLowerCase()),x=x.replace(n,ve),y[v]=_?j(x,!0):x}I("border","",!0),I("border","-width"),I("border","-color"),I("border","-style"),I("padding",""),I("margin",""),ce("border","border-width","border-style","border-color"),y.border==="medium none"&&delete y.border,y["border-image"]==="none"&&delete y["border-image"]}return y},serialize:(C,y)=>{let w="";const v=_=>{let P;const O=a[_];if(O)for(let I=0,M=O.length;I<M;I++)_=O[I],P=C[_],P&&(w+=(w.length>0?" ":"")+_+": "+P+";")},x=(_,P)=>{let O=c["*"];return O&&O[_]?!1:(O=c[P],!(O&&O[_]))};return y&&a?(v("*"),v(y)):bt(C,(_,P)=>{_&&(!c||x(P,y))&&(w+=(w.length>0?" ":"")+P+": "+_+";")}),w}};return p},gT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},hT=e=>e instanceof Event||Ge(e.initEvent),bT=e=>e.isDefaultPrevented===ct||e.isDefaultPrevented===pt,CT=e=>$t(e.preventDefault)||hT(e),pb=(e,t)=>{const n=t!=null?t:{};for(const s in e)Ie(gT,s)||(n[s]=e[s]);return ke(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},xf=(e,t,n,s)=>{var o;const r=pb(t,s);return r.type=e,$t(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),CT(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=ct,Ge(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=ct,Ge(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=ct,r.stopPropagation()},bT(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?ct:pt,r.isPropagationStopped=r.cancelBubble===!0?ct:pt,r.isImmediatePropagationStopped=pt)),r},yT="mce-data-",vT=/^(?:mouse|contextmenu)|click/,Sf=(e,t,n,s)=>{e.addEventListener?e.addEventListener(t,n,s||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Pl=(e,t,n,s)=>{e.removeEventListener?e.removeEventListener(t,n,s||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ET=e=>ke(e)&&vT.test(e.type),ei=(e,t)=>{const n=xf(e.type,e,document,t);if(ET(e)&&At(e.pageX)&&!At(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},wT=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{Pl(e,"DOMContentLoaded",i),Pl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():Sf(e,"DOMContentLoaded",i),n.domLoaded||Sf(e,"load",i)};class rr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=yT+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i,a,c,f,d,p,C;const y=window,w=x=>{r.executeHandlers(ei(x||y.event),i)};if(!t||t.nodeType===3||t.nodeType===8)return;t[r.expando]?i=t[r.expando]:(i=r.count++,t[r.expando]=i,r.events[i]={}),o=o||t;const v=n.split(" ");for(c=v.length;c--;){if(f=v[c],p=w,d=C=!1,f==="DOMContentLoaded"&&(f="ready"),r.domLoaded&&f==="ready"&&t.readyState==="complete"){s.call(o,ei({type:f}));continue}r.hasMouseEnterLeave||(d=r.mouseEnterLeave[f],d&&(p=x=>{const _=x.currentTarget;let P=x.relatedTarget;if(P&&_.contains)P=_.contains(P);else for(;P&&P!==_;)P=P.parentNode;P||(x=ei(x||y.event),x.type=x.type==="mouseout"?"mouseleave":"mouseenter",x.target=_,r.executeHandlers(x,i))})),!r.hasFocusIn&&(f==="focusin"||f==="focusout")&&(C=!0,d=f==="focusin"?"focus":"blur",p=x=>{x=ei(x||y.event),x.type=x.type==="focus"?"focusin":"focusout",r.executeHandlers(x,i)}),a=r.events[i][f],a?f==="ready"&&r.domLoaded?s(ei({type:f})):a.push({func:s,scope:o}):(r.events[i][f]=a=[{func:s,scope:o}],a.fakeName=d,a.capture=C,a.nativeHandler=p,f==="ready"?wT(t,p,r):Sf(t,d||f,p,C))}return t=a=null,s}unbind(t,n,s){let o,r,i,a,c;if(!t||t.nodeType===3||t.nodeType===8)return this;const f=t[this.expando];if(f){if(c=this.events[f],n){const d=n.split(" ");for(r=d.length;r--;)if(a=d[r],o=c[a],o){if(s){for(i=o.length;i--;)if(o[i].func===s){const p=o.nativeHandler,C=o.fakeName,y=o.capture;o=o.slice(0,i).concat(o.slice(i+1)),o.nativeHandler=p,o.fakeName=C,o.capture=y,c[a]=o}}(!s||o.length===0)&&(delete c[a],Pl(t,o.fakeName||a,o.nativeHandler,o.capture))}}else bt(c,(d,p)=>{Pl(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(a in c)if(Ie(c,a))return this;delete this.events[f];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){let o;if(!t||t.nodeType===3||t.nodeType===8)return this;const r=ei({type:n,target:t},s);do o=t[this.expando],o&&this.executeHandlers(r,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return this}clean(t){let n,s;if(!t||t.nodeType===3||t.nodeType===8)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),s=t.getElementsByTagName("*"),n=s.length;n--;)t=s[n],t[this.expando]&&this.unbind(t);return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}rr.Event=new rr;const _f=G.each,xT=G.grep,kf="data-mce-style",ra=(e,t,n)=>{$t(n)||n===""?Gt(e,t):Kt(e,t,n)},ST=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=S.fromDom(i);Ge(t.url_converter)&&ke(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),a,c,i[0]));const d="data-mce-"+c;ra(f,d,a),ra(f,c,a)},get:(i,a)=>{const c=S.fromDom(i);return $n(c,"data-mce-"+a)||$n(c,a)}},r={style:{set:(i,a)=>{const c=S.fromDom(i);if(ft(a)){bl(c,a);return}s&&ra(c,kf,a),Gt(c,"style"),me(a)&&bl(c,e.parse(a))},get:i=>{const a=S.fromDom(i),c=$n(a,kf)||$n(a,"style");return e.serialize(e.parse(c),yt(a))}}};return s&&(r.href=r.src=o),r},_T=(e,t)=>{const n=$n(t,"style"),s=e.serialize(e.parse(n),yt(t));ra(t,kf,s)},ti=(e,t)=>{let n=0,s,o;if(e)for(s=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,!(t&&o===3&&(o===s||!e.nodeValue.length))&&(n++,s=o);return n},kT=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),gb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),at=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=Xh.forElement(S.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],d=t.schema?t.schema:ko({}),p=wf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),C=t.ownEvents?new rr:rr.Event,y=d.getBlockElements(),w=A=>me(A)?Ie(y,A):Ee(A)&&Ie(y,A.nodeName),v=A=>A&&e&&me(A)?e.getElementById(A):A,x=A=>{const B=v(A);return ke(B)?S.fromDom(B):null},_=(A,B,q)=>{let W;const Ce=x(A);if(ke(Ce)&&Yn(Ce)){const Ve=gu[B];Ve&&Ve.get?W=Ve.get(Ce.dom,B):W=$n(Ce,B)}return ke(W)?W:q!=null?q:""},P=A=>{const B=v(A);return $t(B)?[]:B.attributes},O=(A,B,q)=>{$e(A,W=>{if(Ee(W)){const Ce=S.fromDom(W);q===""&&(q=null);const Ve=$n(Ce,B),He=gu[B];He&&He.set?He.set(Ce.dom,q,B):ra(Ce,B,q),Ve!==q&&t.onSetAttrib&&t.onSetAttrib({attrElm:Ce,attrName:B,attrValue:q})}})},I=(A,B)=>A.cloneNode(B),M=()=>t.root_element||e.body,ce=A=>{const B=Hh(A);return{x:B.x,y:B.y,w:B.width,h:B.height}},V=(A,B)=>uA(e.body,v(A),B),j=(A,B,q)=>{const W=(Ve,He)=>me(Ve)?Ve:Cn(Ve)?Ie(kT,He)?Ve+"":Ve+"px":Hi(Ve,W),Ce=(Ve,He,kn)=>{const hs=gb(He);$t(kn)||kn===""?$h(Ve,hs):Oh(Ve,hs,W(kn,hs))};$e(A,Ve=>{const He=S.fromDom(Ve);me(B)?Ce(He,B,q):bt(B,(kn,hs)=>{Ce(He,hs,kn)}),t.update_styles&&_T(p,He)})},X=(A,B)=>{j(A,B)},J=(A,B,q)=>{const W=v(A);if(!($t(W)||!Ee(W)))return q?Ns(S.fromDom(W),gb(B)):(B=B.replace(/-(\D)/g,(Ce,Ve)=>Ve.toUpperCase()),B==="float"&&(B="cssFloat"),W.style?W.style[B]:void 0)},ve=A=>{let B,q;const W=v(A);return B=J(W,"width"),q=J(W,"height"),B.indexOf("px")===-1&&(B=0),q.indexOf("px")===-1&&(q=0),{w:parseInt(B,10)||W.offsetWidth||W.clientWidth,h:parseInt(q,10)||W.offsetHeight||W.clientHeight}},ue=A=>{const B=v(A),q=V(B),W=ve(B);return{x:q.x,y:q.y,w:W.w,h:W.h}},oe=(A,B)=>{if(!A)return!1;const q=kt(A)?A:[A];return U(q,W=>ks(S.fromDom(W),B))},ze=(A,B,q,W)=>{const Ce=[];let Ve,He=v(A);for(W=W===void 0,q=q||(M().nodeName!=="BODY"?M().parentNode:null),me(B)&&(Ve=B,B==="*"?B=Ee:B=kn=>oe(kn,Ve));He&&!(He===q||$t(He.nodeType)||cf(He)||uf(He));){if(!B||B(He))if(W)Ce.push(He);else return[He];He=He.parentNode}return W?Ce:null},je=(A,B,q)=>{const W=ze(A,B,q,!1);return W&&W.length>0?W[0]:null},Je=(A,B,q)=>{let W=B;if(A){for(me(B)&&(W=Ce=>oe(Ce,B)),A=A[q];A;A=A[q])if(Ge(W)&&W(A))return A}return null},Rt=(A,B)=>Je(A,B,"nextSibling"),Y=(A,B)=>Je(A,B,"previousSibling"),he=(A,B)=>{var q,W;const Ce=(W=(q=v(B))!==null&&q!==void 0?q:t.root_element)!==null&&W!==void 0?W:e;return ht(Ce.querySelectorAll(A))},$e=function(A,B,q){const W=q!=null?q:this,Ce=me(A)?v(A):A;if(!Ce)return!1;if(kt(Ce)&&(Ce.length||Ce.length===0)){const Ve=[];return _f(Ce,(He,kn)=>{He&&Ve.push(B.call(W,me(He)?v(He):He,kn))}),Ve}else return B.call(W,Ce)},De=(A,B)=>{$e(A,q=>{bt(B,(W,Ce)=>{O(q,Ce,W)})})},Bt=(A,B)=>{$e(A,q=>{const W=S.fromDom(q);sf(W,B)})},ne=(A,B,q,W,Ce)=>$e(A,Ve=>{const He=me(B)?e.createElement(B):B;return ke(q)&&De(He,q),W&&(!me(W)&&W.nodeType?He.appendChild(W):me(W)&&Bt(He,W)),Ce?He:Ve.appendChild(He)}),we=(A,B,q)=>ne(e.createElement(A),A,B,q,!0),fe=So.decode,ee=So.encodeAllRaw,Be=(A,B,q="")=>{let W="",Ce;W+="<"+A;for(Ce in B)Ur(B,Ce)&&(W+=" "+Ce+'="'+ee(B[Ce])+'"');return ml(q)&&Ie(d.getVoidElements(),A)?W+" />":W+">"+q+"</"+A+">"},Le=A=>{let B;const q=e.createElement("div"),W=e.createDocumentFragment();for(W.appendChild(q),A&&(q.innerHTML=A);B=q.firstChild;)W.appendChild(B);return W.removeChild(q),W},Se=(A,B)=>$e(A,q=>{const W=S.fromDom(q);return B&&T(Yt(W),Ce=>{Bn(Ce)&&Ce.dom.length===0?Nt(Ce):Qn(W,Ce)}),Nt(W),W.dom}),xe=A=>$e(A,B=>{const q=B.attributes;for(let W=q.length-1;W>=0;W--)B.removeAttributeNode(q.item(W))}),qe=A=>p.parse(A),Ke=(A,B)=>p.serialize(A,B),Pt=A=>{let B,q;if(fo!==at.DOM&&e===document){if(n[A])return;n[A]=!0}q=e.getElementById("mceDefaultStyles"),q||(q=e.createElement("style"),q.id="mceDefaultStyles",q.type="text/css",B=e.getElementsByTagName("head")[0],B.firstChild?B.insertBefore(q,B.firstChild):B.appendChild(q)),q.styleSheet?q.styleSheet.cssText+=A:q.appendChild(e.createTextNode(A))},tt=A=>{A||(A=""),T(A.split(","),B=>{o[B]=!0,c.load(B).catch(Oe)})},Fe=(A,B,q)=>{$e(A,W=>{if(Ee(W)){const Ce=S.fromDom(W),Ve=B.split(" ");T(Ve,He=>{ke(q)?(q?Yi:gl)(Ce,He):NN(Ce,He)})}})},nt=(A,B)=>{Fe(A,B,!0)},Zt=(A,B)=>{Fe(A,B,!1)},Jt=(A,B)=>{const q=x(A),W=B.split(" ");return ot(W,Ce=>ef(q,Ce))},Vt=A=>{$e(A,B=>$h(S.fromDom(B),"display"))},ds=A=>{$e(A,B=>Oh(S.fromDom(B),"display","none"))},gn=A=>{const B=x(A);return Vr(Cl(B,"display"),"none")},on=A=>(A||"mce_")+r++,Hn=A=>{const B=x(A);return Ee(B.dom)?B.dom.outerHTML:GN(B)},Lo=(A,B)=>{$e(A,q=>{Ee(q)&&(q.outerHTML=B)})},zs=(A,B)=>{const q=v(B);return $e(A,W=>{const Ce=q.parentNode,Ve=q.nextSibling;return Ve?Ce.insertBefore(W,Ve):Ce.appendChild(W),W})},Hs=(A,B,q)=>$e(B,W=>(kt(W)&&(A=A.cloneNode(!0)),q&&_f(xT(W.childNodes),Ce=>{A.appendChild(Ce)}),W.parentNode.replaceChild(A,W))),ms=(A,B)=>{let q;return A.nodeName!==B.toUpperCase()&&(q=we(B),_f(P(A),W=>{O(q,W.nodeName,_(A,W.nodeName))}),Hs(q,A,!0)),q||A},Nr=(A,B)=>{let q=A,W;for(;q;){for(W=B;W&&q!==W;)W=W.parentNode;if(q===W)break;q=q.parentNode}return!q&&A.ownerDocument?A.ownerDocument.documentElement:q},Mo=A=>{if(Ee(A)){const B=A.nodeName.toLowerCase()==="a"&&!_(A,"href")&&_(A,"id");if(_(A,"name")||_(A,"data-mce-bookmark")||B)return!0}return!1},Vn=(A,B)=>{let q,W,Ce=0;if(Mo(A))return!1;if(A=A.firstChild,A){const Ve=new Dt(A,A.parentNode),He=d?d.getWhitespaceElements():{};B=B||(d?d.getNonEmptyElements():null);do{if(q=A.nodeType,Ee(A)){const kn=A.getAttribute("data-mce-bogus");if(kn){A=Ve.next(kn==="all");continue}if(W=A.nodeName.toLowerCase(),B&&B[W]){if(W==="br"){Ce++,A=Ve.next();continue}return!1}if(Mo(A))return!1}if(q===8||q===3&&!sr(A.nodeValue)||q===3&&A.parentNode&&He[A.parentNode.nodeName]&&sr(A.nodeValue))return!1;A=Ve.next()}while(A)}return Ce<=1},ps=()=>e.createRange(),Ar=(A,B,q)=>{let W=ps(),Ce,Ve,He;if(A&&B)return W.setStart(A.parentNode,ti(A)),W.setEnd(B.parentNode,ti(B)),Ce=W.extractContents(),W=ps(),W.setStart(B.parentNode,ti(B)+1),W.setEnd(A.parentNode,ti(A)+1),Ve=W.extractContents(),He=A.parentNode,He.insertBefore(bf(fo,Ce),A),q?He.insertBefore(q,A):He.insertBefore(B,A),He.insertBefore(bf(fo,Ve),A),Se(A),q||B},gs=(A,B,q,W)=>{if(kt(A)){let Ce=A.length;const Ve=[];for(;Ce--;)Ve[Ce]=gs(A[Ce],B,q,W);return Ve}else return t.collect&&(A===e||A===s)&&f.push([A,B,q,W]),C.bind(A,B,q,W||fo)},mu=(A,B,q)=>{if(kt(A)){let W=A.length;const Ce=[];for(;W--;)Ce[W]=mu(A[W],B,q);return Ce}else{if(f.length>0&&(A===e||A===s)){let W=f.length;for(;W--;){const Ce=f[W];A===Ce[0]&&(!B||B===Ce[1])&&(!q||q===Ce[2])&&C.unbind(Ce[0],Ce[1],Ce[2])}}return C.unbind(A,B,q)}},zp=(A,B,q)=>C.dispatch(A,B,q),co=(A,B,q)=>C.dispatch(A,B,q),uo=A=>{if(A&&Ee(A)){const B=A.getAttribute("data-mce-contenteditable");return B&&B!=="inherit"?B:A.contentEditable!=="inherit"?A.contentEditable:null}else return null},fo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:d,events:C,isBlock:w,root:null,clone:I,getRoot:M,getViewPort:ce,getRect:ue,getSize:ve,getParent:je,getParents:ze,get:v,getNext:Rt,getPrev:Y,select:he,is:oe,add:ne,create:we,createHTML:Be,createFragment:Le,remove:Se,setStyle:j,getStyle:J,setStyles:X,removeAllAttribs:xe,setAttrib:O,setAttribs:De,getAttrib:_,getPos:V,parseStyle:qe,serializeStyle:Ke,addStyle:Pt,loadCSS:tt,addClass:nt,removeClass:Zt,hasClass:Jt,toggleClass:Fe,show:Vt,hide:ds,isHidden:gn,uniqueId:on,setHTML:Bt,getOuterHTML:Hn,setOuterHTML:Lo,decode:fe,encode:ee,insertAfter:zs,replace:Hs,rename:ms,findCommonAncestor:Nr,run:$e,getAttribs:P,isEmpty:Vn,createRng:ps,nodeIndex:ti,split:Ar,bind:gs,unbind:mu,fire:co,dispatch:zp,getContentEditable:uo,getContentEditableParent:A=>{const B=M();let q=null;for(;A&&A!==B&&(q=uo(A),q===null);A=A.parentNode);return q},destroy:()=>{if(f.length>0){let A=f.length;for(;A--;){const B=f[A];C.unbind(B[0],B[1],B[2])}}bt(o,(A,B)=>{c.unload(B),delete o[B]})},isChildOf:(A,B)=>A===B||B.contains(A),dumpRng:A=>"startContainer: "+A.startContainer.nodeName+", startOffset: "+A.startOffset+", endContainer: "+A.endContainer.nodeName+", endOffset: "+A.endOffset},gu=ST(p,t,K(fo));return fo};at.DOM=at(document),at.nodeIndex=ti;const NT=at.DOM,AT=0,TT=1,Ol=2,hb=3;class no{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=NT;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Ol}markDone(t){this.states[t]=Ol}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=AT),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{ut(n.scriptLoadedCallbacks,f).each(d=>{T(d,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=H(c,d=>d.status==="rejected");return f.length>0?Promise.reject(We(f,({reason:d})=>kt(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(z(c,f=>n.states[f]===Ol?(s("resolve",f),Promise.resolve()):n.states[f]===hb?(s("reject",f),Promise.reject(f)):(n.states[f]=TT,n.loadScript(f).then(()=>{n.states[f]=Ol,s("resolve",f);const d=n.queue;if(d.length>0)return n.queue=[],r(d).then(o)},()=>(n.states[f]=hb,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return h.from(d).each(qo),o(f)})),a=Og(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,f))}):i(a)}}no.ScriptLoader=new no;const Ut=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},RT=e=>ft(e)&&Ie(e,"raw"),PT=e=>kt(e)&&e.length>1,ia={},Nf=Ut("en"),bb=()=>ut(ia,Nf.get()),ss={getData:()=>Hi(ia,e=>({...e})),setCode:e=>{e&&Nf.set(e)},getCode:()=>Nf.get(),add:(e,t)=>{let n=ia[e];n||(ia[e]=n={}),bt(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=bb().getOr({}),n=i=>Ge(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return ut(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(RT(e))return n(e.raw);if(PT(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Ie(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>bb().bind(e=>ut(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ie(ia,e)},nn=()=>{const e=[],t={},n={},s=[],o=(v,x)=>{const _=H(s,P=>P.name===v&&P.state===x);T(_,P=>P.resolve())},r=v=>Ie(t,v),i=v=>Ie(n,v),a=v=>{if(n[v])return n[v].instance},c=(v,x)=>{const _=ss.getCode(),P=","+(x||"")+",";!_||x&&P.indexOf(","+_+",")===-1||no.ScriptLoader.add(t[v]+"/langs/"+_+".js")},f=(v,x)=>{nn.languageLoad!==!1&&(r(v)?c(v,x):w(v,"loaded").then(()=>c(v,x)))},d=(v,x)=>(e.push(x),n[v]={instance:x},o(v,"added"),x),p=v=>{delete t[v],delete n[v]},C=(v,x)=>me(x)?me(v)?{prefix:"",resource:x,suffix:""}:{prefix:v.prefix,resource:x,suffix:v.suffix}:x,y=(v,x)=>{if(t[v])return Promise.resolve();let _=me(x)?x:x.prefix+x.resource+x.suffix;_.indexOf("/")!==0&&_.indexOf("://")===-1&&(_=nn.baseURL+"/"+_),t[v]=_.substring(0,_.lastIndexOf("/"));const P=()=>(o(v,"loaded"),Promise.resolve());return n[v]?P():no.ScriptLoader.add(_).then(P)},w=(v,x="added")=>x==="added"&&i(v)||x==="loaded"&&r(v)?Promise.resolve():new Promise(_=>{s.push({name:v,state:x,resolve:_})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:d,remove:p,createUrl:C,load:y,waitFor:w}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const OT=e=>{const t=Ut(h.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(h.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(h.some(a))}}},No=()=>{const e=OT(Oe);return{...e,on:n=>e.get().each(n)}},Dl=(e,t)=>{let n=null;return{cancel:()=>{Xs(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Xs(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Af=(e,t)=>{let n=null;const s=()=>{Xs(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Cb=(e,t)=>{let n=[];return T(Yt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Cb(s,t))}),n},En=(e,t)=>PN(t,e),aa=K("mce-annotation"),ir=K("data-mce-annotation"),ni=K("data-mce-annotation-uid"),la=K("data-mce-annotation-active"),ca=K("data-mce-annotation-classes"),ua=K("data-mce-annotation-attrs"),yb=e=>t=>st(t,e),vb=(e,t)=>{const n=e.selection.getRng(),s=S.fromDom(n.startContainer),o=S.fromDom(e.getBody()),r=t.fold(()=>"."+aa(),f=>`[${ir()}="${f}"]`),i=hl(s,n.startOffset).getOr(s),a=nr(i,r,yb(o)),c=(f,d)=>Ki(f,d)?h.some($n(f,d)):h.none();return a.bind(f=>c(f,`${ni()}`).bind(d=>c(f,`${ir()}`).map(p=>{const C=wb(e,d);return{uid:d,name:p,elements:C}})))},DT=e=>Yn(e)&&ef(e,aa()),Eb=(e,t)=>Ki(e,"data-mce-bogus")||Qh(e,'[data-mce-bogus="all"]',yb(t)),wb=(e,t)=>{const n=S.fromDom(e.getBody()),s=En(n,`[${ni()}="${t}"]`);return H(s,o=>!Eb(o,n))},xb=(e,t)=>{const n=S.fromDom(e.getBody()),s=En(n,`[${ir()}="${t}"]`),o={};return T(s,r=>{if(!Eb(r,n)){const i=$n(r,ni()),a=ut(o,i).getOr([]);o[i]=a.concat([r])}}),o},BT=(e,t)=>{const n=Ut({}),s=()=>({listeners:[],previous:No()}),o=(p,C)=>{r(p,y=>(C(y),y))},r=(p,C)=>{const y=n.get(),w=ut(y,p).getOrThunk(s),v=C(w);y[p]=v,n.set(y)},i=(p,C,y)=>{o(p,w=>{T(w.listeners,v=>v(!0,p,{uid:C,nodes:z(y,x=>x.dom)}))})},a=p=>{o(p,C=>{T(C.listeners,y=>y(!1,p))})},c=(p,C)=>{T(wb(e,p),y=>{C?Kt(y,la(),"true"):Gt(y,la())})},f=Af(()=>{const p=Kn(t.getNames());T(p,C=>{r(C,y=>{const w=y.previous.get();return vb(e,h.some(C)).fold(()=>{w.each(v=>{a(C),y.previous.clear(),c(v,!1)})},({uid:v,name:x,elements:_})=>{Vr(w,v)||(w.each(P=>c(P,!1)),i(x,v,_),y.previous.set(v),c(v,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,C)=>{r(p,y=>({previous:y.previous,listeners:y.listeners.concat([C])}))}}},$T=(e,t)=>{const n=ir(),s=r=>h.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(ni(),null),r.attr(ir(),null),r.attr(la(),null);const c=h.from(r.attr(ua())).map(C=>C.split(",")).getOr([]),f=h.from(r.attr(ca())).map(C=>C.split(",")).getOr([]);T(c,C=>r.attr(C,null));const d=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],p=gt(d,[aa()].concat(f));r.attr("class",p.length>0?p.join(" "):null),r.attr(ca(),null),r.attr(ua(),null)};e.serializer.addTempAttr(la()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},IT=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>ut(e,o).map(r=>r.settings),getNames:()=>Gn(e)}};let Sb=0;const _b=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Sb++,e+"_"+s+Sb+String(n)},FT=(e,t)=>{T(t,n=>{Yi(e,n)})},LT=(e,t)=>{T(t,n=>{gl(e,n)})},kb=(e,t)=>S.fromDom(e.dom.cloneNode(t)),si=e=>kb(e,!1),Nb=e=>kb(e,!0),MT=(e,t)=>{const n=S.fromTag(t),s=gh(e);return _s(n,s),n},UT=(e,t)=>{const n=MT(e,t);Eo(e,n);const s=Yt(e);return Zo(n,s),Nt(e),n},Ab=(e,t,n=pt)=>{const s=new Dt(e,t),o=r=>{let i;do i=s[r]();while(i&&!te(i)&&!n(i));return h.from(i).filter(te)};return{current:()=>h.from(s.current()).filter(te),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ar=(e,t)=>{const n=t||(i=>e.isBlock(i)||Tt(i)||vt(i)),s=(i,a,c,f)=>{if(te(i)){const d=f(i,a,i.data);if(d!==-1)return h.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,f))};return{backwards:(i,a,c,f)=>{const d=Ab(i,f,n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const d=Ab(i,f,n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},oi=Math.round,lr=e=>e?{left:oi(e.left),top:oi(e.top),bottom:oi(e.bottom),right:oi(e.right),width:oi(e.width),height:oi(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Tb=(e,t)=>(e=lr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),zT=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Rb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,fa=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Rb(t.top-e.bottom,e,t)},da=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Rb(t.bottom-e.top,e,t),HT=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,VT=e=>Q(e,(t,n)=>t.fold(()=>h.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return h.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),h.none()),Pb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},WT=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),jT=(e,t,n)=>Math.min(Math.max(e,t),n),Bl=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ao=(e,t)=>{if(Ee(e)&&e.hasChildNodes()){const n=e.childNodes,s=jT(t,0,n.length-1);return n[s]}else return e},qT=(e,t)=>{if(!(t<0&&Ee(e)&&e.hasChildNodes()))return Ao(e,t)},KT=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Ob=e=>typeof e=="string"&&e.charCodeAt(0)>=768&&KT.test(e),GT=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},YT=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Db=Ee,XT=Jn,Bb=El("display","block table"),QT=El("float","left right"),ma=YT(Db,XT,Es(QT)),ZT=Es(El("white-space","pre pre-line pre-wrap")),pa=te,Tf=Tt,$b=at.nodeIndex,$l=qT,Rf=e=>"createRange"in e?e.createRange():at.DOM.createRng(),Pf=e=>e&&/[\r\n\t ]/.test(e),Ib=e=>!!e.setStart&&!!e.setEnd,Of=e=>{const t=e.startContainer,n=e.startOffset;if(Pf(e.toString())&&ZT(t.parentNode)&&te(t)){const s=t.data;if(Pf(s[n-1])||Pf(s[n+1]))return!0}return!1},JT=e=>{const t=e.ownerDocument,n=Rf(t),s=t.createTextNode(Xt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=lr(n.getBoundingClientRect());return o.removeChild(s),r},e1=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&te(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),To(r)}else return null},Fb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,To=e=>{let t;const n=e.getClientRects();return n.length>0?t=lr(n[0]):t=lr(e.getBoundingClientRect()),!Ib(e)&&Tf(e)&&Fb(t)?JT(e):Fb(t)&&Ib(e)?e1(e):t},cr=(e,t)=>{const n=Tb(e,t);return n.width=1,n.right=n.left+1,n},t1=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&zT(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=Rf(i.ownerDocument);if(a<i.data.length){if(Ob(i.data[a]))return t;if(Ob(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!Of(c)))return n(cr(To(c),!1)),t}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),Of(c)||n(cr(To(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),Of(c)||n(cr(To(c),!0)))},o=e.container(),r=e.offset();if(pa(o))return s(o,r),t;if(Db(o))if(e.isAtEnd()){const i=$l(o,r);pa(i)&&s(i,i.data.length),ma(i)&&!Tf(i)&&n(cr(To(i),!1))}else{const i=$l(o,r);if(pa(i)&&s(i,0),ma(i)&&e.isAtEnd())return n(cr(To(i),!1)),t;const a=$l(e.container(),e.offset()-1);ma(a)&&!Tf(a)&&(Bb(a)||Bb(i)||!ma(i))&&n(cr(To(a),!1)),ma(i)&&n(cr(To(i),!0))}return t},F=(e,t,n)=>{const s=()=>(pa(e),t===0),o=()=>pa(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=Rf(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=t1(F(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),f=d=>$l(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};F.fromRangeStart=e=>F(e.startContainer,e.startOffset),F.fromRangeEnd=e=>F(e.endContainer,e.endOffset),F.after=e=>F(e.parentNode,$b(e)+1),F.before=e=>F(e.parentNode,$b(e)),F.isAbove=(e,t)=>vn(Lt(t.getClientRects()),Zs(e.getClientRects()),fa).getOr(!1),F.isBelow=(e,t)=>vn(Zs(t.getClientRects()),Lt(e.getClientRects()),da).getOr(!1),F.isAtStart=e=>e?e.isAtStart():!1,F.isAtEnd=e=>e?e.isAtEnd():!1,F.isTextPosition=e=>e?te(e.container()):!1,F.isElementPosition=e=>F.isTextPosition(e)===!1;const Il=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},n1=(e,t,n)=>{t.insertNode(n),Il(e,n.previousSibling),Il(e,n.nextSibling)},s1=(e,t,n)=>{const s=h.from(n.firstChild),o=h.from(n.lastChild);t.insertNode(n),s.each(r=>Il(e,r.previousSibling)),o.each(r=>Il(e,r.nextSibling))},Df=(e,t,n)=>{uf(n)?s1(e,t,n):n1(e,t,n)},os=te,Lb=tr,Mb=at.nodeIndex,Ub=e=>{const t=e.parentNode;return Lb(t)?Ub(t):t},Bf=e=>e?dl(e.childNodes,(t,n)=>(Lb(n)&&n.nodeName!=="BR"?t=t.concat(Bf(n)):t.push(n),t),[]):[],o1=(e,t)=>{for(;(e=e.previousSibling)&&os(e);)t+=e.data.length;return t},zb=e=>t=>e===t,r1=e=>{let t,n;t=Bf(Ub(e)),n=Bg(t,zb(e),e),t=t.slice(0,n+1);const s=dl(t,(o,r,i)=>(os(r)&&os(t[i-1])&&o++,o),0);return t=zr(t,Zn([e.nodeName])),n=Bg(t,zb(e),e),n-s},Hb=e=>{let t;return os(e)?t="text()":t=e.nodeName.toLowerCase(),t+"["+r1(e)+"]"},i1=(e,t,n)=>{const s=[];for(t=t.parentNode;t!==e&&!(n&&n(t));t=t.parentNode)s.push(t);return s},Vb=(e,t)=>{let n,s,o=[],r,i,a;return n=t.container(),s=t.offset(),os(n)?r=o1(n,s):(i=n.childNodes,s>=i.length?(r="after",s=i.length-1):r="before",n=i[s]),o.push(Hb(n)),a=i1(e,n),a=zr(a,Es(tr)),o=o.concat(Ku(a,c=>Hb(c))),o.reverse().join("/")+","+r},a1=(e,t,n)=>{let s=Bf(e);return s=zr(s,(o,r)=>!os(o)||!os(s[r-1])),s=zr(s,Zn([t])),s[n]},l1=(e,t)=>{let n=e,s=0,o;for(;os(n);){if(o=n.data.length,t>=s&&t<=s+o){e=n,t=t-s;break}if(!os(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return os(e)&&t>e.data.length&&(t=e.data.length),F(e,t)},Wb=(e,t)=>{let n;if(!t)return null;const s=t.split(","),o=s[0].split("/");n=s.length>1?s[1]:"before";const r=dl(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),a1(i,c[1],parseInt(c[2],10))):null},e);return r?os(r)?l1(r,parseInt(n,10)):(n==="after"?n=Mb(r)+1:n=Mb(r),F(r.parentNode,n)):null},Fl=vt,c1=(e,t,n)=>{let s,o;for(o=e(t.data.slice(0,n)).length,s=t.previousSibling;s&&te(s);s=s.previousSibling)o+=e(s.data).length;return o},jb=(e,t,n,s,o)=>{let r=s[o?"startContainer":"endContainer"],i=s[o?"startOffset":"endOffset"];const a=[];let c,f=0;const d=e.getRoot();for(te(r)?a.push(n?c1(t,r,i):i):(c=r.childNodes,i>=c.length&&c.length&&(f=1,i=Math.max(0,c.length-1)),a.push(e.nodeIndex(c[i],n)+f));r&&r!==d;r=r.parentNode)a.push(e.nodeIndex(r,n));return a},u1=(e,t,n,s)=>{const o=t.dom,r=jb(o,e,n,s,!0),i=t.isForward(),a=eb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...a};{const c=jb(o,e,n,s,!1);return{start:r,end:c,forward:i,...a}}},$f=(e,t,n)=>{let s=0;return G.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++}}),s},qb=(e,t)=>{let n,s;const o=t?"start":"end";if(n=e[o+"Container"],s=e[o+"Offset"],Ee(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?s:s-1,r.length-1)],n&&(s=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,s))}},Kb=e=>(qb(e,!0),qb(e,!1),e),Gb=(e,t)=>{let n;if(Ee(e)&&(e=Ao(e,t),Fl(e)))return e;if(In(e)&&(te(e)&&Qr(e)&&(e=e.parentNode),n=e.previousSibling,Fl(n)||(n=e.nextSibling,Fl(n))))return n},f1=e=>Gb(e.startContainer,e.startOffset)||Gb(e.endContainer,e.endOffset),Yb=(e,t,n)=>{const s=n.getNode();let o=s?s.nodeName:null;const r=n.getRng();if(Fl(s)||o==="IMG")return{name:o,index:$f(n.dom,o,s)};const i=f1(r);return i?(o=i.tagName,{name:o,index:$f(n.dom,o,i)}):u1(e,n,t,r)},d1=e=>{const t=e.getRng();return{start:Vb(e.dom.getRoot(),F.fromRangeStart(t)),end:Vb(e.dom.getRoot(),F.fromRangeEnd(t)),forward:e.isForward()}},m1=e=>({rng:e.getRng(),forward:e.isForward()}),Xb=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},Qb=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:$f(n,a,i)};const f=Kb(s.cloneRange());if(!r){f.collapse(!1);const p=Xb(n,o+"_end",t);Df(n,f,p)}s=Kb(s),s.collapse(!0);const d=Xb(n,o+"_start",t);return Df(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},p1=(e,t,n)=>t===2?Yb(xo,n,e):t===3?d1(e):t?m1(e):Qb(e,!1),Zb=re(Yb,wt,!0),Jb=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:ct,isError:pt,map:r=>fn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>h.some(e)};return o},eC=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:pt,isError:ct,map:t,mapError:s=>fn.error(s(e)),bind:t,exists:pt,forall:ct,getOr:wt,or:wt,getOrThunk:Ir,orThunk:Ir,getOrDie:ws(String(e)),each:Oe,toOptional:h.none};return n},fn={value:Jb,error:eC,fromOption:(e,t)=>e.fold(()=>eC(t),Jb)},Rs={generate:e=>{if(!kt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return T(e,(s,o)=>{const r=Gn(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!kt(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const C=Gn(p);if(t.length!==C.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+C.join(","));if(!ot(t,w=>R(C,w)))throw new Error("Not all branches were specified when using match. Specified: "+C.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Rs.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const g1=e=>{const t=[],n=[];return T(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},h1=e=>e.type==="inline-command"||e.type==="inline-format",b1=e=>e.type==="block-command"||e.type==="block-format",C1=e=>Kn(e,(t,n)=>t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1),y1=e=>{const t=s=>fn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(kt(e.format)){if(!ot(e.format,me))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(me(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return fn.value(o(i))}else return e.cmd!==void 0?me(e.cmd)?fn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!ft(e))return t("Raw pattern is not an object");if(!me(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!me(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?me(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):fn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},v1=e=>C1(H(e,b1)),tC=e=>H(e,h1),E1=e=>({inlinePatterns:tC(e),blockPatterns:v1(e)}),w1=e=>{const t=g1(z(e,y1));return T(t.errors,n=>console.error(n.message,n.pattern)),t.values},If=Go().deviceType,x1=If.isTouch(),S1=at.DOM,_1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Q(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[Hr(r)]=Hr(i),n},{})},nC=e=>Dn(e,RegExp),ae=e=>t=>t.options.get(e),Ff=e=>me(e)||ft(e),sC=(e,t="")=>n=>{const s=me(n);if(s)if(n.indexOf("=")!==-1){const o=_1(n);return{value:ut(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},k1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:sC(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:sC(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=me(n)&&Js(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=R(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>qn(n)?{valid:!0,value:n}:me(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||me(n)||Qs(n,me);return s?me(n)?{value:z(n.split(","),Hr),valid:s}:kt(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Uf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=me(n)||Qs(n,me);return s?{value:kt(n)?n:z(n.split(","),Hr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=qn(n)||me(n);return s?n===!1||If.isiPhone()||If.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!x1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||me(n)||Ge(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:n=>{const s=n===!1||me(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Ff}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Ff}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Ff}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>me(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Qs(n,ft)||n===!1?{value:w1(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Qs(n,nC)?{value:n,valid:!0}:nC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ss.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:S1.getAttrib(e.getElement(),"placeholder")})})},N1=ae("iframe_attrs"),A1=ae("doctype"),oC=ae("document_base_url"),T1=ae("body_id"),R1=ae("body_class"),rC=ae("content_security_policy"),P1=ae("br_in_pre"),wn=ae("forced_root_block"),ur=ae("forced_root_block_attrs"),O1=ae("newline_behavior"),D1=ae("br_newline_selector"),B1=ae("no_newline_selector"),$1=ae("keep_styles"),I1=ae("end_container_on_empty_block"),iC=ae("automatic_uploads"),aC=ae("images_reuse_filename"),F1=ae("images_replace_blob_uris"),lC=ae("icons"),L1=ae("icons_url"),M1=ae("images_upload_url"),U1=ae("images_upload_base_path"),z1=ae("images_upload_credentials"),H1=ae("images_upload_handler"),V1=ae("content_css_cors"),Lf=ae("referrer_policy"),cC=ae("language"),W1=ae("language_url"),uC=ae("indent_use_margin"),j1=ae("indentation"),q1=ae("content_css"),K1=ae("content_style"),fC=ae("font_css"),G1=ae("directionality"),Y1=ae("inline_boundaries_selector"),dC=ae("object_resizing"),X1=ae("resize_img_proportional"),Q1=ae("placeholder"),mC=ae("event_root"),Z1=ae("service_message"),ri=ae("theme"),J1=ae("theme_url"),Mf=ae("model"),eR=ae("model_url"),ga=ae("inline_boundaries"),tR=ae("formats"),nR=ae("preview_styles"),sR=ae("format_empty_lines"),oR=ae("custom_ui_selector"),Uf=ae("inline"),rR=ae("hidden_input"),iR=ae("submit_patch"),aR=ae("add_form_submit_trigger"),lR=ae("add_unload_trigger"),cR=ae("custom_undo_redo_levels"),uR=ae("disable_nodechange"),pC=ae("readonly"),fR=ae("content_css_cors"),Ll=ae("plugins"),dR=ae("external_plugins"),mR=ae("block_unsupported_drop"),pR=ae("visual"),gR=ae("visual_table_class"),gC=ae("visual_anchor_class"),hR=ae("iframe_aria_text"),bR=ae("setup"),CR=ae("init_instance_callback"),yR=ae("urlconverter_callback"),vR=ae("auto_focus"),ER=ae("browser_spellcheck"),wR=ae("protect"),xR=ae("paste_block_drop"),Ml=ae("paste_data_images"),SR=ae("paste_preprocess"),_R=ae("paste_postprocess"),kR=ae("paste_webkit_styles"),NR=ae("paste_remove_styles_if_webkit"),AR=ae("paste_merge_formats"),TR=ae("smart_paste"),RR=ae("paste_as_text"),PR=ae("paste_tab_spaces"),OR=ae("allow_html_data_urls"),hC=ae("text_patterns"),bC=ae("noneditable_class"),DR=ae("editable_class"),BR=ae("noneditable_regexp"),$R=e=>G.explode(e.options.get("font_size_style_values")),IR=e=>G.explode(e.options.get("font_size_classes")),FR=e=>e.options.get("encoding")==="xml",CC=e=>G.explode(e.options.get("images_file_types")),LR=ae("table_tab_navigation"),MR=Ee,yC=te,vC=e=>{const t=e.parentNode;t&&t.removeChild(e)},EC=e=>{const t=xo(e);return{count:e.length-t.length,text:t}},wC=e=>{let t;for(;(t=e.data.lastIndexOf(Wt))!==-1;)e.deleteData(t,1)},xC=(e,t)=>(fr(e),t),UR=(e,t)=>{const n=EC(e.data.substr(0,t.offset())),s=EC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(wC(e),F(e,t.offset()-n.count)):t},zR=(e,t)=>{const n=t.container(),s=k(ht(n.childNodes),e).map(o=>o<t.offset()?F(n,t.offset()-1):t).getOr(t);return fr(e),s},HR=(e,t)=>yC(e)&&t.container()===e?UR(e,t):xC(e,t),VR=(e,t)=>t.container()===e.parentNode?zR(e,t):xC(e,t),WR=(e,t)=>F.isTextPosition(t)?HR(e,t):VR(e,t),fr=e=>{MR(e)&&In(e)&&(Jh(e)?e.removeAttribute("data-mce-caret"):vC(e)),yC(e)&&(wC(e),e.data.length===0&&vC(e))},jR=vt,qR=Ts,KR=wl,GR="*[contentEditable=false],video,audio,embed,object",SC=(e,t,n)=>{const s=Tb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},YR=e=>{const t=En(S.fromDom(e),GR);for(let n=0;n<t.length;n++){const s=t[n].dom;let o=s.previousSibling;if(Nl(o)){const r=o.data;r.length===1?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)}o=s.nextSibling,kl(o)&&(o.data.length===1?o.parentNode.removeChild(o):o.deleteData(0,1))}},XR=(e,t,n,s)=>{const o=No();let r,i;const a=wn(e),c=e.dom,f=(v,x)=>{let _;if(d(),KR(x))return null;if(n(x)){i=OA(a,x,v);const P=SC(t,x,v);c.setStyle(i,"top",P.top);const O=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(O,{...P}),c.add(t,O),o.set({caret:O,element:x,before:v}),v&&c.addClass(O,"mce-visual-caret-before"),p(),_=x.ownerDocument.createRange(),_.setStart(i,0),_.setEnd(i,0)}else return i=RA(x,v),_=x.ownerDocument.createRange(),ha(i.nextSibling)?(_.setStart(i,0),_.setEnd(i,0)):(_.setStart(i,1),_.setEnd(i,1)),_;return _},d=()=>{YR(t),i&&(fr(i),i=null),o.on(v=>{c.remove(v.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(v=>{s()?c.toggleClass(v.caret,"mce-visual-caret-hidden"):c.addClass(v.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(v=>{const x=SC(t,v.element,v.before);c.setStyles(v.caret,{...x})})},destroy:()=>clearInterval(r)}},_C=()=>Qe.browser.isFirefox(),ha=e=>jR(e)||qR(e),ba=e=>ha(e)||ea(e)&&_C(),QR=As,zf=vt,ZR=Ts,kC=El("display","block table table-cell table-caption list-item"),NC=In,AC=Qr,TC=Ee,JR=Jn,ii=e=>e>0,dr=e=>e<0,Ul=(e,t)=>{let n;for(;n=e(t);)if(!AC(n))return n;return null},Ca=(e,t,n,s,o)=>{const r=new Dt(e,s),i=zf(e)||AC(e);if(dr(t)){if(i&&(e=Ul(r.prev.bind(r),!0),n(e)))return e;for(;e=Ul(r.prev.bind(r),o);)if(n(e))return e}if(ii(t)){if(i&&(e=Ul(r.next.bind(r),!0),n(e)))return e;for(;e=Ul(r.next.bind(r),o);)if(n(e))return e}return null},eP=(e,t)=>{const n=o=>QR(o.dom),s=o=>o.dom===t;return Kr(S.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Ro=(e,t)=>{for(;e&&e!==t;){if(kC(e))return e;e=e.parentNode}return null},Ps=(e,t,n)=>Ro(e.container(),n)===Ro(t.container(),n),Hf=(e,t)=>{if(!t)return null;const n=t.container(),s=t.offset();return TC(n)?n.childNodes[s+e]:null},RC=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},tP=(e,t,n)=>Ro(t,e)===Ro(n,e),PC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let o=n[s];if(NC(o)&&(o=o[s]),zf(o)||ZR(o)){if(tP(t,o,n))return o;break}if(JR(o))break;n=n.parentNode}return null},ya=re(RC,!0),va=re(RC,!1),Vf=(e,t,n)=>{let s;const o=re(PC,!0,t),r=re(PC,!1,t);let i=n.startContainer;const a=n.startOffset;if(Qr(i)){TC(i)||(i=i.parentNode);const c=i.getAttribute("data-mce-caret");if(c==="before"&&(s=i.nextSibling,ba(s)))return ya(s);if(c==="after"&&(s=i.previousSibling,ba(s)))return va(s)}if(!n.collapsed)return n;if(te(i)){if(NC(i)){if(e===1){if(s=r(i),s)return ya(s);if(s=o(i),s)return va(s)}if(e===-1){if(s=o(i),s)return va(s);if(s=r(i),s)return ya(s)}return n}if(Nl(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?ya(s):n;if(kl(i)&&a<=1)return e===-1&&(s=o(i),s)?va(s):n;if(a===i.data.length)return s=r(i),s?ya(s):n;if(a===0)return s=o(i),s?va(s):n}return n},OC=(e,t)=>h.from(Hf(e?0:-1,t)).filter(zf),Ea=(e,t,n)=>{const s=Vf(e,t,n);return e===-1?F.fromRangeStart(s):F.fromRangeEnd(s)},zl=e=>h.from(e.getNode()).map(S.fromDom),nP=e=>h.from(e.getNode(!0)).map(S.fromDom),Wf=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Hl=(e,t)=>{const n=Ps(e,t);return!n&&Tt(e.getNode())?!0:n};var Ft;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ft||(Ft={}));const sP=vt,Os=te,DC=Ee,jf=Tt,ai=Jn,BC=VA,Vl=sb,oP=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},$C=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,IC=(e,t)=>{if(ii(e)){if(ai(t.previousSibling)&&!Os(t.previousSibling))return F.before(t);if(Os(t))return F(t,0)}if(dr(e)){if(ai(t.nextSibling)&&!Os(t.nextSibling))return F.after(t);if(Os(t))return F(t,t.data.length)}return dr(e)?jf(t)?F.before(t):F.after(t):F.before(t)},rP=(e,t)=>{const n=t.nextSibling;return n&&ai(n)?Os(n)?F(n,0):F.before(n):qf(Ft.Forwards,F.after(t),e)},qf=(e,t,n)=>{let s,o,r,i;if(!DC(n)||!t)return null;if(t.isEqual(F.after(n))&&n.lastChild){if(i=F.after(n.lastChild),dr(e)&&ai(n.lastChild)&&DC(n.lastChild))return jf(n.lastChild)?F.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Os(a)){if(dr(e)&&c>0)return F(a,--c);if(ii(e)&&c<a.length)return F(a,++c);s=a}else{if(dr(e)&&c>0&&(o=$C(a,c-1),ai(o)))return!BC(o)&&(r=Ca(o,e,Vl,o),r)?Os(r)?F(r,r.data.length):F.after(r):Os(o)?F(o,o.data.length):F.before(o);if(ii(e)&&c<a.childNodes.length&&(o=$C(a,c),ai(o)))return jf(o)?rP(n,o):!BC(o)&&(r=Ca(o,e,Vl,o),r)?Os(r)?F(r,0):F.before(r):Os(o)?F(o,0):F.after(o);s=o||i.getNode()}if((ii(e)&&i.isAtEnd()||dr(e)&&i.isAtStart())&&(s=Ca(s,e,ct,n,!0),Vl(s,n)))return IC(e,s);o=Ca(s,e,Vl,n);const f=yo(H(oP(a,n),sP));return f&&(!o||!f.contains(o))?(ii(e)?i=F.after(f):i=F.before(f),i):o?IC(e,o):null},Ds=e=>({next:t=>qf(Ft.Forwards,t,e),prev:t=>qf(Ft.Backwards,t,e)}),iP=(e,t,n)=>{const s=e?F.before(n):F.after(n);return Fn(e,t,s)},aP=e=>Tt(e)?F.before(e):F.after(e),FC=e=>F.isTextPosition(e)?e.offset()===0:Jn(e.getNode()),LC=e=>{if(F.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Jn(e.getNode(!0))},MC=(e,t)=>!F.isTextPosition(e)&&!F.isTextPosition(t)&&e.getNode()===t.getNode(!0),lP=e=>!F.isTextPosition(e)&&Tt(e.getNode()),cP=(e,t,n)=>e?!MC(t,n)&&!lP(t)&&LC(t)&&FC(n):!MC(n,t)&&FC(t)&&LC(n),Fn=(e,t,n)=>{const s=Ds(t);return h.from(e?s.next(n):s.prev(n))},Wl=(e,t,n)=>Fn(e,t,n).bind(s=>Ps(n,s,t)&&cP(e,n,s)?Fn(e,t,s):h.some(s)),UC=(e,t,n,s)=>Wl(e,t,n).bind(o=>s(o)?UC(e,t,o,s):h.some(o)),li=(e,t)=>{const n=e?t.firstChild:t.lastChild;return te(n)?h.some(F(n,e?0:n.data.length)):n?Jn(n)?h.some(e?F.before(n):aP(n)):iP(e,t,n):h.none()},Ln=re(Fn,!0),rs=re(Fn,!1),dn=re(li,!0),Bs=re(li,!1),zC="_mce_caret",$s=e=>Ee(e)&&e.id===zC,mr=(e,t)=>{for(;t&&t!==e;){if(t.id===zC)return t;t=t.parentNode}return null},uP=e=>me(e.start),fP=e=>Ie(e,"rng"),dP=e=>Ie(e,"id"),HC=e=>Ie(e,"name"),VC=e=>G.isArray(e.start),jl=e=>!HC(e)&&qn(e.forward)?e.forward:!0,WC=(e,t)=>(Ee(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),mP=(e,t)=>{const n=e.createRng(),s=Wb(e.getRoot(),t.start);n.setStart(s.container(),s.offset());const o=Wb(e.getRoot(),t.end);return n.setEnd(o.container(),o.offset()),{range:n,forward:jl(t)}},pP=(e,t)=>{const n=e.ownerDocument.createTextNode(Wt);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},gP=e=>e.hasChildNodes()===!1,hP=(e,t)=>Bs(e).fold(pt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),jC=(e,t,n)=>gP(t)&&mr(e,t)?(pP(t,n),!0):!1,qC=(e,t,n,s)=>{const o=n[t?"start":"end"];let r,i,a,c;const f=e.getRoot();if(o){for(a=o[0],i=f,r=o.length-1;r>=1;r--){if(c=i.childNodes,jC(f,i,s))return!0;if(o[r]>c.length-1)return jC(f,i,s)?!0:hP(i,s);i=c[o[r]]}i.nodeType===3&&(a=Math.min(o[0],i.nodeValue.length)),i.nodeType===1&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},Kf=e=>te(e)&&e.data.length>0,KC=(e,t,n)=>{let s=e.get(n.id+"_"+t),o,r,i,a;const c=n.keep;let f,d;if(s){if(o=s.parentNode,t==="start"?(c?s.hasChildNodes()?(o=s.firstChild,r=1):Kf(s.nextSibling)?(o=s.nextSibling,r=0):Kf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)+1):r=e.nodeIndex(s),f=o,d=r):(c?s.hasChildNodes()?(o=s.firstChild,r=1):Kf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)):r=e.nodeIndex(s),f=o,d=r),!c){for(a=s.previousSibling,i=s.nextSibling,G.each(G.grep(s.childNodes),p=>{te(p)&&(p.nodeValue=p.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&te(a)&&!Qe.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),f=a,d=r)}return h.some(F(f,d))}else return h.none()},bP=(e,t)=>{const n=e.createRng();return qC(e,!0,t,n)&&qC(e,!1,t,n)?h.some({range:n,forward:jl(t)}):h.none()},CP=(e,t)=>{const n=KC(e,"start",t),s=KC(e,"end",t);return vn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(WC(e,o.container()),o.offset()),i.setEnd(WC(e,r.container()),r.offset()),{range:i,forward:jl(t)}})},yP=(e,t)=>h.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),vP=(e,t)=>{const n=e.dom;if(t){if(VC(t))return bP(n,t);if(uP(t))return h.some(mP(n,t));if(dP(t))return CP(n,t);if(HC(t))return yP(n,t);if(fP(t))return h.some({range:t.rng,forward:jl(t)})}return h.none()},EP=(e,t,n)=>p1(e,t,n),wP=(e,t)=>{vP(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Mn=e=>Ee(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",ql=(e=>t=>e===t)(Xt),wa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Gf=e=>!wa(e)&&!ql(e)&&!Zh(e),xP=e=>({value:e}),Yf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},SP=e=>{const t=Yf(e.red)+Yf(e.green)+Yf(e.blue);return xP(t)},_P=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,kP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,GC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),YC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return GC(o,r,i,a)},NP=e=>{if(e==="transparent")return h.some(GC(0,0,0,0));const t=_P.exec(e);if(t!==null)return h.some(YC(t[1],t[2],t[3],"1"));const n=kP.exec(e);return n!==null?h.some(YC(n[1],n[2],n[3],n[4])):h.none()},Kl=e=>NP(e).map(SP).map(t=>"#"+t.value).getOr(e),Gl=e=>!!e.nodeType,AP=e=>e&&/^(IMG)$/.test(e.nodeName),XC=(e,t,n)=>{const s=n.startOffset;let o=n.startContainer;if(!(o===n.endContainer&&AP(o.childNodes[s]))&&Ee(o)){const r=o.childNodes;let i;s<r.length?(o=r[s],i=new Dt(o,e.getParent(o,e.isBlock))):(o=r[r.length-1],i=new Dt(o,e.getParent(o,e.isBlock)),i.next(!0));for(let a=i.current();a;a=i.next())if(te(a)&&!Qf(a)){n.setStart(a,0),t.setRng(n);return}}},QC=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(Ee(e)||!Qf(e))return e}},Xf=(e,t)=>(Gl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),ci=(e,t,n)=>e.schema.isValidChild(t,n),Qf=(e,t=!1)=>{if(ke(e)&&te(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return sr(n)}else return!1},TP=e=>ke(e)&&te(e)&&e.length===0,so=(e,t)=>(Ge(e)?e=e(t):ke(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),Zf=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Jf=(e,t)=>((t==="color"||t==="backgroundColor")&&(e=Kl(e)),t==="fontWeight"&&e===700&&(e="bold"),t==="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),Yl=(e,t,n)=>Jf(e.getStyle(t,n),n),ZC=(e,t)=>{let n;return e.getParent(t,s=>(n=e.getStyle(s,"text-decoration"),n&&n!=="none")),n},Xl=(e,t,n)=>e.getParents(t,n,e.getRoot()),RP=(e,t)=>{const n=s=>{const o=r=>r.length>1&&r.charAt(0)==="%";return U(["styles","attributes"],r=>ut(s,r).exists(i=>{const a=kt(i)?i:ju(i);return U(a,o)}))};return U(e.formatter.get(t),n)},PP=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Vi(r,(i,a)=>U(s,c=>c===a));return U(e.formatter.get(t),r=>{const i=o(r);return U(e.formatter.get(n),a=>{const c=o(a);return jk(i,c)})})},Is=e=>Ur(e,"block"),Tn=e=>Ur(e,"selector"),zt=e=>Ur(e,"inline"),OP=e=>Tn(e)&&zt(e)&&Vr(ut(e,"mixed"),!0),ed=e=>Tn(e)&&e.expand!==!1&&!zt(e),ui=Mn,JC=Xl,ey=Qf,DP=Xf,BP=e=>Tt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,ty=(e,t)=>{let n=t;for(;n;){if(Ee(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},ny=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},$P=(e,t,n)=>ny(e,t,n,s=>ql(s)||wa(s)),IP=(e,t,n)=>ny(e,t,n,Gf),sy=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,C)=>{const y=ar(e),w=o?y.backwards:y.forwards;return h.from(w(d,p,(v,x)=>ui(v.parentNode)?-1:(i=v,C(o,v,x)),a))};return c(n,s,$P).bind(d=>r?c(d.container,d.offset+(o?-1:0),IP):h.some(d)).orThunk(()=>i?h.some({container:i,offset:o?0:i.length}):h.none())},oy=(e,t,n,s,o)=>{te(s)&&ml(s.data)&&s[o]&&(s=s[o]);const r=JC(e,s);for(let i=0;i<r.length;i++)for(let a=0;a<t.length;a++){const c=t[a];if(!(ke(c.collapsed)&&c.collapsed!==n.collapsed)&&Tn(c)&&e.is(r[i],c.selector))return r[i]}return s},ry=(e,t,n,s)=>{let o=n;const r=e.dom,i=r.getRoot(),a=t[0];if(Is(a)&&(o=a.wrapper?null:r.getParent(n,a.block,i)),!o){const c=r.getParent(n,"LI,TD,TH");o=r.getParent(te(n)?n.parentNode:n,f=>f!==i&&DP(e,f),c)}if(o&&Is(a)&&a.wrapper&&(o=JC(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[s]&&!r.isBlock(o[s])&&(o=o[s],!Zf(o,"br")););return o||n},iy=(e,t,n,s)=>{const o=n.parentNode;return ke(n[s])?!1:o===t||$t(o)||e.isBlock(o)?!0:iy(e,t,o,s)},Ql=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(te(n)&&!ey(n)&&(o?s>0:s<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=te(c)&&!iy(e,a,c,i);if(!ui(c)&&!BP(c)&&!ey(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},ay=e=>ui(e.parentNode)||ui(e),fi=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,f=n[0];return Ee(o)&&o.hasChildNodes()&&(o=Ao(o,r),te(o)&&(r=0)),Ee(i)&&i.hasChildNodes()&&(i=Ao(i,t.collapsed?a:a-1),te(i)&&(a=i.nodeValue.length)),o=ty(c,o),i=ty(c,i),ay(o)&&(o=ui(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,te(o)&&(r=t.collapsed?o.length:0)),ay(i)&&(i=ui(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,te(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(sy(c,e.getBody(),o,r,!0,s).each(({container:C,offset:y})=>{o=C,r=y}),sy(c,e.getBody(),i,a,!1,s).each(({container:C,offset:y})=>{i=C,a=y})),(zt(f)||f.block_expand)&&((!zt(f)||!te(o)||r===0)&&(o=Ql(c,n,o,r,!0)),(!zt(f)||!te(i)||a===i.nodeValue.length)&&(i=Ql(c,n,i,a,!1))),ed(f)&&(o=oy(c,n,t,o,"previousSibling"),i=oy(c,n,t,i,"nextSibling")),(Is(f)||Tn(f))&&(o=ry(e,n,o,"previousSibling"),i=ry(e,n,i,"nextSibling"),Is(f)&&(c.isBlock(o)||(o=Ql(c,n,o,r,!0)),c.isBlock(i)||(i=Ql(c,n,i,a,!1)))),Ee(o)&&(r=c.nodeIndex(o),o=o.parentNode),Ee(i)&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},xa=(e,t,n)=>{const s=t.startOffset,o=Ao(t.startContainer,s),r=t.endOffset,i=Ao(t.endContainer,r-1),a=v=>{const x=v[0];te(x)&&x===o&&s>=x.data.length&&v.splice(0,1);const _=v[v.length-1];return r===0&&v.length>0&&_===i&&te(_)&&v.splice(v.length-1,1),v},c=(v,x,_)=>{const P=[];for(;v&&v!==_;v=v[x])P.push(v);return P},f=(v,x)=>e.getParent(v,_=>_.parentNode===x,x),d=(v,x,_)=>{const P=_?"nextSibling":"previousSibling";for(let O=v,I=O.parentNode;O&&O!==x;O=I){I=O.parentNode;const M=c(O===v?O:O[P],P);M.length&&(_||M.reverse(),n(a(M)))}};if(o===i)return n(a([o]));const p=e.findCommonAncestor(o,i);if(e.isChildOf(o,i))return d(o,p,!0);if(e.isChildOf(i,o))return d(i,p);const C=f(o,p)||o,y=f(i,p)||i;d(o,C,!0);const w=c(C===o?C:C.nextSibling,"nextSibling",y===i?y.nextSibling:y);w.length&&n(a(w)),d(i,y)},td=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},FP=e=>We(e,t=>{const n=Bl(t);return n?[S.fromDom(n)]:[]}),LP=e=>td(e).length>1,MP=e=>H(FP(e),xl),UP=e=>En(e,"td[data-mce-selected],th[data-mce-selected]"),ly=(e,t)=>{const n=UP(t);return n.length>0?n:MP(e)},di=e=>ly(td(e.selection.getSel()),S.fromDom(e.getBody())),Sa=(e,t)=>ta(e,"table",t),zP=e=>{const t=e.startContainer,n=e.startOffset;return te(t)?n===0?h.some(S.fromDom(t)):h.none():h.from(t.childNodes[n]).map(S.fromDom)},HP=e=>{const t=e.endContainer,n=e.endOffset;return te(t)?n===t.data.length?h.some(S.fromDom(t)):h.none():h.from(t.childNodes[n-1]).map(S.fromDom)},cy=e=>kh(e).fold(K([e]),t=>[e].concat(cy(t))),nd=e=>tf(e).fold(K([e]),t=>yt(t)==="br"?Xo(t).map(n=>[e].concat(nd(n))).getOr([]):[e].concat(nd(t))),sd=(e,t)=>vn(zP(t),HP(t),(n,s)=>{const o=ge(cy(e),re(st,n)),r=ge(nd(e),re(st,s));return o.isSome()&&r.isSome()}).getOr(!1),od=(e,t,n,s)=>{const o=n,r=new Dt(n,o),i=Vi(e.schema.getMoveCaretBeforeOnEnterElements(),(a,c)=>!R(["td","th","table"],c.toLowerCase()));do{if(te(n)&&G.trim(n.nodeValue).length!==0){s?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(i[n.nodeName]){s?t.setStartBefore(n):n.nodeName==="BR"?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Zl=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},rd=(e,t)=>{const n=di(e);n.length>0?T(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},id=(e,t,n)=>{const s=Qb(e,t);n(s),e.moveToBookmark(s)},uy=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?h.from(r.dom.nodeValue):h.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(Bn,"text"),ad=e=>uy.get(e),fy=e=>uy.getOption(e),VP=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],WP=e=>Bn(e)&&ad(e)===Wt,jP=(e,t,n,s)=>Xn(t).fold(()=>"skipping",o=>s==="br"||WP(t)?"valid":DT(t)?"existing":$s(t.dom)?"caret":U(VP,r=>ks(t,r))?"valid-block":!ci(e,n,s)||!ci(e,yt(o),n)?"invalid-child":"valid"),qP=(e,t)=>{const n=fi(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},dy=(e,t,n,s,o,r)=>{const{uid:i=t,...a}=n;Yi(e,aa()),Kt(e,`${ni()}`,i),Kt(e,`${ir()}`,s);const{attributes:c={},classes:f=[]}=o(i,a);if(_s(e,c),FT(e,f),r){f.length>0&&Kt(e,`${ca()}`,f.join(","));const d=Gn(c);d.length>0&&Kt(e,`${ua()}`,d.join(","))}},KP=e=>{gl(e,aa()),Gt(e,`${ni()}`),Gt(e,`${ir()}`),Gt(e,`${la()}`);const t=Wr(e,`${ua()}`).map(s=>s.split(",")).getOr([]),n=Wr(e,`${ca()}`).map(s=>s.split(",")).getOr([]);T(t,s=>Gt(e,s)),LT(e,n),Gt(e,`${ca()}`),Gt(e,`${ua()}`)},my=(e,t,n,s,o)=>{const r=S.fromTag("span",e);return dy(r,t,n,s,o,!1),r},GP=(e,t,n,s,o,r)=>{const i=[],a=my(e.getDoc(),n,r,s,o),c=No(),f=()=>{c.clear()},d=()=>c.get().getOrThunk(()=>{const w=si(a);return i.push(w),c.set(w),w}),p=w=>{T(w,C)},C=w=>{switch(jP(e,w,"span",yt(w))){case"invalid-child":{f();const x=Yt(w);p(x),f();break}case"valid-block":{f(),dy(w,n,r,s,o,!0);break}case"valid":{const x=d();WN(w,x);break}}},y=w=>{const v=z(w,S.fromDom);p(v)};return xa(e.dom,t,w=>{f(),y(w)}),i},YP=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=di(e).length>0,a=_b("mce-annotation");if(r.collapsed&&!i&&qP(e,r),o.getRng().collapsed&&!i){const c=my(e.getDoc(),a,s,t,n.decorate);sf(c,Xt),o.getRng().insertNode(c.dom),o.select(c.dom)}else id(o,!1,()=>{rd(e,c=>{GP(e,c,a,t,n.decorate,s)})})})},py=e=>{const t=IT();$T(e,t);const n=BT(e,t),s=mh("span"),o=r=>{T(r,i=>{s(i)?Jo(i):KP(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{YP(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{const i=e.selection.getBookmark();vb(e,h.some(r)).each(({elements:a})=>{o(a)}),e.selection.moveToBookmark(i)},removeAll:r=>{const i=e.selection.getBookmark();bt(xb(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=xb(e,r);return Hi(i,a=>z(a,c=>c.dom))}}},_a=e=>({getBookmark:re(EP,e),moveToBookmark:re(wP,e)});_a.isBookmarkNode=Mn;const gy=(e,t,n)=>n.collapsed?!1:U(n.getClientRects(),s=>HT(s,e,t)),XP=(e,t)=>e.dispatch("PreProcess",t),QP=(e,t)=>e.dispatch("PostProcess",t),ZP=e=>e.dispatch("remove"),JP=e=>e.dispatch("detach"),eO=(e,t)=>e.dispatch("SwitchMode",{mode:t}),tO=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},nO=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},sO=e=>e.dispatch("PreInit"),oO=e=>e.dispatch("PostRender"),rO=e=>e.dispatch("Init"),iO=(e,t)=>e.dispatch("PlaceholderToggle",{state:t}),hy=(e,t,n)=>e.dispatch(t,n),by=(e,t,n,s)=>e.dispatch("FormatApply",{format:t,node:n,vars:s}),ld=(e,t,n,s)=>e.dispatch("FormatRemove",{format:t,node:n,vars:s}),aO=(e,t)=>e.dispatch("BeforeSetContent",t),Cy=(e,t)=>e.dispatch("SetContent",t),lO=(e,t)=>e.dispatch("BeforeGetContent",t),yy=(e,t)=>e.dispatch("GetContent",t),cO=(e,t)=>e.dispatch("AutocompleterStart",t),uO=(e,t)=>e.dispatch("AutocompleterUpdate",t),fO=e=>e.dispatch("AutocompleterEnd"),dO=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),mO=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),vy=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),pe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||pe.metaKeyPressed(e),metaKeyPressed:e=>Qe.os.isMacOS()||Qe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},pr="data-mce-selected",pO="table,img,figure.image,hr,video,span.mce-preview-object",Ey=Math.abs,Jl=Math.round,cd={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},gO=e=>e.type==="longpress"||e.type.indexOf("touch")===0,wy=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,f,d,p,C,y,w,v,x,_,P,O,I,M,ce;const V=ee=>ke(ee)&&(jh(ee)||n.is(ee,"figure.image")),j=ee=>Ts(ee)||n.hasClass(ee,"mce-preview-object"),X=(ee,Be)=>{if(gO(ee)){const Le=ee.touches[0];return V(ee.target)&&!gy(Le.clientX,Le.clientY,Be)}else return V(ee.target)&&!gy(ee.clientX,ee.clientY,Be)},J=ee=>{const Be=ee.target;X(ee,t.selection.getRng())&&!ee.isDefaultPrevented()&&t.selection.select(Be)},ve=ee=>n.is(ee,"figure.image")?[ee.querySelector("img")]:n.hasClass(ee,"mce-preview-object")&&ke(ee.firstElementChild)?[ee,ee.firstElementChild]:[ee],ue=ee=>{const Be=dC(t);return!Be||ee.getAttribute("data-mce-resize")==="false"||ee===t.getBody()?!1:n.hasClass(ee,"mce-preview-object")?ks(S.fromDom(ee.firstElementChild),Be):ks(S.fromDom(ee),Be)},oe=ee=>j(ee)?n.create("img",{src:Qe.transparentSrc}):ee.cloneNode(!0),ze=(ee,Be,Le)=>{if(ke(Le)){const Se=ve(ee);T(Se,xe=>{xe.style[Be]||!t.schema.isValid(xe.nodeName.toLowerCase(),Be)?n.setStyle(xe,Be,Le):n.setAttrib(xe,Be,""+Le)})}},je=(ee,Be,Le)=>{ze(ee,"width",Be),ze(ee,"height",Le)},Je=ee=>{let Be,Le,Se,xe,qe;Be=ee.screenX-p,Le=ee.screenY-C,O=Be*f[2]+v,I=Le*f[3]+x,O=O<5?5:O,I=I<5?5:I,(V(i)||j(i))&&X1(t)!==!1?Se=!pe.modifierPressed(ee):Se=pe.modifierPressed(ee),Se&&(Ey(Be)>Ey(Le)?(I=Jl(O*_),O=Jl(I/_)):(O=Jl(I/_),I=Jl(O*_))),je(a,O,I),xe=f.startPos.x+Be,qe=f.startPos.y+Le,xe=xe>0?xe:0,qe=qe>0?qe:0,n.setStyles(c,{left:xe,top:qe,display:"block"}),c.innerHTML=O+" &times; "+I,f[2]<0&&a.clientWidth<=O&&n.setStyle(a,"left",y+(v-O)),f[3]<0&&a.clientHeight<=I&&n.setStyle(a,"top",w+(x-I)),Be=r.scrollWidth-M,Le=r.scrollHeight-ce,Be+Le!==0&&n.setStyles(c,{left:xe-Be,top:qe-Le}),P||(tO(t,i,v,x,"corner-"+f.name),P=!0)},Rt=()=>{const ee=P;P=!1,ee&&(ze(i,"width",O),ze(i,"height",I)),n.unbind(s,"mousemove",Je),n.unbind(s,"mouseup",Rt),o!==s&&(n.unbind(o,"mousemove",Je),n.unbind(o,"mouseup",Rt)),n.remove(a),n.remove(c),n.remove(d),Y(i),ee&&(nO(t,i,O,I,"corner-"+f.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Y=ee=>{ne();const Be=n.getPos(ee,r),Le=Be.x,Se=Be.y,xe=ee.getBoundingClientRect(),qe=xe.width||xe.right-xe.left,Ke=xe.height||xe.bottom-xe.top;i!==ee&&($e(),i=ee,O=I=0);const Pt=t.dispatch("ObjectSelected",{target:ee});ue(ee)&&!Pt.isDefaultPrevented()?bt(cd,(tt,Fe)=>{let nt;const Zt=Jt=>{const Vt=ve(i)[0];p=Jt.screenX,C=Jt.screenY,v=Vt.clientWidth,x=Vt.clientHeight,_=x/v,f=tt,f.name=Fe,f.startPos={x:qe*tt[0]+Le,y:Ke*tt[1]+Se},M=r.scrollWidth,ce=r.scrollHeight,d=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=oe(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Le,top:Se,margin:0}),je(a,qe,Ke),a.removeAttribute(pr),r.appendChild(a),n.bind(s,"mousemove",Je),n.bind(s,"mouseup",Rt),o!==s&&(n.bind(o,"mousemove",Je),n.bind(o,"mouseup",Rt)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+x)};nt=n.get("mceResizeHandle"+Fe),nt&&n.remove(nt),nt=n.add(r,"div",{id:"mceResizeHandle"+Fe,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Fe+"-resize; margin:0; padding:0"}),n.bind(nt,"mousedown",Jt=>{Jt.stopImmediatePropagation(),Jt.preventDefault(),Zt(Jt)}),tt.elm=nt,n.setStyles(nt,{left:qe*tt[0]+Le-nt.offsetWidth/2,top:Ke*tt[1]+Se-nt.offsetHeight/2})}):$e(!1)},he=Dl(Y,0),$e=(ee=!0)=>{he.cancel(),ne(),i&&ee&&i.removeAttribute(pr),bt(cd,(Be,Le)=>{const Se=n.get("mceResizeHandle"+Le);Se&&(n.unbind(Se),n.remove(Se))})},De=(ee,Be)=>ke(ee)&&n.isChildOf(ee,Be),Bt=ee=>{if(P||t.removed||t.composing)return;const Be=ee.type==="mousedown"?ee.target:e.getNode(),Le=nr(S.fromDom(Be),pO).map(xe=>xe.dom).getOrUndefined(),Se=ke(Le)?n.getAttrib(Le,pr,"1"):"1";if(T(n.select(`img[${pr}],hr[${pr}]`),xe=>{xe.removeAttribute(pr)}),De(Le,r)){we();const xe=e.getStart(!0);if(De(xe,Le)&&De(e.getEnd(!0),Le)){n.setAttrib(Le,pr,Se),he.throttle(Le);return}}$e()},ne=()=>{bt(cd,ee=>{ee.elm&&(n.unbind(ee.elm),delete ee.elm)})},we=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{we(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Bt),t.on("keyup compositionend",ee=>{i&&i.nodeName==="TABLE"&&Bt(ee)}),t.on("hide blur",$e),t.on("contextmenu longpress",J,!0)}),t.on("remove",ne),{isResizable:ue,showResizeRect:Y,hideResizeRect:$e,updateResizeRect:Bt,destroy:()=>{he.cancel(),i=a=d=null}}},hO=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},bO=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},xy=(e,t,n)=>{const s=e.document.createRange();return hO(s,t),bO(s,n),s},ud=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},ka=Rs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sy=(e,t,n)=>t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset),CO=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:h.none}),relative:(n,s)=>({ltr:Ko(()=>xy(e,n,s)),rtl:Ko(()=>h.some(xy(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Ko(()=>ud(e,n,s,o,r)),rtl:Ko(()=>h.some(ud(e,o,r,n,s)))})}),yO=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>ka.rtl(S.fromDom(o.endContainer),o.endOffset,S.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>Sy(e,ka.ltr,n)):Sy(e,ka.ltr,n)},vO=(e,t)=>{const n=CO(e,t);return yO(e,n)};ka.ltr,ka.rtl;const _y={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},EO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return h.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),h.some(i)})},wO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},xO=(()=>document.caretPositionFromPoint?EO:document.caretRangeFromPoint?wO:h.none)(),SO=(e,t,n)=>{const s=S.fromDom(e.document);return xO(s,t,n).map(o=>_y.create(S.fromDom(o.startContainer),o.startOffset,S.fromDom(o.endContainer),o.endOffset))},fd=Rs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_O=(e,t,n,s)=>e.fold(t,n,s),kO=e=>e.fold(wt,wt,wt),NO=fd.before,AO=fd.on,TO=fd.after,oo={before:NO,on:AO,after:TO,cata:_O,getStart:kO},ec=Rs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),RO=e=>ec.exact(e.start,e.soffset,e.finish,e.foffset),PO=e=>e.match({domRange:t=>S.fromDom(t.startContainer),relative:(t,n)=>oo.getStart(t),exact:(t,n,s,o)=>t}),OO=ec.domRange,DO=ec.relative,BO=ec.exact,$O=e=>{const t=PO(e);return xh(t)},IO=_y.create,mi={domRange:OO,relative:DO,exact:BO,exactFromRange:RO,getWin:$O,range:IO},tc=(e,t)=>{const n=yt(e);return n==="input"?oo.after(e):R(["br","img"],n)?t===0?oo.before(e):oo.after(e):oo.on(e,t)},FO=(e,t)=>{const n=e.fold(oo.before,tc,oo.after),s=t.fold(oo.before,tc,oo.after);return mi.relative(n,s)},ky=(e,t,n,s)=>{const o=tc(e,t),r=tc(n,s);return mi.relative(o,r)},LO=e=>e.match({domRange:t=>{const n=S.fromDom(t.startContainer),s=S.fromDom(t.endContainer);return ky(n,t.startOffset,s,t.endOffset)},relative:FO,exact:ky}),dd=(e,t)=>{const s=(t||document).createDocumentFragment();return T(e,o=>{s.appendChild(o.dom)}),S.fromDom(s)},MO=e=>{const t=mi.getWin(e).dom,n=(o,r,i,a)=>ud(t,o,r,i,a),s=LO(e);return vO(t,s).match({ltr:n,rtl:n})},UO=(e,t,n)=>SO(e,t,n),Ny=(e,t,n)=>UO(n.defaultView,e,t).map(s=>{const o=n.createRange();return o.setStart(s.start.dom,s.soffset),o.setEnd(s.finish.dom,s.foffset),o}).getOrUndefined(),md=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,zO=(e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Ay=(e,t,n)=>zO(e,t,n)!==null,HO=(e,t,n)=>Ay(e,t,s=>s.nodeName===n),pd=e=>e&&e.nodeName==="TABLE",VO=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),WO=(e,t)=>In(e)&&Ay(e,t,$s)===!1,Ty=(e,t,n)=>{const s=new Dt(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=s[n?"prev":"next"]();)if(Tt(t))return!0},jO=(e,t)=>e.previousSibling&&e.previousSibling.nodeName===t,qO=(e,t)=>{for(;t&&t!==e;){if(vt(t))return!0;t=t.parentNode}return!1},gd=(e,t,n,s,o)=>{let r;const i=e.getRoot();let a;const c=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||i;if(s&&Tt(o)&&t&&e.isEmpty(f))return h.some(F(o.parentNode,e.nodeIndex(o)));const d=new Dt(o,f);for(;a=d[s?"prev":"next"]();){if(e.getContentEditableParent(a)==="false"||WO(a,i))return h.none();if(te(a)&&a.nodeValue.length>0)return HO(a,i,"A")===!1?h.some(F(a,s?a.nodeValue.length:0)):h.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return h.none();r=a}return lf(r)?h.none():n&&r?h.some(F(r,0)):h.none()},Ry=(e,t,n,s)=>{let o,r;const i=e.getRoot();let a,c,f=!1;o=s[(n?"start":"end")+"Container"],r=s[(n?"start":"end")+"Offset"];const d=Ee(o)&&r===o.childNodes.length,p=e.schema.getNonEmptyElements();if(c=n,In(o))return h.none();if(Ee(o)&&r>o.childNodes.length-1&&(c=!1),cf(o)&&(o=i,r=0),o===i){if(c&&(a=o.childNodes[r>0?r-1:0],a&&(In(a)||p[a.nodeName]||pd(a))))return h.none();if(o.hasChildNodes()){if(r=Math.min(!c&&r>0?r-1:r,o.childNodes.length-1),o=o.childNodes[r],r=te(o)&&d?o.data.length:0,!t&&o===i.lastChild&&pd(o)||qO(i,o)||In(o))return h.none();if(o.hasChildNodes()&&pd(o)===!1){a=o;const C=new Dt(o,i);do{if(vt(a)||In(a)){f=!1;break}if(te(a)&&a.nodeValue.length>0){r=c?0:a.nodeValue.length,o=a,f=!0;break}if(p[a.nodeName.toLowerCase()]&&!VO(a)){r=e.nodeIndex(a),o=a.parentNode,c||r++,f=!0;break}}while(a=c?C.next():C.prev())}}}return t&&(te(o)&&r===0&&gd(e,d,t,!0,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),Ee(o)&&(a=o.childNodes[r],a||(a=o.childNodes[r-1]),a&&Tt(a)&&!jO(a,"A")&&!Ty(e,a,!1)&&!Ty(e,a,!0)&&gd(e,d,t,!0,a).each(C=>{o=C.container(),r=C.offset(),f=!0}))),c&&!t&&te(o)&&r===o.nodeValue.length&&gd(e,d,t,!1,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),f?h.some(F(o,r)):h.none()},nc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=F.fromRangeStart(t);return Ry(e,n,!0,s).each(r=>{(!n||!F.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||Ry(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),md(t,s)?h.none():h.some(s)},sc=(e,t)=>e.splitText(t),oc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;return t===s&&te(t)?n>0&&n<t.nodeValue.length&&(s=sc(t,n),t=s.previousSibling,o>n?(o=o-n,t=s=sc(s,o).previousSibling,o=s.nodeValue.length,n=0):o=0):(te(t)&&n>0&&n<t.nodeValue.length&&(t=sc(t,n),n=0),te(s)&&o>0&&o<s.nodeValue.length&&(s=sc(s,o).previousSibling,o=s.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},pi=e=>({walk:(o,r)=>xa(e,o,r),split:oc,normalize:o=>nc(e,o).fold(pt,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});pi.compareRanges=md,pi.getCaretRangeFromPoint=Ny,pi.getSelectedNode=Bl,pi.getNode=Ao;const KO=((e,t)=>{const n=(a,c)=>{if(!Cn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;Xi(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=Ns(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>Q(c,(f,d)=>{const p=Ns(a,d),C=p===void 0?0:parseInt(p,10);return isNaN(C)?f:f+C},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const d=r(a,f);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return jr(e)?t.getBoundingClientRect().height:t.offsetHeight}),GO=e=>KO.get(e),Py=()=>S.fromDom(document),Oy=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=Oy(e,o);return[s].concat(r)}),YO=(e,t)=>{const n=t.owner(e);return Oy(t,n)};var XO=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?h.none():h.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(S.fromDom)},owner:e=>vo(e)});const QO=e=>{const t=Py(),n=rf(t),s=YO(e,XO),o=of(e),r=de(s,(i,a)=>{const c=of(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return qr(r.left+o.left+n.left,r.top+o.top+n.top)},hd=e=>yt(e)==="textarea",ZO=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),JO=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},eD=(e,t)=>{const n=Yt(e);if(n.length===0||hd(e))return{element:e,offset:t};if(t<n.length&&!hd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return hd(s)?{element:e,offset:t}:yt(s)==="img"?{element:s,offset:1}:Bn(s)?{element:s,offset:ad(s).length}:{element:s,offset:Yt(s).length}}},Dy=(e,t)=>{const n=nA(e),s=GO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},tD=(e,t)=>{const n=eD(e,t),s=S.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Wt+"</span>");return Qn(n.element,s),Dy(s,()=>Nt(s))},nD=e=>Dy(S.fromDom(e),Oe),By=(e,t,n,s)=>{oD(e,(o,r)=>sD(e,t,n,s),n)},$y=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(ZO(e,r))return;const i=rf(t).top;n(t,i,s,o),JO(e,r)},sD=(e,t,n,s)=>{const o=S.fromDom(e.getBody()),r=S.fromDom(e.getDoc());VN(o);const i=tD(S.fromDom(n.startContainer),n.startOffset);$y(e,r,t,i,s),i.cleanup()},Iy=(e,t,n,s)=>{const o=S.fromDom(e.getDoc());$y(e,o,n,nD(t),s)},oD=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(S.fromDom(s),S.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},bd=(e,t,n,s)=>{const o=e.pos;if(n)Mh(o.left,o.top,s);else{const r=o.top-t+e.height;Mh(o.left,r,s)}},Fy=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?bd(s,n,o!==!1,e):i>r?bd(s,n,c?o!==!1:o===!0,e):a>r&&!c&&bd(s,n,o===!0,e)},Ly=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Fy(e,t,o,n,s)},My=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Fy(e,t,o,n,s);const r=QO(n.element),i=Hh(window);r.top<i.y?Uh(n.element,s!==!1):r.top>i.bottom&&Uh(n.element,s===!0)},rD=(e,t,n)=>By(e,Ly,t,n),iD=(e,t,n)=>Iy(e,t,Ly,n),aD=(e,t,n)=>By(e,My,t,n),lD=(e,t,n)=>Iy(e,t,My,n),cD=(e,t,n)=>{(e.inline?iD:lD)(e,t,n)},Na=(e,t,n)=>{(e.inline?rD:aD)(e,t,n)},Uy=e=>e.dom.focus(),zy=e=>{const t=Qo(e).dom;return e.dom===t.activeElement},Cd=(e=Py())=>h.from(e.dom.activeElement).map(S.fromDom),uD=e=>Cd(Qo(e)).filter(t=>e.dom.contains(t.dom)),Hy=(e,t)=>{const n=Bn(t)?ad(t).length:Yt(t).length+1;return e>n?n:e<0?0:e},fD=e=>mi.range(e.start,Hy(e.soffset,e.start),e.finish,Hy(e.foffset,e.finish)),Vy=(e,t)=>!vl(t.dom)&&(to(e,t)||st(e,t)),Wy=e=>t=>Vy(e,t.start)&&Vy(e,t.finish),dD=e=>e.inline,mD=e=>mi.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset),pD=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?h.none():h.from(t.getRangeAt(0))).map(mD)},gD=e=>{const t=xh(e);return pD(t.dom).filter(Wy(e))},hD=(e,t)=>h.from(t).filter(Wy(e)).map(fD),bD=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),h.some(t)}catch{return h.none()}},yd=e=>{const t=dD(e)?gD(S.fromDom(e.getBody())):h.none();e.bookmark=t.isSome()?t:e.bookmark},vd=e=>(e.bookmark?e.bookmark:h.none()).bind(n=>hD(S.fromDom(e.getBody()),n)).bind(bD),CD=e=>{vd(e).each(t=>e.selection.setRng(t))},jy={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},yD=(e,t)=>(Cn(t)||(t=0),setTimeout(e,t)),vD=(e,t)=>(Cn(t)||(t=0),setInterval(e,t)),Un={setEditorTimeout:(e,t,n)=>yD(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=vD(()=>{e.removed?clearInterval(s):t()},n);return s}},ED=e=>e.type==="nodechange"&&e.selectionChange,wD=(e,t)=>{const n=()=>{t.throttle()};at.DOM.bind(document,"mouseup",n),e.on("remove",()=>{at.DOM.unbind(document,"mouseup",n)})},xD=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},SD=(e,t)=>{xD(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{ED(n)||yd(e)})},_D=e=>{const t=Dl(()=>{yd(e)},0);e.on("init",()=>{e.inline&&wD(e,t),SD(e,t)}),e.on("remove",()=>{t.cancel()})};let Aa;const Ed=at.DOM,kD=e=>jy.isEditorUIElement(e),ND=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},rc=(e,t)=>{const n=oR(e);return Ed.getParent(t,o=>kD(o)||(n?e.dom.is(o,n):!1))!==null},AD=e=>{try{const t=Qo(S.fromDom(e.getElement()));return Cd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},TD=(e,t)=>{const n=t.editor;_D(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Un.setEditorTimeout(n,()=>{const s=e.focusedEditor;!rc(n,AD(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Aa||(Aa=s=>{const o=e.activeEditor;o&&Rh(s).each(r=>{r.ownerDocument===document&&r!==document.body&&!rc(o,r)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Ed.bind(document,"focusin",Aa))},RD=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Ed.unbind(document,"focusin",Aa),Aa=null)},PD=e=>{e.on("AddEditor",re(TD,e)),e.on("RemoveEditor",re(RD,e))},OD=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),DD=e=>e.collapsed?h.from(Ao(e.startContainer,e.startOffset)).map(S.fromDom):h.none(),BD=(e,t)=>DD(t).bind(n=>_A(n)?h.some(n):to(e,n)===!1?h.some(e):h.none()),qy=(e,t)=>{BD(S.fromDom(e.getBody()),t).bind(n=>dn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},wd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},$D=e=>zy(e)||uD(e).isSome(),ID=e=>e.iframeElement&&zy(S.fromDom(e.iframeElement)),FD=e=>{const t=e.getBody();return t&&$D(S.fromDom(t))},LD=e=>{const t=Qo(S.fromDom(e.getElement()));return Cd(t).filter(n=>!ND(n.dom)&&rc(e,n.dom)).isSome()},gr=e=>e.inline?FD(e):ID(e),MD=e=>gr(e)||LD(e),UD=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&gr(e)===!1&&vd(e).each(r=>{e.selection.setRng(r),s=r});const o=OD(e,t.getNode());if(e.dom.isChildOf(o,n)){wd(o),qy(e,s),xd(e);return}e.inline||(Qe.browser.isOpera()||wd(n),e.getWin().focus()),(Qe.browser.isFirefox()||e.inline)&&(wd(n),qy(e,s)),xd(e)},xd=e=>e.editorManager.setActive(e),zD=(e,t)=>{e.removed||(t?xd(e):UD(e))},Ky=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return h.from(r).map(S.fromDom).map(a=>!s||!t.collapsed?hl(a,o(a,i)).getOr(a):a).bind(a=>Yn(a)?h.some(a):Xn(a).filter(Yn)).map(a=>a.dom).getOr(e)},Gy=(e,t,n)=>Ky(e,t,!0,n,(s,o)=>Math.min(Nh(s),o)),Yy=(e,t,n)=>Ky(e,t,!1,n,(s,o)=>o>0?o-1:o),Xy=(e,t)=>{const n=e;for(;e&&te(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},HD=(e,t)=>{let n,s,o;if(!t)return e;s=t.startContainer,o=t.endContainer;const r=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(s===o&&i-r<2&&s.hasChildNodes()&&(n=s.childNodes[r]),s.nodeType===3&&o.nodeType===3&&(s.length===r?s=Xy(s.nextSibling,!0):s=s.parentNode,i===0?o=Xy(o.previousSibling,!1):o=o.parentNode,s&&s===o))?s:n&&n.nodeType===3?n.parentNode:n},VD=(e,t,n,s)=>{let o;const r=[],i=e.getRoot();if(n=e.getParent(n||Gy(i,t,t.collapsed),e.isBlock),s=e.getParent(s||Yy(i,t,t.collapsed),e.isBlock),n&&n!==i&&r.push(n),n&&s&&n!==s){o=n;const a=new Dt(n,i);for(;(o=a.next())&&o!==s;)e.isBlock(o)&&r.push(o)}return s&&n!==s&&s!==i&&r.push(s),r},WD=(e,t,n)=>h.from(t).map(s=>{const o=e.nodeIndex(s),r=e.createRng();return r.setStart(s.parentNode,o),r.setEnd(s.parentNode,o+1),n&&(od(e,r,s,!0),od(e,r,s,!1)),r}),Sd=(e,t)=>z(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),jD=e=>yt(e)==="img"?1:fy(e).fold(()=>Yt(e).length,t=>t.length),qD=e=>fy(e).filter(t=>t.trim().length!==0||t.indexOf(Xt)>-1).isSome(),KD=["img","br"],Qy=e=>qD(e)||R(KD,yt(e)),GD=e=>mA(e,Qy),YD=e=>XD(e,Qy),XD=(e,t)=>{const n=s=>{const o=Yt(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return h.some(i);const a=n(i);if(a.isSome())return a}return h.none()};return n(e)},Zy="[data-mce-autocompleter]",QD=(e,t)=>{if(Jy(S.fromDom(e.getBody())).isNone()){const n=S.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());It(n,S.fromDom(t.extractContents())),t.insertNode(n.dom),Xn(n).each(s=>s.dom.normalize()),YD(n).map(s=>{e.selection.setCursorLocation(s.dom,jD(s))})}},ZD=e=>nr(e,Zy),Jy=e=>na(e,Zy),JD=(e,t)=>Jy(t).each(n=>{const s=e.selection.getBookmark();Jo(n),e.selection.moveToBookmark(s)}),eB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ic=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},tB=e=>{if(!sr(e.value))return!1;const t=e.parent;return!(t&&(t.name!=="span"||t.attr("style"))&&/^[ ]+$/.test(e.value))},ev=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class mn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new mn(t,eB[t]||1);return n&&bt(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;let o;if(typeof t!="string")return t!=null&&bt(t,(r,i)=>{s.attr(i,r)}),s;if(o=s.attributes){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new mn(t.name,t.type);let s;if(s=t.attributes){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent.insert(t,n),t.append(n),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o.next=s,n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s.prev=o,t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev.next=t,t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next.prev=t,t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=ic(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=ic(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){const o=this;let r=o.firstChild;if(ev(o))return!1;if(r)do{if(r.type===1){if(r.attr("data-mce-bogus"))continue;if(t[r.name]||ev(r))return!1}if(r.type===8||r.type===3&&!tB(r)||r.type===3&&r.parent&&n[r.parent.name]&&sr(r.value)||s&&s(r))return!1}while(r=ic(r,o));return!0}walk(t){return ic(this,null,t)}}const nB=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),tv=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&nB(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},sB=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){qt(c[2],"--")?a=tv(t,!1,c.index+3):a=tv(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Xs(f)||f.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Ie(r,c[2])||(i+=1),a=s.lastIndex+f[0].length;break}}return a},oB=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},nv=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=oB(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let f;r[i[1]]?f=a:f=sB(s,o,a),o=o.substring(0,a-c)+o.substring(f),n.lastIndex=a-c}return xo(o)},rB=nv,iB=(e,t)=>{const n=wn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},aB=(e,t,n)=>{let s;return t.format==="raw"?s=G.trim(rB(e.serializer,n.innerHTML)):t.format==="text"?(s=xo(n.innerText),s=s===`
`?"":s):t.format==="tree"?s=e.serializer.serialize(n,t):s=iB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Sl(S.fromDom(n))&&me(s)?G.trim(s):s},lB=(e,t)=>h.from(e.getBody()).fold(K(t.format==="tree"?new mn("body",11):""),n=>aB(e,t,n)),cB=G.each,sv=e=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const o=i=>{const a={};return cB(e.getAttribs(i),c=>{const f=c.nodeName.toLowerCase();f.indexOf("_")!==0&&f!=="style"&&f.indexOf("data-")!==0&&(a[f]=e.getAttrib(i,f))}),a},r=(i,a)=>{let c,f;for(f in i)if(Ie(i,f)){if(c=a[f],typeof c=="undefined"||i[f]!==c)return!1;delete a[f]}for(f in a)if(Ie(a,f))return!1;return!0};return!r(o(n),o(s))||!r(e.parseStyle(e.getAttrib(n,"style")),e.parseStyle(e.getAttrib(s,"style")))?!1:!Mn(n)&&!Mn(s)}}),ov=G.makeMap,rv=e=>{const t=[];e=e||{};const n=e.indent,s=ov(e.indent_before||""),o=ov(e.indent_after||""),r=So.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{let d,p,C,y;if(n&&s[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`)),t.push("<",a),c)for(d=0,p=c.length;d<p;d++)C=c[d],t.push(" ",C.name,'="',r(C.value,!0),'"');!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`))},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Po=(e,t=ko())=>{const n=rv(e);return e=e||{},e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{n.text(c.value,c.raw)},8:c=>{n.comment(c.value)},7:c=>{n.pi(c.name,c.value)},10:c=>{n.doctype(c.value)},4:c=>{n.cdata(c.value)},11:c=>{if(c=c.firstChild)do a(c);while(c=c.next)}};n.reset();const a=c=>{const f=i[c.type];if(f)f(c);else{const d=c.name,p=d in t.getVoidElements();let C=c.attributes;if(r&&C&&C.length>1){const y=[];y.map={};const w=t.getElementRule(c.name);if(w){for(let v=0,x=w.attributesOrder.length;v<x;v++){const _=w.attributesOrder[v];if(_ in C.map){const P=C.map[_];y.map[_]=P,y.push({name:_,value:P})}}for(let v=0,x=C.length;v<x;v++){const _=C[v].name;if(!(_ in y.map)){const P=C.map[_];y.map[_]=P,y.push({name:_,value:P})}}C=y}}if(n.start(d,C,p),!p){let y=c.firstChild;if(y){(d==="pre"||d==="textarea")&&y.type===3&&y.value[0]===`
`&&n.text(`
`,!0);do a(y);while(y=y.next)}n.end(d)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},iv=new Set;T(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{iv.add(t)});const av=["font","text-decoration","text-emphasis"],_d=(e,t)=>Gn(e.parseStyle(e.getAttrib(t,"style"))),uB=e=>iv.has(e),fB=(e,t)=>ot(_d(e,t),n=>!uB(n)),dB=e=>H(e,t=>U(av,n=>qt(t,n))),mB=(e,t,n)=>{const s=_d(e,t),o=_d(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Js(f)&&Js(d)&&f!==d};return U(s,i=>{const a=c=>U(c,f=>f===i);if(!a(o)&&a(av)){const c=dB(o);return U(c,r)}else return r(i)})},lv=(e,t,n)=>h.from(n.container()).filter(te).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),kd=re(lv,!0,wa),Nd=re(lv,!1,wa),pB=e=>{const t=e.container();return te(t)&&(t.data.length===0||_l(t.data)&&_a.isBookmarkNode(t.parentNode))},Oo=(e,t)=>n=>h.from(Hf(e?0:-1,n)).filter(t).isSome(),cv=e=>jh(e)&&Ns(S.fromDom(e),"display")==="block",uv=e=>vt(e)&&!rA(e),gB=Oo(!0,cv),hB=Oo(!1,cv),Ta=Oo(!0,Ts),Ra=Oo(!1,Ts),fv=Oo(!0,ea),dv=Oo(!1,ea),Do=Oo(!0,uv),Bo=Oo(!1,uv),bB=e=>{const t=[];let n=e.dom;for(;n;)t.push(S.fromDom(n)),n=n.lastChild;return t},CB=e=>{const t=En(e,"br"),n=H(bB(e).slice(-1),Yr);t.length===n.length&&T(n,Nt)},hr=e=>{Ji(e),It(e,S.fromHtml('<br data-mce-bogus="1">'))},yB=e=>{tf(e).each(t=>{Xo(t).each(n=>{ns(e)&&Yr(t)&&ns(n)&&Nt(t)})})},vB=e=>e.slice(0,-1),EB=(e,t,n)=>to(t,e)?vB($N(e,s=>n(s)||st(s,t))):[],mv=(e,t)=>EB(e,t,pt),ro=(e,t)=>[e].concat(mv(e,t)),Ad=(e,t,n)=>UC(e,t,n,pB),pv=(e,t)=>ge(ro(S.fromDom(t.container()),e),ns),gv=(e,t,n)=>Ad(e,t.dom,n).forall(s=>pv(t,n).fold(()=>Ps(s,n,t.dom)===!1,o=>Ps(s,n,t.dom)===!1&&to(o,S.fromDom(s.container())))),hv=(e,t,n)=>pv(t,n).fold(()=>Ad(e,t.dom,n).forall(s=>Ps(s,n,t.dom)===!1),s=>Ad(e,s.dom,n).isNone()),Td=re(hv,!1),bv=re(hv,!0),wB=re(gv,!1),xB=re(gv,!0),SB=e=>zl(e).exists(Yr),ac=(e,t,n)=>{const s=H(ro(S.fromDom(n.container()),t),ns),o=Lt(s).getOr(t);return Fn(e,o.dom,n).filter(SB)},Rd=(e,t)=>zl(t).exists(Yr)||ac(!0,e,t).isSome(),Pd=(e,t)=>nP(t).exists(Yr)||ac(!1,e,t).isSome(),_B=re(ac,!1),kB=re(ac,!0),Cv=e=>F.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),yv=(e,t)=>{const n=H(ro(S.fromDom(t.container()),e),ns);return Lt(n).getOr(e)},vv=(e,t)=>Cv(t)?Nd(t):Nd(t)||rs(yv(e,t).dom,t).exists(Nd),Ev=(e,t)=>Cv(t)?kd(t):kd(t)||Ln(yv(e,t).dom,t).exists(kd),NB=e=>R(["pre","pre-wrap"],e),Od=e=>zl(e).bind(t=>Gr(t,Yn)).exists(t=>NB(Ns(t,"white-space"))),AB=(e,t)=>rs(e.dom,t).isNone(),TB=(e,t)=>Ln(e.dom,t).isNone(),RB=(e,t)=>AB(e,t)||TB(e,t)||Td(e,t)||bv(e,t)||Pd(e,t)||Rd(e,t),PB=e=>ke(e)&&vt(e)&&kC(e),OB=e=>t=>PB(new Dt(t,e).next()),DB=(e,t)=>{const n=Ln(e.dom,t).getOr(t),s=OB(e.dom);return t.isAtEnd()&&(s(t.container())||s(n.container()))},BB=(e,t)=>Od(t)?!1:RB(e,t)||vv(e,t)||Ev(e,t),lc=(e,t)=>Od(t)?!1:Td(e,t)||wB(e,t)||Pd(e,t)||vv(e,t),$B=e=>{const t=e.container(),n=e.offset();return te(t)&&n<t.data.length?F(t,n+1):e},cc=(e,t)=>Od(t)?!1:bv(e,t)||xB(e,t)||Rd(e,t)||Ev(e,t)||DB(e,t),wv=(e,t)=>lc(e,t)||cc(e,$B(t)),xv=(e,t)=>ql(e.charAt(t)),IB=e=>{const t=e.container();return te(t)&&tn(t.data,Xt)},FB=e=>{const t=e.split("");return z(t,(n,s)=>ql(n)&&s>0&&s<t.length-1&&Gf(t[s-1])&&Gf(t[s+1])?" ":n).join("")},LB=(e,t)=>{const n=t.data,s=F(t,0);return xv(n,0)&&!wv(e,s)?(t.data=" "+n.slice(1),!0):!1},MB=e=>{const t=e.data,n=FB(t);return n!==t?(e.data=n,!0):!1},UB=(e,t)=>{const n=t.data,s=F(t,n.length-1);return xv(n,n.length-1)&&!wv(e,s)?(t.data=n.slice(0,-1)+" ",!0):!1},zB=(e,t)=>h.some(t).filter(IB).bind(n=>{const s=n.container();return LB(e,s)||MB(s)||UB(e,s)?h.some(n):h.none()}),HB=e=>{const t=S.fromDom(e.getBody());e.selection.isCollapsed()&&zB(t,F.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},Sv=(e,t,n)=>{if(n===0)return;const s=S.fromDom(e),o=Kr(s,ns).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&cc(o,F(e,e.data.length)),a=t===0&&lc(o,F(e,0));e.replaceData(t,n,rb(r,4,a,i))},uc=(e,t)=>{const n=e.data.slice(t),s=n.length-nN(n).length;Sv(e,t,s)},Dd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-Mg(n).length;Sv(e,t-s,s)},Bd=(e,t,n,s=!0)=>{const o=Mg(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),Nt(S.fromDom(i)),n&&uc(r,o),r},VB=(e,t)=>{const n=e.container(),s=e.offset();return F.isTextPosition(e)===!1&&n===t.parentNode&&s>F.before(t).offset()},WB=(e,t)=>VB(t,e)?F(t.container(),t.offset()-1):t,jB=e=>te(e)?F(e,0):F.before(e),qB=e=>te(e)?F(e,e.data.length):F.after(e),_v=e=>Jn(e.previousSibling)?h.some(qB(e.previousSibling)):e.previousSibling?Bs(e.previousSibling):h.none(),kv=e=>Jn(e.nextSibling)?h.some(jB(e.nextSibling)):e.nextSibling?dn(e.nextSibling):h.none(),KB=(e,t)=>{const n=F.before(t.previousSibling?t.previousSibling:t.parentNode);return rs(e,n).fold(()=>Ln(e,F.after(t)),h.some)},GB=(e,t)=>Ln(e,F.after(t)).fold(()=>rs(e,F.before(t)),h.some),YB=(e,t)=>_v(t).orThunk(()=>kv(t)).orThunk(()=>KB(e,t)),XB=(e,t)=>kv(t).orThunk(()=>_v(t)).orThunk(()=>GB(e,t)),QB=(e,t,n)=>e?XB(t,n):YB(t,n),ZB=(e,t,n)=>QB(e,t,n).map(re(WB,n)),Nv=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},JB=e=>t=>t.dom===e,e$=(e,t)=>t&&Ie(e.schema.getBlockElements(),yt(t)),t$=e=>{if(Mt(e)){const t=S.fromHtml('<br data-mce-bogus="1">');return Ji(e),It(e,t),h.some(F.before(t.dom))}else return h.none()},n$=(e,t,n)=>{const s=Xo(e).filter(Bn),o=Zi(e).filter(Bn);return Nt(e),yN(s,o,t,(r,i,a)=>{const c=r.dom,f=i.dom,d=c.data.length;return Bd(c,f,n),a.container()===f?F(c,d):a}).orThunk(()=>(n&&(s.each(r=>Dd(r.dom,r.dom.length)),o.each(r=>uc(r.dom,0))),t))},s$=(e,t)=>Ie(e.schema.getTextInlineElements(),yt(t)),br=(e,t,n,s=!0)=>{const o=ZB(t,e.getBody(),n.dom),r=Kr(n,re(e$,e),JB(e.getBody())),i=n$(n,o,s$(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(t$).fold(()=>{s&&Nv(e,t,i)},a=>{s&&Nv(e,t,h.some(a))})},o$=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,r$=e=>o$.test(e),Cr=(e,t)=>ks(S.fromDom(t),Y1(e)),i$=e=>at.DOM.getStyle(e,"direction",!0)==="rtl"||r$(e.textContent),a$=(e,t,n)=>H(at.DOM.getParents(n.container(),"*",t),e),$o=(e,t,n)=>{const s=a$(e,t,n);return h.from(s[s.length-1])},l$=(e,t,n)=>{const s=Ro(t,e),o=Ro(n,e);return s&&s===o},c$=e=>mf(e)||pf(e),zn=(e,t)=>{if(!t)return t;const n=t.container(),s=t.offset();return e?Zr(n)?te(n.nextSibling)?F(n.nextSibling,0):F.after(n):mf(t)?F(n,s+1):t:Zr(n)?te(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):pf(t)?F(n,s-1):t},Av=re(zn,!0),Tv=re(zn,!1),Rv=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},$d=e=>Rv(e,"Delete"),u$=e=>Rv(e,"ForwardDelete"),f$=e=>t=>st(e,S.fromDom(t.dom.parentNode)),d$=e=>SA(e)||sa(e),fc=(e,t)=>to(e,t)?Gr(t,d$,f$(e)):h.none(),m$=e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Pv=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),m$(e))},p$=(e,t,n)=>vn(dn(n),Bs(n),(s,o)=>{const r=zn(!0,s),i=zn(!1,o),a=zn(!1,t);return e?Ln(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):rs(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),Ov=e=>(vN(e)?Xo(e):tf(e)).bind(Ov).orThunk(()=>h.some(e)),Dv=(e,t,n,s=!0)=>{t.deleteContents();const o=Ov(n).getOr(n),r=S.fromDom(e.dom.getParent(o.dom,e.dom.isBlock));if(Mt(r)&&(hr(r),s&&e.selection.setCursorLocation(r.dom,0)),!st(n,r)){const i=Vr(Xn(r),n)?[]:IN(r);T(i.concat(Yt(n)),a=>{!st(a,r)&&!to(a,r)&&Mt(a)&&Nt(a)})}},g$=e=>t=>st(e,t),Id=e=>En(e,"td,th"),h$=(e,t)=>{const n=f=>Sa(S.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=vn(s,o,st).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Fd=(e,t)=>({start:e,end:t}),b$=(e,t,n)=>({rng:e,table:t,cells:n}),Pa=Rs.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),dc=(e,t)=>nr(S.fromDom(e),"td,th",t),Bv=e=>!st(e.start,e.end),$v=(e,t)=>Sa(e.start,t).bind(n=>Sa(e.end,t).bind(s=>Zu(st(n,s),n))),C$=(e,t)=>!Bv(e)&&$v(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),y$=(e,t)=>{const n=dc(e.startContainer,t),s=dc(e.endContainer,t);return vn(n,s,Fd)},v$=e=>t=>Sa(t,e).bind(n=>Zs(Id(n)).map(s=>Fd(t,s))),E$=e=>t=>Sa(t,e).bind(n=>Lt(Id(n)).map(s=>Fd(s,t))),Ld=e=>t=>$v(t,e).map(n=>b$(t,n,Id(n))),Iv=(e,t,n,s)=>{if(n.collapsed||!e.forall(Bv))return h.none();if(t.isSameTable){const o=e.bind(Ld(s));return h.some({start:o,end:o})}else{const o=dc(n.startContainer,s),r=dc(n.endContainer,s),i=o.bind(v$(s)).bind(Ld(s)),a=r.bind(E$(s)).bind(Ld(s));return h.some({start:i,end:a})}},Fv=(e,t)=>Ae(e,n=>st(n,t)),Md=e=>vn(Fv(e.cells,e.rng.start),Fv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),w$=(e,t,n)=>e.exists(s=>C$(s,n)&&sd(s.start,t)),Lv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},x$=(e,t,n,s)=>Iv(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=Md(o).getOr([]);if(r&&o.cells.length===i.length)return h.some(Pa.fullTable(o.table));if(i.length>0){if(r)return h.some(Pa.partialTable(i,h.none()));{const a=Lv(n,t);return h.some(Pa.partialTable(i,h.some({...t,rng:a})))}}else return h.none()}),S$=(e,t,n,s)=>Iv(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(Md).getOr([]),a=r.bind(Md).getOr([]);if(i.length>0&&a.length>0){const c=Lv(n,t);return h.some(Pa.multiTable(i,a,c))}else return h.none()}),_$=(e,t)=>{const n=g$(e),s=y$(t,n),o=h$(t,n);return w$(s,t,n)?s.map(r=>Pa.singleCellTable(t,r.start)):o.isMultiTable?S$(s,o,t,n):x$(s,o,t,n)},Mv=e=>T(e,t=>{Gt(t,"contenteditable"),hr(t)}),k$=(e,t)=>h.from(e.dom.getParent(t,e.dom.isBlock)).map(S.fromDom),N$=(e,t,n)=>{n.each(s=>{t?Nt(s):(hr(s),e.selection.setCursorLocation(s.dom,0))})},Ud=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),zd(e,o,t,!1).each(r=>r())},Uv=e=>{const t=di(e),n=S.fromDom(e.selection.getNode());wl(n.dom)&&Mt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&U(t,s=>st(s,n))&&Kt(n,"data-mce-selected","1")},zv=(e,t,n)=>h.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=k$(e,i?r.endContainer:r.startContainer);r.deleteContents(),N$(e,i,a.filter(Mt));const c=i?t[0]:t[t.length-1];return Ud(e,c,s,i),Mt(c)?h.none():h.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);Mv(o),Uv(e)}),A$=(e,t,n,s)=>h.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Ud(e,r,o,!0),Ud(e,i,o,!1);const a=Mt(r)?t:t.slice(1),c=Mt(i)?n:n.slice(0,-1);Mv(a.concat(c)),s.deleteContents(),Uv(e)}),zd=(e,t,n,s=!0)=>h.some(()=>{Dv(e,t,n,s)}),T$=(e,t)=>h.some(()=>br(e,!1,t)),R$=(e,t,n)=>_$(t,n).bind(s=>s.fold(re(zd,e),re(T$,e),re(zv,e),re(A$,e))),P$=(e,t)=>mc(e,t),O$=(e,t,n,s)=>Hd(t,s).fold(()=>R$(e,t,n),o=>P$(e,o)),D$=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?zv(e,n,h.none()):O$(e,s,o,t)},Hv=(e,t)=>ge(ro(t,e),xl),Hd=(e,t)=>ge(ro(t,e),mh("caption")),B$=(e,t,n,s,o)=>Wl(n,e.getBody(),o).bind(r=>Hv(t,S.fromDom(r.getNode())).bind(i=>st(i,s)?h.none():h.some(Oe))),mc=(e,t)=>h.some(()=>{hr(t),e.selection.setCursorLocation(t.dom,0)}),$$=(e,t,n,s)=>dn(e.dom).bind(o=>Bs(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),I$=(e,t)=>mc(e,t),F$=(e,t,n)=>Hd(e,S.fromDom(n.getNode())).fold(()=>h.some(Oe),s=>Zu(!st(s,t),Oe)),L$=(e,t,n,s,o)=>Wl(n,e.getBody(),o).fold(()=>h.some(Oe),r=>$$(s,n,o,r)?I$(e,s):F$(t,s,r)),M$=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return Hv(n,s).bind(r=>Mt(r)?mc(e,r):B$(e,n,t,r,o))},U$=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return Mt(s)?mc(e,s):L$(e,n,t,s,o)},Vv=(e,t)=>e?fv(t):dv(t),z$=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Vv(t,n)||Fn(t,e.getBody(),n).exists(s=>Vv(t,s))},H$=(e,t,n)=>{const s=S.fromDom(e.getBody());return Hd(s,n).fold(()=>M$(e,t,s,n).orThunk(()=>Zu(z$(e,t),Oe)),o=>U$(e,t,s,o))},Vd=(e,t)=>{const n=S.fromDom(e.selection.getStart(!0)),s=di(e);return e.selection.isCollapsed()&&s.length===0?H$(e,t,n):D$(e,n,s)},Oa=(e,t)=>{for(;t&&t!==e;){if(As(t)||vt(t))return t;t=t.parentNode}return null},Wd=(e,t)=>{t(e),e.firstChild&&Wd(e.firstChild,t),e.next&&Wd(e.next,t)},Wv=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},V$=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&Wd(n.firstChild,o=>{Wv(e,t,o,s)}),s},jv=(e,t)=>{const n=s=>{bt(s,o=>{const r=H(o.nodes,i=>ke(i.parent));T(o.filter.callbacks,i=>{i(r,o.filter.name,t)})})};n(e.nodes),n(e.attributes)},qv=(e,t,n,s={})=>{const o=V$(e,t,n);jv(o,s)},jd=(e,t,n,s)=>{t.insert&&n[s.name]?s.empty().append(new mn("br",1)):s.empty().append(new mn("#text",3)).value=Xt},W$=e=>Kv(e,"#text")&&e.firstChild.value===Xt,Kv=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,j$=(e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty},Da=(e,t,n,s)=>s.isEmpty(t,n,o=>j$(e,o)),q$=(e,t)=>e&&(e.name in t||e.name==="br"),qd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)t.isValidChild(n.name,o.name)||qd(o,t,n);e.unwrap()}},Kd=(e,t,n=Oe)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const f=e[c];let d,p,C;if(!f.parent||a.has(f))continue;if(s[f.name]&&f.parent.name==="li"){let w=f.next;for(;w&&s[w.name];){w.name="li",a.add(w),f.parent.insert(w,f.parent);w=w.next}f.unwrap();continue}const y=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&!i[d.name];d=d.parent)y.push(d);if(d&&y.length>1)if(t.isValidChild(d.name,f.name)){y.reverse(),p=y[0].clone(),n(p);let w=p;for(let v=0;v<y.length-1;v++){t.isValidChild(w.name,y[v].name)?(C=y[v].clone(),n(C),w.append(C)):C=w;for(let x=y[v].firstChild;x&&x!==y[v+1];){const _=x.next;C.append(x),x=_}w=C}Da(t,o,r,p)?d.insert(f,y[0],!0):(d.insert(p,y[0],!0),d.insert(f,p)),d=y[0],(Da(t,o,r,d)||Kv(d,"br"))&&d.empty().remove()}else qd(f,t);else if(f.parent){if(f.name==="li"){let w=f.prev;if(w&&(w.name==="ul"||w.name==="ol")){w.append(f);continue}if(w=f.next,w&&(w.name==="ul"||w.name==="ol")){w.insert(f,w.firstChild,!0);continue}const v=new mn("ul",1);n(v),f.wrap(v);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const w=new mn("div",1);n(w),f.wrap(w)}else qd(f,t)}}},K$=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},G$=e=>{const t=F.fromRangeStart(e),n=F.fromRangeEnd(e),s=e.commonAncestorContainer;return Fn(!1,s,n).map(o=>!Ps(t,n,s)&&Ps(t,o,s)?K$(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Gd=e=>e.collapsed?e:G$(e),Y$=e=>e.firstChild&&e.firstChild===e.lastChild,X$=e=>e.name==="br"||e.value===Xt,Q$=(e,t)=>e.getBlockElements()[t.name]&&Y$(t)&&X$(t.firstChild),Z$=(e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Q$(e,t))},J$=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),Z$(e,s)&&(s=s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},eI=e=>{const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode.removeChild(n),e},tI=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return eI(o)},nI=e=>H(e.childNodes,t=>t.nodeName==="LI"),sI=e=>e.data===Xt||Tt(e),oI=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&sI(e.firstChild),rI=e=>!e.firstChild||oI(e),iI=e=>e.length>0&&rI(e[e.length-1])?e.slice(0,-1):e,Yd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},aI=(e,t)=>!!Yd(e,t),lI=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},cI=(e,t)=>{const n=F.before(e),o=Ds(t).next(n);return o?o.toRange():null},Gv=(e,t)=>{const n=F.after(e),o=Ds(t).prev(n);return o?o.toRange():null},uI=(e,t,n,s)=>{const o=lI(e,s),r=e.parentNode;return r.insertBefore(o[0],e),G.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e),Gv(t[t.length-1],n)},fI=(e,t,n)=>{const s=e.parentNode;return G.each(t,o=>{s.insertBefore(o,e)}),cI(e,n)},dI=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),Gv(t[0],n)),mI=(e,t,n,s)=>{const o=tI(t,e,s),r=Yd(t,n.startContainer),i=iI(nI(o.firstChild)),a=1,c=2,f=t.getRoot(),d=p=>{const C=F.fromRangeStart(n),y=Ds(t.getRoot()),w=p===a?y.prev(C):y.next(C);return w?Yd(t,w.getNode())!==r:!0};return d(a)?fI(r,i,f):d(c)?dI(r,i,f,t):uI(r,i,f,n)},pI=["pre"],gI=(e,t)=>{const n=e.firstChild,s=R(pI,n.name),o=n.name===t.tagName.toLowerCase(),r=e.lastChild.attr("data-mce-type")==="bookmark"?e.lastChild.prev:e.lastChild;return n===r&&s&&o},Xd=wl,hI=(e,t,n)=>{if(n!==null){const s=e.getParent(t.endContainer,Xd);return n===s&&sd(S.fromDom(n),t)}else return!1},bI=(e,t,n)=>{if(n.getAttribute("data-mce-bogus")==="all")n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},CI=(e,t)=>{h.from(e.getParent(t,"td,th")).map(S.fromDom).each(yB)},yI=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=sv(s);G.each(s.select("*[data-mce-fragment]"),i=>{if(ke(n[i.nodeName.toLowerCase()])&&fB(s,i)){for(let c=i.parentNode;ke(c)&&c!==o&&!mB(s,i,c);c=c.parentNode)if(r.compare(c,i)){s.remove(i,!0);break}}})}},vI=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},EI=e=>{G.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},wI=e=>!!e.getAttribute("data-mce-fragment"),xI=(e,t)=>t&&!e.schema.getVoidElements()[t.nodeName],SI=(e,t)=>{let n;const s=e.dom,o=e.selection;if(!t)return;o.scrollIntoView(t);const r=Oa(e.getBody(),t);if(s.getContentEditable(r)==="false"){s.remove(t),o.select(r);return}let i=s.createRng();const a=t.previousSibling;if(te(a)){i.setStart(a,a.nodeValue.length);const d=t.nextSibling;te(d)&&(a.appendData(d.data),d.parentNode.removeChild(d))}else i.setStartBefore(t),i.setEndBefore(t);const c=d=>{let p=F.fromRangeStart(d);if(p=Ds(e.getBody()).next(p),p)return p.toRange()},f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(Ji(S.fromDom(f)),i.setStart(f,0),i.setEnd(f,0),!Xd(f)&&!wI(f)&&(n=c(i))?(i=n,s.remove(f)):s.add(f,s.create("br",{"data-mce-bogus":"1"}))),o.setRng(i)},_I=e=>{const t=e.dom,n=Gd(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Xd);hI(t,n,s)?zd(e,n,S.fromDom(s)):e.getDoc().execCommand("Delete",!1,null)},kI=(e,t,n)=>{let s,o,r;const i=e.selection,a=e.dom,c=e.parser,f=n.merge,d=Po({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p),o=i.getRng();const C=o.startContainer||(o.parentElement?o.parentElement():null),y=e.getBody();C===y&&i.isCollapsed()&&a.isBlock(y.firstChild)&&xI(e,y.firstChild)&&a.isEmpty(y.firstChild)&&(o=a.createRng(),o.setStart(y.firstChild,0),o.setEnd(y.firstChild,0),i.setRng(o)),i.isCollapsed()||_I(e),s=i.getNode();const w={context:s.nodeName.toLowerCase(),data:n.data,insert:!0},v=c.parse(t,w);if(n.paste===!0&&J$(e.schema,v)&&aI(a,s))return o=mI(d,a,i.getRng(),v),i.setRng(o),t;if(n.paste===!0&&gI(v,s)&&v.firstChild.unwrap(),vI(v),r=v.lastChild,r.attr("id")==="mce_marker"){const x=r;for(r=r.prev;r;r=r.walk(!0))if(r.type===3||!a.isBlock(r.name)){e.schema.isValidChild(r.parent.name,"span")&&r.parent.insert(x,r,r.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(s),!w.invalid)t=d.serialize(v),bI(e,t,s);else{e.selection.setContent(p),s=i.getNode();const x=e.getBody();for(s.nodeType===9?s=r=x:r=s;r!==x;)s=r,r=r.parentNode;t=s===x?x.innerHTML:a.getOuterHTML(s);const _=c.parse(t);for(let M=_;M;M=M.walk())if(M.attr("id")==="mce_marker"){M.replace(v);break}const P=v.children(),O=v.parent.name;v.unwrap();const I=H(P,M=>!e.schema.isValidChild(O,M.name));Kd(I,e.schema),qv(c.getNodeFilters(),c.getAttributeFilters(),_),t=d.serialize(_),s===x?a.setHTML(x,t):a.setOuterHTML(s,t)}return yI(e,f),SI(e,a.get("mce_marker")),EI(e.getBody()),CI(a,i.getStart()),t},pc=e=>e instanceof mn,NI=e=>{gr(e)&&dn(e.getBody()).each(t=>{const n=t.getNode(),s=ea(n)?dn(n).getOr(t):t;e.selection.setRng(s.toRange())})},Qd=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&NI(e)},AI=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=wn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ur(e),n)):n||(n=o),Qd(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Po({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Sl(S.fromDom(t))?n:G.trim(n);return Qd(e,o,s.no_selection),{content:o,html:o}}},TI=(e,t,n,s)=>{qv(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Po({validate:!1},e.schema).serialize(n),r=Sl(S.fromDom(t))?o:G.trim(o);return Qd(e,r,s.no_selection),{content:n,html:r}},RI=(e,t,n)=>h.from(e.getBody()).map(s=>pc(t)?TI(e,s,t,n):AI(e,s,t,n)).getOr({content:t,html:pc(n.content)?"":n.content}),PI=(e,t)=>fA(e,t).isSome(),Yv=e=>Ge(e)?e:pt,OI=(e,t,n)=>{let s=e.dom;const o=Yv(n);for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return h.none()},Zd=(e,t,n)=>{const s=t(e),o=Yv(n);return s.orThunk(()=>o(e)?h.none():OI(e,t,o))},Jd=Zf,Xv=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Tn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},em=(e,t,n,s,o)=>{const r=e.dom.getRoot();return t===r?!1:(t=e.dom.getParent(t,i=>Xv(e,i,n)?!0:i.parentNode===r||!!Fs(e,i,n,s,!0)),!!Fs(e,t,n,s,o))},gc=(e,t,n)=>zt(n)&&Jd(t,n.inline)||Is(n)&&Jd(t,n.block)?!0:Tn(n)?Ee(t)&&e.is(t,n.selector):!1,Qv=(e,t,n,s,o,r)=>{const i=n[s];if(Ge(n.onmatch))return n.onmatch(t,n,s);if(i){if(At(i.length)){for(const a in i)if(Ie(i,a)){const c=s==="attributes"?e.getAttrib(t,a):Yl(e,t,a),f=so(i[a],r),d=$t(c)||ml(c);if(d&&$t(f))continue;if(o&&d&&!n.exact||(!o||n.exact)&&!Jd(c,Jf(f,a)))return!1}}else for(let a=0;a<i.length;a++)if(s==="attributes"?e.getAttrib(t,i[a]):Yl(e,t,i[a]))return!0}return!0},Fs=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&t)for(let a=0;a<r.length;a++){const c=r[a];if(gc(e.dom,t,c)&&Qv(i,t,c,"attributes",o,s)&&Qv(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let d=0;d<f.length;d++)if(!e.dom.hasClass(t,so(f[d],s)))return}return c}}},tm=(e,t,n,s,o)=>{if(s)return em(e,s,t,n,o);if(s=e.selection.getNode(),em(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&em(e,r,t,n,o))},DI=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Fs(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},BI=(e,t)=>{const n=o=>st(o,S.fromDom(e.getBody())),s=(o,r)=>Fs(e,o.dom,r)?h.some(r):h.none();return h.from(e.selection.getStart(!0)).bind(o=>Zd(S.fromDom(o),r=>en(t,i=>s(r,i)),n)).getOrNull()},$I=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Xl(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Tn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},II=(e,t,n)=>Q(n,(s,o)=>{const r=RP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),gi=Wt,Zv="_mce_caret",FI=(e,t)=>e.importNode(t,!0),LI=e=>{const t=[];for(;e;){if(e.nodeType===3&&e.nodeValue!==gi||e.childNodes.length>1)return[];e.nodeType===1&&t.push(e),e=e.firstChild}return t},Jv=e=>LI(e).length>0,eE=e=>{if(e){const t=new Dt(e,e);for(e=t.current();e;e=t.next())if(te(e))return e}return null},nm=e=>{const t=S.fromTag("span");return _s(t,{id:Zv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&It(t,S.fromText(gi)),t},MI=e=>{const t=eE(e);return t&&t.nodeValue.charAt(0)===gi&&t.deleteData(0,1),t},sm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(Jv(t))br(e,!1,S.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,d=r.endOffset,p=MI(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&hr(S.fromDom(i)),o.setRng(r)}},om=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)sm(e,t,n);else if(t=mr(e.getBody(),o.getStart()),!t)for(;t=s.get(Zv);)sm(e,t,!1)},UI=(e,t,n)=>{const s=e.dom,o=s.getParent(n,re(Xf,e));o&&s.isEmpty(o)?n.parentNode.replaceChild(t,n):(CB(S.fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(t,n):s.insertAfter(t,n))},tE=(e,t)=>(e.appendChild(t),t),nE=(e,t)=>{const n=de(e,(s,o)=>tE(s,o.cloneNode(!1)),t);return tE(n,n.ownerDocument.createTextNode(gi))},zI=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=H(Gn(i.get()),p=>p!==s&&!tn(p,"removeformat")),f=II(e,n,c);if(H(f,p=>!PP(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),h.some(p)}else return h.none()},HI=(e,t,n)=>{let s,o;const r=e.selection,i=r.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=mr(e.getBody(),r.getStart()),s&&(o=eE(s));const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&d.test(f.charAt(a))&&d.test(f.charAt(a-1))){const p=r.getBookmark();i.collapse(!0);let C=fi(e,i,e.formatter.get(t));C=oc(C),e.formatter.apply(t,n,C),r.moveToBookmark(p)}else(!s||o.nodeValue!==gi)&&(s=FI(e.getDoc(),nm(!0).dom),o=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),r.setCursorLocation(o,a)},VI=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i,a,c;const f=[],d=r.getRng(),p=d.startContainer,C=d.startOffset;for(a=p,p.nodeType===3&&(C!==p.nodeValue.length&&(i=!0),a=a.parentNode);a;){if(Fs(e,a,t,n,s)){c=a;break}a.nextSibling&&(i=!0),f.push(a),a=a.parentNode}if(!!c)if(i){const y=r.getBookmark();d.collapse(!0);let w=fi(e,d,e.formatter.get(t),!0);w=oc(w),e.formatter.remove(t,n,w,s),r.moveToBookmark(y)}else{const y=mr(e.getBody(),c),w=nm(!1).dom;UI(e,w,y!==null?y:c);const v=zI(e,w,c,t,n,s),x=nE(f.concat(v.toArray()),w);sm(e,y,!1),r.setCursorLocation(x,1),o.isEmpty(c)&&o.remove(c)}},WI=(e,t)=>{const n=e.selection,s=e.getBody();om(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===gi&&om(e,mr(s,n.getStart())),(t===37||t===39)&&om(e,mr(s,n.getStart()))},jI=e=>{e.on("mouseup keydown",t=>{WI(e,t.keyCode)})},qI=(e,t)=>{const n=nm(!1),s=nE(t,n.dom);return Qn(S.fromDom(e),n),Nt(S.fromDom(e)),F(s,0)},KI=(e,t)=>{const n=e.schema.getTextInlineElements();return Ie(n,yt(t))&&!$s(t.dom)&&!tr(t.dom)},GI=e=>$s(e.dom)&&Jv(e.dom),hc={},sE=zr,oE=Wi,YI=(e,t)=>{hc[e]||(hc[e]=[]),hc[e].push(t)},XI=(e,t)=>{oE(hc[e],n=>{n(t)})};YI("pre",e=>{const t=e.selection.getRng();let n;const s=i=>r(i.previousSibling)&&Dg(n,i.previousSibling)!==-1,o=(i,a)=>{const c=S.fromDom(a),f=vo(c).dom;Nt(c),Zo(S.fromDom(i),[S.fromTag("br",f),S.fromTag("br",f),...Yt(c)])},r=Zn(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),oE(sE(sE(n,r),s),i=>{o(i.previousSibling,i)}))});const rm=G.each,im=e=>Ee(e)&&!Mn(e)&&!$s(e)&&!tr(e),rE=(e,t)=>{for(let n=e;n;n=n[t]){if(te(n)&&Js(n.data))return e;if(Ee(n)&&!Mn(n))return n}return e},iE=(e,t,n)=>{const s=sv(e);if(t&&n&&(t=rE(t,"previousSibling"),n=rE(n,"nextSibling"),s.compare(t,n))){for(let o=t.nextSibling;o&&o!==n;){const r=o;o=o.nextSibling,t.appendChild(r)}return e.remove(n),G.each(G.grep(n.childNodes),o=>{t.appendChild(o)}),t}return n},aE=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){const o=iE(e,QC(s),s);iE(e,o,QC(o,!0))}},QI=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";rm(e.select(s,n),o=>{im(o)&&rm(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},am=(e,t,n)=>{rm(e.childNodes,s=>{im(s)&&(t(s)&&n(s),s.hasChildNodes()&&am(s,t,n))})},ZI=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},lE=(e,t)=>n=>!!(n&&Yl(e,n,t)),cE=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),ZI(e,s)},Ba=Rs.generate([{keep:[]},{rename:["name"]},{removed:[]}]),JI=/^(src|href|style)$/,lm=G.each,bc=Zf,eF=e=>/^(TR|TH|TD)$/.test(e.nodeName),uE=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),fE=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ee(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return te(s)&&n&&o>=s.nodeValue.length&&(s=new Dt(s,e.getBody()).next()||s),te(s)&&!n&&o===0&&(s=new Dt(s,e.getBody()).prev()||s),s},dE=(e,t)=>{const n=t?"firstChild":"lastChild";if(eF(e)&&e[n]){const s=e[n];return e.nodeName==="TR"&&s[n]||s}return e},cm=(e,t,n,s)=>{const o=e.create(n,s);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},mE=(e,t,n,s,o)=>{const r=S.fromDom(t),i=S.fromDom(e.create(s,o)),a=n?_h(r):Sh(r);return Zo(i,a),n?(Qn(r,i),Ih(i,r)):(Eo(r,i),It(i,r)),i.dom},tF=(e,t)=>t.links&&e.nodeName==="A",nF=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=wn(e);Is(n)&&s===r.getRoot()&&(!n.list_block||!bc(t,n.list_block))&&T(ht(t.childNodes),a=>{ci(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=cm(r,a,i),r.setAttribs(o,ur(e))):o=null}),!(OP(n)&&!bc(n.inline,t))&&r.remove(t,!0)},pE=(e,t,n,s,o)=>{let r;const i=e.dom;if(!gc(i,s,t)&&!tF(s,t))return Ba.keep();const a=s;if(zt(t)&&t.remove==="all"&&kt(t.preserve_attributes)){const c=H(i.getAttribs(a),f=>R(t.preserve_attributes,f.name.toLowerCase()));if(i.removeAllAttribs(a),T(c,f=>i.setAttrib(a,f.name,f.value)),c.length>0)return Ba.rename("span")}if(t.remove!=="all"){lm(t.styles,(f,d)=>{f=Jf(so(f,n),d+""),Cn(d)&&(d=f,o=null),(t.remove_similar||!o||bc(Yl(i,o,d),f))&&i.setStyle(a,d,""),r=!0}),r&&i.getAttrib(a,"style")===""&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),lm(t.attributes,(f,d)=>{let p;if(f=so(f,n),Cn(d)&&(d=f,o=null),t.remove_similar||!o||bc(i.getAttrib(o,d),f)){if(d==="class"&&(f=i.getAttrib(a,d),f&&(p="",T(f.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(p+=(p?" ":"")+C)}),p))){i.setAttrib(a,d,p);return}if(JI.test(d)&&a.removeAttribute("data-mce-"+d),d==="style"&&Zn(["li"])(a)&&i.getStyle(a,"list-style-type")==="none"){a.removeAttribute(d),i.setStyle(a,"list-style-type","none");return}d==="class"&&a.removeAttribute("className"),a.removeAttribute(d)}}),lm(t.classes,f=>{f=so(f,n),(!o||i.hasClass(o,f))&&i.removeClass(a,f)});const c=i.getAttribs(a);for(let f=0;f<c.length;f++){const d=c[f].nodeName;if(d.indexOf("_")!==0&&d.indexOf("data-")!==0)return Ba.keep()}}return t.remove!=="none"?(nF(e,a,t),Ba.removed()):Ba.keep()},hi=(e,t,n,s,o)=>pE(e,t,n,s,o).fold(pt,r=>(e.dom.rename(s,r),!0),ct),sF=(e,t,n,s,o)=>{let r;return T(Xl(e.dom,t.parentNode).reverse(),i=>{if(!r&&i.id!=="_start"&&i.id!=="_end"){const a=Fs(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},oF=(e,t,n,s)=>pE(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),rF=(e,t,n,s,o,r,i,a)=>{let c,f,d;const p=e.dom;if(n){const C=n.parentNode;for(let y=s.parentNode;y&&y!==C;y=y.parentNode){c=p.clone(y,!1);for(let w=0;w<t.length&&(c=oF(e,t[w],a,c),c!==null);w++);c&&(f&&c.appendChild(f),d||(d=c),f=c)}r&&(!i.mixed||!p.isBlock(n))&&(s=p.split(n,s)),f&&(o.parentNode.insertBefore(f,o),d.appendChild(o),zt(i)&&aE(p,i,a,f))}return s},gE=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0];let a=!0;const c=e.dom,f=e.selection,d=x=>{const _=sF(e,x,t,n,o);return rF(e,r,_,x,x,!0,i,n)},p=x=>Mn(x)&&Ee(x)&&(x.id==="_start"||x.id==="_end"),C=x=>U(r,_=>hi(e,_,n,x,x)),y=x=>{let _=!0,P=!1;Ee(x)&&c.getContentEditable(x)&&(_=a,a=c.getContentEditable(x)==="true",P=!0);const O=ht(x.childNodes);if(a&&!P){const ce=C(x)||U(r,j=>gc(c,x,j)),V=x.parentNode;!ce&&ke(V)&&ed(i)&&C(V)}if(i.deep&&O.length){for(let M=0;M<O.length;M++)y(O[M]);P&&(a=_)}T(["underline","line-through","overline"],M=>{Ee(x)&&e.dom.getStyle(x,"text-decoration")===M&&x.parentNode&&ZC(c,x.parentNode)===M&&hi(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},null,x)})},w=x=>{const _=c.get(x?"_start":"_end");let P=_[x?"firstChild":"lastChild"];return p(P)&&(P=P[x?"firstChild":"lastChild"]),te(P)&&P.data.length===0&&(P=x?_.previousSibling||_.nextSibling:_.nextSibling||_.previousSibling),c.remove(_,!0),P},v=x=>{let _,P,O=fi(e,x,r,x.collapsed);if(i.split){if(O=oc(O),_=fE(e,O,!0),P=fE(e,O),_!==P){if(_=dE(_,!0),P=dE(P,!1),uE(c,_,P)){const M=h.from(_.firstChild).getOr(_);d(mE(c,M,!0,"span",{id:"_start","data-mce-type":"bookmark"})),w(!0);return}if(uE(c,P,_)){const M=h.from(P.lastChild).getOr(P);d(mE(c,M,!1,"span",{id:"_end","data-mce-type":"bookmark"})),w(!1);return}_=cm(c,_,"span",{id:"_start","data-mce-type":"bookmark"}),P=cm(c,P,"span",{id:"_end","data-mce-type":"bookmark"});const I=c.createRng();I.setStartAfter(_),I.setEndBefore(P),xa(c,I,M=>{T(M,ce=>{!Mn(ce)&&!Mn(ce.parentNode)&&d(ce)})}),d(_),d(P),_=w(!0),P=w()}else _=P=d(_);O.startContainer=_.parentNode?_.parentNode:_,O.startOffset=c.nodeIndex(_),O.endContainer=P.parentNode?P.parentNode:P,O.endOffset=c.nodeIndex(P)+1}xa(c,O,I=>{T(I,y)})};if(s){if(Gl(s)){const x=c.createRng();x.setStartBefore(s),x.setEndAfter(s),v(x)}else v(s);ld(e,t,s,n);return}if(c.getContentEditable(f.getNode())==="false"){s=f.getNode();for(let x=0;x<r.length&&!(r[x].ceFalseOverride&&hi(e,r[x],n,s,s));x++);ld(e,t,s,n);return}!f.isCollapsed()||!zt(i)||di(e).length?(id(f,!0,()=>{rd(e,v)}),zt(i)&&tm(e,t,n,f.getStart())&&XC(c,f,f.getRng()),e.nodeChanged()):VI(e,t,n,o),ld(e,t,s,n)},hE=G.each,iF=(e,t,n,s)=>{const o=r=>{if(r.nodeType===1&&r.parentNode&&r.parentNode.nodeType===1){const i=ZC(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(G.walk(s,o,"childNodes"),o(s))},aF=(e,t,n,s)=>{t.styles&&t.styles.backgroundColor&&am(s,lE(e,"fontSize"),cE(e,"backgroundColor",so(t.styles.backgroundColor,n)))},lF=(e,t,n,s)=>{zt(t)&&(t.inline==="sub"||t.inline==="sup")&&(am(s,lE(e,"fontSize"),cE(e,"fontSize","")),e.remove(e.select(t.inline==="sup"?"sub":"sup",s),!0))},cF=(e,t,n,s)=>{hE(t,o=>{zt(o)&&hE(e.dom.select(o.inline,s),r=>{!im(r)||hi(e,o,n,r,o.exact?r:null)}),QI(e.dom,o,s)})},uF=(e,t,n,s,o)=>{Fs(e,o.parentNode,n,s)&&hi(e,t,s,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,r=>{if(Fs(e,r,n,s))return hi(e,t,s,o),!0})},Cc=G.each,fF=e=>Ee(e)&&!Mn(e)&&!$s(e)&&!tr(e),dF=(e,t,n,s)=>{if(sR(e)&&zt(t)){const o=mb(e.schema),r=PI(S.fromDom(n),i=>$s(i.dom));return Ur(o,s)&&Mt(S.fromDom(n.parentNode),!1)&&!r}else return!1},bE=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(y,w=r)=>{if(Ge(w.onformat)&&w.onformat(y,w,n,s),Cc(w.styles,(v,x)=>{a.setStyle(y,x,so(v,n))}),w.styles){const v=a.getAttrib(y,"style");v&&a.setAttrib(y,"data-mce-style",v)}Cc(w.attributes,(v,x)=>{a.setAttrib(y,x,so(v,n))}),Cc(w.classes,v=>{v=so(v,n),a.hasClass(y,v)||a.addClass(y,v)})},d=(y,w)=>{let v=!1;return Cc(y,x=>{if(!Tn(x))return!1;if(!(ke(x.collapsed)&&x.collapsed!==i)&&a.is(w,x.selector)&&!$s(w))return f(w,x),v=!0,!1}),v},p=y=>{if(me(y)){const w=a.create(y);return f(w),w}else return null},C=(y,w,v)=>{const x=[];let _=!0;const P=r.inline||r.block,O=p(P);xa(y,w,I=>{let M;const ce=V=>{let j=!1,X=_;const J=V.nodeName.toLowerCase(),ve=V.parentNode,ue=ve.nodeName.toLowerCase();if(Ee(V)&&y.getContentEditable(V)&&(X=_,_=y.getContentEditable(V)==="true",j=!0),Tt(V)&&!dF(e,r,V,ue)){M=null,Is(r)&&y.remove(V);return}if(Is(r)&&r.wrapper&&Fs(e,V,t,n)){M=null;return}if(_&&!j&&Is(r)&&!r.wrapper&&Xf(e,J)&&ci(e,ue,P)){const oe=y.rename(V,P);f(oe),x.push(oe),M=null;return}if(Tn(r)){let oe=d(o,V);if(!oe&&ke(ve)&&ed(r)&&(oe=d(o,ve)),!zt(r)||oe){M=null;return}}_&&!j&&ci(e,P,J)&&ci(e,ue,P)&&!(!v&&te(V)&&_l(V.data))&&!$s(V)&&(!zt(r)||!y.isBlock(V))?(M||(M=y.clone(O,!1),V.parentNode.insertBefore(M,V),x.push(M)),M.appendChild(V)):(M=null,T(ht(V.childNodes),ce),j&&(_=X),M=null)};T(I,ce)}),r.links===!0&&T(x,I=>{const M=ce=>{ce.nodeName==="A"&&f(ce,r),T(ht(ce.childNodes),M)};M(I)}),T(x,I=>{const M=j=>{let X=0;return T(j.childNodes,J=>{!TP(J)&&!Mn(J)&&X++}),X},ce=j=>ge(j.childNodes,fF).filter(J=>gc(y,J,r)).map(J=>{const ve=y.clone(J,!1);return f(ve),y.replace(ve,j,!0),y.remove(J,!0),ve}).getOr(j),V=M(I);if((x.length>1||!y.isBlock(I))&&V===0){y.remove(I,!0);return}(zt(r)||Is(r)&&r.wrapper)&&(!r.exact&&V===1&&(I=ce(I)),cF(e,o,n,I),uF(e,r,t,n,I),aF(y,r,n,I),iF(y,r,n,I),lF(y,r,n,I),aE(y,r,n,I))})};if(a.getContentEditable(c.getNode())==="false"){s=c.getNode();for(let y=0,w=o.length;y<w;y++){const v=o[y];if(v.ceFalseOverride&&Tn(v)&&a.is(s,v.selector)){f(s,v);break}}by(e,t,s,n);return}if(r){if(s)if(Gl(s)){if(!d(o,s)){const y=a.createRng();y.setStartBefore(s),y.setEndAfter(s),C(a,fi(e,y,o),!0)}}else C(a,s,!0);else!i||!zt(r)||di(e).length?(c.setRng(Gd(c.getRng())),id(c,!0,()=>{rd(e,(y,w)=>{const v=w?y:fi(e,y,o);C(a,v,!1)})}),XC(a,c,c.getRng()),e.nodeChanged()):HI(e,t,n);XI(t,e)}by(e,t,s,n)},CE=e=>Ie(e,"vars"),mF=(e,t)=>{e.set({}),t.on("NodeChange",n=>{wE(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=h.from(n.node).map(o=>Gl(o)?o:o.startContainer).bind(o=>Ee(o)?h.some(o):h.from(o.parentElement)).getOrThunk(()=>yE(t));wE(t,s,e.get())})},yE=e=>e.selection.getStart(),vE=(e,t,n,s,o)=>Te(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!At(c)},a=>Xv(e,a,n)?!0:s?!1:ke(e.formatter.matchNode(a,n,o,!0))),EE=(e,t)=>{const n=t!=null?t:yE(e);return H(Xl(e.dom,n),s=>Ee(s)&&!tr(s))},wE=(e,t,n)=>{const s=EE(e,t);bt(n,(o,r)=>{const i=a=>{const c=vE(e,s,r,a.similar,CE(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const d=c.getOr(t);CE(a)?a.callback(f,{node:d,format:r,parents:s}):T(a.callbacks,p=>p(f,{node:d,format:r,parents:s}))}};T([o.withSimilar,o.withoutSimilar],i),T(o.withVars,i)})},pF=(e,t,n,s,o,r)=>{const i=t.get();T(n.split(","),a=>{const c=ut(i,a).getOrThunk(()=>{const d={withSimilar:{state:Ut(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ut(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),f=()=>{const d=EE(e);return vE(e,d,a,o,r).isSome()};if(At(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(f())}else c.withVars.push({state:Ut(f()),similar:o,vars:r,callback:s})}),t.set(i)},gF=(e,t,n)=>{const s=e.get();T(t.split(","),o=>ut(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:H(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:H(r.withoutSimilar.callbacks,i=>i!==n)},withVars:H(r.withVars,i=>i.callback!==n)}})),e.set(s)},hF=(e,t,n,s,o,r)=>(t.get()===null&&mF(t,e),pF(e,t,n,s,o,r),{unbind:()=>gF(t,n,s)}),bF=(e,t,n,s)=>{const o=e.formatter.get(t);tm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?gE(e,t,n,s):bE(e,t,n,s)};function yr(e){return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(e)}function um(e,t){return um=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},um(e,t)}function CF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yc(e,t,n){return CF()?yc=Reflect.construct:yc=function(o,r,i){var a=[null];a.push.apply(a,r);var c=Function.bind.apply(o,a),f=new c;return i&&um(f,i.prototype),f},yc.apply(null,arguments)}function is(e){return yF(e)||vF(e)||EF(e)||wF()}function yF(e){if(Array.isArray(e))return fm(e)}function vF(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EF(e,t){if(!!e){if(typeof e=="string")return fm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fm(e,t)}}function fm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function wF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xF=Object.hasOwnProperty,xE=Object.setPrototypeOf,SF=Object.isFrozen,_F=Object.getPrototypeOf,kF=Object.getOwnPropertyDescriptor,xn=Object.freeze,Ls=Object.seal,NF=Object.create,SE=typeof Reflect!="undefined"&&Reflect,vc=SE.apply,dm=SE.construct;vc||(vc=function(t,n,s){return t.apply(n,s)}),xn||(xn=function(t){return t}),Ls||(Ls=function(t){return t}),dm||(dm=function(t,n){return yc(t,is(n))});var AF=as(Array.prototype.forEach),TF=as(Array.prototype.pop),$a=as(Array.prototype.push),Ec=as(String.prototype.toLowerCase),RF=as(String.prototype.match),Io=as(String.prototype.replace),PF=as(String.prototype.indexOf),OF=as(String.prototype.trim),Sn=as(RegExp.prototype.test),mm=DF(TypeError);function as(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return vc(e,t,s)}}function DF(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return dm(e,n)}}function Ze(e,t){xE&&xE(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=Ec(s);o!==s&&(SF(t)||(t[n]=o),s=o)}e[s]=!0}return e}function vr(e){var t=NF(null),n;for(n in e)vc(xF,e,[n])&&(t[n]=e[n]);return t}function wc(e,t){for(;e!==null;){var n=kF(e,t);if(n){if(n.get)return as(n.get);if(typeof n.value=="function")return as(n.value)}e=_F(e)}function s(o){return console.warn("fallback value for",o),null}return s}var _E=xn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pm=xn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gm=xn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),BF=xn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hm=xn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$F=xn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kE=xn(["#text"]),NE=xn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),bm=xn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),AE=xn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xc=xn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IF=Ls(/\{\{[\w\W]*|[\w\W]*\}\}/gm),FF=Ls(/<%[\w\W]*|[\w\W]*%>/gm),LF=Ls(/^data-[\-\w.\u00B7-\uFFFF]/),MF=Ls(/^aria-[\-\w]+$/),UF=Ls(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zF=Ls(/^(?:\w+script|data):/i),HF=Ls(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),VF=Ls(/^html$/i),WF=function(){return typeof window=="undefined"?null:window},jF=function(t,n){if(yr(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function TE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WF(),t=function($){return TE($)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,f=e.NamedNodeMap,d=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,p=e.HTMLFormElement,C=e.DOMParser,y=e.trustedTypes,w=a.prototype,v=wc(w,"cloneNode"),x=wc(w,"nextSibling"),_=wc(w,"childNodes"),P=wc(w,"parentNode");if(typeof r=="function"){var O=s.createElement("template");O.content&&O.content.ownerDocument&&(s=O.content.ownerDocument)}var I=jF(y,n),M=I?I.createHTML(""):"",ce=s,V=ce.implementation,j=ce.createNodeIterator,X=ce.createDocumentFragment,J=ce.getElementsByTagName,ve=n.importNode,ue={};try{ue=vr(s).documentMode?s.documentMode:{}}catch{}var oe={};t.isSupported=typeof P=="function"&&V&&typeof V.createHTMLDocument!="undefined"&&ue!==9;var ze=IF,je=FF,Je=LF,Rt=MF,Y=zF,he=HF,$e=UF,De=null,Bt=Ze({},[].concat(is(_E),is(pm),is(gm),is(hm),is(kE))),ne=null,we=Ze({},[].concat(is(NE),is(bm),is(AE),is(xc))),fe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,Be=null,Le=!0,Se=!0,xe=!1,qe=!1,Ke=!1,Pt=!1,tt=!1,Fe=!1,nt=!1,Zt=!1,Jt=!0,Vt=!0,ds=!1,gn={},on=null,Hn=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Lo=null,zs=Ze({},["audio","video","img","source","image","track"]),Hs=null,ms=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nr="http://www.w3.org/1998/Math/MathML",Mo="http://www.w3.org/2000/svg",Vn="http://www.w3.org/1999/xhtml",ps=Vn,Ar=!1,gs,mu=["application/xhtml+xml","text/html"],zp="text/html",co,uo=null,r_=s.createElement("form"),Hp=function($){return $ instanceof RegExp||$ instanceof Function},pu=function($){uo&&uo===$||((!$||yr($)!=="object")&&($={}),$=vr($),De="ALLOWED_TAGS"in $?Ze({},$.ALLOWED_TAGS):Bt,ne="ALLOWED_ATTR"in $?Ze({},$.ALLOWED_ATTR):we,Hs="ADD_URI_SAFE_ATTR"in $?Ze(vr(ms),$.ADD_URI_SAFE_ATTR):ms,Lo="ADD_DATA_URI_TAGS"in $?Ze(vr(zs),$.ADD_DATA_URI_TAGS):zs,on="FORBID_CONTENTS"in $?Ze({},$.FORBID_CONTENTS):Hn,ee="FORBID_TAGS"in $?Ze({},$.FORBID_TAGS):{},Be="FORBID_ATTR"in $?Ze({},$.FORBID_ATTR):{},gn="USE_PROFILES"in $?$.USE_PROFILES:!1,Le=$.ALLOW_ARIA_ATTR!==!1,Se=$.ALLOW_DATA_ATTR!==!1,xe=$.ALLOW_UNKNOWN_PROTOCOLS||!1,qe=$.SAFE_FOR_TEMPLATES||!1,Ke=$.WHOLE_DOCUMENT||!1,Fe=$.RETURN_DOM||!1,nt=$.RETURN_DOM_FRAGMENT||!1,Zt=$.RETURN_TRUSTED_TYPE||!1,tt=$.FORCE_BODY||!1,Jt=$.SANITIZE_DOM!==!1,Vt=$.KEEP_CONTENT!==!1,ds=$.IN_PLACE||!1,$e=$.ALLOWED_URI_REGEXP||$e,ps=$.NAMESPACE||Vn,$.CUSTOM_ELEMENT_HANDLING&&Hp($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(fe.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&Hp($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(fe.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(fe.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),gs=mu.indexOf($.PARSER_MEDIA_TYPE)===-1?gs=zp:gs=$.PARSER_MEDIA_TYPE,co=gs==="application/xhtml+xml"?function(ie){return ie}:Ec,qe&&(Se=!1),nt&&(Fe=!0),gn&&(De=Ze({},is(kE)),ne=[],gn.html===!0&&(Ze(De,_E),Ze(ne,NE)),gn.svg===!0&&(Ze(De,pm),Ze(ne,bm),Ze(ne,xc)),gn.svgFilters===!0&&(Ze(De,gm),Ze(ne,bm),Ze(ne,xc)),gn.mathMl===!0&&(Ze(De,hm),Ze(ne,AE),Ze(ne,xc))),$.ADD_TAGS&&(De===Bt&&(De=vr(De)),Ze(De,$.ADD_TAGS)),$.ADD_ATTR&&(ne===we&&(ne=vr(ne)),Ze(ne,$.ADD_ATTR)),$.ADD_URI_SAFE_ATTR&&Ze(Hs,$.ADD_URI_SAFE_ATTR),$.FORBID_CONTENTS&&(on===Hn&&(on=vr(on)),Ze(on,$.FORBID_CONTENTS)),Vt&&(De["#text"]=!0),Ke&&Ze(De,["html","head","body"]),De.table&&(Ze(De,["tbody"]),delete ee.tbody),xn&&xn($),uo=$)},Vp=Ze({},["mi","mo","mn","ms","mtext"]),fo=Ze({},["foreignobject","desc","title","annotation-xml"]),gu=Ze({},["title","style","font","a","script"]),A=Ze({},pm);Ze(A,gm),Ze(A,BF);var B=Ze({},hm);Ze(B,$F);var q=function($){var ie=P($);(!ie||!ie.tagName)&&(ie={namespaceURI:Vn,tagName:"template"});var _e=Ec($.tagName),Et=Ec(ie.tagName);return $.namespaceURI===Mo?ie.namespaceURI===Vn?_e==="svg":ie.namespaceURI===Nr?_e==="svg"&&(Et==="annotation-xml"||Vp[Et]):Boolean(A[_e]):$.namespaceURI===Nr?ie.namespaceURI===Vn?_e==="math":ie.namespaceURI===Mo?_e==="math"&&fo[Et]:Boolean(B[_e]):$.namespaceURI===Vn?ie.namespaceURI===Mo&&!fo[Et]||ie.namespaceURI===Nr&&!Vp[Et]?!1:!B[_e]&&(gu[_e]||!A[_e]):!1},W=function($){$a(t.removed,{element:$});try{$.parentNode.removeChild($)}catch{try{$.outerHTML=M}catch{$.remove()}}},Ce=function($,ie){try{$a(t.removed,{attribute:ie.getAttributeNode($),from:ie})}catch{$a(t.removed,{attribute:null,from:ie})}if(ie.removeAttribute($),$==="is"&&!ne[$])if(Fe||nt)try{W(ie)}catch{}else try{ie.setAttribute($,"")}catch{}},Ve=function($){var ie,_e;if(tt)$="<remove></remove>"+$;else{var Et=RF($,/^[\r\n\t ]+/);_e=Et&&Et[0]}gs==="application/xhtml+xml"&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");var Pn=I?I.createHTML($):$;if(ps===Vn)try{ie=new C().parseFromString(Pn,gs)}catch{}if(!ie||!ie.documentElement){ie=V.createDocument(ps,"template",null);try{ie.documentElement.innerHTML=Ar?"":Pn}catch{}}var hn=ie.body||ie.documentElement;return $&&_e&&hn.insertBefore(s.createTextNode(_e),hn.childNodes[0]||null),ps===Vn?J.call(ie,Ke?"html":"body")[0]:Ke?ie.documentElement:hn},He=function($){return j.call($.ownerDocument||$,$,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},kn=function($){return $ instanceof p&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof d)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function")},hs=function($){return yr(i)==="object"?$ instanceof i:$&&yr($)==="object"&&typeof $.nodeType=="number"&&typeof $.nodeName=="string"},mo=function($,ie,_e){!oe[$]||AF(oe[$],function(Et){Et.call(t,ie,_e,uo)})},i_=function($){var ie;if(mo("beforeSanitizeElements",$,null),kn($)||Sn(/[\u0080-\uFFFF]/,$.nodeName))return W($),!0;var _e=co($.nodeName);if(mo("uponSanitizeElement",$,{tagName:_e,allowedTags:De}),$.hasChildNodes()&&!hs($.firstElementChild)&&(!hs($.content)||!hs($.content.firstElementChild))&&Sn(/<[/\w]/g,$.innerHTML)&&Sn(/<[/\w]/g,$.textContent)||_e==="select"&&Sn(/<template/i,$.innerHTML))return W($),!0;if(!De[_e]||ee[_e]){if(!ee[_e]&&l_(_e)&&(fe.tagNameCheck instanceof RegExp&&Sn(fe.tagNameCheck,_e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(_e)))return!1;if(Vt&&!on[_e]){var Et=P($)||$.parentNode,Pn=_($)||$.childNodes;if(Pn&&Et)for(var hn=Pn.length,rn=hn-1;rn>=0;--rn)Et.insertBefore(v(Pn[rn],!0),x($))}return W($),!0}return $ instanceof a&&!q($)||(_e==="noscript"||_e==="noembed")&&Sn(/<\/no(script|embed)/i,$.innerHTML)?(W($),!0):(qe&&$.nodeType===3&&(ie=$.textContent,ie=Io(ie,ze," "),ie=Io(ie,je," "),$.textContent!==ie&&($a(t.removed,{element:$.cloneNode()}),$.textContent=ie)),mo("afterSanitizeElements",$,null),!1)},a_=function($,ie,_e){if(Jt&&(ie==="id"||ie==="name")&&(_e in s||_e in r_))return!1;if(!(Se&&!Be[ie]&&Sn(Je,ie))){if(!(Le&&Sn(Rt,ie))){if(!ne[ie]||Be[ie]){if(!(l_($)&&(fe.tagNameCheck instanceof RegExp&&Sn(fe.tagNameCheck,$)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck($))&&(fe.attributeNameCheck instanceof RegExp&&Sn(fe.attributeNameCheck,ie)||fe.attributeNameCheck instanceof Function&&fe.attributeNameCheck(ie))||ie==="is"&&fe.allowCustomizedBuiltInElements&&(fe.tagNameCheck instanceof RegExp&&Sn(fe.tagNameCheck,_e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(_e))))return!1}else if(!Hs[ie]){if(!Sn($e,Io(_e,he,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&$!=="script"&&PF(_e,"data:")===0&&Lo[$])){if(!(xe&&!Sn(Y,Io(_e,he,"")))){if(_e)return!1}}}}}}return!0},l_=function($){return $.indexOf("-")>0},c_=function($){var ie,_e,Et,Pn;mo("beforeSanitizeAttributes",$,null);var hn=$.attributes;if(!!hn){var rn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};for(Pn=hn.length;Pn--;){ie=hn[Pn];var hu=ie,an=hu.name,u_=hu.namespaceURI;_e=an==="value"?ie.value:OF(ie.value),Et=co(an);var F4=_e;if(rn.attrName=Et,rn.attrValue=_e,rn.keepAttr=!0,rn.forceKeepAttr=void 0,mo("uponSanitizeAttribute",$,rn),_e=rn.attrValue,!rn.forceKeepAttr){if(!rn.keepAttr){Ce(an,$);continue}if(Sn(/\/>/i,_e)){Ce(an,$);continue}qe&&(_e=Io(_e,ze," "),_e=Io(_e,je," "));var L4=co($.nodeName);if(!a_(L4,Et,_e)){Ce(an,$);continue}if(_e!==F4)try{u_?$.setAttributeNS(u_,an,_e):$.setAttribute(an,_e)}catch{Ce(an,$)}}}mo("afterSanitizeAttributes",$,null)}},I4=function Re($){var ie,_e=He($);for(mo("beforeSanitizeShadowDOM",$,null);ie=_e.nextNode();)mo("uponSanitizeShadowNode",ie,null),!i_(ie)&&(ie.content instanceof o&&Re(ie.content),c_(ie));mo("afterSanitizeShadowDOM",$,null)};return t.sanitize=function(Re,$){var ie,_e,Et,Pn,hn;if(Ar=!Re,Ar&&(Re="<!-->"),typeof Re!="string"&&!hs(Re)){if(typeof Re.toString!="function")throw mm("toString is not a function");if(Re=Re.toString(),typeof Re!="string")throw mm("dirty is not a string, aborting")}if(!t.isSupported){if(yr(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Re=="string")return e.toStaticHTML(Re);if(hs(Re))return e.toStaticHTML(Re.outerHTML)}return Re}if(Pt||pu($),t.removed=[],typeof Re=="string"&&(ds=!1),ds){if(Re.nodeName){var rn=co(Re.nodeName);if(!De[rn]||ee[rn])throw mm("root node is forbidden and cannot be sanitized in-place")}}else if(Re instanceof i)ie=Ve("<!---->"),_e=ie.ownerDocument.importNode(Re,!0),_e.nodeType===1&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?ie=_e:ie.appendChild(_e);else{if(!Fe&&!qe&&!Ke&&Re.indexOf("<")===-1)return I&&Zt?I.createHTML(Re):Re;if(ie=Ve(Re),!ie)return Fe?null:Zt?M:""}ie&&tt&&W(ie.firstChild);for(var hu=He(ds?Re:ie);Et=hu.nextNode();)Et.nodeType===3&&Et===Pn||i_(Et)||(Et.content instanceof o&&I4(Et.content),c_(Et),Pn=Et);if(Pn=null,ds)return Re;if(Fe){if(nt)for(hn=X.call(ie.ownerDocument);ie.firstChild;)hn.appendChild(ie.firstChild);else hn=ie;return ne.shadowroot&&(hn=ve.call(n,hn,!0)),hn}var an=Ke?ie.outerHTML:ie.innerHTML;return Ke&&De["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&Sn(VF,ie.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+an),qe&&(an=Io(an,ze," "),an=Io(an,je," ")),I&&Zt?I.createHTML(an):an},t.setConfig=function(Re){pu(Re),Pt=!0},t.clearConfig=function(){uo=null,Pt=!1},t.isValidAttribute=function(Re,$,ie){uo||pu({});var _e=co(Re),Et=co($);return a_(_e,Et,ie)},t.addHook=function(Re,$){typeof $=="function"&&(oe[Re]=oe[Re]||[],$a(oe[Re],$))},t.removeHook=function(Re){if(oe[Re])return TF(oe[Re])},t.removeHooks=function(Re){oe[Re]&&(oe[Re]=[])},t.removeAllHooks=function(){oe={}},t}var qF=TE();const RE=G.explode,PE=()=>{const e={};return{addFilter:(o,r)=>{T(RE(o),i=>{Ie(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>ju(e),removeFilter:(o,r)=>{T(RE(o),i=>{if(Ie(e,i))if(ke(r)){const a=e[i],c=H(a.callbacks,f=>f!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},KF=(e,t)=>{T(t,n=>{e.attr(n,null)})},GF=(e,t,n)=>{e.addNodeFilter("font",s=>{T(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&(r["font-size"]=n[parseInt(o.attr("size"),10)-1]),o.name="span",o.attr("style",t.serialize(r)),KF(o,["color","face","size"])})})},YF=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";T(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},XF=(e,t,n)=>{const s=wf();t.convert_fonts_to_spans&&GF(e,s,G.explode(t.font_size_legacy_values)),YF(e,n,s)},QF=(e,t,n)=>{t.inline_styles&&XF(e,t,n)},ZF=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),JF=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Cm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?JF(s):decodeURIComponent(s);return h.some({type:o[1],data:i,base64Encoded:r})}else return h.none()},OE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return h.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return h.some(new Blob([o],{type:e}))},eL=e=>new Promise((t,n)=>{Cm(e).bind(({type:s,data:o,base64Encoded:r})=>OE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),tL=e=>qt(e,"blob:")?ZF(e):qt(e,"data:")?eL(e):Promise.reject("Unknown URI format"),DE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{n(s.error.message)},s.readAsDataURL(e)});let nL=0;const sL=e=>(e||"blobid")+nL++,BE=(e,t,n)=>Cm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return h.none();{const i=r?s:btoa(s);return n(i,o)}}),$E=(e,t,n)=>{const s=e.create(sL(),t,n);return e.add(s),s},IE=(e,t,n=!1)=>BE(t,n,(s,o)=>h.from(e.getByData(s,o)).orThunk(()=>OE(o,s).map(r=>$E(e,r,s)))),oL=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(qt(t,"blob:")){const s=e.getByUri(t);return ke(s)?Promise.resolve(s):tL(t).then(o=>DE(o).then(r=>BE(r,!1,i=>h.some($E(e,o,i))).getOrThunk(n)))}else return qt(t,"data:")?IE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},rL=e=>ke(e.attr("data-mce-bogus")),iL=e=>e.attr("src")===Qe.transparentSrc||ke(e.attr("data-mce-placeholder")),aL=(e,t)=>{const{blob_cache:n}=t,s=o=>{const r=o.attr("src");iL(o)||rL(o)||IE(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};n&&e.addAttributeFilter("src",o=>T(o,s))},lL=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(s,o,r)=>{const i=G.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;for(let f=0,d=s.length;f<d;f++){let p=s[f],C=p.parent;if(i[p.parent.name]&&p===C.lastChild){let y=p.prev;for(;y;){const w=y.name;if(w!=="span"||y.attr("data-mce-type")!=="bookmark"){w==="br"&&(p=null);break}y=y.prev}if(p&&(p.remove(),Da(n,a,c,C))){const w=n.getElementRule(C.name);w&&(w.removeEmpty?C.remove():w.paddEmpty&&jd(t,r,i,C))}}else{let y=p;for(;C&&C.firstChild===y&&C.lastChild===y&&(y=C,!i[C.name]);)C=C.parent;if(y===C){const w=new mn("#text",3);w.value=Xt,p.replace(w)}}}}),e.addAttributeFilter("href",s=>{let o=s.length;const r=a=>a.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=a=>{const c=a?G.trim(a):"";return/\b(noopener)\b/g.test(c)?c:r(c)};if(!t.allow_unsafe_link_target)for(;o--;){const a=s[o];a.name==="a"&&a.attr("target")==="_blank"&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let o=s.length,r,i,a,c;for(;o--;)if(c=s[o],c.name==="a"&&c.firstChild&&!c.attr("href")){a=c.parent,r=c.lastChild;do i=r.prev,a.insert(r,c),r=i;while(r)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let o=s.length,r,i;for(;o--;)if(r=s[o],i=r.parent,i.name==="ul"||i.name==="ol")if(r.prev&&r.prev.name==="li")r.prev.append(r);else{const a=new mn("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",s=>{const o=n.getValidClasses();let r=s.length;for(;r--;){const i=s[r],a=i.attr("class").split(" ");let c="";for(let f=0;f<a.length;f++){const d=a[f];let p=!1,C=o["*"];C&&C[d]&&(p=!0),C=o[i.name],!p&&C&&C[d]&&(p=!0),p&&(c&&(c+=" "),c+=d)}c.length||(c=null),i.attr("class",c)}}),aL(e,t)},FE=G.each,cL=G.trim,uL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),fL={ftp:21,http:80,https:443,mailto:25},dL=["img","video"],mL=(e,t)=>ke(e)?!e:ke(t)?!R(dL,t):!0,pL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},LE=(e,t,n)=>{const s=pL(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?mL(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class ls{constructor(t,n){t=cL(t),this.settings=n||{};const s=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=this.settings.base_uri?this.settings.base_uri.path:new ls(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2]}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);FE(uL,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=So.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!LE(s,o,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href:n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(t){let n;if(t==="./")return t;const s=new ls(t,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const o=this.getURI(),r=s.getURI();return o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r?o:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(t,n){const s=new ls(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=fL[this.protocol];if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s,o=0,r=[],i;const a=/\/$/.test(n)?"/":"";let c=t.split("/");const f=n.split("/");for(FE(c,d=>{d&&r.push(d)}),c=r,s=f.length-1,r=[];s>=0;s--)if(!(f[s].length===0||f[s]===".")){if(f[s]===".."){o++;continue}if(o>0){o--;continue}r.push(f[s])}return s=c.length-o,s<=0?i=it(r).join("/"):i=c.slice(0,s).join("/")+"/"+it(r).join("/"),i.indexOf("/")!==0&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const ME=G.makeMap,UE=G.extend,gL={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},hL=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ym="data-mce-type",bL=(e,t)=>{const n={...gL};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},CL=(e,t)=>{const n=qF(),s=e.validate;let o=0;return n.addHook("uponSanitizeElement",(r,i)=>{var a,c;r.nodeType===lh&&!e.allow_conditional_comments&&/^\[if/i.test(r.nodeValue)&&(r.nodeValue=" "+r.nodeValue);const f=i.tagName;if(r.nodeType!==qi||f==="body")return;const d=S.fromDom(r),p=Ki(d,ym),C=$n(d,"data-mce-bogus");if(!p&&me(C)){C==="all"?Nt(d):Jo(d);return}const y=t.getElementRule(f.toLowerCase());if(s&&!y){Jo(d);return}else i.allowedTags[f]=!0;if(s&&!p){if(T((a=y.attributesForced)!==null&&a!==void 0?a:[],w=>{Kt(d,w.name,w.value==="{$uid}"?`mce_${o++}`:w.value)}),T((c=y.attributesDefault)!==null&&c!==void 0?c:[],w=>{Ki(d,w.name)||Kt(d,w.name,w.value==="{$uid}"?`mce_${o++}`:w.value)}),y.attributesRequired&&!U(y.attributesRequired,w=>Ki(d,w))){Jo(d);return}if(y.removeEmptyAttrs&&xN(d)){Jo(d);return}y.outputName&&y.outputName!==f.toLowerCase()&&UT(d,y.outputName)}}),n.addHook("uponSanitizeAttribute",(r,i)=>{const a=r.tagName.toLowerCase(),{attrName:c,attrValue:f}=i;i.keepAttr=!s||t.isValid(a,c)||qt(c,"data-")||qt(c,"aria-"),c in hL&&LE(e,f,a)&&(i.keepAttr=!1),i.keepAttr?(i.allowedAttributes[c]=!0,c in t.getBoolAttrs()&&(i.attrValue=c),e.allow_svg_data_urls&&qt(f,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):r.hasAttribute(ym)&&(c==="id"||c==="class"||c==="style")&&(i.forceKeepAttr=!0)}),n},zE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],f=new mn(c.nodeName.toLowerCase(),c.nodeType);if(Ee(c)){const d=c.attributes;for(let p=0,C=d.length;p<C;p++){const y=d[p];f.attr(y.name,y.value)}}else te(c)?(f.value=c.data,o&&(f.raw=!0)):(lf(c)||iA(c)||aA(c))&&(f.value=c.data);zE(f,c,n),e.append(f)}},yL=(e,t,n)=>{const s=[];for(let o=e,r=o;ke(o);r=o,o=o.walk())T(t,i=>i(o)),$t(o.parent)&&o!==e?o=r:s.push(o);for(let o=s.length-1;o>=0;o--){const r=s[o];T(n,i=>i(r))}},vL=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=UE(ME("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=mb(t),f=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,C=_=>{for(_=_.parent;ke(_);){if(_.name in i)return!0;_=_.parent}return!1},y=_=>{let P=_;for(;ke(P);){if(P.name in c)return Da(t,r,i,P);P=P.parent}return!1},w=(_,P)=>{const O=P?_.prev:_.next;return ke(O)?!1:_.parent.name in a&&(_.parent!==e||s.isRootContent)};return[_=>{if(_.type===3&&!C(_)){let P=_.value;P=P.replace(f," "),(q$(_.prev,a)||w(_,!0))&&(P=P.replace(d,"")),P.length===0?_.remove():_.value=P}},_=>{var P;if(_.type===1){const O=t.getElementRule(_.name);if(o&&O){const I=Da(t,r,i,_);O.paddInEmptyBlock&&I&&y(_)?jd(n,s,a,_):O.removeEmpty&&I?a[_.name]?_.remove():_.unwrap():O.paddEmpty&&(I||W$(_))&&jd(n,s,a,_)}}else if(_.type===3&&!C(_)){let O=_.value;(a[(P=_.next)===null||P===void 0?void 0:P.name]||w(_,!1))&&(O=O.replace(p,"")),O.length===0?_.remove():_.value=O}}]},EL=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},bi=(e={},t=ko())=>{const n=PE(),s=PE(),o={validate:!0,root_name:"body",...e},r=new DOMParser,i=CL(o,t),a=(P,O,I="html")=>{const M=I==="xhtml"?"application/xhtml+xml":"text/html",ce=Ie(t.getSpecialElements(),O.toLowerCase()),V=ce?`<${O}>${P}</${O}>`:P,j=I==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${V}</body></html>`:`<body>${V}</body>`,X=r.parseFromString(j,M).body;return i.sanitize(X,bL(o,M)),i.removed=[],ce?X.firstChild:X},c=n.addFilter,f=n.getFilters,d=n.removeFilter,p=s.addFilter,C=s.getFilters,y=s.removeFilter,w=(P,O)=>{const I=P.parent;I&&t.children[P.name]&&!t.isValidChild(I.name,P.name)&&O.push(P)},v=(P,O)=>{const I=UE(ME("script,style,head,html,body,title,meta,param"),t.getBlockElements()),M=/^[ \t\r\n]+/,ce=/[ \t\r\n]+$/;let V=P.firstChild,j=null;const X=J=>{J&&(V=J.firstChild,V&&V.type===3&&(V.value=V.value.replace(M,"")),V=J.lastChild,V&&V.type===3&&(V.value=V.value.replace(ce,"")))};if(!!t.isValidChild(P.name,O.toLowerCase())){for(;V;){const J=V.next;V.type===3||V.type===1&&V.name!=="p"&&!I[V.name]&&!V.attr(ym)?(j||(j=new mn(O,1),j.attr(o.forced_root_block_attrs),P.insert(j,V)),j.append(V)):(X(j),j=null),V=J}X(j)}},_={schema:t,addAttributeFilter:p,getAttributeFilters:C,removeAttributeFilter:y,addNodeFilter:c,getNodeFilters:f,removeNodeFilter:d,parse:(P,O={})=>{var I;const M=o.validate,ce=(I=O.context)!==null&&I!==void 0?I:o.root_name,V=a(P,ce,O.format),j=new mn(ce,11);zE(j,V,t.getSpecialElements());const[X,J]=vL(j,t,o,O),ve=[],ue=M?Je=>w(Je,ve):Oe,oe={nodes:{},attributes:{}},ze=Je=>Wv(f(),C(),Je,oe);if(yL(j,[X,ze],[J,ue]),ve.reverse(),M&&ve.length>0)if(O.context){const{pass:Je,fail:Rt}=be(ve,Y=>Y.parent===j);Kd(Rt,t,ze),O.invalid=Je.length>0}else Kd(ve,t,ze);const je=EL(o,O);return je&&(j.name==="body"||O.isRootContent)&&v(j,je),O.invalid||jv(oe,O),j}};return lL(_,o),QF(_,o,t),_},wL=e=>pc(e)?Po({validate:!1}).serialize(e):e,HE=(e,t)=>{const n=wL(e),s=t(n);if(s.isDefaultPrevented())return s;if(pc(e))if(s.content!==n){const o=bi({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return{...s,content:o}}else return{...s,content:e};else return s},VE=(e,t)=>{if(t.no_events)return fn.value(t);{const n=lO(e,t);return n.isDefaultPrevented()?fn.error(yy(e,{content:"",...n}).content):fn.value(n)}},WE=(e,t,n)=>n.no_events?t:HE(t,o=>yy(e,{...n,content:o})).content,vm=(e,t)=>{if(t.no_events)return fn.value(t);{const n=HE(t.content,s=>aO(e,{...t,content:s}));return n.isDefaultPrevented()?(Cy(e,n),fn.error(void 0)):fn.value(n)}},Em=(e,t,n)=>{n.no_events||Cy(e,{...n,content:t})},wm=(e,t,n)=>({element:e,width:t,rows:n}),jE=(e,t)=>({element:e,cells:t}),xL=(e,t)=>({x:e,y:t}),qE=(e,t)=>{const n=parseInt($n(e,t),10);return isNaN(n)?1:n},SL=(e,t,n,s,o)=>{const r=qE(o,"rowspan"),i=qE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=jE(Nb(s),[]));for(let f=t;f<t+i;f++){const d=a[c].cells;d[f]=c===n&&f===t?o:si(o)}}},_L=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},kL=(e,t,n)=>{for(;_L(e,t,n);)t++;return t},KE=e=>Q(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),GE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(st(o[r],t))return h.some(xL(r,s))}return h.none()},YE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(jE(i[a].element,f))}return r},NL=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?YE(e,s,o,r,i):YE(e,s,i,r,o);return wm(e.element,KE(a),a)},AL=(e,t)=>{const n=si(e.element),s=S.fromTag("tbody");return Zo(s,t),It(n,s),n},TL=e=>z(e.rows,t=>{const n=z(t.cells,o=>{const r=Nb(o);return Gt(r,"colspan"),Gt(r,"rowspan"),r}),s=si(t.element);return Zo(s,n),s}),RL=e=>{const t=wm(si(e),0,[]);return T(En(e,"tr"),(n,s)=>{T(En(n,"td,th"),(o,r)=>{SL(t,kL(t,r,s),s,n,o)})}),wm(t.element,KE(t.rows),t.rows)},PL=e=>AL(e,TL(e)),OL=(e,t,n)=>GE(e,t).bind(s=>GE(e,n).map(o=>NL(e,s,o))),DL=e=>ge(e,t=>yt(t)==="ul"||yt(t)==="ol"),BL=(e,t)=>ge(e,n=>yt(n)==="li"&&sd(n,t)).fold(K([]),n=>DL(e).map(s=>{const o=S.fromTag(yt(s)),r=Vi(Bh(s),(i,a)=>qt(a,"list-style"));return bl(o,r),[S.fromTag("li"),o]}).getOr([])),$L=(e,t)=>{const n=Q(t,(s,o)=>(It(o,s),o),e);return t.length>0?dd([n]):n},IL=e=>sa(e)?Xn(e).filter(df).fold(K([]),t=>[e,t]):df(e)?[e]:[],FL=(e,t)=>{const n=S.fromDom(t.commonAncestorContainer),s=ro(n,e),o=H(s,NA),r=BL(s,t),i=o.concat(r.length?r:IL(n));return z(i,si)},XE=()=>dd([]),LL=(e,t)=>$L(S.fromDom(t.cloneContents()),FL(e,t)),ML=(e,t)=>ta(t,"table",re(st,e)),UL=(e,t)=>ML(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=RL(n);return OL(r,s,o).map(i=>dd([PL(i)]))}).getOrThunk(XE),zL=(e,t)=>t.length>0&&t[0].collapsed?XE():LL(e,t[0]),HL=(e,t)=>{const n=ly(t,e);return n.length>0?UL(e,n):zL(e,t)},Sc=(e,t)=>t>=0&&t<e.length&&wa(e.charAt(t)),QE=e=>xo(e.innerText),VL=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),WL=e=>h.from(e.selection.getRng()).map(t=>{const n=h.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),o=VL(n),r=e.dom.add(s,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=QE(r),a=xo(r.textContent);if(e.dom.remove(r),Sc(a,0)||Sc(a,a.length-1)){const c=n.getOr(s),f=QE(c),d=f.indexOf(i);if(d===-1)return i;{const p=Sc(f,d-1),C=Sc(f,d+i.length);return(p?" ":"")+i+(C?" ":"")}}else return i}).getOr(""),jL=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Sd(e,td(o)),i=t.contextual?HL(S.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},qL=(e,t)=>{if(t.format==="text")return WL(e);{const n=jL(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},KL=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),GL=(e,t,n={})=>{const s=KL(n,t);return VE(e,s).fold(wt,o=>{const r=qL(e,o);return WE(e,r,o)})},xm=0,ZE=1,JE=2,YL=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,C)=>({start:d,end:p,diag:C}),i=(d,p,C,y,w)=>{const v=c(d,p,C,y);if(v===null||v.start===p&&v.diag===p-y||v.end===d&&v.diag===d-C){let x=d,_=C;for(;x<p||_<y;)x<p&&_<y&&e[x]===t[_]?(w.push([xm,e[x]]),++x,++_):p-d>y-C?(w.push([JE,e[x]]),++x):(w.push([ZE,t[_]]),++_)}else{i(d,v.start,C,v.start-v.diag,w);for(let x=v.start;x<v.end;++x)w.push([xm,e[x]]);i(v.end,p,v.end-v.diag,y,w)}},a=(d,p,C,y)=>{let w=d;for(;w-p<y&&w<C&&e[w]===t[w-p];)++w;return r(d,w,p)},c=(d,p,C,y)=>{const w=p-d,v=y-C;if(w===0||v===0)return null;const x=w-v,_=v+w,P=(_%2===0?_:_+1)/2;s[1+P]=d,o[1+P]=p+1;let O,I,M,ce,V;for(O=0;O<=P;++O){for(I=-O;I<=O;I+=2){for(M=I+P,I===-O||I!==O&&s[M-1]<s[M+1]?s[M]=s[M+1]:s[M]=s[M-1]+1,ce=s[M],V=ce-d+C-I;ce<p&&V<y&&e[ce]===t[V];)s[M]=++ce,++V;if(x%2!==0&&x-O<=I&&I<=x+O&&o[M-x]<=s[M])return a(o[M-x],I+d-C,p,y)}for(I=x-O;I<=x+O;I+=2){for(M=I+P-x,I===x-O||I!==x+O&&o[M+1]<=o[M-1]?o[M]=o[M+1]-1:o[M]=o[M-1],ce=o[M]-1,V=ce-d+C-I;ce>=d&&V>=C&&e[ce]===t[V];)o[M]=ce--,V--;if(x%2===0&&-O<=I&&I<=O&&o[M]<=s[M+x])return a(o[M],I+d-C,p,y)}}},f=[];return i(0,e.length,0,t.length,f),f},e0=e=>Ee(e)?e.outerHTML:te(e)?So.encodeRaw(e.data,!1):lf(e)?"<!--"+e.data+"-->":"",XL=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},QL=(e,t,n)=>{const s=XL(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];o.parentNode.insertBefore(s,o)}else e.appendChild(s)},ZL=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}},JL=(e,t)=>{let n=0;T(e,s=>{s[0]===xm?n++:s[0]===ZE?(QL(t,s[1],n),n++):s[0]===JE&&ZL(t,n)})},eM=e=>H(z(ht(e.childNodes),e0),t=>t.length>0),tM=(e,t)=>{const n=z(ht(t.childNodes),e0);return JL(YL(n,e),t),t},nM=Ko(()=>document.implementation.createHTMLDocument("undo")),sM=e=>e.indexOf("</iframe>")!==-1,oM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),rM=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),_c=e=>{const t=eM(e.getBody()),n=We(t,o=>{const r=nv(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return sM(s)?oM(n):rM(s)},Sm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?tM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ke(s)&&VC(s)?!s.isFakeCaret:!0}),e.selection.moveToBookmark(s)},_m=e=>e.type==="fragmented"?e.fragments.join(""):e.content,t0=e=>{const t=S.fromTag("body",nM());return sf(t,_m(e)),T(En(t,"*[data-mce-bogus]"),Jo),Fh(t)},iM=(e,t)=>_m(e)===_m(t),aM=(e,t)=>t0(e)===t0(t),km=(e,t)=>!e||!t?!1:iM(e,t)?!0:aM(e,t),Nm=e=>e.get()===0,kc=(e,t,n)=>{Nm(n)&&(e.typing=t)},n0=(e,t)=>{e.typing&&(kc(e,!1,t),e.add())},lM=e=>{e.typing&&(e.typing=!1,e.add())},cM=(e,t,n)=>{Nm(t)&&n.set(Zb(e.selection))},uM=(e,t,n,s,o,r,i)=>{const a=_c(e);if(r=r||{},r=G.extend(r,a),Nm(s)===!1||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:r,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&km(c,r))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const f=cR(e);if(f&&t.data.length>f){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}r.bookmark=Zb(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(r),n.set(t.data.length-1);const d={level:r,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),r},fM=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},dM=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Sm(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},mM=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Sm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},pM=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,kc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Sm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},gM=e=>{e.clear(),e.add()},hM=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!km(_c(e),t.data[0]),bM=(e,t)=>t.get()<e.data.length-1&&!e.typing,CM=(e,t,n)=>(n0(e,t),e.beforeChange(),e.ignore(n),e.add()),yM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},vM=(e,t)=>{const n=e.dom,s=ke(t)?t:e.getBody();At(e.hasVisual)&&(e.hasVisual=pR(e)),T(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=gR(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=gC(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},s0=e=>({init:{bindEvents:Oe},undoManager:{beforeChange:(t,n)=>cM(e,t,n),add:(t,n,s,o,r,i)=>uM(e,t,n,s,o,r,i),undo:(t,n,s)=>pM(e,t,n,s),redo:(t,n)=>mM(e,t,n),clear:(t,n)=>fM(e,t,n),reset:t=>gM(t),hasUndo:(t,n)=>hM(e,t,n),hasRedo:(t,n)=>bM(t,n),transact:(t,n,s)=>CM(t,n,s),ignore:(t,n)=>yM(t,n),extra:(t,n,s,o)=>dM(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>tm(e,t,n,s,o),matchAll:(t,n)=>DI(e,t,n),matchNode:(t,n,s,o)=>Fs(e,t,n,s,o),canApply:t=>$I(e,t),closest:t=>BI(e,t),apply:(t,n,s)=>bE(e,t,n,s),remove:(t,n,s,o)=>gE(e,t,n,s,o),toggle:(t,n,s)=>bF(e,t,n,s),formatChanged:(t,n,s,o,r)=>hF(e,t,n,s,o,r)},editor:{getContent:t=>lB(e,t),setContent:(t,n)=>RI(e,t,n),insertContent:(t,n)=>kI(e,t,n),addVisual:t=>vM(e,t)},selection:{getContent:(t,n)=>GL(e,t,n)},autocompleter:{addDecoration:t=>QD(e,t),removeDecoration:()=>JD(e,S.fromDom(e.getBody()))},raw:{getModel:()=>h.none()}}),EM=e=>{const t=f=>ft(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,d,p)=>s.transact(p),ignore:(f,d)=>s.ignore(d),extra:(f,d,p,C)=>s.extra(p,C)},formatter:{match:(f,d,p,C)=>o.match(f,t(d),C),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,d,p)=>o.apply(f,t(d)),remove:(f,d,p,C)=>o.remove(f,t(d)),toggle:(f,d,p)=>o.toggle(f,t(d)),formatChanged:(f,d,p,C,y)=>o.formatChanged(d,p,C,y)},editor:{getContent:f=>r.getContent(f),setContent:(f,d)=>({content:r.setContent(f,d),html:""}),insertContent:(f,d)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>h.some(c.getRawModel())}}},wM=()=>{const e=K(null),t=K("");return{init:{bindEvents:Oe},undoManager:{beforeChange:Oe,add:e,undo:e,redo:e,clear:Oe,reset:Oe,hasUndo:pt,hasRedo:pt,transact:e,ignore:Oe,extra:Oe},formatter:{match:pt,matchAll:K([]),matchNode:K(void 0),canApply:pt,closest:t,apply:Oe,remove:Oe,toggle:Oe,formatChanged:K({unbind:Oe})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Oe},selection:{getContent:t},autocompleter:{addDecoration:Oe,removeDecoration:Oe},raw:{getModel:K(h.none())}}},io=e=>Ie(e.plugins,"rtc"),xM=e=>ut(e.plugins,"rtc").bind(t=>h.from(t.setup)),SM=e=>{const t=e;return xM(e).fold(()=>(t.rtcInstance=s0(e),h.none()),n=>(t.rtcInstance=wM(),h.some(()=>n().then(s=>(t.rtcInstance=EM(s),s.rtc.isRemote)))))},Am=e=>e.rtcInstance?e.rtcInstance:s0(e),_t=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},_M=(e,t,n)=>{_t(e).undoManager.beforeChange(t,n)},kM=(e,t,n,s,o,r,i)=>_t(e).undoManager.add(t,n,s,o,r,i),NM=(e,t,n,s)=>_t(e).undoManager.undo(t,n,s),AM=(e,t,n)=>_t(e).undoManager.redo(t,n),TM=(e,t,n)=>{_t(e).undoManager.clear(t,n)},RM=(e,t)=>{_t(e).undoManager.reset(t)},PM=(e,t,n)=>_t(e).undoManager.hasUndo(t,n),OM=(e,t,n)=>_t(e).undoManager.hasRedo(t,n),DM=(e,t,n,s)=>_t(e).undoManager.transact(t,n,s),BM=(e,t,n)=>{_t(e).undoManager.ignore(t,n)},$M=(e,t,n,s,o)=>{_t(e).undoManager.extra(t,n,s,o)},IM=(e,t,n,s,o)=>_t(e).formatter.match(t,n,s,o),FM=(e,t,n)=>_t(e).formatter.matchAll(t,n),LM=(e,t,n,s,o)=>_t(e).formatter.matchNode(t,n,s,o),MM=(e,t)=>_t(e).formatter.canApply(t),UM=(e,t)=>_t(e).formatter.closest(t),zM=(e,t,n,s)=>{_t(e).formatter.apply(t,n,s)},HM=(e,t,n,s,o)=>{_t(e).formatter.remove(t,n,s,o)},VM=(e,t,n,s)=>{_t(e).formatter.toggle(t,n,s)},WM=(e,t,n,s,o,r)=>_t(e).formatter.formatChanged(t,n,s,o,r),jM=(e,t)=>Am(e).editor.getContent(t),qM=(e,t,n)=>Am(e).editor.setContent(t,n),KM=(e,t,n)=>Am(e).editor.insertContent(t,n),GM=(e,t,n)=>_t(e).selection.getContent(t,n),YM=(e,t)=>_t(e).editor.addVisual(t),o0=e=>_t(e).init.bindEvents(),XM=(e,t)=>_t(e).autocompleter.addDecoration(t),QM=e=>_t(e).autocompleter.removeDecoration(),ZM=(e,t={})=>{const n=t.format?t.format:"html";return GM(e,n,t)},r0=e=>e.dom.length===0?(Nt(e),h.none()):h.some(e),JM=(e,t)=>e.filter(n=>_a.isBookmarkNode(n.dom)).bind(t?Zi:Xo),eU=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(Bd(o,r,!1,!s),n.setStart(r,i)):(Bd(r,o,!1,!s),n.setEnd(r,i))},tU=(e,t)=>{Xn(e).each(n=>{const s=e.dom;t&&lc(n,F(s,0))?uc(s,0):!t&&cc(n,F(s,s.length))&&Dd(s,s.length)})},i0=(e,t,n,s)=>{e.bind(o=>((s?Dd:uc)(o.dom,s?o.dom.length:0),t.filter(Bn).map(i=>eU(o,i,n,s)))).orThunk(()=>JM(t,s).or(t).filter(Bn).map(r=>tU(r,s)))},nU=(e,t)=>{const n=h.from(t.firstChild).map(S.fromDom),s=h.from(t.lastChild).map(S.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Xo).filter(Bn).bind(r0),r=s.bind(Zi).filter(Bn).bind(r0);i0(o,n,e,!0),i0(r,s,e,!1),e.collapse(!1)},sU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),oU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Po({validate:!1},e.schema).serialize(r)}else return t.content},rU=(e,t,n={})=>{const s=sU(n,t);vm(e,s).each(o=>{const r=oU(e,o),i=e.selection.getRng();nU(i,i.createContextualFragment(r)),e.selection.setRng(i),Na(e,i),Em(e,r,o)})},a0=(e,t,n)=>{if(e&&Ie(e,t)){const s=H(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var iU=(e,t)=>{let n,s;const o=(i,a)=>ge(a,c=>e.is(c,i)),r=i=>e.getParents(i,null,e.getRoot());return{selectorChangedWithUnbind:(i,a)=>(n||(n={},s={},t.on("NodeChange",c=>{const f=c.element,d=r(f),p={};G.each(n,(C,y)=>{o(y,d).each(w=>{s[y]||(T(C,v=>{v(!0,{node:w,selector:y,parents:d})}),s[y]=C),p[y]=C})}),G.each(s,(C,y)=>{p[y]||(delete s[y],G.each(C,w=>{w(!1,{node:f,selector:y,parents:d})}))})})),n[i]||(n[i]=[]),n[i].push(a),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{a0(n,i,a),a0(s,i,a)}})}};const l0=e=>!!(e&&e.ownerDocument)&&to(S.fromDom(e.ownerDocument),S.fromDom(e)),aU=e=>e?l0(e.startContainer)&&l0(e.endContainer):!1,c0=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=iU(e,s),a=(Y,he)=>{const $e=e.createRng();ke(Y)&&ke(he)?($e.setStart(Y,he),$e.setEnd(Y,he),O($e),x(!1)):(od(e,$e,s.getBody(),!0),O($e))},c=Y=>ZM(s,Y),f=(Y,he)=>rU(s,Y,he),d=Y=>Gy(s.getBody(),P(),Y),p=Y=>Yy(s.getBody(),P(),Y),C=(Y,he)=>Je.getBookmark(Y,he),y=Y=>Je.moveToBookmark(Y),w=(Y,he)=>(WD(e,Y,he).each(O),Y),v=()=>{const Y=P(),he=_();return!Y||Y.item?!1:Y.compareEndPoints?Y.compareEndPoints("StartToEnd",Y)===0:!he||Y.collapsed},x=Y=>{const he=P();he.collapse(!!Y),O(he)},_=()=>t.getSelection?t.getSelection():t.document.selection,P=()=>{let Y,he,$e;const De=(ne,we,fe)=>{try{return we.compareBoundaryPoints(ne,fe)}catch{return-1}},Bt=t.document;if(s.bookmark!==void 0&&gr(s)===!1){const ne=vd(s);if(ne.isSome())return ne.map(we=>Sd(s,[we])[0]).getOr(Bt.createRange())}try{(Y=_())&&!vl(Y.anchorNode)&&(Y.rangeCount>0?he=Y.getRangeAt(0):he=Y.createRange?Y.createRange():Bt.createRange(),he=Sd(s,[he])[0])}catch{}return he||(he=Bt.createRange()),he.setStart&&he.startContainer.nodeType===9&&he.collapsed&&($e=e.getRoot(),he.setStart($e,0),he.setEnd($e,0)),o&&r&&(De(he.START_TO_START,he,o)===0&&De(he.END_TO_END,he,o)===0?he=r:(o=null,r=null)),he},O=(Y,he)=>{let $e;if(!aU(Y))return;const De=_();if(Y=s.dispatch("SetSelectionRange",{range:Y,forward:he}).range,De){r=Y;try{De.removeAllRanges(),De.addRange(Y)}catch{}he===!1&&De.extend&&(De.collapse(Y.endContainer,Y.endOffset),De.extend(Y.startContainer,Y.startOffset)),o=De.rangeCount>0?De.getRangeAt(0):null}!Y.collapsed&&Y.startContainer===Y.endContainer&&De.setBaseAndExtent&&Y.endOffset-Y.startOffset<2&&Y.startContainer.hasChildNodes()&&($e=Y.startContainer.childNodes[Y.startOffset],$e&&$e.tagName==="IMG"&&(De.setBaseAndExtent(Y.startContainer,Y.startOffset,Y.endContainer,Y.endOffset),(De.anchorNode!==Y.startContainer||De.focusNode!==Y.endContainer)&&De.setBaseAndExtent($e,0,$e,1))),s.dispatch("AfterSetSelectionRange",{range:Y,forward:he})},I=Y=>(f(e.getOuterHTML(Y)),Y),M=()=>HD(s.getBody(),P()),ce=(Y,he)=>VD(e,P(),Y,he),V=()=>{const Y=_(),he=Y==null?void 0:Y.anchorNode,$e=Y==null?void 0:Y.focusNode;if(!Y||!he||!$e||vl(he)||vl($e))return!0;const De=e.createRng(),Bt=e.createRng();try{De.setStart(he,Y.anchorOffset),De.collapse(!0),Bt.setStart($e,Y.focusOffset),Bt.collapse(!0)}catch{return!0}return De.compareBoundaryPoints(De.START_TO_START,Bt)<=0},je={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:s,collapse:x,setCursorLocation:a,getContent:c,setContent:f,getBookmark:C,moveToBookmark:y,select:w,isCollapsed:v,isForward:V,setNode:I,getNode:M,getSel:_,setRng:O,getRng:P,getStart:d,getEnd:p,getSelectedBlocks:ce,normalize:()=>{const Y=P(),he=_();if(!LP(he)&&Zl(s)){const $e=nc(e,Y);return $e.each(De=>{O(De,V())}),$e.getOr(Y)}return Y},selectorChanged:(Y,he)=>(i(Y,he),je),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Y,he=e.getRoot();for(;he&&he.nodeName!=="BODY";){if(he.scrollHeight>he.clientHeight){Y=he;break}he=he.parentNode}return Y},scrollIntoView:(Y,he)=>{ke(Y)?cD(s,Y,he):Na(s,P(),he)},placeCaretAt:(Y,he)=>O(Ny(Y,he,s.getDoc())),getBoundingClientRect:()=>{const Y=P();return Y.collapsed?F.fromRangeStart(Y).getClientRects()[0]:Y.getBoundingClientRect()},destroy:()=>{t=o=r=null,Rt.destroy()}},Je=_a(je),Rt=wy(je,s);return je.bookmarkManager=Je,je.controlSelection=Rt,je},lU=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let d=f.attr(r);d!==void 0?(f.attr(o,d.length>0?d:null),f.attr(r,null)):(d=f.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),f.name):i&&(d=i.call(a,d,o,f.name)),f.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(h.from(a.firstChild).exists(f=>!_l(f.value))?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{let o=s.length;for(;o--;){const r=s[o].firstChild;r&&(r.value=So.decode(r.value))}}),e.addNodeFilter("script,style",(s,o)=>{const r=a=>a.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const a=s[i],c=a.firstChild?a.firstChild.value:"";if(o==="script"){const f=a.attr("type");f&&a.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`// <![CDATA[
`+r(c)+`
// ]]>`)}else t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`<!--
`+r(c)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o];t.preserve_cdata&&r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{T(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},cU=e=>{const t=s=>s&&s.name==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},uU=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");G.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return XP(e,{...n,node:r}),s&&(o.doc=s),r},fU=(e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events,dU=(e,t,n)=>fU(e,n)?uU(e,t,n):t,mU=(e,t,n)=>{G.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},pU=(e,t,n)=>!t.no_events&&e?QP(e,{...t,content:n}).content:n,gU=(e,t,n)=>{const s=xo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Sl(S.fromDom(t))?s:G.trim(s)},hU=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return cU(o),o},bU=(e,t,n)=>Po(e,t).serialize(n),CU=(e,t,n,s,o)=>{const r=bU(t,n,s);return pU(e,o,r)},yU=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:at.DOM,o=t&&t.schema?t.schema:ko(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=bi(e,o);lU(r,e,s);const i=(a,c={})=>{const f={format:"html",...c},d=dU(t,a,f),p=gU(s,d,f),C=hU(r,p,f);return f.format==="tree"?C:CU(t,e,o,C,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(mU,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},u0=(e,t)=>{const n=yU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},vU="html",EU=(e,t)=>({...e,format:t,get:!0,getInner:!0}),wU=(e,t={})=>{const n=t.format?t.format:vU,s=EU(t,n);return VE(e,s).fold(wt,o=>{const r=jM(e,o);return WE(e,r,o)})},xU="html",SU=(e,t)=>({format:xU,...e,set:!0,content:t}),Tm=(e,t,n={})=>{const s=SU(n,t);return vm(e,s).map(o=>{const r=qM(e,o.content,o);return Em(e,r.html,o),r.content}).getOr(t)},_U="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),kU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),NU=e=>{const t=H(_U,s=>Ie(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Kn(t)},AU=e=>{const t=G.makeMap(e.plugins," "),s=H(kU,o=>Ie(t,o));return Kn(s)},TU=(e,t)=>{const n=NU(e),s=AU(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+f+d)}},RU=(e,t)=>{TU(e,t)},Nc=at.DOM,PU=e=>{Nc.setStyle(e.id,"display",e.orgDisplay)},Ac=e=>h.from(e).each(t=>t.destroy()),OU=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},DU=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Nc.unbind(t,"submit reset",e.formEventDelegate))},BU=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Nc.remove(o.nextSibling),ZP(e),e.editorManager.remove(e),!e.inline&&s&&PU(e),JP(e),Nc.remove(e.getContainer()),Ac(t),Ac(n),e.destroy()}},$U=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Ac(n),Ac(s)),DU(e),OU(e),e.destroyed=!0}},Tc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Ie(e,o)}})(),Ci=nn.ModelManager,f0=(e,t)=>t.dom[e],d0=(e,t)=>parseInt(Ns(t,e),10),IU=re(f0,"clientWidth"),FU=re(f0,"clientHeight"),LU=re(d0,"margin-top"),MU=re(d0,"margin-left"),UU=e=>e.dom.getBoundingClientRect(),zU=(e,t,n)=>{const s=IU(e),o=FU(e);return t>=0&&n>=0&&t<=s&&n<=o},HU=(e,t,n,s)=>{const o=UU(t),r=e?o.left+t.dom.clientLeft+MU(t):0,i=e?o.top+t.dom.clientTop+LU(t):0,a=n-r,c=s-i;return{x:a,y:c}},VU=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.inline?s:DN(s),r=HU(e.inline,o,t,n);return zU(o,r.x,r.y)},WU=e=>h.from(e).map(S.fromDom),jU=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return WU(t).map(jr).getOr(!1)},qU=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}},m0=e=>{const t=[],n=()=>{const C=e.theme;return C&&C.getNotificationManagerImpl?C.getNotificationManagerImpl():qU()},s=()=>h.from(t[0]),o=(C,y)=>C.type===y.type&&C.text===y.text&&!C.progressBar&&!C.timeout&&!y.progressBar&&!y.timeout,r=()=>{T(t,C=>{C.reposition()})},i=C=>{t.push(C)},a=C=>{Ae(t,y=>y===C).each(y=>{t.splice(y,1)})},c=(C,y=!0)=>{if(!(e.removed||!jU(e)))return y&&e.dispatch("BeforeOpenNotification",{notification:C}),ge(t,w=>o(n().getArgs(w),C)).getOrThunk(()=>{e.editorManager.setActive(e);const w=n().open(C,()=>{a(w),r(),s().fold(()=>e.focus(),v=>Uy(S.fromDom(v.getEl())))});return i(w),r(),e.dispatch("OpenNotification",{notification:{...w}}),w})},f=()=>{s().each(C=>{n().close(C),a(C),r()})},d=K(t);return(C=>{C.on("SkinLoaded",()=>{const y=Z1(C);y&&c({text:y,type:"warning",timeout:0},!1),r()}),C.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),C.on("remove",()=>{T(t.slice(),y=>{n().close(y)})})})(e),{open:c,close:f,getNotifications:d}},yi=nn.PluginManager,Er=nn.ThemeManager;var KU=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}};const p0=e=>{let t=[];const n=()=>{const v=e.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():KU()},s=(v,x)=>(..._)=>x?x.apply(v,_):void 0,o=v=>{e.dispatch("OpenWindow",{dialog:v})},r=v=>{e.dispatch("CloseWindow",{dialog:v})},i=v=>{t.push(v),o(v)},a=v=>{r(v),t=H(t,x=>x!==v),t.length===0&&e.focus()},c=()=>h.from(t[t.length-1]),f=v=>{e.editorManager.setActive(e),yd(e),e.ui.show();const x=v();return i(x),x},d=(v,x)=>f(()=>n().open(v,x,a)),p=v=>f(()=>n().openUrl(v,a)),C=(v,x,_)=>{const P=n();P.alert(v,s(_||P,x))},y=(v,x,_)=>{const P=n();P.confirm(v,s(_||P,x))},w=()=>{c().each(v=>{n().close(v),a(v)})};return e.on("remove",()=>{T(t,v=>{n().close(v)})}),{open:d,openUrl:p,alert:C,confirm:y,close:w}},g0=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Rc=(e,t)=>{e._skinLoaded?g0(e,t):e.on("SkinLoaded",()=>{g0(e,t)})},GU=(e,t)=>{Rc(e,ss.translate(["Failed to upload image: {0}",t]))},Ia=(e,t,n)=>{hy(e,t,{message:n}),console.error(n)},Fa=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,YU=(e,t,n)=>{Ia(e,"PluginLoadError",Fa("plugin",t,n))},XU=(e,t,n)=>{Ia(e,"IconsLoadError",Fa("icons",t,n))},QU=(e,t,n)=>{Ia(e,"LanguageLoadError",Fa("language",t,n))},ZU=(e,t,n)=>{Ia(e,"ThemeLoadError",Fa("theme",t,n))},JU=(e,t,n)=>{Ia(e,"ModelLoadError",Fa("model",t,n))},ez=(e,t,n)=>{const s=ss.translate(["Failed to initialize plugin: {0}",t]);hy(e,"PluginLoadError",{message:s}),Pc(s,n),Rc(e,s)},Pc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},tz=e=>/^[a-z0-9\-]+$/i.test(e),nz=e=>h0(e,q1(e)),sz=e=>h0(e,fC(e)),h0=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=e.inline===!0;return z(t,i=>tz(i)&&!r?`${n}/${i}/${o}`:e.documentBaseURI.toAbsolute(i))},oz=e=>{e.contentCSS=e.contentCSS.concat(nz(e),sz(e))},rz=ct,iz=(e,t,n)=>JN(e,t,rz,n),az=e=>e?ht(e.getElementsByTagName("img")):[],lz=(e,t)=>{const n={};return{findAll:(o,r=ct)=>{const i=H(az(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===Qe.transparentSrc?!1:qt(f,"blob:")?!e.isUploaded(f)&&r(c):qt(f,"data:")?r(c):!1}),a=z(i,c=>{const f=c.src;if(Ie(n,f))return n[f].then(d=>me(d)?d:{image:c,blobInfo:d.blobInfo});{const d=oL(t,f).then(p=>(delete n[f],{image:c,blobInfo:p})).catch(p=>(delete n[f],p));return n[f]=d,d}});return Promise.all(a)}}},b0=()=>{let n={};const s=(C,y)=>({status:C,resultUri:y}),o=C=>C in n;return{hasBlobUri:o,getResultUri:C=>{const y=n[C];return y?y.resultUri:null},isPending:C=>o(C)?n[C].status===1:!1,isUploaded:C=>o(C)?n[C].status===2:!1,markPending:C=>{n[C]=s(1,null)},markUploaded:(C,y)=>{n[C]=s(2,y)},removeFailed:C=>{delete n[C]},destroy:()=>{n={}}}};let cz=0;const uz=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},fz=e=>e+cz+++uz(),dz=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,C,y,w,v)=>{if(me(p))return s({id:p,name:w,filename:v,blob:C,base64:y});if(ft(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const C=p.id||fz("blobid"),y=p.name||C,w=p.blob;return{id:K(C),name:K(y),filename:K(p.filename||y+"."+t(w.type)),blob:K(w),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(w)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>ge(e,p).getOrUndefined(),i=p=>r(C=>C.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(C=>C.blobUri()===p),getByData:(p,C)=>r(y=>y.base64()===p&&y.blob().type===C),findFirst:r,removeByUri:p=>{e=H(e,C=>C.blobUri()===p?(URL.revokeObjectURL(C.blobUri()),!1):!0)},destroy:()=>{T(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},mz=(e,t)=>{const n={},s=(w,v)=>w?w.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v,o=(w,v)=>new Promise((x,_)=>{const P=new XMLHttpRequest;P.open("POST",t.url),P.withCredentials=t.credentials,P.upload.onprogress=I=>{v(I.loaded/I.total*100)},P.onerror=()=>{_("Image upload failed due to a XHR Transport error. Code: "+P.status)},P.onload=()=>{if(P.status<200||P.status>=300){_("HTTP Error: "+P.status);return}const I=JSON.parse(P.responseText);if(!I||!me(I.location)){_("Invalid JSON: "+P.responseText);return}x(s(t.basePath,I.location))};const O=new FormData;O.append("file",w.blob(),w.filename()),P.send(O)}),r=()=>new Promise(w=>{w([])}),i=(w,v)=>({url:v,blobInfo:w,status:!0}),a=(w,v)=>({url:"",blobInfo:w,status:!1,error:v}),c=(w,v)=>{G.each(n[w],x=>{x(v)}),delete n[w]},f=(w,v,x)=>(e.markPending(w.blobUri()),new Promise(_=>{let P,O;try{const I=()=>{P&&(P.close(),O=Oe)},M=V=>{I(),e.markUploaded(w.blobUri(),V),c(w.blobUri(),i(w,V)),_(i(w,V))},ce=V=>{I(),e.removeFailed(w.blobUri()),c(w.blobUri(),a(w,V)),_(a(w,V))};O=V=>{V<0||V>100||h.from(P).orThunk(()=>h.from(x).map(Ir)).each(j=>{P=j,j.progressBar.value(V)})},v(w,O).then(M,V=>{ce(me(V)?{message:V}:V)})}catch(I){_(a(w,I))}})),d=w=>w===o,p=w=>{const v=w.blobUri();return new Promise(x=>{n[v]=n[v]||[],n[v].push(x)})},C=(w,v)=>(w=G.grep(w,x=>!e.isUploaded(x.blobUri())),Promise.all(G.map(w,x=>e.isPending(x.blobUri())?p(x):f(x,t.handler,v)))),y=(w,v)=>!t.url&&d(t.handler)?r():C(w,v);return Ge(t.handler)===!1&&(t.handler=o),{upload:y}},C0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),y0=(e,t)=>mz(t,{url:M1(e),basePath:U1(e),credentials:z1(e),handler:H1(e)}),pz=e=>{const t=b0(),n=y0(e,t);return{upload:(s,o=!0)=>n.upload(s,o?C0(e):void 0)}},gz=e=>{const t=dz();let n,s;const o=b0(),r=[],i=O=>I=>e.selection?O(I):[],a=O=>O+(O.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(O,I,M)=>{let ce=0;do ce=O.indexOf(I,ce),ce!==-1&&(O=O.substring(0,ce)+M+O.substr(ce+I.length),ce+=M.length-I.length+1);while(ce!==-1);return O},f=(O,I,M)=>{const ce=`src="${M}"${M===Qe.transparentSrc?' data-mce-placeholder="1"':""}`;return O=c(O,`src="${I}"`,ce),O=c(O,'data-mce-src="'+I+'"','data-mce-src="'+M+'"'),O},d=(O,I)=>{T(e.undoManager.data,M=>{M.type==="fragmented"?M.fragments=z(M.fragments,ce=>f(ce,O,I)):M.content=f(M.content,O,I)})},p=(O,I)=>{const M=e.convertURL(I,"src");d(O.src,I),_s(S.fromDom(O),{src:aC(e)?a(I):I,"data-mce-src":M})},C=()=>(n||(n=y0(e,o)),x().then(i(O=>{const I=z(O,M=>M.blobInfo);return n.upload(I,C0(e)).then(i(M=>{const ce=[];let V=!1;const j=z(M,(X,J)=>{const ve=O[J].blobInfo,ue=O[J].image;let oe=!1;return X.status&&F1(e)?(X.url&&!tn(ue.src,X.url)&&(V=!0),t.removeByUri(ue.src),io(e)||p(ue,X.url)):X.error&&(X.error.remove&&(d(ue.getAttribute("src"),Qe.transparentSrc),ce.push(ue),oe=!0),GU(e,X.error.message)),{element:ue,status:X.status,uploadUri:X.url,blobInfo:ve,removed:oe}});return ce.length>0&&!io(e)?e.undoManager.transact(()=>{T(ce,X=>{e.dom.remove(X),t.removeByUri(X.src)})}):V&&e.undoManager.dispatchChange(),j}))}))),y=()=>iC(e)?C():Promise.resolve([]),w=O=>ot(r,I=>I(O)),v=O=>{r.push(O)},x=()=>(s||(s=lz(o,t)),s.findAll(e.getBody(),w).then(i(O=>{const I=H(O,M=>me(M)?(Rc(e,M),!1):!0);return io(e)||T(I,M=>{d(M.image.src,M.blobInfo.blobUri()),M.image.src=M.blobInfo.blobUri(),M.image.removeAttribute("data-mce-src")}),I}))),_=()=>{t.destroy(),o.destroy(),s=n=null},P=O=>O.replace(/src="(blob:[^"]+)"/g,(I,M)=>{const ce=o.getResultUri(M);if(ce)return'src="'+ce+'"';let V=t.getByUri(M);if(V||(V=Q(e.editorManager.get(),(j,X)=>j||X.editorUpload&&X.editorUpload.blobCache.getByUri(M),null)),V){const j=V.blob();return'src="data:'+j.type+";base64,"+V.base64()+'"'}return I});return e.on("SetContent",()=>{iC(e)?y():x()}),e.on("RawSaveContent",O=>{O.content=P(O.content)}),e.on("GetContent",O=>{O.source_view||O.format==="raw"||O.format==="tree"||(O.content=P(O.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",O=>{T(O,I=>{const M=I.attr("src");if(t.getByUri(M))return;const ce=o.getResultUri(M);ce&&I.attr("src",ce)})})}),{blobCache:t,addFilter:v,uploadImages:C,uploadImagesAuto:y,scanForImages:x,destroy:_}},hz=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>Ee(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{G.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},v0={remove_similar:!0,inherit:!1},vi={selector:"td,th",...v0},bz={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vi},tablecellbordercolor:{styles:{borderColor:"%value"},...vi},tablecellclass:{classes:["%value"],...vi},tableclass:{selector:"table",classes:["%value"],...v0},tablecellborderstyle:{styles:{borderStyle:"%value"},...vi},tablecellborderwidth:{styles:{borderWidth:"%value"},...vi}},Cz=K(bz),yz=e=>{const t={},n=i=>ke(i)?t[i]:t,s=i=>Ie(t,i),o=(i,a)=>{i&&(me(i)?(kt(a)||(a=[a]),T(a,c=>{At(c.deep)&&(c.deep=!Tn(c)),At(c.split)&&(c.split=!Tn(c)||zt(c)),At(c.remove)&&Tn(c)&&!zt(c)&&(c.remove="none"),Tn(c)&&zt(c)&&(c.mixed=!0,c.block_expand=!0),me(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):bt(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(hz(e)),o(Cz()),o(tR(e)),{get:n,has:s,register:o,unregister:r}},Oc=G.each,_n=at.DOM,E0=(e,t)=>{let n,s,o;const r=t&&t.schema||ko({}),i=(d,p)=>{p.classes.length&&_n.addClass(d,p.classes.join(" ")),_n.setAttribs(d,p.attrs)},a=d=>{s=typeof d=="string"?{name:d,classes:[],attrs:{}}:d;const p=_n.create(s.name);return i(p,s),p},c=(d,p)=>{const C=typeof d!="string"?d.nodeName.toLowerCase():d,y=r.getElementRule(C),w=y&&y.parentsRequired;return w&&w.length?p&&G.inArray(w,p)!==-1?p:w[0]:!1},f=(d,p,C)=>{let y,w;const v=p.length>0&&p[0],x=v&&v.name,_=c(d,x);if(_)x===_?(w=p[0],p=p.slice(1)):w=_;else if(v)w=p[0],p=p.slice(1);else if(!C)return d;return w&&(y=a(w),y.appendChild(d)),C&&(y||(y=_n.create("div"),y.appendChild(d)),G.each(C,P=>{const O=a(P);y.insertBefore(O,d)})),f(y,p,w&&w.siblings)};return e&&e.length?(s=e[0],n=a(s),o=_n.create("div"),o.appendChild(f(n,e.slice(1),s.siblings)),o):""},vz=e=>{let t;const n={classes:[],attrs:{}};return e=n.selector=G.trim(e),e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":G.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},Ez=e=>!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=G.map(t.split(/(?:~\+|~|\+)/),vz),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()),wz=(e,t)=>{let n,s,o="",r,i=nR(e);if(i==="")return"";const a=d=>d.replace(/%(\w+)/g,"");if(typeof t=="string"){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t){const d=ut(t,"preview");if(Vr(d,!1))return"";i=d.getOr(i)}n=t.block||t.inline||"span";const c=Ez(t.selector);c.length?(c[0].name||(c[0].name=n),n=t.selector,s=E0(c,e)):s=E0([n],e);const f=_n.select(n,s)[0]||s.firstChild;return Oc(t.styles,(d,p)=>{const C=a(d);C&&_n.setStyle(f,p,C)}),Oc(t.attributes,(d,p)=>{const C=a(d);C&&_n.setAttrib(f,p,C)}),Oc(t.classes,d=>{const p=a(d);_n.hasClass(f,p)||_n.addClass(f,p)}),e.dispatch("PreviewFormats"),_n.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),r=_n.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Oc(i.split(" "),d=>{let p=_n.getStyle(f,d,!0);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=_n.getStyle(e.getBody(),d,!0),Kl(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&Kl(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(r===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*r+"px"}d==="border"&&p&&(o+="padding:0 2px;"),o+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),_n.remove(s),o},xz=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},w0=e=>{const t=yz(e),n=Ut(null);return xz(e),jI(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{zM(e,s,o,r)},remove:(s,o,r,i)=>{HM(e,s,o,r,i)},toggle:(s,o,r)=>{VM(e,s,o,r)},match:(s,o,r,i)=>IM(e,s,o,r,i),closest:s=>UM(e,s),matchAll:(s,o)=>FM(e,s,o),matchNode:(s,o,r,i)=>LM(e,s,o,r,i),canApply:s=>MM(e,s),formatChanged:(s,o,r,i)=>WM(e,n,s,o,r,i),getCssText:re(wz,e)}},x0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Sz=(e,t,n)=>{const s=Ut(!1),o=c=>{kc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;x0(f)||(n0(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;x0(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;c.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&km(_c(e),t.data[0])===!1&&(e.isDirty()===!1&&e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!d&&(t.beforeChange(),kc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},_z=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},S0=e=>{const t=No(),n=Ut(0),s=Ut(0),o={data:[],typing:!1,beforeChange:()=>{_M(e,n,t)},add:(r,i)=>kM(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0),e.dispatch("change",{level:_c(e),lastLevel:Mr(o.data,s.get()).getOrUndefined()})},undo:()=>NM(e,o,n,s),redo:()=>AM(e,s,o.data),clear:()=>{TM(e,o,s)},reset:()=>{RM(e,o)},hasUndo:()=>PM(e,o,s),hasRedo:()=>OM(e,o,s),transact:r=>DM(e,o,n,r),ignore:r=>{BM(e,n,r)},extra:(r,i)=>{$M(e,o,s,r,i)}};return io(e)||Sz(e,o,n),_z(e),o},kz=[9,27,pe.HOME,pe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,pe.DOWN,pe.UP,pe.LEFT,pe.RIGHT].concat(Qe.browser.isFirefox()?[224]:[]),_0="data-mce-placeholder",k0=e=>e.type==="keydown"||e.type==="keyup",N0=e=>{const t=e.keyCode;return t===pe.BACKSPACE||t===pe.DELETE},Nz=e=>{if(k0(e)){const t=e.keyCode;return!N0(e)&&(pe.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||R(kz,t))}else return!1},Az=e=>k0(e)&&!(N0(e)||e.type==="keyup"&&e.keyCode===229),Tz=(e,t,n)=>{if(Mt(S.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},Rz=e=>{const t=e.dom,n=wn(e),s=Q1(e),o=(r,i)=>{if(Nz(r))return;const a=e.getBody(),c=Az(r)?!1:Tz(t,a,n);(t.getAttrib(a,_0)!==""!==c||i)&&(t.setAttrib(a,_0,c?s:null),t.setAttrib(a,"aria-placeholder",c?s:null),iO(e,c),e.on(c?"keydown":"keyup",o),e.off(c?"keyup":"keydown",o))};s&&e.on("init",r=>{o(r,!0),e.on("change SetContent ExecCommand",o),e.on("paste",i=>Un.setEditorTimeout(e,()=>o(i)))})},Pz=(e,t)=>({block:e,position:t}),Oz=(e,t)=>({from:e,to:t}),Rm=(e,t)=>{const n=S.fromDom(e),s=S.fromDom(t.container());return fc(n,s).map(o=>Pz(o,t))},Dz=e=>st(e.from.block,e.to.block)===!1,Bz=e=>Xn(e.from.block).bind(t=>Xn(e.to.block).filter(n=>st(t,n))).isSome(),$z=e=>vt(e.from.block.dom)===!1&&vt(e.to.block.dom)===!1,Iz=(e,t,n)=>Tt(n.position.getNode())&&Mt(n.block)===!1?li(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Fn(t,e,s).bind(o=>Rm(e,o)):h.some(n)).getOr(n):n,Fz=(e,t,n)=>{const s=Rm(e,F.fromRangeStart(n)),o=s.bind(r=>Fn(t,e,r.position).bind(i=>Rm(e,i).map(a=>Iz(e,t,a))));return vn(s,o,Oz).filter(r=>Dz(r)&&Bz(r)&&$z(r))},Lz=(e,t,n)=>n.collapsed?Fz(e,t,n):h.none(),Mz=e=>{const t=Yt(e);return Ae(t,ns).fold(K(t),n=>t.slice(0,n))},A0=e=>{const t=Mz(e);return T(t,Nt),t},T0=(e,t)=>{const n=ro(t,e);return ge(n.reverse(),s=>Mt(s)).each(Nt)},Uz=e=>H(Sh(e),t=>!Mt(t)).length===0,zz=(e,t,n,s)=>{if(Mt(n))return hr(n),dn(n.dom);Uz(s)&&Mt(t)&&Qn(s,S.fromTag("br"));const o=rs(n.dom,F.before(s.dom));return T(A0(t),r=>{Qn(s,r)}),T0(e,t),o},Hz=(e,t,n)=>{if(Mt(n))return Nt(n),Mt(t)&&hr(t),dn(t.dom);const s=Bs(n.dom);return T(A0(t),o=>{It(n,o)}),T0(e,t),s},Vz=(e,t)=>{const n=ro(t,e);return h.from(n[n.length-1])},Wz=(e,t)=>to(t,e)?Vz(t,e):h.none(),R0=(e,t)=>{li(e,t.dom).map(n=>n.getNode()).map(S.fromDom).filter(Yr).each(Nt)},P0=(e,t,n)=>(R0(!0,t),R0(!1,n),Wz(t,n).fold(re(Hz,e,t,n),re(zz,e,t,n))),O0=(e,t,n,s)=>t?P0(e,s,n):P0(e,n,s),Pm=(e,t)=>{const n=S.fromDom(e.getBody());return Lz(n.dom,t,e.selection.getRng()).map(o=>()=>{O0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},jz=(e,t)=>{const n=t.getRng();return vn(fc(e,S.fromDom(n.startContainer)),fc(e,S.fromDom(n.endContainer)),(s,o)=>st(s,o)===!1?h.some(()=>{n.deleteContents(),O0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})}):h.none()).getOr(h.none())},D0=(e,t)=>{const n=S.fromDom(t),s=re(st,e);return Kr(n,xl,s).isSome()},qz=(e,t)=>D0(e,t.startContainer)||D0(e,t.endContainer),Kz=(e,t)=>{const n=rs(e.dom,F.fromRangeStart(t)).isNone(),s=Ln(e.dom,F.fromRangeEnd(t)).isNone();return!qz(e,t)&&n&&s},Gz=e=>h.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Yz=e=>{const t=S.fromDom(e.getBody()),n=e.selection.getRng();return Kz(t,n)?Gz(e):jz(t,e.selection)},Om=(e,t)=>e.selection.isCollapsed()?h.none():Yz(e),Xz=As,Qz=vt,ao=(e,t,n,s,o)=>h.from(t._selectionOverrides.showCaret(e,n,s,o)),Zz=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},La=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?h.none():h.some(Zz(t)),Jz=(e,t,n)=>{const s=Vf(1,e.getBody(),t),o=F.fromRangeStart(s),r=o.getNode();if(ha(r))return ao(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(ha(i))return ao(1,e,i,!1,!1);const a=e.dom.getParent(o.getNode(),c=>Qz(c)||Xz(c));return ha(a)?ao(1,e,a,!1,n):h.none()},Dm=(e,t,n)=>t.collapsed?Jz(e,t,n).getOr(t):t,eH=e=>Do(e)||Ta(e),tH=e=>Bo(e)||Ra(e),nH=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},B0=(e,t,n,s,o,r)=>{ao(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),nH(e.dom,n)},sH=(e,t)=>{const n=e.selection.getRng();if(!te(n.commonAncestorContainer))return h.none();const s=t?Ft.Forwards:Ft.Backwards,o=Ds(e.getBody()),r=re(Wf,t?o.next:o.prev),i=t?eH:tH,a=Ea(s,e.getBody(),n),c=zn(t,r(a));if(!c||!Hl(a,c))return h.none();if(i(c))return h.some(()=>B0(e,n,a.getNode(),s,t,c));const f=r(c);return f&&i(f)&&Hl(c,f)?h.some(()=>B0(e,n,a.getNode(),s,t,f)):h.none()},Bm=(e,t)=>sH(e,t),$m=(e,t)=>{const n=e.getBody();return t?dn(n).filter(Do):Bs(n).filter(Bo)},Im=e=>{const t=e.selection.getRng();return!t.collapsed&&($m(e,!0).exists(n=>n.isEqual(F.fromRangeStart(t)))||$m(e,!1).exists(n=>n.isEqual(F.fromRangeEnd(t))))},oH=e=>xl(S.fromDom(e))||sa(S.fromDom(e)),Rn=Rs.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),rH=(e,t)=>{const n=t.getNode(e===!1),s=e?"after":"before";return Ee(n)&&n.getAttribute("data-mce-caret")===s},iH=(e,t,n,s)=>{const o=r=>ff(S.fromDom(r))&&!Ps(n,s,e);return OC(!t,n).fold(()=>OC(t,s).fold(pt,o),o)},$0=(e,t,n,s)=>{const o=s.getNode(t===!1);return fc(S.fromDom(e),S.fromDom(n.getNode())).map(r=>Mt(r)?Rn.remove(r.dom):Rn.moveToElement(o)).orThunk(()=>h.some(Rn.moveToElement(o)))},I0=(e,t,n)=>Fn(t,e,n).bind(s=>oH(s.getNode())||iH(e,t,n,s)?h.none():t&&vt(s.getNode())||t===!1&&vt(s.getNode(!0))?$0(e,t,n,s):t&&Bo(n)||t===!1&&Do(n)?h.some(Rn.moveToPosition(s)):h.none()),aH=(e,t)=>e&&vt(t.nextSibling)?h.some(Rn.moveToElement(t.nextSibling)):e===!1&&vt(t.previousSibling)?h.some(Rn.moveToElement(t.previousSibling)):h.none(),lH=(e,t,n)=>n.fold(s=>h.some(Rn.remove(s)),s=>h.some(Rn.moveToElement(s)),s=>Ps(t,s,e)?h.none():h.some(Rn.moveToPosition(s))),cH=(e,t,n)=>rH(t,n)?aH(t,n.getNode(t===!1)).fold(()=>I0(e,t,n),h.some):I0(e,t,n).bind(s=>lH(e,n,s)),uH=(e,t,n)=>{const s=Vf(t?1:-1,e,n),o=F.fromRangeStart(s),r=S.fromDom(e);return t===!1&&Bo(o)?h.some(Rn.remove(o.getNode(!0))):t&&Do(o)?h.some(Rn.remove(o.getNode())):t===!1&&Do(o)&&Pd(r,o)?_B(r,o).map(i=>Rn.remove(i.getNode())):t&&Bo(o)&&Rd(r,o)?kB(r,o).map(i=>Rn.remove(i.getNode())):cH(e,t,o)},fH=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),br(e,t,S.fromDom(n)),!0),dH=(e,t)=>n=>{const s=t?F.before(n):F.after(n);return e.selection.setRng(s.toRange()),!0},mH=e=>t=>(e.selection.setRng(t.toRange()),!0),F0=(e,t)=>h.from(Oa(e.getBody(),t)),pH=(e,t)=>{const n=e.selection.getNode();return F0(e,n).filter(vt).fold(()=>uH(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(fH(e,t),dH(e,t),mH(e))),()=>h.some(Oe))},gH=e=>{T(En(e,".mce-offscreen-selection"),Nt)},hH=(e,t)=>{const n=e.selection.getNode();return vt(n)&&!wl(n)?F0(e,n.parentNode).filter(vt).fold(()=>h.some(()=>{gH(S.fromDom(e.getBody())),br(e,t,S.fromDom(e.selection.getNode())),Pv(e)}),()=>h.some(Oe)):Im(e)?h.some(()=>{Dv(e,e.selection.getRng(),S.fromDom(e.getBody()))}):h.none()},L0=e=>{const t=e.dom,n=e.selection,s=Oa(e.getBody(),n.getNode());if(As(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(F.before(o).toRange())}return!0},Fm=(e,t)=>e.selection.isCollapsed()?pH(e,t):hH(e,t),bH=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Fn(t,e.getBody(),n).filter(s=>t?gB(s):hB(s)).bind(s=>h.from(Hf(t?0:-1,s))).map(s=>()=>e.selection.select(s))},Lm=(e,t)=>e.selection.isCollapsed()?bH(e,t):h.none(),Ei=te,M0=e=>Ei(e)&&e.data[0]===Wt,U0=e=>Ei(e)&&e.data[e.data.length-1]===Wt,z0=e=>e.ownerDocument.createTextNode(Wt),CH=e=>{if(Ei(e.previousSibling))return U0(e.previousSibling)||e.previousSibling.appendData(Wt),e.previousSibling;if(Ei(e))return M0(e)||e.insertData(0,Wt),e;{const t=z0(e);return e.parentNode.insertBefore(t,e),t}},yH=e=>{if(Ei(e.nextSibling))return M0(e.nextSibling)||e.nextSibling.insertData(0,Wt),e.nextSibling;if(Ei(e))return U0(e)||e.appendData(Wt),e;{const t=z0(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}},Dc=(e,t)=>e?CH(t):yH(t),vH=re(Dc,!0),EH=re(Dc,!1),H0=(e,t)=>te(e.container())?Dc(t,e.container()):Dc(t,e.getNode()),V0=(e,t)=>{const n=t.get();return n&&e.container()===n&&Zr(n)},Mm=(e,t)=>t.fold(n=>{fr(e.get());const s=vH(n);return e.set(s),h.some(F(s,s.length-1))},n=>dn(n).map(s=>{if(V0(s,e))return F(e.get(),1);{fr(e.get());const o=H0(s,!0);return e.set(o),F(o,1)}}),n=>Bs(n).map(s=>{if(V0(s,e))return F(e.get(),e.get().length-1);{fr(e.get());const o=H0(s,!1);return e.set(o),F(o,o.length-1)}}),n=>{fr(e.get());const s=EH(n);return e.set(s),h.some(F(s,1))}),W0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return h.none()},sn=Rs.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),j0=(e,t)=>{const n=Ro(t,e);return n||e},wH=(e,t,n)=>{const s=Av(n),o=j0(t,s.container());return $o(e,o,s).fold(()=>Ln(o,s).bind(re($o,e,o)).map(r=>sn.before(r)),h.none)},xH=(e,t)=>mr(e,t)===null,q0=(e,t,n)=>$o(e,t,n).filter(re(xH,t)),SH=(e,t,n)=>{const s=Tv(n);return q0(e,t,s).bind(o=>rs(o,s).isNone()?h.some(sn.start(o)):h.none())},_H=(e,t,n)=>{const s=Av(n);return q0(e,t,s).bind(o=>Ln(o,s).isNone()?h.some(sn.end(o)):h.none())},kH=(e,t,n)=>{const s=Tv(n),o=j0(t,s.container());return $o(e,o,s).fold(()=>rs(o,s).bind(re($o,e,o)).map(r=>sn.after(r)),h.none)},K0=e=>i$(Um(e))===!1,Ms=(e,t,n)=>W0([wH,SH,_H,kH],[e,t,n]).filter(K0),Um=e=>e.fold(wt,wt,wt,wt),G0=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Bc=e=>e.fold(sn.before,sn.before,sn.after,sn.after),zm=e=>e.fold(sn.start,sn.start,sn.end,sn.end),NH=(e,t)=>G0(e)===G0(t)&&Um(e)===Um(t),AH=(e,t,n,s,o,r)=>vn($o(t,n,s),$o(t,n,o),(i,a)=>i!==a&&l$(n,i,a)?sn.after(e?i:a):r).getOr(r),TH=(e,t)=>e.fold(ct,n=>!NH(n,t)),RH=(e,t,n,s,o)=>{const r=zn(e,o);return Fn(e,n,r).map(re(zn,e)).fold(()=>s.map(Bc),c=>Ms(t,n,c).map(re(AH,e,t,n,r,c)).filter(re(TH,s))).filter(K0)},PH=(e,t)=>e?t.fold(Ot(h.some,sn.start),h.none,Ot(h.some,sn.after),h.none):t.fold(h.none,Ot(h.some,sn.before),h.none,Ot(h.some,sn.end)),OH=(e,t,n,s)=>{const o=zn(e,s),r=Ms(t,n,o);return Ms(t,n,o).bind(re(PH,e)).orThunk(()=>RH(e,t,n,r,s))},DH=e=>Ge(e.selection.getSel().modify),Y0=(e,t,n)=>{const s=e?1:-1;return t.setRng(F(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},BH=(e,t)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n);return DH(t)?e&&mf(s)?Y0(!0,t.selection,s):!e&&pf(s)?Y0(!1,t.selection,s):!1:!1};var Us;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Us||(Us={}));const $c=(e,t)=>e===Ft.Backwards?it(t):t,$H=(e,t,n)=>e===Ft.Forwards?t.next(n):t.prev(n),IH=(e,t,n,s)=>Tt(s.getNode(t===Ft.Forwards))?Us.Br:Ps(n,s)===!1?Us.Block:Us.Wrap,X0=(e,t,n,s)=>{const o=Ds(n);let r=s;const i=[];for(;r;){const a=$H(t,o,r);if(!a)break;if(Tt(a.getNode(!1)))return t===Ft.Forwards?{positions:$c(t,i).concat([a]),breakType:Us.Br,breakAt:h.some(a)}:{positions:$c(t,i),breakType:Us.Br,breakAt:h.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=IH(n,t,r,a);return{positions:$c(t,i),breakType:c,breakAt:h.some(a)}}i.push(a),r=a}return{positions:$c(t,i),breakType:Us.Eol,breakAt:h.none()}},Q0=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Ft.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Hm=(e,t)=>Q(e,(n,s)=>n.fold(()=>h.some(s),o=>vn(Lt(o.getClientRects()),Lt(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),h.none()),Ic=(e,t)=>Lt(t.getClientRects()).bind(n=>Hm(e,n.left)),Ma=re(X0,F.isAbove,-1),Ua=re(X0,F.isBelow,1),Z0=re(Q0,-1,Ma),J0=re(Q0,1,Ua),FH=(e,t)=>Ma(e,t).breakAt.isNone(),LH=(e,t)=>Ua(e,t).breakAt.isNone(),MH=e=>dn(e).map(t=>[t].concat(Ua(e,t).positions)).getOr([]),UH=e=>Bs(e).map(t=>Ma(e,t).positions.concat(t)).getOr([]),zH=(e,t)=>Ic(Z0(e,t),t),HH=(e,t)=>Ic(J0(e,t),t),VH=vt,ew=(e,t)=>Math.abs(e.left-t),tw=(e,t)=>Math.abs(e.right-t),WH=e=>Ur(e,"node"),nw=(e,t)=>dl(e,(n,s)=>{const o=Math.min(ew(n,t),tw(n,t)),r=Math.min(ew(s,t),tw(s,t));return r===o&&WH(s)&&VH(s.node)||r<o?s:n}),jH=e=>{const t=n=>z(n,s=>{const o=lr(s);return o.node=e,o});if(Ee(e))return t(e.getClientRects());if(te(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},sw=e=>We(e,jH);var za;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(za||(za={}));const qH=(e,t,n,s)=>{for(;s=Ca(s,e,sb,t);)if(n(s))return},ow=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let C=sw([p]);e===-1&&(C=C.reverse());for(let y=0;y<C.length;y++){const w=C[y];if(!n(w,f)){if(a.length>0&&t(w,yo(a))&&i++,w.line=i,o(w))return!0;a.push(w)}}},f=yo(r.getClientRects());if(!f)return a;const d=r.getNode();return c(d),qH(e,s,c,d),a},KH=(e,t)=>t.line>e,GH=(e,t)=>t.line===e,YH=re(ow,za.Up,fa,da),XH=re(ow,za.Down,da,fa),QH=(e,t,n,s)=>{const o=Ds(t);let r,i,a,c;const f=[];let d=0;const p=y=>yo(y.getClientRects());e===1?(r=o.next,i=da,a=fa,c=F.after(s)):(r=o.prev,i=fa,a=da,c=F.before(s));const C=p(c);do{if(!c.isVisible())continue;const y=p(c);if(a(y,C))continue;f.length>0&&i(y,yo(f))&&d++;const w=lr(y);if(w.position=c,w.line=d,n(w))return f;f.push(w)}while(c=r(c));return f},rw=e=>t=>KH(e,t),Vm=e=>t=>GH(e,t),lo=(e,t)=>{e.selection.setRng(t),Na(e,e.selection.getRng())},Wm=(e,t,n)=>h.some(Dm(e,t,n)),iw=(e,t,n,s,o,r)=>{const i=t===Ft.Forwards,a=Ds(e.getBody()),c=re(Wf,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const w=Bl(n);if(r(w))return ao(t,e,w,t===Ft.Backwards,!1);if(Im(e)){const v=n.cloneRange();return v.collapse(t===Ft.Backwards),h.from(v)}}const d=Ea(t,e.getBody(),n);if(f(d))return La(e,d.getNode(!i));const p=zn(i,c(d)),C=eb(n);if(!p)return C?h.some(n):h.none();if(f(p))return ao(t,e,p.getNode(!i),i,!1);const y=c(p);return y&&f(y)&&Hl(p,y)?ao(t,e,y.getNode(!i),i,!1):C?Wm(e,p.toRange(),!1):h.none()},aw=(e,t,n,s,o,r)=>{const i=Ea(t,e.getBody(),n),a=yo(i.getClientRects()),c=t===za.Down,f=e.getBody();if(!a)return h.none();if(Im(e)){const x=c?F.fromRangeEnd(n):F.fromRangeStart(n);return(c?HH:zH)(f,x).orThunk(()=>h.from(x)).map(P=>P.toRange())}const p=(c?XH:YH)(f,rw(1),i),C=H(p,Vm(1)),y=a.left,w=nw(C,y);if(w&&r(w.node)){const x=Math.abs(y-w.left),_=Math.abs(y-w.right);return ao(t,e,w.node,x<_,!1)}let v;if(s(i)?v=i.getNode():o(i)?v=i.getNode(!0):v=Bl(n),v){const x=QH(t,f,rw(1),v);let _=nw(H(x,Vm(1)),y);if(_||(_=yo(H(x,Vm(0))),_))return Wm(e,_.position.toRange(),!1)}return C.length===0?jm(e,c).filter(c?o:s).map(x=>Dm(e,x.toRange(),!1)):h.none()},jm=(e,t)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n),o=eP(s.container(),e.getBody());if(t){const r=Ua(o,s);return Zs(r.positions)}else{const r=Ma(o,s);return Lt(r.positions)}},lw=(e,t,n)=>jm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Fc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},cw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},uw=(e,t,n)=>Mm(t,n).map(s=>(Fc(e,s),n)),ZH=(e,t,n)=>{const s=F.fromRangeStart(e);if(e.collapsed)return s;{const o=F.fromRangeEnd(e);return n?rs(t,o).getOr(o):Ln(t,s).getOr(s)}},JH=(e,t,n)=>{const s=e.getBody(),o=ZH(e.selection.getRng(),s,n),r=re(Cr,e);return OH(n,r,s,o).bind(a=>uw(e,t,a))},e3=(e,t,n)=>{const s=z(En(S.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=H(s,e),r=H(n,e);T(gt(o,r),re(cw,!1)),T(gt(r,o),re(cw,!0))},t3=(e,t)=>{if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){const n=F.fromRangeStart(e.selection.getRng());F.isTextPosition(n)&&c$(n)===!1&&(Fc(e,WR(t.get(),n)),t.set(null))}},n3=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=H(s,e);T(o,r=>{const i=F.fromRangeStart(t.selection.getRng());Ms(e,t.getBody(),i).bind(a=>uw(t,n,a))})}},fw=(e,t,n)=>ga(e)?JH(e,t,n).isSome():!1,dw=(e,t,n)=>ga(t)?BH(e,t):!1,s3=e=>{const t=Ut(null),n=re(Cr,e);return e.on("NodeChange",s=>{ga(e)&&(e3(n,e.dom,s.parents),t3(e,t),n3(n,e,t,s.parents))}),t},o3=re(dw,!0),r3=re(dw,!1),Lc=(e,t,n)=>{if(ga(e)){const s=jm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?F.fromRangeEnd(o):F.fromRangeStart(o)});return Ms(re(Cr,e),e.getBody(),s).exists(o=>{const r=Bc(o);return Mm(n,r).exists(i=>(Fc(e,i),!0))})}else return!1},i3=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},a3=e=>vn(dn(e),Bs(e),(t,n)=>{const s=zn(!0,t),o=zn(!1,n);return Ln(e,s).forall(r=>r.isEqual(o))}).getOr(!0),mw=(e,t)=>n=>Mm(t,n).map(s=>()=>Fc(e,s)),pw=(e,t,n,s)=>{const o=e.getBody(),r=re(Cr,e);e.undoManager.ignore(()=>{e.selection.setRng(i3(n,s)),$d(e),Ms(r,o,F.fromRangeStart(e.selection.getRng())).map(zm).bind(mw(e,t)).each(qo)}),e.nodeChanged()},l3=(e,t)=>{const n=Ro(t,e);return n||e},c3=(e,t,n,s)=>{const o=l3(e.getBody(),s.container()),r=re(Cr,e),i=Ms(r,o,s);return i.bind(c=>n?c.fold(K(h.some(zm(c))),h.none,K(h.some(Bc(c))),h.none):c.fold(h.none,K(h.some(Bc(c))),h.none,K(h.some(zm(c))))).map(mw(e,t)).getOrThunk(()=>{const c=Wl(n,o,s),f=c.bind(d=>Ms(r,o,d));return vn(i,f,()=>$o(r,o,s).bind(d=>a3(d)?h.some(()=>{br(e,n,S.fromDom(d))}):h.none())).getOrThunk(()=>f.bind(()=>c.map(d=>()=>{n?pw(e,t,s,d):pw(e,t,d,s)})))})},qm=(e,t,n)=>{if(e.selection.isCollapsed()&&ga(e)){const s=F.fromRangeStart(e.selection.getRng());return c3(e,t,n,s)}return h.none()},u3=(e,t)=>{const n=ro(t,e);return Ae(n,ns).fold(K(n),s=>n.slice(0,s))},f3=e=>Nh(e)===1,d3=(e,t,n,s)=>{const o=re(KI,t),r=z(H(s,o),i=>i.dom);if(r.length===0)br(t,e,n);else{const i=qI(n.dom,r);t.selection.setRng(i.toRange())}},m3=(e,t)=>{const n=S.fromDom(e.getBody()),s=S.fromDom(e.selection.getStart()),o=H(u3(n,s),f3);return Zs(o).bind(r=>{const i=F.fromRangeStart(e.selection.getRng());return p$(t,i,r.dom)&&!GI(r)?h.some(()=>d3(t,e,r,o)):h.none()})},Km=(e,t)=>e.selection.isCollapsed()?m3(e,t):h.none(),Gm=(e,t,n)=>h.some(()=>{e._selectionOverrides.hideFakeCaret(),br(e,t,S.fromDom(n))}),p3=(e,t)=>{const n=t?Ta:Ra,s=t?Ft.Forwards:Ft.Backwards,o=Ea(s,e.getBody(),e.selection.getRng());return n(o)?Gm(e,t,o.getNode(!t)):h.from(zn(t,o)).filter(r=>n(r)&&Hl(o,r)).map(r=>()=>Gm(e,t,r.getNode(!t)))},g3=(e,t)=>{const n=e.selection.getNode();return Ts(n)?Gm(e,t,n):h.none()},Ym=(e,t)=>e.selection.isCollapsed()?p3(e,t):g3(e,t),h3=e=>Gr(e,t=>As(t.dom)||vt(t.dom)).exists(t=>As(t.dom)),Xm=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},gw=(e,t)=>{const n=e||xA(t)?"margin":"padding",s=Ns(t,"direction")==="rtl"?"-right":"-left";return n+s},b3=(e,t,n,s,o,r)=>{const i=gw(n,S.fromDom(r));if(t==="outdent"){const a=Math.max(0,Xm(r.style[i])-s);e.setStyle(r,i,a?a+o:"")}else{const a=Xm(r.style[i])+s+o;e.setStyle(r,i,a)}},C3=(e,t)=>ot(t,n=>{const s=gw(uC(e),n),o=Cl(n,s).map(Xm).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),hw=e=>{const t=Cw(e);return!e.mode.isReadOnly()&&(t.length>1||C3(e,t))},bw=e=>df(e)||sa(e),y3=e=>Xn(e).exists(bw),Cw=e=>H(KN(e.selection.getSelectedBlocks()),t=>!bw(t)&&!y3(t)&&h3(t)),yw=(e,t)=>{const{dom:n}=e,s=j1(e),o=/[a-z%]+$/i.exec(s)[0],r=parseInt(s,10),i=uC(e);T(Cw(e),a=>{b3(n,t,i,r,o,a.dom)})},v3=e=>yw(e,"indent"),vw=e=>yw(e,"outdent"),Ew=e=>{if(e.selection.isCollapsed()&&hw(e)){const t=e.dom,n=e.selection.getRng(),s=F.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Td(S.fromDom(o),s))return h.some(()=>vw(e))}return h.none()},ww=(e,t,n)=>en([Ew,Fm,Bm,(s,o)=>qm(s,t,o),Pm,Vd,Lm,Ym,Om,Km],s=>s(e,n)),E3=(e,t)=>{ww(e,t,!1).fold(()=>{$d(e),Pv(e)},qo)},w3=(e,t)=>{ww(e,t,!0).fold(()=>u$(e),qo)},x3=(e,t)=>{e.addCommand("delete",()=>{E3(e,t)}),e.addCommand("forwardDelete",()=>{w3(e,t)})},xw=5,S3=400,Sw=e=>e.touches===void 0||e.touches.length!==1?h.none():h.some(e.touches[0]),_3=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>xw||s>xw},k3=e=>{const t=No(),n=Ut(!1),s=Af(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},S3);e.on("touchstart",o=>{Sw(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),Sw(o).each(r=>{t.on(i=>{_3(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},Qm=(e,t)=>Ie(e,t.nodeName),N3=(e,t)=>te(t)?!0:Ee(t)?!Qm(e,t)&&!Mn(t):!1,A3=(e,t,n)=>U(mv(S.fromDom(n),S.fromDom(t)),s=>Qm(e,s.dom)),T3=(e,t)=>{if(te(t)){if(t.nodeValue.length===0)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Qm(e,t.nextSibling)))return!0}return!1},R3=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements();let r=n.getStart();const i=e.getBody();let a,c,f;const d=wn(e);if(!r||!Ee(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||A3(o,i,r))return;const C=n.getRng(),y=C.startContainer,w=C.startOffset,v=C.endContainer,x=C.endOffset,_=gr(e);for(r=i.firstChild;r;)if(N3(o,r)){if(T3(o,r)){c=r,r=r.nextSibling,t.remove(c);continue}a||(a=t.create(d,ur(e)),r.parentNode.insertBefore(a,r),f=!0),c=r,r=r.nextSibling,a.appendChild(c)}else a=null,r=r.nextSibling;f&&_&&(C.setStart(y,w),C.setEnd(v,x),n.setRng(C),e.nodeChanged())},P3=e=>{e.on("NodeChange",re(R3,e))},_w=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,O3=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},D3=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],O3(e,o,bC(e)));n.content=o}},B3=e=>{const t="contenteditable",n=" "+G.trim(DR(e))+" ",s=" "+G.trim(bC(e))+" ",o=_w(n),r=_w(s),i=BR(e);i.length>0&&e.on("BeforeSetContent",a=>{D3(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];!o(f)&&!r(f)||(i.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},$3=e=>na(S.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),kw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(gf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},I3=(e,t)=>{const n=$3(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),kw(e,n);return}Jh(n)&&(kw(e,n),e.undoManager.add())}},F3=e=>{e.on("keyup compositionstart",re(I3,e))},Nw=vt,L3=(e,t,n)=>iw(t,e,n,Do,Bo,Nw),M3=(e,t,n)=>aw(t,e,n,r=>Do(r)||fv(r),r=>Bo(r)||dv(r),Nw),U3=e=>{const t=e.dom.create(wn(e));return t.innerHTML='<br data-mce-bogus="1">',t},Aw=(e,t,n)=>{const s=Ds(e.getBody()),o=re(Wf,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(F.fromRangeStart(n))){const a=S.fromDom(U3(e));t===1?Eo(S.fromDom(r),a):Qn(S.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},z3=(e,t)=>{const n=t?Ft.Forwards:Ft.Backwards,s=e.selection.getRng();return L3(n,e,s).orThunk(()=>(Aw(e,n,s),h.none()))},H3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return M3(n,e,s).orThunk(()=>(Aw(e,n,s),h.none()))},Tw=(e,t)=>z3(e,t).exists(n=>(lo(e,n),!0)),Rw=(e,t)=>H3(e,t).exists(n=>(lo(e,n),!0)),Pw=(e,t)=>lw(e,t,t?Bo:Do),Mc=(e,t)=>$m(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(lo(e,n),!0)),V3=e=>R(["figcaption"],yt(e)),W3=e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},j3=(e,t,n)=>{n?It(e,t):Ih(e,t)},q3=(e,t,n,s)=>{const o=S.fromTag(n),r=S.fromTag("br");return _s(o,s),It(o,r),j3(e,o,t),W3(r)},K3=(e,t)=>{const n=re(st,t);return Gr(S.fromDom(e.container()),ns,n).filter(V3)},G3=(e,t,n)=>t?LH(e.dom,n):FH(e.dom,n),Y3=(e,t)=>{const n=S.fromDom(e.getBody()),s=F.fromRangeStart(e.selection.getRng()),o=wn(e),r=ur(e);return K3(s,n).exists(()=>{if(G3(n,t,s)){const i=q3(n,t,o,r);return e.selection.setRng(i),!0}else return!1})},Ow=(e,t)=>e.selection.isCollapsed()?Y3(e,t):!1,Dw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},X3=e=>z(e,t=>({...Dw,action:Oe,...t})),Q3=e=>z(e,t=>({...Dw,action:()=>h.none(),...t})),Bw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Z3=(e,t)=>We(X3(e),n=>Bw(n,t)?[n]:[]),J3=(e,t)=>We(Q3(e),n=>Bw(n,t)?[n]:[]),Pe=(e,...t)=>()=>e.apply(null,t),Ha=(e,t)=>ge(Z3(e,t),n=>n.action()),$w=(e,t)=>en(J3(e,t),n=>n.action()),Iw=(e,t)=>{const n=t?Ft.Forwards:Ft.Backwards,s=e.selection.getRng();return iw(e,n,s,Ta,Ra,Ts).exists(o=>(lo(e,o),!0))},Fw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return aw(e,n,s,Ta,Ra,Ts).exists(o=>(lo(e,o),!0))},Lw=(e,t)=>lw(e,t,t?Ra:Ta),Mw=Rs.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Va={...Mw,none:e=>Mw.none(e)},e2=(e,t)=>Uw(e,t,ct),Uw=(e,t,n)=>We(Yt(e),s=>ks(s,t)?n(s)?[s]:[]:Uw(s,t,n)),t2=(e,t,n=pt)=>{if(n(t))return h.none();if(R(e,yt(t)))return h.some(t);const s=o=>ks(o,"table")||n(o);return ta(t,e.join(","),s)},n2=(e,t)=>t2(["td","th"],e,t),s2=e=>e2(e,"th,td"),zw=(e,t)=>nr(e,"table",t),Zm=(e,t,n,s,o=ct)=>{const r=s===1;if(!r&&n<=0)return Va.first(e[0]);if(r&&n>=e.length-1)return Va.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Va.middle(t,a):Zm(e,t,i,s,o)}},Hw=(e,t)=>zw(e,t).bind(n=>{const s=s2(n);return Ae(s,r=>st(e,r)).map(r=>({index:r,all:s}))}),o2=(e,t,n)=>Hw(e,n).fold(()=>Va.none(e),o=>Zm(o.all,e,o.index,1,t)),r2=(e,t,n)=>Hw(e,n).fold(()=>Va.none(),o=>Zm(o.all,e,o.index,-1,t)),i2=e=>nr(e,"[contenteditable]"),Vw=(e,t=!1)=>jr(e)?e.dom.isContentEditable:i2(e).fold(K(t),n=>a2(n)==="true"),a2=e=>e.dom.contentEditable,l2=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),c2=(e,t)=>We(t,n=>{const s=l2(lr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),u2=(e,t,n)=>Q(e,(s,o)=>s.fold(()=>h.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return h.some(a<i?o:r)}),h.none()),Ww=(e,t,n,s,o)=>{const r=En(S.fromDom(n),"td,th,caption").map(a=>a.dom),i=H(c2(e,r),a=>t(a,o));return u2(i,s,o).map(a=>a.cell)},f2=e=>e.bottom,d2=e=>e.top,m2=(e,t)=>e.y<t,p2=(e,t)=>e.y>t,g2=re(Ww,f2,m2),h2=re(Ww,d2,p2),b2=(e,t)=>Lt(t.getClientRects()).bind(n=>g2(e,n.left,n.top)).bind(n=>Ic(UH(n),t)),C2=(e,t)=>Zs(t.getClientRects()).bind(n=>h2(e,n.left,n.top)).bind(n=>Ic(MH(n),t)),y2=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),v2=e=>e.breakType===Us.Wrap&&e.positions.length===0,E2=e=>e.breakType===Us.Br&&e.positions.length===1,jw=(e,t,n)=>{const s=e(t,n);return v2(s)||!Tt(n.getNode())&&E2(s)?!y2(e,t,s):s.breakAt.isNone()},w2=re(jw,Ma),x2=re(jw,Ua),S2=(e,t,n)=>{const s=F.fromRangeStart(t);return li(!e,n).exists(o=>o.isEqual(s))},_2=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return _C()&&S2(t,o,n)?(ao(r,e,n,!t,!1).each(i=>{lo(e,i)}),!0):!1},k2=(e,t,n)=>b2(t,n).orThunk(()=>Lt(n.getClientRects()).bind(s=>Hm(Z0(e,F.before(t)),s.left))).getOr(F.before(t)),N2=(e,t,n)=>C2(t,n).orThunk(()=>Lt(n.getClientRects()).bind(s=>Hm(J0(e,F.after(t)),s.left))).getOr(F.after(t)),qw=(e,t)=>{const n=t.getNode(e);return Ee(n)&&n.nodeName==="TABLE"?h.some(n):h.none()},A2=(e,t,n)=>{const s=wn(t);t.undoManager.transact(()=>{const o=S.fromTag(s);_s(o,ur(t)),It(o,S.fromTag("br")),e?Eo(S.fromDom(n),o):Qn(S.fromDom(n),o);const r=t.dom.createRng();r.setStart(o.dom,0),r.setEnd(o.dom,0),lo(t,r)})},Kw=(e,t,n)=>{const s=qw(!!t,n),o=t===!1;s.fold(()=>lo(e,n.toRange()),r=>li(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>lo(e,n.toRange()),i=>A2(t,e,r)))},T2=(e,t,n,s)=>{const o=e.selection.getRng(),r=F.fromRangeStart(o),i=e.getBody();if(!t&&w2(s,r)){const a=k2(i,n,r);return Kw(e,t,a),!0}else if(t&&x2(s,r)){const a=N2(i,n,r);return Kw(e,t,a),!0}else return!1},Gw=(e,t,n)=>h.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>h.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),Yw=(e,t)=>Gw(e,t,_2),Xw=(e,t)=>Gw(e,t,T2),R2=e=>{const t=mi.exact(e,0,e,0);return MO(t)},Qw=(e,t,n)=>n.fold(h.none,h.none,(s,o)=>GD(o).map(r=>R2(r)),s=>(e.execCommand("mceTableInsertRowAfter"),Zw(e,t,s))),Zw=(e,t,n)=>Qw(e,t,o2(n,Vw)),P2=(e,t,n)=>Qw(e,t,r2(n,Vw)),Jw=(e,t)=>{const n=["table","li","dl"],s=S.fromDom(e.getBody()),o=a=>{const c=yt(a);return st(a,s)||R(n,c)},r=e.selection.getRng(),i=S.fromDom(t?r.endContainer:r.startContainer);return n2(i,o).map(a=>(zw(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?Zw:P2)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},O2=(e,t,n)=>{const s=Qe.os.isMacOS()||Qe.os.isiOS();Ha([{keyCode:pe.RIGHT,action:Pe(Tw,e,!0)},{keyCode:pe.LEFT,action:Pe(Tw,e,!1)},{keyCode:pe.UP,action:Pe(Rw,e,!1)},{keyCode:pe.DOWN,action:Pe(Rw,e,!0)},...s?[{keyCode:pe.UP,action:Pe(Mc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:pe.DOWN,action:Pe(Mc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:pe.RIGHT,action:Pe(Yw,e,!0)},{keyCode:pe.LEFT,action:Pe(Yw,e,!1)},{keyCode:pe.UP,action:Pe(Xw,e,!1)},{keyCode:pe.DOWN,action:Pe(Xw,e,!0)},{keyCode:pe.RIGHT,action:Pe(Iw,e,!0)},{keyCode:pe.LEFT,action:Pe(Iw,e,!1)},{keyCode:pe.UP,action:Pe(Fw,e,!1)},{keyCode:pe.DOWN,action:Pe(Fw,e,!0)},{keyCode:pe.RIGHT,action:Pe(fw,e,t,!0)},{keyCode:pe.LEFT,action:Pe(fw,e,t,!1)},{keyCode:pe.RIGHT,ctrlKey:!s,altKey:s,action:Pe(o3,e,t)},{keyCode:pe.LEFT,ctrlKey:!s,altKey:s,action:Pe(r3,e,t)},{keyCode:pe.UP,action:Pe(Ow,e,!1)},{keyCode:pe.DOWN,action:Pe(Ow,e,!0)}],n).each(o=>{n.preventDefault()})},D2=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&O2(e,t,n)})},cs=(e,t)=>({container:e,offset:t}),Uc=at.DOM,zc=e=>t=>e===t?-1:0,B2=e=>t=>e.isBlock(t)||R(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Jm=(e,t,n)=>{if(te(e)&&t>=0)return h.some(cs(e,t));{const s=ar(Uc);return h.from(s.backwards(e,t,zc(e),n)).map(o=>cs(o.container,o.container.data.length))}},$2=(e,t,n)=>{if(te(e)&&t>=e.length)return h.some(cs(e,t));{const s=ar(Uc);return h.from(s.forwards(e,t,zc(e),n)).map(o=>cs(o.container,0))}},ep=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t>=0&&t<=s.length)return h.some(cs(e,t));{const o=ar(Uc);return h.from(o.backwards(e,t,zc(e),n)).bind(r=>{const i=r.container.data;return ep(r.container,t+i.length,n)})}},ex=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t<=s.length)return h.some(cs(e,t));{const o=ar(Uc);return h.from(o.forwards(e,t,zc(e),n)).bind(r=>ex(r.container,t-s.length,n))}},tp=(e,t,n,s,o)=>{const r=ar(e,B2(e));return h.from(r.backwards(t,n,s,o))},I2=e=>e.collapsed&&e.startContainer.nodeType===3,tx=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),nx=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,np=(e,t)=>e.substring(t.length),F2=(e,t,n)=>{let s;for(s=t-1;s>=0;s--){const o=e.charAt(s);if(nx(o))return h.none();if(o===n)break}return h.some(s)},L2=(e,t,n,s=0)=>{if(!I2(t))return h.none();const o=(i,a,c)=>F2(c,a,n).getOr(a),r=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return tp(e,t.startContainer,t.startOffset,o,r).bind(i=>{const a=t.cloneRange();if(a.setStart(i.container,i.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return h.none();const c=tx(a);return c.lastIndexOf(n)!==0||np(c,n).length<s?h.none():h.some({text:np(c,n),range:a,triggerChar:n})})},sx=(e,t,n,s=0)=>ZD(S.fromDom(t.startContainer)).fold(()=>L2(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=tx(r);return h.some({range:r,text:np(i,n),triggerChar:n})}),M2=e=>e.nodeType===fh,U2=e=>e.nodeType===qi,ox=e=>{if(M2(e))return cs(e,e.data.length);{const t=e.childNodes;return t.length>0?ox(t[t.length-1]):cs(e,t.length)}},rx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?rx(n[t],0):n.length>0&&U2(e)&&n.length===t?ox(n[n.length-1]):cs(e,t)},z2=(e,t)=>{const n=e.getParent(t.container,e.isBlock);return tp(e,t.container,t.offset,(s,o)=>o===0?-1:o,n).filter(s=>{const o=s.container.data.charAt(s.offset-1);return!nx(o)}).isSome()},H2=e=>t=>{const n=rx(t.startContainer,t.startOffset);return!z2(e,n)},V2=(e,t,n)=>en(n.triggerChars,s=>sx(e,t,s)),W2=(e,t)=>{const n=t(),s=e.selection.getRng();return V2(e.dom,s,n).bind(o=>ix(e,t,o))},ix=(e,t,n,s={})=>{const o=t(),i=e.selection.getRng().startContainer.nodeValue,a=H(o.lookupByChar(n.triggerChar),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>H2(e.dom))(n.range,i,n.text));if(a.length===0)return h.none();const c=Promise.all(z(a,f=>f.fetch(n.text,f.maxResults,s).then(p=>({matchText:n.text,items:p,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return h.some({lookupData:c,context:n})};var us;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(us||(us={}));const sp=(e,t,n)=>e.stype===us.Error?t(e.serror):n(e.svalue),j2=e=>{const t=[],n=[];return T(e,s=>{sp(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},q2=(e,t)=>e.stype===us.Error?{stype:us.Error,serror:t(e.serror)}:e,K2=(e,t)=>e.stype===us.Value?{stype:us.Value,svalue:t(e.svalue)}:e,G2=(e,t)=>e.stype===us.Value?t(e.svalue):e,Y2=(e,t)=>e.stype===us.Error?t(e.serror):e,ax=e=>({stype:us.Value,svalue:e}),lx=e=>({stype:us.Error,serror:e}),Ht={fromResult:e=>e.fold(lx,ax),toResult:e=>sp(e,fn.error,fn.value),svalue:ax,partition:j2,serror:lx,bind:G2,bindError:Y2,map:K2,mapError:q2,fold:sp},op=e=>ft(e)&&Gn(e).length>100?" removed due to size":JSON.stringify(e,null,2),X2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return z(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Hc=(e,t)=>Ht.serror([{path:e,getErrorInfo:t}]),Q2=(e,t,n)=>Hc(e,()=>'Could not find valid *required* value for "'+t+'" in '+op(n)),Z2=(e,t)=>Hc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),J2=(e,t,n)=>Hc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+op(t)),eV=(e,t)=>Hc(e,K(t)),tV=(e,t,n,s)=>ut(n,s).fold(()=>J2(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),nV=(e,t)=>({extract:(o,r)=>ut(r,e).fold(()=>Z2(o,e),a=>tV(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+Gn(t)}),sV=(e,t)=>t,oV=(e,t)=>Ys(e)&&Ys(t)?Vc(e,t):t,cx=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Ie(o,r)&&(n[r]=e(n[r],o[r]))}return n},Vc=cx(oV),rV=cx(sV),ux=()=>({tag:"required",process:{}}),iV=e=>({tag:"defaultedThunk",process:e}),fx=e=>iV(K(e)),aV=()=>({tag:"option",process:{}}),lV=(e,t)=>e.length>0?Ht.svalue(Vc(t,rV.apply(void 0,e))):Ht.svalue(t),dx=e=>Ot(Ht.serror,Ue)(e),cV={consolidateObj:(e,t)=>{const n=Ht.partition(e);return n.errors.length>0?dx(n.errors):lV(n.values,t)},consolidateArr:e=>{const t=Ht.partition(e);return t.errors.length>0?dx(t.errors):Ht.svalue(t.values)}},uV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),fV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),mx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},rp=e=>{const t=(s,o)=>Ht.bindError(e(o),r=>eV(s,r)),n=K("val");return{extract:t,toString:n}},dV=rp(Ht.svalue),mV=(e,t,n,s)=>ut(t,n).fold(()=>Q2(e,n,t),s),px=(e,t,n,s)=>{const o=ut(e,t).getOrThunk(()=>n(e));return s(o)},pV=(e,t,n)=>n(ut(e,t)),gV=(e,t,n,s)=>{const o=ut(e,t).map(r=>r===!0?n(e):r);return s(o)},hV=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>Ht.svalue(h.none()),c=>{const f=o.extract(t.concat([s]),c);return Ht.map(f,h.some)});switch(e.tag){case"required":return mV(t,n,s,r);case"defaultedThunk":return px(n,s,e.process,r);case"option":return pV(n,s,i);case"defaultedOptionThunk":return gV(n,s,e.process,i);case"mergeWithThunk":return px(n,s,K({}),a=>{const c=Vc(e.process(n),a);return r(c)})}},bV=(e,t,n)=>{const s={},o=[];for(const r of n)mx(r,(i,a,c,f)=>{const d=hV(c,e,t,i,f);Ht.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?Ht.serror(o):Ht.svalue(s)},ip=e=>({extract:(s,o)=>bV(s,o,e),toString:()=>{const s=z(e,o=>mx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),gx=e=>({extract:(s,o)=>{const r=z(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return cV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),CV=e=>rp(t=>e(t).fold(Ht.serror,Ht.svalue)),yV=(e,t,n)=>{const s=t.extract([e],n);return Ht.mapError(s,o=>({input:n,errors:o}))},vV=(e,t,n)=>Ht.toResult(yV(e,t,n)),EV=e=>`Errors: 
`+X2(e.errors).join(`
`)+`

Input object: `+op(e.input),hx=(e,t)=>nV(e,Hi(t,ip)),wV=K(dV),Wc=(e,t)=>rp(n=>{const s=typeof n;return e(n)?Ht.svalue(n):Ht.serror(`Expected type: ${t} but got: ${s}`)}),xV=Wc(Cn,"number"),jc=Wc(me,"string"),SV=Wc(qn,"boolean"),ap=Wc(Ge,"function"),Wa=uV,bx=fV,_V=e=>CV(t=>R(e,t)?fn.value(t):fn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Cx=(e,t)=>Wa(e,e,ux(),t),yx=e=>Cx(e,jc),vx=e=>Cx(e,ap),kV=(e,t)=>Wa(e,e,ux(),gx(t)),lp=(e,t)=>Wa(e,e,aV(),t),qc=e=>lp(e,jc),NV=e=>lp(e,ap),AV=(e,t)=>Wa(e,e,fx(t),wV()),wi=(e,t,n)=>Wa(e,e,fx(t),n),Ex=(e,t)=>wi(e,t,xV),TV=(e,t)=>wi(e,t,jc),wx=(e,t,n)=>wi(e,t,_V(n)),cp=(e,t)=>wi(e,t,SV),up=(e,t)=>wi(e,t,ap),RV=(e,t,n)=>wi(e,t,gx(n)),PV=yx("type"),OV=vx("fetch"),fp=vx("onAction"),DV=up("onSetup",()=>Oe),BV=qc("text"),$V=qc("icon"),IV=qc("tooltip"),FV=qc("label"),LV=cp("active",!1),MV=cp("enabled",!0),xx=cp("primary",!1),UV=e=>AV("columns",e),ja=e=>TV("type",e),zV=ip([PV,yx("ch"),Ex("minChars",1),UV(1),Ex("maxResults",10),NV("matches"),OV,fp,RV("highlightOn",[],jc)]),HV=e=>vV("Autocompleter",zV,e),dp=[MV,IV,$V,BV,DV],Sx=[LV].concat(dp),VV=[up("predicate",pt),wx("scope","node",["node","editor"]),wx("position","selection",["node","selection","line"])],WV=dp.concat([ja("contextformbutton"),xx,fp,bx("original",wt)]),jV=Sx.concat([ja("contextformbutton"),xx,fp,bx("original",wt)]),qV=dp.concat([ja("contextformbutton")]),KV=Sx.concat([ja("contextformtogglebutton")]),GV=hx("type",{contextformbutton:WV,contextformtogglebutton:jV});ip([ja("contextform"),up("initValue",K("")),FV,kV("commands",GV),lp("launch",hx("type",{contextformbutton:qV,contextformtogglebutton:KV}))].concat(VV));const YV=e=>{const t=e.ui.registry.getAll().popups,n=Hi(t,i=>HV(i).fold(a=>{throw new Error(EV(a))},wt)),s=Og(Wu(n,i=>i.ch)),o=ju(n);return{dataset:n,triggerChars:s,lookupByChar:i=>H(o,a=>a.ch===i)}},XV=(e,t)=>{const n=Af(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},QV=e=>{const t=No(),n=Ut(!1),s=t.isSet,o=()=>{s()&&(QM(e),fO(e),n.set(!1),t.clear())},r=f=>{s()||(XM(e,f.range),t.set({triggerChar:f.triggerChar,matchLength:f.text.length}))},i=Ko(()=>YV(e)),a=f=>t.get().map(d=>sx(e.dom,e.selection.getRng(),d.triggerChar).bind(p=>ix(e,i,p,f))).getOrThunk(()=>W2(e,i)),c=f=>{a(f).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(C=>{const y=d.context;C.triggerChar===y.triggerChar&&(y.text.length-C.matchLength>=10?o():(t.set({...C,matchLength:y.text.length}),n.get()?uO(e,{lookupData:p}):(n.set(!0),cO(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(f,d)=>{const p=ft(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),XV(e,{cancelIfNecessary:o,load:c})},_x=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Oe,inputType:n},i=pb(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},mp=_x("input"),pp=_x("beforeinput"),ZV=(e,t,n)=>{const s=n.keyCode===pe.BACKSPACE?"deleteContentBackward":"deleteContentForward";$w([{keyCode:pe.BACKSPACE,action:Pe(Ew,e)},{keyCode:pe.BACKSPACE,action:Pe(Fm,e,!1)},{keyCode:pe.DELETE,action:Pe(Fm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Bm,e,!1)},{keyCode:pe.DELETE,action:Pe(Bm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(qm,e,t,!1)},{keyCode:pe.DELETE,action:Pe(qm,e,t,!0)},{keyCode:pe.BACKSPACE,action:Pe(Vd,e,!1)},{keyCode:pe.DELETE,action:Pe(Vd,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Lm,e,!1)},{keyCode:pe.DELETE,action:Pe(Lm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Ym,e,!1)},{keyCode:pe.DELETE,action:Pe(Ym,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Om,e,!1)},{keyCode:pe.DELETE,action:Pe(Om,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Pm,e,!1)},{keyCode:pe.DELETE,action:Pe(Pm,e,!0)},{keyCode:pe.BACKSPACE,action:Pe(Km,e,!1)},{keyCode:pe.DELETE,action:Pe(Km,e,!0)}],n).each(o=>{n.preventDefault(),pp(e,s).isDefaultPrevented()||(o(),mp(e,s))})},JV=(e,t)=>{Ha([{keyCode:pe.BACKSPACE,action:Pe(L0,e)},{keyCode:pe.DELETE,action:Pe(L0,e)}],t)},eW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&ZV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()===!1&&JV(e,n)})},tW=e=>{for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},qa=(e,t)=>{let n,s=t;const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=tW(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Xt),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new Dt(t,t);for(;n=a.current();){if(te(n)){i.setStart(n,0),i.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}s=n,n=a.next()}n||(i.setStart(s,0),i.setEnd(s,0))}else Tt(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),Na(e,i)},nW=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},gp=e=>h.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),sW=e=>gp(e).fold(K(""),t=>t.nodeName.toUpperCase()),oW=e=>gp(e).filter(t=>sa(S.fromDom(t))).isSome(),rW=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,iW=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},kx=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,Nx=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),aW=e=>Nx(e)&&Nx(e.parentNode),Kc=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Gc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Ee(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},lW=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng();if(n===e.getBody())return;aW(n)&&(o="LI");let a=t(o);if(Gc(n,s,!0)&&Gc(n,s,!1))if(kx(n,"LI")){const c=Kc(n);r.insertAfter(a,c),iW(n)?r.remove(c):r.remove(n)}else r.replace(a,n);else if(Gc(n,s,!0))kx(n,"LI")?(r.insertAfter(a,Kc(n)),a.appendChild(r.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),r.remove(s);else if(Gc(n,s,!1))r.insertAfter(a,Kc(n)),r.remove(s);else{n=Kc(n);const c=i.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&rW(f,"LI")?(a=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(a,n)),r.remove(s)}qa(e,a)},cW=e=>{T(Cb(S.fromDom(e),Bn),t=>{const n=t.dom;n.nodeValue=xo(n.nodeValue)})},uW=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),fW=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),hp=e=>{e.innerHTML='<br data-mce-bogus="1">'},bp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Ax=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",dW=(e,t,n)=>{let s=n;const o=[];let r;if(!!s){for(;s=s.firstChild;){if(e.isBlock(s))return;Ee(s)&&!t[s.nodeName.toLowerCase()]&&o.push(s)}for(r=o.length;r--;)s=o[r],(!s.hasChildNodes()||s.firstChild===s.lastChild&&s.firstChild.nodeValue===""||uW(e,s))&&e.remove(s)}},Cp=(e,t,n)=>te(t)===!1?n:e?n===1&&t.data.charAt(n-1)===Wt?0:n:n===t.data.length-1&&t.data.charAt(n)===Wt?t.data.length:n,mW=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Cp(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Cp(!1,e.endContainer,e.endOffset)),t},pW=e=>{do te(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},Tx=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},gW=(e,t,n)=>{const s=e.dom;h.from(n.style).map(s.parseStyle).each(c=>{const d={...Bh(S.fromDom(t)),...c};s.setStyles(t,d)});const o=h.from(n.class).map(c=>c.split(/\s+/)),r=h.from(t.className).map(c=>H(c.split(/\s+/),f=>f!==""));vn(o,r,(c,f)=>{const d=H(f,C=>!R(c,C)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=Vi(n,(c,f)=>!R(i,f));s.setAttribs(t,a)},Ka=(e,t)=>{if(wn(e).toLowerCase()===t.tagName.toLowerCase()){const s=ur(e);gW(e,t,s)}},hW=(e,t,n,s,o)=>{let r,i,a,c,f,d;const p=e.dom,C=Tx(p,s);if(i=p.getParent(s,p.isBlock),!i||!Ax(p,i)){if(i=i||C,i===e.getBody()||fW(i)?d=i.nodeName.toLowerCase():d=i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return r=p.create(t),Ka(e,r),i.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(c=s;c.parentNode!==i;)c=c.parentNode;for(;c&&!p.isBlock(c);)a=c,c=c.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(r=p.create(t),Ka(e,r),a.parentNode.insertBefore(r,a),c=a;c&&!p.isBlock(c);)f=c.nextSibling,r.appendChild(c),c=f;n.setStart(s,o),n.setEnd(s,o)}}return s},bW=(e,t)=>{t.normalize();const n=t.lastChild;(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},CW=(e,t)=>{const n=I1(e);return $t(t)?!1:me(n)?R(G.explode(n),t.nodeName.toLowerCase()):n},Rx={insert:(e,t)=>{let n,s,o,r,i,a,c,f,d;const p=e.dom,C=e.schema,y=C.getNonEmptyElements(),w=e.selection.getRng(),v=wn(e),x=V=>{let j=s,X,J,ve;const ue=C.getTextInlineElements();if(V||f==="TABLE"||f==="HR"?X=p.create(V||v):X=r.cloneNode(!1),ve=X,$1(e)===!1)p.setAttrib(X,"style",null),p.setAttrib(X,"class",null);else do if(ue[j.nodeName]){if($s(j)||Mn(j))continue;J=j.cloneNode(!1),p.setAttrib(J,"id",""),X.hasChildNodes()?(J.appendChild(X.firstChild),X.appendChild(J)):(ve=J,X.appendChild(J))}while((j=j.parentNode)&&j!==M);return Ka(e,X),hp(ve),X},_=V=>{let j,X;const J=Cp(V,s,o);if(te(s)&&(V?J>0:J<s.nodeValue.length))return!1;if(s.parentNode===r&&d&&!V||V&&Ee(s)&&s===r.firstChild)return!0;if(bp(s,"TABLE")||bp(s,"HR"))return d&&!V||!d&&V;const ve=new Dt(s,r);for(te(s)&&(V&&J===0?ve.prev():!V&&J===s.nodeValue.length&&ve.next());j=ve.current();){if(Ee(j)){if(!j.getAttribute("data-mce-bogus")&&(X=j.nodeName.toLowerCase(),y[X]&&X!=="br"))return!1}else if(te(j)&&!sr(j.nodeValue))return!1;V?ve.prev():ve.next()}return!0},P=()=>{/^(H[1-6]|PRE|FIGURE)$/.test(f)&&ce!=="HGROUP"?i=x(v):i=x(),CW(e,c)&&Ax(p,c)&&p.isEmpty(r)?i=p.split(c,r):p.insertAfter(i,r),qa(e,i)};nc(p,w).each(V=>{w.setStart(V.startContainer,V.startOffset),w.setEnd(V.endContainer,V.endOffset)}),s=w.startContainer,o=w.startOffset;const O=!!(t&&t.shiftKey),I=!!(t&&t.ctrlKey);Ee(s)&&s.hasChildNodes()&&(d=o>s.childNodes.length-1,s=s.childNodes[Math.min(o,s.childNodes.length-1)]||s,d&&te(s)?o=s.nodeValue.length:o=0);const M=Tx(p,s);if(!M)return;O||(s=hW(e,v,w,s,o)),r=p.getParent(s,p.isBlock),c=r?p.getParent(r.parentNode,p.isBlock):null,f=r?r.nodeName.toUpperCase():"";const ce=c?c.nodeName.toUpperCase():"";if(ce==="LI"&&!I&&(r=c,c=c.parentNode,f=ce),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(r)){lW(e,x,c,r,v);return}r!==e.getBody()&&(Qr(r)?(i=gf(r),p.isEmpty(r)&&hp(r),Ka(e,i),qa(e,i)):_()?P():_(!0)?(i=r.parentNode.insertBefore(x(),r),qa(e,bp(r,"HR")?i:r)):(n=mW(w).cloneRange(),n.setEndAfter(r),a=n.extractContents(),cW(a),pW(a),i=a.firstChild,p.insertAfter(a,r),dW(p,y,i),bW(p,r),p.isEmpty(r)&&hp(r),i.normalize(),p.isEmpty(i)?(p.remove(i),P()):(Ka(e,i),qa(e,i))),p.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},fakeEventName:"insertParagraph"},yW=(e,t,n)=>{const s=new Dt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||o.length>0)return!0},Px=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Na(e,s)},vW=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i;nc(s,o).each(y=>{o.setStart(y.startContainer,y.startOffset),o.setEnd(y.endContainer,y.endOffset)});let a=o.startOffset,c=o.startContainer;if(c.nodeType===1&&c.hasChildNodes()){const y=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,y&&c.nodeType===3?a=c.nodeValue.length:a=0}let f=s.getParent(c,s.isBlock);const d=f?s.getParent(f.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",C=!!(t&&t.ctrlKey);p==="LI"&&!C&&(f=d),c&&c.nodeType===3&&a>=c.nodeValue.length&&(yW(e.schema,c,f)||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Df(s,o,r),Px(e,r,i),e.undoManager.add()},EW=(e,t)=>{const n=S.fromTag("br");Qn(S.fromDom(t),n),e.undoManager.add()},wW=(e,t)=>{SW(e.getBody(),t)||Eo(S.fromDom(t),S.fromTag("br"));const n=S.fromTag("br");Eo(S.fromDom(t),n),Px(e,n.dom,!1),e.undoManager.add()},xW=e=>Tt(e.getNode()),SW=(e,t)=>xW(F.after(t))?!0:Ln(e,F.after(t)).map(n=>Tt(n.getNode())).getOr(!1),Ox=e=>e&&e.nodeName==="A"&&"href"in e,_W=e=>e.fold(pt,Ox,Ox,pt),kW=e=>{const t=re(Cr,e),n=F.fromRangeStart(e.selection.getRng());return Ms(t,e.getBody(),n).filter(_W)},NW=(e,t)=>{t.fold(Oe,re(EW,e),re(wW,e),Oe)},Dx={insert:(e,t)=>{const n=kW(e);n.isSome()?n.each(re(NW,e)):vW(e,t)},fakeEventName:"insertLineBreak"},Bx=(e,t)=>gp(e).filter(n=>t.length>0&&ks(S.fromDom(n),t)).isSome(),AW=e=>Bx(e,D1(e)),TW=e=>Bx(e,B1(e)),es=Rs.generate([{br:[]},{block:[]},{none:[]}]),RW=(e,t)=>TW(e),$x=e=>(t,n)=>oW(t)===e,Ix=(e,t)=>(n,s)=>sW(n)===e.toUpperCase()===t,Yc=e=>Ix("pre",e),PW=()=>Ix("summary",!0),Xc=e=>(t,n)=>P1(t)===e,OW=(e,t)=>AW(e),Qc=(e,t)=>t,DW=e=>{const t=wn(e),n=nW(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},fs=(e,t)=>(n,s)=>Q(e,(r,i)=>r&&i(n,s),!0)?h.some(t):h.none(),BW=(e,t)=>W0([fs([RW],es.none()),fs([PW()],es.br()),fs([Yc(!0),Xc(!1),Qc],es.br()),fs([Yc(!0),Xc(!1)],es.block()),fs([Yc(!0),Xc(!0),Qc],es.block()),fs([Yc(!0),Xc(!0)],es.br()),fs([$x(!0),Qc],es.br()),fs([$x(!0)],es.block()),fs([OW],es.br()),fs([Qc],es.br()),fs([DW],es.block())],[e,!!(t&&t.shiftKey)]).getOr(es.none()),Zc=(e,t,n)=>{t.selection.isCollapsed()||$d(t),!(ke(n)&&pp(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),ke(n)&&mp(t,e.fakeEventName))},Fx=(e,t)=>{const n=()=>Zc(Dx,e,t),s=()=>Zc(Rx,e,t),o=BW(e,t);switch(O1(e)){case"linebreak":o.fold(n,n,Oe);break;case"block":o.fold(s,s,Oe);break;case"invert":o.fold(s,n,Oe);break;default:o.fold(n,s,Oe);break}},$W=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),lM(e.undoManager),e.undoManager.transact(()=>{Fx(e,t)}))},IW=e=>{e.on("keydown",t=>{t.keyCode===pe.ENTER&&$W(e,t)})},FW=(e,t,n)=>{const s=Qe.os.isMacOS()||Qe.os.isiOS();Ha([{keyCode:pe.END,action:Pe(Pw,e,!0)},{keyCode:pe.HOME,action:Pe(Pw,e,!1)},...s?[]:[{keyCode:pe.HOME,action:Pe(Mc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:pe.END,action:Pe(Mc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:pe.END,action:Pe(Lw,e,!0)},{keyCode:pe.HOME,action:Pe(Lw,e,!1)},{keyCode:pe.END,action:Pe(Lc,e,!0,t)},{keyCode:pe.HOME,action:Pe(Lc,e,!1,t)}],n).each(o=>{n.preventDefault()})},LW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&FW(e,t,n)})},MW=e=>{e.on("input",t=>{t.isComposing===!1&&HB(e)})},UW=Go(),zW=(e,t,n)=>{Ha([{keyCode:pe.PAGE_UP,action:Pe(Lc,e,!1,t)},{keyCode:pe.PAGE_DOWN,action:Pe(Lc,e,!0,t)}],n)},Lx=e=>e.stopImmediatePropagation(),Mx=e=>e.keyCode===pe.PAGE_UP||e.keyCode===pe.PAGE_DOWN,Ux=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",Lx,!0):!n&&e.get()&&t.off("NodeChange",Lx),e.set(n)},HW=(e,t)=>{if(UW.os.isMacOS())return;const n=Ut(!1);e.on("keydown",s=>{Mx(s)&&Ux(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()===!1&&zW(e,t,s),Mx(s)&&n.get()&&(Ux(n,e,!1),e.nodeChanged())})},zx=(e,t)=>{const n=t.container(),s=t.offset();return te(n)?(n.insertData(s,e),h.some(F(n,s+e.length))):zl(t).map(o=>{const r=S.fromText(e);return t.isAtEnd()?Eo(o,r):Qn(o,r),F(r.dom,e.length)})},VW=re(zx,Xt),WW=re(zx," "),jW=e=>t=>t.fold(n=>rs(e.dom,F.before(n)),n=>dn(n),n=>Bs(n),n=>Ln(e.dom,F.after(n))),qW=(e,t)=>n=>BB(e,n)?VW(t):WW(t),KW=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),GW=e=>{const t=F.fromRangeStart(e.selection.getRng()),n=S.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(Cr,e),o=F.fromRangeStart(e.selection.getRng());return Ms(s,e.getBody(),o).bind(jW(n)).map(r=>()=>qW(n,t)(r).each(KW(e)))}else return h.none()},YW=(e,t)=>{$w([{keyCode:pe.SPACEBAR,action:Pe(GW,e)}],t).each(n=>{t.preventDefault(),pp(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),mp(e,"insertText",{data:" "}))})},XW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&YW(e,t)})},QW=e=>LR(e)?[{keyCode:pe.TAB,action:Pe(Jw,e,!0)},{keyCode:pe.TAB,shiftKey:!0,action:Pe(Jw,e,!1)}]:[],ZW=(e,t)=>{Ha([...QW(e)],t).each(n=>{t.preventDefault()})},JW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&ZW(e,t)})},e6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),QV(e),io(e))return Ut(null);{const t=s3(e);return F3(e),D2(e,t),eW(e,t),IW(e),XW(e),MW(e),JW(e),LW(e,t),HW(e,t),t}};class t6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!md(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||Zl(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Zl(t)&&(t.selection.getNode().nodeName==="IMG"?Un.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t){const n=this.editor.selection;let s,o,r;this.editor.initialized&&n&&!uR(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),s=n.getStart(!0)||r,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,r))&&(s=r),o=[],this.editor.dom.getParent(s,i=>{if(i===r)return!0;o.push(i)}),t=t||{},t.element=s,t.parents=o,this.editor.dispatch("NodeChange",t))}isSameElementPath(t){let n;const s=this.editor,o=it(s.dom.getParents(t,ct,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Hx="x-tinymce/html",Jc=K(Hx),yp="<!-- "+Hx+" -->",n6=e=>yp+e,s6=e=>e.replace(yp,""),Vx=e=>e.indexOf(yp)!==-1,o6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),r6=(e,t)=>{let n="<"+e;const s=Wu(t,(o,r)=>r+'="'+So.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},i6=(e,t,n)=>{const s=e.split(/\n\n/),o=r6(t,n),r="</"+t+">",i=z(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:z(i,a).join("")},Wx="%MCEPASTEBIN%",a6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Wx);Qe.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},l6=(e,t)=>{const n=e.dom;if(vp(e)){let s;const o=t.get();for(;s=vp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},vp=e=>e.dom.get("mcepastebin"),c6=e=>e&&e.id==="mcepastebin",u6=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=H(e.getBody().childNodes,c6);T(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},jx=e=>e===Wx,f6=e=>{const t=Ut(null);return{create:()=>a6(e,t),remove:()=>l6(e,t),getEl:()=>vp(e),getHtml:()=>u6(e),getLastRng:t.get}},qx=(e,t)=>(G.each(t,n=>{Dn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),d6=e=>{const t=ko(),n=bi({},t);let s="";const o=t.getVoidElements(),r=G.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,d=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())&&(c=c.firstChild))do a(c);while(c=c.next);i[f]&&d.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=qx(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},Kx=e=>(e=qx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Xt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),m6=e=>{let t=0;return()=>e+t++},p6=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(n,t)?"image/"+n[t]:"image/"+t},g6=(e,t)=>{const n=bi({},e.schema);n.addNodeFilter("meta",o=>{G.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Po({validate:!0},e.schema).serialize(s)},Gx=(e,t)=>({content:e,cancelled:t}),h6=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=mO(e,s,n);return Gx(o.node.innerHTML,o.isDefaultPrevented())},b6=(e,t,n)=>{const s=dO(e,t,n),o=g6(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?h6(e,o,n):Gx(o,s.isDefaultPrevented())},C6=(e,t,n)=>b6(e,t,n),Ep=(e,t)=>(e.insertContent(t,{merge:AR(e),paste:!0}),!0),wp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),y6=(e,t)=>wp(t)&&U(CC(e),n=>Lg(t.toLowerCase(),`.${n.toLowerCase()}`)),v6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),E6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),w6=(e,t,n)=>!e.selection.isCollapsed()&&wp(t)?E6(e,t,n):!1,x6=(e,t,n)=>y6(e,t)?v6(e,t,n):!1,S6=(e,t)=>{G.each([w6,x6,Ep],n=>n(e,t,Ep)!==!0)},_6=(e,t,n)=>{n||!TR(e)?Ep(e,t):S6(e,t)},k6=m6("mceclip"),Yx=(e,t,n,s)=>{const o=C6(e,t,n);o.cancelled===!1&&_6(e,o.content,s)},eu=(e,t,n)=>{const s=n||Vx(t);Yx(e,s6(t),s,!1)},xp=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=rb(n,PR(e)),o=i6(s,wn(e),ur(e));Yx(e,o,!1,!0)},Xx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},xi=(e,t)=>t in e&&e[t].length>0,Qx=e=>xi(e,"text/html")||xi(e,"text/plain"),N6=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ke(n)?e.dom.encode(n[1]):null},A6=(e,t,n,s)=>{const o=k6(),r=aC(e)&&ke(n.name),i=r?N6(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},T6=(e,t)=>{Cm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),f=c!=null?c:A6(e,a,i,r);eu(e,`<img src="${f.blobUri()}">`,!1)})},R6=e=>e.type==="paste",P6=e=>Promise.all(z(e,t=>DE(t).then(n=>({file:t,uri:n})))),O6=e=>{const t=CC(e);return n=>qt(n.type,"image/")&&U(t,s=>p6(s)===n.type)},D6=(e,t)=>{const n=t.items?We(ht(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?ht(t.files):[];return H(n.length>0?n:s,O6(e))},Zx=(e,t,n)=>{const s=R6(t)?t.clipboardData:t.dataTransfer;if(Ml(e)&&s){const o=D6(e,s);if(o.length>0)return t.preventDefault(),P6(o).then(r=>{n&&e.selection.setRng(n),T(r,i=>{T6(e,i)})}),!0}return!1},B6=e=>{var t,n;return Qe.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},$6=e=>pe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Jx=(e,t,n,s)=>{let o=Kx(n);const r=xi(t,Jc())||Vx(n),i=!r&&o6(o),a=wp(o);(jx(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(xi(t,"text/plain")&&i?o=t["text/plain"]:o=d6(o)),!jx(o)&&(s?xp(e,o):eu(e,o,r))},I6=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{$6(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||B6(r))return;const i=n.get()==="text"||s;s=!1;const a=Xx(r.clipboardData);!Qx(a)&&Zx(e,r,o())||(xi(a,"text/html")?(r.preventDefault(),Jx(e,a,a["text/html"],i)):(t.create(),Un.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),Jx(e,a,c,i)},0)))})},F6=e=>{const t=o=>qt(o,"webkit-fake-url"),n=o=>qt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Ml(e)&&s(i))for(const a of o){const c=a.attr("src");me(c)&&!a.attr("data-mce-object")&&c!==Qe.transparentSrc&&(t(c)||!OR(e)&&n(c))&&a.remove()}})},L6=(e,t,n)=>{I6(e,t,n),F6(e)},M6=(e,t)=>{t.get()==="text"?(t.set("html"),vy(e,!1)):(t.set("text"),vy(e,!0)),e.focus()},U6=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{M6(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&eu(e,s.html,s.internal),s.text&&xp(e,s.text)})},z6=(e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Jc(),t),!0}catch{return!1}},eS=(e,t,n,s)=>{z6(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},tS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Un.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},nS=e=>({html:n6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),H6=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),sS=e=>!e.selection.isCollapsed()||H6(e),V6=e=>t=>{!t.isDefaultPrevented()&&sS(e)&&eS(t,nS(e),tS(e),()=>{if(Qe.browser.isChromium()||Qe.browser.isFirefox()){const n=e.selection.getRng();Un.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},W6=e=>t=>{!t.isDefaultPrevented()&&sS(e)&&eS(t,nS(e),tS(e),Oe)},j6=e=>{e.on("cut",V6(e)),e.on("copy",W6(e))},oS=(e,t)=>{var n,s;return pi.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},q6=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},rS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},K6=e=>U(e.files,t=>/^image\//.test(t.type)),G6=(e,t)=>{xR(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Ml(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&K6(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=oS(e,n);if($t(s))return;const o=Xx(n.dataTransfer),r=xi(o,Jc());if((!Qx(o)||q6(o))&&Zx(e,n,s))return;const i=o[Jc()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Un.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),rS(e,s);const c=Kx(a);o["text/html"]?eu(e,c,r):xp(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Ml(e)&&t.get()===!1&&(n.preventDefault(),rS(e,oS(e,n))),n.type==="dragend"&&t.set(!1)})},Y6=e=>{const t=o=>r=>{o(e,r)},n=SR(e);Ge(n)&&e.on("PastePreProcess",t(n));const s=_R(e);Ge(s)&&e.on("PastePostProcess",t(s))},X6=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Q6=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,iS=e=>G.trim(e).replace(Q6,Kl).toLowerCase(),Z6=(e,t,n)=>{const s=kR(e);if(n||s==="all"||!NR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,d)=>{const p=r.parseStyle(r.decode(f)),C={};for(let w=0;w<o.length;w++){const v=p[o[w]];let x=v,_=r.getStyle(i,o[w],!0);/color/.test(o[w])&&(x=iS(x),_=iS(_)),_!==x&&(C[o[w]]=v)}const y=r.serializeStyle(C,"span");return y?c+' style="'+y+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},J6=e=>{(Qe.browser.isChromium()||Qe.browser.isSafari())&&X6(e,Z6)},ej=e=>{const t=Ut(!1),n=Ut(RR(e)?"text":"html"),s=f6(e);J6(e),U6(e,n),Y6(e),e.on("PreInit",()=>{j6(e),G6(e,t),L6(e,s,n)})},tj=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},nj=e=>{e.parser.addNodeFilter("details",t=>{T(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{T(t,n=>{const s=n.attr("data-mce-open");n.attr("open",me(s)?s:null),n.attr("data-mce-open",null)})})},sj=e=>{tj(e),nj(e)},oj=Tt,aS=te,rj=e=>vt(e.dom),ij=e=>As(e.dom),lS=e=>t=>st(S.fromDom(e),t),aj=(e,t)=>Gr(S.fromDom(e),n=>ij(n)||ns(n),lS(t)).getOr(S.fromDom(t)).dom,cS=(e,t)=>Gr(S.fromDom(e),rj,lS(t)),uS=(e,t,n)=>{const s=new Dt(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!oj(i);i=o())Jn(i)&&(r=i);return r},lj=(e,t)=>{const s=F.fromRangeStart(e).getNode(),o=aj(s,t),r=uS(s,o,!1),i=uS(s,o,!0),a=document.createRange();return cS(r,o).fold(()=>{aS(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),cS(i,o).fold(()=>{aS(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a},cj=e=>{const t=lj(e.selection.getRng(),e.getBody());e.selection.setRng(Gd(t))},uj=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),cj(e))})};var Ga;(function(e){e.Before="before",e.After="after"})(Ga||(Ga={}));const fj=(e,t)=>Math.abs(e.left-t),dj=(e,t)=>Math.abs(e.right-t),mj=(e,t)=>e>=t.top&&e<=t.bottom,pj=(e,t)=>e.top<t.bottom&&e.bottom>t.top,gj=(e,t)=>{const n=WT(e,t)/Math.min(e.height,t.height);return pj(e,t)&&n>.5},hj=(e,t)=>{const n=H(e,s=>mj(t,s));return VT(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=be(e,i=>gj(i,s));return[o,r]})},bj=(e,t)=>({node:e.node,position:fj(e,t)<dj(e,t)?Ga.Before:Ga.After}),Cj=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Sp=(e,t,n)=>{const s=d=>Jn(d.node)?h.some(d):Ee(d.node)?Sp(ht(d.node.childNodes),t,n):h.none(),o=(d,p)=>{if(d.length>=2){const C=s(d[0]).getOr(d[0]),y=s(d[1]).getOr(d[1]);if(Math.abs(p(C,t,n)-p(y,t,n))<2){if(te(C.node))return h.some(C);if(te(y.node))return h.some(y)}}return h.none()},r=(d,p)=>{const C=Kn(d,(y,w)=>p(y,t,n)-p(w,t,n));return o(C,p).orThunk(()=>en(C,s))},[i,a]=hj(sw(e),n),{pass:c,fail:f}=be(a,d=>d.top<n);return r(i,Cj).orThunk(()=>r(f,Pb)).orThunk(()=>r(c,Pb))},yj=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>Sp(ht(r.dom.childNodes),n,s),a=>{const c=H(ht(r.dom.childNodes),f=>f!==a.dom);return Sp(c,n,s)}).orThunk(()=>(st(r,e)?h.none():BN(r)).bind(c=>o(c,h.some(r))));return o(t,h.none())},vj=(e,t,n)=>{const s=S.fromDom(e),o=vo(s),i=S.fromPoint(o,t,n).filter(a=>to(s,a)).getOr(s);return yj(s,i,t,n)},Ej=(e,t,n)=>vj(e,t,n).filter(s=>ba(s.node)).map(s=>bj(s,t)),fS=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-s.clientTop,left:t.left+o.pageXOffset-s.clientLeft}},wj=e=>e.inline?fS(e.getBody()):{left:0,top:0},xj=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Sj=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},_j=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=fS(e.getContentAreaContainer()),s=Sj(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},kj=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),Nj=(e,t)=>kj(wj(e),xj(e),_j(e,t)),_p=vt,Aj=As,Tj=(e,t)=>_p(t)&&t!==e,Rj=(e,t,n)=>t===n||e.dom.isChildOf(t,n)?!1:!_p(t),Pj=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},Oj=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},Dj=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Bj=(e,t,n,s,o,r)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(i=t.pageX+n-o),t.pageY+s>r&&(a=t.pageY+s-r),e.style.width=n-i+"px",e.style.height=s-a+"px"},dS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},$j=e=>e.button===0,Ij=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Fj=(e,t)=>n=>{if($j(n)){const s=ge(t.dom.getParents(n.target),GT(_p,Aj)).getOr(null);if(Tj(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:Oj(t,s,s.offsetWidth,s.offsetHeight)})}}},Lj=(e,t)=>{const n=Dl((s,o)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(s,o)},0);return t.on("remove",n.cancel),s=>e.on(o=>{const r=Math.max(Math.abs(s.screenX-o.screenX),Math.abs(s.screenY-o.screenY));if(!o.dragging&&r>10){if(t.dispatch("dragstart",{target:o.element}).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){const i=Ij(o,Nj(t,s));Dj(o.ghost,t.getBody()),Bj(o.ghost,i,o.width,o.height,o.maxX,o.maxY),n.throttle(s.clientX,s.clientY)}})},Mj=e=>{const n=e.getSel().getRangeAt(0).startContainer;return n.nodeType===3?n.parentNode:n},Uj=(e,t)=>n=>{e.on(s=>{if(s.dragging){if(Rj(t,Mj(t.selection),s.element)){const o=Pj(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{dS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),mS(e)},zj=(e,t)=>()=>{e.on(n=>{n.dragging&&t.dispatch("dragend")}),mS(e)},mS=e=>{e.on(t=>{dS(t.ghost)}),e.clear()},Hj=e=>{const t=No(),n=at.DOM,s=document,o=Fj(t,e),r=Lj(t,e),i=Uj(t,e),a=zj(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===pe.ESC&&a()})},Vj=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(R(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Rc(e,"Dropped file type is not supported"))}},n=o=>{rc(e,o.target)&&t(o)},s=()=>{const o=at.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];T(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{T(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Un.setEditorTimeout(e,s,0)})},Wj=e=>{Hj(e),mR(e)&&Vj(e)},jj=e=>{const t=Dl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Dm(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},qj=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Ts(n)){const s=Oa(e.getBody(),n),o=vt(s)?s:n;e.selection.getNode()!==o&&La(e,o).each(r=>e.selection.setRng(r))}})})},Si=vt,kp=(e,t)=>Oa(e.getBody(),t),Kj=e=>{const t=e.selection,n=e.dom,s=n.isBlock,o=e.getBody(),r=XR(e,o,s,()=>gr(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let c;const f=j=>n.hasClass(j,"mce-offscreen-selection"),d=j=>j!==o&&(Si(j)||Ts(j))&&n.isChildOf(j,o),p=j=>{j&&t.setRng(j)},C=(j,X,J,ve=!0)=>e.dispatch("ShowCaret",{target:X,direction:j,before:J}).isDefaultPrevented()?null:(ve&&t.scrollIntoView(X,j===-1),r.show(J,X)),y=j=>{j.hasAttribute("data-mce-caret")&&(gf(j),t.scrollIntoView(j))},w=()=>{e.on("click",X=>{const J=kp(e,X.target);J&&Si(J)&&(X.preventDefault(),e.focus())}),e.on("blur NewBlock",M),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",X=>{const J=X.target,ve=kp(e,J);Si(ve)?(X.preventDefault(),La(e,ve).each(I)):d(J)&&La(e,J).each(I)},!0),e.on("mousedown",X=>{const J=X.target;if(J!==o&&J.nodeName!=="HTML"&&!n.isChildOf(J,o)||VU(e,X.clientX,X.clientY)===!1)return;M(),V();const ve=kp(e,J);Si(ve)?(X.preventDefault(),La(e,ve).each(I)):Ej(o,X.clientX,X.clientY).each(ue=>{X.preventDefault();const oe=C(1,ue.node,ue.position===Ga.Before,!1);p(oe),Ee(ve)?ve.focus():e.getBody().focus()})}),e.on("keypress",X=>{pe.modifierPressed(X)||Si(t.getNode())&&X.preventDefault()}),e.on("GetSelectionRange",X=>{let J=X.range;if(c){if(!c.parentNode){c=null;return}J=J.cloneRange(),J.selectNode(c),X.range=J}}),e.on("SetSelectionRange",X=>{X.range=_(X.range);const J=I(X.range,X.forward);J&&(X.range=J)});const j=X=>X.id==="mcepastebin";e.on("AfterSetSelectionRange",X=>{const J=X.range,ve=J.startContainer.parentNode;!x(J)&&!j(ve)&&V(),f(ve)||M()}),Wj(e),jj(e),qj(e)},v=j=>In(j)||kl(j)||Nl(j),x=j=>v(j.startContainer)||v(j.endContainer),_=j=>{const X=e.schema.getVoidElements(),J=n.createRng(),ve=j.startContainer,ue=j.startOffset,oe=j.endContainer,ze=j.endOffset;return Ie(X,ve.nodeName.toLowerCase())?ue===0?J.setStartBefore(ve):J.setStartAfter(ve):J.setStart(ve,ue),Ie(X,oe.nodeName.toLowerCase())?ze===0?J.setEndBefore(oe):J.setEndAfter(oe):J.setEnd(oe,ze),J},P=(j,X)=>{const J=S.fromDom(e.getBody()),ve=e.getDoc(),ue=na(J,"#"+i).getOrThunk(()=>{const je=S.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ve);return Kt(je,"id",i),It(J,je),je}),oe=n.createRng();Ji(ue),Zo(ue,[S.fromText(Xt,ve),S.fromDom(X),S.fromText(Xt,ve)]),oe.setStart(ue.dom.firstChild,1),oe.setEnd(ue.dom.lastChild,0),bl(ue,{top:n.getPos(j,e.getBody()).y+"px"}),Uy(ue);const ze=t.getSel();return ze.removeAllRanges(),ze.addRange(oe),oe},O=j=>{const X=j.cloneNode(!0),J=e.dispatch("ObjectSelected",{target:j,targetClone:X});if(J.isDefaultPrevented())return null;const ve=P(j,J.targetClone),ue=S.fromDom(j);return T(En(S.fromDom(e.getBody()),`*[${a}]`),oe=>{st(ue,oe)||Gt(oe,a)}),n.getAttrib(j,a)||j.setAttribute(a,"1"),c=j,V(),ve},I=(j,X)=>{if(!j)return null;if(j.collapsed){if(!x(j)){const oe=X?1:-1,ze=Ea(oe,o,j),je=ze.getNode(!X);if(ba(je))return C(oe,je,X?!ze.isAtEnd():!1,!1);const Je=ze.getNode(X);if(ba(Je))return C(oe,Je,X?!1:!ze.isAtEnd(),!1)}return null}let J=j.startContainer,ve=j.startOffset;const ue=j.endOffset;if(J.nodeType===3&&ve===0&&Si(J.parentNode)&&(J=J.parentNode,ve=n.nodeIndex(J),J=J.parentNode),J.nodeType!==1)return null;if(ue===ve+1&&J===j.endContainer){const oe=J.childNodes[ve];if(d(oe))return O(oe)}return null},M=()=>{c&&c.removeAttribute(a),na(S.fromDom(e.getBody()),"#"+i).each(Nt),c=null},ce=()=>{r.destroy(),c=null},V=()=>{r.hide()};return io(e)||w(),{showCaret:C,showBlockCaretContainer:y,hideFakeCaret:V,destroy:ce}},pS=(e,t,n)=>{if(te(t)&&(n<0||n>t.data.length))return[];const s=[n];let o=t;for(;o!==e&&o.parentNode;){const r=o.parentNode;for(let i=0;i<r.childNodes.length;i++)if(r.childNodes[i]===o){s.push(i);break}o=r}return o===e?s.reverse():[]},Np=(e,t,n,s,o)=>{const r=pS(e,t,n),i=pS(e,s,o);return{start:r,end:i}},gS=(e,t)=>{const n=t.slice(),s=n.pop();return Q(n,(r,i)=>r.bind(a=>h.from(a.childNodes[i])),h.some(e)).bind(r=>te(r)&&(s<0||s>r.data.length)?h.none():h.some({node:r,offset:s}))},hS=(e,t)=>gS(e,t.start).bind(({node:n,offset:s})=>gS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),Gj=(e,t)=>Np(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset),_i=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),_i(e,s,n)}},tu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(te(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),te(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),_i(e,o,n),o!==r&&_i(e,r,n))},Ap=(e,t)=>h.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),bS=(e,t,n)=>{$2(t,0,t).each(o=>{const r=o.container;ex(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),tu(e,a,c=>c===t)})})},Yj=(e,t)=>{const n=e.dom,s=t.pattern,o=hS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return kt(c)&&Lt(c).exists(f=>Ie(f,"block"))};return Ap(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{bS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{bS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},Xj=(e,t)=>{const n=t.replace(Xt," ");return ge(e,s=>t.indexOf(s.start)===0||n.indexOf(s.start)===0)},Qj=(e,t)=>{const n=e.dom,s=e.selection.getRng();return Ap(e,s).filter(o=>{const r=wn(e),i=n.is(o,r);return o!==null&&i}).bind(o=>{const r=o.textContent;return Xj(t,r).map(a=>G.trim(r).length===a.start.length?[]:[{pattern:a,range:Np(n.getRoot(),o,0,o,0)}])}).getOr([])},Zj=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();T(t,s=>Yj(e,s)),e.selection.moveToBookmark(n)},CS=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),nu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},yS=(e,t,n)=>{const s=hS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset);return{prefix:t,end:i.parentNode.insertBefore(CS(e,t+"-end"),i),start:a.parentNode.insertBefore(CS(e,t+"-start"),a)}},vS=(e,t,n)=>{_i(e,e.get(t.prefix+"-end"),n),_i(e,e.get(t.prefix+"-start"),n)},Tp=e=>e.start.length===0,Jj=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},ES=(e,t,n,s)=>{const o=t.start;return tp(e,s.container,s.offset,Jj(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),h.some(a)}else{const a=i.offset-o.length;return ep(i.container,a,n).map(c=>{const f=e.createRng();return f.setStart(c.container,c.offset),f.setEnd(i.container,i.offset),f}).filter(c=>c.toString()===o).orThunk(()=>ES(e,t,n,cs(i.container,0)))}})},e8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),h.some(i)}return Jm(n,s,o).bind(i=>ES(e,t,o,i).bind(c=>{if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return h.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return h.none()}return h.some(c)}))},t8=(e,t,n)=>{const s=e.dom,o=s.getRoot(),r=n.pattern,i=n.position.container,a=n.position.offset;return ep(i,a-n.pattern.end.length,t).bind(c=>{const f=Np(o,c.container,c.offset,i,a);if(Tp(r))return h.some({matches:[{pattern:r,startRng:f,endRng:f}],position:c});{const d=wS(e,n.remainingPatterns,c.container,c.offset,t),p=d.getOr({matches:[],position:c}),C=p.position;return e8(s,r,C.container,C.offset,t,d.isNone()).map(w=>{const v=Gj(o,w);return{matches:p.matches.concat([{pattern:r,startRng:v,endRng:f}]),position:cs(w.startContainer,w.startOffset)}})}})},wS=(e,t,n,s,o)=>{const r=e.dom;return Jm(n,s,r.getRoot()).bind(i=>{const a=r.createRng();a.setStart(o,0),a.setEnd(n,s);const c=a.toString();for(let f=0;f<t.length;f++){const d=t[f];if(!Lg(c,d.end))continue;const p=t.slice();p.splice(f,1);const C=t8(e,o,{pattern:d,remainingPatterns:p,position:i});if(C.isSome())return C}return h.none()})},xS=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?T(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},n8=(e,t,n,s)=>{const o=nu(e.dom,n);tu(e.dom,o,s),xS(e,t,o)},s8=(e,t,n,s,o)=>{const r=e.dom,i=nu(r,s),a=nu(r,n);tu(r,a,o),tu(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=nu(r,c);xS(e,t,f)},o8=(e,t)=>{const n=_b("mce_textpattern"),s=de(t,(o,r)=>{const i=yS(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return de(s,(o,r)=>{const i=s.length-o.length-1,a=Tp(r.pattern)?r.endMarker:yS(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:a}])},[])},SS=(e,t,n)=>{const s=e.selection.getRng();return s.collapsed===!1?[]:Ap(e,s).bind(o=>{const r=Math.max(0,s.startOffset-(n?1:0));return wS(e,t,s.startContainer,r,o)}).fold(()=>[],o=>o.matches)},_S=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=o8(n,t);T(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Tp(r.pattern)?n8(e,r.pattern,r.endMarker,a):s8(e,r.pattern,r.startMarker,r.endMarker,a),vS(n,r.endMarker,a),vS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},r8=e=>e.inlinePatterns.length>0||e.blockPatterns.length>0,i8=(e,t)=>{if(!e.selection.isCollapsed()||!r8(t))return!1;const n=SS(e,t.inlinePatterns,!1),s=Qj(e,t.blockPatterns);return s.length>0||n.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(oa),_S(e,n),Zj(e,s);const o=e.selection.getRng(),r=Jm(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===oa&&(a.deleteData(i.offset-1,1),_i(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0):!1},kS=(e,t)=>{if(t.length>0){const n=SS(e,t,!0);n.length>0&&e.undoManager.transact(()=>{_S(e,n)})}},NS=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},a8=(e,t)=>NS(e,t,(n,s)=>n===s.keyCode&&pe.modifierPressed(s)===!1),l8=(e,t)=>NS(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),c8=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>E1(hC(e)),o=()=>tC(hC(e));e.on("keydown",r=>{r.keyCode===13&&!pe.modifierPressed(r)&&i8(e,s())&&r.preventDefault()},!0),e.on("keyup",r=>{a8(n,r)&&kS(e,o())}),e.on("keypress",r=>{l8(t,r)&&Un.setEditorTimeout(e,()=>{kS(e,o())})})},u8=e=>{c8(e)},f8=e=>{const t=G.each,n=pe.BACKSPACE,s=pe.DELETE,o=e.dom,r=e.selection,i=e.parser,a=Qe.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),d=Qe.deviceType.isiPhone()||Qe.deviceType.isiPad(),p=Qe.os.isMacOS()||Qe.os.isiOS(),C=(ne,we)=>{try{e.getDoc().execCommand(ne,!1,we)}catch{}},y=ne=>ne.isDefaultPrevented(),w=()=>{const ne=fe=>{const ee=o.create("body"),Be=fe.cloneContents();return ee.appendChild(Be),r.serializer.serialize(ee,{format:"html"})},we=fe=>{const ee=ne(fe),Be=o.createRng();Be.selectNode(e.getBody());const Le=ne(Be);return ee===Le};e.on("keydown",fe=>{const ee=fe.keyCode;let Be,Le;if(!y(fe)&&(ee===s||ee===n)){if(Be=e.selection.isCollapsed(),Le=e.getBody(),Be&&!o.isEmpty(Le)||!Be&&!we(e.selection.getRng()))return;fe.preventDefault(),e.setContent(""),Le.firstChild&&o.isBlock(Le.firstChild)?e.selection.setCursorLocation(Le.firstChild,0):e.selection.setCursorLocation(Le,0),e.nodeChanged()}})},v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},x=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",ne=>{let we;if(ne.target===e.getDoc().documentElement)if(we=r.getRng(),e.getBody().focus(),ne.type==="mousedown"){if(In(we.startContainer))return;r.placeCaretAt(ne.clientX,ne.clientY)}else r.setRng(we)})},_=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode(),fe=we.previousSibling;if(we.nodeName==="HR"){o.remove(we),ne.preventDefault();return}fe&&fe.nodeName&&fe.nodeName.toLowerCase()==="hr"&&(o.remove(fe),ne.preventDefault())}}})},P=()=>{Range.prototype.getClientRects||e.on("mousedown",ne=>{if(!y(ne)&&ne.target.nodeName==="HTML"){const we=e.getBody();we.blur(),Un.setEditorTimeout(e,()=>{we.focus()})}})},O=()=>{const ne=gC(e);e.on("click",we=>{const fe=we.target;/^(IMG|HR)$/.test(fe.nodeName)&&o.getContentEditableParent(fe)!=="false"&&(we.preventDefault(),e.selection.select(fe),e.nodeChanged()),fe.nodeName==="A"&&o.hasClass(fe,ne)&&fe.childNodes.length===0&&(we.preventDefault(),r.select(fe))})},I=()=>{const ne=()=>{const fe=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const ee=r.getStart();ee!==e.getBody()&&(o.setAttrib(ee,"style",null),t(fe,Be=>{ee.setAttributeNode(Be.cloneNode(!0))}))}},we=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",fe=>{let ee;if(!y(fe)&&(fe.keyCode===8||fe.keyCode===46)&&we())return ee=ne(),e.getDoc().execCommand("delete",!1,null),ee(),fe.preventDefault(),!1}),o.bind(e.getDoc(),"cut",fe=>{let ee;!y(fe)&&we()&&(ee=ne(),Un.setEditorTimeout(e,()=>{ee()}))})},M=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode().previousSibling;if(we&&we.nodeName&&we.nodeName.toLowerCase()==="table")return ne.preventDefault(),!1}})},ce=()=>{e.on("keydown",ne=>{let we,fe;if(y(ne)||ne.keyCode!==pe.BACKSPACE)return;we=r.getRng();const ee=we.startContainer,Be=we.startOffset,Le=o.getRoot();if(fe=ee,!(!we.collapsed||Be!==0)){for(;fe&&fe.parentNode&&fe.parentNode.firstChild===fe&&fe.parentNode!==Le;)fe=fe.parentNode;fe.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,fe),we=o.createRng(),we.setStart(ee,0),we.setEnd(ee,0),r.setRng(we))}})},V=()=>{const ne=()=>{C("StyleWithCSS",!1),C("enableInlineTableEditing",!1),dC(e)||C("enableObjectResizing",!1)};pC(e)||e.on("BeforeExecCommand mousedown",ne)},j=()=>{const ne=()=>{t(o.select("a"),we=>{let fe=we.parentNode;const ee=o.getRoot();if(fe.lastChild===we){for(;fe&&!o.isBlock(fe);){if(fe.parentNode.lastChild!==fe||fe===ee)return;fe=fe.parentNode}o.add(fe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",we=>{(we.type==="setcontent"||we.command==="mceInsertLink")&&ne()})},X=()=>{e.on("init",()=>{C("DefaultParagraphSeparator",wn(e))})},J=ne=>{const we=ne.getBody(),fe=ne.selection.getRng();return fe.startContainer===fe.endContainer&&fe.startContainer===we&&fe.startOffset===0&&fe.endOffset===we.childNodes.length},ve=()=>{e.on("keyup focusin mouseup",ne=>{!pe.modifierPressed(ne)&&!J(e)&&r.normalize()},!0)},ue=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},oe=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ze=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ne=>{let we;ne.target.nodeName==="HTML"&&(we=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(we),e.selection.normalize(),e.nodeChanged())}))},je=()=>{p&&e.on("keydown",ne=>{pe.metaKeyPressed(ne)&&!ne.shiftKey&&(ne.keyCode===37||ne.keyCode===39)&&(ne.preventDefault(),e.selection.getSel().modify("move",ne.keyCode===37?"backward":"forward","lineboundary"))})},Je=()=>{e.on("click",ne=>{let we=ne.target;do if(we.tagName==="A"){ne.preventDefault();return}while(we=we.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Rt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ne=>{ne.preventDefault()})})},Y=()=>{i.addNodeFilter("br",ne=>{let we=ne.length;for(;we--;)ne[we].attr("class")==="Apple-interchange-newline"&&ne[we].remove()})},he=Oe,$e=()=>{if(!c||e.removed)return!1;const ne=e.selection.getSel();return!ne||!ne.rangeCount||ne.rangeCount===0},De=()=>{f&&(x(),O(),Rt(),v(),d&&(oe(),ze(),Je())),c&&(P(),V(),ue(),je())},Bt=()=>{ce(),w(),Qe.windowsPhone||ve(),f&&(x(),O(),X(),Rt(),M(),Y(),d?(oe(),ze(),Je()):v()),c&&(_(),P(),I(),V(),j(),ue(),je(),M())};return io(e)?De():Bt(),{refreshContentEditable:he,isHidden:$e}},Rp=at.DOM,d8=(e,t)=>{const n=S.fromDom(e.getBody()),s=nf(Qo(n)),o=S.fromTag("style");Kt(o,"type","text/css"),It(o,S.fromText(t)),It(s,o),e.on("remove",()=>{Nt(o)})},m8=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Pp=e=>Vi(e,t=>At(t)===!1),AS=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Pp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:m8(e),validate:!0,blob_cache:n,document:e.getDoc()})},TS=e=>{const t=e.options.get;return Pp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},p8=e=>{const t=e.options.get;return{...AS(e),...TS(e),...Pp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},g8=e=>{const t=bi(AS(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let o=n.length,r,i;const a=e.dom,c="data-mce-"+s;for(;o--;)if(r=n[o],i=r.attr(s),i&&!r.attr(c)){if(i.indexOf("data:")===0||i.indexOf("blob:")===0)continue;s==="style"?(i=a.serializeStyle(a.parseStyle(i),r.name),i.length||(i=null),r.attr(c,i),r.attr(s,i)):s==="tabindex"?(r.attr(c,i),r.attr(s,null)):r.attr(c,e.convertURL(i,s,r.name))}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const o=n[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new mn("br",1))}}),t},h8=e=>{const t=vR(e);t&&Un.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n.destroyed||n.focus()},100)},b8=e=>{const t=e.dom.getRoot();!e.inline&&(!Zl(e)||e.selection.getStart(!0)===t)&&dn(t).each(n=>{const s=n.getNode(),o=ea(s)?dn(s).getOr(n):n;e.selection.setRng(o.toRange())})},C8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,rO(e),e.focus(!0),b8(e),e.nodeChanged({initial:!0});const t=CR(e);Ge(t)&&t.call(e,e),h8(e)},RS=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,y8=(e,t,n)=>{const s=[RS(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},PS=e=>{const t=RS(e),n=fC(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";G.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(y8(e,s,n)).then(r).catch(r),a=K1(e);return a&&d8(e,a),i},v8=e=>{const t=e.getDoc(),n=e.getBody();sO(e),ER(e)||(t.body.spellcheck=!1,Rp.setAttrib(n,"spellcheck","false")),e.quirks=f8(e),oO(e);const s=G1(e);s!==void 0&&(n.dir=s);const o=wR(e);o&&e.on("BeforeSetContent",r=>{G.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},E8=e=>{io(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Op=e=>{e.removed!==!0&&(E8(e),C8(e))},OS=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Rp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=pC(e),e.readonly||(e.inline&&Rp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=gz(e),e.schema=ko(TS(e)),e.dom=at(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:V1(e),referrerPolicy:Lf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=g8(e),e.serializer=u0(p8(e),e),e.selection=c0(e.dom,e.getWin(),e.serializer,e),e.annotator=py(e),e.formatter=w0(e),e.undoManager=S0(e),e._nodeChangeDispatcher=new t6(e),e._selectionOverrides=Kj(e),k3(e),sj(e),B3(e),io(e)||(uj(e),u8(e));const o=e6(e);x3(e,o),P3(e),Rz(e),ej(e);const r=SM(e);v8(e),r.fold(()=>{PS(e).then(()=>Op(e))},i=>{e.setProgressState(!0),PS(e).then(()=>{i().then(a=>{e.setProgressState(!1),Op(e),o0(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Op(e),o0(e)})})})},DS=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=iz(S.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,OS(e)});n.srcdoc=e.iframeHTML}else OS(e)},su=at.DOM,w8=(e,t,n,s)=>{const o=S.fromTag("iframe");return s.each(r=>Kt(o,"tabindex",r)),_s(o,n),_s(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Yi(o,"tox-edit-area__iframe"),o},x8=e=>{let t=A1(e)+"<html><head>";oC(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=T1(e),s=R1(e),o=e.translate(hR(e));return rC(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+rC(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},S8=(e,t)=>{const n=e.translate("Rich Text Area"),s=Wr(S.fromDom(e.getElement()),"tabindex").bind(oN),o=w8(e.id,n,N1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=x8(e),su.add(t.iframeContainer,o)},_8=(e,t)=>{S8(e,t),t.editorContainer&&(su.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=su.isHidden(t.editorContainer)),e.getElement().style.display="none",su.setAttrib(e.id,"aria-hidden","true"),DS(e)},BS=at.DOM,k8=(e,t,n)=>{const s=yi.get(n),o=yi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=G.trim(n),s&&G.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ge(r.init)&&(r.init(e,o),t.push(n))}catch(r){ez(e,n,r)}}},N8=e=>e.replace(/^\-/,""),A8=e=>{const t=[];T(Ll(e),n=>{k8(e,t,N8(n))})},T8=e=>{const t=G.trim(lC(e)),n=e.ui.registry.getAll().icons,s={...Tc.get("default").icons,...Tc.get(t).icons};bt(s,(o,r)=>{Ie(n,r)||e.ui.registry.addIcon(r,o)})},R8=e=>{const t=ri(e);if(me(t)){const n=Er.get(t);e.theme=n(e,Er.urls[t])||{},Ge(e.theme.init)&&e.theme.init(e,Er.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},P8=e=>{const t=Mf(e),n=Ci.get(t);e.model=n(e,Ci.urls[t])},O8=e=>e.theme.renderUI(),D8=e=>{const t=e.getElement(),s=ri(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},$S=e=>({editorContainer:e,iframeContainer:e,api:{}}),B8=e=>{const t=BS.create("div");return BS.insertAfter(t,e),$S(t)},$8=e=>{const t=e.getElement();return e.inline?$S(null):B8(t)},I8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,me(ri(e))?O8(e):Ge(ri(e))?D8(e):$8(e)},F8=(e,t)=>{const n={show:h.from(t.show).getOr(Oe),hide:h.from(t.hide).getOr(Oe),isEnabled:h.from(t.isEnabled).getOr(ct),setEnabled:s=>{e.mode.isReadOnly()||h.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},L8=e=>{e.dispatch("ScriptsLoaded"),T8(e),R8(e),P8(e),A8(e);const t=I8(e);F8(e,h.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,oz(e),e.inline?DS(e):_8(e,n)},wr=at.DOM,IS=e=>e.charAt(0)==="-",M8=(e,t)=>{const n=cC(t),s=W1(t);if(ss.hasCode(n)===!1&&n!=="en"){const o=Js(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{QU(t,o,n)})}},U8=(e,t)=>{const n=ri(e);if(me(n)&&!IS(n)&&!Ie(Er.urls,n)){const s=J1(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;Er.load(n,o).catch(()=>{ZU(e,o,n)})}},z8=(e,t)=>{const n=Mf(e);if(n!=="plugin"&&!Ie(Ci.urls,n)){const s=eR(e),o=me(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;Ci.load(n,o).catch(()=>{JU(e,o,n)})}},H8=e=>h.from(L1(e)).filter(Js).map(t=>({url:t,name:h.none()})),FS=(e,t,n)=>h.from(t).filter(s=>Js(s)&&!Tc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:h.some(s)})),V8=(e,t,n)=>{const s=FS(t,"default",n),o=H8(t).orThunk(()=>FS(t,lC(t),""));T(CN([s,o]),r=>{e.add(r.url).catch(()=>{XU(t,r.url,r.name.getOrUndefined())})})},W8=(e,t)=>{const n=(s,o)=>{yi.load(s,o).catch(()=>{YU(e,o,s)})};bt(dR(e),(s,o)=>{n(o,s),e.options.set("plugins",Ll(e).concat(o))}),T(Ll(e),s=>{s=G.trim(s),s&&!yi.urls[s]&&!IS(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},j8=e=>{const t=ri(e);return!me(t)||ke(Er.get(t))},q8=e=>{const t=Mf(e);return ke(Ci.get(t))},K8=(e,t)=>{const n=no.ScriptLoader,s=()=>{!e.removed&&j8(e)&&q8(e)&&L8(e)};U8(e,t),z8(e,t),M8(n,e),V8(n,e,t),W8(e,t),n.loadQueue().then(s,s)},G8=(e,t)=>Xh.forElement(e,{contentCssCors:fR(t),referrerPolicy:Lf(t)}),Y8=e=>{const t=e.id;ss.setCode(cC(e));const n=()=>{wr.unbind(window,"ready",n),e.render()};if(!rr.Event.domLoaded){wr.bind(window,"ready",n);return}if(!e.getElement())return;const s=S.fromDom(e.getElement()),o=gh(s);e.on("remove",()=>{le(s.dom.attributes,i=>Gt(s,i.name)),_s(s,o)}),e.ui.styleSheetLoader=G8(s,e),Uf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||wr.getParent(t,"form");r&&(e.formElement=r,rR(e)&&!af(e.getElement())&&(wr.insertAfter(wr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},wr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),iR(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=p0(e),e.notificationManager=m0(e),FR(e)&&e.on("GetContent",i=>{i.save&&(i.content=wr.encode(i.content))}),aR(e)&&e.on("submit",()=>{e.initialized&&e.save()}),lR(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),K8(e,e.suffix)},X8=(e,t)=>({sections:K(e),options:K(t)}),LS=Go().deviceType,MS=LS.isPhone(),Q8=LS.isTablet(),Ya=e=>{if($t(e))return[];{const t=kt(e)?e:e.split(/[ ,]/),n=z(t,Hr);return H(n,Js)}},Z8=(e,t)=>{const n=Wk(t,(s,o)=>R(e,o));return X8(n.t,n.f)},J8=(e,t,n={})=>{const s=e.sections(),o=ut(s,t).getOr({});return G.extend({},n,o)},Dp=(e,t)=>Ie(e.sections(),t),e5=(e,t)=>Dp(e,t)?e.sections()[t]:{},t5=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ut(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),n5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,s):s},s5=(e,t)=>[].concat(Ya(e)).concat(Ya(t)),o5=(e,t,n,s)=>e&&Dp(t,"mobile")?s:n,r5=(e,t,n,s)=>{const o=Ya(n.forced_plugins),r=Ya(s.plugins),i=e5(t,"mobile"),a=i.plugins?Ya(i.plugins):r,c=o5(e,t,r,a),f=s5(o,c);return G.extend(s,{forced_plugins:o,plugins:f})},i5=(e,t)=>e&&Dp(t,"mobile"),a5=(e,t,n,s,o)=>{var r;const i=e?{mobile:t5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=Z8(["mobile"],Vc(i,o)),c=G.extend(n,s,a.options(),i5(e,a)?J8(a,"mobile"):{},{external_plugins:n5(s,a.options())});return r5(e,a,s,c)},l5=(e,t)=>a5(MS||Q8,MS,t,e,t),c5=(e,t)=>YM(e,t),u5=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{T("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},f5=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return U(o,r=>ke(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},d5=e=>{u5(e),f5(e)},m5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Qe.os.isMacOS()||Qe.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},p5=(e,t,n)=>{const s=S.fromDom(e.getRoot());return lc(s,F.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),cc(s,F.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},g5=e=>{if(typeof e!="string"){const t=G.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},h5=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?p5(s,n.getRng(),t):t},ou=(e,t)=>{const{content:n,details:s}=g5(t);vm(e,{content:h5(e,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(o=>{const r=KM(e,o.content,s);Em(e,r,o),e.addVisual()})},b5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{ou(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{ou(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{ou(e,s)},mceInsertContent:(t,n,s)=>{ou(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},C5={"font-size":"size","font-family":"face"},y5=(e,t,n)=>{const s=r=>Cl(r,e).orThunk(()=>yt(r)==="font"?ut(C5,e).bind(i=>Wr(r,i)):h.none()),o=r=>st(S.fromDom(t),r);return Zd(S.fromDom(n),r=>s(r),o)},v5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),E5=(e,t)=>h.from(at.DOM.getStyle(t,e,!0)),US=e=>(t,n)=>h.from(n).map(S.fromDom).filter(Yn).bind(s=>y5(e,t,s.dom).or(E5(e,s.dom))).getOr(""),w5=US("font-size"),x5=Ot(v5,US("font-family")),S5=e=>dn(e.getBody()).map(t=>{const n=t.container();return te(n)?n.parentNode:n}),_5=e=>h.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?h.none():h.from(e.selection.getStart(!0))}),k5=(e,t)=>_5(e).orThunk(re(S5,e)).map(S.fromDom).filter(Yn).bind(t),Bp=(e,t)=>k5(e,St(h.some,t)),zS=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=$R(e),o=IR(e);return o?o[n-1]||t:s[n-1]||t}else return t}else return t},N5=e=>{const t=e.split(/\s*,\s*/);return z(t,n=>n.indexOf(" ")!==-1&&!(qt(n,'"')||qt(n,"'"))?`'${n}'`:n).join(",")},A5=(e,t)=>{const n=zS(e,t);e.formatter.toggle("fontname",{value:N5(n)}),e.nodeChanged()},T5=e=>Bp(e,t=>x5(e.getBody(),t.dom)).getOr(""),R5=(e,t)=>{e.formatter.toggle("fontsize",{value:zS(e,t)}),e.nodeChanged()},P5=e=>Bp(e,t=>w5(e.getBody(),t.dom)).getOr(""),O5=e=>Bp(e,t=>{const n=S.fromDom(e.getBody()),s=Zd(t,r=>Cl(r,"line-height"),re(st,n)),o=()=>{const r=parseFloat(Ns(t,"line-height")),i=parseFloat(Ns(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),D5=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},B5=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{A5(e,o)},FontSize:(n,s,o)=>{R5(e,o)},LineHeight:(n,s,o)=>{D5(e,o)},Lang:(n,s,o)=>{t(n,{value:o.code,customValue:o.customCode})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(me(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},$5=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>T5(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>P5(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>O5(e))},I5=e=>{B5(e),$5(e)},F5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},L5=e=>{e.editorCommands.addCommands({Indent:()=>{v3(e)},Outdent:()=>{vw(e)}}),e.editorCommands.addCommands({Outdent:()=>hw(e)},"state")},M5=e=>{const t=(n,s,o)=>{const r=me(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ft(r)&&me(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},U5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},z5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},H5=e=>{U5(e),z5(e)},V5=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Zc(Rx,e)},mceInsertNewLine:(t,n,s)=>{Fx(e,s)},InsertLineBreak:(t,n,s)=>{Zc(Dx,e)}})},W5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>{if(r.nodeType===1&&o++===s)return e.selection.select(r),!1},e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),As);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},j5=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{zD(e,s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},q5=e=>{d5(e),m5(e),F5(e),W5(e),b5(e),M5(e),L5(e),V5(e),H5(e),I5(e),j5(e)};class HS{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():CD(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ge(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ge(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ge(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;bt(t,(o,r)=>{T(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const xr="data-mce-contenteditable",K5=(e,t,n)=>{ef(e,t)&&n===!1?gl(e,t):n&&Yi(e,t)},$p=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},ru=(e,t)=>{e.dom.contentEditable=t?"true":"false"},G5=e=>{T(En(e,'*[contenteditable="true"]'),t=>{Kt(t,xr,"true"),ru(t,!1)})},Y5=e=>{T(En(e,`*[${xr}="true"]`),t=>{Gt(t,xr),ru(t,!0)})},X5=e=>{h.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},Q5=e=>{e.selection.setRng(e.selection.getRng())},Z5=(e,t)=>{const n=S.fromDom(e.getBody());K5(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),X5(e),e.readonly=!0,ru(n,!1),G5(n)):(e.readonly=!1,ru(n,!0),Y5(n),$p(e,"StyleWithCSS",!1),$p(e,"enableInlineTableEditing",!1),$p(e,"enableObjectResizing",!1),MD(e)&&e.focus(),Q5(e),e.nodeChanged())},Sr=e=>e.readonly,VS=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Sr(e)&&T(t,n=>{n.attr(xr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(xr,t=>{Sr(e)&&T(t,n=>{n.attr("contenteditable",n.attr(xr))})}),e.serializer.addTempAttr(xr)},J5=e=>{e.serializer?VS(e):e.on("PreInit",()=>{VS(e)})},e4=e=>e.type==="click",t4=["copy"],n4=e=>R(t4,e.type),s4=(e,t)=>nr(t,"a",s=>st(s,S.fromDom(e.getBody()))).bind(s=>Wr(s,"href")),o4=(e,t)=>{if(e4(t)&&!pe.metaKeyPressed(t)){const n=S.fromDom(t.target);s4(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${tN(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else n4(t)&&e.dispatch(t.type,t)},r4=e=>{e.on("ShowCaret",t=>{Sr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Sr(e)&&t.preventDefault()})},i4=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ip{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pt}static isNative(t){return!!i4[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=xf(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=pt),n){const r={func:n,removed:!1};o&&G.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return bt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=be(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,T(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else bt(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){return t=t.toLowerCase(),!(!this.bindings[t]||this.bindings[t].length===0)}}const Xa=e=>(e._eventDispatcher||(e._eventDispatcher=new Ip({scope:e,toggleEvent:(t,n)=>{Ip.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Fp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return xf(e.toLowerCase(),t!=null?t:{},s);const o=Xa(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent()}return o},on(e,t,n){return Xa(this).on(e,t,n)},off(e,t){return Xa(this).off(e,t)},once(e,t){return Xa(this).once(e,t)},hasEventListeners(e){return Xa(this).has(e)}},iu=at.DOM;let _r;const au=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=mC(e);return n?(e.eventRoot||(e.eventRoot=iu.select(n)[0]),e.eventRoot):e.getBody()},a4=e=>!e.hidden&&!Sr(e),WS=(e,t,n)=>{a4(e)?e.dispatch(t,n):Sr(e)&&o4(e,n)},jS=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const s=au(e,t);if(mC(e)){if(_r||(_r={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||_r&&(bt(_r,(o,r)=>{e.dom.unbind(au(e,r))}),_r=null)})),_r[t])return;n=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||iu.isChildOf(r,c))&&WS(i[a],t,o)}},_r[t]=n,iu.bind(s,t,n)}else n=o=>{WS(e,t,o)},iu.bind(s,t,n),e.delegates[t]=n},qS={...Fp,bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{jS(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?jS(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(au(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(bt(e.delegates,(s,o)=>{e.dom.unbind(au(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},l4=e=>me(e)?{value:e.split(/[ ,]/),valid:!0}:Qs(e,me)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},c4=e=>{const t=(()=>{switch(e){case"array":return kt;case"boolean":return qn;case"function":return Ge;case"number":return Cn;case"object":return ft;case"string":return me;case"string[]":return l4;case"object[]":return n=>Qs(n,ft);case"regexp":return n=>Dn(n,RegExp)}})();return n=>Lp(n,t,`The value must be a ${e}.`)},u4=e=>me(e.processor),KS=(e,t)=>{const n=ml(t.message)?"":`. ${t.message}`;return e+n},GS=e=>e.valid,Lp=(e,t,n="")=>{const s=t(e);return qn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},f4=(e,t,n)=>{if(!At(t)){const s=Lp(t,n);if(GS(s))return s.value;console.error(KS(`Invalid default value passed for the "${e}" option`,s))}},d4=(e,t)=>{const n={},s={},o=(p,C,y)=>{const w=Lp(C,y);return GS(w)?(s[p]=w.value,!0):(console.warn(KS(`Invalid value passed for the ${p} option`,w)),!1)},r=(p,C)=>{const y=u4(C)?c4(C.processor):C.processor,w=f4(p,C.default,y);n[p]={...C,default:w,processor:y},ut(s,p).orThunk(()=>ut(t,p)).each(x=>o(p,x,y))},i=p=>Ie(n,p);return{register:r,isRegistered:i,get:p=>ut(s,p).orThunk(()=>ut(n,p).map(C=>C.default)).getOrUndefined(),set:(p,C)=>{if(i(p)){const y=n[p];return y.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,C,y.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const C=i(p);return C&&delete s[p],C},isSet:p=>Ie(s,p)}},m4=["design","readonly"],YS=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&Z5(e,r.editorReadOnly),t.set(s),eO(e,s)},p4=(e,t,n,s)=>{if(s!==n.get()){if(!Ie(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?YS(e,n,t,s):e.on("init",()=>YS(e,n,t,s))}},g4=(e,t,n)=>{if(R(m4,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},h4=e=>{const t=Ut("design"),n=Ut({design:{activate:Oe,deactivate:Oe,editorReadOnly:!1},readonly:{activate:Oe,deactivate:Oe,editorReadOnly:!0}});return J5(e),r4(e),{isReadOnly:()=>Sr(e),set:s=>p4(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(g4(n.get(),s,o))}}},Mp=G.each,Up=G.explode,b4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},XS=G.makeMap("alt,ctrl,shift,meta,access"),C4=e=>{let t;const n={},s=Qe.os.isMacOS()||Qe.os.isiOS();Mp(Up(e.toLowerCase(),"+"),r=>{r in XS?n[r]=!0:/^[0-9]{2,}$/.test(r)?n.keyCode=parseInt(r,10):(n.charCode=r.charCodeAt(0),n.keyCode=b4[r]||r.toUpperCase().charCodeAt(0))});const o=[n.keyCode];for(t in XS)n[t]?o.push(t):n[t]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class QS{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(Mp(n.shortcuts,o=>{if(n.matchShortcut(s,o))return n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return Mp(Up(G.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:G.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=G.map(Up(t,">"),C4);return r[r.length-1]=G.extend(r[r.length-1],{func:s,scope:o||this.editor}),G.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const y4=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(f,d)=>(p,C)=>f[p.toLowerCase()]={...C,type:d},c=(f,d)=>s[f.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},v4=()=>{const e=y4();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},kr=at.DOM,ZS=G.extend,E4=G.each;class lu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,ZS(this,qS);const o=this;this.id=t,this.hidden=!1;const r=l5(s.defaultOptions,n);this.options=d4(o,r),k1(o);const i=this.options.get;i("deprecation_warnings")&&RU(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=Lf(o);f&&(no.ScriptLoader._setReferrerPolicy(f),at.DOM.styleSheetLoader._setReferrerPolicy(f)),nn.languageLoad=i("language_load"),nn.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new ls(oC(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Uf(o),this.shortcuts=new QS(this),this.editorCommands=new HS(this),q5(this);const d=i("cache_suffix");d&&(Qe.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:v4(),styleSheetLoader:void 0,show:Oe,hide:Oe,setEnabled:Oe,isEnabled:ct},this.mode=h4(o),s.dispatch("SetupEditor",{editor:this});const p=bR(o);Ge(p)&&p.call(o,o)}render(){Y8(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return gr(this)}translate(t){return ss.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(ke(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:ct,default:n})),!o.isSet(t)&&!At(n)?n:o.get(t)}hasPlugin(t,n){return R(Ll(this),t)?n?yi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(kr.show(t.getContainer()),kr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(kr.hide(t.getContainer()),kr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t){const n=this;let s=n.getElement(),o;if(n.removed)return"";if(s){t=t||{},t.load=!0;const r=af(s)?s.value:s.innerHTML;return o=n.setContent(r,t),t.element=s,t.no_events||n.dispatch("LoadContent",t),t.element=s=null,o}}save(t){const n=this;let s=n.getElement(),o,r;if(!(!s||!n.initialized||n.removed))return t=t||{},t.save=!0,t.element=s,o=t.content=n.getContent(t),t.no_events||n.dispatch("SaveContent",t),t.format==="raw"&&n.dispatch("RawSaveContent",t),o=t.content,af(s)?s.value=o:((t.is_removing||!n.inline)&&(s.innerHTML=o),(r=kr.getParent(n.id,"form"))&&E4(r.elements,i=>{if(i.name===n.id)return i.value=o,!1})),t.element=s=null,t.set_dirty!==!1&&n.setDirty(!1),o}setContent(t,n){return Tm(this,t,n)}getContent(t){return wU(this,t)}insertContent(t,n){n&&(t=ZS({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Tm(this,this.startContent,{format:"raw"}):Tm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=kr.get(t.editorContainer||t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=kr.get(this.id)),this.targetElm}getWin(){const t=this;let n;return t.contentWindow||(n=t.iframeElement,n&&(t.contentWindow=n.contentWindow)),t.contentWindow}getDoc(){const t=this;let n;return t.contentDocument||(n=t.getWin(),n&&(t.contentDocument=n.document)),t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement||(t?t.body:null)}convertURL(t,n,s){const o=this,r=o.options.get,i=yR(o);return Ge(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){c5(this,t)}remove(){BU(this)}destroy(t){$U(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ki=at.DOM,cu=G.each;let JS=!1,uu,pn=[];const fu=e=>{const t=e.type;cu(Fo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},e_=e=>{if(e!==JS){const t=at.DOM;e?(t.bind(window,"resize",fu),t.bind(window,"scroll",fu)):(t.unbind(window,"resize",fu),t.unbind(window,"scroll",fu)),JS=e}},t_=e=>{const t=pn;return pn=H(pn,n=>e!==n),Fo.activeEditor===e&&(Fo.activeEditor=pn.length>0?pn[0]:null),Fo.focusedEditor===e&&(Fo.focusedEditor=null),t.length!==pn.length},w4=e=>(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(t_(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e),x4=document.compatMode!=="CSS1Compat",Fo={...Fp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"1.0",releaseDate:"2022-06-29",i18n:ss,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,s="";n=ls.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,s=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(s=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(s=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new ls(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new ls(e.baseURL),e.suffix=s,PD(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&bt(s,(o,r)=>{nn.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=ut(d,"name").filter(C=>!ki.get(C)).getOrThunk(ki.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>Qe.browser.isIE()||Qe.browser.isEdge()?(Pc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):x4?(Pc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):me(d.selector)?ki.select(d.selector):ke(d.target)?[d.target]:[];let c=d=>{n=d};const f=()=>{let d=0;const p=[];let C;const y=(w,v,x)=>{const _=new lu(w,v,t);p.push(_),_.on("init",()=>{++d===C.length&&c(p)}),_.targetElm=_.targetElm||x,_.render()};ki.unbind(window,"ready",f),i("onpageload"),C=fl(a(e)),G.each(C,w=>{w4(t.get(w.id))}),C=G.grep(C,w=>!t.get(w.id)),C.length===0?c([]):cu(C,w=>{o(e,w)?Pc("Could not initialize inline editor on invalid inline target element",w):y(r(w),e,w)})};return ki.bind(window,"ready",f),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?pn.slice(0):me(e)?ge(pn,t=>t.id===e).getOr(null):Cn(e)&&pn[e]?pn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&pn.push(e),e_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),uu||(uu=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",uu))),e},createEditor(e,t){return this.add(new lu(e,t,this))},remove(e){const t=this;let n,s;if(!e){for(n=pn.length-1;n>=0;n--)t.remove(pn[n]);return}if(me(e)){cu(ki.select(e),o=>{s=t.get(o.id),s&&t.remove(s)});return}return s=e,Xs(t.get(s.id))?null:(t_(s)&&t.dispatch("RemoveEditor",{editor:s}),pn.length===0&&window.removeEventListener("beforeunload",uu),s.remove(),e_(pn.length>0),s)},execCommand(e,t,n){var s;const o=this,r=ft(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new lu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{cu(pn,e=>{e.save()})},addI18n:(e,t)=>{ss.add(e,t)},translate:e=>ss.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ls(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ls(this.baseURL)}};Fo.setup();const S4=(()=>{const e=No(),t=r=>({items:r,types:Gn(r),getType:i=>ut(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),n_=Math.min,Ni=Math.max,du=Math.round,s_=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=du(c/2)),f[1]==="c"&&(s+=du(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=du(i/2)),f[4]==="c"&&(s-=du(r/2)),Ai(s,o,r,i)},_4=(e,t,n,s)=>{let o,r;for(r=0;r<s.length;r++)if(o=s_(e,t,s[r]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[r];return null},k4=(e,t,n)=>Ai(e.x-t,e.y-n,e.w+t*2,e.h+n*2),N4=(e,t)=>{const n=Ni(e.x,t.x),s=Ni(e.y,t.y),o=n_(e.x+e.w,t.x+t.w),r=n_(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Ai(n,s,o-n,r-s)},A4=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Ni(0,t.x-s),d=Ni(0,t.y-o),p=Ni(0,r-a),C=Ni(0,i-c);return s+=f,o+=d,n&&(r+=f,i+=d,s-=p,o-=C),r-=p,i-=C,Ai(s,o,r-s,i-o)},Ai=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),T4={inflate:k4,relativePosition:s_,findBestRelativePosition:_4,intersect:N4,clamp:A4,create:Ai,fromClientRect:e=>Ai(e.left,e.top,e.width,e.height)},R4=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,d))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},P4=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((d,p)=>{const C=R4(d,p);t[r]=C.resolve,no.ScriptLoader.loadScript(i).then(()=>C.start(c),()=>C.reject(a))});return e[r]=f,f}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),O4=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Qa;try{const e="__storage_test__";Qa=window.localStorage,Qa.setItem(e,e),Qa.removeItem(e)}catch{Qa=O4()}var D4=Qa;const B4={geom:{Rect:T4},util:{Delay:Un,Tools:G,VK:pe,URI:ls,EventDispatcher:Ip,Observable:Fp,I18n:ss,LocalStorage:D4,ImageUploader:pz},dom:{EventUtils:rr,TreeWalker:Dt,TextSeeker:ar,DOMUtils:at,ScriptLoader:no,RangeUtils:pi,Serializer:u0,StyleSheetLoader:Yh,ControlSelection:wy,BookmarkManager:_a,Selection:c0,Event:rr.Event},html:{Styles:wf,Entities:So,Node:mn,Schema:ko,DomParser:bi,Writer:rv,Serializer:Po},Env:Qe,AddOnManager:nn,Annotator:py,Formatter:w0,UndoManager:S0,EditorCommands:HS,WindowManager:p0,NotificationManager:m0,EditorObservable:qS,Shortcuts:QS,Editor:lu,FocusManager:jy,EditorManager:Fo,DOM:at.DOM,ScriptLoader:no.ScriptLoader,PluginManager:yi,ThemeManager:Er,ModelManager:Ci,IconManager:Tc,Resource:P4,FakeClipboard:S4,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},o_=G.extend(Fo,B4),$4=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(o_),$4(o_)})()})(Uk);var Xp=Uk.exports,x7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m};const S7=hk({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.1.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,u){const m=A9(null);let g=null,b={};function E(){if(m.value){b=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},l.config);const se=l.baseUrl,ye="zh_CN",Ne="en_US";if(b.language===Ne?(delete b.language,delete b.language_url):(b.language||(b.language=ye),!b.language_url&&b.language===ye&&(b.language_url=`${se}/@panhezeng/vue-tinymce@latest/dist/langs/${b.language}.js`),!b.font_formats&&b.language===ye&&(b.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(b.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(b.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${b.font_formats||""}`,b.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(b.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),b.external_plugins||(b.external_plugins={}),!b.external_plugins.textindentoutdent){const Me=Object.keys(b);for(let mt=Me.length-1;mt>=0;mt--){const Ct=Me[mt];if(Ct&&typeof Ct=="string"&&Ct.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(b[Ct]))){b.language===ye&&(b.external_plugins.textindentoutdentzhcn=`${se}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),b.external_plugins.textindentoutdent=`${se}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}b.target=m.value,b.init_instance_callback=Me=>{m.value&&(g=Me,N(),g.on(l.updateEvent,D),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(g))}}}function N(){xu().then(()=>{m.value&&g&&g.getContent()!==l.modelValue&&g.setContent(l.modelValue)})}function D(){xu().then(()=>{if(m.value&&g){const se=g.getContent();u.emit("update:modelValue",se),u.emit("content-change",se)}})}function L(){try{m.value&&g&&(g.plugins.autosave&&g.plugins.autosave.removeDraft(),Xp.PluginManager.remove("autosave"),g.remove(),g.destroy(),g=null)}catch{return}}function Z(){xu().then(()=>{m.value&&(L(),E(),Xp.init(b))})}return sl(()=>l.modelValue,N),sl(()=>l.config,()=>{Z()},{deep:!0}),yk(()=>{Xp.EditorManager.baseURL=l.url,Z()}),vk(()=>{L()}),{editorElement:m}}}),_7={class:"vue-tinymce-comp"},k7={ref:"editorElement"};function N7(l,u,m,g,b,E){return Pu(),Dk("div",_7,[ts("textarea",k7,null,512)])}var Qp=x7(S7,[["render",N7]]);const A7=Object.assign(Qp,{install:l=>{l.component(Qp.name,Qp)}}),zk=u7(w7);zk.use(A7);zk.mount("#app");
