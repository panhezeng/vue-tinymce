var K4=Object.defineProperty,G4=Object.defineProperties;var Y4=Object.getOwnPropertyDescriptors;var yu=Object.getOwnPropertySymbols;var g_=Object.prototype.hasOwnProperty,h_=Object.prototype.propertyIsEnumerable;var p_=(l,u,m)=>u in l?K4(l,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[u]=m,_e=(l,u)=>{for(var m in u||(u={}))g_.call(u,m)&&p_(l,m,u[m]);if(yu)for(var m of yu(u))h_.call(u,m)&&p_(l,m,u[m]);return l},mt=(l,u)=>G4(l,Y4(u));var b_=(l,u)=>{var m={};for(var g in l)g_.call(l,g)&&u.indexOf(g)<0&&(m[g]=l[g]);if(l!=null&&yu)for(var g of yu(l))u.indexOf(g)<0&&h_.call(l,g)&&(m[g]=l[g]);return m};const X4=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))g(b);new MutationObserver(b=>{for(const E of b)if(E.type==="childList")for(const N of E.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&g(N)}).observe(document,{childList:!0,subtree:!0});function m(b){const E={};return b.integrity&&(E.integrity=b.integrity),b.referrerpolicy&&(E.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?E.credentials="include":b.crossorigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function g(b){if(b.ep)return;b.ep=!0;const E=m(b);fetch(b.href,E)}};X4();function gg(l,u){const m=Object.create(null),g=l.split(",");for(let b=0;b<g.length;b++)m[g[b]]=!0;return u?b=>!!m[b.toLowerCase()]:b=>!!m[b]}const Q4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z4=gg(Q4);function j_(l){return!!l||l===""}function hg(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++){const g=l[m],b=fn(g)?t9(g):hg(g);if(b)for(const E in b)u[E]=b[E]}return u}else{if(fn(l))return l;if(dn(l))return l}}const J4=/;(?![^(]*\))/g,e9=/:(.+)/;function t9(l){const u={};return l.split(J4).forEach(m=>{if(m){const g=m.split(e9);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function bg(l){let u="";if(fn(l))u=l;else if(Qe(l))for(let m=0;m<l.length;m++){const g=bg(l[m]);g&&(u+=g+" ")}else if(dn(l))for(const m in l)l[m]&&(u+=m+" ");return u.trim()}const n9=l=>fn(l)?l:l==null?"":Qe(l)||dn(l)&&(l.toString===Y_||!Xe(l.toString))?JSON.stringify(l,q_,2):String(l),q_=(l,u)=>u&&u.__v_isRef?q_(l,u.value):$i(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((m,[g,b])=>(m[`${g} =>`]=b,m),{})}:K_(u)?{[`Set(${u.size})`]:[...u.values()]}:dn(u)&&!Qe(u)&&!X_(u)?String(u):u,_t={},Bi=[],Es=()=>{},s9=()=>!1,o9=/^on[^a-z]/,$u=l=>o9.test(l),Cg=l=>l.startsWith("onUpdate:"),Rn=Object.assign,yg=(l,u)=>{const m=l.indexOf(u);m>-1&&l.splice(m,1)},r9=Object.prototype.hasOwnProperty,it=(l,u)=>r9.call(l,u),Qe=Array.isArray,$i=l=>Iu(l)==="[object Map]",K_=l=>Iu(l)==="[object Set]",Xe=l=>typeof l=="function",fn=l=>typeof l=="string",vg=l=>typeof l=="symbol",dn=l=>l!==null&&typeof l=="object",G_=l=>dn(l)&&Xe(l.then)&&Xe(l.catch),Y_=Object.prototype.toString,Iu=l=>Y_.call(l),i9=l=>Iu(l).slice(8,-1),X_=l=>Iu(l)==="[object Object]",Eg=l=>fn(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,_u=gg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fu=l=>{const u=Object.create(null);return m=>u[m]||(u[m]=l(m))},a9=/-(\w)/g,Xs=Fu(l=>l.replace(a9,(u,m)=>m?m.toUpperCase():"")),l9=/\B([A-Z])/g,Mi=Fu(l=>l.replace(l9,"-$1").toLowerCase()),Lu=Fu(l=>l.charAt(0).toUpperCase()+l.slice(1)),Kp=Fu(l=>l?`on${Lu(l)}`:""),al=(l,u)=>!Object.is(l,u),Gp=(l,u)=>{for(let m=0;m<l.length;m++)l[m](u)},Tu=(l,u,m)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,value:m})},c9=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let C_;const u9=()=>C_||(C_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let qs;class f9{constructor(u=!1){this.active=!0,this.effects=[],this.cleanups=[],!u&&qs&&(this.parent=qs,this.index=(qs.scopes||(qs.scopes=[])).push(this)-1)}run(u){if(this.active){const m=qs;try{return qs=this,u()}finally{qs=m}}}on(){qs=this}off(){qs=this.parent}stop(u){if(this.active){let m,g;for(m=0,g=this.effects.length;m<g;m++)this.effects[m].stop();for(m=0,g=this.cleanups.length;m<g;m++)this.cleanups[m]();if(this.scopes)for(m=0,g=this.scopes.length;m<g;m++)this.scopes[m].stop(!0);if(this.parent&&!u){const b=this.parent.scopes.pop();b&&b!==this&&(this.parent.scopes[this.index]=b,b.index=this.index)}this.active=!1}}}function d9(l,u=qs){u&&u.active&&u.effects.push(l)}const wg=l=>{const u=new Set(l);return u.w=0,u.n=0,u},Q_=l=>(l.w&Ko)>0,Z_=l=>(l.n&Ko)>0,m9=({deps:l})=>{if(l.length)for(let u=0;u<l.length;u++)l[u].w|=Ko},p9=l=>{const{deps:u}=l;if(u.length){let m=0;for(let g=0;g<u.length;g++){const b=u[g];Q_(b)&&!Z_(b)?b.delete(l):u[m++]=b,b.w&=~Ko,b.n&=~Ko}u.length=m}},tg=new WeakMap;let tl=0,Ko=1;const ng=30;let ys;const $r=Symbol(""),sg=Symbol("");class xg{constructor(u,m=null,g){this.fn=u,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,d9(this,g)}run(){if(!this.active)return this.fn();let u=ys,m=jo;for(;u;){if(u===this)return;u=u.parent}try{return this.parent=ys,ys=this,jo=!0,Ko=1<<++tl,tl<=ng?m9(this):y_(this),this.fn()}finally{tl<=ng&&p9(this),Ko=1<<--tl,ys=this.parent,jo=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ys===this?this.deferStop=!0:this.active&&(y_(this),this.onStop&&this.onStop(),this.active=!1)}}function y_(l){const{deps:u}=l;if(u.length){for(let m=0;m<u.length;m++)u[m].delete(l);u.length=0}}let jo=!0;const J_=[];function Ui(){J_.push(jo),jo=!1}function zi(){const l=J_.pop();jo=l===void 0?!0:l}function Kn(l,u,m){if(jo&&ys){let g=tg.get(l);g||tg.set(l,g=new Map);let b=g.get(m);b||g.set(m,b=wg()),ek(b)}}function ek(l,u){let m=!1;tl<=ng?Z_(l)||(l.n|=Ko,m=!Q_(l)):m=!l.has(ys),m&&(l.add(ys),ys.deps.push(l))}function Co(l,u,m,g,b,E){const N=tg.get(l);if(!N)return;let D=[];if(u==="clear")D=[...N.values()];else if(m==="length"&&Qe(l))N.forEach((L,Z)=>{(Z==="length"||Z>=g)&&D.push(L)});else switch(m!==void 0&&D.push(N.get(m)),u){case"add":Qe(l)?Eg(m)&&D.push(N.get("length")):(D.push(N.get($r)),$i(l)&&D.push(N.get(sg)));break;case"delete":Qe(l)||(D.push(N.get($r)),$i(l)&&D.push(N.get(sg)));break;case"set":$i(l)&&D.push(N.get($r));break}if(D.length===1)D[0]&&og(D[0]);else{const L=[];for(const Z of D)Z&&L.push(...Z);og(wg(L))}}function og(l,u){const m=Qe(l)?l:[...l];for(const g of m)g.computed&&v_(g);for(const g of m)g.computed||v_(g)}function v_(l,u){(l!==ys||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const g9=gg("__proto__,__v_isRef,__isVue"),tk=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(vg)),h9=Sg(),b9=Sg(!1,!0),C9=Sg(!0),E_=y9();function y9(){const l={};return["includes","indexOf","lastIndexOf"].forEach(u=>{l[u]=function(...m){const g=pt(this);for(let E=0,N=this.length;E<N;E++)Kn(g,"get",E+"");const b=g[u](...m);return b===-1||b===!1?g[u](...m.map(pt)):b}}),["push","pop","shift","unshift","splice"].forEach(u=>{l[u]=function(...m){Ui();const g=pt(this)[u].apply(this,m);return zi(),g}}),l}function Sg(l=!1,u=!1){return function(g,b,E){if(b==="__v_isReactive")return!l;if(b==="__v_isReadonly")return l;if(b==="__v_isShallow")return u;if(b==="__v_raw"&&E===(l?u?$9:ik:u?rk:ok).get(g))return g;const N=Qe(g);if(!l&&N&&it(E_,b))return Reflect.get(E_,b,E);const D=Reflect.get(g,b,E);return(vg(b)?tk.has(b):g9(b))||(l||Kn(g,"get",b),u)?D:yn(D)?N&&Eg(b)?D:D.value:dn(D)?l?ak(D):Uu(D):D}}const v9=nk(),E9=nk(!0);function nk(l=!1){return function(m,g,b,E){let N=m[g];if(ll(N)&&yn(N)&&!yn(b))return!1;if(!l&&!ll(b)&&(rg(b)||(b=pt(b),N=pt(N)),!Qe(m)&&yn(N)&&!yn(b)))return N.value=b,!0;const D=Qe(m)&&Eg(g)?Number(g)<m.length:it(m,g),L=Reflect.set(m,g,b,E);return m===pt(E)&&(D?al(b,N)&&Co(m,"set",g,b):Co(m,"add",g,b)),L}}function w9(l,u){const m=it(l,u);l[u];const g=Reflect.deleteProperty(l,u);return g&&m&&Co(l,"delete",u,void 0),g}function x9(l,u){const m=Reflect.has(l,u);return(!vg(u)||!tk.has(u))&&Kn(l,"has",u),m}function S9(l){return Kn(l,"iterate",Qe(l)?"length":$r),Reflect.ownKeys(l)}const sk={get:h9,set:v9,deleteProperty:w9,has:x9,ownKeys:S9},_9={get:C9,set(l,u){return!0},deleteProperty(l,u){return!0}},k9=Rn({},sk,{get:b9,set:E9}),_g=l=>l,Mu=l=>Reflect.getPrototypeOf(l);function vu(l,u,m=!1,g=!1){l=l.__v_raw;const b=pt(l),E=pt(u);m||(u!==E&&Kn(b,"get",u),Kn(b,"get",E));const{has:N}=Mu(b),D=g?_g:m?Ag:cl;if(N.call(b,u))return D(l.get(u));if(N.call(b,E))return D(l.get(E));l!==b&&l.get(u)}function Eu(l,u=!1){const m=this.__v_raw,g=pt(m),b=pt(l);return u||(l!==b&&Kn(g,"has",l),Kn(g,"has",b)),l===b?m.has(l):m.has(l)||m.has(b)}function wu(l,u=!1){return l=l.__v_raw,!u&&Kn(pt(l),"iterate",$r),Reflect.get(l,"size",l)}function w_(l){l=pt(l);const u=pt(this);return Mu(u).has.call(u,l)||(u.add(l),Co(u,"add",l,l)),this}function x_(l,u){u=pt(u);const m=pt(this),{has:g,get:b}=Mu(m);let E=g.call(m,l);E||(l=pt(l),E=g.call(m,l));const N=b.call(m,l);return m.set(l,u),E?al(u,N)&&Co(m,"set",l,u):Co(m,"add",l,u),this}function S_(l){const u=pt(this),{has:m,get:g}=Mu(u);let b=m.call(u,l);b||(l=pt(l),b=m.call(u,l)),g&&g.call(u,l);const E=u.delete(l);return b&&Co(u,"delete",l,void 0),E}function __(){const l=pt(this),u=l.size!==0,m=l.clear();return u&&Co(l,"clear",void 0,void 0),m}function xu(l,u){return function(g,b){const E=this,N=E.__v_raw,D=pt(N),L=u?_g:l?Ag:cl;return!l&&Kn(D,"iterate",$r),N.forEach((Z,se)=>g.call(b,L(Z),L(se),E))}}function Su(l,u,m){return function(...g){const b=this.__v_raw,E=pt(b),N=$i(E),D=l==="entries"||l===Symbol.iterator&&N,L=l==="keys"&&N,Z=b[l](...g),se=m?_g:u?Ag:cl;return!u&&Kn(E,"iterate",L?sg:$r),{next(){const{value:ye,done:Ae}=Z.next();return Ae?{value:ye,done:Ae}:{value:D?[se(ye[0]),se(ye[1])]:se(ye),done:Ae}},[Symbol.iterator](){return this}}}}function Ho(l){return function(...u){return l==="delete"?!1:this}}function N9(){const l={get(E){return vu(this,E)},get size(){return wu(this)},has:Eu,add:w_,set:x_,delete:S_,clear:__,forEach:xu(!1,!1)},u={get(E){return vu(this,E,!1,!0)},get size(){return wu(this)},has:Eu,add:w_,set:x_,delete:S_,clear:__,forEach:xu(!1,!0)},m={get(E){return vu(this,E,!0)},get size(){return wu(this,!0)},has(E){return Eu.call(this,E,!0)},add:Ho("add"),set:Ho("set"),delete:Ho("delete"),clear:Ho("clear"),forEach:xu(!0,!1)},g={get(E){return vu(this,E,!0,!0)},get size(){return wu(this,!0)},has(E){return Eu.call(this,E,!0)},add:Ho("add"),set:Ho("set"),delete:Ho("delete"),clear:Ho("clear"),forEach:xu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=Su(E,!1,!1),m[E]=Su(E,!0,!1),u[E]=Su(E,!1,!0),g[E]=Su(E,!0,!0)}),[l,m,u,g]}const[A9,T9,R9,P9]=N9();function kg(l,u){const m=u?l?P9:R9:l?T9:A9;return(g,b,E)=>b==="__v_isReactive"?!l:b==="__v_isReadonly"?l:b==="__v_raw"?g:Reflect.get(it(m,b)&&b in g?m:g,b,E)}const O9={get:kg(!1,!1)},D9={get:kg(!1,!0)},B9={get:kg(!0,!1)},ok=new WeakMap,rk=new WeakMap,ik=new WeakMap,$9=new WeakMap;function I9(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function F9(l){return l.__v_skip||!Object.isExtensible(l)?0:I9(i9(l))}function Uu(l){return ll(l)?l:Ng(l,!1,sk,O9,ok)}function L9(l){return Ng(l,!1,k9,D9,rk)}function ak(l){return Ng(l,!0,_9,B9,ik)}function Ng(l,u,m,g,b){if(!dn(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const E=b.get(l);if(E)return E;const N=F9(l);if(N===0)return l;const D=new Proxy(l,N===2?g:m);return b.set(l,D),D}function Ii(l){return ll(l)?Ii(l.__v_raw):!!(l&&l.__v_isReactive)}function ll(l){return!!(l&&l.__v_isReadonly)}function rg(l){return!!(l&&l.__v_isShallow)}function lk(l){return Ii(l)||ll(l)}function pt(l){const u=l&&l.__v_raw;return u?pt(u):l}function ck(l){return Tu(l,"__v_skip",!0),l}const cl=l=>dn(l)?Uu(l):l,Ag=l=>dn(l)?ak(l):l;function uk(l){jo&&ys&&(l=pt(l),ek(l.dep||(l.dep=wg())))}function fk(l,u){l=pt(l),l.dep&&og(l.dep)}function yn(l){return!!(l&&l.__v_isRef===!0)}function M9(l){return U9(l,!1)}function U9(l,u){return yn(l)?l:new z9(l,u)}class z9{constructor(u,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?u:pt(u),this._value=m?u:cl(u)}get value(){return uk(this),this._value}set value(u){u=this.__v_isShallow?u:pt(u),al(u,this._rawValue)&&(this._rawValue=u,this._value=this.__v_isShallow?u:cl(u),fk(this))}}function H9(l){return yn(l)?l.value:l}const V9={get:(l,u,m)=>H9(Reflect.get(l,u,m)),set:(l,u,m,g)=>{const b=l[u];return yn(b)&&!yn(m)?(b.value=m,!0):Reflect.set(l,u,m,g)}};function dk(l){return Ii(l)?l:new Proxy(l,V9)}class W9{constructor(u,m,g,b){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new xg(u,()=>{this._dirty||(this._dirty=!0,fk(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!b,this.__v_isReadonly=g}get value(){const u=pt(this);return uk(u),(u._dirty||!u._cacheable)&&(u._dirty=!1,u._value=u.effect.run()),u._value}set value(u){this._setter(u)}}function j9(l,u,m=!1){let g,b;const E=Xe(l);return E?(g=l,b=Es):(g=l.get,b=l.set),new W9(g,b,E||!b,m)}function qo(l,u,m,g){let b;try{b=g?l(...g):l()}catch(E){zu(E,u,m)}return b}function ws(l,u,m,g){if(Xe(l)){const E=qo(l,u,m,g);return E&&G_(E)&&E.catch(N=>{zu(N,u,m)}),E}const b=[];for(let E=0;E<l.length;E++)b.push(ws(l[E],u,m,g));return b}function zu(l,u,m,g=!0){const b=u?u.vnode:null;if(u){let E=u.parent;const N=u.proxy,D=m;for(;E;){const Z=E.ec;if(Z){for(let se=0;se<Z.length;se++)if(Z[se](l,N,D)===!1)return}E=E.parent}const L=u.appContext.config.errorHandler;if(L){qo(L,null,10,[l,N,D]);return}}q9(l,m,b,g)}function q9(l,u,m,g=!0){console.error(l)}let Ru=!1,ig=!1;const qn=[];let ho=0;const sl=[];let nl=null,Pi=0;const ol=[];let Vo=null,Oi=0;const mk=Promise.resolve();let Tg=null,ag=null;function ku(l){const u=Tg||mk;return l?u.then(this?l.bind(this):l):u}function K9(l){let u=ho+1,m=qn.length;for(;u<m;){const g=u+m>>>1;ul(qn[g])<l?u=g+1:m=g}return u}function pk(l){(!qn.length||!qn.includes(l,Ru&&l.allowRecurse?ho+1:ho))&&l!==ag&&(l.id==null?qn.push(l):qn.splice(K9(l.id),0,l),gk())}function gk(){!Ru&&!ig&&(ig=!0,Tg=mk.then(Ck))}function G9(l){const u=qn.indexOf(l);u>ho&&qn.splice(u,1)}function hk(l,u,m,g){Qe(l)?m.push(...l):(!u||!u.includes(l,l.allowRecurse?g+1:g))&&m.push(l),gk()}function Y9(l){hk(l,nl,sl,Pi)}function X9(l){hk(l,Vo,ol,Oi)}function Hu(l,u=null){if(sl.length){for(ag=u,nl=[...new Set(sl)],sl.length=0,Pi=0;Pi<nl.length;Pi++)nl[Pi]();nl=null,Pi=0,ag=null,Hu(l,u)}}function bk(l){if(Hu(),ol.length){const u=[...new Set(ol)];if(ol.length=0,Vo){Vo.push(...u);return}for(Vo=u,Vo.sort((m,g)=>ul(m)-ul(g)),Oi=0;Oi<Vo.length;Oi++)Vo[Oi]();Vo=null,Oi=0}}const ul=l=>l.id==null?1/0:l.id;function Ck(l){ig=!1,Ru=!0,Hu(l),qn.sort((m,g)=>ul(m)-ul(g));const u=Es;try{for(ho=0;ho<qn.length;ho++){const m=qn[ho];m&&m.active!==!1&&qo(m,null,14)}}finally{ho=0,qn.length=0,bk(),Ru=!1,Tg=null,(qn.length||sl.length||ol.length)&&Ck(l)}}function Q9(l,u,...m){if(l.isUnmounted)return;const g=l.vnode.props||_t;let b=m;const E=u.startsWith("update:"),N=E&&u.slice(7);if(N&&N in g){const se=`${N==="modelValue"?"model":N}Modifiers`,{number:ye,trim:Ae}=g[se]||_t;Ae&&(b=m.map(Ue=>Ue.trim())),ye&&(b=m.map(c9))}let D,L=g[D=Kp(u)]||g[D=Kp(Xs(u))];!L&&E&&(L=g[D=Kp(Mi(u))]),L&&ws(L,l,6,b);const Z=g[D+"Once"];if(Z){if(!l.emitted)l.emitted={};else if(l.emitted[D])return;l.emitted[D]=!0,ws(Z,l,6,b)}}function yk(l,u,m=!1){const g=u.emitsCache,b=g.get(l);if(b!==void 0)return b;const E=l.emits;let N={},D=!1;if(!Xe(l)){const L=Z=>{const se=yk(Z,u,!0);se&&(D=!0,Rn(N,se))};!m&&u.mixins.length&&u.mixins.forEach(L),l.extends&&L(l.extends),l.mixins&&l.mixins.forEach(L)}return!E&&!D?(g.set(l,null),null):(Qe(E)?E.forEach(L=>N[L]=null):Rn(N,E),g.set(l,N),N)}function Vu(l,u){return!l||!$u(u)?!1:(u=u.slice(2).replace(/Once$/,""),it(l,u[0].toLowerCase()+u.slice(1))||it(l,Mi(u))||it(l,u))}let Ys=null,vk=null;function Pu(l){const u=Ys;return Ys=l,vk=l&&l.type.__scopeId||null,u}function Z9(l,u=Ys,m){if(!u||l._n)return l;const g=(...b)=>{g._d&&$_(-1);const E=Pu(u),N=l(...b);return Pu(E),g._d&&$_(1),N};return g._n=!0,g._c=!0,g._d=!0,g}function Yp(l){const{type:u,vnode:m,proxy:g,withProxy:b,props:E,propsOptions:[N],slots:D,attrs:L,emit:Z,render:se,renderCache:ye,data:Ae,setupState:Ue,ctx:gt,inheritAttrs:vt}=l;let tt,ct;const $n=Pu(l);try{if(m.shapeFlag&4){const dt=b||g;tt=Gs(se.call(dt,dt,ye,E,Ue,Ae,gt)),ct=L}else{const dt=u;tt=Gs(dt.length>1?dt(E,{attrs:L,slots:D,emit:Z}):dt(E,null)),ct=u.props?L:J9(L)}}catch(dt){il.length=0,zu(dt,l,1),tt=bo(Fr)}let me=tt;if(ct&&vt!==!1){const dt=Object.keys(ct),{shapeFlag:Qs}=me;dt.length&&Qs&7&&(N&&dt.some(Cg)&&(ct=eq(ct,N)),me=Fi(me,ct))}return m.dirs&&(me=Fi(me),me.dirs=me.dirs?me.dirs.concat(m.dirs):m.dirs),m.transition&&(me.transition=m.transition),tt=me,Pu($n),tt}const J9=l=>{let u;for(const m in l)(m==="class"||m==="style"||$u(m))&&((u||(u={}))[m]=l[m]);return u},eq=(l,u)=>{const m={};for(const g in l)(!Cg(g)||!(g.slice(9)in u))&&(m[g]=l[g]);return m};function tq(l,u,m){const{props:g,children:b,component:E}=l,{props:N,children:D,patchFlag:L}=u,Z=E.emitsOptions;if(u.dirs||u.transition)return!0;if(m&&L>=0){if(L&1024)return!0;if(L&16)return g?k_(g,N,Z):!!N;if(L&8){const se=u.dynamicProps;for(let ye=0;ye<se.length;ye++){const Ae=se[ye];if(N[Ae]!==g[Ae]&&!Vu(Z,Ae))return!0}}}else return(b||D)&&(!D||!D.$stable)?!0:g===N?!1:g?N?k_(g,N,Z):!0:!!N;return!1}function k_(l,u,m){const g=Object.keys(u);if(g.length!==Object.keys(l).length)return!0;for(let b=0;b<g.length;b++){const E=g[b];if(u[E]!==l[E]&&!Vu(m,E))return!0}return!1}function nq({vnode:l,parent:u},m){for(;u&&u.subTree===l;)(l=u.vnode).el=m,u=u.parent}const sq=l=>l.__isSuspense;function oq(l,u){u&&u.pendingBranch?Qe(l)?u.effects.push(...l):u.effects.push(l):X9(l)}function rq(l,u){if(un){let m=un.provides;const g=un.parent&&un.parent.provides;g===m&&(m=un.provides=Object.create(g)),m[l]=u}}function Xp(l,u,m=!1){const g=un||Ys;if(g){const b=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(b&&l in b)return b[l];if(arguments.length>1)return m&&Xe(u)?u.call(g.proxy):u}}const N_={};function rl(l,u,m){return Ek(l,u,m)}function Ek(l,u,{immediate:m,deep:g,flush:b,onTrack:E,onTrigger:N}=_t){const D=un;let L,Z=!1,se=!1;if(yn(l)?(L=()=>l.value,Z=rg(l)):Ii(l)?(L=()=>l,g=!0):Qe(l)?(se=!0,Z=l.some(ct=>Ii(ct)||rg(ct)),L=()=>l.map(ct=>{if(yn(ct))return ct.value;if(Ii(ct))return Di(ct);if(Xe(ct))return qo(ct,D,2)})):Xe(l)?u?L=()=>qo(l,D,2):L=()=>{if(!(D&&D.isUnmounted))return ye&&ye(),ws(l,D,3,[Ae])}:L=Es,u&&g){const ct=L;L=()=>Di(ct())}let ye,Ae=ct=>{ye=tt.onStop=()=>{qo(ct,D,4)}};if(dl)return Ae=Es,u?m&&ws(u,D,3,[L(),se?[]:void 0,Ae]):L(),Es;let Ue=se?[]:N_;const gt=()=>{if(!!tt.active)if(u){const ct=tt.run();(g||Z||(se?ct.some(($n,me)=>al($n,Ue[me])):al(ct,Ue)))&&(ye&&ye(),ws(u,D,3,[ct,Ue===N_?void 0:Ue,Ae]),Ue=ct)}else tt.run()};gt.allowRecurse=!!u;let vt;b==="sync"?vt=gt:b==="post"?vt=()=>Bn(gt,D&&D.suspense):vt=()=>Y9(gt);const tt=new xg(L,vt);return u?m?gt():Ue=tt.run():b==="post"?Bn(tt.run.bind(tt),D&&D.suspense):tt.run(),()=>{tt.stop(),D&&D.scope&&yg(D.scope.effects,tt)}}function iq(l,u,m){const g=this.proxy,b=fn(l)?l.includes(".")?wk(g,l):()=>g[l]:l.bind(g,g);let E;Xe(u)?E=u:(E=u.handler,m=u);const N=un;Li(this);const D=Ek(b,E.bind(g),m);return N?Li(N):Ir(),D}function wk(l,u){const m=u.split(".");return()=>{let g=l;for(let b=0;b<m.length&&g;b++)g=g[m[b]];return g}}function Di(l,u){if(!dn(l)||l.__v_skip||(u=u||new Set,u.has(l)))return l;if(u.add(l),yn(l))Di(l.value,u);else if(Qe(l))for(let m=0;m<l.length;m++)Di(l[m],u);else if(K_(l)||$i(l))l.forEach(m=>{Di(m,u)});else if(X_(l))for(const m in l)Di(l[m],u);return l}function xk(l){return Xe(l)?{setup:l,name:l.name}:l}const Nu=l=>!!l.type.__asyncLoader,Sk=l=>l.type.__isKeepAlive;function aq(l,u){_k(l,"a",u)}function lq(l,u){_k(l,"da",u)}function _k(l,u,m=un){const g=l.__wdc||(l.__wdc=()=>{let b=m;for(;b;){if(b.isDeactivated)return;b=b.parent}return l()});if(Wu(u,g,m),m){let b=m.parent;for(;b&&b.parent;)Sk(b.parent.vnode)&&cq(g,u,m,b),b=b.parent}}function cq(l,u,m,g){const b=Wu(u,l,g,!0);Ak(()=>{yg(g[u],b)},m)}function Wu(l,u,m=un,g=!1){if(m){const b=m[l]||(m[l]=[]),E=u.__weh||(u.__weh=(...N)=>{if(m.isUnmounted)return;Ui(),Li(m);const D=ws(u,m,l,N);return Ir(),zi(),D});return g?b.unshift(E):b.push(E),E}}const yo=l=>(u,m=un)=>(!dl||l==="sp")&&Wu(l,u,m),uq=yo("bm"),kk=yo("m"),fq=yo("bu"),dq=yo("u"),Nk=yo("bum"),Ak=yo("um"),mq=yo("sp"),pq=yo("rtg"),gq=yo("rtc");function hq(l,u=un){Wu("ec",l,u)}function Pr(l,u,m,g){const b=l.dirs,E=u&&u.dirs;for(let N=0;N<b.length;N++){const D=b[N];E&&(D.oldValue=E[N].value);let L=D.dir[g];L&&(Ui(),ws(L,m,8,[l.el,D,l,u]),zi())}}const Tk="components";function bq(l,u){return yq(Tk,l,!0,u)||l}const Cq=Symbol();function yq(l,u,m=!0,g=!1){const b=Ys||un;if(b){const E=b.type;if(l===Tk){const D=Qq(E,!1);if(D&&(D===u||D===Xs(u)||D===Lu(Xs(u))))return E}const N=A_(b[l]||E[l],u)||A_(b.appContext[l],u);return!N&&g?E:N}}function A_(l,u){return l&&(l[u]||l[Xs(u)]||l[Lu(Xs(u))])}const lg=l=>l?Vk(l)?Dg(l)||l.proxy:lg(l.parent):null,Ou=Rn(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>lg(l.parent),$root:l=>lg(l.root),$emit:l=>l.emit,$options:l=>Pk(l),$forceUpdate:l=>l.f||(l.f=()=>pk(l.update)),$nextTick:l=>l.n||(l.n=ku.bind(l.proxy)),$watch:l=>iq.bind(l)}),vq={get({_:l},u){const{ctx:m,setupState:g,data:b,props:E,accessCache:N,type:D,appContext:L}=l;let Z;if(u[0]!=="$"){const Ue=N[u];if(Ue!==void 0)switch(Ue){case 1:return g[u];case 2:return b[u];case 4:return m[u];case 3:return E[u]}else{if(g!==_t&&it(g,u))return N[u]=1,g[u];if(b!==_t&&it(b,u))return N[u]=2,b[u];if((Z=l.propsOptions[0])&&it(Z,u))return N[u]=3,E[u];if(m!==_t&&it(m,u))return N[u]=4,m[u];cg&&(N[u]=0)}}const se=Ou[u];let ye,Ae;if(se)return u==="$attrs"&&Kn(l,"get",u),se(l);if((ye=D.__cssModules)&&(ye=ye[u]))return ye;if(m!==_t&&it(m,u))return N[u]=4,m[u];if(Ae=L.config.globalProperties,it(Ae,u))return Ae[u]},set({_:l},u,m){const{data:g,setupState:b,ctx:E}=l;return b!==_t&&it(b,u)?(b[u]=m,!0):g!==_t&&it(g,u)?(g[u]=m,!0):it(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(E[u]=m,!0)},has({_:{data:l,setupState:u,accessCache:m,ctx:g,appContext:b,propsOptions:E}},N){let D;return!!m[N]||l!==_t&&it(l,N)||u!==_t&&it(u,N)||(D=E[0])&&it(D,N)||it(g,N)||it(Ou,N)||it(b.config.globalProperties,N)},defineProperty(l,u,m){return m.get!=null?l._.accessCache[u]=0:it(m,"value")&&this.set(l,u,m.value,null),Reflect.defineProperty(l,u,m)}};let cg=!0;function Eq(l){const u=Pk(l),m=l.proxy,g=l.ctx;cg=!1,u.beforeCreate&&T_(u.beforeCreate,l,"bc");const{data:b,computed:E,methods:N,watch:D,provide:L,inject:Z,created:se,beforeMount:ye,mounted:Ae,beforeUpdate:Ue,updated:gt,activated:vt,deactivated:tt,beforeDestroy:ct,beforeUnmount:$n,destroyed:me,unmounted:dt,render:Qs,renderTracked:At,renderTriggered:Zs,errorCaptured:Gn,serverPrefetch:Rt,expose:Ft,inheritAttrs:Ne,components:Ye,directives:vn,filters:Js}=u;if(Z&&wq(Z,g,null,l.appContext.config.unwrapInjectedRef),N)for(const kt in N){const K=N[kt];Xe(K)&&(g[kt]=K.bind(m))}if(b){const kt=b.call(m,m);dn(kt)&&(l.data=Uu(kt))}if(cg=!0,E)for(const kt in E){const K=E[kt],St=Xe(K)?K.bind(m,m):Xe(K.get)?K.get.bind(m,m):Es,Hi=!Xe(K)&&Xe(K.set)?K.set.bind(m):Es,re=jk({get:St,set:Hi});Object.defineProperty(g,kt,{enumerable:!0,configurable:!0,get:()=>re.value,set:xs=>re.value=xs})}if(D)for(const kt in D)Rk(D[kt],g,m,kt);if(L){const kt=Xe(L)?L.call(m):L;Reflect.ownKeys(kt).forEach(K=>{rq(K,kt[K])})}se&&T_(se,l,"c");function Bt(kt,K){Qe(K)?K.forEach(St=>kt(St.bind(m))):K&&kt(K.bind(m))}if(Bt(uq,ye),Bt(kk,Ae),Bt(fq,Ue),Bt(dq,gt),Bt(aq,vt),Bt(lq,tt),Bt(hq,Gn),Bt(gq,At),Bt(pq,Zs),Bt(Nk,$n),Bt(Ak,dt),Bt(mq,Rt),Qe(Ft))if(Ft.length){const kt=l.exposed||(l.exposed={});Ft.forEach(K=>{Object.defineProperty(kt,K,{get:()=>m[K],set:St=>m[K]=St})})}else l.exposed||(l.exposed={});Qs&&l.render===Es&&(l.render=Qs),Ne!=null&&(l.inheritAttrs=Ne),Ye&&(l.components=Ye),vn&&(l.directives=vn)}function wq(l,u,m=Es,g=!1){Qe(l)&&(l=ug(l));for(const b in l){const E=l[b];let N;dn(E)?"default"in E?N=Xp(E.from||b,E.default,!0):N=Xp(E.from||b):N=Xp(E),yn(N)&&g?Object.defineProperty(u,b,{enumerable:!0,configurable:!0,get:()=>N.value,set:D=>N.value=D}):u[b]=N}}function T_(l,u,m){ws(Qe(l)?l.map(g=>g.bind(u.proxy)):l.bind(u.proxy),u,m)}function Rk(l,u,m,g){const b=g.includes(".")?wk(m,g):()=>m[g];if(fn(l)){const E=u[l];Xe(E)&&rl(b,E)}else if(Xe(l))rl(b,l.bind(m));else if(dn(l))if(Qe(l))l.forEach(E=>Rk(E,u,m,g));else{const E=Xe(l.handler)?l.handler.bind(m):u[l.handler];Xe(E)&&rl(b,E,l)}}function Pk(l){const u=l.type,{mixins:m,extends:g}=u,{mixins:b,optionsCache:E,config:{optionMergeStrategies:N}}=l.appContext,D=E.get(u);let L;return D?L=D:!b.length&&!m&&!g?L=u:(L={},b.length&&b.forEach(Z=>Du(L,Z,N,!0)),Du(L,u,N)),E.set(u,L),L}function Du(l,u,m,g=!1){const{mixins:b,extends:E}=u;E&&Du(l,E,m,!0),b&&b.forEach(N=>Du(l,N,m,!0));for(const N in u)if(!(g&&N==="expose")){const D=xq[N]||m&&m[N];l[N]=D?D(l[N],u[N]):u[N]}return l}const xq={data:R_,props:Dr,emits:Dr,methods:Dr,computed:Dr,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:Dr,directives:Dr,watch:_q,provide:R_,inject:Sq};function R_(l,u){return u?l?function(){return Rn(Xe(l)?l.call(this,this):l,Xe(u)?u.call(this,this):u)}:u:l}function Sq(l,u){return Dr(ug(l),ug(u))}function ug(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++)u[l[m]]=l[m];return u}return l}function Tn(l,u){return l?[...new Set([].concat(l,u))]:u}function Dr(l,u){return l?Rn(Rn(Object.create(null),l),u):u}function _q(l,u){if(!l)return u;if(!u)return l;const m=Rn(Object.create(null),l);for(const g in u)m[g]=Tn(l[g],u[g]);return m}function kq(l,u,m,g=!1){const b={},E={};Tu(E,ju,1),l.propsDefaults=Object.create(null),Ok(l,u,b,E);for(const N in l.propsOptions[0])N in b||(b[N]=void 0);m?l.props=g?b:L9(b):l.type.props?l.props=b:l.props=E,l.attrs=E}function Nq(l,u,m,g){const{props:b,attrs:E,vnode:{patchFlag:N}}=l,D=pt(b),[L]=l.propsOptions;let Z=!1;if((g||N>0)&&!(N&16)){if(N&8){const se=l.vnode.dynamicProps;for(let ye=0;ye<se.length;ye++){let Ae=se[ye];if(Vu(l.emitsOptions,Ae))continue;const Ue=u[Ae];if(L)if(it(E,Ae))Ue!==E[Ae]&&(E[Ae]=Ue,Z=!0);else{const gt=Xs(Ae);b[gt]=fg(L,D,gt,Ue,l,!1)}else Ue!==E[Ae]&&(E[Ae]=Ue,Z=!0)}}}else{Ok(l,u,b,E)&&(Z=!0);let se;for(const ye in D)(!u||!it(u,ye)&&((se=Mi(ye))===ye||!it(u,se)))&&(L?m&&(m[ye]!==void 0||m[se]!==void 0)&&(b[ye]=fg(L,D,ye,void 0,l,!0)):delete b[ye]);if(E!==D)for(const ye in E)(!u||!it(u,ye)&&!0)&&(delete E[ye],Z=!0)}Z&&Co(l,"set","$attrs")}function Ok(l,u,m,g){const[b,E]=l.propsOptions;let N=!1,D;if(u)for(let L in u){if(_u(L))continue;const Z=u[L];let se;b&&it(b,se=Xs(L))?!E||!E.includes(se)?m[se]=Z:(D||(D={}))[se]=Z:Vu(l.emitsOptions,L)||(!(L in g)||Z!==g[L])&&(g[L]=Z,N=!0)}if(E){const L=pt(m),Z=D||_t;for(let se=0;se<E.length;se++){const ye=E[se];m[ye]=fg(b,L,ye,Z[ye],l,!it(Z,ye))}}return N}function fg(l,u,m,g,b,E){const N=l[m];if(N!=null){const D=it(N,"default");if(D&&g===void 0){const L=N.default;if(N.type!==Function&&Xe(L)){const{propsDefaults:Z}=b;m in Z?g=Z[m]:(Li(b),g=Z[m]=L.call(null,u),Ir())}else g=L}N[0]&&(E&&!D?g=!1:N[1]&&(g===""||g===Mi(m))&&(g=!0))}return g}function Dk(l,u,m=!1){const g=u.propsCache,b=g.get(l);if(b)return b;const E=l.props,N={},D=[];let L=!1;if(!Xe(l)){const se=ye=>{L=!0;const[Ae,Ue]=Dk(ye,u,!0);Rn(N,Ae),Ue&&D.push(...Ue)};!m&&u.mixins.length&&u.mixins.forEach(se),l.extends&&se(l.extends),l.mixins&&l.mixins.forEach(se)}if(!E&&!L)return g.set(l,Bi),Bi;if(Qe(E))for(let se=0;se<E.length;se++){const ye=Xs(E[se]);P_(ye)&&(N[ye]=_t)}else if(E)for(const se in E){const ye=Xs(se);if(P_(ye)){const Ae=E[se],Ue=N[ye]=Qe(Ae)||Xe(Ae)?{type:Ae}:Ae;if(Ue){const gt=B_(Boolean,Ue.type),vt=B_(String,Ue.type);Ue[0]=gt>-1,Ue[1]=vt<0||gt<vt,(gt>-1||it(Ue,"default"))&&D.push(ye)}}}const Z=[N,D];return g.set(l,Z),Z}function P_(l){return l[0]!=="$"}function O_(l){const u=l&&l.toString().match(/^\s*function (\w+)/);return u?u[1]:l===null?"null":""}function D_(l,u){return O_(l)===O_(u)}function B_(l,u){return Qe(u)?u.findIndex(m=>D_(m,l)):Xe(u)&&D_(u,l)?0:-1}const Bk=l=>l[0]==="_"||l==="$stable",Rg=l=>Qe(l)?l.map(Gs):[Gs(l)],Aq=(l,u,m)=>{if(u._n)return u;const g=Z9((...b)=>Rg(u(...b)),m);return g._c=!1,g},$k=(l,u,m)=>{const g=l._ctx;for(const b in l){if(Bk(b))continue;const E=l[b];if(Xe(E))u[b]=Aq(b,E,g);else if(E!=null){const N=Rg(E);u[b]=()=>N}}},Ik=(l,u)=>{const m=Rg(u);l.slots.default=()=>m},Tq=(l,u)=>{if(l.vnode.shapeFlag&32){const m=u._;m?(l.slots=pt(u),Tu(u,"_",m)):$k(u,l.slots={})}else l.slots={},u&&Ik(l,u);Tu(l.slots,ju,1)},Rq=(l,u,m)=>{const{vnode:g,slots:b}=l;let E=!0,N=_t;if(g.shapeFlag&32){const D=u._;D?m&&D===1?E=!1:(Rn(b,u),!m&&D===1&&delete b._):(E=!u.$stable,$k(u,b)),N=u}else u&&(Ik(l,u),N={default:1});if(E)for(const D in b)!Bk(D)&&!(D in N)&&delete b[D]};function Fk(){return{app:null,config:{isNativeTag:s9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pq=0;function Oq(l,u){return function(g,b=null){Xe(g)||(g=Object.assign({},g)),b!=null&&!dn(b)&&(b=null);const E=Fk(),N=new Set;let D=!1;const L=E.app={_uid:Pq++,_component:g,_props:b,_container:null,_context:E,_instance:null,version:Jq,get config(){return E.config},set config(Z){},use(Z,...se){return N.has(Z)||(Z&&Xe(Z.install)?(N.add(Z),Z.install(L,...se)):Xe(Z)&&(N.add(Z),Z(L,...se))),L},mixin(Z){return E.mixins.includes(Z)||E.mixins.push(Z),L},component(Z,se){return se?(E.components[Z]=se,L):E.components[Z]},directive(Z,se){return se?(E.directives[Z]=se,L):E.directives[Z]},mount(Z,se,ye){if(!D){const Ae=bo(g,b);return Ae.appContext=E,se&&u?u(Ae,Z):l(Ae,Z,ye),D=!0,L._container=Z,Z.__vue_app__=L,Dg(Ae.component)||Ae.component.proxy}},unmount(){D&&(l(null,L._container),delete L._container.__vue_app__)},provide(Z,se){return E.provides[Z]=se,L}};return L}}function dg(l,u,m,g,b=!1){if(Qe(l)){l.forEach((Ae,Ue)=>dg(Ae,u&&(Qe(u)?u[Ue]:u),m,g,b));return}if(Nu(g)&&!b)return;const E=g.shapeFlag&4?Dg(g.component)||g.component.proxy:g.el,N=b?null:E,{i:D,r:L}=l,Z=u&&u.r,se=D.refs===_t?D.refs={}:D.refs,ye=D.setupState;if(Z!=null&&Z!==L&&(fn(Z)?(se[Z]=null,it(ye,Z)&&(ye[Z]=null)):yn(Z)&&(Z.value=null)),Xe(L))qo(L,D,12,[N,se]);else{const Ae=fn(L),Ue=yn(L);if(Ae||Ue){const gt=()=>{if(l.f){const vt=Ae?se[L]:L.value;b?Qe(vt)&&yg(vt,E):Qe(vt)?vt.includes(E)||vt.push(E):Ae?(se[L]=[E],it(ye,L)&&(ye[L]=se[L])):(L.value=[E],l.k&&(se[l.k]=L.value))}else Ae?(se[L]=N,it(ye,L)&&(ye[L]=N)):Ue&&(L.value=N,l.k&&(se[l.k]=N))};N?(gt.id=-1,Bn(gt,m)):gt()}}}const Bn=oq;function Dq(l){return Bq(l)}function Bq(l,u){const m=u9();m.__VUE__=!0;const{insert:g,remove:b,patchProp:E,createElement:N,createText:D,createComment:L,setText:Z,setElementText:se,parentNode:ye,nextSibling:Ae,setScopeId:Ue=Es,cloneNode:gt,insertStaticContent:vt}=l,tt=(k,R,U,z=null,T=null,le=null,be=!1,H=null,de=!!R.dynamicChildren)=>{if(k===R)return;k&&!el(k,R)&&(z=h(k),Ss(k,T,le,!0),k=null),R.patchFlag===-2&&(de=!1,R.dynamicChildren=null);const{type:Q,ref:Re,shapeFlag:ge}=R;switch(Q){case Pg:ct(k,R,U,z);break;case Fr:$n(k,R,U,z);break;case Qp:k==null&&me(R,U,z,be);break;case Ks:vn(k,R,U,z,T,le,be,H,de);break;default:ge&1?At(k,R,U,z,T,le,be,H,de):ge&6?Js(k,R,U,z,T,le,be,H,de):(ge&64||ge&128)&&Q.process(k,R,U,z,T,le,be,H,de,vo)}Re!=null&&T&&dg(Re,k&&k.ref,le,R||k,!R)},ct=(k,R,U,z)=>{if(k==null)g(R.el=D(R.children),U,z);else{const T=R.el=k.el;R.children!==k.children&&Z(T,R.children)}},$n=(k,R,U,z)=>{k==null?g(R.el=L(R.children||""),U,z):R.el=k.el},me=(k,R,U,z)=>{[k.el,k.anchor]=vt(k.children,R,U,z,k.el,k.anchor)},dt=({el:k,anchor:R},U,z)=>{let T;for(;k&&k!==R;)T=Ae(k),g(k,U,z),k=T;g(R,U,z)},Qs=({el:k,anchor:R})=>{let U;for(;k&&k!==R;)U=Ae(k),b(k),k=U;b(R)},At=(k,R,U,z,T,le,be,H,de)=>{be=be||R.type==="svg",k==null?Zs(R,U,z,T,le,be,H,de):Ft(k,R,T,le,be,H,de)},Zs=(k,R,U,z,T,le,be,H)=>{let de,Q;const{type:Re,props:ge,shapeFlag:Te,transition:ze,patchFlag:je,dirs:rt}=k;if(k.el&&gt!==void 0&&je===-1)de=k.el=gt(k.el);else{if(de=k.el=N(k.type,le,ge&&ge.is,ge),Te&8?se(de,k.children):Te&16&&Rt(k.children,de,null,z,T,le&&Re!=="foreignObject",be,H),rt&&Pr(k,null,z,"created"),ge){for(const bt in ge)bt!=="value"&&!_u(bt)&&E(de,bt,null,ge[bt],le,k.children,z,T,ut);"value"in ge&&E(de,"value",null,ge.value),(Q=ge.onVnodeBeforeMount)&&js(Q,z,k)}Gn(de,k,k.scopeId,be,z)}rt&&Pr(k,null,z,"beforeMount");const at=(!T||T&&!T.pendingBranch)&&ze&&!ze.persisted;at&&ze.beforeEnter(de),g(de,R,U),((Q=ge&&ge.onVnodeMounted)||at||rt)&&Bn(()=>{Q&&js(Q,z,k),at&&ze.enter(de),rt&&Pr(k,null,z,"mounted")},T)},Gn=(k,R,U,z,T)=>{if(U&&Ue(k,U),z)for(let le=0;le<z.length;le++)Ue(k,z[le]);if(T){let le=T.subTree;if(R===le){const be=T.vnode;Gn(k,be,be.scopeId,be.slotScopeIds,T.parent)}}},Rt=(k,R,U,z,T,le,be,H,de=0)=>{for(let Q=de;Q<k.length;Q++){const Re=k[Q]=H?Wo(k[Q]):Gs(k[Q]);tt(null,Re,R,U,z,T,le,be,H)}},Ft=(k,R,U,z,T,le,be)=>{const H=R.el=k.el;let{patchFlag:de,dynamicChildren:Q,dirs:Re}=R;de|=k.patchFlag&16;const ge=k.props||_t,Te=R.props||_t;let ze;U&&Or(U,!1),(ze=Te.onVnodeBeforeUpdate)&&js(ze,U,R,k),Re&&Pr(R,k,U,"beforeUpdate"),U&&Or(U,!0);const je=T&&R.type!=="foreignObject";if(Q?Ne(k.dynamicChildren,Q,H,U,z,je,le):be||St(k,R,H,null,U,z,je,le,!1),de>0){if(de&16)Ye(H,R,ge,Te,U,z,T);else if(de&2&&ge.class!==Te.class&&E(H,"class",null,Te.class,T),de&4&&E(H,"style",ge.style,Te.style,T),de&8){const rt=R.dynamicProps;for(let at=0;at<rt.length;at++){const bt=rt[at],En=ge[bt],Yn=Te[bt];(Yn!==En||bt==="value")&&E(H,bt,En,Yn,T,k.children,U,z,ut)}}de&1&&k.children!==R.children&&se(H,R.children)}else!be&&Q==null&&Ye(H,R,ge,Te,U,z,T);((ze=Te.onVnodeUpdated)||Re)&&Bn(()=>{ze&&js(ze,U,R,k),Re&&Pr(R,k,U,"updated")},z)},Ne=(k,R,U,z,T,le,be)=>{for(let H=0;H<R.length;H++){const de=k[H],Q=R[H],Re=de.el&&(de.type===Ks||!el(de,Q)||de.shapeFlag&70)?ye(de.el):U;tt(de,Q,Re,null,z,T,le,be,!0)}},Ye=(k,R,U,z,T,le,be)=>{if(U!==z){for(const H in z){if(_u(H))continue;const de=z[H],Q=U[H];de!==Q&&H!=="value"&&E(k,H,Q,de,be,R.children,T,le,ut)}if(U!==_t)for(const H in U)!_u(H)&&!(H in z)&&E(k,H,U[H],null,be,R.children,T,le,ut);"value"in z&&E(k,"value",U.value,z.value)}},vn=(k,R,U,z,T,le,be,H,de)=>{const Q=R.el=k?k.el:D(""),Re=R.anchor=k?k.anchor:D("");let{patchFlag:ge,dynamicChildren:Te,slotScopeIds:ze}=R;ze&&(H=H?H.concat(ze):ze),k==null?(g(Q,U,z),g(Re,U,z),Rt(R.children,U,Re,T,le,be,H,de)):ge>0&&ge&64&&Te&&k.dynamicChildren?(Ne(k.dynamicChildren,Te,U,T,le,be,H),(R.key!=null||T&&R===T.subTree)&&Lk(k,R,!0)):St(k,R,U,Re,T,le,be,H,de)},Js=(k,R,U,z,T,le,be,H,de)=>{R.slotScopeIds=H,k==null?R.shapeFlag&512?T.ctx.activate(R,U,z,be,de):De(R,U,z,T,le,be,de):Bt(k,R,de)},De=(k,R,U,z,T,le,be)=>{const H=k.component=qq(k,z,T);if(Sk(k)&&(H.ctx.renderer=vo),Kq(H),H.asyncDep){if(T&&T.registerDep(H,kt),!k.el){const de=H.subTree=bo(Fr);$n(null,de,R,U)}return}kt(H,k,R,U,T,le,be)},Bt=(k,R,U)=>{const z=R.component=k.component;if(tq(k,R,U))if(z.asyncDep&&!z.asyncResolved){K(z,R,U);return}else z.next=R,G9(z.update),z.update();else R.el=k.el,z.vnode=R},kt=(k,R,U,z,T,le,be)=>{const H=()=>{if(k.isMounted){let{next:Re,bu:ge,u:Te,parent:ze,vnode:je}=k,rt=Re,at;Or(k,!1),Re?(Re.el=je.el,K(k,Re,be)):Re=je,ge&&Gp(ge),(at=Re.props&&Re.props.onVnodeBeforeUpdate)&&js(at,ze,Re,je),Or(k,!0);const bt=Yp(k),En=k.subTree;k.subTree=bt,tt(En,bt,ye(En.el),h(En),k,T,le),Re.el=bt.el,rt===null&&nq(k,bt.el),Te&&Bn(Te,T),(at=Re.props&&Re.props.onVnodeUpdated)&&Bn(()=>js(at,ze,Re,je),T)}else{let Re;const{el:ge,props:Te}=R,{bm:ze,m:je,parent:rt}=k,at=Nu(R);if(Or(k,!1),ze&&Gp(ze),!at&&(Re=Te&&Te.onVnodeBeforeMount)&&js(Re,rt,R),Or(k,!0),ge&&Ur){const bt=()=>{k.subTree=Yp(k),Ur(ge,k.subTree,k,T,null)};at?R.type.__asyncLoader().then(()=>!k.isUnmounted&&bt()):bt()}else{const bt=k.subTree=Yp(k);tt(null,bt,U,z,k,T,le),R.el=bt.el}if(je&&Bn(je,T),!at&&(Re=Te&&Te.onVnodeMounted)){const bt=R;Bn(()=>js(Re,rt,bt),T)}(R.shapeFlag&256||rt&&Nu(rt.vnode)&&rt.vnode.shapeFlag&256)&&k.a&&Bn(k.a,T),k.isMounted=!0,R=U=z=null}},de=k.effect=new xg(H,()=>pk(Q),k.scope),Q=k.update=()=>de.run();Q.id=k.uid,Or(k,!0),Q()},K=(k,R,U)=>{R.component=k;const z=k.vnode.props;k.vnode=R,k.next=null,Nq(k,R.props,z,U),Rq(k,R.children,U),Ui(),Hu(void 0,k.update),zi()},St=(k,R,U,z,T,le,be,H,de=!1)=>{const Q=k&&k.children,Re=k?k.shapeFlag:0,ge=R.children,{patchFlag:Te,shapeFlag:ze}=R;if(Te>0){if(Te&128){re(Q,ge,U,z,T,le,be,H,de);return}else if(Te&256){Hi(Q,ge,U,z,T,le,be,H,de);return}}ze&8?(Re&16&&ut(Q,T,le),ge!==Q&&se(U,ge)):Re&16?ze&16?re(Q,ge,U,z,T,le,be,H,de):ut(Q,T,le,!0):(Re&8&&se(U,""),ze&16&&Rt(ge,U,z,T,le,be,H,de))},Hi=(k,R,U,z,T,le,be,H,de)=>{k=k||Bi,R=R||Bi;const Q=k.length,Re=R.length,ge=Math.min(Q,Re);let Te;for(Te=0;Te<ge;Te++){const ze=R[Te]=de?Wo(R[Te]):Gs(R[Te]);tt(k[Te],ze,U,null,T,le,be,H,de)}Q>Re?ut(k,T,le,!0,!1,ge):Rt(R,U,z,T,le,be,H,de,ge)},re=(k,R,U,z,T,le,be,H,de)=>{let Q=0;const Re=R.length;let ge=k.length-1,Te=Re-1;for(;Q<=ge&&Q<=Te;){const ze=k[Q],je=R[Q]=de?Wo(R[Q]):Gs(R[Q]);if(el(ze,je))tt(ze,je,U,null,T,le,be,H,de);else break;Q++}for(;Q<=ge&&Q<=Te;){const ze=k[ge],je=R[Te]=de?Wo(R[Te]):Gs(R[Te]);if(el(ze,je))tt(ze,je,U,null,T,le,be,H,de);else break;ge--,Te--}if(Q>ge){if(Q<=Te){const ze=Te+1,je=ze<Re?R[ze].el:z;for(;Q<=Te;)tt(null,R[Q]=de?Wo(R[Q]):Gs(R[Q]),U,je,T,le,be,H,de),Q++}}else if(Q>Te)for(;Q<=ge;)Ss(k[Q],T,le,!0),Q++;else{const ze=Q,je=Q,rt=new Map;for(Q=je;Q<=Te;Q++){const Ct=R[Q]=de?Wo(R[Q]):Gs(R[Q]);Ct.key!=null&&rt.set(Ct.key,Q)}let at,bt=0;const En=Te-je+1;let Yn=!1,zr=0;const Ut=new Array(En);for(Q=0;Q<En;Q++)Ut[Q]=0;for(Q=ze;Q<=ge;Q++){const Ct=k[Q];if(bt>=En){Ss(Ct,T,le,!0);continue}let nn;if(Ct.key!=null)nn=rt.get(Ct.key);else for(at=je;at<=Te;at++)if(Ut[at-je]===0&&el(Ct,R[at])){nn=at;break}nn===void 0?Ss(Ct,T,le,!0):(Ut[nn-je]=Q+1,nn>=zr?zr=nn:Yn=!0,tt(Ct,R[nn],U,null,T,le,be,H,de),bt++)}const eo=Yn?$q(Ut):Bi;for(at=eo.length-1,Q=En-1;Q>=0;Q--){const Ct=je+Q,nn=R[Ct],ml=Ct+1<Re?R[Ct+1].el:z;Ut[Q]===0?tt(null,nn,U,ml,T,le,be,H,de):Yn&&(at<0||Q!==eo[at]?xs(nn,U,ml,2):at--)}}},xs=(k,R,U,z,T=null)=>{const{el:le,type:be,transition:H,children:de,shapeFlag:Q}=k;if(Q&6){xs(k.component.subTree,R,U,z);return}if(Q&128){k.suspense.move(R,U,z);return}if(Q&64){be.move(k,R,U,vo);return}if(be===Ks){g(le,R,U);for(let ge=0;ge<de.length;ge++)xs(de[ge],R,U,z);g(k.anchor,R,U);return}if(be===Qp){dt(k,R,U);return}if(z!==2&&Q&1&&H)if(z===0)H.beforeEnter(le),g(le,R,U),Bn(()=>H.enter(le),T);else{const{leave:ge,delayLeave:Te,afterLeave:ze}=H,je=()=>g(le,R,U),rt=()=>{ge(le,()=>{je(),ze&&ze()})};Te?Te(le,je,rt):rt()}else g(le,R,U)},Ss=(k,R,U,z=!1,T=!1)=>{const{type:le,props:be,ref:H,children:de,dynamicChildren:Q,shapeFlag:Re,patchFlag:ge,dirs:Te}=k;if(H!=null&&dg(H,null,U,k,!0),Re&256){R.ctx.deactivate(k);return}const ze=Re&1&&Te,je=!Nu(k);let rt;if(je&&(rt=be&&be.onVnodeBeforeUnmount)&&js(rt,R,k),Re&6)ht(k.component,U,z);else{if(Re&128){k.suspense.unmount(U,z);return}ze&&Pr(k,null,R,"beforeUnmount"),Re&64?k.type.remove(k,R,U,T,vo,z):Q&&(le!==Ks||ge>0&&ge&64)?ut(Q,R,U,!1,!0):(le===Ks&&ge&384||!T&&Re&16)&&ut(de,R,U),z&&Lr(k)}(je&&(rt=be&&be.onVnodeUnmounted)||ze)&&Bn(()=>{rt&&js(rt,R,k),ze&&Pr(k,null,R,"unmounted")},U)},Lr=k=>{const{type:R,el:U,anchor:z,transition:T}=k;if(R===Ks){Go(U,z);return}if(R===Qp){Qs(k);return}const le=()=>{b(U),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(k.shapeFlag&1&&T&&!T.persisted){const{leave:be,delayLeave:H}=T,de=()=>be(U,le);H?H(k.el,le,de):de()}else le()},Go=(k,R)=>{let U;for(;k!==R;)U=Ae(k),b(k),k=U;b(R)},ht=(k,R,U)=>{const{bum:z,scope:T,update:le,subTree:be,um:H}=k;z&&Gp(z),T.stop(),le&&(le.active=!1,Ss(be,k,R,U)),H&&Bn(H,R),Bn(()=>{k.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ut=(k,R,U,z=!1,T=!1,le=0)=>{for(let be=le;be<k.length;be++)Ss(k[be],R,U,z,T)},h=k=>k.shapeFlag&6?h(k.component.subTree):k.shapeFlag&128?k.suspense.next():Ae(k.anchor||k.el),Mr=(k,R,U)=>{k==null?R._vnode&&Ss(R._vnode,null,null,!0):tt(R._vnode||null,k,R,null,null,null,U),bk(),R._vnode=k},vo={p:tt,um:Ss,m:xs,r:Lr,mt:De,mc:Rt,pc:St,pbc:Ne,n:h,o:l};let Vi,Ur;return u&&([Vi,Ur]=u(vo)),{render:Mr,hydrate:Vi,createApp:Oq(Mr,Vi)}}function Or({effect:l,update:u},m){l.allowRecurse=u.allowRecurse=m}function Lk(l,u,m=!1){const g=l.children,b=u.children;if(Qe(g)&&Qe(b))for(let E=0;E<g.length;E++){const N=g[E];let D=b[E];D.shapeFlag&1&&!D.dynamicChildren&&((D.patchFlag<=0||D.patchFlag===32)&&(D=b[E]=Wo(b[E]),D.el=N.el),m||Lk(N,D))}}function $q(l){const u=l.slice(),m=[0];let g,b,E,N,D;const L=l.length;for(g=0;g<L;g++){const Z=l[g];if(Z!==0){if(b=m[m.length-1],l[b]<Z){u[g]=b,m.push(g);continue}for(E=0,N=m.length-1;E<N;)D=E+N>>1,l[m[D]]<Z?E=D+1:N=D;Z<l[m[E]]&&(E>0&&(u[g]=m[E-1]),m[E]=g)}}for(E=m.length,N=m[E-1];E-- >0;)m[E]=N,N=u[N];return m}const Iq=l=>l.__isTeleport,Ks=Symbol(void 0),Pg=Symbol(void 0),Fr=Symbol(void 0),Qp=Symbol(void 0),il=[];let vs=null;function Bu(l=!1){il.push(vs=l?null:[])}function Fq(){il.pop(),vs=il[il.length-1]||null}let fl=1;function $_(l){fl+=l}function Mk(l){return l.dynamicChildren=fl>0?vs||Bi:null,Fq(),fl>0&&vs&&vs.push(l),l}function Uk(l,u,m,g,b,E){return Mk(ss(l,u,m,g,b,E,!0))}function zk(l,u,m,g,b){return Mk(bo(l,u,m,g,b,!0))}function Lq(l){return l?l.__v_isVNode===!0:!1}function el(l,u){return l.type===u.type&&l.key===u.key}const ju="__vInternal",Hk=({key:l})=>l!=null?l:null,Au=({ref:l,ref_key:u,ref_for:m})=>l!=null?fn(l)||yn(l)||Xe(l)?{i:Ys,r:l,k:u,f:!!m}:l:null;function ss(l,u=null,m=null,g=0,b=null,E=l===Ks?0:1,N=!1,D=!1){const L={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&Hk(u),ref:u&&Au(u),scopeId:vk,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:g,dynamicProps:b,dynamicChildren:null,appContext:null};return D?(Og(L,m),E&128&&l.normalize(L)):m&&(L.shapeFlag|=fn(m)?8:16),fl>0&&!N&&vs&&(L.patchFlag>0||E&6)&&L.patchFlag!==32&&vs.push(L),L}const bo=Mq;function Mq(l,u=null,m=null,g=0,b=null,E=!1){if((!l||l===Cq)&&(l=Fr),Lq(l)){const D=Fi(l,u,!0);return m&&Og(D,m),fl>0&&!E&&vs&&(D.shapeFlag&6?vs[vs.indexOf(l)]=D:vs.push(D)),D.patchFlag|=-2,D}if(Zq(l)&&(l=l.__vccOpts),u){u=Uq(u);let{class:D,style:L}=u;D&&!fn(D)&&(u.class=bg(D)),dn(L)&&(lk(L)&&!Qe(L)&&(L=Rn({},L)),u.style=hg(L))}const N=fn(l)?1:sq(l)?128:Iq(l)?64:dn(l)?4:Xe(l)?2:0;return ss(l,u,m,g,b,N,E,!0)}function Uq(l){return l?lk(l)||ju in l?Rn({},l):l:null}function Fi(l,u,m=!1){const{props:g,ref:b,patchFlag:E,children:N}=l,D=u?Vq(g||{},u):g;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:D,key:D&&Hk(D),ref:u&&u.ref?m&&b?Qe(b)?b.concat(Au(u)):[b,Au(u)]:Au(u):b,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:N,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==Ks?E===-1?16:E|16:E,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Fi(l.ssContent),ssFallback:l.ssFallback&&Fi(l.ssFallback),el:l.el,anchor:l.anchor}}function zq(l=" ",u=0){return bo(Pg,null,l,u)}function Hq(l="",u=!1){return u?(Bu(),zk(Fr,null,l)):bo(Fr,null,l)}function Gs(l){return l==null||typeof l=="boolean"?bo(Fr):Qe(l)?bo(Ks,null,l.slice()):typeof l=="object"?Wo(l):bo(Pg,null,String(l))}function Wo(l){return l.el===null||l.memo?l:Fi(l)}function Og(l,u){let m=0;const{shapeFlag:g}=l;if(u==null)u=null;else if(Qe(u))m=16;else if(typeof u=="object")if(g&65){const b=u.default;b&&(b._c&&(b._d=!1),Og(l,b()),b._c&&(b._d=!0));return}else{m=32;const b=u._;!b&&!(ju in u)?u._ctx=Ys:b===3&&Ys&&(Ys.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Xe(u)?(u={default:u,_ctx:Ys},m=32):(u=String(u),g&64?(m=16,u=[zq(u)]):m=8);l.children=u,l.shapeFlag|=m}function Vq(...l){const u={};for(let m=0;m<l.length;m++){const g=l[m];for(const b in g)if(b==="class")u.class!==g.class&&(u.class=bg([u.class,g.class]));else if(b==="style")u.style=hg([u.style,g.style]);else if($u(b)){const E=u[b],N=g[b];N&&E!==N&&!(Qe(E)&&E.includes(N))&&(u[b]=E?[].concat(E,N):N)}else b!==""&&(u[b]=g[b])}return u}function js(l,u,m,g=null){ws(l,u,7,[m,g])}const Wq=Fk();let jq=0;function qq(l,u,m){const g=l.type,b=(u?u.appContext:l.appContext)||Wq,E={uid:jq++,vnode:l,type:g,parent:u,appContext:b,root:null,next:null,subTree:null,effect:null,update:null,scope:new f9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(b.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dk(g,b),emitsOptions:yk(g,b),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:g.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=u?u.root:E,E.emit=Q9.bind(null,E),l.ce&&l.ce(E),E}let un=null;const Li=l=>{un=l,l.scope.on()},Ir=()=>{un&&un.scope.off(),un=null};function Vk(l){return l.vnode.shapeFlag&4}let dl=!1;function Kq(l,u=!1){dl=u;const{props:m,children:g}=l.vnode,b=Vk(l);kq(l,m,b,u),Tq(l,g);const E=b?Gq(l,u):void 0;return dl=!1,E}function Gq(l,u){const m=l.type;l.accessCache=Object.create(null),l.proxy=ck(new Proxy(l.ctx,vq));const{setup:g}=m;if(g){const b=l.setupContext=g.length>1?Xq(l):null;Li(l),Ui();const E=qo(g,l,0,[l.props,b]);if(zi(),Ir(),G_(E)){if(E.then(Ir,Ir),u)return E.then(N=>{I_(l,N,u)}).catch(N=>{zu(N,l,0)});l.asyncDep=E}else I_(l,E,u)}else Wk(l,u)}function I_(l,u,m){Xe(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:dn(u)&&(l.setupState=dk(u)),Wk(l,m)}let F_;function Wk(l,u,m){const g=l.type;if(!l.render){if(!u&&F_&&!g.render){const b=g.template;if(b){const{isCustomElement:E,compilerOptions:N}=l.appContext.config,{delimiters:D,compilerOptions:L}=g,Z=Rn(Rn({isCustomElement:E,delimiters:D},N),L);g.render=F_(b,Z)}}l.render=g.render||Es}Li(l),Ui(),Eq(l),zi(),Ir()}function Yq(l){return new Proxy(l.attrs,{get(u,m){return Kn(l,"get","$attrs"),u[m]}})}function Xq(l){const u=g=>{l.exposed=g||{}};let m;return{get attrs(){return m||(m=Yq(l))},slots:l.slots,emit:l.emit,expose:u}}function Dg(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(dk(ck(l.exposed)),{get(u,m){if(m in u)return u[m];if(m in Ou)return Ou[m](l)}}))}function Qq(l,u=!0){return Xe(l)?l.displayName||l.name:l.name||u&&l.__name}function Zq(l){return Xe(l)&&"__vccOpts"in l}const jk=(l,u)=>j9(l,u,dl),Jq="3.2.37",e7="http://www.w3.org/2000/svg",Br=typeof document!="undefined"?document:null,L_=Br&&Br.createElement("template"),t7={insert:(l,u,m)=>{u.insertBefore(l,m||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,m,g)=>{const b=u?Br.createElementNS(e7,l):Br.createElement(l,m?{is:m}:void 0);return l==="select"&&g&&g.multiple!=null&&b.setAttribute("multiple",g.multiple),b},createText:l=>Br.createTextNode(l),createComment:l=>Br.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Br.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},cloneNode(l){const u=l.cloneNode(!0);return"_value"in l&&(u._value=l._value),u},insertStaticContent(l,u,m,g,b,E){const N=m?m.previousSibling:u.lastChild;if(b&&(b===E||b.nextSibling))for(;u.insertBefore(b.cloneNode(!0),m),!(b===E||!(b=b.nextSibling)););else{L_.innerHTML=g?`<svg>${l}</svg>`:l;const D=L_.content;if(g){const L=D.firstChild;for(;L.firstChild;)D.appendChild(L.firstChild);D.removeChild(L)}u.insertBefore(D,m)}return[N?N.nextSibling:u.firstChild,m?m.previousSibling:u.lastChild]}};function n7(l,u,m){const g=l._vtc;g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?l.removeAttribute("class"):m?l.setAttribute("class",u):l.className=u}function s7(l,u,m){const g=l.style,b=fn(m);if(m&&!b){for(const E in m)mg(g,E,m[E]);if(u&&!fn(u))for(const E in u)m[E]==null&&mg(g,E,"")}else{const E=g.display;b?u!==m&&(g.cssText=m):u&&l.removeAttribute("style"),"_vod"in l&&(g.display=E)}}const M_=/\s*!important$/;function mg(l,u,m){if(Qe(m))m.forEach(g=>mg(l,u,g));else if(m==null&&(m=""),u.startsWith("--"))l.setProperty(u,m);else{const g=o7(l,u);M_.test(m)?l.setProperty(Mi(g),m.replace(M_,""),"important"):l[g]=m}}const U_=["Webkit","Moz","ms"],Zp={};function o7(l,u){const m=Zp[u];if(m)return m;let g=Xs(u);if(g!=="filter"&&g in l)return Zp[u]=g;g=Lu(g);for(let b=0;b<U_.length;b++){const E=U_[b]+g;if(E in l)return Zp[u]=E}return u}const z_="http://www.w3.org/1999/xlink";function r7(l,u,m,g,b){if(g&&u.startsWith("xlink:"))m==null?l.removeAttributeNS(z_,u.slice(6,u.length)):l.setAttributeNS(z_,u,m);else{const E=Z4(u);m==null||E&&!j_(m)?l.removeAttribute(u):l.setAttribute(u,E?"":m)}}function i7(l,u,m,g,b,E,N){if(u==="innerHTML"||u==="textContent"){g&&N(g,b,E),l[u]=m==null?"":m;return}if(u==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const L=m==null?"":m;(l.value!==L||l.tagName==="OPTION")&&(l.value=L),m==null&&l.removeAttribute(u);return}let D=!1;if(m===""||m==null){const L=typeof l[u];L==="boolean"?m=j_(m):m==null&&L==="string"?(m="",D=!0):L==="number"&&(m=0,D=!0)}try{l[u]=m}catch{}D&&l.removeAttribute(u)}const[qk,a7]=(()=>{let l=Date.now,u=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(l=performance.now.bind(performance));const m=navigator.userAgent.match(/firefox\/(\d+)/i);u=!!(m&&Number(m[1])<=53)}return[l,u]})();let pg=0;const l7=Promise.resolve(),c7=()=>{pg=0},u7=()=>pg||(l7.then(c7),pg=qk());function f7(l,u,m,g){l.addEventListener(u,m,g)}function d7(l,u,m,g){l.removeEventListener(u,m,g)}function m7(l,u,m,g,b=null){const E=l._vei||(l._vei={}),N=E[u];if(g&&N)N.value=g;else{const[D,L]=p7(u);if(g){const Z=E[u]=g7(g,b);f7(l,D,Z,L)}else N&&(d7(l,D,N,L),E[u]=void 0)}}const H_=/(?:Once|Passive|Capture)$/;function p7(l){let u;if(H_.test(l)){u={};let m;for(;m=l.match(H_);)l=l.slice(0,l.length-m[0].length),u[m[0].toLowerCase()]=!0}return[Mi(l.slice(2)),u]}function g7(l,u){const m=g=>{const b=g.timeStamp||qk();(a7||b>=m.attached-1)&&ws(h7(g,m.value),u,5,[g])};return m.value=l,m.attached=u7(),m}function h7(l,u){if(Qe(u)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},u.map(g=>b=>!b._stopped&&g&&g(b))}else return u}const V_=/^on[a-z]/,b7=(l,u,m,g,b=!1,E,N,D,L)=>{u==="class"?n7(l,g,b):u==="style"?s7(l,m,g):$u(u)?Cg(u)||m7(l,u,m,g,N):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):C7(l,u,g,b))?i7(l,u,g,E,N,D,L):(u==="true-value"?l._trueValue=g:u==="false-value"&&(l._falseValue=g),r7(l,u,g,b))};function C7(l,u,m,g){return g?!!(u==="innerHTML"||u==="textContent"||u in l&&V_.test(u)&&Xe(m)):u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA"||V_.test(u)&&fn(m)?!1:u in l}const y7=Rn({patchProp:b7},t7);let W_;function v7(){return W_||(W_=Dq(y7))}const E7=(...l)=>{const u=v7().createApp(...l),{mount:m}=u;return u.mount=g=>{const b=w7(g);if(!b)return;const E=u._component;!Xe(E)&&!E.render&&!E.template&&(E.template=b.innerHTML),b.innerHTML="";const N=m(b,!1,b instanceof SVGElement);return b instanceof Element&&(b.removeAttribute("v-cloak"),b.setAttribute("data-v-app","")),N},u};function w7(l){return fn(l)?document.querySelector(l):l}var x7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m};const S7=xk({name:"App",components:{},setup(){const l=Uu({content:"init content",show:!0,locale:""}),u=jk(()=>{let g={};return l.locale==="en"&&(g={language:"en_US"}),g});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:u,switchLanguage:m}}}),_7=ss("h1",null,"VueTinymce example",-1),k7=ss("br",null,null,-1),N7=ss("br",null,null,-1),A7=ss("br",null,null,-1),T7=ss("br",null,null,-1),R7=ss("h2",null,"output",-1),P7=["innerHTML"];function O7(l,u,m,g,b,E){const N=bq("vue-tinymce");return Bu(),Uk(Ks,null,[_7,ss("button",{onClick:u[0]||(u[0]=D=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+n9(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),k7,N7,ss("button",{onClick:u[1]||(u[1]=(...D)=>l.switchLanguage&&l.switchLanguage(...D))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),A7,T7,l.data.show?(Bu(),zk(N,{key:0,modelValue:l.data.content,"onUpdate:modelValue":u[2]||(u[2]=D=>l.data.content=D),config:l.config},null,8,["modelValue","config"])):Hq("",!0),R7,ss("div",{innerHTML:l.data.content},null,8,P7)],64)}var D7=x7(S7,[["render",O7]]),Kk={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},g=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},b=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},N=E(function(e,t){return e===t}),D=N,L=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},Z=function(e,t){return b(L(e),function(n){return g(n,t)})},se=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!Z(D).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},ye=E(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:m(n)?e===t:n==="array"?L(ye).eq(e,t):n==="object"?se(ye).eq(e,t):!1});const Ae=Object.getPrototypeOf,Ue=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},gt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Ue(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},vt=e=>t=>gt(t)===e,tt=e=>t=>typeof t===e,ct=e=>t=>e===t,$n=(e,t)=>dt(e)&&Ue(e,t,(n,s)=>Ae(n)===s),me=vt("string"),dt=vt("object"),Qs=e=>$n(e,Object),At=vt("array"),Zs=ct(null),Gn=tt("boolean"),Rt=ct(void 0),Ft=e=>e==null,Ne=e=>!Ft(e),Ye=tt("function"),vn=tt("number"),Js=(e,t)=>{if(At(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},De=()=>{},Bt=(e,t)=>(...n)=>e(t.apply(null,n)),kt=(e,t)=>n=>e(t(n)),K=e=>()=>e,St=e=>e,Hi=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const xs=e=>t=>!e(t),Ss=e=>()=>{throw new Error(e)},Lr=e=>e(),Go=e=>{e()},ht=K(!1),ut=K(!0);class h{constructor(t,n){this.tag=t,this.value=n}static some(t){return new h(!0,t)}static none(){return h.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?h.some(t(this.value)):h.none()}bind(t){return this.tag?t(this.value):h.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:h.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return Ne(t)?h.some(t):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const Mr=Array.prototype.slice,vo=Array.prototype.indexOf,Vi=Array.prototype.push,Ur=(e,t)=>vo.call(e,t),k=(e,t)=>{const n=Ur(e,t);return n===-1?h.none():h.some(n)},R=(e,t)=>Ur(e,t)>-1,U=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},z=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},T=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},le=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},be=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},H=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},de=(e,t,n)=>(le(e,(s,o)=>{n=t(n,s,o)}),n),Q=(e,t,n)=>(T(e,(s,o)=>{n=t(n,s,o)}),n),Re=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return h.some(r);if(n(r,s))break}return h.none()},ge=(e,t)=>Re(e,t,ht),Te=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return h.some(n)}return h.none()},ze=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!At(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Vi.apply(t,e[n])}return t},je=(e,t)=>ze(z(e,t)),rt=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},at=e=>{const t=Mr.call(e,0);return t.reverse(),t},bt=(e,t)=>H(e,n=>!R(t,n)),En=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Yn=(e,t)=>{const n=Mr.call(e,0);return n.sort(t),n},zr=(e,t)=>t>=0&&t<e.length?h.some(e[t]):h.none(),Ut=e=>zr(e,0),eo=e=>zr(e,e.length-1),Ct=Ye(Array.from)?Array.from:e=>Mr.call(e),nn=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return h.none()},ml=(e,t)=>{const n=[],s=Ye(t)?o=>U(n,r=>t(r,o)):o=>R(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},Xn=Object.keys,Yk=Object.hasOwnProperty,yt=(e,t)=>{const n=Xn(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},Wi=(e,t)=>Xk(e,(n,s)=>({k:s,v:t(n,s)})),Xk=(e,t)=>{const n={};return yt(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},qu=e=>(t,n)=>{e[n]=t},Bg=(e,t,n,s)=>{const o={};return yt(e,(r,i)=>{(t(r,i)?n:s)(r,i)}),o},Qk=(e,t)=>{const n={},s={};return Bg(e,t,qu(n),qu(s)),{t:n,f:s}},ji=(e,t)=>{const n={};return Bg(e,t,qu(n),De),n},Ku=(e,t)=>{const n=[];return yt(e,(s,o)=>{n.push(t(s,o))}),n},Gu=e=>Ku(e,St),ft=(e,t)=>Fe(e,t)?h.from(e[t]):h.none(),Fe=(e,t)=>Yk.call(e,t),Hr=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,Zk=(e,t,n=ye)=>se(n).eq(e,t),$g=e=>{const t={};return T(e,n=>{t[n]={}}),Xn(t)},Yu=Array.isArray,Jk=e=>{if(Yu(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},qi=(e,t,n)=>{let s,o;if(!e)return!1;if(n=n||e,e.length!==void 0){for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(s in e)if(Fe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Xu=(e,t)=>{const n=[];return qi(e,(s,o)=>{n.push(t(s,o,e))}),n},Vr=(e,t)=>{const n=[];return qi(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},Ig=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},pl=(e,t,n,s)=>{let o=Rt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Fg=(e,t,n)=>{let s,o;for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Eo=e=>e[e.length-1],Yo=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},eN=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(f),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},tN=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},nN=(e,t)=>{const n=tN(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Qu(s(1),s(2))},sN=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Lg():nN(e,n)},Lg=()=>Qu(0,0),Qu=(e,t)=>({major:e,minor:t}),Ki={nu:Qu,detect:sN,unknown:Lg},oN=(e,t)=>nn(t.brands,n=>{const s=n.brand.toLowerCase();return ge(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Ki.nu(parseInt(n.version,10),0)}))}),Mg=(e,t)=>{const n=String(t).toLowerCase();return ge(e,s=>s.search(n))},rN=(e,t)=>Mg(e,t).map(n=>{const s=Ki.detect(n.versionRegexes,t);return{current:n.name,version:s}}),iN=(e,t)=>Mg(e,t).map(n=>{const s=Ki.detect(n.versionRegexes,t);return{current:n.name,version:s}}),aN=(e,t)=>e.substring(t),Ug=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,lN=(e,t)=>Gt(e,t)?aN(e,t.length):e,sn=(e,t)=>e.indexOf(t)!==-1,Gt=(e,t)=>Ug(e,t,0),zg=(e,t)=>Ug(e,t,e.length-t.length),Zu=e=>t=>t.replace(e,""),Wr=Zu(/^\s+|\s+$/g),cN=Zu(/^\s+/g),Hg=Zu(/\s+$/g),to=e=>e.length>0,gl=e=>!to(e),uN=(e,t)=>t<=0?"":new Array(t+1).join(e),fN=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?h.none():h.some(n)},Ju=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,no=e=>t=>sn(t,e),dN=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>sn(e,"edge/")&&sn(e,"chrome")&&sn(e,"safari")&&sn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ju],search:e=>sn(e,"chrome")&&!sn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>sn(e,"msie")||sn(e,"trident")},{name:"Opera",versionRegexes:[Ju,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:no("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:no("firefox")},{name:"Safari",versionRegexes:[Ju,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(sn(e,"safari")||sn(e,"mobile/"))&&sn(e,"applewebkit")}],mN=[{name:"Windows",search:no("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>sn(e,"iphone")||sn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:no("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:no("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:no("linux"),versionRegexes:[]},{name:"Solaris",search:no("sunos"),versionRegexes:[]},{name:"FreeBSD",search:no("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:no("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vg={browsers:K(dN),oses:K(mN)},Wg="Edge",jg="Chromium",qg="IE",Kg="Opera",Gg="Firefox",Yg="Safari",pN=()=>Xg({current:void 0,version:Ki.unknown()}),Xg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Wg),isChromium:s(jg),isIE:s(qg),isOpera:s(Kg),isFirefox:s(Gg),isSafari:s(Yg)}},Qg={unknown:pN,nu:Xg,edge:K(Wg),chromium:K(jg),ie:K(qg),opera:K(Kg),firefox:K(Gg),safari:K(Yg)},Zg="Windows",Jg="iOS",eh="Android",th="Linux",nh="macOS",sh="Solaris",oh="FreeBSD",rh="ChromeOS",gN=()=>ih({current:void 0,version:Ki.unknown()}),ih=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Zg),isiOS:s(Jg),isAndroid:s(eh),isMacOS:s(nh),isLinux:s(th),isSolaris:s(sh),isFreeBSD:s(oh),isChromeOS:s(rh)}},ah={unknown:gN,nu:ih,windows:K(Zg),ios:K(Jg),android:K(eh),linux:K(th),macos:K(nh),solaris:K(sh),freebsd:K(oh),chromeos:K(rh)},hN={detect:(e,t,n)=>{const s=Vg.browsers(),o=Vg.oses(),r=t.bind(c=>oN(s,c)).orThunk(()=>rN(s,e)).fold(Qg.unknown,Qg.nu),i=iN(o,e).fold(ah.unknown,ah.nu),a=eN(i,r,e,n);return{browser:r,os:i,deviceType:a}}},bN=e=>window.matchMedia(e).matches;let CN=Yo(()=>hN.detect(navigator.userAgent,h.from(navigator.userAgentData),bN));const Xo=()=>CN(),yN=navigator.userAgent,ef=Xo(),_s=ef.browser,ks=ef.os,Qo=ef.deviceType,vN=yN.indexOf("Windows Phone")!==-1,Ze={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:_s.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!_s.isIE(),windowsPhone:vN,browser:{current:_s.current,version:_s.version,isChromium:_s.isChromium,isEdge:_s.isEdge,isFirefox:_s.isFirefox,isIE:_s.isIE,isOpera:_s.isOpera,isSafari:_s.isSafari},os:{current:ks.current,version:ks.version,isAndroid:ks.isAndroid,isChromeOS:ks.isChromeOS,isFreeBSD:ks.isFreeBSD,isiOS:ks.isiOS,isLinux:ks.isLinux,isMacOS:ks.isMacOS,isSolaris:ks.isSolaris,isWindows:ks.isWindows},deviceType:{isDesktop:Qo.isDesktop,isiPad:Qo.isiPad,isiPhone:Qo.isiPhone,isPhone:Qo.isPhone,isTablet:Qo.isTablet,isTouch:Qo.isTouch,isWebView:Qo.isWebView}},EN=/^\s*|\s*$/g,lh=e=>e==null?"":(""+e).replace(EN,""),ch=(e,t)=>t?t==="array"&&Yu(e)?!0:typeof e===t:e!==void 0,wN=(e,t,n)=>{let s;for(e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},s=e.length;s--;)n[e[s]]={};return n},xN=Fe,SN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Fe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},uh=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),qi(e,(o,r)=>{if(t.call(s,o,r,n)===!1)return!1;uh(o,t,n,s)}))},G={trim:lh,isArray:Yu,is:ch,toArray:Jk,makeMap:wN,each:qi,map:Xu,grep:Vr,inArray:Ig,hasOwn:xN,extend:SN,walk:uh,resolve:(e,t)=>{let n,s;for(t=t||window,e=e.split("."),n=0,s=e.length;n<s&&(t=t[e[n]],!!t);n++);return t},explode:(e,t)=>!e||ch(e,"array")?e:Xu(e.split(t||","),lh),_addCacheSuffix:e=>{const t=Ze.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},jr=(e,t,n=Hi)=>e.exists(s=>n(s,t)),_N=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},wn=(e,t,n)=>e.isSome()&&t.isSome()?h.some(n(e.getOrDie(),t.getOrDie())):h.none(),kN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?h.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):h.none(),tf=(e,t)=>e?h.some(t):h.none();typeof window!="undefined"||Function("return this;")();const fh=8,dh=9,mh=11,Gi=1,ph=3,Et=e=>e.dom.nodeName.toLowerCase(),gh=e=>e.dom.nodeType,hl=e=>t=>gh(t)===e,NN=e=>gh(e)===fh||Et(e)==="#comment",Qn=hl(Gi),In=hl(ph),AN=hl(dh),TN=hl(mh),hh=e=>t=>Qn(t)&&Et(t)===e,bh=(e,t,n)=>{if(me(n)||Gn(n)||vn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Yt=(e,t,n)=>{bh(e.dom,t,n)},Ns=(e,t)=>{const n=e.dom;yt(t,(s,o)=>{bh(n,o,s)})},Fn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},qr=(e,t)=>h.from(Fn(e,t)),Yi=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Xt=(e,t)=>{e.dom.removeAttribute(t)},RN=e=>{const t=e.dom.attributes;return t==null||t.length===0},Ch=e=>Q(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),nf=(e,t)=>{const n=Fn(e,t);return n===void 0||n===""?[]:n.split(" ")},PN=(e,t,n)=>{const o=nf(e,t).concat([n]);return Yt(e,t,o.join(" ")),!0},ON=(e,t,n)=>{const s=H(nf(e,t),o=>o!==n);return s.length>0?Yt(e,t,s.join(" ")):Xt(e,t),!1},Xi=e=>e.dom.classList!==void 0,yh=e=>nf(e,"class"),vh=(e,t)=>PN(e,"class",t),Eh=(e,t)=>ON(e,"class",t),DN=(e,t)=>R(yh(e),t)?Eh(e,t):vh(e,t),Qi=(e,t)=>{Xi(e)?e.dom.classList.add(t):vh(e,t)},wh=e=>{(Xi(e)?e.dom.classList:yh(e)).length===0&&Xt(e,"class")},bl=(e,t)=>{Xi(e)?e.dom.classList.remove(t):Eh(e,t),wh(e)},BN=(e,t)=>{const n=Xi(e)?e.dom.classList.toggle(t):DN(e,t);return wh(e),n},sf=(e,t)=>Xi(e)&&e.dom.classList.contains(t),Zi=e=>e.style!==void 0&&Ye(e.style.getPropertyValue),$N=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Ji(s.childNodes[0])},IN=(e,t)=>{const s=(t||document).createElement(e);return Ji(s)},FN=(e,t)=>{const s=(t||document).createTextNode(e);return Ji(s)},Ji=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:$N,fromTag:IN,fromText:FN,fromDom:Ji,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(Ji)},xh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},As=(e,t)=>{const n=e.dom;if(n.nodeType!==Gi)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Sh=e=>e.nodeType!==Gi&&e.nodeType!==dh&&e.nodeType!==mh||e.childElementCount===0,LN=(e,t)=>{const n=t===void 0?document:t.dom;return Sh(n)?[]:z(n.querySelectorAll(e),S.fromDom)},MN=(e,t)=>{const n=t===void 0?document:t.dom;return Sh(n)?h.none():h.from(n.querySelector(e)).map(S.fromDom)},ot=(e,t)=>e.dom===t.dom,so=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},_h=e=>S.fromDom(e.dom.ownerDocument),wo=e=>AN(e)?e:_h(e),UN=e=>S.fromDom(wo(e).dom.documentElement),kh=e=>S.fromDom(wo(e).dom.defaultView),Zn=e=>h.from(e.dom.parentNode).map(S.fromDom),zN=e=>h.from(e.dom.parentElement).map(S.fromDom),HN=(e,t)=>{const n=Ye(t)?t:ht;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=S.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},VN=e=>{const t=n=>H(n,s=>!ot(e,s));return Zn(e).map(Qt).map(t).getOr([])},Zo=e=>h.from(e.dom.previousSibling).map(S.fromDom),ea=e=>h.from(e.dom.nextSibling).map(S.fromDom),Nh=e=>at(xh(e,Zo)),Ah=e=>xh(e,ea),Qt=e=>z(e.dom.childNodes,S.fromDom),Cl=(e,t)=>{const n=e.dom.childNodes;return h.from(n[t]).map(S.fromDom)},Th=e=>Cl(e,0),of=e=>Cl(e,e.dom.childNodes.length-1),Rh=e=>e.dom.childNodes.length,WN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return S.fromDom(t)},Ph=e=>TN(e)&&Ne(e.dom.host),Oh=Ye(Element.prototype.attachShadow)&&Ye(Node.prototype.getRootNode),jN=K(Oh),Jo=Oh?e=>S.fromDom(e.dom.getRootNode()):wo,rf=e=>Ph(e)?e:WN(wo(e)),qN=e=>{const t=Jo(e);return Ph(t)?h.some(t):h.none()},KN=e=>S.fromDom(e.dom.host),Dh=e=>{if(jN()&&Ne(e.target)){const t=S.fromDom(e.target);if(Qn(t)&&GN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ut(n)}}return h.from(e.target)},GN=e=>Ne(e.dom.shadowRoot),Kr=e=>{const t=In(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return qN(S.fromDom(t)).fold(()=>n.body.contains(t),kt(Kr,KN))},Bh=(e,t,n)=>{if(!me(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Zi(e)&&e.style.setProperty(t,n)},YN=(e,t)=>{Zi(e)&&e.style.removeProperty(t)},$h=(e,t,n)=>{const s=e.dom;Bh(s,t,n)},yl=(e,t)=>{const n=e.dom;yt(t,(s,o)=>{Bh(n,o,s)})},Ts=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Kr(e)?Ih(n,t):o},Ih=(e,t)=>Zi(e)?e.style.getPropertyValue(t):"",vl=(e,t)=>{const n=e.dom,s=Ih(n,t);return h.from(s).filter(o=>o.length>0)},Fh=e=>{const t={},n=e.dom;if(Zi(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},Lh=(e,t)=>{const n=e.dom;YN(n,t),jr(qr(e,"style").map(Wr),"")&&Xt(e,"style")},XN=e=>e.dom.offsetWidth,Jn=(e,t)=>{Zn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},xo=(e,t)=>{ea(e).fold(()=>{Zn(e).each(o=>{Lt(o,t)})},s=>{Jn(s,t)})},Mh=(e,t)=>{Th(e).fold(()=>{Lt(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Lt=(e,t)=>{e.dom.appendChild(t.dom)},QN=(e,t)=>{Jn(e,t),Lt(t,e)},ZN=(e,t)=>{T(t,(n,s)=>{const o=s===0?e:t[s-1];xo(o,n)})},er=(e,t)=>{T(t,n=>{Lt(e,n)})},ta=e=>{e.dom.textContent="",T(Qt(e),t=>{Tt(t)})},Tt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},tr=e=>{const t=Qt(e);t.length>0&&ZN(e,t),Tt(e)},JN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Qt(S.fromDom(s))},eA=e=>z(e,S.fromDom),Uh=e=>e.dom.innerHTML,af=(e,t)=>{const s=_h(e).dom,o=S.fromDom(s.createDocumentFragment()),r=JN(t,s);er(o,r),ta(e),Lt(e,o)},tA=e=>{const t=S.fromTag("div"),n=S.fromDom(e.dom.cloneNode(!0));return Lt(t,n),Uh(t)},nA=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),sA=e=>{const t=S.fromDom(Dh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Bt(s,n);return nA(t,e.clientX,e.clientY,n,s,o,e)},oA=(e,t)=>n=>{e(n)&&t(sA(n))},rA=(e,t,n,s,o)=>{const r=oA(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(aA,e,t,r,o)}},iA=(e,t,n,s)=>rA(e,t,n,s,!1),aA=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},zh=(e,t)=>({left:e,top:t,translate:(s,o)=>zh(e+s,t+o)}),Gr=zh,lA=e=>{const t=e.getBoundingClientRect();return Gr(t.left,t.top)},El=(e,t)=>e!==void 0?e:t!==void 0?t:0,cA=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Gr(n.offsetLeft,n.offsetTop);const r=El(s==null?void 0:s.pageYOffset,o.scrollTop),i=El(s==null?void 0:s.pageXOffset,o.scrollLeft),a=El(o.clientTop,n.clientTop),c=El(o.clientLeft,n.clientLeft);return lf(e).translate(i-c,r-a)},lf=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Gr(s.offsetLeft,s.offsetTop):Kr(e)?lA(t):Gr(0,0)},cf=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Gr(n,s)},Hh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Vh=(e,t)=>{Xo().browser.isSafari()&&Ye(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},uA=e=>{const t=e===void 0?window:e;return Xo().browser.isFirefox()?h.none():h.from(t.visualViewport)},Wh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),jh=e=>{const t=e===void 0?window:e,n=t.document,s=cf(S.fromDom(n));return uA(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return Wh(s.left,s.top,r,i)},o=>Wh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},nr=e=>t=>!!t&&t.nodeType===e,wl=e=>!!e&&!Object.getPrototypeOf(e),Ee=nr(1),es=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return R(t,s)}return!1}},xl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Ee(s))for(let o=0;o<n.length;o++){const r=s.ownerDocument.defaultView.getComputedStyle(s,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},qh=e=>t=>Ee(t)&&t.hasAttribute(e),fA=(e,t)=>n=>Ee(n)&&n.getAttribute(e)===t,sr=e=>Ee(e)&&e.hasAttribute("data-mce-bogus"),dA=e=>Ee(e)&&e.getAttribute("data-mce-bogus")==="all",na=e=>Ee(e)&&e.tagName==="TABLE",Kh=e=>t=>!!(Ee(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),uf=es(["textarea","input"]),te=nr(3),mA=nr(4),pA=nr(7),ff=nr(8),df=nr(9),mf=nr(11),Pt=es(["br"]),Gh=es(["img"]),Rs=Kh("true"),wt=Kh("false"),Sl=es(["td","th"]),Ps=es(["video","audio","object","embed"]),gA=Xo().browser,Yh=e=>ge(e,Qn),hA=e=>gA.isFirefox()&&Et(e)==="table"?Yh(Qt(e)).filter(t=>Et(t)==="caption").bind(t=>Yh(Ah(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Xh=(e,t)=>e.children&&R(e.children,t),bA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Ts(S.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!Xh(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Xh(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=hA(S.fromDom(t))}return{x:s,y:o}};var Qh=(e,t,n,s,o)=>e(n,s)?h.some(n):Ye(o)&&o(n)?h.none():t(n,s,o);const Yr=(e,t,n)=>{let s=e.dom;const o=Ye(n)?n:ht;for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s);if(t(r))return h.some(r);if(o(r))break}return h.none()},Xr=(e,t,n)=>Qh((o,r)=>r(o),Yr,e,t,n),CA=(e,t)=>{const n=e.dom;return n.parentNode?yA(S.fromDom(n.parentNode),s=>!ot(e,s)&&t(s)):h.none()},yA=(e,t)=>{const n=o=>t(S.fromDom(o));return ge(e.dom.childNodes,n).map(S.fromDom)},vA=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=S.fromDom(s.childNodes[o]);if(t(r))return h.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return h.none()};return n(e.dom)},sa=(e,t,n)=>Yr(e,s=>As(s,t),n),oa=(e,t)=>MN(t,e),or=(e,t,n)=>Qh((o,r)=>As(o,r),sa,e,t,n),Zh=(e,t={})=>{let n=0;const s={},o=S.fromDom(e),r=wo(o),i=t.maxLoadTime||5e3,a=v=>{t.referrerPolicy=v},c=v=>{Lt(rf(o),v)},f=v=>{const x=rf(o);oa(x,"#"+v).each(Tt)},d=v=>ft(s,v).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=v=>new Promise((x,_)=>{let P;const O=G._addCacheSuffix(v),I=d(O);s[O]=I,I.count++;const M=(ue,oe)=>{T(ue,Go),I.status=oe,I.passed=[],I.failed=[],P&&(P.onload=null,P.onerror=null,P=null)},ce=()=>M(I.passed,2),V=()=>M(I.failed,3),j=(ue,oe)=>{ue()||(Date.now()-ve<i?setTimeout(oe):V())},X=()=>{j(()=>{const ue=e.styleSheets;let oe=ue.length;for(;oe--;){const qe=ue[oe].ownerNode;if(qe&&qe.id===P.id)return ce(),!0}return!1},X)};if(x&&I.passed.push(x),_&&I.failed.push(_),I.status===1)return;if(I.status===2){ce();return}if(I.status===3){V();return}I.status=1;const J=S.fromTag("link",r.dom);Ns(J,{rel:"stylesheet",type:"text/css",id:I.id});const ve=Date.now();t.contentCssCors&&Yt(J,"crossOrigin","anonymous"),t.referrerPolicy&&Yt(J,"referrerpolicy",t.referrerPolicy),P=J.dom,P.onload=X,P.onerror=V,c(J),Yt(J,"href",O)}),C=v=>Promise.allSettled(z(v,_=>p(_).then(K(_)))).then(_=>{const P=be(_,O=>O.status==="fulfilled");return P.fail.length>0?Promise.reject(z(P.fail,O=>O.reason)):z(P.pass,O=>O.value)}),y=v=>{const x=G._addCacheSuffix(v);ft(s,x).each(_=>{--_.count===0&&(delete s[x],f(_.id))})};return{load:p,loadAll:C,unload:y,unloadAll:v=>{T(v,x=>{y(x)})},_setReferrerPolicy:a}},Jh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Jo(n).dom;return h.from(e.get(r)).getOrThunk(()=>{const i=Zh(r,s);return e.set(r,i),i})}}})();class $t{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){let r,i;if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){if(r=t[s],r)return r;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){let s,o,r;if(t){if(s=t.previousSibling,this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}if(o=t.parentNode,o&&o!==this.rootNode)return o}}}const EA=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],wA=["td","th"],xA=["thead","tbody","tfoot"],SA=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],_A=["h1","h2","h3","h4","h5","h6"],kA=["li","dd","dt"],NA=["ul","ol","dl"],AA=["pre","script","textarea","style"],TA=["pre"].concat(_A),So=e=>{let t;return n=>(t=t||En(e,ut),Fe(t,Et(n)))},os=So(EA),RA=e=>Et(e)==="table",pf=e=>Qn(e)&&!os(e),Qr=e=>Qn(e)&&Et(e)==="br",PA=So(SA),gf=So(NA),ra=So(kA),OA=So(xA),_l=So(wA),kl=So(AA),DA=So(TA),BA=e=>DA(e)||pf(e),eb=(e,t,n)=>sa(e,t,n).isSome(),ia="\uFEFF",Zt="\xA0",tb=e=>e===ia,$A=e=>e.replace(/\uFEFF/g,""),qt=ia,Nl=tb,_o=$A,IA=Ee,Zr=te,Jr=e=>(Zr(e)&&(e=e.parentNode),IA(e)&&e.hasAttribute("data-mce-caret")),ei=e=>Zr(e)&&Nl(e.data),Ln=e=>Jr(e)||ei(e),nb=e=>e.firstChild!==e.lastChild||!Pt(e.firstChild),FA=(e,t)=>{const s=e.ownerDocument.createTextNode(qt),o=e.parentNode;if(t){const r=e.previousSibling;if(Zr(r)){if(Ln(r))return r;if(Tl(r))return r.splitText(r.data.length-1)}o.insertBefore(s,e)}else{const r=e.nextSibling;if(Zr(r)){if(Ln(r))return r;if(Al(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(s,e.nextSibling):o.appendChild(s)}return s},hf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset())===qt||e.isAtStart()&&ei(t.previousSibling):!1},bf=e=>{const t=e.container();return te(t)?t.data.charAt(e.offset()-1)===qt||e.isAtEnd()&&ei(t.nextSibling):!1},LA=()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},MA=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(LA());const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},Al=e=>Zr(e)&&e.data[0]===qt,Tl=e=>Zr(e)&&e.data[e.data.length-1]===qt,UA=e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];sr(n)&&n.parentNode.removeChild(n)},Cf=e=>e&&e.hasAttribute("data-mce-caret")?(UA(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,sb=e=>Jr(e.startContainer),ob=Rs,zA=wt,HA=Pt,VA=te,WA=es(["script","style","textarea"]),rb=es(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jA=es(["table"]),qA=Ln,ts=e=>qA(e)?!1:VA(e)?!WA(e.parentNode):rb(e)||HA(e)||jA(e)||yf(e),KA=e=>Ee(e)&&e.getAttribute("unselectable")==="true",yf=e=>KA(e)===!1&&zA(e),GA=(e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(yf(e))return!1;if(ob(e))return!0}return!0},YA=e=>yf(e)?Q(Ct(e.getElementsByTagName("*")),(t,n)=>t||ob(n),!1)!==!0:!1,XA=e=>rb(e)||YA(e),ib=(e,t)=>ts(e)&&GA(e,t),QA=/^[ \t\r\n]*$/,rr=e=>QA.test(e),ZA=e=>" \f	\v".indexOf(e)!==-1,ab=e=>e===`
`||e==="\r",JA=(e,t)=>t<e.length&&t>=0?ab(e[t]):!1,lb=(e,t=4,n=!0,s=!0)=>{const o=uN(" ",t),r=e.replace(/\t/g,o);return Q(r,(a,c)=>ZA(c)||c===Zt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||JA(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Zt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:ab(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},eT=(e,t)=>{const n=S.fromDom(t),s=S.fromDom(e);return eb(s,"pre,code",re(ot,n))},tT=(e,t)=>te(e)&&rr(e.data)&&eT(e,t)===!1,nT=e=>Ee(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Rl=(e,t)=>ts(e)&&tT(e,t)===!1||nT(e)||sT(e),sT=qh("data-mce-bookmark"),oT=qh("data-mce-bogus"),rT=fA("data-mce-bogus","all"),iT=(e,t)=>{let n=0;if(Rl(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new $t(s,e);do{if(t){if(rT(s)){s=o.next(!0);continue}if(oT(s)){s=o.next();continue}}if(Pt(s)){n++,s=o.next();continue}if(Rl(s,e))return!1;s=o.next()}while(s);return n<=1}},zt=(e,t=!0)=>iT(e.dom,t),aT=e=>e.nodeName.toLowerCase()==="span",cb=(e,t)=>Ne(e)&&(Rl(e,t)||pf(S.fromDom(e))),lT=(e,t)=>{const n=new $t(e,t).prev(!1),s=new $t(e,t).next(!1),o=Rt(n)||cb(n,t),r=Rt(s)||cb(s,t);return o&&r},ub=e=>aT(e)&&e.getAttribute("data-mce-type")==="bookmark",cT=(e,t)=>te(e)&&e.data.length>0&&lT(e,t),uT=e=>Ee(e)?e.childNodes.length>0:!1,fT=e=>mf(e)||df(e),vf=(e,t,n)=>{const s=n||t;if(Ee(t)&&ub(t))return t;const o=t.childNodes;for(let r=o.length-1;r>=0;r--)vf(e,o[r],s);if(Ee(t)){const r=t.childNodes;r.length===1&&ub(r[0])&&t.parentNode.insertBefore(r[0],t)}return!fT(t)&&!Rl(t,s)&&!uT(t)&&!cT(t,s)&&e.remove(t),t},dT=G.makeMap,Pl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ol=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mT=/[<>&\"\']/g,pT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,gT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},ir={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},hT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},bT=e=>{const t=S.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},fb=(e,t)=>{let n,s,o;const r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)s=String.fromCharCode(parseInt(e[n],t)),ir[s]||(o="&"+e[n+1]+";",r[s]=o,r[o]=s);return r}},Ef=fb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),db=(e,t)=>e.replace(t?Pl:Ol,n=>ir[n]||n),CT=e=>(""+e).replace(mT,t=>ir[t]||t),mb=(e,t)=>e.replace(t?Pl:Ol,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":ir[n]||"&#"+n.charCodeAt(0)+";"),wf=(e,t,n)=>(n=n||Ef,e.replace(t?Pl:Ol,s=>ir[s]||n[s]||s)),ko={encodeRaw:db,encodeAllRaw:CT,encodeNumeric:mb,encodeNamed:wf,getEncodeFunc:(e,t)=>{const n=fb(t)||Ef,s=(i,a)=>i.replace(a?Pl:Ol,c=>ir[c]!==void 0?ir[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>wf(i,a,n),r=dT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:wf:r.numeric?mb:db},decode:e=>e.replace(pT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):gT[n]||String.fromCharCode(n)):hT[t]||Ef[t]||bT(t))},No={},yT={},ti=G.makeMap,Jt=G.each,xf=G.extend,pb=G.explode,vT=G.inArray,Kt=(e,t)=>(e=G.trim(e),e?e.split(t||" "):[]),gb=(e,t)=>{const n=ti(e," ",ti(e.toUpperCase()," "));return xf(n,t)},hb=e=>gb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ET=e=>{const t={};let n,s,o,r,i,a;const c=(d,p="",C="")=>{const y=Kt(C),w=Kt(d);let v=w.length;for(;v--;){const x=Kt([n,p].join(" "));t[w[v]]={attributes:En(x,()=>({})),attributesOrder:x,children:En(y,K(yT))}}},f=(d,p)=>{const C=Kt(d),y=Kt(p);let w=C.length;for(;w--;){const v=t[C[w]];for(let x=0,_=y.length;x<_;x++)v.attributes[y[x]]={},v.attributesOrder.push(y[x])}};return No[e]?No[e]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",o=[o,a].join(" "),Jt(Kt(a),d=>{c(d,"",o)}),i="center dir isindex noframes",s=[s,i].join(" "),r=[s,o].join(" "),Jt(Kt(i),d=>{c(d,"",r)})),r=r||[s,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),c("address dt dd div caption","",r),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",r),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",r),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",r),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",r),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),c("param","name value"),c("map","name",[r,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",r),c("th","colspan rowspan headers scope abbr",r),c("form","accept-charset action autocomplete enctype method name novalidate target",r),c("fieldset","disabled form name",[r,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[r,"li"].join(" ")),c("noscript","",r),e!=="html4"&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",r),c("mark rt rp summary bdi","",o),c("canvas","width height",r),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",r),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[r,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",r),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[r,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),e!=="html4"&&T([t.video,t.audio],d=>{delete d.children.audio,delete d.children.video}),Jt(Kt("a form meter progress dfn"),d=>{t[d]&&delete t[d].children[d]}),delete t.caption.children.table,delete t.script,No[e]=t,t)},Sf=(e,t)=>{let n;return e&&(n={},typeof e=="string"&&(e={"*":e}),Jt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?ti(s,/[, ]/):pb(s,/[, ]/)})),n},Ao=e=>{var t;const n={},s={};let o=[];const r={},i={},a=(Se,xe,Ke)=>{let Ge=e[Se];return Ge?Ge=ti(Ge,/[, ]/,ti(Ge.toUpperCase(),/[, ]/)):(Ge=No[Se],Ge||(Ge=gb(xe,Ke),No[Se]=Ge)),Ge};e=e||{};const c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=ET(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Sf(e.valid_styles),p=Sf(e.invalid_styles,"map"),C=Sf(e.valid_classes,"map"),y=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_="td th iframe video audio object script code",P=a("non_empty_elements",_+" pre",v),O=a("move_caret_before_on_enter_elements",_+" table",v),I=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),M=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",I),ce=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Jt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Se=>{i[Se]=new RegExp("</"+Se+"[^>]*>","gi")});const V=Se=>new RegExp("^"+Se.replace(/([?+*])/g,".$1")+"$"),j=Se=>{let xe,Ke,Ge,Dt,nt,Le,st,en,tn,jt,ps,bn,an,Wn,Uo,Vs,Ws,gs;const Tr=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,zo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,jn=/[*?+]/;if(Se){const hs=Kt(Se,",");for(n["@"]&&(Vs=n["@"].attributes,Ws=n["@"].attributesOrder),xe=0,Ke=hs.length;xe<Ke;xe++)if(nt=Tr.exec(hs[xe]),nt){if(Wn=nt[1],tn=nt[2],Uo=nt[3],en=nt[5],bn={},an=[],Le={attributes:bn,attributesOrder:an},Wn==="#"&&(Le.paddEmpty=!0),Wn==="-"&&(Le.removeEmpty=!0),nt[4]==="!"&&(Le.removeEmptyAttrs=!0),Vs&&(yt(Vs,(Rr,bs)=>{bn[bs]=Rr}),an.push.apply(an,Ws)),en){for(en=Kt(en,"|"),Ge=0,Dt=en.length;Ge<Dt;Ge++)if(nt=zo.exec(en[Ge]),nt){if(st={},ps=nt[1],jt=nt[2].replace(/[\\:]:/g,":"),Wn=nt[3],gs=nt[4],ps==="!"&&(Le.attributesRequired=Le.attributesRequired||[],Le.attributesRequired.push(jt),st.required=!0),ps==="-"){delete bn[jt],an.splice(vT(an,jt),1);continue}Wn&&(Wn==="="&&(Le.attributesDefault=Le.attributesDefault||[],Le.attributesDefault.push({name:jt,value:gs}),st.defaultValue=gs),Wn==="~"&&(Le.attributesForced=Le.attributesForced||[],Le.attributesForced.push({name:jt,value:gs}),st.forcedValue=gs),Wn==="<"&&(st.validValues=ti(gs,"?"))),jn.test(jt)?(Le.attributePatterns=Le.attributePatterns||[],st.pattern=V(jt),Le.attributePatterns.push(st)):(bn[jt]||an.push(jt),bn[jt]=st)}}!Vs&&tn==="@"&&(Vs=bn,Ws=an),Uo&&(Le.outputName=tn,n[Uo]=Le),jn.test(tn)?(Le.pattern=V(tn),o.push(Le)):n[tn]=Le}}},X=Se=>{o=[],T(Xn(n),xe=>{delete n[xe]}),j(Se),Jt(f,(xe,Ke)=>{s[Ke]=xe.children})},J=Se=>{const xe=/^(~)?(.+)$/;Se&&(No.text_block_elements=No.block_elements=null,Jt(Kt(Se,","),Ke=>{const Ge=xe.exec(Ke),Dt=Ge[1]==="~",nt=Dt?"span":"div",Le=Ge[2];if(s[Le]=s[nt],r[Le]=nt,P[Le.toUpperCase()]={},P[Le]={},Dt||(M[Le.toUpperCase()]={},M[Le]={}),!n[Le]){let st=n[nt];st=xf({},st),delete st.removeEmptyAttrs,delete st.removeEmpty,n[Le]=st}Jt(s,(st,en)=>{st[nt]&&(s[en]=st=xf({},s[en]),st[Le]=st[nt])})}))},ve=Se=>{const xe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;No[c]=null,Se&&Jt(Kt(Se,","),Ke=>{const Ge=xe.exec(Ke);let Dt,nt;Ge&&(nt=Ge[1],nt?Dt=s[Ge[2]]:Dt=s[Ge[2]]={"#comment":{}},Dt=s[Ge[2]],Jt(Kt(Ge[3],"|"),Le=>{nt==="-"?delete Dt[Le]:Dt[Le]={}}))})},ue=Se=>{let xe=n[Se],Ke;if(xe)return xe;for(Ke=o.length;Ke--;)if(xe=o[Ke],xe.pattern.test(Se))return xe};e.valid_elements?X(e.valid_elements):(Jt(f,(Se,xe)=>{n[xe]={attributes:Se.attributes,attributesOrder:Se.attributesOrder},s[xe]=Se.children}),Jt(Kt("strong/b em/i"),Se=>{const xe=Kt(Se,"/");n[xe[1]].outputName=xe[0]}),Jt(ce,(Se,xe)=>{n[xe]&&(e.padd_empty_block_inline_children&&(n[xe].paddInEmptyBlock=!0),n[xe].removeEmpty=!0)}),Jt(Kt("ol ul blockquote a table tbody"),Se=>{n[Se]&&(n[Se].removeEmpty=!0)}),Jt(Kt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Se=>{n[Se].paddEmpty=!0}),Jt(Kt("span"),Se=>{n[Se].removeEmptyAttrs=!0})),J(e.custom_elements),ve(e.valid_children),j(e.extended_valid_elements),ve("+ol[ul|ol],+ul[ul|ol]"),Jt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Se,xe)=>{n[xe]&&(n[xe].parentsRequired=Kt(Se))}),e.invalid_elements&&Jt(pb(e.invalid_elements),Se=>{n[Se]&&delete n[Se]}),ue("span")||j("span[!data-mce-type|*]");const oe=K(d),He=K(p),qe=K(C),et=K(x),Ot=K(M),Y=K(I),he=K(ce),Ie=K(Object.seal(v)),Be=K(w),It=K(P),ne=K(O),we=K(y),fe=K(Object.seal(i)),ee=(Se,xe)=>{const Ke=s[Se.toLowerCase()];return!!(Ke&&Ke[xe.toLowerCase()])},$e=(Se,xe)=>{let Ke,Ge;const Dt=ue(Se);if(Dt)if(xe){if(Dt.attributes[xe])return!0;if(Ke=Dt.attributePatterns,Ke){for(Ge=Ke.length;Ge--;)if(Ke[Ge].pattern.test(xe))return!0}}else return!0;return!1},Me=K(r);return{type:c,children:s,elements:n,getValidStyles:oe,getValidClasses:qe,getBlockElements:Ot,getInvalidStyles:He,getVoidElements:Ie,getTextBlockElements:Y,getTextInlineElements:he,getBoolAttrs:et,getElementRule:ue,getSelfClosingElements:Be,getNonEmptyElements:It,getMoveCaretBeforeOnEnterElements:ne,getWhitespaceElements:we,getSpecialElements:fe,isValidChild:ee,isValid:$e,getCustomElements:Me,addValidElements:j,setValidElements:X,addCustomElements:J,addValidChildren:ve}},_f=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/;let r;const i={};let a,c;const f=ia;e=e||{},t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+f).split(" ");for(r=0;r<d.length;r++)i[d[r]]=f+r,i[f+r]=d[r];const p={parse:C=>{const y={};let w,v,x,_;const P=e.url_converter,O=e.url_converter_scope||p,I=(ue,oe,He)=>{const qe=y[ue+"-top"+oe];if(!qe)return;const et=y[ue+"-right"+oe];if(!et)return;const Ot=y[ue+"-bottom"+oe];if(!Ot)return;const Y=y[ue+"-left"+oe];if(!Y)return;const he=[qe,et,Ot,Y];for(r=he.length-1;r--&&he[r]===he[r+1];);r>-1&&He||(y[ue+oe]=r===-1?he[0]:he.join(" "),delete y[ue+"-top"+oe],delete y[ue+"-right"+oe],delete y[ue+"-bottom"+oe],delete y[ue+"-left"+oe])},M=ue=>{let oe=y[ue],He;if(!!oe){for(oe=oe.split(" "),He=oe.length;He--;)if(oe[He]!==oe[0])return!1;return y[ue]=oe[0],!0}},ce=(ue,oe,He,qe)=>{!M(oe)||!M(He)||!M(qe)||(y[ue]=y[oe]+" "+y[He]+" "+y[qe],delete y[oe],delete y[He],delete y[qe])},V=ue=>(_=!0,i[ue]),j=(ue,oe)=>(_&&(ue=ue.replace(/\uFEFF[0-9]/g,He=>i[He])),oe||(ue=ue.replace(/\\([\'\";:])/g,"$1")),ue),X=ue=>String.fromCharCode(parseInt(ue.slice(1),16)),J=ue=>ue.replace(/\\[0-9a-f]+/gi,X),ve=(ue,oe,He,qe,et,Ot)=>{if(et=et||Ot,et)return et=j(et),"'"+et.replace(/\'/g,"\\'")+"'";if(oe=j(oe||He||qe),!e.allow_script_urls){const Y=oe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Y)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Y))return""}return P&&(oe=P.call(O,oe,"style")),"url('"+oe.replace(/\'/g,"\\'")+"')"};if(C){for(C=C.replace(/[\u0000-\u001F]/g,""),C=C.replace(/\\[\"\';:\uFEFF]/g,V).replace(/\"[^\"]+\"|\'[^\']+\'/g,ue=>ue.replace(/[;:]/g,V));w=s.exec(C);)if(s.lastIndex=w.index+w[0].length,v=w[1].replace(o,"").toLowerCase(),x=w[2].replace(o,""),v&&x){if(v=J(v),x=J(x),v.indexOf(f)!==-1||v.indexOf('"')!==-1||!e.allow_script_urls&&(v==="behavior"||/expression\s*\(|\/\*|\*\//.test(x)))continue;v==="font-weight"&&x==="700"?x="bold":(v==="color"||v==="background-color")&&(x=x.toLowerCase()),x=x.replace(n,ve),y[v]=_?j(x,!0):x}I("border","",!0),I("border","-width"),I("border","-color"),I("border","-style"),I("padding",""),I("margin",""),ce("border","border-width","border-style","border-color"),y.border==="medium none"&&delete y.border,y["border-image"]==="none"&&delete y["border-image"]}return y},serialize:(C,y)=>{let w="";const v=_=>{let P;const O=a[_];if(O)for(let I=0,M=O.length;I<M;I++)_=O[I],P=C[_],P&&(w+=(w.length>0?" ":"")+_+": "+P+";")},x=(_,P)=>{let O=c["*"];return O&&O[_]?!1:(O=c[P],!(O&&O[_]))};return y&&a?(v("*"),v(y)):yt(C,(_,P)=>{_&&(!c||x(P,y))&&(w+=(w.length>0?" ":"")+P+": "+_+";")}),w}};return p},wT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},xT=e=>e instanceof Event||Ye(e.initEvent),ST=e=>e.isDefaultPrevented===ut||e.isDefaultPrevented===ht,_T=e=>Ft(e.preventDefault)||xT(e),bb=(e,t)=>{const n=t!=null?t:{};for(const s in e)Fe(wT,s)||(n[s]=e[s]);return Ne(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},kf=(e,t,n,s)=>{var o;const r=bb(t,s);return r.type=e,Ft(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),_T(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=ut,Ye(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=ut,Ye(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=ut,r.stopPropagation()},ST(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?ut:ht,r.isPropagationStopped=r.cancelBubble===!0?ut:ht,r.isImmediatePropagationStopped=ht)),r},kT="mce-data-",NT=/^(?:mouse|contextmenu)|click/,Nf=(e,t,n,s)=>{e.addEventListener?e.addEventListener(t,n,s||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Dl=(e,t,n,s)=>{e.removeEventListener?e.removeEventListener(t,n,s||!1):e.detachEvent&&e.detachEvent("on"+t,n)},AT=e=>Ne(e)&&NT.test(e.type),ni=(e,t)=>{const n=kf(e.type,e,document,t);if(AT(e)&&Rt(e.pageX)&&!Rt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},TT=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{Dl(e,"DOMContentLoaded",i),Dl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():Nf(e,"DOMContentLoaded",i),n.domLoaded||Nf(e,"load",i)};class ar{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=kT+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i,a,c,f,d,p,C;const y=window,w=x=>{r.executeHandlers(ni(x||y.event),i)};if(!t||t.nodeType===3||t.nodeType===8)return;t[r.expando]?i=t[r.expando]:(i=r.count++,t[r.expando]=i,r.events[i]={}),o=o||t;const v=n.split(" ");for(c=v.length;c--;){if(f=v[c],p=w,d=C=!1,f==="DOMContentLoaded"&&(f="ready"),r.domLoaded&&f==="ready"&&t.readyState==="complete"){s.call(o,ni({type:f}));continue}r.hasMouseEnterLeave||(d=r.mouseEnterLeave[f],d&&(p=x=>{const _=x.currentTarget;let P=x.relatedTarget;if(P&&_.contains)P=_.contains(P);else for(;P&&P!==_;)P=P.parentNode;P||(x=ni(x||y.event),x.type=x.type==="mouseout"?"mouseleave":"mouseenter",x.target=_,r.executeHandlers(x,i))})),!r.hasFocusIn&&(f==="focusin"||f==="focusout")&&(C=!0,d=f==="focusin"?"focus":"blur",p=x=>{x=ni(x||y.event),x.type=x.type==="focus"?"focusin":"focusout",r.executeHandlers(x,i)}),a=r.events[i][f],a?f==="ready"&&r.domLoaded?s(ni({type:f})):a.push({func:s,scope:o}):(r.events[i][f]=a=[{func:s,scope:o}],a.fakeName=d,a.capture=C,a.nativeHandler=p,f==="ready"?TT(t,p,r):Nf(t,d||f,p,C))}return t=a=null,s}unbind(t,n,s){let o,r,i,a,c;if(!t||t.nodeType===3||t.nodeType===8)return this;const f=t[this.expando];if(f){if(c=this.events[f],n){const d=n.split(" ");for(r=d.length;r--;)if(a=d[r],o=c[a],o){if(s){for(i=o.length;i--;)if(o[i].func===s){const p=o.nativeHandler,C=o.fakeName,y=o.capture;o=o.slice(0,i).concat(o.slice(i+1)),o.nativeHandler=p,o.fakeName=C,o.capture=y,c[a]=o}}(!s||o.length===0)&&(delete c[a],Dl(t,o.fakeName||a,o.nativeHandler,o.capture))}}else yt(c,(d,p)=>{Dl(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(a in c)if(Fe(c,a))return this;delete this.events[f];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){let o;if(!t||t.nodeType===3||t.nodeType===8)return this;const r=ni({type:n,target:t},s);do o=t[this.expando],o&&this.executeHandlers(r,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return this}clean(t){let n,s;if(!t||t.nodeType===3||t.nodeType===8)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),s=t.getElementsByTagName("*"),n=s.length;n--;)t=s[n],t[this.expando]&&this.unbind(t);return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ar.Event=new ar;const Af=G.each,RT=G.grep,Tf="data-mce-style",aa=(e,t,n)=>{Ft(n)||n===""?Xt(e,t):Yt(e,t,n)},PT=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=S.fromDom(i);Ye(t.url_converter)&&Ne(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),a,c,i[0]));const d="data-mce-"+c;aa(f,d,a),aa(f,c,a)},get:(i,a)=>{const c=S.fromDom(i);return Fn(c,"data-mce-"+a)||Fn(c,a)}},r={style:{set:(i,a)=>{const c=S.fromDom(i);if(dt(a)){yl(c,a);return}s&&aa(c,Tf,a),Xt(c,"style"),me(a)&&yl(c,e.parse(a))},get:i=>{const a=S.fromDom(i),c=Fn(a,Tf)||Fn(a,"style");return e.serialize(e.parse(c),Et(a))}}};return s&&(r.href=r.src=o),r},OT=(e,t)=>{const n=Fn(t,"style"),s=e.serialize(e.parse(n),Et(t));aa(t,Tf,s)},si=(e,t)=>{let n=0,s,o;if(e)for(s=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,!(t&&o===3&&(o===s||!e.nodeValue.length))&&(n++,s=o);return n},DT=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Cb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),lt=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=Jh.forElement(S.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],d=t.schema?t.schema:Ao({}),p=_f({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),C=t.ownEvents?new ar:ar.Event,y=d.getBlockElements(),w=A=>me(A)?Fe(y,A):Ee(A)&&Fe(y,A.nodeName),v=A=>A&&e&&me(A)?e.getElementById(A):A,x=A=>{const B=v(A);return Ne(B)?S.fromDom(B):null},_=(A,B,q)=>{let W;const Ce=x(A);if(Ne(Ce)&&Qn(Ce)){const We=bu[B];We&&We.get?W=We.get(Ce.dom,B):W=Fn(Ce,B)}return Ne(W)?W:q!=null?q:""},P=A=>{const B=v(A);return Ft(B)?[]:B.attributes},O=(A,B,q)=>{Ie(A,W=>{if(Ee(W)){const Ce=S.fromDom(W);q===""&&(q=null);const We=Fn(Ce,B),Ve=bu[B];Ve&&Ve.set?Ve.set(Ce.dom,q,B):aa(Ce,B,q),We!==q&&t.onSetAttrib&&t.onSetAttrib({attrElm:Ce,attrName:B,attrValue:q})}})},I=(A,B)=>A.cloneNode(B),M=()=>t.root_element||e.body,ce=A=>{const B=jh(A);return{x:B.x,y:B.y,w:B.width,h:B.height}},V=(A,B)=>bA(e.body,v(A),B),j=(A,B,q)=>{const W=(We,Ve)=>me(We)?We:vn(We)?Fe(DT,Ve)?We+"":We+"px":Wi(We,W),Ce=(We,Ve,An)=>{const Cs=Cb(Ve);Ft(An)||An===""?Lh(We,Cs):$h(We,Cs,W(An,Cs))};Ie(A,We=>{const Ve=S.fromDom(We);me(B)?Ce(Ve,B,q):yt(B,(An,Cs)=>{Ce(Ve,Cs,An)}),t.update_styles&&OT(p,Ve)})},X=(A,B)=>{j(A,B)},J=(A,B,q)=>{const W=v(A);if(!(Ft(W)||!Ee(W)))return q?Ts(S.fromDom(W),Cb(B)):(B=B.replace(/-(\D)/g,(Ce,We)=>We.toUpperCase()),B==="float"&&(B="cssFloat"),W.style?W.style[B]:void 0)},ve=A=>{let B,q;const W=v(A);return B=J(W,"width"),q=J(W,"height"),B.indexOf("px")===-1&&(B=0),q.indexOf("px")===-1&&(q=0),{w:parseInt(B,10)||W.offsetWidth||W.clientWidth,h:parseInt(q,10)||W.offsetHeight||W.clientHeight}},ue=A=>{const B=v(A),q=V(B),W=ve(B);return{x:q.x,y:q.y,w:W.w,h:W.h}},oe=(A,B)=>{if(!A)return!1;const q=At(A)?A:[A];return U(q,W=>As(S.fromDom(W),B))},He=(A,B,q,W)=>{const Ce=[];let We,Ve=v(A);for(W=W===void 0,q=q||(M().nodeName!=="BODY"?M().parentNode:null),me(B)&&(We=B,B==="*"?B=Ee:B=An=>oe(An,We));Ve&&!(Ve===q||Ft(Ve.nodeType)||df(Ve)||mf(Ve));){if(!B||B(Ve))if(W)Ce.push(Ve);else return[Ve];Ve=Ve.parentNode}return W?Ce:null},qe=(A,B,q)=>{const W=He(A,B,q,!1);return W&&W.length>0?W[0]:null},et=(A,B,q)=>{let W=B;if(A){for(me(B)&&(W=Ce=>oe(Ce,B)),A=A[q];A;A=A[q])if(Ye(W)&&W(A))return A}return null},Ot=(A,B)=>et(A,B,"nextSibling"),Y=(A,B)=>et(A,B,"previousSibling"),he=(A,B)=>{var q,W;const Ce=(W=(q=v(B))!==null&&q!==void 0?q:t.root_element)!==null&&W!==void 0?W:e;return Ct(Ce.querySelectorAll(A))},Ie=function(A,B,q){const W=q!=null?q:this,Ce=me(A)?v(A):A;if(!Ce)return!1;if(At(Ce)&&(Ce.length||Ce.length===0)){const We=[];return Af(Ce,(Ve,An)=>{Ve&&We.push(B.call(W,me(Ve)?v(Ve):Ve,An))}),We}else return B.call(W,Ce)},Be=(A,B)=>{Ie(A,q=>{yt(B,(W,Ce)=>{O(q,Ce,W)})})},It=(A,B)=>{Ie(A,q=>{const W=S.fromDom(q);af(W,B)})},ne=(A,B,q,W,Ce)=>Ie(A,We=>{const Ve=me(B)?e.createElement(B):B;return Ne(q)&&Be(Ve,q),W&&(!me(W)&&W.nodeType?Ve.appendChild(W):me(W)&&It(Ve,W)),Ce?Ve:We.appendChild(Ve)}),we=(A,B,q)=>ne(e.createElement(A),A,B,q,!0),fe=ko.decode,ee=ko.encodeAllRaw,$e=(A,B,q="")=>{let W="",Ce;W+="<"+A;for(Ce in B)Hr(B,Ce)&&(W+=" "+Ce+'="'+ee(B[Ce])+'"');return gl(q)&&Fe(d.getVoidElements(),A)?W+" />":W+">"+q+"</"+A+">"},Me=A=>{let B;const q=e.createElement("div"),W=e.createDocumentFragment();for(W.appendChild(q),A&&(q.innerHTML=A);B=q.firstChild;)W.appendChild(B);return W.removeChild(q),W},Se=(A,B)=>Ie(A,q=>{const W=S.fromDom(q);return B&&T(Qt(W),Ce=>{In(Ce)&&Ce.dom.length===0?Tt(Ce):Jn(W,Ce)}),Tt(W),W.dom}),xe=A=>Ie(A,B=>{const q=B.attributes;for(let W=q.length-1;W>=0;W--)B.removeAttributeNode(q.item(W))}),Ke=A=>p.parse(A),Ge=(A,B)=>p.serialize(A,B),Dt=A=>{let B,q;if(po!==lt.DOM&&e===document){if(n[A])return;n[A]=!0}q=e.getElementById("mceDefaultStyles"),q||(q=e.createElement("style"),q.id="mceDefaultStyles",q.type="text/css",B=e.getElementsByTagName("head")[0],B.firstChild?B.insertBefore(q,B.firstChild):B.appendChild(q)),q.styleSheet?q.styleSheet.cssText+=A:q.appendChild(e.createTextNode(A))},nt=A=>{A||(A=""),T(A.split(","),B=>{o[B]=!0,c.load(B).catch(De)})},Le=(A,B,q)=>{Ie(A,W=>{if(Ee(W)){const Ce=S.fromDom(W),We=B.split(" ");T(We,Ve=>{Ne(q)?(q?Qi:bl)(Ce,Ve):BN(Ce,Ve)})}})},st=(A,B)=>{Le(A,B,!0)},en=(A,B)=>{Le(A,B,!1)},tn=(A,B)=>{const q=x(A),W=B.split(" ");return rt(W,Ce=>sf(q,Ce))},jt=A=>{Ie(A,B=>Lh(S.fromDom(B),"display"))},ps=A=>{Ie(A,B=>$h(S.fromDom(B),"display","none"))},bn=A=>{const B=x(A);return jr(vl(B,"display"),"none")},an=A=>(A||"mce_")+r++,Wn=A=>{const B=x(A);return Ee(B.dom)?B.dom.outerHTML:tA(B)},Uo=(A,B)=>{Ie(A,q=>{Ee(q)&&(q.outerHTML=B)})},Vs=(A,B)=>{const q=v(B);return Ie(A,W=>{const Ce=q.parentNode,We=q.nextSibling;return We?Ce.insertBefore(W,We):Ce.appendChild(W),W})},Ws=(A,B,q)=>Ie(B,W=>(At(W)&&(A=A.cloneNode(!0)),q&&Af(RT(W.childNodes),Ce=>{A.appendChild(Ce)}),W.parentNode.replaceChild(A,W))),gs=(A,B)=>{let q;return A.nodeName!==B.toUpperCase()&&(q=we(B),Af(P(A),W=>{O(q,W.nodeName,_(A,W.nodeName))}),Ws(q,A,!0)),q||A},Tr=(A,B)=>{let q=A,W;for(;q;){for(W=B;W&&q!==W;)W=W.parentNode;if(q===W)break;q=q.parentNode}return!q&&A.ownerDocument?A.ownerDocument.documentElement:q},zo=A=>{if(Ee(A)){const B=A.nodeName.toLowerCase()==="a"&&!_(A,"href")&&_(A,"id");if(_(A,"name")||_(A,"data-mce-bookmark")||B)return!0}return!1},jn=(A,B)=>{let q,W,Ce=0;if(zo(A))return!1;if(A=A.firstChild,A){const We=new $t(A,A.parentNode),Ve=d?d.getWhitespaceElements():{};B=B||(d?d.getNonEmptyElements():null);do{if(q=A.nodeType,Ee(A)){const An=A.getAttribute("data-mce-bogus");if(An){A=We.next(An==="all");continue}if(W=A.nodeName.toLowerCase(),B&&B[W]){if(W==="br"){Ce++,A=We.next();continue}return!1}if(zo(A))return!1}if(q===8||q===3&&!rr(A.nodeValue)||q===3&&A.parentNode&&Ve[A.parentNode.nodeName]&&rr(A.nodeValue))return!1;A=We.next()}while(A)}return Ce<=1},hs=()=>e.createRange(),Rr=(A,B,q)=>{let W=hs(),Ce,We,Ve;if(A&&B)return W.setStart(A.parentNode,si(A)),W.setEnd(B.parentNode,si(B)),Ce=W.extractContents(),W=hs(),W.setStart(B.parentNode,si(B)+1),W.setEnd(A.parentNode,si(A)+1),We=W.extractContents(),Ve=A.parentNode,Ve.insertBefore(vf(po,Ce),A),q?Ve.insertBefore(q,A):Ve.insertBefore(B,A),Ve.insertBefore(vf(po,We),A),Se(A),q||B},bs=(A,B,q,W)=>{if(At(A)){let Ce=A.length;const We=[];for(;Ce--;)We[Ce]=bs(A[Ce],B,q,W);return We}else return t.collect&&(A===e||A===s)&&f.push([A,B,q,W]),C.bind(A,B,q,W||po)},gu=(A,B,q)=>{if(At(A)){let W=A.length;const Ce=[];for(;W--;)Ce[W]=gu(A[W],B,q);return Ce}else{if(f.length>0&&(A===e||A===s)){let W=f.length;for(;W--;){const Ce=f[W];A===Ce[0]&&(!B||B===Ce[1])&&(!q||q===Ce[2])&&C.unbind(Ce[0],Ce[1],Ce[2])}}return C.unbind(A,B,q)}},Wp=(A,B,q)=>C.dispatch(A,B,q),fo=(A,B,q)=>C.dispatch(A,B,q),mo=A=>{if(A&&Ee(A)){const B=A.getAttribute("data-mce-contenteditable");return B&&B!=="inherit"?B:A.contentEditable!=="inherit"?A.contentEditable:null}else return null},po={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:d,events:C,isBlock:w,root:null,clone:I,getRoot:M,getViewPort:ce,getRect:ue,getSize:ve,getParent:qe,getParents:He,get:v,getNext:Ot,getPrev:Y,select:he,is:oe,add:ne,create:we,createHTML:$e,createFragment:Me,remove:Se,setStyle:j,getStyle:J,setStyles:X,removeAllAttribs:xe,setAttrib:O,setAttribs:Be,getAttrib:_,getPos:V,parseStyle:Ke,serializeStyle:Ge,addStyle:Dt,loadCSS:nt,addClass:st,removeClass:en,hasClass:tn,toggleClass:Le,show:jt,hide:ps,isHidden:bn,uniqueId:an,setHTML:It,getOuterHTML:Wn,setOuterHTML:Uo,decode:fe,encode:ee,insertAfter:Vs,replace:Ws,rename:gs,findCommonAncestor:Tr,run:Ie,getAttribs:P,isEmpty:jn,createRng:hs,nodeIndex:si,split:Rr,bind:bs,unbind:gu,fire:fo,dispatch:Wp,getContentEditable:mo,getContentEditableParent:A=>{const B=M();let q=null;for(;A&&A!==B&&(q=mo(A),q===null);A=A.parentNode);return q},destroy:()=>{if(f.length>0){let A=f.length;for(;A--;){const B=f[A];C.unbind(B[0],B[1],B[2])}}yt(o,(A,B)=>{c.unload(B),delete o[B]})},isChildOf:(A,B)=>A===B||B.contains(A),dumpRng:A=>"startContainer: "+A.startContainer.nodeName+", startOffset: "+A.startOffset+", endContainer: "+A.endContainer.nodeName+", endOffset: "+A.endOffset},bu=PT(p,t,K(po));return po};lt.DOM=lt(document),lt.nodeIndex=si;const BT=lt.DOM,$T=0,IT=1,Bl=2,yb=3;class oo{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=BT;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Bl}markDone(t){this.states[t]=Bl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=$T),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{ft(n.scriptLoadedCallbacks,f).each(d=>{T(d,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=H(c,d=>d.status==="rejected");return f.length>0?Promise.reject(je(f,({reason:d})=>At(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(z(c,f=>n.states[f]===Bl?(s("resolve",f),Promise.resolve()):n.states[f]===yb?(s("reject",f),Promise.reject(f)):(n.states[f]=IT,n.loadScript(f).then(()=>{n.states[f]=Bl,s("resolve",f);const d=n.queue;if(d.length>0)return n.queue=[],r(d).then(o)},()=>(n.states[f]=yb,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return h.from(d).each(Go),o(f)})),a=$g(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,f))}):i(a)}}oo.ScriptLoader=new oo;const Ht=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},FT=e=>dt(e)&&Fe(e,"raw"),LT=e=>At(e)&&e.length>1,la={},Rf=Ht("en"),vb=()=>ft(la,Rf.get()),rs={getData:()=>Wi(la,e=>_e({},e)),setCode:e=>{e&&Rf.set(e)},getCode:()=>Rf.get(),add:(e,t)=>{let n=la[e];n||(la[e]=n={}),yt(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=vb().getOr({}),n=i=>Ye(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return ft(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(FT(e))return n(e.raw);if(LT(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Fe(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>vb().bind(e=>ft(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Fe(la,e)},on=()=>{const e=[],t={},n={},s=[],o=(v,x)=>{const _=H(s,P=>P.name===v&&P.state===x);T(_,P=>P.resolve())},r=v=>Fe(t,v),i=v=>Fe(n,v),a=v=>{if(n[v])return n[v].instance},c=(v,x)=>{const _=rs.getCode(),P=","+(x||"")+",";!_||x&&P.indexOf(","+_+",")===-1||oo.ScriptLoader.add(t[v]+"/langs/"+_+".js")},f=(v,x)=>{on.languageLoad!==!1&&(r(v)?c(v,x):w(v,"loaded").then(()=>c(v,x)))},d=(v,x)=>(e.push(x),n[v]={instance:x},o(v,"added"),x),p=v=>{delete t[v],delete n[v]},C=(v,x)=>me(x)?me(v)?{prefix:"",resource:x,suffix:""}:{prefix:v.prefix,resource:x,suffix:v.suffix}:x,y=(v,x)=>{if(t[v])return Promise.resolve();let _=me(x)?x:x.prefix+x.resource+x.suffix;_.indexOf("/")!==0&&_.indexOf("://")===-1&&(_=on.baseURL+"/"+_),t[v]=_.substring(0,_.lastIndexOf("/"));const P=()=>(o(v,"loaded"),Promise.resolve());return n[v]?P():oo.ScriptLoader.add(_).then(P)},w=(v,x="added")=>x==="added"&&i(v)||x==="loaded"&&r(v)?Promise.resolve():new Promise(_=>{s.push({name:v,state:x,resolve:_})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:d,remove:p,createUrl:C,load:y,waitFor:w}};on.languageLoad=!0,on.baseURL="",on.PluginManager=on(),on.ThemeManager=on(),on.ModelManager=on();const MT=e=>{const t=Ht(h.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(h.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(h.some(a))}}},To=()=>{const e=MT(De),t=n=>e.get().each(n);return mt(_e({},e),{on:t})},$l=(e,t)=>{let n=null;return{cancel:()=>{Zs(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Zs(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Pf=(e,t)=>{let n=null;const s=()=>{Zs(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Eb=(e,t)=>{let n=[];return T(Qt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Eb(s,t))}),n},xn=(e,t)=>LN(t,e),ca=K("mce-annotation"),lr=K("data-mce-annotation"),oi=K("data-mce-annotation-uid"),ua=K("data-mce-annotation-active"),fa=K("data-mce-annotation-classes"),da=K("data-mce-annotation-attrs"),wb=e=>t=>ot(t,e),xb=(e,t)=>{const n=e.selection.getRng(),s=S.fromDom(n.startContainer),o=S.fromDom(e.getBody()),r=t.fold(()=>"."+ca(),f=>`[${lr()}="${f}"]`),i=Cl(s,n.startOffset).getOr(s),a=or(i,r,wb(o)),c=(f,d)=>Yi(f,d)?h.some(Fn(f,d)):h.none();return a.bind(f=>c(f,`${oi()}`).bind(d=>c(f,`${lr()}`).map(p=>{const C=_b(e,d);return{uid:d,name:p,elements:C}})))},UT=e=>Qn(e)&&sf(e,ca()),Sb=(e,t)=>Yi(e,"data-mce-bogus")||eb(e,'[data-mce-bogus="all"]',wb(t)),_b=(e,t)=>{const n=S.fromDom(e.getBody()),s=xn(n,`[${oi()}="${t}"]`);return H(s,o=>!Sb(o,n))},kb=(e,t)=>{const n=S.fromDom(e.getBody()),s=xn(n,`[${lr()}="${t}"]`),o={};return T(s,r=>{if(!Sb(r,n)){const i=Fn(r,oi()),a=ft(o,i).getOr([]);o[i]=a.concat([r])}}),o},zT=(e,t)=>{const n=Ht({}),s=()=>({listeners:[],previous:To()}),o=(p,C)=>{r(p,y=>(C(y),y))},r=(p,C)=>{const y=n.get(),w=ft(y,p).getOrThunk(s),v=C(w);y[p]=v,n.set(y)},i=(p,C,y)=>{o(p,w=>{T(w.listeners,v=>v(!0,p,{uid:C,nodes:z(y,x=>x.dom)}))})},a=p=>{o(p,C=>{T(C.listeners,y=>y(!1,p))})},c=(p,C)=>{T(_b(e,p),y=>{C?Yt(y,ua(),"true"):Xt(y,ua())})},f=Pf(()=>{const p=Yn(t.getNames());T(p,C=>{r(C,y=>{const w=y.previous.get();return xb(e,h.some(C)).fold(()=>{w.each(v=>{a(C),y.previous.clear(),c(v,!1)})},({uid:v,name:x,elements:_})=>{jr(w,v)||(w.each(P=>c(P,!1)),i(x,v,_),y.previous.set(v),c(v,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,C)=>{r(p,y=>({previous:y.previous,listeners:y.listeners.concat([C])}))}}},HT=(e,t)=>{const n=lr(),s=r=>h.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(oi(),null),r.attr(lr(),null),r.attr(ua(),null);const c=h.from(r.attr(da())).map(C=>C.split(",")).getOr([]),f=h.from(r.attr(fa())).map(C=>C.split(",")).getOr([]);T(c,C=>r.attr(C,null));const d=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],p=bt(d,[ca()].concat(f));r.attr("class",p.length>0?p.join(" "):null),r.attr(fa(),null),r.attr(da(),null)};e.serializer.addTempAttr(ua()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},VT=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>ft(e,o).map(r=>r.settings),getNames:()=>Xn(e)}};let Nb=0;const Ab=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Nb++,e+"_"+s+Nb+String(n)},WT=(e,t)=>{T(t,n=>{Qi(e,n)})},jT=(e,t)=>{T(t,n=>{bl(e,n)})},Tb=(e,t)=>S.fromDom(e.dom.cloneNode(t)),ri=e=>Tb(e,!1),Rb=e=>Tb(e,!0),qT=(e,t)=>{const n=S.fromTag(t),s=Ch(e);return Ns(n,s),n},KT=(e,t)=>{const n=qT(e,t);xo(e,n);const s=Qt(e);return er(n,s),Tt(e),n},Pb=(e,t,n=ht)=>{const s=new $t(e,t),o=r=>{let i;do i=s[r]();while(i&&!te(i)&&!n(i));return h.from(i).filter(te)};return{current:()=>h.from(s.current()).filter(te),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},cr=(e,t)=>{const n=t||(i=>e.isBlock(i)||Pt(i)||wt(i)),s=(i,a,c,f)=>{if(te(i)){const d=f(i,a,i.data);if(d!==-1)return h.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,f))};return{backwards:(i,a,c,f)=>{const d=Pb(i,f,n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const d=Pb(i,f,n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},ii=Math.round,ur=e=>e?{left:ii(e.left),top:ii(e.top),bottom:ii(e.bottom),right:ii(e.right),width:ii(e.width),height:ii(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ob=(e,t)=>(e=ur(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),GT=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Db=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ma=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Db(t.top-e.bottom,e,t)},pa=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Db(t.bottom-e.top,e,t),YT=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,XT=e=>Q(e,(t,n)=>t.fold(()=>h.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return h.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),h.none()),Bb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},QT=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),ZT=(e,t,n)=>Math.min(Math.max(e,t),n),Il=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ro=(e,t)=>{if(Ee(e)&&e.hasChildNodes()){const n=e.childNodes,s=ZT(t,0,n.length-1);return n[s]}else return e},JT=(e,t)=>{if(!(t<0&&Ee(e)&&e.hasChildNodes()))return Ro(e,t)},e1=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),$b=e=>typeof e=="string"&&e.charCodeAt(0)>=768&&e1.test(e),t1=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},n1=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Ib=Ee,s1=ts,Fb=xl("display","block table"),o1=xl("float","left right"),ga=n1(Ib,s1,xs(o1)),r1=xs(xl("white-space","pre pre-line pre-wrap")),ha=te,Of=Pt,Lb=lt.nodeIndex,Fl=JT,Df=e=>"createRange"in e?e.createRange():lt.DOM.createRng(),Bf=e=>e&&/[\r\n\t ]/.test(e),Mb=e=>!!e.setStart&&!!e.setEnd,$f=e=>{const t=e.startContainer,n=e.startOffset;if(Bf(e.toString())&&r1(t.parentNode)&&te(t)){const s=t.data;if(Bf(s[n-1])||Bf(s[n+1]))return!0}return!1},i1=e=>{const t=e.ownerDocument,n=Df(t),s=t.createTextNode(Zt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=ur(n.getBoundingClientRect());return o.removeChild(s),r},a1=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&te(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Po(r)}else return null},Ub=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Po=e=>{let t;const n=e.getClientRects();return n.length>0?t=ur(n[0]):t=ur(e.getBoundingClientRect()),!Mb(e)&&Of(e)&&Ub(t)?i1(e):Ub(t)&&Mb(e)?a1(e):t},fr=(e,t)=>{const n=Ob(e,t);return n.width=1,n.right=n.left+1,n},l1=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&GT(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=Df(i.ownerDocument);if(a<i.data.length){if($b(i.data[a]))return t;if($b(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!$f(c)))return n(fr(Po(c),!1)),t}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),$f(c)||n(fr(Po(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),$f(c)||n(fr(Po(c),!0)))},o=e.container(),r=e.offset();if(ha(o))return s(o,r),t;if(Ib(o))if(e.isAtEnd()){const i=Fl(o,r);ha(i)&&s(i,i.data.length),ga(i)&&!Of(i)&&n(fr(Po(i),!1))}else{const i=Fl(o,r);if(ha(i)&&s(i,0),ga(i)&&e.isAtEnd())return n(fr(Po(i),!1)),t;const a=Fl(e.container(),e.offset()-1);ga(a)&&!Of(a)&&(Fb(a)||Fb(i)||!ga(i))&&n(fr(Po(a),!1)),ga(i)&&n(fr(Po(i),!0))}return t},F=(e,t,n)=>{const s=()=>(ha(e),t===0),o=()=>ha(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=Df(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=l1(F(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),f=d=>Fl(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};F.fromRangeStart=e=>F(e.startContainer,e.startOffset),F.fromRangeEnd=e=>F(e.endContainer,e.endOffset),F.after=e=>F(e.parentNode,Lb(e)+1),F.before=e=>F(e.parentNode,Lb(e)),F.isAbove=(e,t)=>wn(Ut(t.getClientRects()),eo(e.getClientRects()),ma).getOr(!1),F.isBelow=(e,t)=>wn(eo(t.getClientRects()),Ut(e.getClientRects()),pa).getOr(!1),F.isAtStart=e=>e?e.isAtStart():!1,F.isAtEnd=e=>e?e.isAtEnd():!1,F.isTextPosition=e=>e?te(e.container()):!1,F.isElementPosition=e=>F.isTextPosition(e)===!1;const Ll=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},c1=(e,t,n)=>{t.insertNode(n),Ll(e,n.previousSibling),Ll(e,n.nextSibling)},u1=(e,t,n)=>{const s=h.from(n.firstChild),o=h.from(n.lastChild);t.insertNode(n),s.each(r=>Ll(e,r.previousSibling)),o.each(r=>Ll(e,r.nextSibling))},If=(e,t,n)=>{mf(n)?u1(e,t,n):c1(e,t,n)},is=te,zb=sr,Hb=lt.nodeIndex,Vb=e=>{const t=e.parentNode;return zb(t)?Vb(t):t},Ff=e=>e?pl(e.childNodes,(t,n)=>(zb(n)&&n.nodeName!=="BR"?t=t.concat(Ff(n)):t.push(n),t),[]):[],f1=(e,t)=>{for(;(e=e.previousSibling)&&is(e);)t+=e.data.length;return t},Wb=e=>t=>e===t,d1=e=>{let t,n;t=Ff(Vb(e)),n=Fg(t,Wb(e),e),t=t.slice(0,n+1);const s=pl(t,(o,r,i)=>(is(r)&&is(t[i-1])&&o++,o),0);return t=Vr(t,es([e.nodeName])),n=Fg(t,Wb(e),e),n-s},jb=e=>{let t;return is(e)?t="text()":t=e.nodeName.toLowerCase(),t+"["+d1(e)+"]"},m1=(e,t,n)=>{const s=[];for(t=t.parentNode;t!==e&&!(n&&n(t));t=t.parentNode)s.push(t);return s},qb=(e,t)=>{let n,s,o=[],r,i,a;return n=t.container(),s=t.offset(),is(n)?r=f1(n,s):(i=n.childNodes,s>=i.length?(r="after",s=i.length-1):r="before",n=i[s]),o.push(jb(n)),a=m1(e,n),a=Vr(a,xs(sr)),o=o.concat(Xu(a,c=>jb(c))),o.reverse().join("/")+","+r},p1=(e,t,n)=>{let s=Ff(e);return s=Vr(s,(o,r)=>!is(o)||!is(s[r-1])),s=Vr(s,es([t])),s[n]},g1=(e,t)=>{let n=e,s=0,o;for(;is(n);){if(o=n.data.length,t>=s&&t<=s+o){e=n,t=t-s;break}if(!is(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return is(e)&&t>e.data.length&&(t=e.data.length),F(e,t)},Kb=(e,t)=>{let n;if(!t)return null;const s=t.split(","),o=s[0].split("/");n=s.length>1?s[1]:"before";const r=pl(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),p1(i,c[1],parseInt(c[2],10))):null},e);return r?is(r)?g1(r,parseInt(n,10)):(n==="after"?n=Hb(r)+1:n=Hb(r),F(r.parentNode,n)):null},Ml=wt,h1=(e,t,n)=>{let s,o;for(o=e(t.data.slice(0,n)).length,s=t.previousSibling;s&&te(s);s=s.previousSibling)o+=e(s.data).length;return o},Gb=(e,t,n,s,o)=>{let r=s[o?"startContainer":"endContainer"],i=s[o?"startOffset":"endOffset"];const a=[];let c,f=0;const d=e.getRoot();for(te(r)?a.push(n?h1(t,r,i):i):(c=r.childNodes,i>=c.length&&c.length&&(f=1,i=Math.max(0,c.length-1)),a.push(e.nodeIndex(c[i],n)+f));r&&r!==d;r=r.parentNode)a.push(e.nodeIndex(r,n));return a},b1=(e,t,n,s)=>{const o=t.dom,r=Gb(o,e,n,s,!0),i=t.isForward(),a=sb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return _e({start:r,forward:i},a);{const c=Gb(o,e,n,s,!1);return _e({start:r,end:c,forward:i},a)}},Lf=(e,t,n)=>{let s=0;return G.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++}}),s},Yb=(e,t)=>{let n,s;const o=t?"start":"end";if(n=e[o+"Container"],s=e[o+"Offset"],Ee(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?s:s-1,r.length-1)],n&&(s=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,s))}},Xb=e=>(Yb(e,!0),Yb(e,!1),e),Qb=(e,t)=>{let n;if(Ee(e)&&(e=Ro(e,t),Ml(e)))return e;if(Ln(e)&&(te(e)&&Jr(e)&&(e=e.parentNode),n=e.previousSibling,Ml(n)||(n=e.nextSibling,Ml(n))))return n},C1=e=>Qb(e.startContainer,e.startOffset)||Qb(e.endContainer,e.endOffset),Zb=(e,t,n)=>{const s=n.getNode();let o=s?s.nodeName:null;const r=n.getRng();if(Ml(s)||o==="IMG")return{name:o,index:Lf(n.dom,o,s)};const i=C1(r);return i?(o=i.tagName,{name:o,index:Lf(n.dom,o,i)}):b1(e,n,t,r)},y1=e=>{const t=e.getRng();return{start:qb(e.dom.getRoot(),F.fromRangeStart(t)),end:qb(e.dom.getRoot(),F.fromRangeEnd(t)),forward:e.isForward()}},v1=e=>({rng:e.getRng(),forward:e.isForward()}),Jb=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},eC=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:Lf(n,a,i)};const f=Xb(s.cloneRange());if(!r){f.collapse(!1);const p=Jb(n,o+"_end",t);If(n,f,p)}s=Xb(s),s.collapse(!0);const d=Jb(n,o+"_start",t);return If(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},E1=(e,t,n)=>t===2?Zb(_o,n,e):t===3?y1(e):t?v1(e):eC(e,!1),tC=re(Zb,St,!0),nC=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:ut,isError:ht,map:r=>mn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>h.some(e)};return o},sC=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:ht,isError:ut,map:t,mapError:s=>mn.error(s(e)),bind:t,exists:ht,forall:ut,getOr:St,or:St,getOrThunk:Lr,orThunk:Lr,getOrDie:Ss(String(e)),each:De,toOptional:h.none};return n},mn={value:nC,error:sC,fromOption:(e,t)=>e.fold(()=>sC(t),nC)},Os={generate:e=>{if(!At(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return T(e,(s,o)=>{const r=Xn(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!At(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const C=Xn(p);if(t.length!==C.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+C.join(","));if(!rt(t,w=>R(C,w)))throw new Error("Not all branches were specified when using match. Specified: "+C.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Os.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const w1=e=>{const t=[],n=[];return T(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},x1=e=>e.type==="inline-command"||e.type==="inline-format",S1=e=>e.type==="block-command"||e.type==="block-format",_1=e=>Yn(e,(t,n)=>t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1),k1=e=>{const t=s=>mn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(At(e.format)){if(!rt(e.format,me))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(me(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return mn.value(o(i))}else return e.cmd!==void 0?me(e.cmd)?mn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!dt(e))return t("Raw pattern is not an object");if(!me(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!me(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?me(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):mn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},N1=e=>_1(H(e,S1)),oC=e=>H(e,x1),A1=e=>({inlinePatterns:oC(e),blockPatterns:N1(e)}),T1=e=>{const t=w1(z(e,k1));return T(t.errors,n=>console.error(n.message,n.pattern)),t.values},Mf=Xo().deviceType,R1=Mf.isTouch(),P1=lt.DOM,O1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Q(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[Wr(r)]=Wr(i),n},{})},rC=e=>$n(e,RegExp),ae=e=>t=>t.options.get(e),Uf=e=>me(e)||dt(e),iC=(e,t="")=>n=>{const s=me(n);if(s)if(n.indexOf("=")!==-1){const o=O1(n);return{value:ft(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},D1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:iC(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:iC(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=me(n)&&to(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=R(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>Gn(n)?{valid:!0,value:n}:me(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||me(n)||Js(n,me);return s?me(n)?{value:z(n.split(","),Wr),valid:s}:At(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Vf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=me(n)||Js(n,me);return s?{value:At(n)?n:z(n.split(","),Wr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=Gn(n)||me(n);return s?n===!1||Mf.isiPhone()||Mf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!R1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||me(n)||Ye(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:n=>{const s=n===!1||me(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Uf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Uf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Uf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>me(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Js(n,dt)||n===!1?{value:T1(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Js(n,rC)?{value:n,valid:!0}:rC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:rs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:P1.getAttrib(e.getElement(),"placeholder")})})},B1=ae("iframe_attrs"),$1=ae("doctype"),aC=ae("document_base_url"),I1=ae("body_id"),F1=ae("body_class"),lC=ae("content_security_policy"),L1=ae("br_in_pre"),Sn=ae("forced_root_block"),dr=ae("forced_root_block_attrs"),M1=ae("newline_behavior"),U1=ae("br_newline_selector"),z1=ae("no_newline_selector"),H1=ae("keep_styles"),V1=ae("end_container_on_empty_block"),cC=ae("automatic_uploads"),uC=ae("images_reuse_filename"),W1=ae("images_replace_blob_uris"),fC=ae("icons"),j1=ae("icons_url"),q1=ae("images_upload_url"),K1=ae("images_upload_base_path"),G1=ae("images_upload_credentials"),Y1=ae("images_upload_handler"),X1=ae("content_css_cors"),zf=ae("referrer_policy"),dC=ae("language"),Q1=ae("language_url"),mC=ae("indent_use_margin"),Z1=ae("indentation"),J1=ae("content_css"),eR=ae("content_style"),pC=ae("font_css"),tR=ae("directionality"),nR=ae("inline_boundaries_selector"),gC=ae("object_resizing"),sR=ae("resize_img_proportional"),oR=ae("placeholder"),hC=ae("event_root"),rR=ae("service_message"),ai=ae("theme"),iR=ae("theme_url"),Hf=ae("model"),aR=ae("model_url"),ba=ae("inline_boundaries"),lR=ae("formats"),cR=ae("preview_styles"),uR=ae("format_empty_lines"),fR=ae("custom_ui_selector"),Vf=ae("inline"),dR=ae("hidden_input"),mR=ae("submit_patch"),pR=ae("add_form_submit_trigger"),gR=ae("add_unload_trigger"),hR=ae("custom_undo_redo_levels"),bR=ae("disable_nodechange"),bC=ae("readonly"),CR=ae("content_css_cors"),Ul=ae("plugins"),yR=ae("external_plugins"),vR=ae("block_unsupported_drop"),ER=ae("visual"),wR=ae("visual_table_class"),CC=ae("visual_anchor_class"),xR=ae("iframe_aria_text"),SR=ae("setup"),_R=ae("init_instance_callback"),kR=ae("urlconverter_callback"),NR=ae("auto_focus"),AR=ae("browser_spellcheck"),TR=ae("protect"),RR=ae("paste_block_drop"),zl=ae("paste_data_images"),PR=ae("paste_preprocess"),OR=ae("paste_postprocess"),DR=ae("paste_webkit_styles"),BR=ae("paste_remove_styles_if_webkit"),$R=ae("paste_merge_formats"),IR=ae("smart_paste"),FR=ae("paste_as_text"),LR=ae("paste_tab_spaces"),MR=ae("allow_html_data_urls"),yC=ae("text_patterns"),vC=ae("noneditable_class"),UR=ae("editable_class"),zR=ae("noneditable_regexp"),HR=e=>G.explode(e.options.get("font_size_style_values")),VR=e=>G.explode(e.options.get("font_size_classes")),WR=e=>e.options.get("encoding")==="xml",EC=e=>G.explode(e.options.get("images_file_types")),jR=ae("table_tab_navigation"),qR=Ee,wC=te,xC=e=>{const t=e.parentNode;t&&t.removeChild(e)},SC=e=>{const t=_o(e);return{count:e.length-t.length,text:t}},_C=e=>{let t;for(;(t=e.data.lastIndexOf(qt))!==-1;)e.deleteData(t,1)},kC=(e,t)=>(mr(e),t),KR=(e,t)=>{const n=SC(e.data.substr(0,t.offset())),s=SC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(_C(e),F(e,t.offset()-n.count)):t},GR=(e,t)=>{const n=t.container(),s=k(Ct(n.childNodes),e).map(o=>o<t.offset()?F(n,t.offset()-1):t).getOr(t);return mr(e),s},YR=(e,t)=>wC(e)&&t.container()===e?KR(e,t):kC(e,t),XR=(e,t)=>t.container()===e.parentNode?GR(e,t):kC(e,t),QR=(e,t)=>F.isTextPosition(t)?YR(e,t):XR(e,t),mr=e=>{qR(e)&&Ln(e)&&(nb(e)?e.removeAttribute("data-mce-caret"):xC(e)),wC(e)&&(_C(e),e.data.length===0&&xC(e))},ZR=wt,JR=Ps,eP=Sl,tP="*[contentEditable=false],video,audio,embed,object",NC=(e,t,n)=>{const s=Ob(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},nP=e=>{const t=xn(S.fromDom(e),tP);for(let n=0;n<t.length;n++){const s=t[n].dom;let o=s.previousSibling;if(Tl(o)){const r=o.data;r.length===1?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)}o=s.nextSibling,Al(o)&&(o.data.length===1?o.parentNode.removeChild(o):o.deleteData(0,1))}},sP=(e,t,n,s)=>{const o=To();let r,i;const a=Sn(e),c=e.dom,f=(v,x)=>{let _;if(d(),eP(x))return null;if(n(x)){i=MA(a,x,v);const P=NC(t,x,v);c.setStyle(i,"top",P.top);const O=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(O,_e({},P)),c.add(t,O),o.set({caret:O,element:x,before:v}),v&&c.addClass(O,"mce-visual-caret-before"),p(),_=x.ownerDocument.createRange(),_.setStart(i,0),_.setEnd(i,0)}else return i=FA(x,v),_=x.ownerDocument.createRange(),Ca(i.nextSibling)?(_.setStart(i,0),_.setEnd(i,0)):(_.setStart(i,1),_.setEnd(i,1)),_;return _},d=()=>{nP(t),i&&(mr(i),i=null),o.on(v=>{c.remove(v.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(v=>{s()?c.toggleClass(v.caret,"mce-visual-caret-hidden"):c.addClass(v.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(v=>{const x=NC(t,v.element,v.before);c.setStyles(v.caret,_e({},x))})},destroy:()=>clearInterval(r)}},AC=()=>Ze.browser.isFirefox(),Ca=e=>ZR(e)||JR(e),ya=e=>Ca(e)||na(e)&&AC(),oP=Rs,Wf=wt,rP=Ps,TC=xl("display","block table table-cell table-caption list-item"),RC=Ln,PC=Jr,OC=Ee,iP=ts,li=e=>e>0,pr=e=>e<0,Hl=(e,t)=>{let n;for(;n=e(t);)if(!PC(n))return n;return null},va=(e,t,n,s,o)=>{const r=new $t(e,s),i=Wf(e)||PC(e);if(pr(t)){if(i&&(e=Hl(r.prev.bind(r),!0),n(e)))return e;for(;e=Hl(r.prev.bind(r),o);)if(n(e))return e}if(li(t)){if(i&&(e=Hl(r.next.bind(r),!0),n(e)))return e;for(;e=Hl(r.next.bind(r),o);)if(n(e))return e}return null},aP=(e,t)=>{const n=o=>oP(o.dom),s=o=>o.dom===t;return Yr(S.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Oo=(e,t)=>{for(;e&&e!==t;){if(TC(e))return e;e=e.parentNode}return null},Ds=(e,t,n)=>Oo(e.container(),n)===Oo(t.container(),n),jf=(e,t)=>{if(!t)return null;const n=t.container(),s=t.offset();return OC(n)?n.childNodes[s+e]:null},DC=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},lP=(e,t,n)=>Oo(t,e)===Oo(n,e),BC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let o=n[s];if(RC(o)&&(o=o[s]),Wf(o)||rP(o)){if(lP(t,o,n))return o;break}if(iP(o))break;n=n.parentNode}return null},Ea=re(DC,!0),wa=re(DC,!1),qf=(e,t,n)=>{let s;const o=re(BC,!0,t),r=re(BC,!1,t);let i=n.startContainer;const a=n.startOffset;if(Jr(i)){OC(i)||(i=i.parentNode);const c=i.getAttribute("data-mce-caret");if(c==="before"&&(s=i.nextSibling,ya(s)))return Ea(s);if(c==="after"&&(s=i.previousSibling,ya(s)))return wa(s)}if(!n.collapsed)return n;if(te(i)){if(RC(i)){if(e===1){if(s=r(i),s)return Ea(s);if(s=o(i),s)return wa(s)}if(e===-1){if(s=o(i),s)return wa(s);if(s=r(i),s)return Ea(s)}return n}if(Tl(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?Ea(s):n;if(Al(i)&&a<=1)return e===-1&&(s=o(i),s)?wa(s):n;if(a===i.data.length)return s=r(i),s?Ea(s):n;if(a===0)return s=o(i),s?wa(s):n}return n},$C=(e,t)=>h.from(jf(e?0:-1,t)).filter(Wf),xa=(e,t,n)=>{const s=qf(e,t,n);return e===-1?F.fromRangeStart(s):F.fromRangeEnd(s)},Vl=e=>h.from(e.getNode()).map(S.fromDom),cP=e=>h.from(e.getNode(!0)).map(S.fromDom),Kf=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Wl=(e,t)=>{const n=Ds(e,t);return!n&&Pt(e.getNode())?!0:n};var Mt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Mt||(Mt={}));const uP=wt,Bs=te,IC=Ee,Gf=Pt,ci=ts,FC=XA,jl=ib,fP=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},LC=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,MC=(e,t)=>{if(li(e)){if(ci(t.previousSibling)&&!Bs(t.previousSibling))return F.before(t);if(Bs(t))return F(t,0)}if(pr(e)){if(ci(t.nextSibling)&&!Bs(t.nextSibling))return F.after(t);if(Bs(t))return F(t,t.data.length)}return pr(e)?Gf(t)?F.before(t):F.after(t):F.before(t)},dP=(e,t)=>{const n=t.nextSibling;return n&&ci(n)?Bs(n)?F(n,0):F.before(n):Yf(Mt.Forwards,F.after(t),e)},Yf=(e,t,n)=>{let s,o,r,i;if(!IC(n)||!t)return null;if(t.isEqual(F.after(n))&&n.lastChild){if(i=F.after(n.lastChild),pr(e)&&ci(n.lastChild)&&IC(n.lastChild))return Gf(n.lastChild)?F.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Bs(a)){if(pr(e)&&c>0)return F(a,--c);if(li(e)&&c<a.length)return F(a,++c);s=a}else{if(pr(e)&&c>0&&(o=LC(a,c-1),ci(o)))return!FC(o)&&(r=va(o,e,jl,o),r)?Bs(r)?F(r,r.data.length):F.after(r):Bs(o)?F(o,o.data.length):F.before(o);if(li(e)&&c<a.childNodes.length&&(o=LC(a,c),ci(o)))return Gf(o)?dP(n,o):!FC(o)&&(r=va(o,e,jl,o),r)?Bs(r)?F(r,0):F.before(r):Bs(o)?F(o,0):F.after(o);s=o||i.getNode()}if((li(e)&&i.isAtEnd()||pr(e)&&i.isAtStart())&&(s=va(s,e,ut,n,!0),jl(s,n)))return MC(e,s);o=va(s,e,jl,n);const f=Eo(H(fP(a,n),uP));return f&&(!o||!f.contains(o))?(li(e)?i=F.after(f):i=F.before(f),i):o?MC(e,o):null},$s=e=>({next:t=>Yf(Mt.Forwards,t,e),prev:t=>Yf(Mt.Backwards,t,e)}),mP=(e,t,n)=>{const s=e?F.before(n):F.after(n);return Mn(e,t,s)},pP=e=>Pt(e)?F.before(e):F.after(e),UC=e=>F.isTextPosition(e)?e.offset()===0:ts(e.getNode()),zC=e=>{if(F.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ts(e.getNode(!0))},HC=(e,t)=>!F.isTextPosition(e)&&!F.isTextPosition(t)&&e.getNode()===t.getNode(!0),gP=e=>!F.isTextPosition(e)&&Pt(e.getNode()),hP=(e,t,n)=>e?!HC(t,n)&&!gP(t)&&zC(t)&&UC(n):!HC(n,t)&&UC(t)&&zC(n),Mn=(e,t,n)=>{const s=$s(t);return h.from(e?s.next(n):s.prev(n))},ql=(e,t,n)=>Mn(e,t,n).bind(s=>Ds(n,s,t)&&hP(e,n,s)?Mn(e,t,s):h.some(s)),VC=(e,t,n,s)=>ql(e,t,n).bind(o=>s(o)?VC(e,t,o,s):h.some(o)),ui=(e,t)=>{const n=e?t.firstChild:t.lastChild;return te(n)?h.some(F(n,e?0:n.data.length)):n?ts(n)?h.some(e?F.before(n):pP(n)):mP(e,t,n):h.none()},Un=re(Mn,!0),as=re(Mn,!1),pn=re(ui,!0),Is=re(ui,!1),WC="_mce_caret",Fs=e=>Ee(e)&&e.id===WC,gr=(e,t)=>{for(;t&&t!==e;){if(t.id===WC)return t;t=t.parentNode}return null},bP=e=>me(e.start),CP=e=>Fe(e,"rng"),yP=e=>Fe(e,"id"),jC=e=>Fe(e,"name"),qC=e=>G.isArray(e.start),Kl=e=>!jC(e)&&Gn(e.forward)?e.forward:!0,KC=(e,t)=>(Ee(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),vP=(e,t)=>{const n=e.createRng(),s=Kb(e.getRoot(),t.start);n.setStart(s.container(),s.offset());const o=Kb(e.getRoot(),t.end);return n.setEnd(o.container(),o.offset()),{range:n,forward:Kl(t)}},EP=(e,t)=>{const n=e.ownerDocument.createTextNode(qt);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},wP=e=>e.hasChildNodes()===!1,xP=(e,t)=>Is(e).fold(ht,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),GC=(e,t,n)=>wP(t)&&gr(e,t)?(EP(t,n),!0):!1,YC=(e,t,n,s)=>{const o=n[t?"start":"end"];let r,i,a,c;const f=e.getRoot();if(o){for(a=o[0],i=f,r=o.length-1;r>=1;r--){if(c=i.childNodes,GC(f,i,s))return!0;if(o[r]>c.length-1)return GC(f,i,s)?!0:xP(i,s);i=c[o[r]]}i.nodeType===3&&(a=Math.min(o[0],i.nodeValue.length)),i.nodeType===1&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},Xf=e=>te(e)&&e.data.length>0,XC=(e,t,n)=>{let s=e.get(n.id+"_"+t),o,r,i,a;const c=n.keep;let f,d;if(s){if(o=s.parentNode,t==="start"?(c?s.hasChildNodes()?(o=s.firstChild,r=1):Xf(s.nextSibling)?(o=s.nextSibling,r=0):Xf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)+1):r=e.nodeIndex(s),f=o,d=r):(c?s.hasChildNodes()?(o=s.firstChild,r=1):Xf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)):r=e.nodeIndex(s),f=o,d=r),!c){for(a=s.previousSibling,i=s.nextSibling,G.each(G.grep(s.childNodes),p=>{te(p)&&(p.nodeValue=p.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&te(a)&&!Ze.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),f=a,d=r)}return h.some(F(f,d))}else return h.none()},SP=(e,t)=>{const n=e.createRng();return YC(e,!0,t,n)&&YC(e,!1,t,n)?h.some({range:n,forward:Kl(t)}):h.none()},_P=(e,t)=>{const n=XC(e,"start",t),s=XC(e,"end",t);return wn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(KC(e,o.container()),o.offset()),i.setEnd(KC(e,r.container()),r.offset()),{range:i,forward:Kl(t)}})},kP=(e,t)=>h.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),NP=(e,t)=>{const n=e.dom;if(t){if(qC(t))return SP(n,t);if(bP(t))return h.some(vP(n,t));if(yP(t))return _P(n,t);if(jC(t))return kP(n,t);if(CP(t))return h.some({range:t.rng,forward:Kl(t)})}return h.none()},AP=(e,t,n)=>E1(e,t,n),TP=(e,t)=>{NP(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},zn=e=>Ee(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Gl=(e=>t=>e===t)(Zt),Sa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Qf=e=>!Sa(e)&&!Gl(e)&&!tb(e),RP=e=>({value:e}),Zf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},PP=e=>{const t=Zf(e.red)+Zf(e.green)+Zf(e.blue);return RP(t)},OP=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,DP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,QC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),ZC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return QC(o,r,i,a)},BP=e=>{if(e==="transparent")return h.some(QC(0,0,0,0));const t=OP.exec(e);if(t!==null)return h.some(ZC(t[1],t[2],t[3],"1"));const n=DP.exec(e);return n!==null?h.some(ZC(n[1],n[2],n[3],n[4])):h.none()},Yl=e=>BP(e).map(PP).map(t=>"#"+t.value).getOr(e),Xl=e=>!!e.nodeType,$P=e=>e&&/^(IMG)$/.test(e.nodeName),JC=(e,t,n)=>{const s=n.startOffset;let o=n.startContainer;if(!(o===n.endContainer&&$P(o.childNodes[s]))&&Ee(o)){const r=o.childNodes;let i;s<r.length?(o=r[s],i=new $t(o,e.getParent(o,e.isBlock))):(o=r[r.length-1],i=new $t(o,e.getParent(o,e.isBlock)),i.next(!0));for(let a=i.current();a;a=i.next())if(te(a)&&!ed(a)){n.setStart(a,0),t.setRng(n);return}}},ey=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(Ee(e)||!ed(e))return e}},Jf=(e,t)=>(Xl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),fi=(e,t,n)=>e.schema.isValidChild(t,n),ed=(e,t=!1)=>{if(Ne(e)&&te(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return rr(n)}else return!1},IP=e=>Ne(e)&&te(e)&&e.length===0,ro=(e,t)=>(Ye(e)?e=e(t):Ne(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),td=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),nd=(e,t)=>((t==="color"||t==="backgroundColor")&&(e=Yl(e)),t==="fontWeight"&&e===700&&(e="bold"),t==="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),Ql=(e,t,n)=>nd(e.getStyle(t,n),n),ty=(e,t)=>{let n;return e.getParent(t,s=>(n=e.getStyle(s,"text-decoration"),n&&n!=="none")),n},Zl=(e,t,n)=>e.getParents(t,n,e.getRoot()),FP=(e,t)=>{const n=s=>{const o=r=>r.length>1&&r.charAt(0)==="%";return U(["styles","attributes"],r=>ft(s,r).exists(i=>{const a=At(i)?i:Gu(i);return U(a,o)}))};return U(e.formatter.get(t),n)},LP=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>ji(r,(i,a)=>U(s,c=>c===a));return U(e.formatter.get(t),r=>{const i=o(r);return U(e.formatter.get(n),a=>{const c=o(a);return Zk(i,c)})})},Ls=e=>Hr(e,"block"),Pn=e=>Hr(e,"selector"),Vt=e=>Hr(e,"inline"),MP=e=>Pn(e)&&Vt(e)&&jr(ft(e,"mixed"),!0),sd=e=>Pn(e)&&e.expand!==!1&&!Vt(e),di=zn,ny=Zl,sy=ed,UP=Jf,zP=e=>Pt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,oy=(e,t)=>{let n=t;for(;n;){if(Ee(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},ry=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},HP=(e,t,n)=>ry(e,t,n,s=>Gl(s)||Sa(s)),VP=(e,t,n)=>ry(e,t,n,Qf),iy=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,C)=>{const y=cr(e),w=o?y.backwards:y.forwards;return h.from(w(d,p,(v,x)=>di(v.parentNode)?-1:(i=v,C(o,v,x)),a))};return c(n,s,HP).bind(d=>r?c(d.container,d.offset+(o?-1:0),VP):h.some(d)).orThunk(()=>i?h.some({container:i,offset:o?0:i.length}):h.none())},ay=(e,t,n,s,o)=>{te(s)&&gl(s.data)&&s[o]&&(s=s[o]);const r=ny(e,s);for(let i=0;i<r.length;i++)for(let a=0;a<t.length;a++){const c=t[a];if(!(Ne(c.collapsed)&&c.collapsed!==n.collapsed)&&Pn(c)&&e.is(r[i],c.selector))return r[i]}return s},ly=(e,t,n,s)=>{let o=n;const r=e.dom,i=r.getRoot(),a=t[0];if(Ls(a)&&(o=a.wrapper?null:r.getParent(n,a.block,i)),!o){const c=r.getParent(n,"LI,TD,TH");o=r.getParent(te(n)?n.parentNode:n,f=>f!==i&&UP(e,f),c)}if(o&&Ls(a)&&a.wrapper&&(o=ny(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[s]&&!r.isBlock(o[s])&&(o=o[s],!td(o,"br")););return o||n},cy=(e,t,n,s)=>{const o=n.parentNode;return Ne(n[s])?!1:o===t||Ft(o)||e.isBlock(o)?!0:cy(e,t,o,s)},Jl=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(te(n)&&!sy(n)&&(o?s>0:s<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=te(c)&&!cy(e,a,c,i);if(!di(c)&&!zP(c)&&!sy(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},uy=e=>di(e.parentNode)||di(e),mi=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,f=n[0];return Ee(o)&&o.hasChildNodes()&&(o=Ro(o,r),te(o)&&(r=0)),Ee(i)&&i.hasChildNodes()&&(i=Ro(i,t.collapsed?a:a-1),te(i)&&(a=i.nodeValue.length)),o=oy(c,o),i=oy(c,i),uy(o)&&(o=di(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,te(o)&&(r=t.collapsed?o.length:0)),uy(i)&&(i=di(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,te(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(iy(c,e.getBody(),o,r,!0,s).each(({container:C,offset:y})=>{o=C,r=y}),iy(c,e.getBody(),i,a,!1,s).each(({container:C,offset:y})=>{i=C,a=y})),(Vt(f)||f.block_expand)&&((!Vt(f)||!te(o)||r===0)&&(o=Jl(c,n,o,r,!0)),(!Vt(f)||!te(i)||a===i.nodeValue.length)&&(i=Jl(c,n,i,a,!1))),sd(f)&&(o=ay(c,n,t,o,"previousSibling"),i=ay(c,n,t,i,"nextSibling")),(Ls(f)||Pn(f))&&(o=ly(e,n,o,"previousSibling"),i=ly(e,n,i,"nextSibling"),Ls(f)&&(c.isBlock(o)||(o=Jl(c,n,o,r,!0)),c.isBlock(i)||(i=Jl(c,n,i,a,!1)))),Ee(o)&&(r=c.nodeIndex(o),o=o.parentNode),Ee(i)&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},_a=(e,t,n)=>{const s=t.startOffset,o=Ro(t.startContainer,s),r=t.endOffset,i=Ro(t.endContainer,r-1),a=v=>{const x=v[0];te(x)&&x===o&&s>=x.data.length&&v.splice(0,1);const _=v[v.length-1];return r===0&&v.length>0&&_===i&&te(_)&&v.splice(v.length-1,1),v},c=(v,x,_)=>{const P=[];for(;v&&v!==_;v=v[x])P.push(v);return P},f=(v,x)=>e.getParent(v,_=>_.parentNode===x,x),d=(v,x,_)=>{const P=_?"nextSibling":"previousSibling";for(let O=v,I=O.parentNode;O&&O!==x;O=I){I=O.parentNode;const M=c(O===v?O:O[P],P);M.length&&(_||M.reverse(),n(a(M)))}};if(o===i)return n(a([o]));const p=e.findCommonAncestor(o,i);if(e.isChildOf(o,i))return d(o,p,!0);if(e.isChildOf(i,o))return d(i,p);const C=f(o,p)||o,y=f(i,p)||i;d(o,C,!0);const w=c(C===o?C:C.nextSibling,"nextSibling",y===i?y.nextSibling:y);w.length&&n(a(w)),d(i,y)},od=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},WP=e=>je(e,t=>{const n=Il(t);return n?[S.fromDom(n)]:[]}),jP=e=>od(e).length>1,qP=e=>H(WP(e),_l),KP=e=>xn(e,"td[data-mce-selected],th[data-mce-selected]"),fy=(e,t)=>{const n=KP(t);return n.length>0?n:qP(e)},pi=e=>fy(od(e.selection.getSel()),S.fromDom(e.getBody())),ka=(e,t)=>sa(e,"table",t),GP=e=>{const t=e.startContainer,n=e.startOffset;return te(t)?n===0?h.some(S.fromDom(t)):h.none():h.from(t.childNodes[n]).map(S.fromDom)},YP=e=>{const t=e.endContainer,n=e.endOffset;return te(t)?n===t.data.length?h.some(S.fromDom(t)):h.none():h.from(t.childNodes[n-1]).map(S.fromDom)},dy=e=>Th(e).fold(K([e]),t=>[e].concat(dy(t))),rd=e=>of(e).fold(K([e]),t=>Et(t)==="br"?Zo(t).map(n=>[e].concat(rd(n))).getOr([]):[e].concat(rd(t))),id=(e,t)=>wn(GP(t),YP(t),(n,s)=>{const o=ge(dy(e),re(ot,n)),r=ge(rd(e),re(ot,s));return o.isSome()&&r.isSome()}).getOr(!1),ad=(e,t,n,s)=>{const o=n,r=new $t(n,o),i=ji(e.schema.getMoveCaretBeforeOnEnterElements(),(a,c)=>!R(["td","th","table"],c.toLowerCase()));do{if(te(n)&&G.trim(n.nodeValue).length!==0){s?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(i[n.nodeName]){s?t.setStartBefore(n):n.nodeName==="BR"?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},ec=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},ld=(e,t)=>{const n=pi(e);n.length>0?T(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},cd=(e,t,n)=>{const s=eC(e,t);n(s),e.moveToBookmark(s)},my=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?h.from(r.dom.nodeValue):h.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(In,"text"),ud=e=>my.get(e),py=e=>my.getOption(e),XP=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],QP=e=>In(e)&&ud(e)===qt,ZP=(e,t,n,s)=>Zn(t).fold(()=>"skipping",o=>s==="br"||QP(t)?"valid":UT(t)?"existing":Fs(t.dom)?"caret":U(XP,r=>As(t,r))?"valid-block":!fi(e,n,s)||!fi(e,Et(o),n)?"invalid-child":"valid"),JP=(e,t)=>{const n=mi(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},gy=(e,t,n,s,o,r)=>{const d=n,{uid:i=t}=d,a=b_(d,["uid"]);Qi(e,ca()),Yt(e,`${oi()}`,i),Yt(e,`${lr()}`,s);const{attributes:c={},classes:f=[]}=o(i,a);if(Ns(e,c),WT(e,f),r){f.length>0&&Yt(e,`${fa()}`,f.join(","));const p=Xn(c);p.length>0&&Yt(e,`${da()}`,p.join(","))}},eO=e=>{bl(e,ca()),Xt(e,`${oi()}`),Xt(e,`${lr()}`),Xt(e,`${ua()}`);const t=qr(e,`${da()}`).map(s=>s.split(",")).getOr([]),n=qr(e,`${fa()}`).map(s=>s.split(",")).getOr([]);T(t,s=>Xt(e,s)),jT(e,n),Xt(e,`${fa()}`),Xt(e,`${da()}`)},hy=(e,t,n,s,o)=>{const r=S.fromTag("span",e);return gy(r,t,n,s,o,!1),r},tO=(e,t,n,s,o,r)=>{const i=[],a=hy(e.getDoc(),n,r,s,o),c=To(),f=()=>{c.clear()},d=()=>c.get().getOrThunk(()=>{const w=ri(a);return i.push(w),c.set(w),w}),p=w=>{T(w,C)},C=w=>{switch(ZP(e,w,"span",Et(w))){case"invalid-child":{f();const x=Qt(w);p(x),f();break}case"valid-block":{f(),gy(w,n,r,s,o,!0);break}case"valid":{const x=d();QN(w,x);break}}},y=w=>{const v=z(w,S.fromDom);p(v)};return _a(e.dom,t,w=>{f(),y(w)}),i},nO=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=pi(e).length>0,a=Ab("mce-annotation");if(r.collapsed&&!i&&JP(e,r),o.getRng().collapsed&&!i){const c=hy(e.getDoc(),a,s,t,n.decorate);af(c,Zt),o.getRng().insertNode(c.dom),o.select(c.dom)}else cd(o,!1,()=>{ld(e,c=>{tO(e,c,a,t,n.decorate,s)})})})},by=e=>{const t=VT();HT(e,t);const n=zT(e,t),s=hh("span"),o=r=>{T(r,i=>{s(i)?tr(i):eO(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{nO(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{const i=e.selection.getBookmark();xb(e,h.some(r)).each(({elements:a})=>{o(a)}),e.selection.moveToBookmark(i)},removeAll:r=>{const i=e.selection.getBookmark();yt(kb(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=kb(e,r);return Wi(i,a=>z(a,c=>c.dom))}}},Na=e=>({getBookmark:re(AP,e),moveToBookmark:re(TP,e)});Na.isBookmarkNode=zn;const Cy=(e,t,n)=>n.collapsed?!1:U(n.getClientRects(),s=>YT(s,e,t)),sO=(e,t)=>e.dispatch("PreProcess",t),oO=(e,t)=>e.dispatch("PostProcess",t),rO=e=>e.dispatch("remove"),iO=e=>e.dispatch("detach"),aO=(e,t)=>e.dispatch("SwitchMode",{mode:t}),lO=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},cO=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},uO=e=>e.dispatch("PreInit"),fO=e=>e.dispatch("PostRender"),dO=e=>e.dispatch("Init"),mO=(e,t)=>e.dispatch("PlaceholderToggle",{state:t}),yy=(e,t,n)=>e.dispatch(t,n),vy=(e,t,n,s)=>e.dispatch("FormatApply",{format:t,node:n,vars:s}),fd=(e,t,n,s)=>e.dispatch("FormatRemove",{format:t,node:n,vars:s}),pO=(e,t)=>e.dispatch("BeforeSetContent",t),Ey=(e,t)=>e.dispatch("SetContent",t),gO=(e,t)=>e.dispatch("BeforeGetContent",t),wy=(e,t)=>e.dispatch("GetContent",t),hO=(e,t)=>e.dispatch("AutocompleterStart",t),bO=(e,t)=>e.dispatch("AutocompleterUpdate",t),CO=e=>e.dispatch("AutocompleterEnd"),yO=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),vO=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),xy=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),pe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||pe.metaKeyPressed(e),metaKeyPressed:e=>Ze.os.isMacOS()||Ze.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},hr="data-mce-selected",EO="table,img,figure.image,hr,video,span.mce-preview-object",Sy=Math.abs,tc=Math.round,dd={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},wO=e=>e.type==="longpress"||e.type.indexOf("touch")===0,_y=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,f,d,p,C,y,w,v,x,_,P,O,I,M,ce;const V=ee=>Ne(ee)&&(Gh(ee)||n.is(ee,"figure.image")),j=ee=>Ps(ee)||n.hasClass(ee,"mce-preview-object"),X=(ee,$e)=>{if(wO(ee)){const Me=ee.touches[0];return V(ee.target)&&!Cy(Me.clientX,Me.clientY,$e)}else return V(ee.target)&&!Cy(ee.clientX,ee.clientY,$e)},J=ee=>{const $e=ee.target;X(ee,t.selection.getRng())&&!ee.isDefaultPrevented()&&t.selection.select($e)},ve=ee=>n.is(ee,"figure.image")?[ee.querySelector("img")]:n.hasClass(ee,"mce-preview-object")&&Ne(ee.firstElementChild)?[ee,ee.firstElementChild]:[ee],ue=ee=>{const $e=gC(t);return!$e||ee.getAttribute("data-mce-resize")==="false"||ee===t.getBody()?!1:n.hasClass(ee,"mce-preview-object")?As(S.fromDom(ee.firstElementChild),$e):As(S.fromDom(ee),$e)},oe=ee=>j(ee)?n.create("img",{src:Ze.transparentSrc}):ee.cloneNode(!0),He=(ee,$e,Me)=>{if(Ne(Me)){const Se=ve(ee);T(Se,xe=>{xe.style[$e]||!t.schema.isValid(xe.nodeName.toLowerCase(),$e)?n.setStyle(xe,$e,Me):n.setAttrib(xe,$e,""+Me)})}},qe=(ee,$e,Me)=>{He(ee,"width",$e),He(ee,"height",Me)},et=ee=>{let $e,Me,Se,xe,Ke;$e=ee.screenX-p,Me=ee.screenY-C,O=$e*f[2]+v,I=Me*f[3]+x,O=O<5?5:O,I=I<5?5:I,(V(i)||j(i))&&sR(t)!==!1?Se=!pe.modifierPressed(ee):Se=pe.modifierPressed(ee),Se&&(Sy($e)>Sy(Me)?(I=tc(O*_),O=tc(I/_)):(O=tc(I/_),I=tc(O*_))),qe(a,O,I),xe=f.startPos.x+$e,Ke=f.startPos.y+Me,xe=xe>0?xe:0,Ke=Ke>0?Ke:0,n.setStyles(c,{left:xe,top:Ke,display:"block"}),c.innerHTML=O+" &times; "+I,f[2]<0&&a.clientWidth<=O&&n.setStyle(a,"left",y+(v-O)),f[3]<0&&a.clientHeight<=I&&n.setStyle(a,"top",w+(x-I)),$e=r.scrollWidth-M,Me=r.scrollHeight-ce,$e+Me!==0&&n.setStyles(c,{left:xe-$e,top:Ke-Me}),P||(lO(t,i,v,x,"corner-"+f.name),P=!0)},Ot=()=>{const ee=P;P=!1,ee&&(He(i,"width",O),He(i,"height",I)),n.unbind(s,"mousemove",et),n.unbind(s,"mouseup",Ot),o!==s&&(n.unbind(o,"mousemove",et),n.unbind(o,"mouseup",Ot)),n.remove(a),n.remove(c),n.remove(d),Y(i),ee&&(cO(t,i,O,I,"corner-"+f.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Y=ee=>{ne();const $e=n.getPos(ee,r),Me=$e.x,Se=$e.y,xe=ee.getBoundingClientRect(),Ke=xe.width||xe.right-xe.left,Ge=xe.height||xe.bottom-xe.top;i!==ee&&(Ie(),i=ee,O=I=0);const Dt=t.dispatch("ObjectSelected",{target:ee});ue(ee)&&!Dt.isDefaultPrevented()?yt(dd,(nt,Le)=>{let st;const en=tn=>{const jt=ve(i)[0];p=tn.screenX,C=tn.screenY,v=jt.clientWidth,x=jt.clientHeight,_=x/v,f=nt,f.name=Le,f.startPos={x:Ke*nt[0]+Me,y:Ge*nt[1]+Se},M=r.scrollWidth,ce=r.scrollHeight,d=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=oe(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Me,top:Se,margin:0}),qe(a,Ke,Ge),a.removeAttribute(hr),r.appendChild(a),n.bind(s,"mousemove",et),n.bind(s,"mouseup",Ot),o!==s&&(n.bind(o,"mousemove",et),n.bind(o,"mouseup",Ot)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+x)};st=n.get("mceResizeHandle"+Le),st&&n.remove(st),st=n.add(r,"div",{id:"mceResizeHandle"+Le,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Le+"-resize; margin:0; padding:0"}),n.bind(st,"mousedown",tn=>{tn.stopImmediatePropagation(),tn.preventDefault(),en(tn)}),nt.elm=st,n.setStyles(st,{left:Ke*nt[0]+Me-st.offsetWidth/2,top:Ge*nt[1]+Se-st.offsetHeight/2})}):Ie(!1)},he=$l(Y,0),Ie=(ee=!0)=>{he.cancel(),ne(),i&&ee&&i.removeAttribute(hr),yt(dd,($e,Me)=>{const Se=n.get("mceResizeHandle"+Me);Se&&(n.unbind(Se),n.remove(Se))})},Be=(ee,$e)=>Ne(ee)&&n.isChildOf(ee,$e),It=ee=>{if(P||t.removed||t.composing)return;const $e=ee.type==="mousedown"?ee.target:e.getNode(),Me=or(S.fromDom($e),EO).map(xe=>xe.dom).getOrUndefined(),Se=Ne(Me)?n.getAttrib(Me,hr,"1"):"1";if(T(n.select(`img[${hr}],hr[${hr}]`),xe=>{xe.removeAttribute(hr)}),Be(Me,r)){we();const xe=e.getStart(!0);if(Be(xe,Me)&&Be(e.getEnd(!0),Me)){n.setAttrib(Me,hr,Se),he.throttle(Me);return}}Ie()},ne=()=>{yt(dd,ee=>{ee.elm&&(n.unbind(ee.elm),delete ee.elm)})},we=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{we(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",It),t.on("keyup compositionend",ee=>{i&&i.nodeName==="TABLE"&&It(ee)}),t.on("hide blur",Ie),t.on("contextmenu longpress",J,!0)}),t.on("remove",ne),{isResizable:ue,showResizeRect:Y,hideResizeRect:Ie,updateResizeRect:It,destroy:()=>{he.cancel(),i=a=d=null}}},xO=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},SO=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},ky=(e,t,n)=>{const s=e.document.createRange();return xO(s,t),SO(s,n),s},md=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Aa=Os.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ny=(e,t,n)=>t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset),_O=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:h.none}),relative:(n,s)=>({ltr:Yo(()=>ky(e,n,s)),rtl:Yo(()=>h.some(ky(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Yo(()=>md(e,n,s,o,r)),rtl:Yo(()=>h.some(md(e,o,r,n,s)))})}),kO=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Aa.rtl(S.fromDom(o.endContainer),o.endOffset,S.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>Ny(e,Aa.ltr,n)):Ny(e,Aa.ltr,n)},NO=(e,t)=>{const n=_O(e,t);return kO(e,n)};Aa.ltr,Aa.rtl;const Ay={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},AO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return h.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),h.some(i)})},TO=(e,t,n)=>{var s,o;return h.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},RO=(()=>document.caretPositionFromPoint?AO:document.caretRangeFromPoint?TO:h.none)(),PO=(e,t,n)=>{const s=S.fromDom(e.document);return RO(s,t,n).map(o=>Ay.create(S.fromDom(o.startContainer),o.startOffset,S.fromDom(o.endContainer),o.endOffset))},pd=Os.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),OO=(e,t,n,s)=>e.fold(t,n,s),DO=e=>e.fold(St,St,St),BO=pd.before,$O=pd.on,IO=pd.after,io={before:BO,on:$O,after:IO,cata:OO,getStart:DO},nc=Os.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),FO=e=>nc.exact(e.start,e.soffset,e.finish,e.foffset),LO=e=>e.match({domRange:t=>S.fromDom(t.startContainer),relative:(t,n)=>io.getStart(t),exact:(t,n,s,o)=>t}),MO=nc.domRange,UO=nc.relative,zO=nc.exact,HO=e=>{const t=LO(e);return kh(t)},VO=Ay.create,gi={domRange:MO,relative:UO,exact:zO,exactFromRange:FO,getWin:HO,range:VO},sc=(e,t)=>{const n=Et(e);return n==="input"?io.after(e):R(["br","img"],n)?t===0?io.before(e):io.after(e):io.on(e,t)},WO=(e,t)=>{const n=e.fold(io.before,sc,io.after),s=t.fold(io.before,sc,io.after);return gi.relative(n,s)},Ty=(e,t,n,s)=>{const o=sc(e,t),r=sc(n,s);return gi.relative(o,r)},jO=e=>e.match({domRange:t=>{const n=S.fromDom(t.startContainer),s=S.fromDom(t.endContainer);return Ty(n,t.startOffset,s,t.endOffset)},relative:WO,exact:Ty}),gd=(e,t)=>{const s=(t||document).createDocumentFragment();return T(e,o=>{s.appendChild(o.dom)}),S.fromDom(s)},qO=e=>{const t=gi.getWin(e).dom,n=(o,r,i,a)=>md(t,o,r,i,a),s=jO(e);return NO(t,s).match({ltr:n,rtl:n})},KO=(e,t,n)=>PO(e,t,n),Ry=(e,t,n)=>KO(n.defaultView,e,t).map(s=>{const o=n.createRange();return o.setStart(s.start.dom,s.soffset),o.setEnd(s.finish.dom,s.foffset),o}).getOrUndefined(),hd=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,GO=(e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Py=(e,t,n)=>GO(e,t,n)!==null,YO=(e,t,n)=>Py(e,t,s=>s.nodeName===n),bd=e=>e&&e.nodeName==="TABLE",XO=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),QO=(e,t)=>Ln(e)&&Py(e,t,Fs)===!1,Oy=(e,t,n)=>{const s=new $t(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=s[n?"prev":"next"]();)if(Pt(t))return!0},ZO=(e,t)=>e.previousSibling&&e.previousSibling.nodeName===t,JO=(e,t)=>{for(;t&&t!==e;){if(wt(t))return!0;t=t.parentNode}return!1},Cd=(e,t,n,s,o)=>{let r;const i=e.getRoot();let a;const c=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||i;if(s&&Pt(o)&&t&&e.isEmpty(f))return h.some(F(o.parentNode,e.nodeIndex(o)));const d=new $t(o,f);for(;a=d[s?"prev":"next"]();){if(e.getContentEditableParent(a)==="false"||QO(a,i))return h.none();if(te(a)&&a.nodeValue.length>0)return YO(a,i,"A")===!1?h.some(F(a,s?a.nodeValue.length:0)):h.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return h.none();r=a}return ff(r)?h.none():n&&r?h.some(F(r,0)):h.none()},Dy=(e,t,n,s)=>{let o,r;const i=e.getRoot();let a,c,f=!1;o=s[(n?"start":"end")+"Container"],r=s[(n?"start":"end")+"Offset"];const d=Ee(o)&&r===o.childNodes.length,p=e.schema.getNonEmptyElements();if(c=n,Ln(o))return h.none();if(Ee(o)&&r>o.childNodes.length-1&&(c=!1),df(o)&&(o=i,r=0),o===i){if(c&&(a=o.childNodes[r>0?r-1:0],a&&(Ln(a)||p[a.nodeName]||bd(a))))return h.none();if(o.hasChildNodes()){if(r=Math.min(!c&&r>0?r-1:r,o.childNodes.length-1),o=o.childNodes[r],r=te(o)&&d?o.data.length:0,!t&&o===i.lastChild&&bd(o)||JO(i,o)||Ln(o))return h.none();if(o.hasChildNodes()&&bd(o)===!1){a=o;const C=new $t(o,i);do{if(wt(a)||Ln(a)){f=!1;break}if(te(a)&&a.nodeValue.length>0){r=c?0:a.nodeValue.length,o=a,f=!0;break}if(p[a.nodeName.toLowerCase()]&&!XO(a)){r=e.nodeIndex(a),o=a.parentNode,c||r++,f=!0;break}}while(a=c?C.next():C.prev())}}}return t&&(te(o)&&r===0&&Cd(e,d,t,!0,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),Ee(o)&&(a=o.childNodes[r],a||(a=o.childNodes[r-1]),a&&Pt(a)&&!ZO(a,"A")&&!Oy(e,a,!1)&&!Oy(e,a,!0)&&Cd(e,d,t,!0,a).each(C=>{o=C.container(),r=C.offset(),f=!0}))),c&&!t&&te(o)&&r===o.nodeValue.length&&Cd(e,d,t,!1,o).each(C=>{o=C.container(),r=C.offset(),f=!0}),f?h.some(F(o,r)):h.none()},oc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=F.fromRangeStart(t);return Dy(e,n,!0,s).each(r=>{(!n||!F.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||Dy(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),hd(t,s)?h.none():h.some(s)},rc=(e,t)=>e.splitText(t),ic=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;return t===s&&te(t)?n>0&&n<t.nodeValue.length&&(s=rc(t,n),t=s.previousSibling,o>n?(o=o-n,t=s=rc(s,o).previousSibling,o=s.nodeValue.length,n=0):o=0):(te(t)&&n>0&&n<t.nodeValue.length&&(t=rc(t,n),n=0),te(s)&&o>0&&o<s.nodeValue.length&&(s=rc(s,o).previousSibling,o=s.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},hi=e=>({walk:(o,r)=>_a(e,o,r),split:ic,normalize:o=>oc(e,o).fold(ht,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});hi.compareRanges=hd,hi.getCaretRangeFromPoint=Ry,hi.getSelectedNode=Il,hi.getNode=Ro;const eD=((e,t)=>{const n=(a,c)=>{if(!vn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;Zi(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=Ts(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>Q(c,(f,d)=>{const p=Ts(a,d),C=p===void 0?0:parseInt(p,10);return isNaN(C)?f:f+C},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const d=r(a,f);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Kr(e)?t.getBoundingClientRect().height:t.offsetHeight}),tD=e=>eD.get(e),By=()=>S.fromDom(document),$y=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=$y(e,o);return[s].concat(r)}),nD=(e,t)=>{const n=t.owner(e);return $y(t,n)};var sD=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?h.none():h.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(S.fromDom)},owner:e=>wo(e)});const oD=e=>{const t=By(),n=cf(t),s=nD(e,sD),o=lf(e),r=de(s,(i,a)=>{const c=lf(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return Gr(r.left+o.left+n.left,r.top+o.top+n.top)},yd=e=>Et(e)==="textarea",rD=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),iD=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},aD=(e,t)=>{const n=Qt(e);if(n.length===0||yd(e))return{element:e,offset:t};if(t<n.length&&!yd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return yd(s)?{element:e,offset:t}:Et(s)==="img"?{element:s,offset:1}:In(s)?{element:s,offset:ud(s).length}:{element:s,offset:Qt(s).length}}},Iy=(e,t)=>{const n=cA(e),s=tD(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},lD=(e,t)=>{const n=aD(e,t),s=S.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+qt+"</span>");return Jn(n.element,s),Iy(s,()=>Tt(s))},cD=e=>Iy(S.fromDom(e),De),Fy=(e,t,n,s)=>{fD(e,(o,r)=>uD(e,t,n,s),n)},Ly=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(rD(e,r))return;const i=cf(t).top;n(t,i,s,o),iD(e,r)},uD=(e,t,n,s)=>{const o=S.fromDom(e.getBody()),r=S.fromDom(e.getDoc());XN(o);const i=lD(S.fromDom(n.startContainer),n.startOffset);Ly(e,r,t,i,s),i.cleanup()},My=(e,t,n,s)=>{const o=S.fromDom(e.getDoc());Ly(e,o,n,cD(t),s)},fD=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(S.fromDom(s),S.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},vd=(e,t,n,s)=>{const o=e.pos;if(n)Hh(o.left,o.top,s);else{const r=o.top-t+e.height;Hh(o.left,r,s)}},Uy=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?vd(s,n,o!==!1,e):i>r?vd(s,n,c?o!==!1:o===!0,e):a>r&&!c&&vd(s,n,o===!0,e)},zy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Uy(e,t,o,n,s)},Hy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;Uy(e,t,o,n,s);const r=oD(n.element),i=jh(window);r.top<i.y?Vh(n.element,s!==!1):r.top>i.bottom&&Vh(n.element,s===!0)},dD=(e,t,n)=>Fy(e,zy,t,n),mD=(e,t,n)=>My(e,t,zy,n),pD=(e,t,n)=>Fy(e,Hy,t,n),gD=(e,t,n)=>My(e,t,Hy,n),hD=(e,t,n)=>{(e.inline?mD:gD)(e,t,n)},Ta=(e,t,n)=>{(e.inline?dD:pD)(e,t,n)},Vy=e=>e.dom.focus(),Wy=e=>{const t=Jo(e).dom;return e.dom===t.activeElement},Ed=(e=By())=>h.from(e.dom.activeElement).map(S.fromDom),bD=e=>Ed(Jo(e)).filter(t=>e.dom.contains(t.dom)),jy=(e,t)=>{const n=In(t)?ud(t).length:Qt(t).length+1;return e>n?n:e<0?0:e},CD=e=>gi.range(e.start,jy(e.soffset,e.start),e.finish,jy(e.foffset,e.finish)),qy=(e,t)=>!wl(t.dom)&&(so(e,t)||ot(e,t)),Ky=e=>t=>qy(e,t.start)&&qy(e,t.finish),yD=e=>e.inline,vD=e=>gi.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset),ED=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?h.none():h.from(t.getRangeAt(0))).map(vD)},wD=e=>{const t=kh(e);return ED(t.dom).filter(Ky(e))},xD=(e,t)=>h.from(t).filter(Ky(e)).map(CD),SD=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),h.some(t)}catch{return h.none()}},wd=e=>{const t=yD(e)?wD(S.fromDom(e.getBody())):h.none();e.bookmark=t.isSome()?t:e.bookmark},xd=e=>(e.bookmark?e.bookmark:h.none()).bind(n=>xD(S.fromDom(e.getBody()),n)).bind(SD),_D=e=>{xd(e).each(t=>e.selection.setRng(t))},Gy={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},kD=(e,t)=>(vn(t)||(t=0),setTimeout(e,t)),ND=(e,t)=>(vn(t)||(t=0),setInterval(e,t)),Hn={setEditorTimeout:(e,t,n)=>kD(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=ND(()=>{e.removed?clearInterval(s):t()},n);return s}},AD=e=>e.type==="nodechange"&&e.selectionChange,TD=(e,t)=>{const n=()=>{t.throttle()};lt.DOM.bind(document,"mouseup",n),e.on("remove",()=>{lt.DOM.unbind(document,"mouseup",n)})},RD=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},PD=(e,t)=>{RD(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{AD(n)||wd(e)})},OD=e=>{const t=$l(()=>{wd(e)},0);e.on("init",()=>{e.inline&&TD(e,t),PD(e,t)}),e.on("remove",()=>{t.cancel()})};let Ra;const Sd=lt.DOM,DD=e=>Gy.isEditorUIElement(e),BD=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},ac=(e,t)=>{const n=fR(e);return Sd.getParent(t,o=>DD(o)||(n?e.dom.is(o,n):!1))!==null},$D=e=>{try{const t=Jo(S.fromDom(e.getElement()));return Ed(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},ID=(e,t)=>{const n=t.editor;OD(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Hn.setEditorTimeout(n,()=>{const s=e.focusedEditor;!ac(n,$D(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ra||(Ra=s=>{const o=e.activeEditor;o&&Dh(s).each(r=>{r.ownerDocument===document&&r!==document.body&&!ac(o,r)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Sd.bind(document,"focusin",Ra))},FD=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Sd.unbind(document,"focusin",Ra),Ra=null)},LD=e=>{e.on("AddEditor",re(ID,e)),e.on("RemoveEditor",re(FD,e))},MD=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),UD=e=>e.collapsed?h.from(Ro(e.startContainer,e.startOffset)).map(S.fromDom):h.none(),zD=(e,t)=>UD(t).bind(n=>OA(n)?h.some(n):so(e,n)===!1?h.some(e):h.none()),Yy=(e,t)=>{zD(S.fromDom(e.getBody()),t).bind(n=>pn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},_d=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},HD=e=>Wy(e)||bD(e).isSome(),VD=e=>e.iframeElement&&Wy(S.fromDom(e.iframeElement)),WD=e=>{const t=e.getBody();return t&&HD(S.fromDom(t))},jD=e=>{const t=Jo(S.fromDom(e.getElement()));return Ed(t).filter(n=>!BD(n.dom)&&ac(e,n.dom)).isSome()},br=e=>e.inline?WD(e):VD(e),qD=e=>br(e)||jD(e),KD=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&br(e)===!1&&xd(e).each(r=>{e.selection.setRng(r),s=r});const o=MD(e,t.getNode());if(e.dom.isChildOf(o,n)){_d(o),Yy(e,s),kd(e);return}e.inline||(Ze.browser.isOpera()||_d(n),e.getWin().focus()),(Ze.browser.isFirefox()||e.inline)&&(_d(n),Yy(e,s)),kd(e)},kd=e=>e.editorManager.setActive(e),GD=(e,t)=>{e.removed||(t?kd(e):KD(e))},Xy=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return h.from(r).map(S.fromDom).map(a=>!s||!t.collapsed?Cl(a,o(a,i)).getOr(a):a).bind(a=>Qn(a)?h.some(a):Zn(a).filter(Qn)).map(a=>a.dom).getOr(e)},Qy=(e,t,n)=>Xy(e,t,!0,n,(s,o)=>Math.min(Rh(s),o)),Zy=(e,t,n)=>Xy(e,t,!1,n,(s,o)=>o>0?o-1:o),Jy=(e,t)=>{const n=e;for(;e&&te(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},YD=(e,t)=>{let n,s,o;if(!t)return e;s=t.startContainer,o=t.endContainer;const r=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(s===o&&i-r<2&&s.hasChildNodes()&&(n=s.childNodes[r]),s.nodeType===3&&o.nodeType===3&&(s.length===r?s=Jy(s.nextSibling,!0):s=s.parentNode,i===0?o=Jy(o.previousSibling,!1):o=o.parentNode,s&&s===o))?s:n&&n.nodeType===3?n.parentNode:n},XD=(e,t,n,s)=>{let o;const r=[],i=e.getRoot();if(n=e.getParent(n||Qy(i,t,t.collapsed),e.isBlock),s=e.getParent(s||Zy(i,t,t.collapsed),e.isBlock),n&&n!==i&&r.push(n),n&&s&&n!==s){o=n;const a=new $t(n,i);for(;(o=a.next())&&o!==s;)e.isBlock(o)&&r.push(o)}return s&&n!==s&&s!==i&&r.push(s),r},QD=(e,t,n)=>h.from(t).map(s=>{const o=e.nodeIndex(s),r=e.createRng();return r.setStart(s.parentNode,o),r.setEnd(s.parentNode,o+1),n&&(ad(e,r,s,!0),ad(e,r,s,!1)),r}),Nd=(e,t)=>z(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),ZD=e=>Et(e)==="img"?1:py(e).fold(()=>Qt(e).length,t=>t.length),JD=e=>py(e).filter(t=>t.trim().length!==0||t.indexOf(Zt)>-1).isSome(),eB=["img","br"],ev=e=>JD(e)||R(eB,Et(e)),tB=e=>vA(e,ev),nB=e=>sB(e,ev),sB=(e,t)=>{const n=s=>{const o=Qt(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return h.some(i);const a=n(i);if(a.isSome())return a}return h.none()};return n(e)},tv="[data-mce-autocompleter]",oB=(e,t)=>{if(nv(S.fromDom(e.getBody())).isNone()){const n=S.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Lt(n,S.fromDom(t.extractContents())),t.insertNode(n.dom),Zn(n).each(s=>s.dom.normalize()),nB(n).map(s=>{e.selection.setCursorLocation(s.dom,ZD(s))})}},rB=e=>or(e,tv),nv=e=>oa(e,tv),iB=(e,t)=>nv(t).each(n=>{const s=e.selection.getBookmark();tr(n),e.selection.moveToBookmark(s)}),aB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},lc=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},lB=e=>{if(!rr(e.value))return!1;const t=e.parent;return!(t&&(t.name!=="span"||t.attr("style"))&&/^[ ]+$/.test(e.value))},sv=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class gn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new gn(t,aB[t]||1);return n&&yt(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;let o;if(typeof t!="string")return t!=null&&yt(t,(r,i)=>{s.attr(i,r)}),s;if(o=s.attributes){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new gn(t.name,t.type);let s;if(s=t.attributes){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent.insert(t,n),t.append(n),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o.next=s,n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s.prev=o,t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev.next=t,t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next.prev=t,t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=lc(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=lc(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){const o=this;let r=o.firstChild;if(sv(o))return!1;if(r)do{if(r.type===1){if(r.attr("data-mce-bogus"))continue;if(t[r.name]||sv(r))return!1}if(r.type===8||r.type===3&&!lB(r)||r.type===3&&r.parent&&n[r.parent.name]&&rr(r.value)||s&&s(r))return!1}while(r=lc(r,o));return!0}walk(t){return lc(this,null,t)}}const cB=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),ov=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&cB(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},uB=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){Gt(c[2],"--")?a=ov(t,!1,c.index+3):a=ov(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Zs(f)||f.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Fe(r,c[2])||(i+=1),a=s.lastIndex+f[0].length;break}}return a},fB=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},rv=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=fB(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let f;r[i[1]]?f=a:f=uB(s,o,a),o=o.substring(0,a-c)+o.substring(f),n.lastIndex=a-c}return _o(o)},dB=rv,mB=(e,t)=>{const n=Sn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},pB=(e,t,n)=>{let s;return t.format==="raw"?s=G.trim(dB(e.serializer,n.innerHTML)):t.format==="text"?(s=_o(n.innerText),s=s===`
`?"":s):t.format==="tree"?s=e.serializer.serialize(n,t):s=mB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!kl(S.fromDom(n))&&me(s)?G.trim(s):s},gB=(e,t)=>h.from(e.getBody()).fold(K(t.format==="tree"?new gn("body",11):""),n=>pB(e,t,n)),hB=G.each,iv=e=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const o=i=>{const a={};return hB(e.getAttribs(i),c=>{const f=c.nodeName.toLowerCase();f.indexOf("_")!==0&&f!=="style"&&f.indexOf("data-")!==0&&(a[f]=e.getAttrib(i,f))}),a},r=(i,a)=>{let c,f;for(f in i)if(Fe(i,f)){if(c=a[f],typeof c=="undefined"||i[f]!==c)return!1;delete a[f]}for(f in a)if(Fe(a,f))return!1;return!0};return!r(o(n),o(s))||!r(e.parseStyle(e.getAttrib(n,"style")),e.parseStyle(e.getAttrib(s,"style")))?!1:!zn(n)&&!zn(s)}}),av=G.makeMap,lv=e=>{const t=[];e=e||{};const n=e.indent,s=av(e.indent_before||""),o=av(e.indent_after||""),r=ko.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{let d,p,C,y;if(n&&s[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`)),t.push("<",a),c)for(d=0,p=c.length;d<p;d++)C=c[d],t.push(" ",C.name,'="',r(C.value,!0),'"');!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0&&(y=t[t.length-1],y.length>0&&y!==`
`&&t.push(`
`))},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Do=(e,t=Ao())=>{const n=lv(e);return e=e||{},e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{n.text(c.value,c.raw)},8:c=>{n.comment(c.value)},7:c=>{n.pi(c.name,c.value)},10:c=>{n.doctype(c.value)},4:c=>{n.cdata(c.value)},11:c=>{if(c=c.firstChild)do a(c);while(c=c.next)}};n.reset();const a=c=>{const f=i[c.type];if(f)f(c);else{const d=c.name,p=d in t.getVoidElements();let C=c.attributes;if(r&&C&&C.length>1){const y=[];y.map={};const w=t.getElementRule(c.name);if(w){for(let v=0,x=w.attributesOrder.length;v<x;v++){const _=w.attributesOrder[v];if(_ in C.map){const P=C.map[_];y.map[_]=P,y.push({name:_,value:P})}}for(let v=0,x=C.length;v<x;v++){const _=C[v].name;if(!(_ in y.map)){const P=C.map[_];y.map[_]=P,y.push({name:_,value:P})}}C=y}}if(n.start(d,C,p),!p){let y=c.firstChild;if(y){(d==="pre"||d==="textarea")&&y.type===3&&y.value[0]===`
`&&n.text(`
`,!0);do a(y);while(y=y.next)}n.end(d)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},cv=new Set;T(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{cv.add(t)});const uv=["font","text-decoration","text-emphasis"],Ad=(e,t)=>Xn(e.parseStyle(e.getAttrib(t,"style"))),bB=e=>cv.has(e),CB=(e,t)=>rt(Ad(e,t),n=>!bB(n)),yB=e=>H(e,t=>U(uv,n=>Gt(t,n))),vB=(e,t,n)=>{const s=Ad(e,t),o=Ad(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return to(f)&&to(d)&&f!==d};return U(s,i=>{const a=c=>U(c,f=>f===i);if(!a(o)&&a(uv)){const c=yB(o);return U(c,r)}else return r(i)})},fv=(e,t,n)=>h.from(n.container()).filter(te).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),Td=re(fv,!0,Sa),Rd=re(fv,!1,Sa),EB=e=>{const t=e.container();return te(t)&&(t.data.length===0||Nl(t.data)&&Na.isBookmarkNode(t.parentNode))},Bo=(e,t)=>n=>h.from(jf(e?0:-1,n)).filter(t).isSome(),dv=e=>Gh(e)&&Ts(S.fromDom(e),"display")==="block",mv=e=>wt(e)&&!dA(e),wB=Bo(!0,dv),xB=Bo(!1,dv),Pa=Bo(!0,Ps),Oa=Bo(!1,Ps),pv=Bo(!0,na),gv=Bo(!1,na),$o=Bo(!0,mv),Io=Bo(!1,mv),SB=e=>{const t=[];let n=e.dom;for(;n;)t.push(S.fromDom(n)),n=n.lastChild;return t},_B=e=>{const t=xn(e,"br"),n=H(SB(e).slice(-1),Qr);t.length===n.length&&T(n,Tt)},Cr=e=>{ta(e),Lt(e,S.fromHtml('<br data-mce-bogus="1">'))},kB=e=>{of(e).each(t=>{Zo(t).each(n=>{os(e)&&Qr(t)&&os(n)&&Tt(t)})})},NB=e=>e.slice(0,-1),AB=(e,t,n)=>so(t,e)?NB(HN(e,s=>n(s)||ot(s,t))):[],hv=(e,t)=>AB(e,t,ht),ao=(e,t)=>[e].concat(hv(e,t)),Pd=(e,t,n)=>VC(e,t,n,EB),bv=(e,t)=>ge(ao(S.fromDom(t.container()),e),os),Cv=(e,t,n)=>Pd(e,t.dom,n).forall(s=>bv(t,n).fold(()=>Ds(s,n,t.dom)===!1,o=>Ds(s,n,t.dom)===!1&&so(o,S.fromDom(s.container())))),yv=(e,t,n)=>bv(t,n).fold(()=>Pd(e,t.dom,n).forall(s=>Ds(s,n,t.dom)===!1),s=>Pd(e,s.dom,n).isNone()),Od=re(yv,!1),vv=re(yv,!0),TB=re(Cv,!1),RB=re(Cv,!0),PB=e=>Vl(e).exists(Qr),cc=(e,t,n)=>{const s=H(ao(S.fromDom(n.container()),t),os),o=Ut(s).getOr(t);return Mn(e,o.dom,n).filter(PB)},Dd=(e,t)=>Vl(t).exists(Qr)||cc(!0,e,t).isSome(),Bd=(e,t)=>cP(t).exists(Qr)||cc(!1,e,t).isSome(),OB=re(cc,!1),DB=re(cc,!0),Ev=e=>F.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),wv=(e,t)=>{const n=H(ao(S.fromDom(t.container()),e),os);return Ut(n).getOr(e)},xv=(e,t)=>Ev(t)?Rd(t):Rd(t)||as(wv(e,t).dom,t).exists(Rd),Sv=(e,t)=>Ev(t)?Td(t):Td(t)||Un(wv(e,t).dom,t).exists(Td),BB=e=>R(["pre","pre-wrap"],e),$d=e=>Vl(e).bind(t=>Xr(t,Qn)).exists(t=>BB(Ts(t,"white-space"))),$B=(e,t)=>as(e.dom,t).isNone(),IB=(e,t)=>Un(e.dom,t).isNone(),FB=(e,t)=>$B(e,t)||IB(e,t)||Od(e,t)||vv(e,t)||Bd(e,t)||Dd(e,t),LB=e=>Ne(e)&&wt(e)&&TC(e),MB=e=>t=>LB(new $t(t,e).next()),UB=(e,t)=>{const n=Un(e.dom,t).getOr(t),s=MB(e.dom);return t.isAtEnd()&&(s(t.container())||s(n.container()))},zB=(e,t)=>$d(t)?!1:FB(e,t)||xv(e,t)||Sv(e,t),uc=(e,t)=>$d(t)?!1:Od(e,t)||TB(e,t)||Bd(e,t)||xv(e,t),HB=e=>{const t=e.container(),n=e.offset();return te(t)&&n<t.data.length?F(t,n+1):e},fc=(e,t)=>$d(t)?!1:vv(e,t)||RB(e,t)||Dd(e,t)||Sv(e,t)||UB(e,t),_v=(e,t)=>uc(e,t)||fc(e,HB(t)),kv=(e,t)=>Gl(e.charAt(t)),VB=e=>{const t=e.container();return te(t)&&sn(t.data,Zt)},WB=e=>{const t=e.split("");return z(t,(n,s)=>Gl(n)&&s>0&&s<t.length-1&&Qf(t[s-1])&&Qf(t[s+1])?" ":n).join("")},jB=(e,t)=>{const n=t.data,s=F(t,0);return kv(n,0)&&!_v(e,s)?(t.data=" "+n.slice(1),!0):!1},qB=e=>{const t=e.data,n=WB(t);return n!==t?(e.data=n,!0):!1},KB=(e,t)=>{const n=t.data,s=F(t,n.length-1);return kv(n,n.length-1)&&!_v(e,s)?(t.data=n.slice(0,-1)+" ",!0):!1},GB=(e,t)=>h.some(t).filter(VB).bind(n=>{const s=n.container();return jB(e,s)||qB(s)||KB(e,s)?h.some(n):h.none()}),YB=e=>{const t=S.fromDom(e.getBody());e.selection.isCollapsed()&&GB(t,F.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},Nv=(e,t,n)=>{if(n===0)return;const s=S.fromDom(e),o=Yr(s,os).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&fc(o,F(e,e.data.length)),a=t===0&&uc(o,F(e,0));e.replaceData(t,n,lb(r,4,a,i))},dc=(e,t)=>{const n=e.data.slice(t),s=n.length-cN(n).length;Nv(e,t,s)},Id=(e,t)=>{const n=e.data.slice(0,t),s=n.length-Hg(n).length;Nv(e,t-s,s)},Fd=(e,t,n,s=!0)=>{const o=Hg(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),Tt(S.fromDom(i)),n&&dc(r,o),r},XB=(e,t)=>{const n=e.container(),s=e.offset();return F.isTextPosition(e)===!1&&n===t.parentNode&&s>F.before(t).offset()},QB=(e,t)=>XB(t,e)?F(t.container(),t.offset()-1):t,ZB=e=>te(e)?F(e,0):F.before(e),JB=e=>te(e)?F(e,e.data.length):F.after(e),Av=e=>ts(e.previousSibling)?h.some(JB(e.previousSibling)):e.previousSibling?Is(e.previousSibling):h.none(),Tv=e=>ts(e.nextSibling)?h.some(ZB(e.nextSibling)):e.nextSibling?pn(e.nextSibling):h.none(),e$=(e,t)=>{const n=F.before(t.previousSibling?t.previousSibling:t.parentNode);return as(e,n).fold(()=>Un(e,F.after(t)),h.some)},t$=(e,t)=>Un(e,F.after(t)).fold(()=>as(e,F.before(t)),h.some),n$=(e,t)=>Av(t).orThunk(()=>Tv(t)).orThunk(()=>e$(e,t)),s$=(e,t)=>Tv(t).orThunk(()=>Av(t)).orThunk(()=>t$(e,t)),o$=(e,t,n)=>e?s$(t,n):n$(t,n),r$=(e,t,n)=>o$(e,t,n).map(re(QB,n)),Rv=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},i$=e=>t=>t.dom===e,a$=(e,t)=>t&&Fe(e.schema.getBlockElements(),Et(t)),l$=e=>{if(zt(e)){const t=S.fromHtml('<br data-mce-bogus="1">');return ta(e),Lt(e,t),h.some(F.before(t.dom))}else return h.none()},c$=(e,t,n)=>{const s=Zo(e).filter(In),o=ea(e).filter(In);return Tt(e),kN(s,o,t,(r,i,a)=>{const c=r.dom,f=i.dom,d=c.data.length;return Fd(c,f,n),a.container()===f?F(c,d):a}).orThunk(()=>(n&&(s.each(r=>Id(r.dom,r.dom.length)),o.each(r=>dc(r.dom,0))),t))},u$=(e,t)=>Fe(e.schema.getTextInlineElements(),Et(t)),yr=(e,t,n,s=!0)=>{const o=r$(t,e.getBody(),n.dom),r=Yr(n,re(a$,e),i$(e.getBody())),i=c$(n,o,u$(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(l$).fold(()=>{s&&Rv(e,t,i)},a=>{s&&Rv(e,t,h.some(a))})},f$=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,d$=e=>f$.test(e),vr=(e,t)=>As(S.fromDom(t),nR(e)),m$=e=>lt.DOM.getStyle(e,"direction",!0)==="rtl"||d$(e.textContent),p$=(e,t,n)=>H(lt.DOM.getParents(n.container(),"*",t),e),Fo=(e,t,n)=>{const s=p$(e,t,n);return h.from(s[s.length-1])},g$=(e,t,n)=>{const s=Oo(t,e),o=Oo(n,e);return s&&s===o},h$=e=>hf(e)||bf(e),Vn=(e,t)=>{if(!t)return t;const n=t.container(),s=t.offset();return e?ei(n)?te(n.nextSibling)?F(n.nextSibling,0):F.after(n):hf(t)?F(n,s+1):t:ei(n)?te(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):bf(t)?F(n,s-1):t},Pv=re(Vn,!0),Ov=re(Vn,!1),Dv=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Ld=e=>Dv(e,"Delete"),b$=e=>Dv(e,"ForwardDelete"),C$=e=>t=>ot(e,S.fromDom(t.dom.parentNode)),y$=e=>PA(e)||ra(e),mc=(e,t)=>so(e,t)?Xr(t,y$,C$(e)):h.none(),v$=e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Bv=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),v$(e))},E$=(e,t,n)=>wn(pn(n),Is(n),(s,o)=>{const r=Vn(!0,s),i=Vn(!1,o),a=Vn(!1,t);return e?Un(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):as(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),$v=e=>(NN(e)?Zo(e):of(e)).bind($v).orThunk(()=>h.some(e)),Iv=(e,t,n,s=!0)=>{t.deleteContents();const o=$v(n).getOr(n),r=S.fromDom(e.dom.getParent(o.dom,e.dom.isBlock));if(zt(r)&&(Cr(r),s&&e.selection.setCursorLocation(r.dom,0)),!ot(n,r)){const i=jr(Zn(r),n)?[]:VN(r);T(i.concat(Qt(n)),a=>{!ot(a,r)&&!so(a,r)&&zt(a)&&Tt(a)})}},w$=e=>t=>ot(e,t),Md=e=>xn(e,"td,th"),x$=(e,t)=>{const n=f=>ka(S.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=wn(s,o,ot).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Ud=(e,t)=>({start:e,end:t}),S$=(e,t,n)=>({rng:e,table:t,cells:n}),Da=Os.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),pc=(e,t)=>or(S.fromDom(e),"td,th",t),Fv=e=>!ot(e.start,e.end),Lv=(e,t)=>ka(e.start,t).bind(n=>ka(e.end,t).bind(s=>tf(ot(n,s),n))),_$=(e,t)=>!Fv(e)&&Lv(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),k$=(e,t)=>{const n=pc(e.startContainer,t),s=pc(e.endContainer,t);return wn(n,s,Ud)},N$=e=>t=>ka(t,e).bind(n=>eo(Md(n)).map(s=>Ud(t,s))),A$=e=>t=>ka(t,e).bind(n=>Ut(Md(n)).map(s=>Ud(s,t))),zd=e=>t=>Lv(t,e).map(n=>S$(t,n,Md(n))),Mv=(e,t,n,s)=>{if(n.collapsed||!e.forall(Fv))return h.none();if(t.isSameTable){const o=e.bind(zd(s));return h.some({start:o,end:o})}else{const o=pc(n.startContainer,s),r=pc(n.endContainer,s),i=o.bind(N$(s)).bind(zd(s)),a=r.bind(A$(s)).bind(zd(s));return h.some({start:i,end:a})}},Uv=(e,t)=>Te(e,n=>ot(n,t)),Hd=e=>wn(Uv(e.cells,e.rng.start),Uv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),T$=(e,t,n)=>e.exists(s=>_$(s,n)&&id(s.start,t)),zv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},R$=(e,t,n,s)=>Mv(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=Hd(o).getOr([]);if(r&&o.cells.length===i.length)return h.some(Da.fullTable(o.table));if(i.length>0){if(r)return h.some(Da.partialTable(i,h.none()));{const a=zv(n,t);return h.some(Da.partialTable(i,h.some(mt(_e({},t),{rng:a}))))}}else return h.none()}),P$=(e,t,n,s)=>Mv(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(Hd).getOr([]),a=r.bind(Hd).getOr([]);if(i.length>0&&a.length>0){const c=zv(n,t);return h.some(Da.multiTable(i,a,c))}else return h.none()}),O$=(e,t)=>{const n=w$(e),s=k$(t,n),o=x$(t,n);return T$(s,t,n)?s.map(r=>Da.singleCellTable(t,r.start)):o.isMultiTable?P$(s,o,t,n):R$(s,o,t,n)},Hv=e=>T(e,t=>{Xt(t,"contenteditable"),Cr(t)}),D$=(e,t)=>h.from(e.dom.getParent(t,e.dom.isBlock)).map(S.fromDom),B$=(e,t,n)=>{n.each(s=>{t?Tt(s):(Cr(s),e.selection.setCursorLocation(s.dom,0))})},Vd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Wd(e,o,t,!1).each(r=>r())},Vv=e=>{const t=pi(e),n=S.fromDom(e.selection.getNode());Sl(n.dom)&&zt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&U(t,s=>ot(s,n))&&Yt(n,"data-mce-selected","1")},Wv=(e,t,n)=>h.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=D$(e,i?r.endContainer:r.startContainer);r.deleteContents(),B$(e,i,a.filter(zt));const c=i?t[0]:t[t.length-1];return Vd(e,c,s,i),zt(c)?h.none():h.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);Hv(o),Vv(e)}),$$=(e,t,n,s)=>h.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Vd(e,r,o,!0),Vd(e,i,o,!1);const a=zt(r)?t:t.slice(1),c=zt(i)?n:n.slice(0,-1);Hv(a.concat(c)),s.deleteContents(),Vv(e)}),Wd=(e,t,n,s=!0)=>h.some(()=>{Iv(e,t,n,s)}),I$=(e,t)=>h.some(()=>yr(e,!1,t)),F$=(e,t,n)=>O$(t,n).bind(s=>s.fold(re(Wd,e),re(I$,e),re(Wv,e),re($$,e))),L$=(e,t)=>gc(e,t),M$=(e,t,n,s)=>jd(t,s).fold(()=>F$(e,t,n),o=>L$(e,o)),U$=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?Wv(e,n,h.none()):M$(e,s,o,t)},jv=(e,t)=>ge(ao(t,e),_l),jd=(e,t)=>ge(ao(t,e),hh("caption")),z$=(e,t,n,s,o)=>ql(n,e.getBody(),o).bind(r=>jv(t,S.fromDom(r.getNode())).bind(i=>ot(i,s)?h.none():h.some(De))),gc=(e,t)=>h.some(()=>{Cr(t),e.selection.setCursorLocation(t.dom,0)}),H$=(e,t,n,s)=>pn(e.dom).bind(o=>Is(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),V$=(e,t)=>gc(e,t),W$=(e,t,n)=>jd(e,S.fromDom(n.getNode())).fold(()=>h.some(De),s=>tf(!ot(s,t),De)),j$=(e,t,n,s,o)=>ql(n,e.getBody(),o).fold(()=>h.some(De),r=>H$(s,n,o,r)?V$(e,s):W$(t,s,r)),q$=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return jv(n,s).bind(r=>zt(r)?gc(e,r):z$(e,n,t,r,o))},K$=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return zt(s)?gc(e,s):j$(e,n,t,s,o)},qv=(e,t)=>e?pv(t):gv(t),G$=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return qv(t,n)||Mn(t,e.getBody(),n).exists(s=>qv(t,s))},Y$=(e,t,n)=>{const s=S.fromDom(e.getBody());return jd(s,n).fold(()=>q$(e,t,s,n).orThunk(()=>tf(G$(e,t),De)),o=>K$(e,t,s,o))},qd=(e,t)=>{const n=S.fromDom(e.selection.getStart(!0)),s=pi(e);return e.selection.isCollapsed()&&s.length===0?Y$(e,t,n):U$(e,n,s)},Ba=(e,t)=>{for(;t&&t!==e;){if(Rs(t)||wt(t))return t;t=t.parentNode}return null},Kd=(e,t)=>{t(e),e.firstChild&&Kd(e.firstChild,t),e.next&&Kd(e.next,t)},Kv=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},X$=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&Kd(n.firstChild,o=>{Kv(e,t,o,s)}),s},Gv=(e,t)=>{const n=s=>{yt(s,o=>{const r=H(o.nodes,i=>Ne(i.parent));T(o.filter.callbacks,i=>{i(r,o.filter.name,t)})})};n(e.nodes),n(e.attributes)},Yv=(e,t,n,s={})=>{const o=X$(e,t,n);Gv(o,s)},Gd=(e,t,n,s)=>{t.insert&&n[s.name]?s.empty().append(new gn("br",1)):s.empty().append(new gn("#text",3)).value=Zt},Q$=e=>Xv(e,"#text")&&e.firstChild.value===Zt,Xv=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,Z$=(e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty},$a=(e,t,n,s)=>s.isEmpty(t,n,o=>Z$(e,o)),J$=(e,t)=>e&&(e.name in t||e.name==="br"),Yd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)t.isValidChild(n.name,o.name)||Yd(o,t,n);e.unwrap()}},Xd=(e,t,n=De)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const f=e[c];let d,p,C;if(!f.parent||a.has(f))continue;if(s[f.name]&&f.parent.name==="li"){let w=f.next;for(;w&&s[w.name];){w.name="li",a.add(w),f.parent.insert(w,f.parent);w=w.next}f.unwrap();continue}const y=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&!i[d.name];d=d.parent)y.push(d);if(d&&y.length>1)if(t.isValidChild(d.name,f.name)){y.reverse(),p=y[0].clone(),n(p);let w=p;for(let v=0;v<y.length-1;v++){t.isValidChild(w.name,y[v].name)?(C=y[v].clone(),n(C),w.append(C)):C=w;for(let x=y[v].firstChild;x&&x!==y[v+1];){const _=x.next;C.append(x),x=_}w=C}$a(t,o,r,p)?d.insert(f,y[0],!0):(d.insert(p,y[0],!0),d.insert(f,p)),d=y[0],($a(t,o,r,d)||Xv(d,"br"))&&d.empty().remove()}else Yd(f,t);else if(f.parent){if(f.name==="li"){let w=f.prev;if(w&&(w.name==="ul"||w.name==="ol")){w.append(f);continue}if(w=f.next,w&&(w.name==="ul"||w.name==="ol")){w.insert(f,w.firstChild,!0);continue}const v=new gn("ul",1);n(v),f.wrap(v);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const w=new gn("div",1);n(w),f.wrap(w)}else Yd(f,t)}}},eI=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},tI=e=>{const t=F.fromRangeStart(e),n=F.fromRangeEnd(e),s=e.commonAncestorContainer;return Mn(!1,s,n).map(o=>!Ds(t,n,s)&&Ds(t,o,s)?eI(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Qd=e=>e.collapsed?e:tI(e),nI=e=>e.firstChild&&e.firstChild===e.lastChild,sI=e=>e.name==="br"||e.value===Zt,oI=(e,t)=>e.getBlockElements()[t.name]&&nI(t)&&sI(t.firstChild),rI=(e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||oI(e,t))},iI=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),rI(e,s)&&(s=s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},aI=e=>{const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode.removeChild(n),e},lI=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return aI(o)},cI=e=>H(e.childNodes,t=>t.nodeName==="LI"),uI=e=>e.data===Zt||Pt(e),fI=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&uI(e.firstChild),dI=e=>!e.firstChild||fI(e),mI=e=>e.length>0&&dI(e[e.length-1])?e.slice(0,-1):e,Zd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},pI=(e,t)=>!!Zd(e,t),gI=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},hI=(e,t)=>{const n=F.before(e),o=$s(t).next(n);return o?o.toRange():null},Qv=(e,t)=>{const n=F.after(e),o=$s(t).prev(n);return o?o.toRange():null},bI=(e,t,n,s)=>{const o=gI(e,s),r=e.parentNode;return r.insertBefore(o[0],e),G.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e),Qv(t[t.length-1],n)},CI=(e,t,n)=>{const s=e.parentNode;return G.each(t,o=>{s.insertBefore(o,e)}),hI(e,n)},yI=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),Qv(t[0],n)),vI=(e,t,n,s)=>{const o=lI(t,e,s),r=Zd(t,n.startContainer),i=mI(cI(o.firstChild)),a=1,c=2,f=t.getRoot(),d=p=>{const C=F.fromRangeStart(n),y=$s(t.getRoot()),w=p===a?y.prev(C):y.next(C);return w?Zd(t,w.getNode())!==r:!0};return d(a)?CI(r,i,f):d(c)?yI(r,i,f,t):bI(r,i,f,n)},EI=["pre"],wI=(e,t)=>{const n=e.firstChild,s=R(EI,n.name),o=n.name===t.tagName.toLowerCase(),r=e.lastChild.attr("data-mce-type")==="bookmark"?e.lastChild.prev:e.lastChild;return n===r&&s&&o},Jd=Sl,xI=(e,t,n)=>{if(n!==null){const s=e.getParent(t.endContainer,Jd);return n===s&&id(S.fromDom(n),t)}else return!1},SI=(e,t,n)=>{if(n.getAttribute("data-mce-bogus")==="all")n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},_I=(e,t)=>{h.from(e.getParent(t,"td,th")).map(S.fromDom).each(kB)},kI=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=iv(s);G.each(s.select("*[data-mce-fragment]"),i=>{if(Ne(n[i.nodeName.toLowerCase()])&&CB(s,i)){for(let c=i.parentNode;Ne(c)&&c!==o&&!vB(s,i,c);c=c.parentNode)if(r.compare(c,i)){s.remove(i,!0);break}}})}},NI=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},AI=e=>{G.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},TI=e=>!!e.getAttribute("data-mce-fragment"),RI=(e,t)=>t&&!e.schema.getVoidElements()[t.nodeName],PI=(e,t)=>{let n;const s=e.dom,o=e.selection;if(!t)return;o.scrollIntoView(t);const r=Ba(e.getBody(),t);if(s.getContentEditable(r)==="false"){s.remove(t),o.select(r);return}let i=s.createRng();const a=t.previousSibling;if(te(a)){i.setStart(a,a.nodeValue.length);const d=t.nextSibling;te(d)&&(a.appendData(d.data),d.parentNode.removeChild(d))}else i.setStartBefore(t),i.setEndBefore(t);const c=d=>{let p=F.fromRangeStart(d);if(p=$s(e.getBody()).next(p),p)return p.toRange()},f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(ta(S.fromDom(f)),i.setStart(f,0),i.setEnd(f,0),!Jd(f)&&!TI(f)&&(n=c(i))?(i=n,s.remove(f)):s.add(f,s.create("br",{"data-mce-bogus":"1"}))),o.setRng(i)},OI=e=>{const t=e.dom,n=Qd(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Jd);xI(t,n,s)?Wd(e,n,S.fromDom(s)):e.getDoc().execCommand("Delete",!1,null)},DI=(e,t,n)=>{let s,o,r;const i=e.selection,a=e.dom,c=e.parser,f=n.merge,d=Do({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p),o=i.getRng();const C=o.startContainer||(o.parentElement?o.parentElement():null),y=e.getBody();C===y&&i.isCollapsed()&&a.isBlock(y.firstChild)&&RI(e,y.firstChild)&&a.isEmpty(y.firstChild)&&(o=a.createRng(),o.setStart(y.firstChild,0),o.setEnd(y.firstChild,0),i.setRng(o)),i.isCollapsed()||OI(e),s=i.getNode();const w={context:s.nodeName.toLowerCase(),data:n.data,insert:!0},v=c.parse(t,w);if(n.paste===!0&&iI(e.schema,v)&&pI(a,s))return o=vI(d,a,i.getRng(),v),i.setRng(o),t;if(n.paste===!0&&wI(v,s)&&v.firstChild.unwrap(),NI(v),r=v.lastChild,r.attr("id")==="mce_marker"){const x=r;for(r=r.prev;r;r=r.walk(!0))if(r.type===3||!a.isBlock(r.name)){e.schema.isValidChild(r.parent.name,"span")&&r.parent.insert(x,r,r.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(s),!w.invalid)t=d.serialize(v),SI(e,t,s);else{e.selection.setContent(p),s=i.getNode();const x=e.getBody();for(s.nodeType===9?s=r=x:r=s;r!==x;)s=r,r=r.parentNode;t=s===x?x.innerHTML:a.getOuterHTML(s);const _=c.parse(t);for(let M=_;M;M=M.walk())if(M.attr("id")==="mce_marker"){M.replace(v);break}const P=v.children(),O=v.parent.name;v.unwrap();const I=H(P,M=>!e.schema.isValidChild(O,M.name));Xd(I,e.schema),Yv(c.getNodeFilters(),c.getAttributeFilters(),_),t=d.serialize(_),s===x?a.setHTML(x,t):a.setOuterHTML(s,t)}return kI(e,f),PI(e,a.get("mce_marker")),AI(e.getBody()),_I(a,i.getStart()),t},hc=e=>e instanceof gn,BI=e=>{br(e)&&pn(e.getBody()).each(t=>{const n=t.getNode(),s=na(n)?pn(n).getOr(t):t;e.selection.setRng(s.toRange())})},em=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&BI(e)},$I=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Sn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,dr(e),n)):n||(n=o),em(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Do({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=kl(S.fromDom(t))?n:G.trim(n);return em(e,o,s.no_selection),{content:o,html:o}}},II=(e,t,n,s)=>{Yv(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Do({validate:!1},e.schema).serialize(n),r=kl(S.fromDom(t))?o:G.trim(o);return em(e,r,s.no_selection),{content:n,html:r}},FI=(e,t,n)=>h.from(e.getBody()).map(s=>hc(t)?II(e,s,t,n):$I(e,s,t,n)).getOr({content:t,html:hc(n.content)?"":n.content}),LI=(e,t)=>CA(e,t).isSome(),Zv=e=>Ye(e)?e:ht,MI=(e,t,n)=>{let s=e.dom;const o=Zv(n);for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return h.none()},tm=(e,t,n)=>{const s=t(e),o=Zv(n);return s.orThunk(()=>o(e)?h.none():MI(e,t,o))},nm=td,Jv=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Pn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},sm=(e,t,n,s,o)=>{const r=e.dom.getRoot();return t===r?!1:(t=e.dom.getParent(t,i=>Jv(e,i,n)?!0:i.parentNode===r||!!Ms(e,i,n,s,!0)),!!Ms(e,t,n,s,o))},bc=(e,t,n)=>Vt(n)&&nm(t,n.inline)||Ls(n)&&nm(t,n.block)?!0:Pn(n)?Ee(t)&&e.is(t,n.selector):!1,eE=(e,t,n,s,o,r)=>{const i=n[s];if(Ye(n.onmatch))return n.onmatch(t,n,s);if(i){if(Rt(i.length)){for(const a in i)if(Fe(i,a)){const c=s==="attributes"?e.getAttrib(t,a):Ql(e,t,a),f=ro(i[a],r),d=Ft(c)||gl(c);if(d&&Ft(f))continue;if(o&&d&&!n.exact||(!o||n.exact)&&!nm(c,nd(f,a)))return!1}}else for(let a=0;a<i.length;a++)if(s==="attributes"?e.getAttrib(t,i[a]):Ql(e,t,i[a]))return!0}return!0},Ms=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&t)for(let a=0;a<r.length;a++){const c=r[a];if(bc(e.dom,t,c)&&eE(i,t,c,"attributes",o,s)&&eE(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let d=0;d<f.length;d++)if(!e.dom.hasClass(t,ro(f[d],s)))return}return c}}},om=(e,t,n,s,o)=>{if(s)return sm(e,s,t,n,o);if(s=e.selection.getNode(),sm(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&sm(e,r,t,n,o))},UI=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Ms(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},zI=(e,t)=>{const n=o=>ot(o,S.fromDom(e.getBody())),s=(o,r)=>Ms(e,o.dom,r)?h.some(r):h.none();return h.from(e.selection.getStart(!0)).bind(o=>tm(S.fromDom(o),r=>nn(t,i=>s(r,i)),n)).getOrNull()},HI=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Zl(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Pn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},VI=(e,t,n)=>Q(n,(s,o)=>{const r=FP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),bi=qt,tE="_mce_caret",WI=(e,t)=>e.importNode(t,!0),jI=e=>{const t=[];for(;e;){if(e.nodeType===3&&e.nodeValue!==bi||e.childNodes.length>1)return[];e.nodeType===1&&t.push(e),e=e.firstChild}return t},nE=e=>jI(e).length>0,sE=e=>{if(e){const t=new $t(e,e);for(e=t.current();e;e=t.next())if(te(e))return e}return null},rm=e=>{const t=S.fromTag("span");return Ns(t,{id:tE,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Lt(t,S.fromText(bi)),t},qI=e=>{const t=sE(e);return t&&t.nodeValue.charAt(0)===bi&&t.deleteData(0,1),t},im=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(nE(t))yr(e,!1,S.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,d=r.endOffset,p=qI(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&Cr(S.fromDom(i)),o.setRng(r)}},am=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)im(e,t,n);else if(t=gr(e.getBody(),o.getStart()),!t)for(;t=s.get(tE);)im(e,t,!1)},KI=(e,t,n)=>{const s=e.dom,o=s.getParent(n,re(Jf,e));o&&s.isEmpty(o)?n.parentNode.replaceChild(t,n):(_B(S.fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(t,n):s.insertAfter(t,n))},oE=(e,t)=>(e.appendChild(t),t),rE=(e,t)=>{const n=de(e,(s,o)=>oE(s,o.cloneNode(!1)),t);return oE(n,n.ownerDocument.createTextNode(bi))},GI=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=H(Xn(i.get()),p=>p!==s&&!sn(p,"removeformat")),f=VI(e,n,c);if(H(f,p=>!LP(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),h.some(p)}else return h.none()},YI=(e,t,n)=>{let s,o;const r=e.selection,i=r.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=gr(e.getBody(),r.getStart()),s&&(o=sE(s));const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&d.test(f.charAt(a))&&d.test(f.charAt(a-1))){const p=r.getBookmark();i.collapse(!0);let C=mi(e,i,e.formatter.get(t));C=ic(C),e.formatter.apply(t,n,C),r.moveToBookmark(p)}else(!s||o.nodeValue!==bi)&&(s=WI(e.getDoc(),rm(!0).dom),o=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),r.setCursorLocation(o,a)},XI=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i,a,c;const f=[],d=r.getRng(),p=d.startContainer,C=d.startOffset;for(a=p,p.nodeType===3&&(C!==p.nodeValue.length&&(i=!0),a=a.parentNode);a;){if(Ms(e,a,t,n,s)){c=a;break}a.nextSibling&&(i=!0),f.push(a),a=a.parentNode}if(!!c)if(i){const y=r.getBookmark();d.collapse(!0);let w=mi(e,d,e.formatter.get(t),!0);w=ic(w),e.formatter.remove(t,n,w,s),r.moveToBookmark(y)}else{const y=gr(e.getBody(),c),w=rm(!1).dom;KI(e,w,y!==null?y:c);const v=GI(e,w,c,t,n,s),x=rE(f.concat(v.toArray()),w);im(e,y,!1),r.setCursorLocation(x,1),o.isEmpty(c)&&o.remove(c)}},QI=(e,t)=>{const n=e.selection,s=e.getBody();am(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===bi&&am(e,gr(s,n.getStart())),(t===37||t===39)&&am(e,gr(s,n.getStart()))},ZI=e=>{e.on("mouseup keydown",t=>{QI(e,t.keyCode)})},JI=(e,t)=>{const n=rm(!1),s=rE(t,n.dom);return Jn(S.fromDom(e),n),Tt(S.fromDom(e)),F(s,0)},eF=(e,t)=>{const n=e.schema.getTextInlineElements();return Fe(n,Et(t))&&!Fs(t.dom)&&!sr(t.dom)},tF=e=>Fs(e.dom)&&nE(e.dom),Cc={},iE=Vr,aE=qi,nF=(e,t)=>{Cc[e]||(Cc[e]=[]),Cc[e].push(t)},sF=(e,t)=>{aE(Cc[e],n=>{n(t)})};nF("pre",e=>{const t=e.selection.getRng();let n;const s=i=>r(i.previousSibling)&&Ig(n,i.previousSibling)!==-1,o=(i,a)=>{const c=S.fromDom(a),f=wo(c).dom;Tt(c),er(S.fromDom(i),[S.fromTag("br",f),S.fromTag("br",f),...Qt(c)])},r=es(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),aE(iE(iE(n,r),s),i=>{o(i.previousSibling,i)}))});const lm=G.each,cm=e=>Ee(e)&&!zn(e)&&!Fs(e)&&!sr(e),lE=(e,t)=>{for(let n=e;n;n=n[t]){if(te(n)&&to(n.data))return e;if(Ee(n)&&!zn(n))return n}return e},cE=(e,t,n)=>{const s=iv(e);if(t&&n&&(t=lE(t,"previousSibling"),n=lE(n,"nextSibling"),s.compare(t,n))){for(let o=t.nextSibling;o&&o!==n;){const r=o;o=o.nextSibling,t.appendChild(r)}return e.remove(n),G.each(G.grep(n.childNodes),o=>{t.appendChild(o)}),t}return n},uE=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){const o=cE(e,ey(s),s);cE(e,o,ey(o,!0))}},oF=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";lm(e.select(s,n),o=>{cm(o)&&lm(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},um=(e,t,n)=>{lm(e.childNodes,s=>{cm(s)&&(t(s)&&n(s),s.hasChildNodes()&&um(s,t,n))})},rF=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},fE=(e,t)=>n=>!!(n&&Ql(e,n,t)),dE=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),rF(e,s)},Ia=Os.generate([{keep:[]},{rename:["name"]},{removed:[]}]),iF=/^(src|href|style)$/,fm=G.each,yc=td,aF=e=>/^(TR|TH|TD)$/.test(e.nodeName),mE=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),pE=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ee(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return te(s)&&n&&o>=s.nodeValue.length&&(s=new $t(s,e.getBody()).next()||s),te(s)&&!n&&o===0&&(s=new $t(s,e.getBody()).prev()||s),s},gE=(e,t)=>{const n=t?"firstChild":"lastChild";if(aF(e)&&e[n]){const s=e[n];return e.nodeName==="TR"&&s[n]||s}return e},dm=(e,t,n,s)=>{const o=e.create(n,s);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},hE=(e,t,n,s,o)=>{const r=S.fromDom(t),i=S.fromDom(e.create(s,o)),a=n?Ah(r):Nh(r);return er(i,a),n?(Jn(r,i),Mh(i,r)):(xo(r,i),Lt(i,r)),i.dom},lF=(e,t)=>t.links&&e.nodeName==="A",cF=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Sn(e);Ls(n)&&s===r.getRoot()&&(!n.list_block||!yc(t,n.list_block))&&T(Ct(t.childNodes),a=>{fi(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=dm(r,a,i),r.setAttribs(o,dr(e))):o=null}),!(MP(n)&&!yc(n.inline,t))&&r.remove(t,!0)},bE=(e,t,n,s,o)=>{let r;const i=e.dom;if(!bc(i,s,t)&&!lF(s,t))return Ia.keep();const a=s;if(Vt(t)&&t.remove==="all"&&At(t.preserve_attributes)){const c=H(i.getAttribs(a),f=>R(t.preserve_attributes,f.name.toLowerCase()));if(i.removeAllAttribs(a),T(c,f=>i.setAttrib(a,f.name,f.value)),c.length>0)return Ia.rename("span")}if(t.remove!=="all"){fm(t.styles,(f,d)=>{f=nd(ro(f,n),d+""),vn(d)&&(d=f,o=null),(t.remove_similar||!o||yc(Ql(i,o,d),f))&&i.setStyle(a,d,""),r=!0}),r&&i.getAttrib(a,"style")===""&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),fm(t.attributes,(f,d)=>{let p;if(f=ro(f,n),vn(d)&&(d=f,o=null),t.remove_similar||!o||yc(i.getAttrib(o,d),f)){if(d==="class"&&(f=i.getAttrib(a,d),f&&(p="",T(f.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(p+=(p?" ":"")+C)}),p))){i.setAttrib(a,d,p);return}if(iF.test(d)&&a.removeAttribute("data-mce-"+d),d==="style"&&es(["li"])(a)&&i.getStyle(a,"list-style-type")==="none"){a.removeAttribute(d),i.setStyle(a,"list-style-type","none");return}d==="class"&&a.removeAttribute("className"),a.removeAttribute(d)}}),fm(t.classes,f=>{f=ro(f,n),(!o||i.hasClass(o,f))&&i.removeClass(a,f)});const c=i.getAttribs(a);for(let f=0;f<c.length;f++){const d=c[f].nodeName;if(d.indexOf("_")!==0&&d.indexOf("data-")!==0)return Ia.keep()}}return t.remove!=="none"?(cF(e,a,t),Ia.removed()):Ia.keep()},Ci=(e,t,n,s,o)=>bE(e,t,n,s,o).fold(ht,r=>(e.dom.rename(s,r),!0),ut),uF=(e,t,n,s,o)=>{let r;return T(Zl(e.dom,t.parentNode).reverse(),i=>{if(!r&&i.id!=="_start"&&i.id!=="_end"){const a=Ms(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},fF=(e,t,n,s)=>bE(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),dF=(e,t,n,s,o,r,i,a)=>{let c,f,d;const p=e.dom;if(n){const C=n.parentNode;for(let y=s.parentNode;y&&y!==C;y=y.parentNode){c=p.clone(y,!1);for(let w=0;w<t.length&&(c=fF(e,t[w],a,c),c!==null);w++);c&&(f&&c.appendChild(f),d||(d=c),f=c)}r&&(!i.mixed||!p.isBlock(n))&&(s=p.split(n,s)),f&&(o.parentNode.insertBefore(f,o),d.appendChild(o),Vt(i)&&uE(p,i,a,f))}return s},CE=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0];let a=!0;const c=e.dom,f=e.selection,d=x=>{const _=uF(e,x,t,n,o);return dF(e,r,_,x,x,!0,i,n)},p=x=>zn(x)&&Ee(x)&&(x.id==="_start"||x.id==="_end"),C=x=>U(r,_=>Ci(e,_,n,x,x)),y=x=>{let _=!0,P=!1;Ee(x)&&c.getContentEditable(x)&&(_=a,a=c.getContentEditable(x)==="true",P=!0);const O=Ct(x.childNodes);if(a&&!P){const ce=C(x)||U(r,j=>bc(c,x,j)),V=x.parentNode;!ce&&Ne(V)&&sd(i)&&C(V)}if(i.deep&&O.length){for(let M=0;M<O.length;M++)y(O[M]);P&&(a=_)}T(["underline","line-through","overline"],M=>{Ee(x)&&e.dom.getStyle(x,"text-decoration")===M&&x.parentNode&&ty(c,x.parentNode)===M&&Ci(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},null,x)})},w=x=>{const _=c.get(x?"_start":"_end");let P=_[x?"firstChild":"lastChild"];return p(P)&&(P=P[x?"firstChild":"lastChild"]),te(P)&&P.data.length===0&&(P=x?_.previousSibling||_.nextSibling:_.nextSibling||_.previousSibling),c.remove(_,!0),P},v=x=>{let _,P,O=mi(e,x,r,x.collapsed);if(i.split){if(O=ic(O),_=pE(e,O,!0),P=pE(e,O),_!==P){if(_=gE(_,!0),P=gE(P,!1),mE(c,_,P)){const M=h.from(_.firstChild).getOr(_);d(hE(c,M,!0,"span",{id:"_start","data-mce-type":"bookmark"})),w(!0);return}if(mE(c,P,_)){const M=h.from(P.lastChild).getOr(P);d(hE(c,M,!1,"span",{id:"_end","data-mce-type":"bookmark"})),w(!1);return}_=dm(c,_,"span",{id:"_start","data-mce-type":"bookmark"}),P=dm(c,P,"span",{id:"_end","data-mce-type":"bookmark"});const I=c.createRng();I.setStartAfter(_),I.setEndBefore(P),_a(c,I,M=>{T(M,ce=>{!zn(ce)&&!zn(ce.parentNode)&&d(ce)})}),d(_),d(P),_=w(!0),P=w()}else _=P=d(_);O.startContainer=_.parentNode?_.parentNode:_,O.startOffset=c.nodeIndex(_),O.endContainer=P.parentNode?P.parentNode:P,O.endOffset=c.nodeIndex(P)+1}_a(c,O,I=>{T(I,y)})};if(s){if(Xl(s)){const x=c.createRng();x.setStartBefore(s),x.setEndAfter(s),v(x)}else v(s);fd(e,t,s,n);return}if(c.getContentEditable(f.getNode())==="false"){s=f.getNode();for(let x=0;x<r.length&&!(r[x].ceFalseOverride&&Ci(e,r[x],n,s,s));x++);fd(e,t,s,n);return}!f.isCollapsed()||!Vt(i)||pi(e).length?(cd(f,!0,()=>{ld(e,v)}),Vt(i)&&om(e,t,n,f.getStart())&&JC(c,f,f.getRng()),e.nodeChanged()):XI(e,t,n,o),fd(e,t,s,n)},yE=G.each,mF=(e,t,n,s)=>{const o=r=>{if(r.nodeType===1&&r.parentNode&&r.parentNode.nodeType===1){const i=ty(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(G.walk(s,o,"childNodes"),o(s))},pF=(e,t,n,s)=>{t.styles&&t.styles.backgroundColor&&um(s,fE(e,"fontSize"),dE(e,"backgroundColor",ro(t.styles.backgroundColor,n)))},gF=(e,t,n,s)=>{Vt(t)&&(t.inline==="sub"||t.inline==="sup")&&(um(s,fE(e,"fontSize"),dE(e,"fontSize","")),e.remove(e.select(t.inline==="sup"?"sub":"sup",s),!0))},hF=(e,t,n,s)=>{yE(t,o=>{Vt(o)&&yE(e.dom.select(o.inline,s),r=>{!cm(r)||Ci(e,o,n,r,o.exact?r:null)}),oF(e.dom,o,s)})},bF=(e,t,n,s,o)=>{Ms(e,o.parentNode,n,s)&&Ci(e,t,s,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,r=>{if(Ms(e,r,n,s))return Ci(e,t,s,o),!0})},vc=G.each,CF=e=>Ee(e)&&!zn(e)&&!Fs(e)&&!sr(e),yF=(e,t,n,s)=>{if(uR(e)&&Vt(t)){const o=hb(e.schema),r=LI(S.fromDom(n),i=>Fs(i.dom));return Hr(o,s)&&zt(S.fromDom(n.parentNode),!1)&&!r}else return!1},vE=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(y,w=r)=>{if(Ye(w.onformat)&&w.onformat(y,w,n,s),vc(w.styles,(v,x)=>{a.setStyle(y,x,ro(v,n))}),w.styles){const v=a.getAttrib(y,"style");v&&a.setAttrib(y,"data-mce-style",v)}vc(w.attributes,(v,x)=>{a.setAttrib(y,x,ro(v,n))}),vc(w.classes,v=>{v=ro(v,n),a.hasClass(y,v)||a.addClass(y,v)})},d=(y,w)=>{let v=!1;return vc(y,x=>{if(!Pn(x))return!1;if(!(Ne(x.collapsed)&&x.collapsed!==i)&&a.is(w,x.selector)&&!Fs(w))return f(w,x),v=!0,!1}),v},p=y=>{if(me(y)){const w=a.create(y);return f(w),w}else return null},C=(y,w,v)=>{const x=[];let _=!0;const P=r.inline||r.block,O=p(P);_a(y,w,I=>{let M;const ce=V=>{let j=!1,X=_;const J=V.nodeName.toLowerCase(),ve=V.parentNode,ue=ve.nodeName.toLowerCase();if(Ee(V)&&y.getContentEditable(V)&&(X=_,_=y.getContentEditable(V)==="true",j=!0),Pt(V)&&!yF(e,r,V,ue)){M=null,Ls(r)&&y.remove(V);return}if(Ls(r)&&r.wrapper&&Ms(e,V,t,n)){M=null;return}if(_&&!j&&Ls(r)&&!r.wrapper&&Jf(e,J)&&fi(e,ue,P)){const oe=y.rename(V,P);f(oe),x.push(oe),M=null;return}if(Pn(r)){let oe=d(o,V);if(!oe&&Ne(ve)&&sd(r)&&(oe=d(o,ve)),!Vt(r)||oe){M=null;return}}_&&!j&&fi(e,P,J)&&fi(e,ue,P)&&!(!v&&te(V)&&Nl(V.data))&&!Fs(V)&&(!Vt(r)||!y.isBlock(V))?(M||(M=y.clone(O,!1),V.parentNode.insertBefore(M,V),x.push(M)),M.appendChild(V)):(M=null,T(Ct(V.childNodes),ce),j&&(_=X),M=null)};T(I,ce)}),r.links===!0&&T(x,I=>{const M=ce=>{ce.nodeName==="A"&&f(ce,r),T(Ct(ce.childNodes),M)};M(I)}),T(x,I=>{const M=j=>{let X=0;return T(j.childNodes,J=>{!IP(J)&&!zn(J)&&X++}),X},ce=j=>ge(j.childNodes,CF).filter(J=>bc(y,J,r)).map(J=>{const ve=y.clone(J,!1);return f(ve),y.replace(ve,j,!0),y.remove(J,!0),ve}).getOr(j),V=M(I);if((x.length>1||!y.isBlock(I))&&V===0){y.remove(I,!0);return}(Vt(r)||Ls(r)&&r.wrapper)&&(!r.exact&&V===1&&(I=ce(I)),hF(e,o,n,I),bF(e,r,t,n,I),pF(y,r,n,I),mF(y,r,n,I),gF(y,r,n,I),uE(y,r,n,I))})};if(a.getContentEditable(c.getNode())==="false"){s=c.getNode();for(let y=0,w=o.length;y<w;y++){const v=o[y];if(v.ceFalseOverride&&Pn(v)&&a.is(s,v.selector)){f(s,v);break}}vy(e,t,s,n);return}if(r){if(s)if(Xl(s)){if(!d(o,s)){const y=a.createRng();y.setStartBefore(s),y.setEndAfter(s),C(a,mi(e,y,o),!0)}}else C(a,s,!0);else!i||!Vt(r)||pi(e).length?(c.setRng(Qd(c.getRng())),cd(c,!0,()=>{ld(e,(y,w)=>{const v=w?y:mi(e,y,o);C(a,v,!1)})}),JC(a,c,c.getRng()),e.nodeChanged()):YI(e,t,n);sF(t,e)}vy(e,t,s,n)},EE=e=>Fe(e,"vars"),vF=(e,t)=>{e.set({}),t.on("NodeChange",n=>{_E(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=h.from(n.node).map(o=>Xl(o)?o:o.startContainer).bind(o=>Ee(o)?h.some(o):h.from(o.parentElement)).getOrThunk(()=>wE(t));_E(t,s,e.get())})},wE=e=>e.selection.getStart(),xE=(e,t,n,s,o)=>Re(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!Rt(c)},a=>Jv(e,a,n)?!0:s?!1:Ne(e.formatter.matchNode(a,n,o,!0))),SE=(e,t)=>{const n=t!=null?t:wE(e);return H(Zl(e.dom,n),s=>Ee(s)&&!sr(s))},_E=(e,t,n)=>{const s=SE(e,t);yt(n,(o,r)=>{const i=a=>{const c=xE(e,s,r,a.similar,EE(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const d=c.getOr(t);EE(a)?a.callback(f,{node:d,format:r,parents:s}):T(a.callbacks,p=>p(f,{node:d,format:r,parents:s}))}};T([o.withSimilar,o.withoutSimilar],i),T(o.withVars,i)})},EF=(e,t,n,s,o,r)=>{const i=t.get();T(n.split(","),a=>{const c=ft(i,a).getOrThunk(()=>{const d={withSimilar:{state:Ht(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ht(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),f=()=>{const d=SE(e);return xE(e,d,a,o,r).isSome()};if(Rt(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(f())}else c.withVars.push({state:Ht(f()),similar:o,vars:r,callback:s})}),t.set(i)},wF=(e,t,n)=>{const s=e.get();T(t.split(","),o=>ft(s,o).each(r=>{s[o]={withSimilar:mt(_e({},r.withSimilar),{callbacks:H(r.withSimilar.callbacks,i=>i!==n)}),withoutSimilar:mt(_e({},r.withoutSimilar),{callbacks:H(r.withoutSimilar.callbacks,i=>i!==n)}),withVars:H(r.withVars,i=>i.callback!==n)}})),e.set(s)},xF=(e,t,n,s,o,r)=>(t.get()===null&&vF(t,e),EF(e,t,n,s,o,r),{unbind:()=>wF(t,n,s)}),SF=(e,t,n,s)=>{const o=e.formatter.get(t);om(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?CE(e,t,n,s):vE(e,t,n,s)};function Er(e){return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(e)}function mm(e,t){return mm=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},mm(e,t)}function _F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ec(e,t,n){return _F()?Ec=Reflect.construct:Ec=function(o,r,i){var a=[null];a.push.apply(a,r);var c=Function.bind.apply(o,a),f=new c;return i&&mm(f,i.prototype),f},Ec.apply(null,arguments)}function ls(e){return kF(e)||NF(e)||AF(e)||TF()}function kF(e){if(Array.isArray(e))return pm(e)}function NF(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AF(e,t){if(!!e){if(typeof e=="string")return pm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pm(e,t)}}function pm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function TF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var RF=Object.hasOwnProperty,kE=Object.setPrototypeOf,PF=Object.isFrozen,OF=Object.getPrototypeOf,DF=Object.getOwnPropertyDescriptor,_n=Object.freeze,Us=Object.seal,BF=Object.create,NE=typeof Reflect!="undefined"&&Reflect,wc=NE.apply,gm=NE.construct;wc||(wc=function(t,n,s){return t.apply(n,s)}),_n||(_n=function(t){return t}),Us||(Us=function(t){return t}),gm||(gm=function(t,n){return Ec(t,ls(n))});var $F=cs(Array.prototype.forEach),IF=cs(Array.prototype.pop),Fa=cs(Array.prototype.push),xc=cs(String.prototype.toLowerCase),FF=cs(String.prototype.match),Lo=cs(String.prototype.replace),LF=cs(String.prototype.indexOf),MF=cs(String.prototype.trim),kn=cs(RegExp.prototype.test),hm=UF(TypeError);function cs(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return wc(e,t,s)}}function UF(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return gm(e,n)}}function Je(e,t){kE&&kE(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=xc(s);o!==s&&(PF(t)||(t[n]=o),s=o)}e[s]=!0}return e}function wr(e){var t=BF(null),n;for(n in e)wc(RF,e,[n])&&(t[n]=e[n]);return t}function Sc(e,t){for(;e!==null;){var n=DF(e,t);if(n){if(n.get)return cs(n.get);if(typeof n.value=="function")return cs(n.value)}e=OF(e)}function s(o){return console.warn("fallback value for",o),null}return s}var AE=_n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),bm=_n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cm=_n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zF=_n(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ym=_n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),HF=_n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TE=_n(["#text"]),RE=_n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vm=_n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PE=_n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_c=_n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VF=Us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),WF=Us(/<%[\w\W]*|[\w\W]*%>/gm),jF=Us(/^data-[\-\w.\u00B7-\uFFFF]/),qF=Us(/^aria-[\-\w]+$/),KF=Us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GF=Us(/^(?:\w+script|data):/i),YF=Us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XF=Us(/^html$/i),QF=function(){return typeof window=="undefined"?null:window},ZF=function(t,n){if(Er(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function OE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QF(),t=function($){return OE($)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,f=e.NamedNodeMap,d=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,p=e.HTMLFormElement,C=e.DOMParser,y=e.trustedTypes,w=a.prototype,v=Sc(w,"cloneNode"),x=Sc(w,"nextSibling"),_=Sc(w,"childNodes"),P=Sc(w,"parentNode");if(typeof r=="function"){var O=s.createElement("template");O.content&&O.content.ownerDocument&&(s=O.content.ownerDocument)}var I=ZF(y,n),M=I?I.createHTML(""):"",ce=s,V=ce.implementation,j=ce.createNodeIterator,X=ce.createDocumentFragment,J=ce.getElementsByTagName,ve=n.importNode,ue={};try{ue=wr(s).documentMode?s.documentMode:{}}catch{}var oe={};t.isSupported=typeof P=="function"&&V&&typeof V.createHTMLDocument!="undefined"&&ue!==9;var He=VF,qe=WF,et=jF,Ot=qF,Y=GF,he=YF,Ie=KF,Be=null,It=Je({},[].concat(ls(AE),ls(bm),ls(Cm),ls(ym),ls(TE))),ne=null,we=Je({},[].concat(ls(RE),ls(vm),ls(PE),ls(_c))),fe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,$e=null,Me=!0,Se=!0,xe=!1,Ke=!1,Ge=!1,Dt=!1,nt=!1,Le=!1,st=!1,en=!1,tn=!0,jt=!0,ps=!1,bn={},an=null,Wn=Je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Uo=null,Vs=Je({},["audio","video","img","source","image","track"]),Ws=null,gs=Je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Tr="http://www.w3.org/1998/Math/MathML",zo="http://www.w3.org/2000/svg",jn="http://www.w3.org/1999/xhtml",hs=jn,Rr=!1,bs,gu=["application/xhtml+xml","text/html"],Wp="text/html",fo,mo=null,l_=s.createElement("form"),jp=function($){return $ instanceof RegExp||$ instanceof Function},hu=function($){mo&&mo===$||((!$||Er($)!=="object")&&($={}),$=wr($),Be="ALLOWED_TAGS"in $?Je({},$.ALLOWED_TAGS):It,ne="ALLOWED_ATTR"in $?Je({},$.ALLOWED_ATTR):we,Ws="ADD_URI_SAFE_ATTR"in $?Je(wr(gs),$.ADD_URI_SAFE_ATTR):gs,Uo="ADD_DATA_URI_TAGS"in $?Je(wr(Vs),$.ADD_DATA_URI_TAGS):Vs,an="FORBID_CONTENTS"in $?Je({},$.FORBID_CONTENTS):Wn,ee="FORBID_TAGS"in $?Je({},$.FORBID_TAGS):{},$e="FORBID_ATTR"in $?Je({},$.FORBID_ATTR):{},bn="USE_PROFILES"in $?$.USE_PROFILES:!1,Me=$.ALLOW_ARIA_ATTR!==!1,Se=$.ALLOW_DATA_ATTR!==!1,xe=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=$.SAFE_FOR_TEMPLATES||!1,Ge=$.WHOLE_DOCUMENT||!1,Le=$.RETURN_DOM||!1,st=$.RETURN_DOM_FRAGMENT||!1,en=$.RETURN_TRUSTED_TYPE||!1,nt=$.FORCE_BODY||!1,tn=$.SANITIZE_DOM!==!1,jt=$.KEEP_CONTENT!==!1,ps=$.IN_PLACE||!1,Ie=$.ALLOWED_URI_REGEXP||Ie,hs=$.NAMESPACE||jn,$.CUSTOM_ELEMENT_HANDLING&&jp($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(fe.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&jp($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(fe.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(fe.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bs=gu.indexOf($.PARSER_MEDIA_TYPE)===-1?bs=Wp:bs=$.PARSER_MEDIA_TYPE,fo=bs==="application/xhtml+xml"?function(ie){return ie}:xc,Ke&&(Se=!1),st&&(Le=!0),bn&&(Be=Je({},ls(TE)),ne=[],bn.html===!0&&(Je(Be,AE),Je(ne,RE)),bn.svg===!0&&(Je(Be,bm),Je(ne,vm),Je(ne,_c)),bn.svgFilters===!0&&(Je(Be,Cm),Je(ne,vm),Je(ne,_c)),bn.mathMl===!0&&(Je(Be,ym),Je(ne,PE),Je(ne,_c))),$.ADD_TAGS&&(Be===It&&(Be=wr(Be)),Je(Be,$.ADD_TAGS)),$.ADD_ATTR&&(ne===we&&(ne=wr(ne)),Je(ne,$.ADD_ATTR)),$.ADD_URI_SAFE_ATTR&&Je(Ws,$.ADD_URI_SAFE_ATTR),$.FORBID_CONTENTS&&(an===Wn&&(an=wr(an)),Je(an,$.FORBID_CONTENTS)),jt&&(Be["#text"]=!0),Ge&&Je(Be,["html","head","body"]),Be.table&&(Je(Be,["tbody"]),delete ee.tbody),_n&&_n($),mo=$)},qp=Je({},["mi","mo","mn","ms","mtext"]),po=Je({},["foreignobject","desc","title","annotation-xml"]),bu=Je({},["title","style","font","a","script"]),A=Je({},bm);Je(A,Cm),Je(A,zF);var B=Je({},ym);Je(B,HF);var q=function($){var ie=P($);(!ie||!ie.tagName)&&(ie={namespaceURI:jn,tagName:"template"});var ke=xc($.tagName),xt=xc(ie.tagName);return $.namespaceURI===zo?ie.namespaceURI===jn?ke==="svg":ie.namespaceURI===Tr?ke==="svg"&&(xt==="annotation-xml"||qp[xt]):Boolean(A[ke]):$.namespaceURI===Tr?ie.namespaceURI===jn?ke==="math":ie.namespaceURI===zo?ke==="math"&&po[xt]:Boolean(B[ke]):$.namespaceURI===jn?ie.namespaceURI===zo&&!po[xt]||ie.namespaceURI===Tr&&!qp[xt]?!1:!B[ke]&&(bu[ke]||!A[ke]):!1},W=function($){Fa(t.removed,{element:$});try{$.parentNode.removeChild($)}catch{try{$.outerHTML=M}catch{$.remove()}}},Ce=function($,ie){try{Fa(t.removed,{attribute:ie.getAttributeNode($),from:ie})}catch{Fa(t.removed,{attribute:null,from:ie})}if(ie.removeAttribute($),$==="is"&&!ne[$])if(Le||st)try{W(ie)}catch{}else try{ie.setAttribute($,"")}catch{}},We=function($){var ie,ke;if(nt)$="<remove></remove>"+$;else{var xt=FF($,/^[\r\n\t ]+/);ke=xt&&xt[0]}bs==="application/xhtml+xml"&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");var Dn=I?I.createHTML($):$;if(hs===jn)try{ie=new C().parseFromString(Dn,bs)}catch{}if(!ie||!ie.documentElement){ie=V.createDocument(hs,"template",null);try{ie.documentElement.innerHTML=Rr?"":Dn}catch{}}var Cn=ie.body||ie.documentElement;return $&&ke&&Cn.insertBefore(s.createTextNode(ke),Cn.childNodes[0]||null),hs===jn?J.call(ie,Ge?"html":"body")[0]:Ge?ie.documentElement:Cn},Ve=function($){return j.call($.ownerDocument||$,$,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},An=function($){return $ instanceof p&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof d)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function")},Cs=function($){return Er(i)==="object"?$ instanceof i:$&&Er($)==="object"&&typeof $.nodeType=="number"&&typeof $.nodeName=="string"},go=function($,ie,ke){!oe[$]||$F(oe[$],function(xt){xt.call(t,ie,ke,mo)})},c_=function($){var ie;if(go("beforeSanitizeElements",$,null),An($)||kn(/[\u0080-\uFFFF]/,$.nodeName))return W($),!0;var ke=fo($.nodeName);if(go("uponSanitizeElement",$,{tagName:ke,allowedTags:Be}),$.hasChildNodes()&&!Cs($.firstElementChild)&&(!Cs($.content)||!Cs($.content.firstElementChild))&&kn(/<[/\w]/g,$.innerHTML)&&kn(/<[/\w]/g,$.textContent)||ke==="select"&&kn(/<template/i,$.innerHTML))return W($),!0;if(!Be[ke]||ee[ke]){if(!ee[ke]&&f_(ke)&&(fe.tagNameCheck instanceof RegExp&&kn(fe.tagNameCheck,ke)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(ke)))return!1;if(jt&&!an[ke]){var xt=P($)||$.parentNode,Dn=_($)||$.childNodes;if(Dn&&xt)for(var Cn=Dn.length,ln=Cn-1;ln>=0;--ln)xt.insertBefore(v(Dn[ln],!0),x($))}return W($),!0}return $ instanceof a&&!q($)||(ke==="noscript"||ke==="noembed")&&kn(/<\/no(script|embed)/i,$.innerHTML)?(W($),!0):(Ke&&$.nodeType===3&&(ie=$.textContent,ie=Lo(ie,He," "),ie=Lo(ie,qe," "),$.textContent!==ie&&(Fa(t.removed,{element:$.cloneNode()}),$.textContent=ie)),go("afterSanitizeElements",$,null),!1)},u_=function($,ie,ke){if(tn&&(ie==="id"||ie==="name")&&(ke in s||ke in l_))return!1;if(!(Se&&!$e[ie]&&kn(et,ie))){if(!(Me&&kn(Ot,ie))){if(!ne[ie]||$e[ie]){if(!(f_($)&&(fe.tagNameCheck instanceof RegExp&&kn(fe.tagNameCheck,$)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck($))&&(fe.attributeNameCheck instanceof RegExp&&kn(fe.attributeNameCheck,ie)||fe.attributeNameCheck instanceof Function&&fe.attributeNameCheck(ie))||ie==="is"&&fe.allowCustomizedBuiltInElements&&(fe.tagNameCheck instanceof RegExp&&kn(fe.tagNameCheck,ke)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(ke))))return!1}else if(!Ws[ie]){if(!kn(Ie,Lo(ke,he,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&$!=="script"&&LF(ke,"data:")===0&&Uo[$])){if(!(xe&&!kn(Y,Lo(ke,he,"")))){if(ke)return!1}}}}}}return!0},f_=function($){return $.indexOf("-")>0},d_=function($){var ie,ke,xt,Dn;go("beforeSanitizeAttributes",$,null);var Cn=$.attributes;if(!!Cn){var ln={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};for(Dn=Cn.length;Dn--;){ie=Cn[Dn];var Cu=ie,cn=Cu.name,m_=Cu.namespaceURI;ke=cn==="value"?ie.value:MF(ie.value),xt=fo(cn);var j4=ke;if(ln.attrName=xt,ln.attrValue=ke,ln.keepAttr=!0,ln.forceKeepAttr=void 0,go("uponSanitizeAttribute",$,ln),ke=ln.attrValue,!ln.forceKeepAttr){if(!ln.keepAttr){Ce(cn,$);continue}if(kn(/\/>/i,ke)){Ce(cn,$);continue}Ke&&(ke=Lo(ke,He," "),ke=Lo(ke,qe," "));var q4=fo($.nodeName);if(!u_(q4,xt,ke)){Ce(cn,$);continue}if(ke!==j4)try{m_?$.setAttributeNS(m_,cn,ke):$.setAttribute(cn,ke)}catch{Ce(cn,$)}}}go("afterSanitizeAttributes",$,null)}},W4=function Pe($){var ie,ke=Ve($);for(go("beforeSanitizeShadowDOM",$,null);ie=ke.nextNode();)go("uponSanitizeShadowNode",ie,null),!c_(ie)&&(ie.content instanceof o&&Pe(ie.content),d_(ie));go("afterSanitizeShadowDOM",$,null)};return t.sanitize=function(Pe,$){var ie,ke,xt,Dn,Cn;if(Rr=!Pe,Rr&&(Pe="<!-->"),typeof Pe!="string"&&!Cs(Pe)){if(typeof Pe.toString!="function")throw hm("toString is not a function");if(Pe=Pe.toString(),typeof Pe!="string")throw hm("dirty is not a string, aborting")}if(!t.isSupported){if(Er(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Pe=="string")return e.toStaticHTML(Pe);if(Cs(Pe))return e.toStaticHTML(Pe.outerHTML)}return Pe}if(Dt||hu($),t.removed=[],typeof Pe=="string"&&(ps=!1),ps){if(Pe.nodeName){var ln=fo(Pe.nodeName);if(!Be[ln]||ee[ln])throw hm("root node is forbidden and cannot be sanitized in-place")}}else if(Pe instanceof i)ie=We("<!---->"),ke=ie.ownerDocument.importNode(Pe,!0),ke.nodeType===1&&ke.nodeName==="BODY"||ke.nodeName==="HTML"?ie=ke:ie.appendChild(ke);else{if(!Le&&!Ke&&!Ge&&Pe.indexOf("<")===-1)return I&&en?I.createHTML(Pe):Pe;if(ie=We(Pe),!ie)return Le?null:en?M:""}ie&&nt&&W(ie.firstChild);for(var Cu=Ve(ps?Pe:ie);xt=Cu.nextNode();)xt.nodeType===3&&xt===Dn||c_(xt)||(xt.content instanceof o&&W4(xt.content),d_(xt),Dn=xt);if(Dn=null,ps)return Pe;if(Le){if(st)for(Cn=X.call(ie.ownerDocument);ie.firstChild;)Cn.appendChild(ie.firstChild);else Cn=ie;return ne.shadowroot&&(Cn=ve.call(n,Cn,!0)),Cn}var cn=Ge?ie.outerHTML:ie.innerHTML;return Ge&&Be["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&kn(XF,ie.ownerDocument.doctype.name)&&(cn="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+cn),Ke&&(cn=Lo(cn,He," "),cn=Lo(cn,qe," ")),I&&en?I.createHTML(cn):cn},t.setConfig=function(Pe){hu(Pe),Dt=!0},t.clearConfig=function(){mo=null,Dt=!1},t.isValidAttribute=function(Pe,$,ie){mo||hu({});var ke=fo(Pe),xt=fo($);return u_(ke,xt,ie)},t.addHook=function(Pe,$){typeof $=="function"&&(oe[Pe]=oe[Pe]||[],Fa(oe[Pe],$))},t.removeHook=function(Pe){if(oe[Pe])return IF(oe[Pe])},t.removeHooks=function(Pe){oe[Pe]&&(oe[Pe]=[])},t.removeAllHooks=function(){oe={}},t}var JF=OE();const DE=G.explode,BE=()=>{const e={};return{addFilter:(o,r)=>{T(DE(o),i=>{Fe(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>Gu(e),removeFilter:(o,r)=>{T(DE(o),i=>{if(Fe(e,i))if(Ne(r)){const a=e[i],c=H(a.callbacks,f=>f!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},eL=(e,t)=>{T(t,n=>{e.attr(n,null)})},tL=(e,t,n)=>{e.addNodeFilter("font",s=>{T(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&(r["font-size"]=n[parseInt(o.attr("size"),10)-1]),o.name="span",o.attr("style",t.serialize(r)),eL(o,["color","face","size"])})})},nL=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";T(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},sL=(e,t,n)=>{const s=_f();t.convert_fonts_to_spans&&tL(e,s,G.explode(t.font_size_legacy_values)),nL(e,n,s)},oL=(e,t,n)=>{t.inline_styles&&sL(e,t,n)},rL=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),iL=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Em=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?iL(s):decodeURIComponent(s);return h.some({type:o[1],data:i,base64Encoded:r})}else return h.none()},$E=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return h.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return h.some(new Blob([o],{type:e}))},aL=e=>new Promise((t,n)=>{Em(e).bind(({type:s,data:o,base64Encoded:r})=>$E(s,o,r)).fold(()=>n("Invalid data URI"),t)}),lL=e=>Gt(e,"blob:")?rL(e):Gt(e,"data:")?aL(e):Promise.reject("Unknown URI format"),IE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{n(s.error.message)},s.readAsDataURL(e)});let cL=0;const uL=e=>(e||"blobid")+cL++,FE=(e,t,n)=>Em(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return h.none();{const i=r?s:btoa(s);return n(i,o)}}),LE=(e,t,n)=>{const s=e.create(uL(),t,n);return e.add(s),s},ME=(e,t,n=!1)=>FE(t,n,(s,o)=>h.from(e.getByData(s,o)).orThunk(()=>$E(o,s).map(r=>LE(e,r,s)))),fL=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Gt(t,"blob:")){const s=e.getByUri(t);return Ne(s)?Promise.resolve(s):lL(t).then(o=>IE(o).then(r=>FE(r,!1,i=>h.some(LE(e,o,i))).getOrThunk(n)))}else return Gt(t,"data:")?ME(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},dL=e=>Ne(e.attr("data-mce-bogus")),mL=e=>e.attr("src")===Ze.transparentSrc||Ne(e.attr("data-mce-placeholder")),pL=(e,t)=>{const{blob_cache:n}=t,s=o=>{const r=o.attr("src");mL(o)||dL(o)||ME(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};n&&e.addAttributeFilter("src",o=>T(o,s))},gL=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(s,o,r)=>{const i=G.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;for(let f=0,d=s.length;f<d;f++){let p=s[f],C=p.parent;if(i[p.parent.name]&&p===C.lastChild){let y=p.prev;for(;y;){const w=y.name;if(w!=="span"||y.attr("data-mce-type")!=="bookmark"){w==="br"&&(p=null);break}y=y.prev}if(p&&(p.remove(),$a(n,a,c,C))){const w=n.getElementRule(C.name);w&&(w.removeEmpty?C.remove():w.paddEmpty&&Gd(t,r,i,C))}}else{let y=p;for(;C&&C.firstChild===y&&C.lastChild===y&&(y=C,!i[C.name]);)C=C.parent;if(y===C){const w=new gn("#text",3);w.value=Zt,p.replace(w)}}}}),e.addAttributeFilter("href",s=>{let o=s.length;const r=a=>a.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=a=>{const c=a?G.trim(a):"";return/\b(noopener)\b/g.test(c)?c:r(c)};if(!t.allow_unsafe_link_target)for(;o--;){const a=s[o];a.name==="a"&&a.attr("target")==="_blank"&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let o=s.length,r,i,a,c;for(;o--;)if(c=s[o],c.name==="a"&&c.firstChild&&!c.attr("href")){a=c.parent,r=c.lastChild;do i=r.prev,a.insert(r,c),r=i;while(r)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let o=s.length,r,i;for(;o--;)if(r=s[o],i=r.parent,i.name==="ul"||i.name==="ol")if(r.prev&&r.prev.name==="li")r.prev.append(r);else{const a=new gn("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",s=>{const o=n.getValidClasses();let r=s.length;for(;r--;){const i=s[r],a=i.attr("class").split(" ");let c="";for(let f=0;f<a.length;f++){const d=a[f];let p=!1,C=o["*"];C&&C[d]&&(p=!0),C=o[i.name],!p&&C&&C[d]&&(p=!0),p&&(c&&(c+=" "),c+=d)}c.length||(c=null),i.attr("class",c)}}),pL(e,t)},UE=G.each,hL=G.trim,bL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),CL={ftp:21,http:80,https:443,mailto:25},yL=["img","video"],vL=(e,t)=>Ne(e)?!e:Ne(t)?!R(yL,t):!0,EL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},zE=(e,t,n)=>{const s=EL(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?vL(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class us{constructor(t,n){t=hL(t),this.settings=n||{};const s=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=this.settings.base_uri?this.settings.base_uri.path:new us(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2]}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);UE(bL,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=ko.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!zE(s,o,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href:n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(t){let n;if(t==="./")return t;const s=new us(t,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const o=this.getURI(),r=s.getURI();return o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r?o:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(t,n){const s=new us(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=CL[this.protocol];if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s,o=0,r=[],i;const a=/\/$/.test(n)?"/":"";let c=t.split("/");const f=n.split("/");for(UE(c,d=>{d&&r.push(d)}),c=r,s=f.length-1,r=[];s>=0;s--)if(!(f[s].length===0||f[s]===".")){if(f[s]===".."){o++;continue}if(o>0){o--;continue}r.push(f[s])}return s=c.length-o,s<=0?i=at(r).join("/"):i=c.slice(0,s).join("/")+"/"+at(r).join("/"),i.indexOf("/")!==0&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const HE=G.makeMap,VE=G.extend,wL={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},xL=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),wm="data-mce-type",SL=(e,t)=>{const n=_e({},wL);return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},_L=(e,t)=>{const n=JF(),s=e.validate;let o=0;return n.addHook("uponSanitizeElement",(r,i)=>{var a,c;r.nodeType===fh&&!e.allow_conditional_comments&&/^\[if/i.test(r.nodeValue)&&(r.nodeValue=" "+r.nodeValue);const f=i.tagName;if(r.nodeType!==Gi||f==="body")return;const d=S.fromDom(r),p=Yi(d,wm),C=Fn(d,"data-mce-bogus");if(!p&&me(C)){C==="all"?Tt(d):tr(d);return}const y=t.getElementRule(f.toLowerCase());if(s&&!y){tr(d);return}else i.allowedTags[f]=!0;if(s&&!p){if(T((a=y.attributesForced)!==null&&a!==void 0?a:[],w=>{Yt(d,w.name,w.value==="{$uid}"?`mce_${o++}`:w.value)}),T((c=y.attributesDefault)!==null&&c!==void 0?c:[],w=>{Yi(d,w.name)||Yt(d,w.name,w.value==="{$uid}"?`mce_${o++}`:w.value)}),y.attributesRequired&&!U(y.attributesRequired,w=>Yi(d,w))){tr(d);return}if(y.removeEmptyAttrs&&RN(d)){tr(d);return}y.outputName&&y.outputName!==f.toLowerCase()&&KT(d,y.outputName)}}),n.addHook("uponSanitizeAttribute",(r,i)=>{const a=r.tagName.toLowerCase(),{attrName:c,attrValue:f}=i;i.keepAttr=!s||t.isValid(a,c)||Gt(c,"data-")||Gt(c,"aria-"),c in xL&&zE(e,f,a)&&(i.keepAttr=!1),i.keepAttr?(i.allowedAttributes[c]=!0,c in t.getBoolAttrs()&&(i.attrValue=c),e.allow_svg_data_urls&&Gt(f,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):r.hasAttribute(wm)&&(c==="id"||c==="class"||c==="style")&&(i.forceKeepAttr=!0)}),n},WE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],f=new gn(c.nodeName.toLowerCase(),c.nodeType);if(Ee(c)){const d=c.attributes;for(let p=0,C=d.length;p<C;p++){const y=d[p];f.attr(y.name,y.value)}}else te(c)?(f.value=c.data,o&&(f.raw=!0)):(ff(c)||mA(c)||pA(c))&&(f.value=c.data);WE(f,c,n),e.append(f)}},kL=(e,t,n)=>{const s=[];for(let o=e,r=o;Ne(o);r=o,o=o.walk())T(t,i=>i(o)),Ft(o.parent)&&o!==e?o=r:s.push(o);for(let o=s.length-1;o>=0;o--){const r=s[o];T(n,i=>i(r))}},NL=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=VE(HE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=hb(t),f=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,C=_=>{for(_=_.parent;Ne(_);){if(_.name in i)return!0;_=_.parent}return!1},y=_=>{let P=_;for(;Ne(P);){if(P.name in c)return $a(t,r,i,P);P=P.parent}return!1},w=(_,P)=>{const O=P?_.prev:_.next;return Ne(O)?!1:_.parent.name in a&&(_.parent!==e||s.isRootContent)};return[_=>{if(_.type===3&&!C(_)){let P=_.value;P=P.replace(f," "),(J$(_.prev,a)||w(_,!0))&&(P=P.replace(d,"")),P.length===0?_.remove():_.value=P}},_=>{var P;if(_.type===1){const O=t.getElementRule(_.name);if(o&&O){const I=$a(t,r,i,_);O.paddInEmptyBlock&&I&&y(_)?Gd(n,s,a,_):O.removeEmpty&&I?a[_.name]?_.remove():_.unwrap():O.paddEmpty&&(I||Q$(_))&&Gd(n,s,a,_)}}else if(_.type===3&&!C(_)){let O=_.value;(a[(P=_.next)===null||P===void 0?void 0:P.name]||w(_,!1))&&(O=O.replace(p,"")),O.length===0?_.remove():_.value=O}}]},AL=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},yi=(e={},t=Ao())=>{const n=BE(),s=BE(),o=_e({validate:!0,root_name:"body"},e),r=new DOMParser,i=_L(o,t),a=(P,O,I="html")=>{const M=I==="xhtml"?"application/xhtml+xml":"text/html",ce=Fe(t.getSpecialElements(),O.toLowerCase()),V=ce?`<${O}>${P}</${O}>`:P,j=I==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${V}</body></html>`:`<body>${V}</body>`,X=r.parseFromString(j,M).body;return i.sanitize(X,SL(o,M)),i.removed=[],ce?X.firstChild:X},c=n.addFilter,f=n.getFilters,d=n.removeFilter,p=s.addFilter,C=s.getFilters,y=s.removeFilter,w=(P,O)=>{const I=P.parent;I&&t.children[P.name]&&!t.isValidChild(I.name,P.name)&&O.push(P)},v=(P,O)=>{const I=VE(HE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),M=/^[ \t\r\n]+/,ce=/[ \t\r\n]+$/;let V=P.firstChild,j=null;const X=J=>{J&&(V=J.firstChild,V&&V.type===3&&(V.value=V.value.replace(M,"")),V=J.lastChild,V&&V.type===3&&(V.value=V.value.replace(ce,"")))};if(!!t.isValidChild(P.name,O.toLowerCase())){for(;V;){const J=V.next;V.type===3||V.type===1&&V.name!=="p"&&!I[V.name]&&!V.attr(wm)?(j||(j=new gn(O,1),j.attr(o.forced_root_block_attrs),P.insert(j,V)),j.append(V)):(X(j),j=null),V=J}X(j)}},_={schema:t,addAttributeFilter:p,getAttributeFilters:C,removeAttributeFilter:y,addNodeFilter:c,getNodeFilters:f,removeNodeFilter:d,parse:(P,O={})=>{var I;const M=o.validate,ce=(I=O.context)!==null&&I!==void 0?I:o.root_name,V=a(P,ce,O.format),j=new gn(ce,11);WE(j,V,t.getSpecialElements());const[X,J]=NL(j,t,o,O),ve=[],ue=M?et=>w(et,ve):De,oe={nodes:{},attributes:{}},He=et=>Kv(f(),C(),et,oe);if(kL(j,[X,He],[J,ue]),ve.reverse(),M&&ve.length>0)if(O.context){const{pass:et,fail:Ot}=be(ve,Y=>Y.parent===j);Xd(Ot,t,He),O.invalid=et.length>0}else Xd(ve,t,He);const qe=AL(o,O);return qe&&(j.name==="body"||O.isRootContent)&&v(j,qe),O.invalid||Gv(oe,O),j}};return gL(_,o),oL(_,o,t),_},TL=e=>hc(e)?Do({validate:!1}).serialize(e):e,jE=(e,t)=>{const n=TL(e),s=t(n);if(s.isDefaultPrevented())return s;if(hc(e))if(s.content!==n){const o=yi({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return mt(_e({},s),{content:o})}else return mt(_e({},s),{content:e});else return s},qE=(e,t)=>{if(t.no_events)return mn.value(t);{const n=gO(e,t);return n.isDefaultPrevented()?mn.error(wy(e,_e({content:""},n)).content):mn.value(n)}},KE=(e,t,n)=>n.no_events?t:jE(t,o=>wy(e,mt(_e({},n),{content:o}))).content,xm=(e,t)=>{if(t.no_events)return mn.value(t);{const n=jE(t.content,s=>pO(e,mt(_e({},t),{content:s})));return n.isDefaultPrevented()?(Ey(e,n),mn.error(void 0)):mn.value(n)}},Sm=(e,t,n)=>{n.no_events||Ey(e,mt(_e({},n),{content:t}))},_m=(e,t,n)=>({element:e,width:t,rows:n}),GE=(e,t)=>({element:e,cells:t}),RL=(e,t)=>({x:e,y:t}),YE=(e,t)=>{const n=parseInt(Fn(e,t),10);return isNaN(n)?1:n},PL=(e,t,n,s,o)=>{const r=YE(o,"rowspan"),i=YE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=GE(Rb(s),[]));for(let f=t;f<t+i;f++){const d=a[c].cells;d[f]=c===n&&f===t?o:ri(o)}}},OL=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},DL=(e,t,n)=>{for(;OL(e,t,n);)t++;return t},XE=e=>Q(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),QE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(ot(o[r],t))return h.some(RL(r,s))}return h.none()},ZE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(GE(i[a].element,f))}return r},BL=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?ZE(e,s,o,r,i):ZE(e,s,i,r,o);return _m(e.element,XE(a),a)},$L=(e,t)=>{const n=ri(e.element),s=S.fromTag("tbody");return er(s,t),Lt(n,s),n},IL=e=>z(e.rows,t=>{const n=z(t.cells,o=>{const r=Rb(o);return Xt(r,"colspan"),Xt(r,"rowspan"),r}),s=ri(t.element);return er(s,n),s}),FL=e=>{const t=_m(ri(e),0,[]);return T(xn(e,"tr"),(n,s)=>{T(xn(n,"td,th"),(o,r)=>{PL(t,DL(t,r,s),s,n,o)})}),_m(t.element,XE(t.rows),t.rows)},LL=e=>$L(e,IL(e)),ML=(e,t,n)=>QE(e,t).bind(s=>QE(e,n).map(o=>BL(e,s,o))),UL=e=>ge(e,t=>Et(t)==="ul"||Et(t)==="ol"),zL=(e,t)=>ge(e,n=>Et(n)==="li"&&id(n,t)).fold(K([]),n=>UL(e).map(s=>{const o=S.fromTag(Et(s)),r=ji(Fh(s),(i,a)=>Gt(a,"list-style"));return yl(o,r),[S.fromTag("li"),o]}).getOr([])),HL=(e,t)=>{const n=Q(t,(s,o)=>(Lt(o,s),o),e);return t.length>0?gd([n]):n},VL=e=>ra(e)?Zn(e).filter(gf).fold(K([]),t=>[e,t]):gf(e)?[e]:[],WL=(e,t)=>{const n=S.fromDom(t.commonAncestorContainer),s=ao(n,e),o=H(s,BA),r=zL(s,t),i=o.concat(r.length?r:VL(n));return z(i,ri)},JE=()=>gd([]),jL=(e,t)=>HL(S.fromDom(t.cloneContents()),WL(e,t)),qL=(e,t)=>sa(t,"table",re(ot,e)),KL=(e,t)=>qL(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=FL(n);return ML(r,s,o).map(i=>gd([LL(i)]))}).getOrThunk(JE),GL=(e,t)=>t.length>0&&t[0].collapsed?JE():jL(e,t[0]),YL=(e,t)=>{const n=fy(t,e);return n.length>0?KL(e,n):GL(e,t)},kc=(e,t)=>t>=0&&t<e.length&&Sa(e.charAt(t)),e0=e=>_o(e.innerText),XL=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),QL=e=>h.from(e.selection.getRng()).map(t=>{const n=h.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),o=XL(n),r=e.dom.add(s,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=e0(r),a=_o(r.textContent);if(e.dom.remove(r),kc(a,0)||kc(a,a.length-1)){const c=n.getOr(s),f=e0(c),d=f.indexOf(i);if(d===-1)return i;{const p=kc(f,d-1),C=kc(f,d+i.length);return(p?" ":"")+i+(C?" ":"")}}else return i}).getOr(""),ZL=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Nd(e,od(o)),i=t.contextual?YL(S.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},JL=(e,t)=>{if(t.format==="text")return QL(e);{const n=ZL(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},eM=(e,t)=>mt(_e({},e),{format:t,get:!0,selection:!0,getInner:!0}),tM=(e,t,n={})=>{const s=eM(n,t);return qE(e,s).fold(St,o=>{const r=JL(e,o);return KE(e,r,o)})},km=0,t0=1,n0=2,nM=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,C)=>({start:d,end:p,diag:C}),i=(d,p,C,y,w)=>{const v=c(d,p,C,y);if(v===null||v.start===p&&v.diag===p-y||v.end===d&&v.diag===d-C){let x=d,_=C;for(;x<p||_<y;)x<p&&_<y&&e[x]===t[_]?(w.push([km,e[x]]),++x,++_):p-d>y-C?(w.push([n0,e[x]]),++x):(w.push([t0,t[_]]),++_)}else{i(d,v.start,C,v.start-v.diag,w);for(let x=v.start;x<v.end;++x)w.push([km,e[x]]);i(v.end,p,v.end-v.diag,y,w)}},a=(d,p,C,y)=>{let w=d;for(;w-p<y&&w<C&&e[w]===t[w-p];)++w;return r(d,w,p)},c=(d,p,C,y)=>{const w=p-d,v=y-C;if(w===0||v===0)return null;const x=w-v,_=v+w,P=(_%2===0?_:_+1)/2;s[1+P]=d,o[1+P]=p+1;let O,I,M,ce,V;for(O=0;O<=P;++O){for(I=-O;I<=O;I+=2){for(M=I+P,I===-O||I!==O&&s[M-1]<s[M+1]?s[M]=s[M+1]:s[M]=s[M-1]+1,ce=s[M],V=ce-d+C-I;ce<p&&V<y&&e[ce]===t[V];)s[M]=++ce,++V;if(x%2!==0&&x-O<=I&&I<=x+O&&o[M-x]<=s[M])return a(o[M-x],I+d-C,p,y)}for(I=x-O;I<=x+O;I+=2){for(M=I+P-x,I===x-O||I!==x+O&&o[M+1]<=o[M-1]?o[M]=o[M+1]-1:o[M]=o[M-1],ce=o[M]-1,V=ce-d+C-I;ce>=d&&V>=C&&e[ce]===t[V];)o[M]=ce--,V--;if(x%2===0&&-O<=I&&I<=O&&o[M]<=s[M+x])return a(o[M],I+d-C,p,y)}}},f=[];return i(0,e.length,0,t.length,f),f},s0=e=>Ee(e)?e.outerHTML:te(e)?ko.encodeRaw(e.data,!1):ff(e)?"<!--"+e.data+"-->":"",sM=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},oM=(e,t,n)=>{const s=sM(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];o.parentNode.insertBefore(s,o)}else e.appendChild(s)},rM=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}},iM=(e,t)=>{let n=0;T(e,s=>{s[0]===km?n++:s[0]===t0?(oM(t,s[1],n),n++):s[0]===n0&&rM(t,n)})},aM=e=>H(z(Ct(e.childNodes),s0),t=>t.length>0),lM=(e,t)=>{const n=z(Ct(t.childNodes),s0);return iM(nM(n,e),t),t},cM=Yo(()=>document.implementation.createHTMLDocument("undo")),uM=e=>e.indexOf("</iframe>")!==-1,fM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),dM=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Nc=e=>{const t=aM(e.getBody()),n=je(t,o=>{const r=rv(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return uM(s)?fM(n):dM(s)},Nm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?lM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:Ne(s)&&qC(s)?!s.isFakeCaret:!0}),e.selection.moveToBookmark(s)},Am=e=>e.type==="fragmented"?e.fragments.join(""):e.content,o0=e=>{const t=S.fromTag("body",cM());return af(t,Am(e)),T(xn(t,"*[data-mce-bogus]"),tr),Uh(t)},mM=(e,t)=>Am(e)===Am(t),pM=(e,t)=>o0(e)===o0(t),Tm=(e,t)=>!e||!t?!1:mM(e,t)?!0:pM(e,t),Rm=e=>e.get()===0,Ac=(e,t,n)=>{Rm(n)&&(e.typing=t)},r0=(e,t)=>{e.typing&&(Ac(e,!1,t),e.add())},gM=e=>{e.typing&&(e.typing=!1,e.add())},hM=(e,t,n)=>{Rm(t)&&n.set(tC(e.selection))},bM=(e,t,n,s,o,r,i)=>{const a=Nc(e);if(r=r||{},r=G.extend(r,a),Rm(s)===!1||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:r,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&Tm(c,r))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const f=hR(e);if(f&&t.data.length>f){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}r.bookmark=tC(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(r),n.set(t.data.length-1);const d={level:r,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),r},CM=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},yM=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Nm(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},vM=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Nm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},EM=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Ac(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Nm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},wM=e=>{e.clear(),e.add()},xM=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Tm(Nc(e),t.data[0]),SM=(e,t)=>t.get()<e.data.length-1&&!e.typing,_M=(e,t,n)=>(r0(e,t),e.beforeChange(),e.ignore(n),e.add()),kM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},NM=(e,t)=>{const n=e.dom,s=Ne(t)?t:e.getBody();Rt(e.hasVisual)&&(e.hasVisual=ER(e)),T(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=wR(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=CC(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},i0=e=>({init:{bindEvents:De},undoManager:{beforeChange:(t,n)=>hM(e,t,n),add:(t,n,s,o,r,i)=>bM(e,t,n,s,o,r,i),undo:(t,n,s)=>EM(e,t,n,s),redo:(t,n)=>vM(e,t,n),clear:(t,n)=>CM(e,t,n),reset:t=>wM(t),hasUndo:(t,n)=>xM(e,t,n),hasRedo:(t,n)=>SM(t,n),transact:(t,n,s)=>_M(t,n,s),ignore:(t,n)=>kM(t,n),extra:(t,n,s,o)=>yM(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>om(e,t,n,s,o),matchAll:(t,n)=>UI(e,t,n),matchNode:(t,n,s,o)=>Ms(e,t,n,s,o),canApply:t=>HI(e,t),closest:t=>zI(e,t),apply:(t,n,s)=>vE(e,t,n,s),remove:(t,n,s,o)=>CE(e,t,n,s,o),toggle:(t,n,s)=>SF(e,t,n,s),formatChanged:(t,n,s,o,r)=>xF(e,t,n,s,o,r)},editor:{getContent:t=>gB(e,t),setContent:(t,n)=>FI(e,t,n),insertContent:(t,n)=>DI(e,t,n),addVisual:t=>NM(e,t)},selection:{getContent:(t,n)=>tM(e,t,n)},autocompleter:{addDecoration:t=>oB(e,t),removeDecoration:()=>iB(e,S.fromDom(e.getBody()))},raw:{getModel:()=>h.none()}}),AM=e=>{const t=f=>dt(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,d,p)=>s.transact(p),ignore:(f,d)=>s.ignore(d),extra:(f,d,p,C)=>s.extra(p,C)},formatter:{match:(f,d,p,C)=>o.match(f,t(d),C),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,d,p)=>o.apply(f,t(d)),remove:(f,d,p,C)=>o.remove(f,t(d)),toggle:(f,d,p)=>o.toggle(f,t(d)),formatChanged:(f,d,p,C,y)=>o.formatChanged(d,p,C,y)},editor:{getContent:f=>r.getContent(f),setContent:(f,d)=>({content:r.setContent(f,d),html:""}),insertContent:(f,d)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>h.some(c.getRawModel())}}},TM=()=>{const e=K(null),t=K("");return{init:{bindEvents:De},undoManager:{beforeChange:De,add:e,undo:e,redo:e,clear:De,reset:De,hasUndo:ht,hasRedo:ht,transact:e,ignore:De,extra:De},formatter:{match:ht,matchAll:K([]),matchNode:K(void 0),canApply:ht,closest:t,apply:De,remove:De,toggle:De,formatChanged:K({unbind:De})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:De},selection:{getContent:t},autocompleter:{addDecoration:De,removeDecoration:De},raw:{getModel:K(h.none())}}},lo=e=>Fe(e.plugins,"rtc"),RM=e=>ft(e.plugins,"rtc").bind(t=>h.from(t.setup)),PM=e=>{const t=e;return RM(e).fold(()=>(t.rtcInstance=i0(e),h.none()),n=>(t.rtcInstance=TM(),h.some(()=>n().then(s=>(t.rtcInstance=AM(s),s.rtc.isRemote)))))},Pm=e=>e.rtcInstance?e.rtcInstance:i0(e),Nt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},OM=(e,t,n)=>{Nt(e).undoManager.beforeChange(t,n)},DM=(e,t,n,s,o,r,i)=>Nt(e).undoManager.add(t,n,s,o,r,i),BM=(e,t,n,s)=>Nt(e).undoManager.undo(t,n,s),$M=(e,t,n)=>Nt(e).undoManager.redo(t,n),IM=(e,t,n)=>{Nt(e).undoManager.clear(t,n)},FM=(e,t)=>{Nt(e).undoManager.reset(t)},LM=(e,t,n)=>Nt(e).undoManager.hasUndo(t,n),MM=(e,t,n)=>Nt(e).undoManager.hasRedo(t,n),UM=(e,t,n,s)=>Nt(e).undoManager.transact(t,n,s),zM=(e,t,n)=>{Nt(e).undoManager.ignore(t,n)},HM=(e,t,n,s,o)=>{Nt(e).undoManager.extra(t,n,s,o)},VM=(e,t,n,s,o)=>Nt(e).formatter.match(t,n,s,o),WM=(e,t,n)=>Nt(e).formatter.matchAll(t,n),jM=(e,t,n,s,o)=>Nt(e).formatter.matchNode(t,n,s,o),qM=(e,t)=>Nt(e).formatter.canApply(t),KM=(e,t)=>Nt(e).formatter.closest(t),GM=(e,t,n,s)=>{Nt(e).formatter.apply(t,n,s)},YM=(e,t,n,s,o)=>{Nt(e).formatter.remove(t,n,s,o)},XM=(e,t,n,s)=>{Nt(e).formatter.toggle(t,n,s)},QM=(e,t,n,s,o,r)=>Nt(e).formatter.formatChanged(t,n,s,o,r),ZM=(e,t)=>Pm(e).editor.getContent(t),JM=(e,t,n)=>Pm(e).editor.setContent(t,n),eU=(e,t,n)=>Pm(e).editor.insertContent(t,n),tU=(e,t,n)=>Nt(e).selection.getContent(t,n),nU=(e,t)=>Nt(e).editor.addVisual(t),a0=e=>Nt(e).init.bindEvents(),sU=(e,t)=>Nt(e).autocompleter.addDecoration(t),oU=e=>Nt(e).autocompleter.removeDecoration(),rU=(e,t={})=>{const n=t.format?t.format:"html";return tU(e,n,t)},l0=e=>e.dom.length===0?(Tt(e),h.none()):h.some(e),iU=(e,t)=>e.filter(n=>Na.isBookmarkNode(n.dom)).bind(t?ea:Zo),aU=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(Fd(o,r,!1,!s),n.setStart(r,i)):(Fd(r,o,!1,!s),n.setEnd(r,i))},lU=(e,t)=>{Zn(e).each(n=>{const s=e.dom;t&&uc(n,F(s,0))?dc(s,0):!t&&fc(n,F(s,s.length))&&Id(s,s.length)})},c0=(e,t,n,s)=>{e.bind(o=>((s?Id:dc)(o.dom,s?o.dom.length:0),t.filter(In).map(i=>aU(o,i,n,s)))).orThunk(()=>iU(t,s).or(t).filter(In).map(r=>lU(r,s)))},cU=(e,t)=>{const n=h.from(t.firstChild).map(S.fromDom),s=h.from(t.lastChild).map(S.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Zo).filter(In).bind(l0),r=s.bind(ea).filter(In).bind(l0);c0(o,n,e,!0),c0(r,s,e,!1),e.collapse(!1)},uU=(e,t)=>mt(_e({format:"html"},e),{set:!0,selection:!0,content:t}),fU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,_e(_e({forced_root_block:!1},o),t));return Do({validate:!1},e.schema).serialize(r)}else return t.content},dU=(e,t,n={})=>{const s=uU(n,t);xm(e,s).each(o=>{const r=fU(e,o),i=e.selection.getRng();cU(i,i.createContextualFragment(r)),e.selection.setRng(i),Ta(e,i),Sm(e,r,o)})},u0=(e,t,n)=>{if(e&&Fe(e,t)){const s=H(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var mU=(e,t)=>{let n,s;const o=(i,a)=>ge(a,c=>e.is(c,i)),r=i=>e.getParents(i,null,e.getRoot());return{selectorChangedWithUnbind:(i,a)=>(n||(n={},s={},t.on("NodeChange",c=>{const f=c.element,d=r(f),p={};G.each(n,(C,y)=>{o(y,d).each(w=>{s[y]||(T(C,v=>{v(!0,{node:w,selector:y,parents:d})}),s[y]=C),p[y]=C})}),G.each(s,(C,y)=>{p[y]||(delete s[y],G.each(C,w=>{w(!1,{node:f,selector:y,parents:d})}))})})),n[i]||(n[i]=[]),n[i].push(a),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{u0(n,i,a),u0(s,i,a)}})}};const f0=e=>!!(e&&e.ownerDocument)&&so(S.fromDom(e.ownerDocument),S.fromDom(e)),pU=e=>e?f0(e.startContainer)&&f0(e.endContainer):!1,d0=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=mU(e,s),a=(Y,he)=>{const Ie=e.createRng();Ne(Y)&&Ne(he)?(Ie.setStart(Y,he),Ie.setEnd(Y,he),O(Ie),x(!1)):(ad(e,Ie,s.getBody(),!0),O(Ie))},c=Y=>rU(s,Y),f=(Y,he)=>dU(s,Y,he),d=Y=>Qy(s.getBody(),P(),Y),p=Y=>Zy(s.getBody(),P(),Y),C=(Y,he)=>et.getBookmark(Y,he),y=Y=>et.moveToBookmark(Y),w=(Y,he)=>(QD(e,Y,he).each(O),Y),v=()=>{const Y=P(),he=_();return!Y||Y.item?!1:Y.compareEndPoints?Y.compareEndPoints("StartToEnd",Y)===0:!he||Y.collapsed},x=Y=>{const he=P();he.collapse(!!Y),O(he)},_=()=>t.getSelection?t.getSelection():t.document.selection,P=()=>{let Y,he,Ie;const Be=(ne,we,fe)=>{try{return we.compareBoundaryPoints(ne,fe)}catch{return-1}},It=t.document;if(s.bookmark!==void 0&&br(s)===!1){const ne=xd(s);if(ne.isSome())return ne.map(we=>Nd(s,[we])[0]).getOr(It.createRange())}try{(Y=_())&&!wl(Y.anchorNode)&&(Y.rangeCount>0?he=Y.getRangeAt(0):he=Y.createRange?Y.createRange():It.createRange(),he=Nd(s,[he])[0])}catch{}return he||(he=It.createRange()),he.setStart&&he.startContainer.nodeType===9&&he.collapsed&&(Ie=e.getRoot(),he.setStart(Ie,0),he.setEnd(Ie,0)),o&&r&&(Be(he.START_TO_START,he,o)===0&&Be(he.END_TO_END,he,o)===0?he=r:(o=null,r=null)),he},O=(Y,he)=>{let Ie;if(!pU(Y))return;const Be=_();if(Y=s.dispatch("SetSelectionRange",{range:Y,forward:he}).range,Be){r=Y;try{Be.removeAllRanges(),Be.addRange(Y)}catch{}he===!1&&Be.extend&&(Be.collapse(Y.endContainer,Y.endOffset),Be.extend(Y.startContainer,Y.startOffset)),o=Be.rangeCount>0?Be.getRangeAt(0):null}!Y.collapsed&&Y.startContainer===Y.endContainer&&Be.setBaseAndExtent&&Y.endOffset-Y.startOffset<2&&Y.startContainer.hasChildNodes()&&(Ie=Y.startContainer.childNodes[Y.startOffset],Ie&&Ie.tagName==="IMG"&&(Be.setBaseAndExtent(Y.startContainer,Y.startOffset,Y.endContainer,Y.endOffset),(Be.anchorNode!==Y.startContainer||Be.focusNode!==Y.endContainer)&&Be.setBaseAndExtent(Ie,0,Ie,1))),s.dispatch("AfterSetSelectionRange",{range:Y,forward:he})},I=Y=>(f(e.getOuterHTML(Y)),Y),M=()=>YD(s.getBody(),P()),ce=(Y,he)=>XD(e,P(),Y,he),V=()=>{const Y=_(),he=Y==null?void 0:Y.anchorNode,Ie=Y==null?void 0:Y.focusNode;if(!Y||!he||!Ie||wl(he)||wl(Ie))return!0;const Be=e.createRng(),It=e.createRng();try{Be.setStart(he,Y.anchorOffset),Be.collapse(!0),It.setStart(Ie,Y.focusOffset),It.collapse(!0)}catch{return!0}return Be.compareBoundaryPoints(Be.START_TO_START,It)<=0},qe={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:s,collapse:x,setCursorLocation:a,getContent:c,setContent:f,getBookmark:C,moveToBookmark:y,select:w,isCollapsed:v,isForward:V,setNode:I,getNode:M,getSel:_,setRng:O,getRng:P,getStart:d,getEnd:p,getSelectedBlocks:ce,normalize:()=>{const Y=P(),he=_();if(!jP(he)&&ec(s)){const Ie=oc(e,Y);return Ie.each(Be=>{O(Be,V())}),Ie.getOr(Y)}return Y},selectorChanged:(Y,he)=>(i(Y,he),qe),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Y,he=e.getRoot();for(;he&&he.nodeName!=="BODY";){if(he.scrollHeight>he.clientHeight){Y=he;break}he=he.parentNode}return Y},scrollIntoView:(Y,he)=>{Ne(Y)?hD(s,Y,he):Ta(s,P(),he)},placeCaretAt:(Y,he)=>O(Ry(Y,he,s.getDoc())),getBoundingClientRect:()=>{const Y=P();return Y.collapsed?F.fromRangeStart(Y).getClientRects()[0]:Y.getBoundingClientRect()},destroy:()=>{t=o=r=null,Ot.destroy()}},et=Na(qe),Ot=_y(qe,s);return qe.bookmarkManager=et,qe.controlSelection=Ot,qe},gU=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let d=f.attr(r);d!==void 0?(f.attr(o,d.length>0?d:null),f.attr(r,null)):(d=f.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),f.name):i&&(d=i.call(a,d,o,f.name)),f.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(h.from(a.firstChild).exists(f=>!Nl(f.value))?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{let o=s.length;for(;o--;){const r=s[o].firstChild;r&&(r.value=ko.decode(r.value))}}),e.addNodeFilter("script,style",(s,o)=>{const r=a=>a.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const a=s[i],c=a.firstChild?a.firstChild.value:"";if(o==="script"){const f=a.attr("type");f&&a.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`// <![CDATA[
`+r(c)+`
// ]]>`)}else t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`<!--
`+r(c)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o];t.preserve_cdata&&r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{T(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},hU=e=>{const t=s=>s&&s.name==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},bU=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");G.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return sO(e,mt(_e({},n),{node:r})),s&&(o.doc=s),r},CU=(e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events,yU=(e,t,n)=>CU(e,n)?bU(e,t,n):t,vU=(e,t,n)=>{G.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},EU=(e,t,n)=>!t.no_events&&e?oO(e,mt(_e({},t),{content:n})).content:n,wU=(e,t,n)=>{const s=_o(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||kl(S.fromDom(t))?s:G.trim(s)},xU=(e,t,n)=>{const s=n.selection?_e({forced_root_block:!1},n):n,o=e.parse(t,s);return hU(o),o},SU=(e,t,n)=>Do(e,t).serialize(n),_U=(e,t,n,s,o)=>{const r=SU(t,n,s);return EU(e,o,r)},kU=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:lt.DOM,o=t&&t.schema?t.schema:Ao(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=yi(e,o);gU(r,e,s);const i=(a,c={})=>{const f=_e({format:"html"},c),d=yU(t,a,f),p=wU(s,d,f),C=xU(r,p,f);return f.format==="tree"?C:_U(t,e,o,C,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(vU,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},m0=(e,t)=>{const n=kU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},NU="html",AU=(e,t)=>mt(_e({},e),{format:t,get:!0,getInner:!0}),TU=(e,t={})=>{const n=t.format?t.format:NU,s=AU(t,n);return qE(e,s).fold(St,o=>{const r=ZM(e,o);return KE(e,r,o)})},RU="html",PU=(e,t)=>mt(_e({format:RU},e),{set:!0,content:t}),Om=(e,t,n={})=>{const s=PU(n,t);return xm(e,s).map(o=>{const r=JM(e,o.content,o);return Sm(e,r.html,o),r.content}).getOr(t)},OU="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),DU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),BU=e=>{const t=H(OU,s=>Fe(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Yn(t)},$U=e=>{const t=G.makeMap(e.plugins," "),s=H(DU,o=>Fe(t,o));return Yn(s)},IU=(e,t)=>{const n=BU(e),s=$U(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+f+d)}},FU=(e,t)=>{IU(e,t)},Tc=lt.DOM,LU=e=>{Tc.setStyle(e.id,"display",e.orgDisplay)},Rc=e=>h.from(e).each(t=>t.destroy()),MU=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},UU=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Tc.unbind(t,"submit reset",e.formEventDelegate))},zU=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Tc.remove(o.nextSibling),rO(e),e.editorManager.remove(e),!e.inline&&s&&LU(e),iO(e),Tc.remove(e.getContainer()),Rc(t),Rc(n),e.destroy()}},HU=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Rc(n),Rc(s)),UU(e),MU(e),e.destroyed=!0}},Pc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Fe(e,o)}})(),vi=on.ModelManager,p0=(e,t)=>t.dom[e],g0=(e,t)=>parseInt(Ts(t,e),10),VU=re(p0,"clientWidth"),WU=re(p0,"clientHeight"),jU=re(g0,"margin-top"),qU=re(g0,"margin-left"),KU=e=>e.dom.getBoundingClientRect(),GU=(e,t,n)=>{const s=VU(e),o=WU(e);return t>=0&&n>=0&&t<=s&&n<=o},YU=(e,t,n,s)=>{const o=KU(t),r=e?o.left+t.dom.clientLeft+qU(t):0,i=e?o.top+t.dom.clientTop+jU(t):0,a=n-r,c=s-i;return{x:a,y:c}},XU=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.inline?s:UN(s),r=YU(e.inline,o,t,n);return GU(o,r.x,r.y)},QU=e=>h.from(e).map(S.fromDom),ZU=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return QU(t).map(Kr).getOr(!1)},JU=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}},h0=e=>{const t=[],n=()=>{const C=e.theme;return C&&C.getNotificationManagerImpl?C.getNotificationManagerImpl():JU()},s=()=>h.from(t[0]),o=(C,y)=>C.type===y.type&&C.text===y.text&&!C.progressBar&&!C.timeout&&!y.progressBar&&!y.timeout,r=()=>{T(t,C=>{C.reposition()})},i=C=>{t.push(C)},a=C=>{Te(t,y=>y===C).each(y=>{t.splice(y,1)})},c=(C,y=!0)=>{if(!(e.removed||!ZU(e)))return y&&e.dispatch("BeforeOpenNotification",{notification:C}),ge(t,w=>o(n().getArgs(w),C)).getOrThunk(()=>{e.editorManager.setActive(e);const w=n().open(C,()=>{a(w),r(),s().fold(()=>e.focus(),v=>Vy(S.fromDom(v.getEl())))});return i(w),r(),e.dispatch("OpenNotification",{notification:_e({},w)}),w})},f=()=>{s().each(C=>{n().close(C),a(C),r()})},d=K(t);return(C=>{C.on("SkinLoaded",()=>{const y=rR(C);y&&c({text:y,type:"warning",timeout:0},!1),r()}),C.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),C.on("remove",()=>{T(t.slice(),y=>{n().close(y)})})})(e),{open:c,close:f,getNotifications:d}},Ei=on.PluginManager,xr=on.ThemeManager;var ez=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}};const b0=e=>{let t=[];const n=()=>{const v=e.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():ez()},s=(v,x)=>(..._)=>x?x.apply(v,_):void 0,o=v=>{e.dispatch("OpenWindow",{dialog:v})},r=v=>{e.dispatch("CloseWindow",{dialog:v})},i=v=>{t.push(v),o(v)},a=v=>{r(v),t=H(t,x=>x!==v),t.length===0&&e.focus()},c=()=>h.from(t[t.length-1]),f=v=>{e.editorManager.setActive(e),wd(e),e.ui.show();const x=v();return i(x),x},d=(v,x)=>f(()=>n().open(v,x,a)),p=v=>f(()=>n().openUrl(v,a)),C=(v,x,_)=>{const P=n();P.alert(v,s(_||P,x))},y=(v,x,_)=>{const P=n();P.confirm(v,s(_||P,x))},w=()=>{c().each(v=>{n().close(v),a(v)})};return e.on("remove",()=>{T(t,v=>{n().close(v)})}),{open:d,openUrl:p,alert:C,confirm:y,close:w}},C0=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Oc=(e,t)=>{e._skinLoaded?C0(e,t):e.on("SkinLoaded",()=>{C0(e,t)})},tz=(e,t)=>{Oc(e,rs.translate(["Failed to upload image: {0}",t]))},La=(e,t,n)=>{yy(e,t,{message:n}),console.error(n)},Ma=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,nz=(e,t,n)=>{La(e,"PluginLoadError",Ma("plugin",t,n))},sz=(e,t,n)=>{La(e,"IconsLoadError",Ma("icons",t,n))},oz=(e,t,n)=>{La(e,"LanguageLoadError",Ma("language",t,n))},rz=(e,t,n)=>{La(e,"ThemeLoadError",Ma("theme",t,n))},iz=(e,t,n)=>{La(e,"ModelLoadError",Ma("model",t,n))},az=(e,t,n)=>{const s=rs.translate(["Failed to initialize plugin: {0}",t]);yy(e,"PluginLoadError",{message:s}),Dc(s,n),Oc(e,s)},Dc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},lz=e=>/^[a-z0-9\-]+$/i.test(e),cz=e=>y0(e,J1(e)),uz=e=>y0(e,pC(e)),y0=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=e.inline===!0;return z(t,i=>lz(i)&&!r?`${n}/${i}/${o}`:e.documentBaseURI.toAbsolute(i))},fz=e=>{e.contentCSS=e.contentCSS.concat(cz(e),uz(e))},dz=ut,mz=(e,t,n)=>iA(e,t,dz,n),pz=e=>e?Ct(e.getElementsByTagName("img")):[],gz=(e,t)=>{const n={};return{findAll:(o,r=ut)=>{const i=H(pz(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===Ze.transparentSrc?!1:Gt(f,"blob:")?!e.isUploaded(f)&&r(c):Gt(f,"data:")?r(c):!1}),a=z(i,c=>{const f=c.src;if(Fe(n,f))return n[f].then(d=>me(d)?d:{image:c,blobInfo:d.blobInfo});{const d=fL(t,f).then(p=>(delete n[f],{image:c,blobInfo:p})).catch(p=>(delete n[f],p));return n[f]=d,d}});return Promise.all(a)}}},v0=()=>{let n={};const s=(C,y)=>({status:C,resultUri:y}),o=C=>C in n;return{hasBlobUri:o,getResultUri:C=>{const y=n[C];return y?y.resultUri:null},isPending:C=>o(C)?n[C].status===1:!1,isUploaded:C=>o(C)?n[C].status===2:!1,markPending:C=>{n[C]=s(1,null)},markUploaded:(C,y)=>{n[C]=s(2,y)},removeFailed:C=>{delete n[C]},destroy:()=>{n={}}}};let hz=0;const bz=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},Cz=e=>e+hz+++bz(),yz=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,C,y,w,v)=>{if(me(p))return s({id:p,name:w,filename:v,blob:C,base64:y});if(dt(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const C=p.id||Cz("blobid"),y=p.name||C,w=p.blob;return{id:K(C),name:K(y),filename:K(p.filename||y+"."+t(w.type)),blob:K(w),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(w)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>ge(e,p).getOrUndefined(),i=p=>r(C=>C.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(C=>C.blobUri()===p),getByData:(p,C)=>r(y=>y.base64()===p&&y.blob().type===C),findFirst:r,removeByUri:p=>{e=H(e,C=>C.blobUri()===p?(URL.revokeObjectURL(C.blobUri()),!1):!0)},destroy:()=>{T(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},vz=(e,t)=>{const n={},s=(w,v)=>w?w.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v,o=(w,v)=>new Promise((x,_)=>{const P=new XMLHttpRequest;P.open("POST",t.url),P.withCredentials=t.credentials,P.upload.onprogress=I=>{v(I.loaded/I.total*100)},P.onerror=()=>{_("Image upload failed due to a XHR Transport error. Code: "+P.status)},P.onload=()=>{if(P.status<200||P.status>=300){_("HTTP Error: "+P.status);return}const I=JSON.parse(P.responseText);if(!I||!me(I.location)){_("Invalid JSON: "+P.responseText);return}x(s(t.basePath,I.location))};const O=new FormData;O.append("file",w.blob(),w.filename()),P.send(O)}),r=()=>new Promise(w=>{w([])}),i=(w,v)=>({url:v,blobInfo:w,status:!0}),a=(w,v)=>({url:"",blobInfo:w,status:!1,error:v}),c=(w,v)=>{G.each(n[w],x=>{x(v)}),delete n[w]},f=(w,v,x)=>(e.markPending(w.blobUri()),new Promise(_=>{let P,O;try{const I=()=>{P&&(P.close(),O=De)},M=V=>{I(),e.markUploaded(w.blobUri(),V),c(w.blobUri(),i(w,V)),_(i(w,V))},ce=V=>{I(),e.removeFailed(w.blobUri()),c(w.blobUri(),a(w,V)),_(a(w,V))};O=V=>{V<0||V>100||h.from(P).orThunk(()=>h.from(x).map(Lr)).each(j=>{P=j,j.progressBar.value(V)})},v(w,O).then(M,V=>{ce(me(V)?{message:V}:V)})}catch(I){_(a(w,I))}})),d=w=>w===o,p=w=>{const v=w.blobUri();return new Promise(x=>{n[v]=n[v]||[],n[v].push(x)})},C=(w,v)=>(w=G.grep(w,x=>!e.isUploaded(x.blobUri())),Promise.all(G.map(w,x=>e.isPending(x.blobUri())?p(x):f(x,t.handler,v)))),y=(w,v)=>!t.url&&d(t.handler)?r():C(w,v);return Ye(t.handler)===!1&&(t.handler=o),{upload:y}},E0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),w0=(e,t)=>vz(t,{url:q1(e),basePath:K1(e),credentials:G1(e),handler:Y1(e)}),Ez=e=>{const t=v0(),n=w0(e,t);return{upload:(s,o=!0)=>n.upload(s,o?E0(e):void 0)}},wz=e=>{const t=yz();let n,s;const o=v0(),r=[],i=O=>I=>e.selection?O(I):[],a=O=>O+(O.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(O,I,M)=>{let ce=0;do ce=O.indexOf(I,ce),ce!==-1&&(O=O.substring(0,ce)+M+O.substr(ce+I.length),ce+=M.length-I.length+1);while(ce!==-1);return O},f=(O,I,M)=>{const ce=`src="${M}"${M===Ze.transparentSrc?' data-mce-placeholder="1"':""}`;return O=c(O,`src="${I}"`,ce),O=c(O,'data-mce-src="'+I+'"','data-mce-src="'+M+'"'),O},d=(O,I)=>{T(e.undoManager.data,M=>{M.type==="fragmented"?M.fragments=z(M.fragments,ce=>f(ce,O,I)):M.content=f(M.content,O,I)})},p=(O,I)=>{const M=e.convertURL(I,"src");d(O.src,I),Ns(S.fromDom(O),{src:uC(e)?a(I):I,"data-mce-src":M})},C=()=>(n||(n=w0(e,o)),x().then(i(O=>{const I=z(O,M=>M.blobInfo);return n.upload(I,E0(e)).then(i(M=>{const ce=[];let V=!1;const j=z(M,(X,J)=>{const ve=O[J].blobInfo,ue=O[J].image;let oe=!1;return X.status&&W1(e)?(X.url&&!sn(ue.src,X.url)&&(V=!0),t.removeByUri(ue.src),lo(e)||p(ue,X.url)):X.error&&(X.error.remove&&(d(ue.getAttribute("src"),Ze.transparentSrc),ce.push(ue),oe=!0),tz(e,X.error.message)),{element:ue,status:X.status,uploadUri:X.url,blobInfo:ve,removed:oe}});return ce.length>0&&!lo(e)?e.undoManager.transact(()=>{T(ce,X=>{e.dom.remove(X),t.removeByUri(X.src)})}):V&&e.undoManager.dispatchChange(),j}))}))),y=()=>cC(e)?C():Promise.resolve([]),w=O=>rt(r,I=>I(O)),v=O=>{r.push(O)},x=()=>(s||(s=gz(o,t)),s.findAll(e.getBody(),w).then(i(O=>{const I=H(O,M=>me(M)?(Oc(e,M),!1):!0);return lo(e)||T(I,M=>{d(M.image.src,M.blobInfo.blobUri()),M.image.src=M.blobInfo.blobUri(),M.image.removeAttribute("data-mce-src")}),I}))),_=()=>{t.destroy(),o.destroy(),s=n=null},P=O=>O.replace(/src="(blob:[^"]+)"/g,(I,M)=>{const ce=o.getResultUri(M);if(ce)return'src="'+ce+'"';let V=t.getByUri(M);if(V||(V=Q(e.editorManager.get(),(j,X)=>j||X.editorUpload&&X.editorUpload.blobCache.getByUri(M),null)),V){const j=V.blob();return'src="data:'+j.type+";base64,"+V.base64()+'"'}return I});return e.on("SetContent",()=>{cC(e)?y():x()}),e.on("RawSaveContent",O=>{O.content=P(O.content)}),e.on("GetContent",O=>{O.source_view||O.format==="raw"||O.format==="tree"||(O.content=P(O.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",O=>{T(O,I=>{const M=I.attr("src");if(t.getByUri(M))return;const ce=o.getResultUri(M);ce&&I.attr("src",ce)})})}),{blobCache:t,addFilter:v,uploadImages:C,uploadImagesAuto:y,scanForImages:x,destroy:_}},xz=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>Ee(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{G.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},x0={remove_similar:!0,inherit:!1},wi=_e({selector:"td,th"},x0),Sz={tablecellbackgroundcolor:_e({styles:{backgroundColor:"%value"}},wi),tablecellverticalalign:_e({styles:{"vertical-align":"%value"}},wi),tablecellbordercolor:_e({styles:{borderColor:"%value"}},wi),tablecellclass:_e({classes:["%value"]},wi),tableclass:_e({selector:"table",classes:["%value"]},x0),tablecellborderstyle:_e({styles:{borderStyle:"%value"}},wi),tablecellborderwidth:_e({styles:{borderWidth:"%value"}},wi)},_z=K(Sz),kz=e=>{const t={},n=i=>Ne(i)?t[i]:t,s=i=>Fe(t,i),o=(i,a)=>{i&&(me(i)?(At(a)||(a=[a]),T(a,c=>{Rt(c.deep)&&(c.deep=!Pn(c)),Rt(c.split)&&(c.split=!Pn(c)||Vt(c)),Rt(c.remove)&&Pn(c)&&!Vt(c)&&(c.remove="none"),Pn(c)&&Vt(c)&&(c.mixed=!0,c.block_expand=!0),me(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):yt(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(xz(e)),o(_z()),o(lR(e)),{get:n,has:s,register:o,unregister:r}},Bc=G.each,Nn=lt.DOM,S0=(e,t)=>{let n,s,o;const r=t&&t.schema||Ao({}),i=(d,p)=>{p.classes.length&&Nn.addClass(d,p.classes.join(" ")),Nn.setAttribs(d,p.attrs)},a=d=>{s=typeof d=="string"?{name:d,classes:[],attrs:{}}:d;const p=Nn.create(s.name);return i(p,s),p},c=(d,p)=>{const C=typeof d!="string"?d.nodeName.toLowerCase():d,y=r.getElementRule(C),w=y&&y.parentsRequired;return w&&w.length?p&&G.inArray(w,p)!==-1?p:w[0]:!1},f=(d,p,C)=>{let y,w;const v=p.length>0&&p[0],x=v&&v.name,_=c(d,x);if(_)x===_?(w=p[0],p=p.slice(1)):w=_;else if(v)w=p[0],p=p.slice(1);else if(!C)return d;return w&&(y=a(w),y.appendChild(d)),C&&(y||(y=Nn.create("div"),y.appendChild(d)),G.each(C,P=>{const O=a(P);y.insertBefore(O,d)})),f(y,p,w&&w.siblings)};return e&&e.length?(s=e[0],n=a(s),o=Nn.create("div"),o.appendChild(f(n,e.slice(1),s.siblings)),o):""},Nz=e=>{let t;const n={classes:[],attrs:{}};return e=n.selector=G.trim(e),e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":G.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},Az=e=>!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=G.map(t.split(/(?:~\+|~|\+)/),Nz),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()),Tz=(e,t)=>{let n,s,o="",r,i=cR(e);if(i==="")return"";const a=d=>d.replace(/%(\w+)/g,"");if(typeof t=="string"){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t){const d=ft(t,"preview");if(jr(d,!1))return"";i=d.getOr(i)}n=t.block||t.inline||"span";const c=Az(t.selector);c.length?(c[0].name||(c[0].name=n),n=t.selector,s=S0(c,e)):s=S0([n],e);const f=Nn.select(n,s)[0]||s.firstChild;return Bc(t.styles,(d,p)=>{const C=a(d);C&&Nn.setStyle(f,p,C)}),Bc(t.attributes,(d,p)=>{const C=a(d);C&&Nn.setAttrib(f,p,C)}),Bc(t.classes,d=>{const p=a(d);Nn.hasClass(f,p)||Nn.addClass(f,p)}),e.dispatch("PreviewFormats"),Nn.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),r=Nn.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Bc(i.split(" "),d=>{let p=Nn.getStyle(f,d,!0);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=Nn.getStyle(e.getBody(),d,!0),Yl(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&Yl(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(r===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*r+"px"}d==="border"&&p&&(o+="padding:0 2px;"),o+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),Nn.remove(s),o},Rz=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},_0=e=>{const t=kz(e),n=Ht(null);return Rz(e),ZI(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{GM(e,s,o,r)},remove:(s,o,r,i)=>{YM(e,s,o,r,i)},toggle:(s,o,r)=>{XM(e,s,o,r)},match:(s,o,r,i)=>VM(e,s,o,r,i),closest:s=>KM(e,s),matchAll:(s,o)=>WM(e,s,o),matchNode:(s,o,r,i)=>jM(e,s,o,r,i),canApply:s=>qM(e,s),formatChanged:(s,o,r,i)=>QM(e,n,s,o,r,i),getCssText:re(Tz,e)}},k0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Pz=(e,t,n)=>{const s=Ht(!1),o=c=>{Ac(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;k0(f)||(r0(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;k0(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;c.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&Tm(Nc(e),t.data[0])===!1&&(e.isDirty()===!1&&e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!d&&(t.beforeChange(),Ac(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},Oz=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},N0=e=>{const t=To(),n=Ht(0),s=Ht(0),o={data:[],typing:!1,beforeChange:()=>{OM(e,n,t)},add:(r,i)=>DM(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0),e.dispatch("change",{level:Nc(e),lastLevel:zr(o.data,s.get()).getOrUndefined()})},undo:()=>BM(e,o,n,s),redo:()=>$M(e,s,o.data),clear:()=>{IM(e,o,s)},reset:()=>{FM(e,o)},hasUndo:()=>LM(e,o,s),hasRedo:()=>MM(e,o,s),transact:r=>UM(e,o,n,r),ignore:r=>{zM(e,n,r)},extra:(r,i)=>{HM(e,o,s,r,i)}};return lo(e)||Pz(e,o,n),Oz(e),o},Dz=[9,27,pe.HOME,pe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,pe.DOWN,pe.UP,pe.LEFT,pe.RIGHT].concat(Ze.browser.isFirefox()?[224]:[]),A0="data-mce-placeholder",T0=e=>e.type==="keydown"||e.type==="keyup",R0=e=>{const t=e.keyCode;return t===pe.BACKSPACE||t===pe.DELETE},Bz=e=>{if(T0(e)){const t=e.keyCode;return!R0(e)&&(pe.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||R(Dz,t))}else return!1},$z=e=>T0(e)&&!(R0(e)||e.type==="keyup"&&e.keyCode===229),Iz=(e,t,n)=>{if(zt(S.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},Fz=e=>{const t=e.dom,n=Sn(e),s=oR(e),o=(r,i)=>{if(Bz(r))return;const a=e.getBody(),c=$z(r)?!1:Iz(t,a,n);(t.getAttrib(a,A0)!==""!==c||i)&&(t.setAttrib(a,A0,c?s:null),t.setAttrib(a,"aria-placeholder",c?s:null),mO(e,c),e.on(c?"keydown":"keyup",o),e.off(c?"keyup":"keydown",o))};s&&e.on("init",r=>{o(r,!0),e.on("change SetContent ExecCommand",o),e.on("paste",i=>Hn.setEditorTimeout(e,()=>o(i)))})},Lz=(e,t)=>({block:e,position:t}),Mz=(e,t)=>({from:e,to:t}),Dm=(e,t)=>{const n=S.fromDom(e),s=S.fromDom(t.container());return mc(n,s).map(o=>Lz(o,t))},Uz=e=>ot(e.from.block,e.to.block)===!1,zz=e=>Zn(e.from.block).bind(t=>Zn(e.to.block).filter(n=>ot(t,n))).isSome(),Hz=e=>wt(e.from.block.dom)===!1&&wt(e.to.block.dom)===!1,Vz=(e,t,n)=>Pt(n.position.getNode())&&zt(n.block)===!1?ui(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Mn(t,e,s).bind(o=>Dm(e,o)):h.some(n)).getOr(n):n,Wz=(e,t,n)=>{const s=Dm(e,F.fromRangeStart(n)),o=s.bind(r=>Mn(t,e,r.position).bind(i=>Dm(e,i).map(a=>Vz(e,t,a))));return wn(s,o,Mz).filter(r=>Uz(r)&&zz(r)&&Hz(r))},jz=(e,t,n)=>n.collapsed?Wz(e,t,n):h.none(),qz=e=>{const t=Qt(e);return Te(t,os).fold(K(t),n=>t.slice(0,n))},P0=e=>{const t=qz(e);return T(t,Tt),t},O0=(e,t)=>{const n=ao(t,e);return ge(n.reverse(),s=>zt(s)).each(Tt)},Kz=e=>H(Nh(e),t=>!zt(t)).length===0,Gz=(e,t,n,s)=>{if(zt(n))return Cr(n),pn(n.dom);Kz(s)&&zt(t)&&Jn(s,S.fromTag("br"));const o=as(n.dom,F.before(s.dom));return T(P0(t),r=>{Jn(s,r)}),O0(e,t),o},Yz=(e,t,n)=>{if(zt(n))return Tt(n),zt(t)&&Cr(t),pn(t.dom);const s=Is(n.dom);return T(P0(t),o=>{Lt(n,o)}),O0(e,t),s},Xz=(e,t)=>{const n=ao(t,e);return h.from(n[n.length-1])},Qz=(e,t)=>so(t,e)?Xz(t,e):h.none(),D0=(e,t)=>{ui(e,t.dom).map(n=>n.getNode()).map(S.fromDom).filter(Qr).each(Tt)},B0=(e,t,n)=>(D0(!0,t),D0(!1,n),Qz(t,n).fold(re(Yz,e,t,n),re(Gz,e,t,n))),$0=(e,t,n,s)=>t?B0(e,s,n):B0(e,n,s),Bm=(e,t)=>{const n=S.fromDom(e.getBody());return jz(n.dom,t,e.selection.getRng()).map(o=>()=>{$0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},Zz=(e,t)=>{const n=t.getRng();return wn(mc(e,S.fromDom(n.startContainer)),mc(e,S.fromDom(n.endContainer)),(s,o)=>ot(s,o)===!1?h.some(()=>{n.deleteContents(),$0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})}):h.none()).getOr(h.none())},I0=(e,t)=>{const n=S.fromDom(t),s=re(ot,e);return Yr(n,_l,s).isSome()},Jz=(e,t)=>I0(e,t.startContainer)||I0(e,t.endContainer),eH=(e,t)=>{const n=as(e.dom,F.fromRangeStart(t)).isNone(),s=Un(e.dom,F.fromRangeEnd(t)).isNone();return!Jz(e,t)&&n&&s},tH=e=>h.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),nH=e=>{const t=S.fromDom(e.getBody()),n=e.selection.getRng();return eH(t,n)?tH(e):Zz(t,e.selection)},$m=(e,t)=>e.selection.isCollapsed()?h.none():nH(e),sH=Rs,oH=wt,co=(e,t,n,s,o)=>h.from(t._selectionOverrides.showCaret(e,n,s,o)),rH=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Ua=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?h.none():h.some(rH(t)),iH=(e,t,n)=>{const s=qf(1,e.getBody(),t),o=F.fromRangeStart(s),r=o.getNode();if(Ca(r))return co(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(Ca(i))return co(1,e,i,!1,!1);const a=e.dom.getParent(o.getNode(),c=>oH(c)||sH(c));return Ca(a)?co(1,e,a,!1,n):h.none()},Im=(e,t,n)=>t.collapsed?iH(e,t,n).getOr(t):t,aH=e=>$o(e)||Pa(e),lH=e=>Io(e)||Oa(e),cH=(e,t)=>{te(t)&&t.data.length===0&&e.remove(t)},F0=(e,t,n,s,o,r)=>{co(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),cH(e.dom,n)},uH=(e,t)=>{const n=e.selection.getRng();if(!te(n.commonAncestorContainer))return h.none();const s=t?Mt.Forwards:Mt.Backwards,o=$s(e.getBody()),r=re(Kf,t?o.next:o.prev),i=t?aH:lH,a=xa(s,e.getBody(),n),c=Vn(t,r(a));if(!c||!Wl(a,c))return h.none();if(i(c))return h.some(()=>F0(e,n,a.getNode(),s,t,c));const f=r(c);return f&&i(f)&&Wl(c,f)?h.some(()=>F0(e,n,a.getNode(),s,t,f)):h.none()},Fm=(e,t)=>uH(e,t),Lm=(e,t)=>{const n=e.getBody();return t?pn(n).filter($o):Is(n).filter(Io)},Mm=e=>{const t=e.selection.getRng();return!t.collapsed&&(Lm(e,!0).exists(n=>n.isEqual(F.fromRangeStart(t)))||Lm(e,!1).exists(n=>n.isEqual(F.fromRangeEnd(t))))},fH=e=>_l(S.fromDom(e))||ra(S.fromDom(e)),On=Os.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),dH=(e,t)=>{const n=t.getNode(e===!1),s=e?"after":"before";return Ee(n)&&n.getAttribute("data-mce-caret")===s},mH=(e,t,n,s)=>{const o=r=>pf(S.fromDom(r))&&!Ds(n,s,e);return $C(!t,n).fold(()=>$C(t,s).fold(ht,o),o)},L0=(e,t,n,s)=>{const o=s.getNode(t===!1);return mc(S.fromDom(e),S.fromDom(n.getNode())).map(r=>zt(r)?On.remove(r.dom):On.moveToElement(o)).orThunk(()=>h.some(On.moveToElement(o)))},M0=(e,t,n)=>Mn(t,e,n).bind(s=>fH(s.getNode())||mH(e,t,n,s)?h.none():t&&wt(s.getNode())||t===!1&&wt(s.getNode(!0))?L0(e,t,n,s):t&&Io(n)||t===!1&&$o(n)?h.some(On.moveToPosition(s)):h.none()),pH=(e,t)=>e&&wt(t.nextSibling)?h.some(On.moveToElement(t.nextSibling)):e===!1&&wt(t.previousSibling)?h.some(On.moveToElement(t.previousSibling)):h.none(),gH=(e,t,n)=>n.fold(s=>h.some(On.remove(s)),s=>h.some(On.moveToElement(s)),s=>Ds(t,s,e)?h.none():h.some(On.moveToPosition(s))),hH=(e,t,n)=>dH(t,n)?pH(t,n.getNode(t===!1)).fold(()=>M0(e,t,n),h.some):M0(e,t,n).bind(s=>gH(e,n,s)),bH=(e,t,n)=>{const s=qf(t?1:-1,e,n),o=F.fromRangeStart(s),r=S.fromDom(e);return t===!1&&Io(o)?h.some(On.remove(o.getNode(!0))):t&&$o(o)?h.some(On.remove(o.getNode())):t===!1&&$o(o)&&Bd(r,o)?OB(r,o).map(i=>On.remove(i.getNode())):t&&Io(o)&&Dd(r,o)?DB(r,o).map(i=>On.remove(i.getNode())):hH(e,t,o)},CH=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),yr(e,t,S.fromDom(n)),!0),yH=(e,t)=>n=>{const s=t?F.before(n):F.after(n);return e.selection.setRng(s.toRange()),!0},vH=e=>t=>(e.selection.setRng(t.toRange()),!0),U0=(e,t)=>h.from(Ba(e.getBody(),t)),EH=(e,t)=>{const n=e.selection.getNode();return U0(e,n).filter(wt).fold(()=>bH(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(CH(e,t),yH(e,t),vH(e))),()=>h.some(De))},wH=e=>{T(xn(e,".mce-offscreen-selection"),Tt)},xH=(e,t)=>{const n=e.selection.getNode();return wt(n)&&!Sl(n)?U0(e,n.parentNode).filter(wt).fold(()=>h.some(()=>{wH(S.fromDom(e.getBody())),yr(e,t,S.fromDom(e.selection.getNode())),Bv(e)}),()=>h.some(De)):Mm(e)?h.some(()=>{Iv(e,e.selection.getRng(),S.fromDom(e.getBody()))}):h.none()},z0=e=>{const t=e.dom,n=e.selection,s=Ba(e.getBody(),n.getNode());if(Rs(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(F.before(o).toRange())}return!0},Um=(e,t)=>e.selection.isCollapsed()?EH(e,t):xH(e,t),SH=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Mn(t,e.getBody(),n).filter(s=>t?wB(s):xB(s)).bind(s=>h.from(jf(t?0:-1,s))).map(s=>()=>e.selection.select(s))},zm=(e,t)=>e.selection.isCollapsed()?SH(e,t):h.none(),xi=te,H0=e=>xi(e)&&e.data[0]===qt,V0=e=>xi(e)&&e.data[e.data.length-1]===qt,W0=e=>e.ownerDocument.createTextNode(qt),_H=e=>{if(xi(e.previousSibling))return V0(e.previousSibling)||e.previousSibling.appendData(qt),e.previousSibling;if(xi(e))return H0(e)||e.insertData(0,qt),e;{const t=W0(e);return e.parentNode.insertBefore(t,e),t}},kH=e=>{if(xi(e.nextSibling))return H0(e.nextSibling)||e.nextSibling.insertData(0,qt),e.nextSibling;if(xi(e))return V0(e)||e.appendData(qt),e;{const t=W0(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}},$c=(e,t)=>e?_H(t):kH(t),NH=re($c,!0),AH=re($c,!1),j0=(e,t)=>te(e.container())?$c(t,e.container()):$c(t,e.getNode()),q0=(e,t)=>{const n=t.get();return n&&e.container()===n&&ei(n)},Hm=(e,t)=>t.fold(n=>{mr(e.get());const s=NH(n);return e.set(s),h.some(F(s,s.length-1))},n=>pn(n).map(s=>{if(q0(s,e))return F(e.get(),1);{mr(e.get());const o=j0(s,!0);return e.set(o),F(o,1)}}),n=>Is(n).map(s=>{if(q0(s,e))return F(e.get(),e.get().length-1);{mr(e.get());const o=j0(s,!1);return e.set(o),F(o,o.length-1)}}),n=>{mr(e.get());const s=AH(n);return e.set(s),h.some(F(s,1))}),K0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return h.none()},rn=Os.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),G0=(e,t)=>{const n=Oo(t,e);return n||e},TH=(e,t,n)=>{const s=Pv(n),o=G0(t,s.container());return Fo(e,o,s).fold(()=>Un(o,s).bind(re(Fo,e,o)).map(r=>rn.before(r)),h.none)},RH=(e,t)=>gr(e,t)===null,Y0=(e,t,n)=>Fo(e,t,n).filter(re(RH,t)),PH=(e,t,n)=>{const s=Ov(n);return Y0(e,t,s).bind(o=>as(o,s).isNone()?h.some(rn.start(o)):h.none())},OH=(e,t,n)=>{const s=Pv(n);return Y0(e,t,s).bind(o=>Un(o,s).isNone()?h.some(rn.end(o)):h.none())},DH=(e,t,n)=>{const s=Ov(n),o=G0(t,s.container());return Fo(e,o,s).fold(()=>as(o,s).bind(re(Fo,e,o)).map(r=>rn.after(r)),h.none)},X0=e=>m$(Vm(e))===!1,zs=(e,t,n)=>K0([TH,PH,OH,DH],[e,t,n]).filter(X0),Vm=e=>e.fold(St,St,St,St),Q0=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Ic=e=>e.fold(rn.before,rn.before,rn.after,rn.after),Wm=e=>e.fold(rn.start,rn.start,rn.end,rn.end),BH=(e,t)=>Q0(e)===Q0(t)&&Vm(e)===Vm(t),$H=(e,t,n,s,o,r)=>wn(Fo(t,n,s),Fo(t,n,o),(i,a)=>i!==a&&g$(n,i,a)?rn.after(e?i:a):r).getOr(r),IH=(e,t)=>e.fold(ut,n=>!BH(n,t)),FH=(e,t,n,s,o)=>{const r=Vn(e,o);return Mn(e,n,r).map(re(Vn,e)).fold(()=>s.map(Ic),c=>zs(t,n,c).map(re($H,e,t,n,r,c)).filter(re(IH,s))).filter(X0)},LH=(e,t)=>e?t.fold(Bt(h.some,rn.start),h.none,Bt(h.some,rn.after),h.none):t.fold(h.none,Bt(h.some,rn.before),h.none,Bt(h.some,rn.end)),MH=(e,t,n,s)=>{const o=Vn(e,s),r=zs(t,n,o);return zs(t,n,o).bind(re(LH,e)).orThunk(()=>FH(e,t,n,r,s))},UH=e=>Ye(e.selection.getSel().modify),Z0=(e,t,n)=>{const s=e?1:-1;return t.setRng(F(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},zH=(e,t)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n);return UH(t)?e&&hf(s)?Z0(!0,t.selection,s):!e&&bf(s)?Z0(!1,t.selection,s):!1:!1};var Hs;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Hs||(Hs={}));const Fc=(e,t)=>e===Mt.Backwards?at(t):t,HH=(e,t,n)=>e===Mt.Forwards?t.next(n):t.prev(n),VH=(e,t,n,s)=>Pt(s.getNode(t===Mt.Forwards))?Hs.Br:Ds(n,s)===!1?Hs.Block:Hs.Wrap,J0=(e,t,n,s)=>{const o=$s(n);let r=s;const i=[];for(;r;){const a=HH(t,o,r);if(!a)break;if(Pt(a.getNode(!1)))return t===Mt.Forwards?{positions:Fc(t,i).concat([a]),breakType:Hs.Br,breakAt:h.some(a)}:{positions:Fc(t,i),breakType:Hs.Br,breakAt:h.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=VH(n,t,r,a);return{positions:Fc(t,i),breakType:c,breakAt:h.some(a)}}i.push(a),r=a}return{positions:Fc(t,i),breakType:Hs.Eol,breakAt:h.none()}},ew=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Mt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),jm=(e,t)=>Q(e,(n,s)=>n.fold(()=>h.some(s),o=>wn(Ut(o.getClientRects()),Ut(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),h.none()),Lc=(e,t)=>Ut(t.getClientRects()).bind(n=>jm(e,n.left)),za=re(J0,F.isAbove,-1),Ha=re(J0,F.isBelow,1),tw=re(ew,-1,za),nw=re(ew,1,Ha),WH=(e,t)=>za(e,t).breakAt.isNone(),jH=(e,t)=>Ha(e,t).breakAt.isNone(),qH=e=>pn(e).map(t=>[t].concat(Ha(e,t).positions)).getOr([]),KH=e=>Is(e).map(t=>za(e,t).positions.concat(t)).getOr([]),GH=(e,t)=>Lc(tw(e,t),t),YH=(e,t)=>Lc(nw(e,t),t),XH=wt,sw=(e,t)=>Math.abs(e.left-t),ow=(e,t)=>Math.abs(e.right-t),QH=e=>Hr(e,"node"),rw=(e,t)=>pl(e,(n,s)=>{const o=Math.min(sw(n,t),ow(n,t)),r=Math.min(sw(s,t),ow(s,t));return r===o&&QH(s)&&XH(s.node)||r<o?s:n}),ZH=e=>{const t=n=>z(n,s=>{const o=ur(s);return o.node=e,o});if(Ee(e))return t(e.getClientRects());if(te(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},iw=e=>je(e,ZH);var Va;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Va||(Va={}));const JH=(e,t,n,s)=>{for(;s=va(s,e,ib,t);)if(n(s))return},aw=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let C=iw([p]);e===-1&&(C=C.reverse());for(let y=0;y<C.length;y++){const w=C[y];if(!n(w,f)){if(a.length>0&&t(w,Eo(a))&&i++,w.line=i,o(w))return!0;a.push(w)}}},f=Eo(r.getClientRects());if(!f)return a;const d=r.getNode();return c(d),JH(e,s,c,d),a},e3=(e,t)=>t.line>e,t3=(e,t)=>t.line===e,n3=re(aw,Va.Up,ma,pa),s3=re(aw,Va.Down,pa,ma),o3=(e,t,n,s)=>{const o=$s(t);let r,i,a,c;const f=[];let d=0;const p=y=>Eo(y.getClientRects());e===1?(r=o.next,i=pa,a=ma,c=F.after(s)):(r=o.prev,i=ma,a=pa,c=F.before(s));const C=p(c);do{if(!c.isVisible())continue;const y=p(c);if(a(y,C))continue;f.length>0&&i(y,Eo(f))&&d++;const w=ur(y);if(w.position=c,w.line=d,n(w))return f;f.push(w)}while(c=r(c));return f},lw=e=>t=>e3(e,t),qm=e=>t=>t3(e,t),uo=(e,t)=>{e.selection.setRng(t),Ta(e,e.selection.getRng())},Km=(e,t,n)=>h.some(Im(e,t,n)),cw=(e,t,n,s,o,r)=>{const i=t===Mt.Forwards,a=$s(e.getBody()),c=re(Kf,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const w=Il(n);if(r(w))return co(t,e,w,t===Mt.Backwards,!1);if(Mm(e)){const v=n.cloneRange();return v.collapse(t===Mt.Backwards),h.from(v)}}const d=xa(t,e.getBody(),n);if(f(d))return Ua(e,d.getNode(!i));const p=Vn(i,c(d)),C=sb(n);if(!p)return C?h.some(n):h.none();if(f(p))return co(t,e,p.getNode(!i),i,!1);const y=c(p);return y&&f(y)&&Wl(p,y)?co(t,e,y.getNode(!i),i,!1):C?Km(e,p.toRange(),!1):h.none()},uw=(e,t,n,s,o,r)=>{const i=xa(t,e.getBody(),n),a=Eo(i.getClientRects()),c=t===Va.Down,f=e.getBody();if(!a)return h.none();if(Mm(e)){const x=c?F.fromRangeEnd(n):F.fromRangeStart(n);return(c?YH:GH)(f,x).orThunk(()=>h.from(x)).map(P=>P.toRange())}const p=(c?s3:n3)(f,lw(1),i),C=H(p,qm(1)),y=a.left,w=rw(C,y);if(w&&r(w.node)){const x=Math.abs(y-w.left),_=Math.abs(y-w.right);return co(t,e,w.node,x<_,!1)}let v;if(s(i)?v=i.getNode():o(i)?v=i.getNode(!0):v=Il(n),v){const x=o3(t,f,lw(1),v);let _=rw(H(x,qm(1)),y);if(_||(_=Eo(H(x,qm(0))),_))return Km(e,_.position.toRange(),!1)}return C.length===0?Gm(e,c).filter(c?o:s).map(x=>Im(e,x.toRange(),!1)):h.none()},Gm=(e,t)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n),o=aP(s.container(),e.getBody());if(t){const r=Ha(o,s);return eo(r.positions)}else{const r=za(o,s);return Ut(r.positions)}},fw=(e,t,n)=>Gm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Mc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},dw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},mw=(e,t,n)=>Hm(t,n).map(s=>(Mc(e,s),n)),r3=(e,t,n)=>{const s=F.fromRangeStart(e);if(e.collapsed)return s;{const o=F.fromRangeEnd(e);return n?as(t,o).getOr(o):Un(t,s).getOr(s)}},i3=(e,t,n)=>{const s=e.getBody(),o=r3(e.selection.getRng(),s,n),r=re(vr,e);return MH(n,r,s,o).bind(a=>mw(e,t,a))},a3=(e,t,n)=>{const s=z(xn(S.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=H(s,e),r=H(n,e);T(bt(o,r),re(dw,!1)),T(bt(r,o),re(dw,!0))},l3=(e,t)=>{if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){const n=F.fromRangeStart(e.selection.getRng());F.isTextPosition(n)&&h$(n)===!1&&(Mc(e,QR(t.get(),n)),t.set(null))}},c3=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=H(s,e);T(o,r=>{const i=F.fromRangeStart(t.selection.getRng());zs(e,t.getBody(),i).bind(a=>mw(t,n,a))})}},pw=(e,t,n)=>ba(e)?i3(e,t,n).isSome():!1,gw=(e,t,n)=>ba(t)?zH(e,t):!1,u3=e=>{const t=Ht(null),n=re(vr,e);return e.on("NodeChange",s=>{ba(e)&&(a3(n,e.dom,s.parents),l3(e,t),c3(n,e,t,s.parents))}),t},f3=re(gw,!0),d3=re(gw,!1),Uc=(e,t,n)=>{if(ba(e)){const s=Gm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?F.fromRangeEnd(o):F.fromRangeStart(o)});return zs(re(vr,e),e.getBody(),s).exists(o=>{const r=Ic(o);return Hm(n,r).exists(i=>(Mc(e,i),!0))})}else return!1},m3=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},p3=e=>wn(pn(e),Is(e),(t,n)=>{const s=Vn(!0,t),o=Vn(!1,n);return Un(e,s).forall(r=>r.isEqual(o))}).getOr(!0),hw=(e,t)=>n=>Hm(t,n).map(s=>()=>Mc(e,s)),bw=(e,t,n,s)=>{const o=e.getBody(),r=re(vr,e);e.undoManager.ignore(()=>{e.selection.setRng(m3(n,s)),Ld(e),zs(r,o,F.fromRangeStart(e.selection.getRng())).map(Wm).bind(hw(e,t)).each(Go)}),e.nodeChanged()},g3=(e,t)=>{const n=Oo(t,e);return n||e},h3=(e,t,n,s)=>{const o=g3(e.getBody(),s.container()),r=re(vr,e),i=zs(r,o,s);return i.bind(c=>n?c.fold(K(h.some(Wm(c))),h.none,K(h.some(Ic(c))),h.none):c.fold(h.none,K(h.some(Ic(c))),h.none,K(h.some(Wm(c))))).map(hw(e,t)).getOrThunk(()=>{const c=ql(n,o,s),f=c.bind(d=>zs(r,o,d));return wn(i,f,()=>Fo(r,o,s).bind(d=>p3(d)?h.some(()=>{yr(e,n,S.fromDom(d))}):h.none())).getOrThunk(()=>f.bind(()=>c.map(d=>()=>{n?bw(e,t,s,d):bw(e,t,d,s)})))})},Ym=(e,t,n)=>{if(e.selection.isCollapsed()&&ba(e)){const s=F.fromRangeStart(e.selection.getRng());return h3(e,t,n,s)}return h.none()},b3=(e,t)=>{const n=ao(t,e);return Te(n,os).fold(K(n),s=>n.slice(0,s))},C3=e=>Rh(e)===1,y3=(e,t,n,s)=>{const o=re(eF,t),r=z(H(s,o),i=>i.dom);if(r.length===0)yr(t,e,n);else{const i=JI(n.dom,r);t.selection.setRng(i.toRange())}},v3=(e,t)=>{const n=S.fromDom(e.getBody()),s=S.fromDom(e.selection.getStart()),o=H(b3(n,s),C3);return eo(o).bind(r=>{const i=F.fromRangeStart(e.selection.getRng());return E$(t,i,r.dom)&&!tF(r)?h.some(()=>y3(t,e,r,o)):h.none()})},Xm=(e,t)=>e.selection.isCollapsed()?v3(e,t):h.none(),Qm=(e,t,n)=>h.some(()=>{e._selectionOverrides.hideFakeCaret(),yr(e,t,S.fromDom(n))}),E3=(e,t)=>{const n=t?Pa:Oa,s=t?Mt.Forwards:Mt.Backwards,o=xa(s,e.getBody(),e.selection.getRng());return n(o)?Qm(e,t,o.getNode(!t)):h.from(Vn(t,o)).filter(r=>n(r)&&Wl(o,r)).map(r=>()=>Qm(e,t,r.getNode(!t)))},w3=(e,t)=>{const n=e.selection.getNode();return Ps(n)?Qm(e,t,n):h.none()},Zm=(e,t)=>e.selection.isCollapsed()?E3(e,t):w3(e,t),x3=e=>Xr(e,t=>Rs(t.dom)||wt(t.dom)).exists(t=>Rs(t.dom)),Jm=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},Cw=(e,t)=>{const n=e||RA(t)?"margin":"padding",s=Ts(t,"direction")==="rtl"?"-right":"-left";return n+s},S3=(e,t,n,s,o,r)=>{const i=Cw(n,S.fromDom(r));if(t==="outdent"){const a=Math.max(0,Jm(r.style[i])-s);e.setStyle(r,i,a?a+o:"")}else{const a=Jm(r.style[i])+s+o;e.setStyle(r,i,a)}},_3=(e,t)=>rt(t,n=>{const s=Cw(mC(e),n),o=vl(n,s).map(Jm).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),yw=e=>{const t=Ew(e);return!e.mode.isReadOnly()&&(t.length>1||_3(e,t))},vw=e=>gf(e)||ra(e),k3=e=>Zn(e).exists(vw),Ew=e=>H(eA(e.selection.getSelectedBlocks()),t=>!vw(t)&&!k3(t)&&x3(t)),ww=(e,t)=>{const{dom:n}=e,s=Z1(e),o=/[a-z%]+$/i.exec(s)[0],r=parseInt(s,10),i=mC(e);T(Ew(e),a=>{S3(n,t,i,r,o,a.dom)})},N3=e=>ww(e,"indent"),xw=e=>ww(e,"outdent"),Sw=e=>{if(e.selection.isCollapsed()&&yw(e)){const t=e.dom,n=e.selection.getRng(),s=F.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Od(S.fromDom(o),s))return h.some(()=>xw(e))}return h.none()},_w=(e,t,n)=>nn([Sw,Um,Fm,(s,o)=>Ym(s,t,o),Bm,qd,zm,Zm,$m,Xm],s=>s(e,n)),A3=(e,t)=>{_w(e,t,!1).fold(()=>{Ld(e),Bv(e)},Go)},T3=(e,t)=>{_w(e,t,!0).fold(()=>b$(e),Go)},R3=(e,t)=>{e.addCommand("delete",()=>{A3(e,t)}),e.addCommand("forwardDelete",()=>{T3(e,t)})},kw=5,P3=400,Nw=e=>e.touches===void 0||e.touches.length!==1?h.none():h.some(e.touches[0]),O3=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>kw||s>kw},D3=e=>{const t=To(),n=Ht(!1),s=Pf(o=>{e.dispatch("longpress",mt(_e({},o),{type:"longpress"})),n.set(!0)},P3);e.on("touchstart",o=>{Nw(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),Nw(o).each(r=>{t.on(i=>{O3(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",mt(_e({},o),{type:"tap"}))})},!0)},ep=(e,t)=>Fe(e,t.nodeName),B3=(e,t)=>te(t)?!0:Ee(t)?!ep(e,t)&&!zn(t):!1,$3=(e,t,n)=>U(hv(S.fromDom(n),S.fromDom(t)),s=>ep(e,s.dom)),I3=(e,t)=>{if(te(t)){if(t.nodeValue.length===0)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||ep(e,t.nextSibling)))return!0}return!1},F3=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements();let r=n.getStart();const i=e.getBody();let a,c,f;const d=Sn(e);if(!r||!Ee(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||$3(o,i,r))return;const C=n.getRng(),y=C.startContainer,w=C.startOffset,v=C.endContainer,x=C.endOffset,_=br(e);for(r=i.firstChild;r;)if(B3(o,r)){if(I3(o,r)){c=r,r=r.nextSibling,t.remove(c);continue}a||(a=t.create(d,dr(e)),r.parentNode.insertBefore(a,r),f=!0),c=r,r=r.nextSibling,a.appendChild(c)}else a=null,r=r.nextSibling;f&&_&&(C.setStart(y,w),C.setEnd(v,x),n.setRng(C),e.nodeChanged())},L3=e=>{e.on("NodeChange",re(F3,e))},Aw=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,M3=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},U3=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],M3(e,o,vC(e)));n.content=o}},z3=e=>{const t="contenteditable",n=" "+G.trim(UR(e))+" ",s=" "+G.trim(vC(e))+" ",o=Aw(n),r=Aw(s),i=zR(e);i.length>0&&e.on("BeforeSetContent",a=>{U3(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];!o(f)&&!r(f)||(i.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},H3=e=>oa(S.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),Tw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Cf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},V3=(e,t)=>{const n=H3(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),Tw(e,n);return}nb(n)&&(Tw(e,n),e.undoManager.add())}},W3=e=>{e.on("keyup compositionstart",re(V3,e))},Rw=wt,j3=(e,t,n)=>cw(t,e,n,$o,Io,Rw),q3=(e,t,n)=>uw(t,e,n,r=>$o(r)||pv(r),r=>Io(r)||gv(r),Rw),K3=e=>{const t=e.dom.create(Sn(e));return t.innerHTML='<br data-mce-bogus="1">',t},Pw=(e,t,n)=>{const s=$s(e.getBody()),o=re(Kf,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(F.fromRangeStart(n))){const a=S.fromDom(K3(e));t===1?xo(S.fromDom(r),a):Jn(S.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},G3=(e,t)=>{const n=t?Mt.Forwards:Mt.Backwards,s=e.selection.getRng();return j3(n,e,s).orThunk(()=>(Pw(e,n,s),h.none()))},Y3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return q3(n,e,s).orThunk(()=>(Pw(e,n,s),h.none()))},Ow=(e,t)=>G3(e,t).exists(n=>(uo(e,n),!0)),Dw=(e,t)=>Y3(e,t).exists(n=>(uo(e,n),!0)),Bw=(e,t)=>fw(e,t,t?Io:$o),zc=(e,t)=>Lm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(uo(e,n),!0)),X3=e=>R(["figcaption"],Et(e)),Q3=e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},Z3=(e,t,n)=>{n?Lt(e,t):Mh(e,t)},J3=(e,t,n,s)=>{const o=S.fromTag(n),r=S.fromTag("br");return Ns(o,s),Lt(o,r),Z3(e,o,t),Q3(r)},e2=(e,t)=>{const n=re(ot,t);return Xr(S.fromDom(e.container()),os,n).filter(X3)},t2=(e,t,n)=>t?jH(e.dom,n):WH(e.dom,n),n2=(e,t)=>{const n=S.fromDom(e.getBody()),s=F.fromRangeStart(e.selection.getRng()),o=Sn(e),r=dr(e);return e2(s,n).exists(()=>{if(t2(n,t,s)){const i=J3(n,t,o,r);return e.selection.setRng(i),!0}else return!1})},$w=(e,t)=>e.selection.isCollapsed()?n2(e,t):!1,Iw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},s2=e=>z(e,t=>_e(mt(_e({},Iw),{action:De}),t)),o2=e=>z(e,t=>_e(mt(_e({},Iw),{action:()=>h.none()}),t)),Fw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,r2=(e,t)=>je(s2(e),n=>Fw(n,t)?[n]:[]),i2=(e,t)=>je(o2(e),n=>Fw(n,t)?[n]:[]),Oe=(e,...t)=>()=>e.apply(null,t),Wa=(e,t)=>ge(r2(e,t),n=>n.action()),Lw=(e,t)=>nn(i2(e,t),n=>n.action()),Mw=(e,t)=>{const n=t?Mt.Forwards:Mt.Backwards,s=e.selection.getRng();return cw(e,n,s,Pa,Oa,Ps).exists(o=>(uo(e,o),!0))},Uw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return uw(e,n,s,Pa,Oa,Ps).exists(o=>(uo(e,o),!0))},zw=(e,t)=>fw(e,t,t?Oa:Pa),Hw=Os.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),a2=e=>Hw.none(e),ja=mt(_e({},Hw),{none:a2}),l2=(e,t)=>Vw(e,t,ut),Vw=(e,t,n)=>je(Qt(e),s=>As(s,t)?n(s)?[s]:[]:Vw(s,t,n)),c2=(e,t,n=ht)=>{if(n(t))return h.none();if(R(e,Et(t)))return h.some(t);const s=o=>As(o,"table")||n(o);return sa(t,e.join(","),s)},u2=(e,t)=>c2(["td","th"],e,t),f2=e=>l2(e,"th,td"),Ww=(e,t)=>or(e,"table",t),tp=(e,t,n,s,o=ut)=>{const r=s===1;if(!r&&n<=0)return ja.first(e[0]);if(r&&n>=e.length-1)return ja.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?ja.middle(t,a):tp(e,t,i,s,o)}},jw=(e,t)=>Ww(e,t).bind(n=>{const s=f2(n);return Te(s,r=>ot(e,r)).map(r=>({index:r,all:s}))}),d2=(e,t,n)=>jw(e,n).fold(()=>ja.none(e),o=>tp(o.all,e,o.index,1,t)),m2=(e,t,n)=>jw(e,n).fold(()=>ja.none(),o=>tp(o.all,e,o.index,-1,t)),p2=e=>or(e,"[contenteditable]"),qw=(e,t=!1)=>Kr(e)?e.dom.isContentEditable:p2(e).fold(K(t),n=>g2(n)==="true"),g2=e=>e.dom.contentEditable,h2=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),b2=(e,t)=>je(t,n=>{const s=h2(ur(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),C2=(e,t,n)=>Q(e,(s,o)=>s.fold(()=>h.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return h.some(a<i?o:r)}),h.none()),Kw=(e,t,n,s,o)=>{const r=xn(S.fromDom(n),"td,th,caption").map(a=>a.dom),i=H(b2(e,r),a=>t(a,o));return C2(i,s,o).map(a=>a.cell)},y2=e=>e.bottom,v2=e=>e.top,E2=(e,t)=>e.y<t,w2=(e,t)=>e.y>t,x2=re(Kw,y2,E2),S2=re(Kw,v2,w2),_2=(e,t)=>Ut(t.getClientRects()).bind(n=>x2(e,n.left,n.top)).bind(n=>Lc(KH(n),t)),k2=(e,t)=>eo(t.getClientRects()).bind(n=>S2(e,n.left,n.top)).bind(n=>Lc(qH(n),t)),N2=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),A2=e=>e.breakType===Hs.Wrap&&e.positions.length===0,T2=e=>e.breakType===Hs.Br&&e.positions.length===1,Gw=(e,t,n)=>{const s=e(t,n);return A2(s)||!Pt(n.getNode())&&T2(s)?!N2(e,t,s):s.breakAt.isNone()},R2=re(Gw,za),P2=re(Gw,Ha),O2=(e,t,n)=>{const s=F.fromRangeStart(t);return ui(!e,n).exists(o=>o.isEqual(s))},D2=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return AC()&&O2(t,o,n)?(co(r,e,n,!t,!1).each(i=>{uo(e,i)}),!0):!1},B2=(e,t,n)=>_2(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>jm(tw(e,F.before(t)),s.left))).getOr(F.before(t)),$2=(e,t,n)=>k2(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>jm(nw(e,F.after(t)),s.left))).getOr(F.after(t)),Yw=(e,t)=>{const n=t.getNode(e);return Ee(n)&&n.nodeName==="TABLE"?h.some(n):h.none()},I2=(e,t,n)=>{const s=Sn(t);t.undoManager.transact(()=>{const o=S.fromTag(s);Ns(o,dr(t)),Lt(o,S.fromTag("br")),e?xo(S.fromDom(n),o):Jn(S.fromDom(n),o);const r=t.dom.createRng();r.setStart(o.dom,0),r.setEnd(o.dom,0),uo(t,r)})},Xw=(e,t,n)=>{const s=Yw(!!t,n),o=t===!1;s.fold(()=>uo(e,n.toRange()),r=>ui(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>uo(e,n.toRange()),i=>I2(t,e,r)))},F2=(e,t,n,s)=>{const o=e.selection.getRng(),r=F.fromRangeStart(o),i=e.getBody();if(!t&&R2(s,r)){const a=B2(i,n,r);return Xw(e,t,a),!0}else if(t&&P2(s,r)){const a=$2(i,n,r);return Xw(e,t,a),!0}else return!1},Qw=(e,t,n)=>h.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>h.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),Zw=(e,t)=>Qw(e,t,D2),Jw=(e,t)=>Qw(e,t,F2),L2=e=>{const t=gi.exact(e,0,e,0);return qO(t)},ex=(e,t,n)=>n.fold(h.none,h.none,(s,o)=>tB(o).map(r=>L2(r)),s=>(e.execCommand("mceTableInsertRowAfter"),tx(e,t,s))),tx=(e,t,n)=>ex(e,t,d2(n,qw)),M2=(e,t,n)=>ex(e,t,m2(n,qw)),nx=(e,t)=>{const n=["table","li","dl"],s=S.fromDom(e.getBody()),o=a=>{const c=Et(a);return ot(a,s)||R(n,c)},r=e.selection.getRng(),i=S.fromDom(t?r.endContainer:r.startContainer);return u2(i,o).map(a=>(Ww(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?tx:M2)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},U2=(e,t,n)=>{const s=Ze.os.isMacOS()||Ze.os.isiOS();Wa([{keyCode:pe.RIGHT,action:Oe(Ow,e,!0)},{keyCode:pe.LEFT,action:Oe(Ow,e,!1)},{keyCode:pe.UP,action:Oe(Dw,e,!1)},{keyCode:pe.DOWN,action:Oe(Dw,e,!0)},...s?[{keyCode:pe.UP,action:Oe(zc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:pe.DOWN,action:Oe(zc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:pe.RIGHT,action:Oe(Zw,e,!0)},{keyCode:pe.LEFT,action:Oe(Zw,e,!1)},{keyCode:pe.UP,action:Oe(Jw,e,!1)},{keyCode:pe.DOWN,action:Oe(Jw,e,!0)},{keyCode:pe.RIGHT,action:Oe(Mw,e,!0)},{keyCode:pe.LEFT,action:Oe(Mw,e,!1)},{keyCode:pe.UP,action:Oe(Uw,e,!1)},{keyCode:pe.DOWN,action:Oe(Uw,e,!0)},{keyCode:pe.RIGHT,action:Oe(pw,e,t,!0)},{keyCode:pe.LEFT,action:Oe(pw,e,t,!1)},{keyCode:pe.RIGHT,ctrlKey:!s,altKey:s,action:Oe(f3,e,t)},{keyCode:pe.LEFT,ctrlKey:!s,altKey:s,action:Oe(d3,e,t)},{keyCode:pe.UP,action:Oe($w,e,!1)},{keyCode:pe.DOWN,action:Oe($w,e,!0)}],n).each(o=>{n.preventDefault()})},z2=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&U2(e,t,n)})},fs=(e,t)=>({container:e,offset:t}),Hc=lt.DOM,Vc=e=>t=>e===t?-1:0,H2=e=>t=>e.isBlock(t)||R(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",np=(e,t,n)=>{if(te(e)&&t>=0)return h.some(fs(e,t));{const s=cr(Hc);return h.from(s.backwards(e,t,Vc(e),n)).map(o=>fs(o.container,o.container.data.length))}},V2=(e,t,n)=>{if(te(e)&&t>=e.length)return h.some(fs(e,t));{const s=cr(Hc);return h.from(s.forwards(e,t,Vc(e),n)).map(o=>fs(o.container,0))}},sp=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t>=0&&t<=s.length)return h.some(fs(e,t));{const o=cr(Hc);return h.from(o.backwards(e,t,Vc(e),n)).bind(r=>{const i=r.container.data;return sp(r.container,t+i.length,n)})}},sx=(e,t,n)=>{if(!te(e))return h.none();const s=e.textContent;if(t<=s.length)return h.some(fs(e,t));{const o=cr(Hc);return h.from(o.forwards(e,t,Vc(e),n)).bind(r=>sx(r.container,t-s.length,n))}},op=(e,t,n,s,o)=>{const r=cr(e,H2(e));return h.from(r.backwards(t,n,s,o))},W2=e=>e.collapsed&&e.startContainer.nodeType===3,ox=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),rx=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,rp=(e,t)=>e.substring(t.length),j2=(e,t,n)=>{let s;for(s=t-1;s>=0;s--){const o=e.charAt(s);if(rx(o))return h.none();if(o===n)break}return h.some(s)},q2=(e,t,n,s=0)=>{if(!W2(t))return h.none();const o=(i,a,c)=>j2(c,a,n).getOr(a),r=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return op(e,t.startContainer,t.startOffset,o,r).bind(i=>{const a=t.cloneRange();if(a.setStart(i.container,i.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return h.none();const c=ox(a);return c.lastIndexOf(n)!==0||rp(c,n).length<s?h.none():h.some({text:rp(c,n),range:a,triggerChar:n})})},ix=(e,t,n,s=0)=>rB(S.fromDom(t.startContainer)).fold(()=>q2(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=ox(r);return h.some({range:r,text:rp(i,n),triggerChar:n})}),K2=e=>e.nodeType===ph,G2=e=>e.nodeType===Gi,ax=e=>{if(K2(e))return fs(e,e.data.length);{const t=e.childNodes;return t.length>0?ax(t[t.length-1]):fs(e,t.length)}},lx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?lx(n[t],0):n.length>0&&G2(e)&&n.length===t?ax(n[n.length-1]):fs(e,t)},Y2=(e,t)=>{const n=e.getParent(t.container,e.isBlock);return op(e,t.container,t.offset,(s,o)=>o===0?-1:o,n).filter(s=>{const o=s.container.data.charAt(s.offset-1);return!rx(o)}).isSome()},X2=e=>t=>{const n=lx(t.startContainer,t.startOffset);return!Y2(e,n)},Q2=(e,t,n)=>nn(n.triggerChars,s=>ix(e,t,s)),Z2=(e,t)=>{const n=t(),s=e.selection.getRng();return Q2(e.dom,s,n).bind(o=>cx(e,t,o))},cx=(e,t,n,s={})=>{const o=t(),i=e.selection.getRng().startContainer.nodeValue,a=H(o.lookupByChar(n.triggerChar),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>X2(e.dom))(n.range,i,n.text));if(a.length===0)return h.none();const c=Promise.all(z(a,f=>f.fetch(n.text,f.maxResults,s).then(p=>({matchText:n.text,items:p,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return h.some({lookupData:c,context:n})};var ds;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ds||(ds={}));const ip=(e,t,n)=>e.stype===ds.Error?t(e.serror):n(e.svalue),J2=e=>{const t=[],n=[];return T(e,s=>{ip(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},eV=(e,t)=>e.stype===ds.Error?{stype:ds.Error,serror:t(e.serror)}:e,tV=(e,t)=>e.stype===ds.Value?{stype:ds.Value,svalue:t(e.svalue)}:e,nV=(e,t)=>e.stype===ds.Value?t(e.svalue):e,sV=(e,t)=>e.stype===ds.Error?t(e.serror):e,ux=e=>({stype:ds.Value,svalue:e}),fx=e=>({stype:ds.Error,serror:e}),Wt={fromResult:e=>e.fold(fx,ux),toResult:e=>ip(e,mn.error,mn.value),svalue:ux,partition:J2,serror:fx,bind:nV,bindError:sV,map:tV,mapError:eV,fold:ip},ap=e=>dt(e)&&Xn(e).length>100?" removed due to size":JSON.stringify(e,null,2),oV=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return z(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Wc=(e,t)=>Wt.serror([{path:e,getErrorInfo:t}]),rV=(e,t,n)=>Wc(e,()=>'Could not find valid *required* value for "'+t+'" in '+ap(n)),iV=(e,t)=>Wc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),aV=(e,t,n)=>Wc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+ap(t)),lV=(e,t)=>Wc(e,K(t)),cV=(e,t,n,s)=>ft(n,s).fold(()=>aV(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),uV=(e,t)=>({extract:(o,r)=>ft(r,e).fold(()=>iV(o,e),a=>cV(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+Xn(t)}),fV=(e,t)=>t,dV=(e,t)=>Qs(e)&&Qs(t)?jc(e,t):t,dx=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Fe(o,r)&&(n[r]=e(n[r],o[r]))}return n},jc=dx(dV),mV=dx(fV),mx=()=>({tag:"required",process:{}}),pV=e=>({tag:"defaultedThunk",process:e}),px=e=>pV(K(e)),gV=()=>({tag:"option",process:{}}),hV=(e,t)=>e.length>0?Wt.svalue(jc(t,mV.apply(void 0,e))):Wt.svalue(t),gx=e=>Bt(Wt.serror,ze)(e),bV={consolidateObj:(e,t)=>{const n=Wt.partition(e);return n.errors.length>0?gx(n.errors):hV(n.values,t)},consolidateArr:e=>{const t=Wt.partition(e);return t.errors.length>0?gx(t.errors):Wt.svalue(t.values)}},CV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),yV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),hx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},lp=e=>{const t=(s,o)=>Wt.bindError(e(o),r=>lV(s,r)),n=K("val");return{extract:t,toString:n}},vV=lp(Wt.svalue),EV=(e,t,n,s)=>ft(t,n).fold(()=>rV(e,n,t),s),bx=(e,t,n,s)=>{const o=ft(e,t).getOrThunk(()=>n(e));return s(o)},wV=(e,t,n)=>n(ft(e,t)),xV=(e,t,n,s)=>{const o=ft(e,t).map(r=>r===!0?n(e):r);return s(o)},SV=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>Wt.svalue(h.none()),c=>{const f=o.extract(t.concat([s]),c);return Wt.map(f,h.some)});switch(e.tag){case"required":return EV(t,n,s,r);case"defaultedThunk":return bx(n,s,e.process,r);case"option":return wV(n,s,i);case"defaultedOptionThunk":return xV(n,s,e.process,i);case"mergeWithThunk":return bx(n,s,K({}),a=>{const c=jc(e.process(n),a);return r(c)})}},_V=(e,t,n)=>{const s={},o=[];for(const r of n)hx(r,(i,a,c,f)=>{const d=SV(c,e,t,i,f);Wt.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?Wt.serror(o):Wt.svalue(s)},cp=e=>({extract:(s,o)=>_V(s,o,e),toString:()=>{const s=z(e,o=>hx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),Cx=e=>({extract:(s,o)=>{const r=z(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return bV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),kV=e=>lp(t=>e(t).fold(Wt.serror,Wt.svalue)),NV=(e,t,n)=>{const s=t.extract([e],n);return Wt.mapError(s,o=>({input:n,errors:o}))},AV=(e,t,n)=>Wt.toResult(NV(e,t,n)),TV=e=>`Errors: 
`+oV(e.errors).join(`
`)+`

Input object: `+ap(e.input),yx=(e,t)=>uV(e,Wi(t,cp)),RV=K(vV),qc=(e,t)=>lp(n=>{const s=typeof n;return e(n)?Wt.svalue(n):Wt.serror(`Expected type: ${t} but got: ${s}`)}),PV=qc(vn,"number"),Kc=qc(me,"string"),OV=qc(Gn,"boolean"),up=qc(Ye,"function"),qa=CV,vx=yV,DV=e=>kV(t=>R(e,t)?mn.value(t):mn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Ex=(e,t)=>qa(e,e,mx(),t),wx=e=>Ex(e,Kc),xx=e=>Ex(e,up),BV=(e,t)=>qa(e,e,mx(),Cx(t)),fp=(e,t)=>qa(e,e,gV(),t),Gc=e=>fp(e,Kc),$V=e=>fp(e,up),IV=(e,t)=>qa(e,e,px(t),RV()),Si=(e,t,n)=>qa(e,e,px(t),n),Sx=(e,t)=>Si(e,t,PV),FV=(e,t)=>Si(e,t,Kc),_x=(e,t,n)=>Si(e,t,DV(n)),dp=(e,t)=>Si(e,t,OV),mp=(e,t)=>Si(e,t,up),LV=(e,t,n)=>Si(e,t,Cx(n)),MV=wx("type"),UV=xx("fetch"),pp=xx("onAction"),zV=mp("onSetup",()=>De),HV=Gc("text"),VV=Gc("icon"),WV=Gc("tooltip"),jV=Gc("label"),qV=dp("active",!1),KV=dp("enabled",!0),kx=dp("primary",!1),GV=e=>IV("columns",e),Ka=e=>FV("type",e),YV=cp([MV,wx("ch"),Sx("minChars",1),GV(1),Sx("maxResults",10),$V("matches"),UV,pp,LV("highlightOn",[],Kc)]),XV=e=>AV("Autocompleter",YV,e),gp=[KV,WV,VV,HV,zV],Nx=[qV].concat(gp),QV=[mp("predicate",ht),_x("scope","node",["node","editor"]),_x("position","selection",["node","selection","line"])],ZV=gp.concat([Ka("contextformbutton"),kx,pp,vx("original",St)]),JV=Nx.concat([Ka("contextformbutton"),kx,pp,vx("original",St)]),eW=gp.concat([Ka("contextformbutton")]),tW=Nx.concat([Ka("contextformtogglebutton")]),nW=yx("type",{contextformbutton:ZV,contextformtogglebutton:JV});cp([Ka("contextform"),mp("initValue",K("")),jV,BV("commands",nW),fp("launch",yx("type",{contextformbutton:eW,contextformtogglebutton:tW}))].concat(QV));const sW=e=>{const t=e.ui.registry.getAll().popups,n=Wi(t,i=>XV(i).fold(a=>{throw new Error(TV(a))},St)),s=$g(Ku(n,i=>i.ch)),o=Gu(n);return{dataset:n,triggerChars:s,lookupByChar:i=>H(o,a=>a.ch===i)}},oW=(e,t)=>{const n=Pf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},rW=e=>{const t=To(),n=Ht(!1),s=t.isSet,o=()=>{s()&&(oU(e),CO(e),n.set(!1),t.clear())},r=f=>{s()||(sU(e,f.range),t.set({triggerChar:f.triggerChar,matchLength:f.text.length}))},i=Yo(()=>sW(e)),a=f=>t.get().map(d=>ix(e.dom,e.selection.getRng(),d.triggerChar).bind(p=>cx(e,i,p,f))).getOrThunk(()=>Z2(e,i)),c=f=>{a(f).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(C=>{const y=d.context;C.triggerChar===y.triggerChar&&(y.text.length-C.matchLength>=10?o():(t.set(mt(_e({},C),{matchLength:y.text.length})),n.get()?bO(e,{lookupData:p}):(n.set(!0),hO(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(f,d)=>{const p=dt(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),oW(e,{cancelIfNecessary:o,load:c})},Ax=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:De,inputType:n},i=bb(new InputEvent(e));return t.dispatch(e,_e(_e(_e({},i),r),s))},hp=Ax("input"),bp=Ax("beforeinput"),iW=(e,t,n)=>{const s=n.keyCode===pe.BACKSPACE?"deleteContentBackward":"deleteContentForward";Lw([{keyCode:pe.BACKSPACE,action:Oe(Sw,e)},{keyCode:pe.BACKSPACE,action:Oe(Um,e,!1)},{keyCode:pe.DELETE,action:Oe(Um,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(Fm,e,!1)},{keyCode:pe.DELETE,action:Oe(Fm,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(Ym,e,t,!1)},{keyCode:pe.DELETE,action:Oe(Ym,e,t,!0)},{keyCode:pe.BACKSPACE,action:Oe(qd,e,!1)},{keyCode:pe.DELETE,action:Oe(qd,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(zm,e,!1)},{keyCode:pe.DELETE,action:Oe(zm,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(Zm,e,!1)},{keyCode:pe.DELETE,action:Oe(Zm,e,!0)},{keyCode:pe.BACKSPACE,action:Oe($m,e,!1)},{keyCode:pe.DELETE,action:Oe($m,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(Bm,e,!1)},{keyCode:pe.DELETE,action:Oe(Bm,e,!0)},{keyCode:pe.BACKSPACE,action:Oe(Xm,e,!1)},{keyCode:pe.DELETE,action:Oe(Xm,e,!0)}],n).each(o=>{n.preventDefault(),bp(e,s).isDefaultPrevented()||(o(),hp(e,s))})},aW=(e,t)=>{Wa([{keyCode:pe.BACKSPACE,action:Oe(z0,e)},{keyCode:pe.DELETE,action:Oe(z0,e)}],t)},lW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&iW(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()===!1&&aW(e,n)})},cW=e=>{for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},Ga=(e,t)=>{let n,s=t;const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=cW(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Zt),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new $t(t,t);for(;n=a.current();){if(te(n)){i.setStart(n,0),i.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}s=n,n=a.next()}n||(i.setStart(s,0),i.setEnd(s,0))}else Pt(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),Ta(e,i)},uW=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},Cp=e=>h.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),fW=e=>Cp(e).fold(K(""),t=>t.nodeName.toUpperCase()),dW=e=>Cp(e).filter(t=>ra(S.fromDom(t))).isSome(),mW=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,pW=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Tx=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,Rx=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),gW=e=>Rx(e)&&Rx(e.parentNode),Yc=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Xc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Ee(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},hW=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng();if(n===e.getBody())return;gW(n)&&(o="LI");let a=t(o);if(Xc(n,s,!0)&&Xc(n,s,!1))if(Tx(n,"LI")){const c=Yc(n);r.insertAfter(a,c),pW(n)?r.remove(c):r.remove(n)}else r.replace(a,n);else if(Xc(n,s,!0))Tx(n,"LI")?(r.insertAfter(a,Yc(n)),a.appendChild(r.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),r.remove(s);else if(Xc(n,s,!1))r.insertAfter(a,Yc(n)),r.remove(s);else{n=Yc(n);const c=i.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&mW(f,"LI")?(a=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(a,n)),r.remove(s)}Ga(e,a)},bW=e=>{T(Eb(S.fromDom(e),In),t=>{const n=t.dom;n.nodeValue=_o(n.nodeValue)})},CW=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),yW=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),yp=e=>{e.innerHTML='<br data-mce-bogus="1">'},vp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Px=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",vW=(e,t,n)=>{let s=n;const o=[];let r;if(!!s){for(;s=s.firstChild;){if(e.isBlock(s))return;Ee(s)&&!t[s.nodeName.toLowerCase()]&&o.push(s)}for(r=o.length;r--;)s=o[r],(!s.hasChildNodes()||s.firstChild===s.lastChild&&s.firstChild.nodeValue===""||CW(e,s))&&e.remove(s)}},Ep=(e,t,n)=>te(t)===!1?n:e?n===1&&t.data.charAt(n-1)===qt?0:n:n===t.data.length-1&&t.data.charAt(n)===qt?t.data.length:n,EW=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Ep(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Ep(!1,e.endContainer,e.endOffset)),t},wW=e=>{do te(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},Ox=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},xW=(e,t,n)=>{const s=e.dom;h.from(n.style).map(s.parseStyle).each(c=>{const f=Fh(S.fromDom(t)),d=_e(_e({},f),c);s.setStyles(t,d)});const o=h.from(n.class).map(c=>c.split(/\s+/)),r=h.from(t.className).map(c=>H(c.split(/\s+/),f=>f!==""));wn(o,r,(c,f)=>{const d=H(f,C=>!R(c,C)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=ji(n,(c,f)=>!R(i,f));s.setAttribs(t,a)},Ya=(e,t)=>{if(Sn(e).toLowerCase()===t.tagName.toLowerCase()){const s=dr(e);xW(e,t,s)}},SW=(e,t,n,s,o)=>{let r,i,a,c,f,d;const p=e.dom,C=Ox(p,s);if(i=p.getParent(s,p.isBlock),!i||!Px(p,i)){if(i=i||C,i===e.getBody()||yW(i)?d=i.nodeName.toLowerCase():d=i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return r=p.create(t),Ya(e,r),i.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(c=s;c.parentNode!==i;)c=c.parentNode;for(;c&&!p.isBlock(c);)a=c,c=c.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(r=p.create(t),Ya(e,r),a.parentNode.insertBefore(r,a),c=a;c&&!p.isBlock(c);)f=c.nextSibling,r.appendChild(c),c=f;n.setStart(s,o),n.setEnd(s,o)}}return s},_W=(e,t)=>{t.normalize();const n=t.lastChild;(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},kW=(e,t)=>{const n=V1(e);return Ft(t)?!1:me(n)?R(G.explode(n),t.nodeName.toLowerCase()):n},Dx={insert:(e,t)=>{let n,s,o,r,i,a,c,f,d;const p=e.dom,C=e.schema,y=C.getNonEmptyElements(),w=e.selection.getRng(),v=Sn(e),x=V=>{let j=s,X,J,ve;const ue=C.getTextInlineElements();if(V||f==="TABLE"||f==="HR"?X=p.create(V||v):X=r.cloneNode(!1),ve=X,H1(e)===!1)p.setAttrib(X,"style",null),p.setAttrib(X,"class",null);else do if(ue[j.nodeName]){if(Fs(j)||zn(j))continue;J=j.cloneNode(!1),p.setAttrib(J,"id",""),X.hasChildNodes()?(J.appendChild(X.firstChild),X.appendChild(J)):(ve=J,X.appendChild(J))}while((j=j.parentNode)&&j!==M);return Ya(e,X),yp(ve),X},_=V=>{let j,X;const J=Ep(V,s,o);if(te(s)&&(V?J>0:J<s.nodeValue.length))return!1;if(s.parentNode===r&&d&&!V||V&&Ee(s)&&s===r.firstChild)return!0;if(vp(s,"TABLE")||vp(s,"HR"))return d&&!V||!d&&V;const ve=new $t(s,r);for(te(s)&&(V&&J===0?ve.prev():!V&&J===s.nodeValue.length&&ve.next());j=ve.current();){if(Ee(j)){if(!j.getAttribute("data-mce-bogus")&&(X=j.nodeName.toLowerCase(),y[X]&&X!=="br"))return!1}else if(te(j)&&!rr(j.nodeValue))return!1;V?ve.prev():ve.next()}return!0},P=()=>{/^(H[1-6]|PRE|FIGURE)$/.test(f)&&ce!=="HGROUP"?i=x(v):i=x(),kW(e,c)&&Px(p,c)&&p.isEmpty(r)?i=p.split(c,r):p.insertAfter(i,r),Ga(e,i)};oc(p,w).each(V=>{w.setStart(V.startContainer,V.startOffset),w.setEnd(V.endContainer,V.endOffset)}),s=w.startContainer,o=w.startOffset;const O=!!(t&&t.shiftKey),I=!!(t&&t.ctrlKey);Ee(s)&&s.hasChildNodes()&&(d=o>s.childNodes.length-1,s=s.childNodes[Math.min(o,s.childNodes.length-1)]||s,d&&te(s)?o=s.nodeValue.length:o=0);const M=Ox(p,s);if(!M)return;O||(s=SW(e,v,w,s,o)),r=p.getParent(s,p.isBlock),c=r?p.getParent(r.parentNode,p.isBlock):null,f=r?r.nodeName.toUpperCase():"";const ce=c?c.nodeName.toUpperCase():"";if(ce==="LI"&&!I&&(r=c,c=c.parentNode,f=ce),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(r)){hW(e,x,c,r,v);return}r!==e.getBody()&&(Jr(r)?(i=Cf(r),p.isEmpty(r)&&yp(r),Ya(e,i),Ga(e,i)):_()?P():_(!0)?(i=r.parentNode.insertBefore(x(),r),Ga(e,vp(r,"HR")?i:r)):(n=EW(w).cloneRange(),n.setEndAfter(r),a=n.extractContents(),bW(a),wW(a),i=a.firstChild,p.insertAfter(a,r),vW(p,y,i),_W(p,r),p.isEmpty(r)&&yp(r),i.normalize(),p.isEmpty(i)?(p.remove(i),P()):(Ya(e,i),Ga(e,i))),p.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},fakeEventName:"insertParagraph"},NW=(e,t,n)=>{const s=new $t(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||o.length>0)return!0},Bx=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Ta(e,s)},AW=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i;oc(s,o).each(y=>{o.setStart(y.startContainer,y.startOffset),o.setEnd(y.endContainer,y.endOffset)});let a=o.startOffset,c=o.startContainer;if(c.nodeType===1&&c.hasChildNodes()){const y=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,y&&c.nodeType===3?a=c.nodeValue.length:a=0}let f=s.getParent(c,s.isBlock);const d=f?s.getParent(f.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",C=!!(t&&t.ctrlKey);p==="LI"&&!C&&(f=d),c&&c.nodeType===3&&a>=c.nodeValue.length&&(NW(e.schema,c,f)||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),If(s,o,r),Bx(e,r,i),e.undoManager.add()},TW=(e,t)=>{const n=S.fromTag("br");Jn(S.fromDom(t),n),e.undoManager.add()},RW=(e,t)=>{OW(e.getBody(),t)||xo(S.fromDom(t),S.fromTag("br"));const n=S.fromTag("br");xo(S.fromDom(t),n),Bx(e,n.dom,!1),e.undoManager.add()},PW=e=>Pt(e.getNode()),OW=(e,t)=>PW(F.after(t))?!0:Un(e,F.after(t)).map(n=>Pt(n.getNode())).getOr(!1),$x=e=>e&&e.nodeName==="A"&&"href"in e,DW=e=>e.fold(ht,$x,$x,ht),BW=e=>{const t=re(vr,e),n=F.fromRangeStart(e.selection.getRng());return zs(t,e.getBody(),n).filter(DW)},$W=(e,t)=>{t.fold(De,re(TW,e),re(RW,e),De)},Ix={insert:(e,t)=>{const n=BW(e);n.isSome()?n.each(re($W,e)):AW(e,t)},fakeEventName:"insertLineBreak"},Fx=(e,t)=>Cp(e).filter(n=>t.length>0&&As(S.fromDom(n),t)).isSome(),IW=e=>Fx(e,U1(e)),FW=e=>Fx(e,z1(e)),ns=Os.generate([{br:[]},{block:[]},{none:[]}]),LW=(e,t)=>FW(e),Lx=e=>(t,n)=>dW(t)===e,Mx=(e,t)=>(n,s)=>fW(n)===e.toUpperCase()===t,Qc=e=>Mx("pre",e),MW=()=>Mx("summary",!0),Zc=e=>(t,n)=>L1(t)===e,UW=(e,t)=>IW(e),Jc=(e,t)=>t,zW=e=>{const t=Sn(e),n=uW(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},ms=(e,t)=>(n,s)=>Q(e,(r,i)=>r&&i(n,s),!0)?h.some(t):h.none(),HW=(e,t)=>K0([ms([LW],ns.none()),ms([MW()],ns.br()),ms([Qc(!0),Zc(!1),Jc],ns.br()),ms([Qc(!0),Zc(!1)],ns.block()),ms([Qc(!0),Zc(!0),Jc],ns.block()),ms([Qc(!0),Zc(!0)],ns.br()),ms([Lx(!0),Jc],ns.br()),ms([Lx(!0)],ns.block()),ms([UW],ns.br()),ms([Jc],ns.br()),ms([zW],ns.block())],[e,!!(t&&t.shiftKey)]).getOr(ns.none()),eu=(e,t,n)=>{t.selection.isCollapsed()||Ld(t),!(Ne(n)&&bp(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),Ne(n)&&hp(t,e.fakeEventName))},Ux=(e,t)=>{const n=()=>eu(Ix,e,t),s=()=>eu(Dx,e,t),o=HW(e,t);switch(M1(e)){case"linebreak":o.fold(n,n,De);break;case"block":o.fold(s,s,De);break;case"invert":o.fold(s,n,De);break;default:o.fold(n,s,De);break}},VW=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),gM(e.undoManager),e.undoManager.transact(()=>{Ux(e,t)}))},WW=e=>{e.on("keydown",t=>{t.keyCode===pe.ENTER&&VW(e,t)})},jW=(e,t,n)=>{const s=Ze.os.isMacOS()||Ze.os.isiOS();Wa([{keyCode:pe.END,action:Oe(Bw,e,!0)},{keyCode:pe.HOME,action:Oe(Bw,e,!1)},...s?[]:[{keyCode:pe.HOME,action:Oe(zc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:pe.END,action:Oe(zc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:pe.END,action:Oe(zw,e,!0)},{keyCode:pe.HOME,action:Oe(zw,e,!1)},{keyCode:pe.END,action:Oe(Uc,e,!0,t)},{keyCode:pe.HOME,action:Oe(Uc,e,!1,t)}],n).each(o=>{n.preventDefault()})},qW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&jW(e,t,n)})},KW=e=>{e.on("input",t=>{t.isComposing===!1&&YB(e)})},GW=Xo(),YW=(e,t,n)=>{Wa([{keyCode:pe.PAGE_UP,action:Oe(Uc,e,!1,t)},{keyCode:pe.PAGE_DOWN,action:Oe(Uc,e,!0,t)}],n)},zx=e=>e.stopImmediatePropagation(),Hx=e=>e.keyCode===pe.PAGE_UP||e.keyCode===pe.PAGE_DOWN,Vx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",zx,!0):!n&&e.get()&&t.off("NodeChange",zx),e.set(n)},XW=(e,t)=>{if(GW.os.isMacOS())return;const n=Ht(!1);e.on("keydown",s=>{Hx(s)&&Vx(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()===!1&&YW(e,t,s),Hx(s)&&n.get()&&(Vx(n,e,!1),e.nodeChanged())})},Wx=(e,t)=>{const n=t.container(),s=t.offset();return te(n)?(n.insertData(s,e),h.some(F(n,s+e.length))):Vl(t).map(o=>{const r=S.fromText(e);return t.isAtEnd()?xo(o,r):Jn(o,r),F(r.dom,e.length)})},QW=re(Wx,Zt),ZW=re(Wx," "),JW=e=>t=>t.fold(n=>as(e.dom,F.before(n)),n=>pn(n),n=>Is(n),n=>Un(e.dom,F.after(n))),e6=(e,t)=>n=>zB(e,n)?QW(t):ZW(t),t6=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),n6=e=>{const t=F.fromRangeStart(e.selection.getRng()),n=S.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(vr,e),o=F.fromRangeStart(e.selection.getRng());return zs(s,e.getBody(),o).bind(JW(n)).map(r=>()=>e6(n,t)(r).each(t6(e)))}else return h.none()},s6=(e,t)=>{Lw([{keyCode:pe.SPACEBAR,action:Oe(n6,e)}],t).each(n=>{t.preventDefault(),bp(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),hp(e,"insertText",{data:" "}))})},o6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&s6(e,t)})},r6=e=>jR(e)?[{keyCode:pe.TAB,action:Oe(nx,e,!0)},{keyCode:pe.TAB,shiftKey:!0,action:Oe(nx,e,!1)}]:[],i6=(e,t)=>{Wa([...r6(e)],t).each(n=>{t.preventDefault()})},a6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&i6(e,t)})},l6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),rW(e),lo(e))return Ht(null);{const t=u3(e);return W3(e),z2(e,t),lW(e,t),WW(e),o6(e),KW(e),a6(e),qW(e,t),XW(e,t),t}};class c6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!hd(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||ec(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&ec(t)&&(t.selection.getNode().nodeName==="IMG"?Hn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t){const n=this.editor.selection;let s,o,r;this.editor.initialized&&n&&!bR(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),s=n.getStart(!0)||r,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,r))&&(s=r),o=[],this.editor.dom.getParent(s,i=>{if(i===r)return!0;o.push(i)}),t=t||{},t.element=s,t.parents=o,this.editor.dispatch("NodeChange",t))}isSameElementPath(t){let n;const s=this.editor,o=at(s.dom.getParents(t,ut,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const jx="x-tinymce/html",tu=K(jx),wp="<!-- "+jx+" -->",u6=e=>wp+e,f6=e=>e.replace(wp,""),qx=e=>e.indexOf(wp)!==-1,d6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),m6=(e,t)=>{let n="<"+e;const s=Ku(t,(o,r)=>r+'="'+ko.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},p6=(e,t,n)=>{const s=e.split(/\n\n/),o=m6(t,n),r="</"+t+">",i=z(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:z(i,a).join("")},Kx="%MCEPASTEBIN%",g6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Kx);Ze.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},h6=(e,t)=>{const n=e.dom;if(xp(e)){let s;const o=t.get();for(;s=xp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},xp=e=>e.dom.get("mcepastebin"),b6=e=>e&&e.id==="mcepastebin",C6=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=H(e.getBody().childNodes,b6);T(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},Gx=e=>e===Kx,y6=e=>{const t=Ht(null);return{create:()=>g6(e,t),remove:()=>h6(e,t),getEl:()=>xp(e),getHtml:()=>C6(e),getLastRng:t.get}},Yx=(e,t)=>(G.each(t,n=>{$n(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),v6=e=>{const t=Ao(),n=yi({},t);let s="";const o=t.getVoidElements(),r=G.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,d=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())&&(c=c.firstChild))do a(c);while(c=c.next);i[f]&&d.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=Yx(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},Xx=e=>(e=Yx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Zt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),E6=e=>{let t=0;return()=>e+t++},w6=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(n,t)?"image/"+n[t]:"image/"+t},x6=(e,t)=>{const n=yi({},e.schema);n.addNodeFilter("meta",o=>{G.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Do({validate:!0},e.schema).serialize(s)},Qx=(e,t)=>({content:e,cancelled:t}),S6=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=vO(e,s,n);return Qx(o.node.innerHTML,o.isDefaultPrevented())},_6=(e,t,n)=>{const s=yO(e,t,n),o=x6(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?S6(e,o,n):Qx(o,s.isDefaultPrevented())},k6=(e,t,n)=>_6(e,t,n),Sp=(e,t)=>(e.insertContent(t,{merge:$R(e),paste:!0}),!0),_p=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),N6=(e,t)=>_p(t)&&U(EC(e),n=>zg(t.toLowerCase(),`.${n.toLowerCase()}`)),A6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),T6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),R6=(e,t,n)=>!e.selection.isCollapsed()&&_p(t)?T6(e,t,n):!1,P6=(e,t,n)=>N6(e,t)?A6(e,t,n):!1,O6=(e,t)=>{G.each([R6,P6,Sp],n=>n(e,t,Sp)!==!0)},D6=(e,t,n)=>{n||!IR(e)?Sp(e,t):O6(e,t)},B6=E6("mceclip"),Zx=(e,t,n,s)=>{const o=k6(e,t,n);o.cancelled===!1&&D6(e,o.content,s)},nu=(e,t,n)=>{const s=n||qx(t);Zx(e,f6(t),s,!1)},kp=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=lb(n,LR(e)),o=p6(s,Sn(e),dr(e));Zx(e,o,!1,!0)},Jx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},_i=(e,t)=>t in e&&e[t].length>0,eS=e=>_i(e,"text/html")||_i(e,"text/plain"),$6=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ne(n)?e.dom.encode(n[1]):null},I6=(e,t,n,s)=>{const o=B6(),r=uC(e)&&Ne(n.name),i=r?$6(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},F6=(e,t)=>{Em(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),f=c!=null?c:I6(e,a,i,r);nu(e,`<img src="${f.blobUri()}">`,!1)})},L6=e=>e.type==="paste",M6=e=>Promise.all(z(e,t=>IE(t).then(n=>({file:t,uri:n})))),U6=e=>{const t=EC(e);return n=>Gt(n.type,"image/")&&U(t,s=>w6(s)===n.type)},z6=(e,t)=>{const n=t.items?je(Ct(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?Ct(t.files):[];return H(n.length>0?n:s,U6(e))},tS=(e,t,n)=>{const s=L6(t)?t.clipboardData:t.dataTransfer;if(zl(e)&&s){const o=z6(e,s);if(o.length>0)return t.preventDefault(),M6(o).then(r=>{n&&e.selection.setRng(n),T(r,i=>{F6(e,i)})}),!0}return!1},H6=e=>{var t,n;return Ze.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},V6=e=>pe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,nS=(e,t,n,s)=>{let o=Xx(n);const r=_i(t,tu())||qx(n),i=!r&&d6(o),a=_p(o);(Gx(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(_i(t,"text/plain")&&i?o=t["text/plain"]:o=v6(o)),!Gx(o)&&(s?kp(e,o):nu(e,o,r))},W6=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{V6(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||H6(r))return;const i=n.get()==="text"||s;s=!1;const a=Jx(r.clipboardData);!eS(a)&&tS(e,r,o())||(_i(a,"text/html")?(r.preventDefault(),nS(e,a,a["text/html"],i)):(t.create(),Hn.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),nS(e,a,c,i)},0)))})},j6=e=>{const t=o=>Gt(o,"webkit-fake-url"),n=o=>Gt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!zl(e)&&s(i))for(const a of o){const c=a.attr("src");me(c)&&!a.attr("data-mce-object")&&c!==Ze.transparentSrc&&(t(c)||!MR(e)&&n(c))&&a.remove()}})},q6=(e,t,n)=>{W6(e,t,n),j6(e)},K6=(e,t)=>{t.get()==="text"?(t.set("html"),xy(e,!1)):(t.set("text"),xy(e,!0)),e.focus()},G6=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{K6(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&nu(e,s.html,s.internal),s.text&&kp(e,s.text)})},Y6=(e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(tu(),t),!0}catch{return!1}},sS=(e,t,n,s)=>{Y6(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},oS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Hn.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},rS=e=>({html:u6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),X6=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),iS=e=>!e.selection.isCollapsed()||X6(e),Q6=e=>t=>{!t.isDefaultPrevented()&&iS(e)&&sS(t,rS(e),oS(e),()=>{if(Ze.browser.isChromium()||Ze.browser.isFirefox()){const n=e.selection.getRng();Hn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Z6=e=>t=>{!t.isDefaultPrevented()&&iS(e)&&sS(t,rS(e),oS(e),De)},J6=e=>{e.on("cut",Q6(e)),e.on("copy",Z6(e))},aS=(e,t)=>{var n,s;return hi.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},ej=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},lS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},tj=e=>U(e.files,t=>/^image\//.test(t.type)),nj=(e,t)=>{RR(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),zl(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&tj(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=aS(e,n);if(Ft(s))return;const o=Jx(n.dataTransfer),r=_i(o,tu());if((!eS(o)||ej(o))&&tS(e,n,s))return;const i=o[tu()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Hn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),lS(e,s);const c=Xx(a);o["text/html"]?nu(e,c,r):kp(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{zl(e)&&t.get()===!1&&(n.preventDefault(),lS(e,aS(e,n))),n.type==="dragend"&&t.set(!1)})},sj=e=>{const t=o=>r=>{o(e,r)},n=PR(e);Ye(n)&&e.on("PastePreProcess",t(n));const s=OR(e);Ye(s)&&e.on("PastePostProcess",t(s))},oj=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},rj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,cS=e=>G.trim(e).replace(rj,Yl).toLowerCase(),ij=(e,t,n)=>{const s=DR(e);if(n||s==="all"||!BR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,d)=>{const p=r.parseStyle(r.decode(f)),C={};for(let w=0;w<o.length;w++){const v=p[o[w]];let x=v,_=r.getStyle(i,o[w],!0);/color/.test(o[w])&&(x=cS(x),_=cS(_)),_!==x&&(C[o[w]]=v)}const y=r.serializeStyle(C,"span");return y?c+' style="'+y+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},aj=e=>{(Ze.browser.isChromium()||Ze.browser.isSafari())&&oj(e,ij)},lj=e=>{const t=Ht(!1),n=Ht(FR(e)?"text":"html"),s=y6(e);aj(e),G6(e,n),sj(e),e.on("PreInit",()=>{J6(e),nj(e,t),q6(e,s,n)})},cj=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},uj=e=>{e.parser.addNodeFilter("details",t=>{T(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{T(t,n=>{const s=n.attr("data-mce-open");n.attr("open",me(s)?s:null),n.attr("data-mce-open",null)})})},fj=e=>{cj(e),uj(e)},dj=Pt,uS=te,mj=e=>wt(e.dom),pj=e=>Rs(e.dom),fS=e=>t=>ot(S.fromDom(e),t),gj=(e,t)=>Xr(S.fromDom(e),n=>pj(n)||os(n),fS(t)).getOr(S.fromDom(t)).dom,dS=(e,t)=>Xr(S.fromDom(e),mj,fS(t)),mS=(e,t,n)=>{const s=new $t(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!dj(i);i=o())ts(i)&&(r=i);return r},hj=(e,t)=>{const s=F.fromRangeStart(e).getNode(),o=gj(s,t),r=mS(s,o,!1),i=mS(s,o,!0),a=document.createRange();return dS(r,o).fold(()=>{uS(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),dS(i,o).fold(()=>{uS(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a},bj=e=>{const t=hj(e.selection.getRng(),e.getBody());e.selection.setRng(Qd(t))},Cj=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),bj(e))})};var Xa;(function(e){e.Before="before",e.After="after"})(Xa||(Xa={}));const yj=(e,t)=>Math.abs(e.left-t),vj=(e,t)=>Math.abs(e.right-t),Ej=(e,t)=>e>=t.top&&e<=t.bottom,wj=(e,t)=>e.top<t.bottom&&e.bottom>t.top,xj=(e,t)=>{const n=QT(e,t)/Math.min(e.height,t.height);return wj(e,t)&&n>.5},Sj=(e,t)=>{const n=H(e,s=>Ej(t,s));return XT(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=be(e,i=>xj(i,s));return[o,r]})},_j=(e,t)=>({node:e.node,position:yj(e,t)<vj(e,t)?Xa.Before:Xa.After}),kj=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Np=(e,t,n)=>{const s=d=>ts(d.node)?h.some(d):Ee(d.node)?Np(Ct(d.node.childNodes),t,n):h.none(),o=(d,p)=>{if(d.length>=2){const C=s(d[0]).getOr(d[0]),y=s(d[1]).getOr(d[1]);if(Math.abs(p(C,t,n)-p(y,t,n))<2){if(te(C.node))return h.some(C);if(te(y.node))return h.some(y)}}return h.none()},r=(d,p)=>{const C=Yn(d,(y,w)=>p(y,t,n)-p(w,t,n));return o(C,p).orThunk(()=>nn(C,s))},[i,a]=Sj(iw(e),n),{pass:c,fail:f}=be(a,d=>d.top<n);return r(i,kj).orThunk(()=>r(f,Bb)).orThunk(()=>r(c,Bb))},Nj=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>Np(Ct(r.dom.childNodes),n,s),a=>{const c=H(Ct(r.dom.childNodes),f=>f!==a.dom);return Np(c,n,s)}).orThunk(()=>(ot(r,e)?h.none():zN(r)).bind(c=>o(c,h.some(r))));return o(t,h.none())},Aj=(e,t,n)=>{const s=S.fromDom(e),o=wo(s),i=S.fromPoint(o,t,n).filter(a=>so(s,a)).getOr(s);return Nj(s,i,t,n)},Tj=(e,t,n)=>Aj(e,t,n).filter(s=>ya(s.node)).map(s=>_j(s,t)),pS=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-s.clientTop,left:t.left+o.pageXOffset-s.clientLeft}},Rj=e=>e.inline?pS(e.getBody()):{left:0,top:0},Pj=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Oj=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},Dj=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=pS(e.getContentAreaContainer()),s=Oj(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},Bj=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),$j=(e,t)=>Bj(Rj(e),Pj(e),Dj(e,t)),Ap=wt,Ij=Rs,Fj=(e,t)=>Ap(t)&&t!==e,Lj=(e,t,n)=>t===n||e.dom.isChildOf(t,n)?!1:!Ap(t),Mj=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},Uj=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},zj=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Hj=(e,t,n,s,o,r)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(i=t.pageX+n-o),t.pageY+s>r&&(a=t.pageY+s-r),e.style.width=n-i+"px",e.style.height=s-a+"px"},gS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Vj=e=>e.button===0,Wj=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),jj=(e,t)=>n=>{if(Vj(n)){const s=ge(t.dom.getParents(n.target),t1(Ap,Ij)).getOr(null);if(Fj(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:Uj(t,s,s.offsetWidth,s.offsetHeight)})}}},qj=(e,t)=>{const n=$l((s,o)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(s,o)},0);return t.on("remove",n.cancel),s=>e.on(o=>{const r=Math.max(Math.abs(s.screenX-o.screenX),Math.abs(s.screenY-o.screenY));if(!o.dragging&&r>10){if(t.dispatch("dragstart",{target:o.element}).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){const i=Wj(o,$j(t,s));zj(o.ghost,t.getBody()),Hj(o.ghost,i,o.width,o.height,o.maxX,o.maxY),n.throttle(s.clientX,s.clientY)}})},Kj=e=>{const n=e.getSel().getRangeAt(0).startContainer;return n.nodeType===3?n.parentNode:n},Gj=(e,t)=>n=>{e.on(s=>{if(s.dragging){if(Lj(t,Kj(t.selection),s.element)){const o=Mj(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{gS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),hS(e)},Yj=(e,t)=>()=>{e.on(n=>{n.dragging&&t.dispatch("dragend")}),hS(e)},hS=e=>{e.on(t=>{gS(t.ghost)}),e.clear()},Xj=e=>{const t=To(),n=lt.DOM,s=document,o=jj(t,e),r=qj(t,e),i=Gj(t,e),a=Yj(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===pe.ESC&&a()})},Qj=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(R(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Oc(e,"Dropped file type is not supported"))}},n=o=>{ac(e,o.target)&&t(o)},s=()=>{const o=lt.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];T(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{T(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Hn.setEditorTimeout(e,s,0)})},Zj=e=>{Xj(e),vR(e)&&Qj(e)},Jj=e=>{const t=$l(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Im(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},e8=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Ps(n)){const s=Ba(e.getBody(),n),o=wt(s)?s:n;e.selection.getNode()!==o&&Ua(e,o).each(r=>e.selection.setRng(r))}})})},ki=wt,Tp=(e,t)=>Ba(e.getBody(),t),t8=e=>{const t=e.selection,n=e.dom,s=n.isBlock,o=e.getBody(),r=sP(e,o,s,()=>br(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let c;const f=j=>n.hasClass(j,"mce-offscreen-selection"),d=j=>j!==o&&(ki(j)||Ps(j))&&n.isChildOf(j,o),p=j=>{j&&t.setRng(j)},C=(j,X,J,ve=!0)=>e.dispatch("ShowCaret",{target:X,direction:j,before:J}).isDefaultPrevented()?null:(ve&&t.scrollIntoView(X,j===-1),r.show(J,X)),y=j=>{j.hasAttribute("data-mce-caret")&&(Cf(j),t.scrollIntoView(j))},w=()=>{e.on("click",X=>{const J=Tp(e,X.target);J&&ki(J)&&(X.preventDefault(),e.focus())}),e.on("blur NewBlock",M),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",X=>{const J=X.target,ve=Tp(e,J);ki(ve)?(X.preventDefault(),Ua(e,ve).each(I)):d(J)&&Ua(e,J).each(I)},!0),e.on("mousedown",X=>{const J=X.target;if(J!==o&&J.nodeName!=="HTML"&&!n.isChildOf(J,o)||XU(e,X.clientX,X.clientY)===!1)return;M(),V();const ve=Tp(e,J);ki(ve)?(X.preventDefault(),Ua(e,ve).each(I)):Tj(o,X.clientX,X.clientY).each(ue=>{X.preventDefault();const oe=C(1,ue.node,ue.position===Xa.Before,!1);p(oe),Ee(ve)?ve.focus():e.getBody().focus()})}),e.on("keypress",X=>{pe.modifierPressed(X)||ki(t.getNode())&&X.preventDefault()}),e.on("GetSelectionRange",X=>{let J=X.range;if(c){if(!c.parentNode){c=null;return}J=J.cloneRange(),J.selectNode(c),X.range=J}}),e.on("SetSelectionRange",X=>{X.range=_(X.range);const J=I(X.range,X.forward);J&&(X.range=J)});const j=X=>X.id==="mcepastebin";e.on("AfterSetSelectionRange",X=>{const J=X.range,ve=J.startContainer.parentNode;!x(J)&&!j(ve)&&V(),f(ve)||M()}),Zj(e),Jj(e),e8(e)},v=j=>Ln(j)||Al(j)||Tl(j),x=j=>v(j.startContainer)||v(j.endContainer),_=j=>{const X=e.schema.getVoidElements(),J=n.createRng(),ve=j.startContainer,ue=j.startOffset,oe=j.endContainer,He=j.endOffset;return Fe(X,ve.nodeName.toLowerCase())?ue===0?J.setStartBefore(ve):J.setStartAfter(ve):J.setStart(ve,ue),Fe(X,oe.nodeName.toLowerCase())?He===0?J.setEndBefore(oe):J.setEndAfter(oe):J.setEnd(oe,He),J},P=(j,X)=>{const J=S.fromDom(e.getBody()),ve=e.getDoc(),ue=oa(J,"#"+i).getOrThunk(()=>{const qe=S.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ve);return Yt(qe,"id",i),Lt(J,qe),qe}),oe=n.createRng();ta(ue),er(ue,[S.fromText(Zt,ve),S.fromDom(X),S.fromText(Zt,ve)]),oe.setStart(ue.dom.firstChild,1),oe.setEnd(ue.dom.lastChild,0),yl(ue,{top:n.getPos(j,e.getBody()).y+"px"}),Vy(ue);const He=t.getSel();return He.removeAllRanges(),He.addRange(oe),oe},O=j=>{const X=j.cloneNode(!0),J=e.dispatch("ObjectSelected",{target:j,targetClone:X});if(J.isDefaultPrevented())return null;const ve=P(j,J.targetClone),ue=S.fromDom(j);return T(xn(S.fromDom(e.getBody()),`*[${a}]`),oe=>{ot(ue,oe)||Xt(oe,a)}),n.getAttrib(j,a)||j.setAttribute(a,"1"),c=j,V(),ve},I=(j,X)=>{if(!j)return null;if(j.collapsed){if(!x(j)){const oe=X?1:-1,He=xa(oe,o,j),qe=He.getNode(!X);if(ya(qe))return C(oe,qe,X?!He.isAtEnd():!1,!1);const et=He.getNode(X);if(ya(et))return C(oe,et,X?!1:!He.isAtEnd(),!1)}return null}let J=j.startContainer,ve=j.startOffset;const ue=j.endOffset;if(J.nodeType===3&&ve===0&&ki(J.parentNode)&&(J=J.parentNode,ve=n.nodeIndex(J),J=J.parentNode),J.nodeType!==1)return null;if(ue===ve+1&&J===j.endContainer){const oe=J.childNodes[ve];if(d(oe))return O(oe)}return null},M=()=>{c&&c.removeAttribute(a),oa(S.fromDom(e.getBody()),"#"+i).each(Tt),c=null},ce=()=>{r.destroy(),c=null},V=()=>{r.hide()};return lo(e)||w(),{showCaret:C,showBlockCaretContainer:y,hideFakeCaret:V,destroy:ce}},bS=(e,t,n)=>{if(te(t)&&(n<0||n>t.data.length))return[];const s=[n];let o=t;for(;o!==e&&o.parentNode;){const r=o.parentNode;for(let i=0;i<r.childNodes.length;i++)if(r.childNodes[i]===o){s.push(i);break}o=r}return o===e?s.reverse():[]},Rp=(e,t,n,s,o)=>{const r=bS(e,t,n),i=bS(e,s,o);return{start:r,end:i}},CS=(e,t)=>{const n=t.slice(),s=n.pop();return Q(n,(r,i)=>r.bind(a=>h.from(a.childNodes[i])),h.some(e)).bind(r=>te(r)&&(s<0||s>r.data.length)?h.none():h.some({node:r,offset:s}))},yS=(e,t)=>CS(e,t.start).bind(({node:n,offset:s})=>CS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),n8=(e,t)=>Rp(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset),Ni=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Ni(e,s,n)}},su=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(te(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),te(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ni(e,o,n),o!==r&&Ni(e,r,n))},Pp=(e,t)=>h.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),vS=(e,t,n)=>{V2(t,0,t).each(o=>{const r=o.container;sx(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),su(e,a,c=>c===t)})})},s8=(e,t)=>{const n=e.dom,s=t.pattern,o=yS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return At(c)&&Ut(c).exists(f=>Fe(f,"block"))};return Pp(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{vS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{vS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},o8=(e,t)=>{const n=t.replace(Zt," ");return ge(e,s=>t.indexOf(s.start)===0||n.indexOf(s.start)===0)},r8=(e,t)=>{const n=e.dom,s=e.selection.getRng();return Pp(e,s).filter(o=>{const r=Sn(e),i=n.is(o,r);return o!==null&&i}).bind(o=>{const r=o.textContent;return o8(t,r).map(a=>G.trim(r).length===a.start.length?[]:[{pattern:a,range:Rp(n.getRoot(),o,0,o,0)}])}).getOr([])},i8=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();T(t,s=>s8(e,s)),e.selection.moveToBookmark(n)},ES=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),ou=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},wS=(e,t,n)=>{const s=yS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset);return{prefix:t,end:i.parentNode.insertBefore(ES(e,t+"-end"),i),start:a.parentNode.insertBefore(ES(e,t+"-start"),a)}},xS=(e,t,n)=>{Ni(e,e.get(t.prefix+"-end"),n),Ni(e,e.get(t.prefix+"-start"),n)},Op=e=>e.start.length===0,a8=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},SS=(e,t,n,s)=>{const o=t.start;return op(e,s.container,s.offset,a8(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),h.some(a)}else{const a=i.offset-o.length;return sp(i.container,a,n).map(c=>{const f=e.createRng();return f.setStart(c.container,c.offset),f.setEnd(i.container,i.offset),f}).filter(c=>c.toString()===o).orThunk(()=>SS(e,t,n,fs(i.container,0)))}})},l8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),h.some(i)}return np(n,s,o).bind(i=>SS(e,t,o,i).bind(c=>{if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return h.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return h.none()}return h.some(c)}))},c8=(e,t,n)=>{const s=e.dom,o=s.getRoot(),r=n.pattern,i=n.position.container,a=n.position.offset;return sp(i,a-n.pattern.end.length,t).bind(c=>{const f=Rp(o,c.container,c.offset,i,a);if(Op(r))return h.some({matches:[{pattern:r,startRng:f,endRng:f}],position:c});{const d=_S(e,n.remainingPatterns,c.container,c.offset,t),p=d.getOr({matches:[],position:c}),C=p.position;return l8(s,r,C.container,C.offset,t,d.isNone()).map(w=>{const v=n8(o,w);return{matches:p.matches.concat([{pattern:r,startRng:v,endRng:f}]),position:fs(w.startContainer,w.startOffset)}})}})},_S=(e,t,n,s,o)=>{const r=e.dom;return np(n,s,r.getRoot()).bind(i=>{const a=r.createRng();a.setStart(o,0),a.setEnd(n,s);const c=a.toString();for(let f=0;f<t.length;f++){const d=t[f];if(!zg(c,d.end))continue;const p=t.slice();p.splice(f,1);const C=c8(e,o,{pattern:d,remainingPatterns:p,position:i});if(C.isSome())return C}return h.none()})},kS=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?T(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},u8=(e,t,n,s)=>{const o=ou(e.dom,n);su(e.dom,o,s),kS(e,t,o)},f8=(e,t,n,s,o)=>{const r=e.dom,i=ou(r,s),a=ou(r,n);su(r,a,o),su(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=ou(r,c);kS(e,t,f)},d8=(e,t)=>{const n=Ab("mce_textpattern"),s=de(t,(o,r)=>{const i=wS(e,n+`_end${o.length}`,r.endRng);return o.concat([mt(_e({},r),{endMarker:i})])},[]);return de(s,(o,r)=>{const i=s.length-o.length-1,a=Op(r.pattern)?r.endMarker:wS(e,n+`_start${i}`,r.startRng);return o.concat([mt(_e({},r),{startMarker:a})])},[])},NS=(e,t,n)=>{const s=e.selection.getRng();return s.collapsed===!1?[]:Pp(e,s).bind(o=>{const r=Math.max(0,s.startOffset-(n?1:0));return _S(e,t,s.startContainer,r,o)}).fold(()=>[],o=>o.matches)},AS=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=d8(n,t);T(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Op(r.pattern)?u8(e,r.pattern,r.endMarker,a):f8(e,r.pattern,r.startMarker,r.endMarker,a),xS(n,r.endMarker,a),xS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},m8=e=>e.inlinePatterns.length>0||e.blockPatterns.length>0,p8=(e,t)=>{if(!e.selection.isCollapsed()||!m8(t))return!1;const n=NS(e,t.inlinePatterns,!1),s=r8(e,t.blockPatterns);return s.length>0||n.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(ia),AS(e,n),i8(e,s);const o=e.selection.getRng(),r=np(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===ia&&(a.deleteData(i.offset-1,1),Ni(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0):!1},TS=(e,t)=>{if(t.length>0){const n=NS(e,t,!0);n.length>0&&e.undoManager.transact(()=>{AS(e,n)})}},RS=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},g8=(e,t)=>RS(e,t,(n,s)=>n===s.keyCode&&pe.modifierPressed(s)===!1),h8=(e,t)=>RS(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),b8=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>A1(yC(e)),o=()=>oC(yC(e));e.on("keydown",r=>{r.keyCode===13&&!pe.modifierPressed(r)&&p8(e,s())&&r.preventDefault()},!0),e.on("keyup",r=>{g8(n,r)&&TS(e,o())}),e.on("keypress",r=>{h8(t,r)&&Hn.setEditorTimeout(e,()=>{TS(e,o())})})},C8=e=>{b8(e)},y8=e=>{const t=G.each,n=pe.BACKSPACE,s=pe.DELETE,o=e.dom,r=e.selection,i=e.parser,a=Ze.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),d=Ze.deviceType.isiPhone()||Ze.deviceType.isiPad(),p=Ze.os.isMacOS()||Ze.os.isiOS(),C=(ne,we)=>{try{e.getDoc().execCommand(ne,!1,we)}catch{}},y=ne=>ne.isDefaultPrevented(),w=()=>{const ne=fe=>{const ee=o.create("body"),$e=fe.cloneContents();return ee.appendChild($e),r.serializer.serialize(ee,{format:"html"})},we=fe=>{const ee=ne(fe),$e=o.createRng();$e.selectNode(e.getBody());const Me=ne($e);return ee===Me};e.on("keydown",fe=>{const ee=fe.keyCode;let $e,Me;if(!y(fe)&&(ee===s||ee===n)){if($e=e.selection.isCollapsed(),Me=e.getBody(),$e&&!o.isEmpty(Me)||!$e&&!we(e.selection.getRng()))return;fe.preventDefault(),e.setContent(""),Me.firstChild&&o.isBlock(Me.firstChild)?e.selection.setCursorLocation(Me.firstChild,0):e.selection.setCursorLocation(Me,0),e.nodeChanged()}})},v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},x=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",ne=>{let we;if(ne.target===e.getDoc().documentElement)if(we=r.getRng(),e.getBody().focus(),ne.type==="mousedown"){if(Ln(we.startContainer))return;r.placeCaretAt(ne.clientX,ne.clientY)}else r.setRng(we)})},_=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode(),fe=we.previousSibling;if(we.nodeName==="HR"){o.remove(we),ne.preventDefault();return}fe&&fe.nodeName&&fe.nodeName.toLowerCase()==="hr"&&(o.remove(fe),ne.preventDefault())}}})},P=()=>{Range.prototype.getClientRects||e.on("mousedown",ne=>{if(!y(ne)&&ne.target.nodeName==="HTML"){const we=e.getBody();we.blur(),Hn.setEditorTimeout(e,()=>{we.focus()})}})},O=()=>{const ne=CC(e);e.on("click",we=>{const fe=we.target;/^(IMG|HR)$/.test(fe.nodeName)&&o.getContentEditableParent(fe)!=="false"&&(we.preventDefault(),e.selection.select(fe),e.nodeChanged()),fe.nodeName==="A"&&o.hasClass(fe,ne)&&fe.childNodes.length===0&&(we.preventDefault(),r.select(fe))})},I=()=>{const ne=()=>{const fe=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const ee=r.getStart();ee!==e.getBody()&&(o.setAttrib(ee,"style",null),t(fe,$e=>{ee.setAttributeNode($e.cloneNode(!0))}))}},we=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",fe=>{let ee;if(!y(fe)&&(fe.keyCode===8||fe.keyCode===46)&&we())return ee=ne(),e.getDoc().execCommand("delete",!1,null),ee(),fe.preventDefault(),!1}),o.bind(e.getDoc(),"cut",fe=>{let ee;!y(fe)&&we()&&(ee=ne(),Hn.setEditorTimeout(e,()=>{ee()}))})},M=()=>{e.on("keydown",ne=>{if(!y(ne)&&ne.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode().previousSibling;if(we&&we.nodeName&&we.nodeName.toLowerCase()==="table")return ne.preventDefault(),!1}})},ce=()=>{e.on("keydown",ne=>{let we,fe;if(y(ne)||ne.keyCode!==pe.BACKSPACE)return;we=r.getRng();const ee=we.startContainer,$e=we.startOffset,Me=o.getRoot();if(fe=ee,!(!we.collapsed||$e!==0)){for(;fe&&fe.parentNode&&fe.parentNode.firstChild===fe&&fe.parentNode!==Me;)fe=fe.parentNode;fe.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,fe),we=o.createRng(),we.setStart(ee,0),we.setEnd(ee,0),r.setRng(we))}})},V=()=>{const ne=()=>{C("StyleWithCSS",!1),C("enableInlineTableEditing",!1),gC(e)||C("enableObjectResizing",!1)};bC(e)||e.on("BeforeExecCommand mousedown",ne)},j=()=>{const ne=()=>{t(o.select("a"),we=>{let fe=we.parentNode;const ee=o.getRoot();if(fe.lastChild===we){for(;fe&&!o.isBlock(fe);){if(fe.parentNode.lastChild!==fe||fe===ee)return;fe=fe.parentNode}o.add(fe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",we=>{(we.type==="setcontent"||we.command==="mceInsertLink")&&ne()})},X=()=>{e.on("init",()=>{C("DefaultParagraphSeparator",Sn(e))})},J=ne=>{const we=ne.getBody(),fe=ne.selection.getRng();return fe.startContainer===fe.endContainer&&fe.startContainer===we&&fe.startOffset===0&&fe.endOffset===we.childNodes.length},ve=()=>{e.on("keyup focusin mouseup",ne=>{!pe.modifierPressed(ne)&&!J(e)&&r.normalize()},!0)},ue=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},oe=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},He=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ne=>{let we;ne.target.nodeName==="HTML"&&(we=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(we),e.selection.normalize(),e.nodeChanged())}))},qe=()=>{p&&e.on("keydown",ne=>{pe.metaKeyPressed(ne)&&!ne.shiftKey&&(ne.keyCode===37||ne.keyCode===39)&&(ne.preventDefault(),e.selection.getSel().modify("move",ne.keyCode===37?"backward":"forward","lineboundary"))})},et=()=>{e.on("click",ne=>{let we=ne.target;do if(we.tagName==="A"){ne.preventDefault();return}while(we=we.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ot=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ne=>{ne.preventDefault()})})},Y=()=>{i.addNodeFilter("br",ne=>{let we=ne.length;for(;we--;)ne[we].attr("class")==="Apple-interchange-newline"&&ne[we].remove()})},he=De,Ie=()=>{if(!c||e.removed)return!1;const ne=e.selection.getSel();return!ne||!ne.rangeCount||ne.rangeCount===0},Be=()=>{f&&(x(),O(),Ot(),v(),d&&(oe(),He(),et())),c&&(P(),V(),ue(),qe())},It=()=>{ce(),w(),Ze.windowsPhone||ve(),f&&(x(),O(),X(),Ot(),M(),Y(),d?(oe(),He(),et()):v()),c&&(_(),P(),I(),V(),j(),ue(),qe(),M())};return lo(e)?Be():It(),{refreshContentEditable:he,isHidden:Ie}},Dp=lt.DOM,v8=(e,t)=>{const n=S.fromDom(e.getBody()),s=rf(Jo(n)),o=S.fromTag("style");Yt(o,"type","text/css"),Lt(o,S.fromText(t)),Lt(s,o),e.on("remove",()=>{Tt(o)})},E8=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Bp=e=>ji(e,t=>Rt(t)===!1),PS=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Bp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:E8(e),validate:!0,blob_cache:n,document:e.getDoc()})},OS=e=>{const t=e.options.get;return Bp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},w8=e=>{const t=e.options.get;return _e(_e(_e({},PS(e)),OS(e)),Bp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))},x8=e=>{const t=yi(PS(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let o=n.length,r,i;const a=e.dom,c="data-mce-"+s;for(;o--;)if(r=n[o],i=r.attr(s),i&&!r.attr(c)){if(i.indexOf("data:")===0||i.indexOf("blob:")===0)continue;s==="style"?(i=a.serializeStyle(a.parseStyle(i),r.name),i.length||(i=null),r.attr(c,i),r.attr(s,i)):s==="tabindex"?(r.attr(c,i),r.attr(s,null)):r.attr(c,e.convertURL(i,s,r.name))}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const o=n[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new gn("br",1))}}),t},S8=e=>{const t=NR(e);t&&Hn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n.destroyed||n.focus()},100)},_8=e=>{const t=e.dom.getRoot();!e.inline&&(!ec(e)||e.selection.getStart(!0)===t)&&pn(t).each(n=>{const s=n.getNode(),o=na(s)?pn(s).getOr(n):n;e.selection.setRng(o.toRange())})},k8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,dO(e),e.focus(!0),_8(e),e.nodeChanged({initial:!0});const t=_R(e);Ye(t)&&t.call(e,e),S8(e)},DS=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,N8=(e,t,n)=>{const s=[DS(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},BS=e=>{const t=DS(e),n=pC(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";G.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(N8(e,s,n)).then(r).catch(r),a=eR(e);return a&&v8(e,a),i},A8=e=>{const t=e.getDoc(),n=e.getBody();uO(e),AR(e)||(t.body.spellcheck=!1,Dp.setAttrib(n,"spellcheck","false")),e.quirks=y8(e),fO(e);const s=tR(e);s!==void 0&&(n.dir=s);const o=TR(e);o&&e.on("BeforeSetContent",r=>{G.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},T8=e=>{lo(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},$p=e=>{e.removed!==!0&&(T8(e),k8(e))},$S=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Dp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=bC(e),e.readonly||(e.inline&&Dp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=wz(e),e.schema=Ao(OS(e)),e.dom=lt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:X1(e),referrerPolicy:zf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=x8(e),e.serializer=m0(w8(e),e),e.selection=d0(e.dom,e.getWin(),e.serializer,e),e.annotator=by(e),e.formatter=_0(e),e.undoManager=N0(e),e._nodeChangeDispatcher=new c6(e),e._selectionOverrides=t8(e),D3(e),fj(e),z3(e),lo(e)||(Cj(e),C8(e));const o=l6(e);R3(e,o),L3(e),Fz(e),lj(e);const r=PM(e);A8(e),r.fold(()=>{BS(e).then(()=>$p(e))},i=>{e.setProgressState(!0),BS(e).then(()=>{i().then(a=>{e.setProgressState(!1),$p(e),a0(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),$p(e),a0(e)})})})},IS=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=mz(S.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,$S(e)});n.srcdoc=e.iframeHTML}else $S(e)},ru=lt.DOM,R8=(e,t,n,s)=>{const o=S.fromTag("iframe");return s.each(r=>Yt(o,"tabindex",r)),Ns(o,n),Ns(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Qi(o,"tox-edit-area__iframe"),o},P8=e=>{let t=$1(e)+"<html><head>";aC(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=I1(e),s=F1(e),o=e.translate(xR(e));return lC(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+lC(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},O8=(e,t)=>{const n=e.translate("Rich Text Area"),s=qr(S.fromDom(e.getElement()),"tabindex").bind(fN),o=R8(e.id,n,B1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=P8(e),ru.add(t.iframeContainer,o)},D8=(e,t)=>{O8(e,t),t.editorContainer&&(ru.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=ru.isHidden(t.editorContainer)),e.getElement().style.display="none",ru.setAttrib(e.id,"aria-hidden","true"),IS(e)},FS=lt.DOM,B8=(e,t,n)=>{const s=Ei.get(n),o=Ei.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=G.trim(n),s&&G.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ye(r.init)&&(r.init(e,o),t.push(n))}catch(r){az(e,n,r)}}},$8=e=>e.replace(/^\-/,""),I8=e=>{const t=[];T(Ul(e),n=>{B8(e,t,$8(n))})},F8=e=>{const t=G.trim(fC(e)),n=e.ui.registry.getAll().icons,s=_e(_e({},Pc.get("default").icons),Pc.get(t).icons);yt(s,(o,r)=>{Fe(n,r)||e.ui.registry.addIcon(r,o)})},L8=e=>{const t=ai(e);if(me(t)){const n=xr.get(t);e.theme=n(e,xr.urls[t])||{},Ye(e.theme.init)&&e.theme.init(e,xr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},M8=e=>{const t=Hf(e),n=vi.get(t);e.model=n(e,vi.urls[t])},U8=e=>e.theme.renderUI(),z8=e=>{const t=e.getElement(),s=ai(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},LS=e=>({editorContainer:e,iframeContainer:e,api:{}}),H8=e=>{const t=FS.create("div");return FS.insertAfter(t,e),LS(t)},V8=e=>{const t=e.getElement();return e.inline?LS(null):H8(t)},W8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,me(ai(e))?U8(e):Ye(ai(e))?z8(e):V8(e)},j8=(e,t)=>{const n={show:h.from(t.show).getOr(De),hide:h.from(t.hide).getOr(De),isEnabled:h.from(t.isEnabled).getOr(ut),setEnabled:s=>{e.mode.isReadOnly()||h.from(t.setEnabled).each(o=>o(s))}};e.ui=_e(_e({},e.ui),n)},q8=e=>{e.dispatch("ScriptsLoaded"),F8(e),L8(e),M8(e),I8(e);const t=W8(e);j8(e,h.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,fz(e),e.inline?IS(e):D8(e,n)},Sr=lt.DOM,MS=e=>e.charAt(0)==="-",K8=(e,t)=>{const n=dC(t),s=Q1(t);if(rs.hasCode(n)===!1&&n!=="en"){const o=to(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{oz(t,o,n)})}},G8=(e,t)=>{const n=ai(e);if(me(n)&&!MS(n)&&!Fe(xr.urls,n)){const s=iR(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;xr.load(n,o).catch(()=>{rz(e,o,n)})}},Y8=(e,t)=>{const n=Hf(e);if(n!=="plugin"&&!Fe(vi.urls,n)){const s=aR(e),o=me(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;vi.load(n,o).catch(()=>{iz(e,o,n)})}},X8=e=>h.from(j1(e)).filter(to).map(t=>({url:t,name:h.none()})),US=(e,t,n)=>h.from(t).filter(s=>to(s)&&!Pc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:h.some(s)})),Q8=(e,t,n)=>{const s=US(t,"default",n),o=X8(t).orThunk(()=>US(t,fC(t),""));T(_N([s,o]),r=>{e.add(r.url).catch(()=>{sz(t,r.url,r.name.getOrUndefined())})})},Z8=(e,t)=>{const n=(s,o)=>{Ei.load(s,o).catch(()=>{nz(e,o,s)})};yt(yR(e),(s,o)=>{n(o,s),e.options.set("plugins",Ul(e).concat(o))}),T(Ul(e),s=>{s=G.trim(s),s&&!Ei.urls[s]&&!MS(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},J8=e=>{const t=ai(e);return!me(t)||Ne(xr.get(t))},e5=e=>{const t=Hf(e);return Ne(vi.get(t))},t5=(e,t)=>{const n=oo.ScriptLoader,s=()=>{!e.removed&&J8(e)&&e5(e)&&q8(e)};G8(e,t),Y8(e,t),K8(n,e),Q8(n,e,t),Z8(e,t),n.loadQueue().then(s,s)},n5=(e,t)=>Jh.forElement(e,{contentCssCors:CR(t),referrerPolicy:zf(t)}),s5=e=>{const t=e.id;rs.setCode(dC(e));const n=()=>{Sr.unbind(window,"ready",n),e.render()};if(!ar.Event.domLoaded){Sr.bind(window,"ready",n);return}if(!e.getElement())return;const s=S.fromDom(e.getElement()),o=Ch(s);e.on("remove",()=>{le(s.dom.attributes,i=>Xt(s,i.name)),Ns(s,o)}),e.ui.styleSheetLoader=n5(s,e),Vf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Sr.getParent(t,"form");r&&(e.formElement=r,dR(e)&&!uf(e.getElement())&&(Sr.insertAfter(Sr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Sr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),mR(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=b0(e),e.notificationManager=h0(e),WR(e)&&e.on("GetContent",i=>{i.save&&(i.content=Sr.encode(i.content))}),pR(e)&&e.on("submit",()=>{e.initialized&&e.save()}),gR(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),t5(e,e.suffix)},o5=(e,t)=>({sections:K(e),options:K(t)}),zS=Xo().deviceType,HS=zS.isPhone(),r5=zS.isTablet(),Qa=e=>{if(Ft(e))return[];{const t=At(e)?e:e.split(/[ ,]/),n=z(t,Wr);return H(n,to)}},i5=(e,t)=>{const n=Qk(t,(s,o)=>R(e,o));return o5(n.t,n.f)},a5=(e,t,n={})=>{const s=e.sections(),o=ft(s,t).getOr({});return G.extend({},n,o)},Ip=(e,t)=>Fe(e.sections(),t),l5=(e,t)=>Ip(e,t)?e.sections()[t]:{},c5=(e,t)=>{const n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ft(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},s={menubar:!1};return _e(_e({},n),t?s:{})},u5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,s):s},f5=(e,t)=>[].concat(Qa(e)).concat(Qa(t)),d5=(e,t,n,s)=>e&&Ip(t,"mobile")?s:n,m5=(e,t,n,s)=>{const o=Qa(n.forced_plugins),r=Qa(s.plugins),i=l5(t,"mobile"),a=i.plugins?Qa(i.plugins):r,c=d5(e,t,r,a),f=f5(o,c);return G.extend(s,{forced_plugins:o,plugins:f})},p5=(e,t)=>e&&Ip(t,"mobile"),g5=(e,t,n,s,o)=>{var r;const i=e?{mobile:c5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=i5(["mobile"],jc(i,o)),c=G.extend(n,s,a.options(),p5(e,a)?a5(a,"mobile"):{},{external_plugins:u5(s,a.options())});return m5(e,a,s,c)},h5=(e,t)=>g5(HS||r5,HS,t,e,t),b5=(e,t)=>nU(e,t),C5=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{T("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},y5=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return U(o,r=>Ne(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},v5=e=>{C5(e),y5(e)},E5=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ze.os.isMacOS()||Ze.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},w5=(e,t,n)=>{const s=S.fromDom(e.getRoot());return uc(s,F.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),fc(s,F.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},x5=e=>{if(typeof e!="string"){const t=G.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},S5=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?w5(s,n.getRng(),t):t},iu=(e,t)=>{const{content:n,details:s}=x5(t);xm(e,{content:S5(e,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(o=>{const r=eU(e,o.content,s);Sm(e,r,o),e.addVisual()})},_5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{iu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{iu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{iu(e,s)},mceInsertContent:(t,n,s)=>{iu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},k5={"font-size":"size","font-family":"face"},N5=(e,t,n)=>{const s=r=>vl(r,e).orThunk(()=>Et(r)==="font"?ft(k5,e).bind(i=>qr(r,i)):h.none()),o=r=>ot(S.fromDom(t),r);return tm(S.fromDom(n),r=>s(r),o)},A5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),T5=(e,t)=>h.from(lt.DOM.getStyle(t,e,!0)),VS=e=>(t,n)=>h.from(n).map(S.fromDom).filter(Qn).bind(s=>N5(e,t,s.dom).or(T5(e,s.dom))).getOr(""),R5=VS("font-size"),P5=Bt(A5,VS("font-family")),O5=e=>pn(e.getBody()).map(t=>{const n=t.container();return te(n)?n.parentNode:n}),D5=e=>h.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?h.none():h.from(e.selection.getStart(!0))}),B5=(e,t)=>D5(e).orThunk(re(O5,e)).map(S.fromDom).filter(Qn).bind(t),Fp=(e,t)=>B5(e,kt(h.some,t)),WS=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=HR(e),o=VR(e);return o?o[n-1]||t:s[n-1]||t}else return t}else return t},$5=e=>{const t=e.split(/\s*,\s*/);return z(t,n=>n.indexOf(" ")!==-1&&!(Gt(n,'"')||Gt(n,"'"))?`'${n}'`:n).join(",")},I5=(e,t)=>{const n=WS(e,t);e.formatter.toggle("fontname",{value:$5(n)}),e.nodeChanged()},F5=e=>Fp(e,t=>P5(e.getBody(),t.dom)).getOr(""),L5=(e,t)=>{e.formatter.toggle("fontsize",{value:WS(e,t)}),e.nodeChanged()},M5=e=>Fp(e,t=>R5(e.getBody(),t.dom)).getOr(""),U5=e=>Fp(e,t=>{const n=S.fromDom(e.getBody()),s=tm(t,r=>vl(r,"line-height"),re(ot,n)),o=()=>{const r=parseFloat(Ts(t,"line-height")),i=parseFloat(Ts(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),z5=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},H5=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{I5(e,o)},FontSize:(n,s,o)=>{L5(e,o)},LineHeight:(n,s,o)=>{z5(e,o)},Lang:(n,s,o)=>{t(n,{value:o.code,customValue:o.customCode})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(me(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},V5=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>F5(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>M5(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>U5(e))},W5=e=>{H5(e),V5(e)},j5=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},q5=e=>{e.editorCommands.addCommands({Indent:()=>{N3(e)},Outdent:()=>{xw(e)}}),e.editorCommands.addCommands({Outdent:()=>yw(e)},"state")},K5=e=>{const t=(n,s,o)=>{const r=me(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");dt(r)&&me(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},G5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},Y5=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},X5=e=>{G5(e),Y5(e)},Q5=e=>{e.editorCommands.addCommands({insertParagraph:()=>{eu(Dx,e)},mceInsertNewLine:(t,n,s)=>{Ux(e,s)},InsertLineBreak:(t,n,s)=>{eu(Ix,e)}})},Z5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>{if(r.nodeType===1&&o++===s)return e.selection.select(r),!1},e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Rs);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},J5=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{GD(e,s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},e4=e=>{v5(e),E5(e),j5(e),Z5(e),_5(e),K5(e),q5(e),Q5(e),X5(e),W5(e),J5(e)};class jS{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():_D(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ye(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ye(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ye(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;yt(t,(o,r)=>{T(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const _r="data-mce-contenteditable",t4=(e,t,n)=>{sf(e,t)&&n===!1?bl(e,t):n&&Qi(e,t)},Lp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},au=(e,t)=>{e.dom.contentEditable=t?"true":"false"},n4=e=>{T(xn(e,'*[contenteditable="true"]'),t=>{Yt(t,_r,"true"),au(t,!1)})},s4=e=>{T(xn(e,`*[${_r}="true"]`),t=>{Xt(t,_r),au(t,!0)})},o4=e=>{h.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},r4=e=>{e.selection.setRng(e.selection.getRng())},i4=(e,t)=>{const n=S.fromDom(e.getBody());t4(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),o4(e),e.readonly=!0,au(n,!1),n4(n)):(e.readonly=!1,au(n,!0),s4(n),Lp(e,"StyleWithCSS",!1),Lp(e,"enableInlineTableEditing",!1),Lp(e,"enableObjectResizing",!1),qD(e)&&e.focus(),r4(e),e.nodeChanged())},kr=e=>e.readonly,qS=e=>{e.parser.addAttributeFilter("contenteditable",t=>{kr(e)&&T(t,n=>{n.attr(_r,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(_r,t=>{kr(e)&&T(t,n=>{n.attr("contenteditable",n.attr(_r))})}),e.serializer.addTempAttr(_r)},a4=e=>{e.serializer?qS(e):e.on("PreInit",()=>{qS(e)})},l4=e=>e.type==="click",c4=["copy"],u4=e=>R(c4,e.type),f4=(e,t)=>or(t,"a",s=>ot(s,S.fromDom(e.getBody()))).bind(s=>qr(s,"href")),d4=(e,t)=>{if(l4(t)&&!pe.metaKeyPressed(t)){const n=S.fromDom(t.target);f4(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${lN(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else u4(t)&&e.dispatch(t.type,t)},m4=e=>{e.on("ShowCaret",t=>{kr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{kr(e)&&t.preventDefault()})},p4=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Mp{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ht}static isNative(t){return!!p4[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=kf(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=ht),n){const r={func:n,removed:!1};o&&G.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return yt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=be(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,T(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else yt(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){return t=t.toLowerCase(),!(!this.bindings[t]||this.bindings[t].length===0)}}const Za=e=>(e._eventDispatcher||(e._eventDispatcher=new Mp({scope:e,toggleEvent:(t,n)=>{Mp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Up={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return kf(e.toLowerCase(),t!=null?t:{},s);const o=Za(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent()}return o},on(e,t,n){return Za(this).on(e,t,n)},off(e,t){return Za(this).off(e,t)},once(e,t){return Za(this).once(e,t)},hasEventListeners(e){return Za(this).has(e)}},lu=lt.DOM;let Nr;const cu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=hC(e);return n?(e.eventRoot||(e.eventRoot=lu.select(n)[0]),e.eventRoot):e.getBody()},g4=e=>!e.hidden&&!kr(e),KS=(e,t,n)=>{g4(e)?e.dispatch(t,n):kr(e)&&d4(e,n)},GS=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const s=cu(e,t);if(hC(e)){if(Nr||(Nr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Nr&&(yt(Nr,(o,r)=>{e.dom.unbind(cu(e,r))}),Nr=null)})),Nr[t])return;n=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||lu.isChildOf(r,c))&&KS(i[a],t,o)}},Nr[t]=n,lu.bind(s,t,n)}else n=o=>{KS(e,t,o)},lu.bind(s,t,n),e.delegates[t]=n},YS=mt(_e({},Up),{bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{GS(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?GS(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(cu(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(yt(e.delegates,(s,o)=>{e.dom.unbind(cu(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),h4=e=>me(e)?{value:e.split(/[ ,]/),valid:!0}:Js(e,me)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},b4=e=>{const t=(()=>{switch(e){case"array":return At;case"boolean":return Gn;case"function":return Ye;case"number":return vn;case"object":return dt;case"string":return me;case"string[]":return h4;case"object[]":return n=>Js(n,dt);case"regexp":return n=>$n(n,RegExp)}})();return n=>zp(n,t,`The value must be a ${e}.`)},C4=e=>me(e.processor),XS=(e,t)=>{const n=gl(t.message)?"":`. ${t.message}`;return e+n},QS=e=>e.valid,zp=(e,t,n="")=>{const s=t(e);return Gn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},y4=(e,t,n)=>{if(!Rt(t)){const s=zp(t,n);if(QS(s))return s.value;console.error(XS(`Invalid default value passed for the "${e}" option`,s))}},v4=(e,t)=>{const n={},s={},o=(p,C,y)=>{const w=zp(C,y);return QS(w)?(s[p]=w.value,!0):(console.warn(XS(`Invalid value passed for the ${p} option`,w)),!1)},r=(p,C)=>{const y=C4(C)?b4(C.processor):C.processor,w=y4(p,C.default,y);n[p]=mt(_e({},C),{default:w,processor:y}),ft(s,p).orThunk(()=>ft(t,p)).each(x=>o(p,x,y))},i=p=>Fe(n,p);return{register:r,isRegistered:i,get:p=>ft(s,p).orThunk(()=>ft(n,p).map(C=>C.default)).getOrUndefined(),set:(p,C)=>{if(i(p)){const y=n[p];return y.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,C,y.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const C=i(p);return C&&delete s[p],C},isSet:p=>Fe(s,p)}},E4=["design","readonly"],ZS=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&i4(e,r.editorReadOnly),t.set(s),aO(e,s)},w4=(e,t,n,s)=>{if(s!==n.get()){if(!Fe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?ZS(e,n,t,s):e.on("init",()=>ZS(e,n,t,s))}},x4=(e,t,n)=>{if(R(E4,t))throw new Error(`Cannot override default mode ${t}`);return mt(_e({},e),{[t]:mt(_e({},n),{deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}})})},S4=e=>{const t=Ht("design"),n=Ht({design:{activate:De,deactivate:De,editorReadOnly:!1},readonly:{activate:De,deactivate:De,editorReadOnly:!0}});return a4(e),m4(e),{isReadOnly:()=>kr(e),set:s=>w4(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(x4(n.get(),s,o))}}},Hp=G.each,Vp=G.explode,_4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},JS=G.makeMap("alt,ctrl,shift,meta,access"),k4=e=>{let t;const n={},s=Ze.os.isMacOS()||Ze.os.isiOS();Hp(Vp(e.toLowerCase(),"+"),r=>{r in JS?n[r]=!0:/^[0-9]{2,}$/.test(r)?n.keyCode=parseInt(r,10):(n.charCode=r.charCodeAt(0),n.keyCode=_4[r]||r.toUpperCase().charCodeAt(0))});const o=[n.keyCode];for(t in JS)n[t]?o.push(t):n[t]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class e_{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(Hp(n.shortcuts,o=>{if(n.matchShortcut(s,o))return n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return Hp(Vp(G.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:G.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=G.map(Vp(t,">"),k4);return r[r.length-1]=G.extend(r[r.length-1],{func:s,scope:o||this.editor}),G.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const N4=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(f,d)=>(p,C)=>f[p.toLowerCase()]=mt(_e({},C),{type:d}),c=(f,d)=>s[f.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},A4=()=>{const e=N4();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Ar=lt.DOM,t_=G.extend,T4=G.each;class uu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,t_(this,YS);const o=this;this.id=t,this.hidden=!1;const r=h5(s.defaultOptions,n);this.options=v4(o,r),D1(o);const i=this.options.get;i("deprecation_warnings")&&FU(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=zf(o);f&&(oo.ScriptLoader._setReferrerPolicy(f),lt.DOM.styleSheetLoader._setReferrerPolicy(f)),on.languageLoad=i("language_load"),on.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new us(aC(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Vf(o),this.shortcuts=new e_(this),this.editorCommands=new jS(this),e4(this);const d=i("cache_suffix");d&&(Ze.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:A4(),styleSheetLoader:void 0,show:De,hide:De,setEnabled:De,isEnabled:ut},this.mode=S4(o),s.dispatch("SetupEditor",{editor:this});const p=SR(o);Ye(p)&&p.call(o,o)}render(){s5(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return br(this)}translate(t){return rs.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(Ne(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:ut,default:n})),!o.isSet(t)&&!Rt(n)?n:o.get(t)}hasPlugin(t,n){return R(Ul(this),t)?n?Ei.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Ar.show(t.getContainer()),Ar.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Ar.hide(t.getContainer()),Ar.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t){const n=this;let s=n.getElement(),o;if(n.removed)return"";if(s){t=t||{},t.load=!0;const r=uf(s)?s.value:s.innerHTML;return o=n.setContent(r,t),t.element=s,t.no_events||n.dispatch("LoadContent",t),t.element=s=null,o}}save(t){const n=this;let s=n.getElement(),o,r;if(!(!s||!n.initialized||n.removed))return t=t||{},t.save=!0,t.element=s,o=t.content=n.getContent(t),t.no_events||n.dispatch("SaveContent",t),t.format==="raw"&&n.dispatch("RawSaveContent",t),o=t.content,uf(s)?s.value=o:((t.is_removing||!n.inline)&&(s.innerHTML=o),(r=Ar.getParent(n.id,"form"))&&T4(r.elements,i=>{if(i.name===n.id)return i.value=o,!1})),t.element=s=null,t.set_dirty!==!1&&n.setDirty(!1),o}setContent(t,n){return Om(this,t,n)}getContent(t){return TU(this,t)}insertContent(t,n){n&&(t=t_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Om(this,this.startContent,{format:"raw"}):Om(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=Ar.get(t.editorContainer||t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ar.get(this.id)),this.targetElm}getWin(){const t=this;let n;return t.contentWindow||(n=t.iframeElement,n&&(t.contentWindow=n.contentWindow)),t.contentWindow}getDoc(){const t=this;let n;return t.contentDocument||(n=t.getWin(),n&&(t.contentDocument=n.document)),t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement||(t?t.body:null)}convertURL(t,n,s){const o=this,r=o.options.get,i=kR(o);return Ye(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){b5(this,t)}remove(){zU(this)}destroy(t){HU(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ai=lt.DOM,fu=G.each;let n_=!1,du,hn=[];const mu=e=>{const t=e.type;fu(Mo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},s_=e=>{if(e!==n_){const t=lt.DOM;e?(t.bind(window,"resize",mu),t.bind(window,"scroll",mu)):(t.unbind(window,"resize",mu),t.unbind(window,"scroll",mu)),n_=e}},o_=e=>{const t=hn;return hn=H(hn,n=>e!==n),Mo.activeEditor===e&&(Mo.activeEditor=hn.length>0?hn[0]:null),Mo.focusedEditor===e&&(Mo.focusedEditor=null),t.length!==hn.length},R4=e=>(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(o_(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e),P4=document.compatMode!=="CSS1Compat",Mo=mt(_e({},Up),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"1.0",releaseDate:"2022-06-29",i18n:rs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,s="";n=us.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,s=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(s=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(s=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new us(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new us(e.baseURL),e.suffix=s,LD(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&yt(s,(o,r)=>{on.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=ft(d,"name").filter(C=>!Ai.get(C)).getOrThunk(Ai.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>Ze.browser.isIE()||Ze.browser.isEdge()?(Dc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):P4?(Dc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):me(d.selector)?Ai.select(d.selector):Ne(d.target)?[d.target]:[];let c=d=>{n=d};const f=()=>{let d=0;const p=[];let C;const y=(w,v,x)=>{const _=new uu(w,v,t);p.push(_),_.on("init",()=>{++d===C.length&&c(p)}),_.targetElm=_.targetElm||x,_.render()};Ai.unbind(window,"ready",f),i("onpageload"),C=ml(a(e)),G.each(C,w=>{R4(t.get(w.id))}),C=G.grep(C,w=>!t.get(w.id)),C.length===0?c([]):fu(C,w=>{o(e,w)?Dc("Could not initialize inline editor on invalid inline target element",w):y(r(w),e,w)})};return Ai.bind(window,"ready",f),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?hn.slice(0):me(e)?ge(hn,t=>t.id===e).getOr(null):vn(e)&&hn[e]?hn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&hn.push(e),s_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),du||(du=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",du))),e},createEditor(e,t){return this.add(new uu(e,t,this))},remove(e){const t=this;let n,s;if(!e){for(n=hn.length-1;n>=0;n--)t.remove(hn[n]);return}if(me(e)){fu(Ai.select(e),o=>{s=t.get(o.id),s&&t.remove(s)});return}return s=e,Zs(t.get(s.id))?null:(o_(s)&&t.dispatch("RemoveEditor",{editor:s}),hn.length===0&&window.removeEventListener("beforeunload",du),s.remove(),s_(hn.length>0),s)},execCommand(e,t,n){var s;const o=this,r=dt(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new uu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{fu(hn,e=>{e.save()})},addI18n:(e,t)=>{rs.add(e,t)},translate:e=>rs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new us(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new us(this.baseURL)}});Mo.setup();const O4=(()=>{const e=To(),t=r=>({items:r,types:Xn(r),getType:i=>ft(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),r_=Math.min,Ti=Math.max,pu=Math.round,i_=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=pu(c/2)),f[1]==="c"&&(s+=pu(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=pu(i/2)),f[4]==="c"&&(s-=pu(r/2)),Ri(s,o,r,i)},D4=(e,t,n,s)=>{let o,r;for(r=0;r<s.length;r++)if(o=i_(e,t,s[r]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[r];return null},B4=(e,t,n)=>Ri(e.x-t,e.y-n,e.w+t*2,e.h+n*2),$4=(e,t)=>{const n=Ti(e.x,t.x),s=Ti(e.y,t.y),o=r_(e.x+e.w,t.x+t.w),r=r_(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Ri(n,s,o-n,r-s)},I4=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Ti(0,t.x-s),d=Ti(0,t.y-o),p=Ti(0,r-a),C=Ti(0,i-c);return s+=f,o+=d,n&&(r+=f,i+=d,s-=p,o-=C),r-=p,i-=C,Ri(s,o,r-s,i-o)},Ri=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),F4={inflate:B4,relativePosition:i_,findBestRelativePosition:D4,intersect:$4,clamp:I4,create:Ri,fromClientRect:e=>Ri(e.left,e.top,e.width,e.height)},L4=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,d))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},M4=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((d,p)=>{const C=L4(d,p);t[r]=C.resolve,oo.ScriptLoader.loadScript(i).then(()=>C.start(c),()=>C.reject(a))});return e[r]=f,f}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),U4=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Ja;try{const e="__storage_test__";Ja=window.localStorage,Ja.setItem(e,e),Ja.removeItem(e)}catch{Ja=U4()}var z4=Ja;const H4={geom:{Rect:F4},util:{Delay:Hn,Tools:G,VK:pe,URI:us,EventDispatcher:Mp,Observable:Up,I18n:rs,LocalStorage:z4,ImageUploader:Ez},dom:{EventUtils:ar,TreeWalker:$t,TextSeeker:cr,DOMUtils:lt,ScriptLoader:oo,RangeUtils:hi,Serializer:m0,StyleSheetLoader:Zh,ControlSelection:_y,BookmarkManager:Na,Selection:d0,Event:ar.Event},html:{Styles:_f,Entities:ko,Node:gn,Schema:Ao,DomParser:yi,Writer:lv,Serializer:Do},Env:Ze,AddOnManager:on,Annotator:by,Formatter:_0,UndoManager:N0,EditorCommands:jS,WindowManager:b0,NotificationManager:h0,EditorObservable:YS,Shortcuts:e_,Editor:uu,FocusManager:Gy,EditorManager:Mo,DOM:lt.DOM,ScriptLoader:oo.ScriptLoader,PluginManager:Ei,ThemeManager:xr,ModelManager:vi,IconManager:Pc,Resource:M4,FakeClipboard:O4,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},a_=G.extend(Mo,H4),V4=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(a_),V4(a_)})()})(Kk);var Jp=Kk.exports,B7=(l,u)=>{const m=l.__vccOpts||l;for(const[g,b]of u)m[g]=b;return m};const $7=xk({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.1.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,u){const m=M9(null);let g=null,b={};function E(){if(m.value){b=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},l.config);const se=l.baseUrl,ye="zh_CN",Ae="en_US";if(b.language===Ae?(delete b.language,delete b.language_url):(b.language||(b.language=ye),!b.language_url&&b.language===ye&&(b.language_url=`${se}/@panhezeng/vue-tinymce@latest/dist/langs/${b.language}.js`),!b.font_formats&&b.language===ye&&(b.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(b.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(b.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${b.font_formats||""}`,b.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(b.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${b.font_formats||""}`,b.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),b.external_plugins||(b.external_plugins={}),!b.external_plugins.textindentoutdent){const Ue=Object.keys(b);for(let gt=Ue.length-1;gt>=0;gt--){const vt=Ue[gt];if(vt&&typeof vt=="string"&&vt.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(b[vt]))){b.language===ye&&(b.external_plugins.textindentoutdentzhcn=`${se}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),b.external_plugins.textindentoutdent=`${se}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}b.target=m.value,b.init_instance_callback=Ue=>{m.value&&(g=Ue,N(),g.on(l.updateEvent,D),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(g))}}}function N(){ku().then(()=>{m.value&&g&&g.getContent()!==l.modelValue&&g.setContent(l.modelValue)})}function D(){ku().then(()=>{if(m.value&&g){const se=g.getContent();u.emit("update:modelValue",se),u.emit("content-change",se)}})}function L(){try{m.value&&g&&(g.plugins.autosave&&g.plugins.autosave.removeDraft(),Jp.PluginManager.remove("autosave"),g.remove(),g.destroy(),g=null)}catch{return}}function Z(){ku().then(()=>{m.value&&(L(),E(),Jp.init(b))})}return rl(()=>l.modelValue,N),rl(()=>l.config,()=>{Z()},{deep:!0}),kk(()=>{Jp.EditorManager.baseURL=l.url,Z()}),Nk(()=>{L()}),{editorElement:m}}}),I7={class:"vue-tinymce-comp"},F7={ref:"editorElement"};function L7(l,u,m,g,b,E){return Bu(),Uk("div",I7,[ss("textarea",F7,null,512)])}var eg=B7($7,[["render",L7]]);const M7=Object.assign(eg,{install:l=>{l.component(eg.name,eg)}}),Gk=E7(D7);Gk.use(M7);Gk.mount("#app");
