(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))h(v);new MutationObserver(v=>{for(const E of v)if(E.type==="childList")for(const N of E.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&h(N)}).observe(document,{childList:!0,subtree:!0});function m(v){const E={};return v.integrity&&(E.integrity=v.integrity),v.referrerpolicy&&(E.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?E.credentials="include":v.crossorigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function h(v){if(v.ep)return;v.ep=!0;const E=m(v);fetch(v.href,E)}})();function Sp(l,f){const m=Object.create(null),h=l.split(",");for(let v=0;v<h.length;v++)m[h[v]]=!0;return f?v=>!!m[v.toLowerCase()]:v=>!!m[v]}const P9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",O9=Sp(P9);function pk(l){return!!l||l===""}function xp(l){if(je(l)){const f={};for(let m=0;m<l.length;m++){const h=l[m],v=fn(h)?I9(h):xp(h);if(v)for(const E in v)f[E]=v[E]}return f}else{if(fn(l))return l;if(Lt(l))return l}}const D9=/;(?![^(]*\))/g,B9=/:(.+)/;function I9(l){const f={};return l.split(D9).forEach(m=>{if(m){const h=m.split(B9);h.length>1&&(f[h[0].trim()]=h[1].trim())}}),f}function kp(l){let f="";if(fn(l))f=l;else if(je(l))for(let m=0;m<l.length;m++){const h=kp(l[m]);h&&(f+=h+" ")}else if(Lt(l))for(const m in l)l[m]&&(f+=m+" ");return f.trim()}const F9=l=>fn(l)?l:l==null?"":je(l)||Lt(l)&&(l.toString===Ck||!Ve(l.toString))?JSON.stringify(l,hk,2):String(l),hk=(l,f)=>f&&f.__v_isRef?hk(l,f.value):Bi(f)?{[`Map(${f.size})`]:[...f.entries()].reduce((m,[h,v])=>(m[`${h} =>`]=v,m),{})}:bk(f)?{[`Set(${f.size})`]:[...f.values()]}:Lt(f)&&!je(f)&&!yk(f)?String(f):f,kt={},Di=[],Ns=()=>{},$9=()=>!1,L9=/^on[^a-z]/,Wu=l=>L9.test(l),Np=l=>l.startsWith("onUpdate:"),An=Object.assign,Ap=(l,f)=>{const m=l.indexOf(f);m>-1&&l.splice(m,1)},M9=Object.prototype.hasOwnProperty,st=(l,f)=>M9.call(l,f),je=Array.isArray,Bi=l=>Vu(l)==="[object Map]",bk=l=>Vu(l)==="[object Set]",Ve=l=>typeof l=="function",fn=l=>typeof l=="string",Tp=l=>typeof l=="symbol",Lt=l=>l!==null&&typeof l=="object",vk=l=>Lt(l)&&Ve(l.then)&&Ve(l.catch),Ck=Object.prototype.toString,Vu=l=>Ck.call(l),U9=l=>Vu(l).slice(8,-1),yk=l=>Vu(l)==="[object Object]",Rp=l=>fn(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,Du=Sp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ju=l=>{const f=Object.create(null);return m=>f[m]||(f[m]=l(m))},z9=/-(\w)/g,to=ju(l=>l.replace(z9,(f,m)=>m?m.toUpperCase():"")),H9=/\B([A-Z])/g,Ui=ju(l=>l.replace(H9,"-$1").toLowerCase()),qu=ju(l=>l.charAt(0).toUpperCase()+l.slice(1)),op=ju(l=>l?`on${qu(l)}`:""),fl=(l,f)=>!Object.is(l,f),rp=(l,f)=>{for(let m=0;m<l.length;m++)l[m](f)},$u=(l,f,m)=>{Object.defineProperty(l,f,{configurable:!0,enumerable:!1,value:m})},W9=l=>{const f=parseFloat(l);return isNaN(f)?l:f};let zx;const V9=()=>zx||(zx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Xs;class j9{constructor(f=!1){this.active=!0,this.effects=[],this.cleanups=[],!f&&Xs&&(this.parent=Xs,this.index=(Xs.scopes||(Xs.scopes=[])).push(this)-1)}run(f){if(this.active){const m=Xs;try{return Xs=this,f()}finally{Xs=m}}}on(){Xs=this}off(){Xs=this.parent}stop(f){if(this.active){let m,h;for(m=0,h=this.effects.length;m<h;m++)this.effects[m].stop();for(m=0,h=this.cleanups.length;m<h;m++)this.cleanups[m]();if(this.scopes)for(m=0,h=this.scopes.length;m<h;m++)this.scopes[m].stop(!0);if(this.parent&&!f){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.active=!1}}}function q9(l,f=Xs){f&&f.active&&f.effects.push(l)}const Pp=l=>{const f=new Set(l);return f.w=0,f.n=0,f},Ek=l=>(l.w&Yo)>0,_k=l=>(l.n&Yo)>0,K9=({deps:l})=>{if(l.length)for(let f=0;f<l.length;f++)l[f].w|=Yo},G9=l=>{const{deps:f}=l;if(f.length){let m=0;for(let h=0;h<f.length;h++){const v=f[h];Ek(v)&&!_k(v)?v.delete(l):f[m++]=v,v.w&=~Yo,v.n&=~Yo}f.length=m}},dp=new WeakMap;let ll=0,Yo=1;const mp=30;let xs;const Ur=Symbol(""),gp=Symbol("");class Op{constructor(f,m=null,h){this.fn=f,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,q9(this,h)}run(){if(!this.active)return this.fn();let f=xs,m=Ko;for(;f;){if(f===this)return;f=f.parent}try{return this.parent=xs,xs=this,Ko=!0,Yo=1<<++ll,ll<=mp?K9(this):Hx(this),this.fn()}finally{ll<=mp&&G9(this),Yo=1<<--ll,xs=this.parent,Ko=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xs===this?this.deferStop=!0:this.active&&(Hx(this),this.onStop&&this.onStop(),this.active=!1)}}function Hx(l){const{deps:f}=l;if(f.length){for(let m=0;m<f.length;m++)f[m].delete(l);f.length=0}}let Ko=!0;const wk=[];function zi(){wk.push(Ko),Ko=!1}function Hi(){const l=wk.pop();Ko=l===void 0?!0:l}function Zn(l,f,m){if(Ko&&xs){let h=dp.get(l);h||dp.set(l,h=new Map);let v=h.get(m);v||h.set(m,v=Pp()),Sk(v)}}function Sk(l,f){let m=!1;ll<=mp?_k(l)||(l.n|=Yo,m=!Ek(l)):m=!l.has(xs),m&&(l.add(xs),xs.deps.push(l))}function yo(l,f,m,h,v,E){const N=dp.get(l);if(!N)return;let P=[];if(f==="clear")P=[...N.values()];else if(m==="length"&&je(l))N.forEach((U,ne)=>{(ne==="length"||ne>=h)&&P.push(U)});else switch(m!==void 0&&P.push(N.get(m)),f){case"add":je(l)?Rp(m)&&P.push(N.get("length")):(P.push(N.get(Ur)),Bi(l)&&P.push(N.get(gp)));break;case"delete":je(l)||(P.push(N.get(Ur)),Bi(l)&&P.push(N.get(gp)));break;case"set":Bi(l)&&P.push(N.get(Ur));break}if(P.length===1)P[0]&&pp(P[0]);else{const U=[];for(const ne of P)ne&&U.push(...ne);pp(Pp(U))}}function pp(l,f){const m=je(l)?l:[...l];for(const h of m)h.computed&&Wx(h);for(const h of m)h.computed||Wx(h)}function Wx(l,f){(l!==xs||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const Y9=Sp("__proto__,__v_isRef,__isVue"),xk=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(Tp)),X9=Dp(),Q9=Dp(!1,!0),Z9=Dp(!0),Vx=J9();function J9(){const l={};return["includes","indexOf","lastIndexOf"].forEach(f=>{l[f]=function(...m){const h=ht(this);for(let E=0,N=this.length;E<N;E++)Zn(h,"get",E+"");const v=h[f](...m);return v===-1||v===!1?h[f](...m.map(ht)):v}}),["push","pop","shift","unshift","splice"].forEach(f=>{l[f]=function(...m){zi();const h=ht(this)[f].apply(this,m);return Hi(),h}}),l}function Dp(l=!1,f=!1){return function(h,v,E){if(v==="__v_isReactive")return!l;if(v==="__v_isReadonly")return l;if(v==="__v_isShallow")return f;if(v==="__v_raw"&&E===(l?f?pq:Rk:f?Tk:Ak).get(h))return h;const N=je(h);if(!l&&N&&st(Vx,v))return Reflect.get(Vx,v,E);const P=Reflect.get(h,v,E);return(Tp(v)?xk.has(v):Y9(v))||(l||Zn(h,"get",v),f)?P:En(P)?N&&Rp(v)?P:P.value:Lt(P)?l?Pk(P):Gu(P):P}}const eq=kk(),tq=kk(!0);function kk(l=!1){return function(m,h,v,E){let N=m[h];if($i(N)&&En(N)&&!En(v))return!1;if(!l&&(!Lu(v)&&!$i(v)&&(N=ht(N),v=ht(v)),!je(m)&&En(N)&&!En(v)))return N.value=v,!0;const P=je(m)&&Rp(h)?Number(h)<m.length:st(m,h),U=Reflect.set(m,h,v,E);return m===ht(E)&&(P?fl(v,N)&&yo(m,"set",h,v):yo(m,"add",h,v)),U}}function nq(l,f){const m=st(l,f);l[f];const h=Reflect.deleteProperty(l,f);return h&&m&&yo(l,"delete",f,void 0),h}function sq(l,f){const m=Reflect.has(l,f);return(!Tp(f)||!xk.has(f))&&Zn(l,"has",f),m}function oq(l){return Zn(l,"iterate",je(l)?"length":Ur),Reflect.ownKeys(l)}const Nk={get:X9,set:eq,deleteProperty:nq,has:sq,ownKeys:oq},rq={get:Z9,set(l,f){return!0},deleteProperty(l,f){return!0}},iq=An({},Nk,{get:Q9,set:tq}),Bp=l=>l,Ku=l=>Reflect.getPrototypeOf(l);function Au(l,f,m=!1,h=!1){l=l.__v_raw;const v=ht(l),E=ht(f);m||(f!==E&&Zn(v,"get",f),Zn(v,"get",E));const{has:N}=Ku(v),P=h?Bp:m?$p:dl;if(N.call(v,f))return P(l.get(f));if(N.call(v,E))return P(l.get(E));l!==v&&l.get(f)}function Tu(l,f=!1){const m=this.__v_raw,h=ht(m),v=ht(l);return f||(l!==v&&Zn(h,"has",l),Zn(h,"has",v)),l===v?m.has(l):m.has(l)||m.has(v)}function Ru(l,f=!1){return l=l.__v_raw,!f&&Zn(ht(l),"iterate",Ur),Reflect.get(l,"size",l)}function jx(l){l=ht(l);const f=ht(this);return Ku(f).has.call(f,l)||(f.add(l),yo(f,"add",l,l)),this}function qx(l,f){f=ht(f);const m=ht(this),{has:h,get:v}=Ku(m);let E=h.call(m,l);E||(l=ht(l),E=h.call(m,l));const N=v.call(m,l);return m.set(l,f),E?fl(f,N)&&yo(m,"set",l,f):yo(m,"add",l,f),this}function Kx(l){const f=ht(this),{has:m,get:h}=Ku(f);let v=m.call(f,l);v||(l=ht(l),v=m.call(f,l)),h&&h.call(f,l);const E=f.delete(l);return v&&yo(f,"delete",l,void 0),E}function Gx(){const l=ht(this),f=l.size!==0,m=l.clear();return f&&yo(l,"clear",void 0,void 0),m}function Pu(l,f){return function(h,v){const E=this,N=E.__v_raw,P=ht(N),U=f?Bp:l?$p:dl;return!l&&Zn(P,"iterate",Ur),N.forEach((ne,ue)=>h.call(v,U(ne),U(ue),E))}}function Ou(l,f,m){return function(...h){const v=this.__v_raw,E=ht(v),N=Bi(E),P=l==="entries"||l===Symbol.iterator&&N,U=l==="keys"&&N,ne=v[l](...h),ue=m?Bp:f?$p:dl;return!f&&Zn(E,"iterate",U?gp:Ur),{next(){const{value:he,done:Ne}=ne.next();return Ne?{value:he,done:Ne}:{value:P?[ue(he[0]),ue(he[1])]:ue(he),done:Ne}},[Symbol.iterator](){return this}}}}function jo(l){return function(...f){return l==="delete"?!1:this}}function aq(){const l={get(E){return Au(this,E)},get size(){return Ru(this)},has:Tu,add:jx,set:qx,delete:Kx,clear:Gx,forEach:Pu(!1,!1)},f={get(E){return Au(this,E,!1,!0)},get size(){return Ru(this)},has:Tu,add:jx,set:qx,delete:Kx,clear:Gx,forEach:Pu(!1,!0)},m={get(E){return Au(this,E,!0)},get size(){return Ru(this,!0)},has(E){return Tu.call(this,E,!0)},add:jo("add"),set:jo("set"),delete:jo("delete"),clear:jo("clear"),forEach:Pu(!0,!1)},h={get(E){return Au(this,E,!0,!0)},get size(){return Ru(this,!0)},has(E){return Tu.call(this,E,!0)},add:jo("add"),set:jo("set"),delete:jo("delete"),clear:jo("clear"),forEach:Pu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=Ou(E,!1,!1),m[E]=Ou(E,!0,!1),f[E]=Ou(E,!1,!0),h[E]=Ou(E,!0,!0)}),[l,m,f,h]}const[lq,cq,uq,fq]=aq();function Ip(l,f){const m=f?l?fq:uq:l?cq:lq;return(h,v,E)=>v==="__v_isReactive"?!l:v==="__v_isReadonly"?l:v==="__v_raw"?h:Reflect.get(st(m,v)&&v in h?m:h,v,E)}const dq={get:Ip(!1,!1)},mq={get:Ip(!1,!0)},gq={get:Ip(!0,!1)},Ak=new WeakMap,Tk=new WeakMap,Rk=new WeakMap,pq=new WeakMap;function hq(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bq(l){return l.__v_skip||!Object.isExtensible(l)?0:hq(U9(l))}function Gu(l){return $i(l)?l:Fp(l,!1,Nk,dq,Ak)}function vq(l){return Fp(l,!1,iq,mq,Tk)}function Pk(l){return Fp(l,!0,rq,gq,Rk)}function Fp(l,f,m,h,v){if(!Lt(l)||l.__v_raw&&!(f&&l.__v_isReactive))return l;const E=v.get(l);if(E)return E;const N=bq(l);if(N===0)return l;const P=new Proxy(l,N===2?h:m);return v.set(l,P),P}function Ii(l){return $i(l)?Ii(l.__v_raw):!!(l&&l.__v_isReactive)}function $i(l){return!!(l&&l.__v_isReadonly)}function Lu(l){return!!(l&&l.__v_isShallow)}function Ok(l){return Ii(l)||$i(l)}function ht(l){const f=l&&l.__v_raw;return f?ht(f):l}function Dk(l){return $u(l,"__v_skip",!0),l}const dl=l=>Lt(l)?Gu(l):l,$p=l=>Lt(l)?Pk(l):l;function Bk(l){Ko&&xs&&(l=ht(l),Sk(l.dep||(l.dep=Pp())))}function Ik(l,f){l=ht(l),l.dep&&pp(l.dep)}function En(l){return!!(l&&l.__v_isRef===!0)}function Cq(l){return yq(l,!1)}function yq(l,f){return En(l)?l:new Eq(l,f)}class Eq{constructor(f,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?f:ht(f),this._value=m?f:dl(f)}get value(){return Bk(this),this._value}set value(f){const m=this.__v_isShallow||Lu(f)||$i(f);f=m?f:ht(f),fl(f,this._rawValue)&&(this._rawValue=f,this._value=m?f:dl(f),Ik(this))}}function _q(l){return En(l)?l.value:l}const wq={get:(l,f,m)=>_q(Reflect.get(l,f,m)),set:(l,f,m,h)=>{const v=l[f];return En(v)&&!En(m)?(v.value=m,!0):Reflect.set(l,f,m,h)}};function Fk(l){return Ii(l)?l:new Proxy(l,wq)}var $k;class Sq{constructor(f,m,h,v){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this[$k]=!1,this._dirty=!0,this.effect=new Op(f,()=>{this._dirty||(this._dirty=!0,Ik(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=h}get value(){const f=ht(this);return Bk(f),(f._dirty||!f._cacheable)&&(f._dirty=!1,f._value=f.effect.run()),f._value}set value(f){this._setter(f)}}$k="__v_isReadonly";function xq(l,f,m=!1){let h,v;const E=Ve(l);return E?(h=l,v=Ns):(h=l.get,v=l.set),new Sq(h,v,E||!v,m)}function Go(l,f,m,h){let v;try{v=h?l(...h):l()}catch(E){Yu(E,f,m)}return v}function As(l,f,m,h){if(Ve(l)){const E=Go(l,f,m,h);return E&&vk(E)&&E.catch(N=>{Yu(N,f,m)}),E}const v=[];for(let E=0;E<l.length;E++)v.push(As(l[E],f,m,h));return v}function Yu(l,f,m,h=!0){const v=f?f.vnode:null;if(f){let E=f.parent;const N=f.proxy,P=m;for(;E;){const ne=E.ec;if(ne){for(let ue=0;ue<ne.length;ue++)if(ne[ue](l,N,P)===!1)return}E=E.parent}const U=f.appContext.config.errorHandler;if(U){Go(U,null,10,[l,N,P]);return}}kq(l,m,v,h)}function kq(l,f,m,h=!0){console.error(l)}let ml=!1,hp=!1;const yn=[];let Js=0;const Fi=[];let vo=null,Lr=0;const Lk=Promise.resolve();let Lp=null;function Bu(l){const f=Lp||Lk;return l?f.then(this?l.bind(this):l):f}function Nq(l){let f=Js+1,m=yn.length;for(;f<m;){const h=f+m>>>1;gl(yn[h])<l?f=h+1:m=h}return f}function Mp(l){(!yn.length||!yn.includes(l,ml&&l.allowRecurse?Js+1:Js))&&(l.id==null?yn.push(l):yn.splice(Nq(l.id),0,l),Mk())}function Mk(){!ml&&!hp&&(hp=!0,Lp=Lk.then(zk))}function Aq(l){const f=yn.indexOf(l);f>Js&&yn.splice(f,1)}function Tq(l){je(l)?Fi.push(...l):(!vo||!vo.includes(l,l.allowRecurse?Lr+1:Lr))&&Fi.push(l),Mk()}function Yx(l,f=ml?Js+1:0){for(;f<yn.length;f++){const m=yn[f];m&&m.pre&&(yn.splice(f,1),f--,m())}}function Uk(l){if(Fi.length){const f=[...new Set(Fi)];if(Fi.length=0,vo){vo.push(...f);return}for(vo=f,vo.sort((m,h)=>gl(m)-gl(h)),Lr=0;Lr<vo.length;Lr++)vo[Lr]();vo=null,Lr=0}}const gl=l=>l.id==null?1/0:l.id,Rq=(l,f)=>{const m=gl(l)-gl(f);if(m===0){if(l.pre&&!f.pre)return-1;if(f.pre&&!l.pre)return 1}return m};function zk(l){hp=!1,ml=!0,yn.sort(Rq);const f=Ns;try{for(Js=0;Js<yn.length;Js++){const m=yn[Js];m&&m.active!==!1&&Go(m,null,14)}}finally{Js=0,yn.length=0,Uk(),ml=!1,Lp=null,(yn.length||Fi.length)&&zk()}}function Pq(l,f,...m){if(l.isUnmounted)return;const h=l.vnode.props||kt;let v=m;const E=f.startsWith("update:"),N=E&&f.slice(7);if(N&&N in h){const ue=`${N==="modelValue"?"model":N}Modifiers`,{number:he,trim:Ne}=h[ue]||kt;Ne&&(v=m.map(ze=>ze.trim())),he&&(v=m.map(W9))}let P,U=h[P=op(f)]||h[P=op(to(f))];!U&&E&&(U=h[P=op(Ui(f))]),U&&As(U,l,6,v);const ne=h[P+"Once"];if(ne){if(!l.emitted)l.emitted={};else if(l.emitted[P])return;l.emitted[P]=!0,As(ne,l,6,v)}}function Hk(l,f,m=!1){const h=f.emitsCache,v=h.get(l);if(v!==void 0)return v;const E=l.emits;let N={},P=!1;if(!Ve(l)){const U=ne=>{const ue=Hk(ne,f,!0);ue&&(P=!0,An(N,ue))};!m&&f.mixins.length&&f.mixins.forEach(U),l.extends&&U(l.extends),l.mixins&&l.mixins.forEach(U)}return!E&&!P?(Lt(l)&&h.set(l,null),null):(je(E)?E.forEach(U=>N[U]=null):An(N,E),Lt(l)&&h.set(l,N),N)}function Xu(l,f){return!l||!Wu(f)?!1:(f=f.slice(2).replace(/Once$/,""),st(l,f[0].toLowerCase()+f.slice(1))||st(l,Ui(f))||st(l,f))}let eo=null,Wk=null;function Mu(l){const f=eo;return eo=l,Wk=l&&l.type.__scopeId||null,f}function Oq(l,f=eo,m){if(!f||l._n)return l;const h=(...v)=>{h._d&&rk(-1);const E=Mu(f),N=l(...v);return Mu(E),h._d&&rk(1),N};return h._n=!0,h._c=!0,h._d=!0,h}function ip(l){const{type:f,vnode:m,proxy:h,withProxy:v,props:E,propsOptions:[N],slots:P,attrs:U,emit:ne,render:ue,renderCache:he,data:Ne,setupState:ze,ctx:at,inheritAttrs:Ye}=l;let mt,ot;const Jn=Mu(l);try{if(m.shapeFlag&4){const it=v||h;mt=Zs(ue.call(it,it,he,E,ze,Ne,at)),ot=U}else{const it=f;mt=Zs(it.length>1?it(E,{attrs:U,slots:P,emit:ne}):it(E,null)),ot=f.props?U:Dq(U)}}catch(it){ul.length=0,Yu(it,l,1),mt=Co(Hr)}let de=mt;if(ot&&Ye!==!1){const it=Object.keys(ot),{shapeFlag:no}=de;it.length&&no&7&&(N&&it.some(Np)&&(ot=Bq(ot,N)),de=Li(de,ot))}return m.dirs&&(de=Li(de),de.dirs=de.dirs?de.dirs.concat(m.dirs):m.dirs),m.transition&&(de.transition=m.transition),mt=de,Mu(Jn),mt}const Dq=l=>{let f;for(const m in l)(m==="class"||m==="style"||Wu(m))&&((f||(f={}))[m]=l[m]);return f},Bq=(l,f)=>{const m={};for(const h in l)(!Np(h)||!(h.slice(9)in f))&&(m[h]=l[h]);return m};function Iq(l,f,m){const{props:h,children:v,component:E}=l,{props:N,children:P,patchFlag:U}=f,ne=E.emitsOptions;if(f.dirs||f.transition)return!0;if(m&&U>=0){if(U&1024)return!0;if(U&16)return h?Xx(h,N,ne):!!N;if(U&8){const ue=f.dynamicProps;for(let he=0;he<ue.length;he++){const Ne=ue[he];if(N[Ne]!==h[Ne]&&!Xu(ne,Ne))return!0}}}else return(v||P)&&(!P||!P.$stable)?!0:h===N?!1:h?N?Xx(h,N,ne):!0:!!N;return!1}function Xx(l,f,m){const h=Object.keys(f);if(h.length!==Object.keys(l).length)return!0;for(let v=0;v<h.length;v++){const E=h[v];if(f[E]!==l[E]&&!Xu(m,E))return!0}return!1}function Fq({vnode:l,parent:f},m){for(;f&&f.subTree===l;)(l=f.vnode).el=m,f=f.parent}const $q=l=>l.__isSuspense;function Lq(l,f){f&&f.pendingBranch?je(l)?f.effects.push(...l):f.effects.push(l):Tq(l)}function Mq(l,f){if(un){let m=un.provides;const h=un.parent&&un.parent.provides;h===m&&(m=un.provides=Object.create(h)),m[l]=f}}function ap(l,f,m=!1){const h=un||eo;if(h){const v=h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides;if(v&&l in v)return v[l];if(arguments.length>1)return m&&Ve(f)?f.call(h.proxy):f}}const Qx={};function cl(l,f,m){return Vk(l,f,m)}function Vk(l,f,{immediate:m,deep:h,flush:v,onTrack:E,onTrigger:N}=kt){const P=un;let U,ne=!1,ue=!1;if(En(l)?(U=()=>l.value,ne=Lu(l)):Ii(l)?(U=()=>l,h=!0):je(l)?(ue=!0,ne=l.some(ot=>Ii(ot)||Lu(ot)),U=()=>l.map(ot=>{if(En(ot))return ot.value;if(Ii(ot))return Oi(ot);if(Ve(ot))return Go(ot,P,2)})):Ve(l)?f?U=()=>Go(l,P,2):U=()=>{if(!(P&&P.isUnmounted))return he&&he(),As(l,P,3,[Ne])}:U=Ns,f&&h){const ot=U;U=()=>Oi(ot())}let he,Ne=ot=>{he=mt.onStop=()=>{Go(ot,P,4)}};if(hl)return Ne=Ns,f?m&&As(f,P,3,[U(),ue?[]:void 0,Ne]):U(),Ns;let ze=ue?[]:Qx;const at=()=>{if(!!mt.active)if(f){const ot=mt.run();(h||ne||(ue?ot.some((Jn,de)=>fl(Jn,ze[de])):fl(ot,ze)))&&(he&&he(),As(f,P,3,[ot,ze===Qx?void 0:ze,Ne]),ze=ot)}else mt.run()};at.allowRecurse=!!f;let Ye;v==="sync"?Ye=at:v==="post"?Ye=()=>Fn(at,P&&P.suspense):(at.pre=!0,P&&(at.id=P.uid),Ye=()=>Mp(at));const mt=new Op(U,Ye);return f?m?at():ze=mt.run():v==="post"?Fn(mt.run.bind(mt),P&&P.suspense):mt.run(),()=>{mt.stop(),P&&P.scope&&Ap(P.scope.effects,mt)}}function Uq(l,f,m){const h=this.proxy,v=fn(l)?l.includes(".")?jk(h,l):()=>h[l]:l.bind(h,h);let E;Ve(f)?E=f:(E=f.handler,m=f);const N=un;Mi(this);const P=Vk(v,E.bind(h),m);return N?Mi(N):zr(),P}function jk(l,f){const m=f.split(".");return()=>{let h=l;for(let v=0;v<m.length&&h;v++)h=h[m[v]];return h}}function Oi(l,f){if(!Lt(l)||l.__v_skip||(f=f||new Set,f.has(l)))return l;if(f.add(l),En(l))Oi(l.value,f);else if(je(l))for(let m=0;m<l.length;m++)Oi(l[m],f);else if(bk(l)||Bi(l))l.forEach(m=>{Oi(m,f)});else if(yk(l))for(const m in l)Oi(l[m],f);return l}function qk(l){return Ve(l)?{setup:l,name:l.name}:l}const Iu=l=>!!l.type.__asyncLoader,Kk=l=>l.type.__isKeepAlive;function zq(l,f){Gk(l,"a",f)}function Hq(l,f){Gk(l,"da",f)}function Gk(l,f,m=un){const h=l.__wdc||(l.__wdc=()=>{let v=m;for(;v;){if(v.isDeactivated)return;v=v.parent}return l()});if(Qu(f,h,m),m){let v=m.parent;for(;v&&v.parent;)Kk(v.parent.vnode)&&Wq(h,f,m,v),v=v.parent}}function Wq(l,f,m,h){const v=Qu(f,l,h,!0);Qk(()=>{Ap(h[f],v)},m)}function Qu(l,f,m=un,h=!1){if(m){const v=m[l]||(m[l]=[]),E=f.__weh||(f.__weh=(...N)=>{if(m.isUnmounted)return;zi(),Mi(m);const P=As(f,m,l,N);return zr(),Hi(),P});return h?v.unshift(E):v.push(E),E}}const Eo=l=>(f,m=un)=>(!hl||l==="sp")&&Qu(l,(...h)=>f(...h),m),Vq=Eo("bm"),Yk=Eo("m"),jq=Eo("bu"),qq=Eo("u"),Xk=Eo("bum"),Qk=Eo("um"),Kq=Eo("sp"),Gq=Eo("rtg"),Yq=Eo("rtc");function Xq(l,f=un){Qu("ec",l,f)}function Ir(l,f,m,h){const v=l.dirs,E=f&&f.dirs;for(let N=0;N<v.length;N++){const P=v[N];E&&(P.oldValue=E[N].value);let U=P.dir[h];U&&(zi(),As(U,m,8,[l.el,P,l,f]),Hi())}}const Zk="components";function Qq(l,f){return Jq(Zk,l,!0,f)||l}const Zq=Symbol();function Jq(l,f,m=!0,h=!1){const v=eo||un;if(v){const E=v.type;if(l===Zk){const P=PK(E,!1);if(P&&(P===f||P===to(f)||P===qu(to(f))))return E}const N=Zx(v[l]||E[l],f)||Zx(v.appContext[l],f);return!N&&h?E:N}}function Zx(l,f){return l&&(l[f]||l[to(f)]||l[qu(to(f))])}const bp=l=>l?fN(l)?Vp(l)||l.proxy:bp(l.parent):null,Uu=An(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>bp(l.parent),$root:l=>bp(l.root),$emit:l=>l.emit,$options:l=>Up(l),$forceUpdate:l=>l.f||(l.f=()=>Mp(l.update)),$nextTick:l=>l.n||(l.n=Bu.bind(l.proxy)),$watch:l=>Uq.bind(l)}),eK={get({_:l},f){const{ctx:m,setupState:h,data:v,props:E,accessCache:N,type:P,appContext:U}=l;let ne;if(f[0]!=="$"){const ze=N[f];if(ze!==void 0)switch(ze){case 1:return h[f];case 2:return v[f];case 4:return m[f];case 3:return E[f]}else{if(h!==kt&&st(h,f))return N[f]=1,h[f];if(v!==kt&&st(v,f))return N[f]=2,v[f];if((ne=l.propsOptions[0])&&st(ne,f))return N[f]=3,E[f];if(m!==kt&&st(m,f))return N[f]=4,m[f];vp&&(N[f]=0)}}const ue=Uu[f];let he,Ne;if(ue)return f==="$attrs"&&Zn(l,"get",f),ue(l);if((he=P.__cssModules)&&(he=he[f]))return he;if(m!==kt&&st(m,f))return N[f]=4,m[f];if(Ne=U.config.globalProperties,st(Ne,f))return Ne[f]},set({_:l},f,m){const{data:h,setupState:v,ctx:E}=l;return v!==kt&&st(v,f)?(v[f]=m,!0):h!==kt&&st(h,f)?(h[f]=m,!0):st(l.props,f)||f[0]==="$"&&f.slice(1)in l?!1:(E[f]=m,!0)},has({_:{data:l,setupState:f,accessCache:m,ctx:h,appContext:v,propsOptions:E}},N){let P;return!!m[N]||l!==kt&&st(l,N)||f!==kt&&st(f,N)||(P=E[0])&&st(P,N)||st(h,N)||st(Uu,N)||st(v.config.globalProperties,N)},defineProperty(l,f,m){return m.get!=null?l._.accessCache[f]=0:st(m,"value")&&this.set(l,f,m.value,null),Reflect.defineProperty(l,f,m)}};let vp=!0;function tK(l){const f=Up(l),m=l.proxy,h=l.ctx;vp=!1,f.beforeCreate&&Jx(f.beforeCreate,l,"bc");const{data:v,computed:E,methods:N,watch:P,provide:U,inject:ne,created:ue,beforeMount:he,mounted:Ne,beforeUpdate:ze,updated:at,activated:Ye,deactivated:mt,beforeDestroy:ot,beforeUnmount:Jn,destroyed:de,unmounted:it,render:no,renderTracked:St,renderTriggered:es,errorCaptured:_n,serverPrefetch:Yt,expose:lt,inheritAttrs:oe,components:He,directives:dn,filters:Ts}=f;if(ne&&nK(ne,h,null,l.appContext.config.unwrapInjectedRef),N)for(const Nt in N){const K=N[Nt];Ve(K)&&(h[Nt]=K.bind(m))}if(v){const Nt=v.call(m,m);Lt(Nt)&&(l.data=Gu(Nt))}if(vp=!0,E)for(const Nt in E){const K=E[Nt],Rt=Ve(K)?K.bind(m,m):Ve(K.get)?K.get.bind(m,m):Ns,Wr=!Ve(K)&&Ve(K.set)?K.set.bind(m):Ns,re=mN({get:Rt,set:Wr});Object.defineProperty(h,Nt,{enumerable:!0,configurable:!0,get:()=>re.value,set:Tn=>re.value=Tn})}if(P)for(const Nt in P)Jk(P[Nt],h,m,Nt);if(U){const Nt=Ve(U)?U.call(m):U;Reflect.ownKeys(Nt).forEach(K=>{Mq(K,Nt[K])})}ue&&Jx(ue,l,"c");function It(Nt,K){je(K)?K.forEach(Rt=>Nt(Rt.bind(m))):K&&Nt(K.bind(m))}if(It(Vq,he),It(Yk,Ne),It(jq,ze),It(qq,at),It(zq,Ye),It(Hq,mt),It(Xq,_n),It(Yq,St),It(Gq,es),It(Xk,Jn),It(Qk,it),It(Kq,Yt),je(lt))if(lt.length){const Nt=l.exposed||(l.exposed={});lt.forEach(K=>{Object.defineProperty(Nt,K,{get:()=>m[K],set:Rt=>m[K]=Rt})})}else l.exposed||(l.exposed={});no&&l.render===Ns&&(l.render=no),oe!=null&&(l.inheritAttrs=oe),He&&(l.components=He),dn&&(l.directives=dn)}function nK(l,f,m=Ns,h=!1){je(l)&&(l=Cp(l));for(const v in l){const E=l[v];let N;Lt(E)?"default"in E?N=ap(E.from||v,E.default,!0):N=ap(E.from||v):N=ap(E),En(N)&&h?Object.defineProperty(f,v,{enumerable:!0,configurable:!0,get:()=>N.value,set:P=>N.value=P}):f[v]=N}}function Jx(l,f,m){As(je(l)?l.map(h=>h.bind(f.proxy)):l.bind(f.proxy),f,m)}function Jk(l,f,m,h){const v=h.includes(".")?jk(m,h):()=>m[h];if(fn(l)){const E=f[l];Ve(E)&&cl(v,E)}else if(Ve(l))cl(v,l.bind(m));else if(Lt(l))if(je(l))l.forEach(E=>Jk(E,f,m,h));else{const E=Ve(l.handler)?l.handler.bind(m):f[l.handler];Ve(E)&&cl(v,E,l)}}function Up(l){const f=l.type,{mixins:m,extends:h}=f,{mixins:v,optionsCache:E,config:{optionMergeStrategies:N}}=l.appContext,P=E.get(f);let U;return P?U=P:!v.length&&!m&&!h?U=f:(U={},v.length&&v.forEach(ne=>zu(U,ne,N,!0)),zu(U,f,N)),Lt(f)&&E.set(f,U),U}function zu(l,f,m,h=!1){const{mixins:v,extends:E}=f;E&&zu(l,E,m,!0),v&&v.forEach(N=>zu(l,N,m,!0));for(const N in f)if(!(h&&N==="expose")){const P=sK[N]||m&&m[N];l[N]=P?P(l[N],f[N]):f[N]}return l}const sK={data:ek,props:$r,emits:$r,methods:$r,computed:$r,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,beforeUnmount:Nn,destroyed:Nn,unmounted:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:$r,directives:$r,watch:rK,provide:ek,inject:oK};function ek(l,f){return f?l?function(){return An(Ve(l)?l.call(this,this):l,Ve(f)?f.call(this,this):f)}:f:l}function oK(l,f){return $r(Cp(l),Cp(f))}function Cp(l){if(je(l)){const f={};for(let m=0;m<l.length;m++)f[l[m]]=l[m];return f}return l}function Nn(l,f){return l?[...new Set([].concat(l,f))]:f}function $r(l,f){return l?An(An(Object.create(null),l),f):f}function rK(l,f){if(!l)return f;if(!f)return l;const m=An(Object.create(null),l);for(const h in f)m[h]=Nn(l[h],f[h]);return m}function iK(l,f,m,h=!1){const v={},E={};$u(E,Zu,1),l.propsDefaults=Object.create(null),eN(l,f,v,E);for(const N in l.propsOptions[0])N in v||(v[N]=void 0);m?l.props=h?v:vq(v):l.type.props?l.props=v:l.props=E,l.attrs=E}function aK(l,f,m,h){const{props:v,attrs:E,vnode:{patchFlag:N}}=l,P=ht(v),[U]=l.propsOptions;let ne=!1;if((h||N>0)&&!(N&16)){if(N&8){const ue=l.vnode.dynamicProps;for(let he=0;he<ue.length;he++){let Ne=ue[he];if(Xu(l.emitsOptions,Ne))continue;const ze=f[Ne];if(U)if(st(E,Ne))ze!==E[Ne]&&(E[Ne]=ze,ne=!0);else{const at=to(Ne);v[at]=yp(U,P,at,ze,l,!1)}else ze!==E[Ne]&&(E[Ne]=ze,ne=!0)}}}else{eN(l,f,v,E)&&(ne=!0);let ue;for(const he in P)(!f||!st(f,he)&&((ue=Ui(he))===he||!st(f,ue)))&&(U?m&&(m[he]!==void 0||m[ue]!==void 0)&&(v[he]=yp(U,P,he,void 0,l,!0)):delete v[he]);if(E!==P)for(const he in E)(!f||!st(f,he)&&!0)&&(delete E[he],ne=!0)}ne&&yo(l,"set","$attrs")}function eN(l,f,m,h){const[v,E]=l.propsOptions;let N=!1,P;if(f)for(let U in f){if(Du(U))continue;const ne=f[U];let ue;v&&st(v,ue=to(U))?!E||!E.includes(ue)?m[ue]=ne:(P||(P={}))[ue]=ne:Xu(l.emitsOptions,U)||(!(U in h)||ne!==h[U])&&(h[U]=ne,N=!0)}if(E){const U=ht(m),ne=P||kt;for(let ue=0;ue<E.length;ue++){const he=E[ue];m[he]=yp(v,U,he,ne[he],l,!st(ne,he))}}return N}function yp(l,f,m,h,v,E){const N=l[m];if(N!=null){const P=st(N,"default");if(P&&h===void 0){const U=N.default;if(N.type!==Function&&Ve(U)){const{propsDefaults:ne}=v;m in ne?h=ne[m]:(Mi(v),h=ne[m]=U.call(null,f),zr())}else h=U}N[0]&&(E&&!P?h=!1:N[1]&&(h===""||h===Ui(m))&&(h=!0))}return h}function tN(l,f,m=!1){const h=f.propsCache,v=h.get(l);if(v)return v;const E=l.props,N={},P=[];let U=!1;if(!Ve(l)){const ue=he=>{U=!0;const[Ne,ze]=tN(he,f,!0);An(N,Ne),ze&&P.push(...ze)};!m&&f.mixins.length&&f.mixins.forEach(ue),l.extends&&ue(l.extends),l.mixins&&l.mixins.forEach(ue)}if(!E&&!U)return Lt(l)&&h.set(l,Di),Di;if(je(E))for(let ue=0;ue<E.length;ue++){const he=to(E[ue]);tk(he)&&(N[he]=kt)}else if(E)for(const ue in E){const he=to(ue);if(tk(he)){const Ne=E[ue],ze=N[he]=je(Ne)||Ve(Ne)?{type:Ne}:Ne;if(ze){const at=ok(Boolean,ze.type),Ye=ok(String,ze.type);ze[0]=at>-1,ze[1]=Ye<0||at<Ye,(at>-1||st(ze,"default"))&&P.push(he)}}}const ne=[N,P];return Lt(l)&&h.set(l,ne),ne}function tk(l){return l[0]!=="$"}function nk(l){const f=l&&l.toString().match(/^\s*function (\w+)/);return f?f[1]:l===null?"null":""}function sk(l,f){return nk(l)===nk(f)}function ok(l,f){return je(f)?f.findIndex(m=>sk(m,l)):Ve(f)&&sk(f,l)?0:-1}const nN=l=>l[0]==="_"||l==="$stable",zp=l=>je(l)?l.map(Zs):[Zs(l)],lK=(l,f,m)=>{if(f._n)return f;const h=Oq((...v)=>zp(f(...v)),m);return h._c=!1,h},sN=(l,f,m)=>{const h=l._ctx;for(const v in l){if(nN(v))continue;const E=l[v];if(Ve(E))f[v]=lK(v,E,h);else if(E!=null){const N=zp(E);f[v]=()=>N}}},oN=(l,f)=>{const m=zp(f);l.slots.default=()=>m},cK=(l,f)=>{if(l.vnode.shapeFlag&32){const m=f._;m?(l.slots=ht(f),$u(f,"_",m)):sN(f,l.slots={})}else l.slots={},f&&oN(l,f);$u(l.slots,Zu,1)},uK=(l,f,m)=>{const{vnode:h,slots:v}=l;let E=!0,N=kt;if(h.shapeFlag&32){const P=f._;P?m&&P===1?E=!1:(An(v,f),!m&&P===1&&delete v._):(E=!f.$stable,sN(f,v)),N=f}else f&&(oN(l,f),N={default:1});if(E)for(const P in v)!nN(P)&&!(P in N)&&delete v[P]};function rN(){return{app:null,config:{isNativeTag:$9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fK=0;function dK(l,f){return function(h,v=null){Ve(h)||(h=Object.assign({},h)),v!=null&&!Lt(v)&&(v=null);const E=rN(),N=new Set;let P=!1;const U=E.app={_uid:fK++,_component:h,_props:v,_container:null,_context:E,_instance:null,version:DK,get config(){return E.config},set config(ne){},use(ne,...ue){return N.has(ne)||(ne&&Ve(ne.install)?(N.add(ne),ne.install(U,...ue)):Ve(ne)&&(N.add(ne),ne(U,...ue))),U},mixin(ne){return E.mixins.includes(ne)||E.mixins.push(ne),U},component(ne,ue){return ue?(E.components[ne]=ue,U):E.components[ne]},directive(ne,ue){return ue?(E.directives[ne]=ue,U):E.directives[ne]},mount(ne,ue,he){if(!P){const Ne=Co(h,v);return Ne.appContext=E,ue&&f?f(Ne,ne):l(Ne,ne,he),P=!0,U._container=ne,ne.__vue_app__=U,Vp(Ne.component)||Ne.component.proxy}},unmount(){P&&(l(null,U._container),delete U._container.__vue_app__)},provide(ne,ue){return E.provides[ne]=ue,U}};return U}}function Ep(l,f,m,h,v=!1){if(je(l)){l.forEach((Ne,ze)=>Ep(Ne,f&&(je(f)?f[ze]:f),m,h,v));return}if(Iu(h)&&!v)return;const E=h.shapeFlag&4?Vp(h.component)||h.component.proxy:h.el,N=v?null:E,{i:P,r:U}=l,ne=f&&f.r,ue=P.refs===kt?P.refs={}:P.refs,he=P.setupState;if(ne!=null&&ne!==U&&(fn(ne)?(ue[ne]=null,st(he,ne)&&(he[ne]=null)):En(ne)&&(ne.value=null)),Ve(U))Go(U,P,12,[N,ue]);else{const Ne=fn(U),ze=En(U);if(Ne||ze){const at=()=>{if(l.f){const Ye=Ne?ue[U]:U.value;v?je(Ye)&&Ap(Ye,E):je(Ye)?Ye.includes(E)||Ye.push(E):Ne?(ue[U]=[E],st(he,U)&&(he[U]=ue[U])):(U.value=[E],l.k&&(ue[l.k]=U.value))}else Ne?(ue[U]=N,st(he,U)&&(he[U]=N)):ze&&(U.value=N,l.k&&(ue[l.k]=N))};N?(at.id=-1,Fn(at,m)):at()}}}const Fn=Lq;function mK(l){return gK(l)}function gK(l,f){const m=V9();m.__VUE__=!0;const{insert:h,remove:v,patchProp:E,createElement:N,createText:P,createComment:U,setText:ne,setElementText:ue,parentNode:he,nextSibling:Ne,setScopeId:ze=Ns,insertStaticContent:at}=l,Ye=(T,B,z,Y=null,V=null,R=null,Ce=!1,le=null,j=!!B.dynamicChildren)=>{if(T===B)return;T&&!al(T,B)&&(Y=vt(T),Tn(T,V,R,!0),T=null),B.patchFlag===-2&&(j=!1,B.dynamicChildren=null);const{type:se,ref:Ee,shapeFlag:Ae}=B;switch(se){case Hp:mt(T,B,z,Y);break;case Hr:ot(T,B,z,Y);break;case lp:T==null&&Jn(B,z,Y,Ce);break;case Qs:He(T,B,z,Y,V,R,Ce,le,j);break;default:Ae&1?no(T,B,z,Y,V,R,Ce,le,j):Ae&6?dn(T,B,z,Y,V,R,Ce,le,j):(Ae&64||Ae&128)&&se.process(T,B,z,Y,V,R,Ce,le,j,Rs)}Ee!=null&&V&&Ep(Ee,T&&T.ref,R,B||T,!B)},mt=(T,B,z,Y)=>{if(T==null)h(B.el=P(B.children),z,Y);else{const V=B.el=T.el;B.children!==T.children&&ne(V,B.children)}},ot=(T,B,z,Y)=>{T==null?h(B.el=U(B.children||""),z,Y):B.el=T.el},Jn=(T,B,z,Y)=>{[T.el,T.anchor]=at(T.children,B,z,Y,T.el,T.anchor)},de=({el:T,anchor:B},z,Y)=>{let V;for(;T&&T!==B;)V=Ne(T),h(T,z,Y),T=V;h(B,z,Y)},it=({el:T,anchor:B})=>{let z;for(;T&&T!==B;)z=Ne(T),v(T),T=z;v(B)},no=(T,B,z,Y,V,R,Ce,le,j)=>{Ce=Ce||B.type==="svg",T==null?St(B,z,Y,V,R,Ce,le,j):Yt(T,B,V,R,Ce,le,j)},St=(T,B,z,Y,V,R,Ce,le)=>{let j,se;const{type:Ee,props:Ae,shapeFlag:ve,transition:Le,dirs:qe}=T;if(j=T.el=N(T.type,R,Ae&&Ae.is,Ae),ve&8?ue(j,T.children):ve&16&&_n(T.children,j,null,Y,V,R&&Ee!=="foreignObject",Ce,le),qe&&Ir(T,null,Y,"created"),Ae){for(const tt in Ae)tt!=="value"&&!Du(tt)&&E(j,tt,null,Ae[tt],R,T.children,Y,V,Ze);"value"in Ae&&E(j,"value",null,Ae.value),(se=Ae.onVnodeBeforeMount)&&Ys(se,Y,T)}es(j,T,T.scopeId,Ce,Y),qe&&Ir(T,null,Y,"beforeMount");const et=(!V||V&&!V.pendingBranch)&&Le&&!Le.persisted;et&&Le.beforeEnter(j),h(j,B,z),((se=Ae&&Ae.onVnodeMounted)||et||qe)&&Fn(()=>{se&&Ys(se,Y,T),et&&Le.enter(j),qe&&Ir(T,null,Y,"mounted")},V)},es=(T,B,z,Y,V)=>{if(z&&ze(T,z),Y)for(let R=0;R<Y.length;R++)ze(T,Y[R]);if(V){let R=V.subTree;if(B===R){const Ce=V.vnode;es(T,Ce,Ce.scopeId,Ce.slotScopeIds,V.parent)}}},_n=(T,B,z,Y,V,R,Ce,le,j=0)=>{for(let se=j;se<T.length;se++){const Ee=T[se]=le?qo(T[se]):Zs(T[se]);Ye(null,Ee,B,z,Y,V,R,Ce,le)}},Yt=(T,B,z,Y,V,R,Ce)=>{const le=B.el=T.el;let{patchFlag:j,dynamicChildren:se,dirs:Ee}=B;j|=T.patchFlag&16;const Ae=T.props||kt,ve=B.props||kt;let Le;z&&Fr(z,!1),(Le=ve.onVnodeBeforeUpdate)&&Ys(Le,z,B,T),Ee&&Ir(B,T,z,"beforeUpdate"),z&&Fr(z,!0);const qe=V&&B.type!=="foreignObject";if(se?lt(T.dynamicChildren,se,le,z,Y,qe,R):Ce||K(T,B,le,null,z,Y,qe,R,!1),j>0){if(j&16)oe(le,B,Ae,ve,z,Y,V);else if(j&2&&Ae.class!==ve.class&&E(le,"class",null,ve.class,V),j&4&&E(le,"style",Ae.style,ve.style,V),j&8){const et=B.dynamicProps;for(let tt=0;tt<et.length;tt++){const xt=et[tt],wn=Ae[xt],Ps=ve[xt];(Ps!==wn||xt==="value")&&E(le,xt,wn,Ps,V,T.children,z,Y,Ze)}}j&1&&T.children!==B.children&&ue(le,B.children)}else!Ce&&se==null&&oe(le,B,Ae,ve,z,Y,V);((Le=ve.onVnodeUpdated)||Ee)&&Fn(()=>{Le&&Ys(Le,z,B,T),Ee&&Ir(B,T,z,"updated")},Y)},lt=(T,B,z,Y,V,R,Ce)=>{for(let le=0;le<B.length;le++){const j=T[le],se=B[le],Ee=j.el&&(j.type===Qs||!al(j,se)||j.shapeFlag&70)?he(j.el):z;Ye(j,se,Ee,null,Y,V,R,Ce,!0)}},oe=(T,B,z,Y,V,R,Ce)=>{if(z!==Y){if(z!==kt)for(const le in z)!Du(le)&&!(le in Y)&&E(T,le,z[le],null,Ce,B.children,V,R,Ze);for(const le in Y){if(Du(le))continue;const j=Y[le],se=z[le];j!==se&&le!=="value"&&E(T,le,se,j,Ce,B.children,V,R,Ze)}"value"in Y&&E(T,"value",z.value,Y.value)}},He=(T,B,z,Y,V,R,Ce,le,j)=>{const se=B.el=T?T.el:P(""),Ee=B.anchor=T?T.anchor:P("");let{patchFlag:Ae,dynamicChildren:ve,slotScopeIds:Le}=B;Le&&(le=le?le.concat(Le):Le),T==null?(h(se,z,Y),h(Ee,z,Y),_n(B.children,z,Ee,V,R,Ce,le,j)):Ae>0&&Ae&64&&ve&&T.dynamicChildren?(lt(T.dynamicChildren,ve,z,V,R,Ce,le),(B.key!=null||V&&B===V.subTree)&&iN(T,B,!0)):K(T,B,z,Ee,V,R,Ce,le,j)},dn=(T,B,z,Y,V,R,Ce,le,j)=>{B.slotScopeIds=le,T==null?B.shapeFlag&512?V.ctx.activate(B,z,Y,Ce,j):Ts(B,z,Y,V,R,Ce,j):$e(T,B,j)},Ts=(T,B,z,Y,V,R,Ce)=>{const le=T.component=kK(T,Y,V);if(Kk(T)&&(le.ctx.renderer=Rs),NK(le),le.asyncDep){if(V&&V.registerDep(le,It),!T.el){const j=le.subTree=Co(Hr);ot(null,j,B,z)}return}It(le,T,B,z,V,R,Ce)},$e=(T,B,z)=>{const Y=B.component=T.component;if(Iq(T,B,z))if(Y.asyncDep&&!Y.asyncResolved){Nt(Y,B,z);return}else Y.next=B,Aq(Y.update),Y.update();else B.el=T.el,Y.vnode=B},It=(T,B,z,Y,V,R,Ce)=>{const le=()=>{if(T.isMounted){let{next:Ee,bu:Ae,u:ve,parent:Le,vnode:qe}=T,et=Ee,tt;Fr(T,!1),Ee?(Ee.el=qe.el,Nt(T,Ee,Ce)):Ee=qe,Ae&&rp(Ae),(tt=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Ys(tt,Le,Ee,qe),Fr(T,!0);const xt=ip(T),wn=T.subTree;T.subTree=xt,Ye(wn,xt,he(wn.el),vt(wn),T,V,R),Ee.el=xt.el,et===null&&Fq(T,xt.el),ve&&Fn(ve,V),(tt=Ee.props&&Ee.props.onVnodeUpdated)&&Fn(()=>Ys(tt,Le,Ee,qe),V)}else{let Ee;const{el:Ae,props:ve}=B,{bm:Le,m:qe,parent:et}=T,tt=Iu(B);if(Fr(T,!1),Le&&rp(Le),!tt&&(Ee=ve&&ve.onVnodeBeforeMount)&&Ys(Ee,et,B),Fr(T,!0),Ae&&ji){const xt=()=>{T.subTree=ip(T),ji(Ae,T.subTree,T,V,null)};tt?B.type.__asyncLoader().then(()=>!T.isUnmounted&&xt()):xt()}else{const xt=T.subTree=ip(T);Ye(null,xt,z,Y,T,V,R),B.el=xt.el}if(qe&&Fn(qe,V),!tt&&(Ee=ve&&ve.onVnodeMounted)){const xt=B;Fn(()=>Ys(Ee,et,xt),V)}(B.shapeFlag&256||et&&Iu(et.vnode)&&et.vnode.shapeFlag&256)&&T.a&&Fn(T.a,V),T.isMounted=!0,B=z=Y=null}},j=T.effect=new Op(le,()=>Mp(se),T.scope),se=T.update=()=>j.run();se.id=T.uid,Fr(T,!0),se()},Nt=(T,B,z)=>{B.component=T;const Y=T.vnode.props;T.vnode=B,T.next=null,aK(T,B.props,Y,z),uK(T,B.children,z),zi(),Yx(),Hi()},K=(T,B,z,Y,V,R,Ce,le,j=!1)=>{const se=T&&T.children,Ee=T?T.shapeFlag:0,Ae=B.children,{patchFlag:ve,shapeFlag:Le}=B;if(ve>0){if(ve&128){Wr(se,Ae,z,Y,V,R,Ce,le,j);return}else if(ve&256){Rt(se,Ae,z,Y,V,R,Ce,le,j);return}}Le&8?(Ee&16&&Ze(se,V,R),Ae!==se&&ue(z,Ae)):Ee&16?Le&16?Wr(se,Ae,z,Y,V,R,Ce,le,j):Ze(se,V,R,!0):(Ee&8&&ue(z,""),Le&16&&_n(Ae,z,Y,V,R,Ce,le,j))},Rt=(T,B,z,Y,V,R,Ce,le,j)=>{T=T||Di,B=B||Di;const se=T.length,Ee=B.length,Ae=Math.min(se,Ee);let ve;for(ve=0;ve<Ae;ve++){const Le=B[ve]=j?qo(B[ve]):Zs(B[ve]);Ye(T[ve],Le,z,null,V,R,Ce,le,j)}se>Ee?Ze(T,V,R,!0,!1,Ae):_n(B,z,Y,V,R,Ce,le,j,Ae)},Wr=(T,B,z,Y,V,R,Ce,le,j)=>{let se=0;const Ee=B.length;let Ae=T.length-1,ve=Ee-1;for(;se<=Ae&&se<=ve;){const Le=T[se],qe=B[se]=j?qo(B[se]):Zs(B[se]);if(al(Le,qe))Ye(Le,qe,z,null,V,R,Ce,le,j);else break;se++}for(;se<=Ae&&se<=ve;){const Le=T[Ae],qe=B[ve]=j?qo(B[ve]):Zs(B[ve]);if(al(Le,qe))Ye(Le,qe,z,null,V,R,Ce,le,j);else break;Ae--,ve--}if(se>Ae){if(se<=ve){const Le=ve+1,qe=Le<Ee?B[Le].el:Y;for(;se<=ve;)Ye(null,B[se]=j?qo(B[se]):Zs(B[se]),z,qe,V,R,Ce,le,j),se++}}else if(se>ve)for(;se<=Ae;)Tn(T[se],V,R,!0),se++;else{const Le=se,qe=se,et=new Map;for(se=qe;se<=ve;se++){const Mt=B[se]=j?qo(B[se]):Zs(B[se]);Mt.key!=null&&et.set(Mt.key,se)}let tt,xt=0;const wn=ve-qe+1;let Ps=!1,_o=0;const so=new Array(wn);for(se=0;se<wn;se++)so[se]=0;for(se=Le;se<=Ae;se++){const Mt=T[se];if(xt>=wn){Tn(Mt,V,R,!0);continue}let Et;if(Mt.key!=null)Et=et.get(Mt.key);else for(tt=qe;tt<=ve;tt++)if(so[tt-qe]===0&&al(Mt,B[tt])){Et=tt;break}Et===void 0?Tn(Mt,V,R,!0):(so[Et-qe]=se+1,Et>=_o?_o=Et:Ps=!0,Ye(Mt,B[Et],z,null,V,R,Ce,le,j),xt++)}const Jt=Ps?pK(so):Di;for(tt=Jt.length-1,se=wn-1;se>=0;se--){const Mt=qe+se,Et=B[Mt],oo=Mt+1<Ee?B[Mt+1].el:Y;so[se]===0?Ye(null,Et,z,oo,V,R,Ce,le,j):Ps&&(tt<0||se!==Jt[tt]?re(Et,z,oo,2):tt--)}}},re=(T,B,z,Y,V=null)=>{const{el:R,type:Ce,transition:le,children:j,shapeFlag:se}=T;if(se&6){re(T.component.subTree,B,z,Y);return}if(se&128){T.suspense.move(B,z,Y);return}if(se&64){Ce.move(T,B,z,Rs);return}if(Ce===Qs){h(R,B,z);for(let Ae=0;Ae<j.length;Ae++)re(j[Ae],B,z,Y);h(T.anchor,B,z);return}if(Ce===lp){de(T,B,z);return}if(Y!==2&&se&1&&le)if(Y===0)le.beforeEnter(R),h(R,B,z),Fn(()=>le.enter(R),V);else{const{leave:Ae,delayLeave:ve,afterLeave:Le}=le,qe=()=>h(R,B,z),et=()=>{Ae(R,()=>{qe(),Le&&Le()})};ve?ve(R,qe,et):et()}else h(R,B,z)},Tn=(T,B,z,Y=!1,V=!1)=>{const{type:R,props:Ce,ref:le,children:j,dynamicChildren:se,shapeFlag:Ee,patchFlag:Ae,dirs:ve}=T;if(le!=null&&Ep(le,null,z,T,!0),Ee&256){B.ctx.deactivate(T);return}const Le=Ee&1&&ve,qe=!Iu(T);let et;if(qe&&(et=Ce&&Ce.onVnodeBeforeUnmount)&&Ys(et,B,T),Ee&6)Xo(T.component,z,Y);else{if(Ee&128){T.suspense.unmount(z,Y);return}Le&&Ir(T,null,B,"beforeUnmount"),Ee&64?T.type.remove(T,B,z,V,Rs,Y):se&&(R!==Qs||Ae>0&&Ae&64)?Ze(se,B,z,!1,!0):(R===Qs&&Ae&384||!V&&Ee&16)&&Ze(j,B,z),Y&&bl(T)}(qe&&(et=Ce&&Ce.onVnodeUnmounted)||Le)&&Fn(()=>{et&&Ys(et,B,T),Le&&Ir(T,null,B,"unmounted")},z)},bl=T=>{const{type:B,el:z,anchor:Y,transition:V}=T;if(B===Qs){Wi(z,Y);return}if(B===lp){it(T);return}const R=()=>{v(z),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(T.shapeFlag&1&&V&&!V.persisted){const{leave:Ce,delayLeave:le}=V,j=()=>Ce(z,R);le?le(T.el,R,j):j()}else R()},Wi=(T,B)=>{let z;for(;T!==B;)z=Ne(T),v(T),T=z;v(B)},Xo=(T,B,z)=>{const{bum:Y,scope:V,update:R,subTree:Ce,um:le}=T;Y&&rp(Y),V.stop(),R&&(R.active=!1,Tn(Ce,T,B,z)),le&&Fn(le,B),Fn(()=>{T.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},Ze=(T,B,z,Y=!1,V=!1,R=0)=>{for(let Ce=R;Ce<T.length;Ce++)Tn(T[Ce],B,z,Y,V)},vt=T=>T.shapeFlag&6?vt(T.component.subTree):T.shapeFlag&128?T.suspense.next():Ne(T.anchor||T.el),b=(T,B,z)=>{T==null?B._vnode&&Tn(B._vnode,null,null,!0):Ye(B._vnode||null,T,B,null,null,null,z),Yx(),Uk(),B._vnode=T},Rs={p:Ye,um:Tn,m:re,r:bl,mt:Ts,mc:_n,pc:K,pbc:lt,n:vt,o:l};let Vi,ji;return f&&([Vi,ji]=f(Rs)),{render:b,hydrate:Vi,createApp:dK(b,Vi)}}function Fr({effect:l,update:f},m){l.allowRecurse=f.allowRecurse=m}function iN(l,f,m=!1){const h=l.children,v=f.children;if(je(h)&&je(v))for(let E=0;E<h.length;E++){const N=h[E];let P=v[E];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=v[E]=qo(v[E]),P.el=N.el),m||iN(N,P))}}function pK(l){const f=l.slice(),m=[0];let h,v,E,N,P;const U=l.length;for(h=0;h<U;h++){const ne=l[h];if(ne!==0){if(v=m[m.length-1],l[v]<ne){f[h]=v,m.push(h);continue}for(E=0,N=m.length-1;E<N;)P=E+N>>1,l[m[P]]<ne?E=P+1:N=P;ne<l[m[E]]&&(E>0&&(f[h]=m[E-1]),m[E]=h)}}for(E=m.length,N=m[E-1];E-- >0;)m[E]=N,N=f[N];return m}const hK=l=>l.__isTeleport,Qs=Symbol(void 0),Hp=Symbol(void 0),Hr=Symbol(void 0),lp=Symbol(void 0),ul=[];let ks=null;function Hu(l=!1){ul.push(ks=l?null:[])}function bK(){ul.pop(),ks=ul[ul.length-1]||null}let pl=1;function rk(l){pl+=l}function aN(l){return l.dynamicChildren=pl>0?ks||Di:null,bK(),pl>0&&ks&&ks.push(l),l}function lN(l,f,m,h,v,E){return aN(as(l,f,m,h,v,E,!0))}function cN(l,f,m,h,v){return aN(Co(l,f,m,h,v,!0))}function vK(l){return l?l.__v_isVNode===!0:!1}function al(l,f){return l.type===f.type&&l.key===f.key}const Zu="__vInternal",uN=({key:l})=>l!=null?l:null,Fu=({ref:l,ref_key:f,ref_for:m})=>l!=null?fn(l)||En(l)||Ve(l)?{i:eo,r:l,k:f,f:!!m}:l:null;function as(l,f=null,m=null,h=0,v=null,E=l===Qs?0:1,N=!1,P=!1){const U={__v_isVNode:!0,__v_skip:!0,type:l,props:f,key:f&&uN(f),ref:f&&Fu(f),scopeId:Wk,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:h,dynamicProps:v,dynamicChildren:null,appContext:null};return P?(Wp(U,m),E&128&&l.normalize(U)):m&&(U.shapeFlag|=fn(m)?8:16),pl>0&&!N&&ks&&(U.patchFlag>0||E&6)&&U.patchFlag!==32&&ks.push(U),U}const Co=CK;function CK(l,f=null,m=null,h=0,v=null,E=!1){if((!l||l===Zq)&&(l=Hr),vK(l)){const P=Li(l,f,!0);return m&&Wp(P,m),pl>0&&!E&&ks&&(P.shapeFlag&6?ks[ks.indexOf(l)]=P:ks.push(P)),P.patchFlag|=-2,P}if(OK(l)&&(l=l.__vccOpts),f){f=yK(f);let{class:P,style:U}=f;P&&!fn(P)&&(f.class=kp(P)),Lt(U)&&(Ok(U)&&!je(U)&&(U=An({},U)),f.style=xp(U))}const N=fn(l)?1:$q(l)?128:hK(l)?64:Lt(l)?4:Ve(l)?2:0;return as(l,f,m,h,v,N,E,!0)}function yK(l){return l?Ok(l)||Zu in l?An({},l):l:null}function Li(l,f,m=!1){const{props:h,ref:v,patchFlag:E,children:N}=l,P=f?wK(h||{},f):h;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:P,key:P&&uN(P),ref:f&&f.ref?m&&v?je(v)?v.concat(Fu(f)):[v,Fu(f)]:Fu(f):v,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:N,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:f&&l.type!==Qs?E===-1?16:E|16:E,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Li(l.ssContent),ssFallback:l.ssFallback&&Li(l.ssFallback),el:l.el,anchor:l.anchor}}function EK(l=" ",f=0){return Co(Hp,null,l,f)}function _K(l="",f=!1){return f?(Hu(),cN(Hr,null,l)):Co(Hr,null,l)}function Zs(l){return l==null||typeof l=="boolean"?Co(Hr):je(l)?Co(Qs,null,l.slice()):typeof l=="object"?qo(l):Co(Hp,null,String(l))}function qo(l){return l.el===null&&l.patchFlag!==-1||l.memo?l:Li(l)}function Wp(l,f){let m=0;const{shapeFlag:h}=l;if(f==null)f=null;else if(je(f))m=16;else if(typeof f=="object")if(h&65){const v=f.default;v&&(v._c&&(v._d=!1),Wp(l,v()),v._c&&(v._d=!0));return}else{m=32;const v=f._;!v&&!(Zu in f)?f._ctx=eo:v===3&&eo&&(eo.slots._===1?f._=1:(f._=2,l.patchFlag|=1024))}else Ve(f)?(f={default:f,_ctx:eo},m=32):(f=String(f),h&64?(m=16,f=[EK(f)]):m=8);l.children=f,l.shapeFlag|=m}function wK(...l){const f={};for(let m=0;m<l.length;m++){const h=l[m];for(const v in h)if(v==="class")f.class!==h.class&&(f.class=kp([f.class,h.class]));else if(v==="style")f.style=xp([f.style,h.style]);else if(Wu(v)){const E=f[v],N=h[v];N&&E!==N&&!(je(E)&&E.includes(N))&&(f[v]=E?[].concat(E,N):N)}else v!==""&&(f[v]=h[v])}return f}function Ys(l,f,m,h=null){As(l,f,7,[m,h])}const SK=rN();let xK=0;function kK(l,f,m){const h=l.type,v=(f?f.appContext:l.appContext)||SK,E={uid:xK++,vnode:l,type:h,parent:f,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new j9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:f?f.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tN(h,v),emitsOptions:Hk(h,v),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:h.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=f?f.root:E,E.emit=Pq.bind(null,E),l.ce&&l.ce(E),E}let un=null;const Mi=l=>{un=l,l.scope.on()},zr=()=>{un&&un.scope.off(),un=null};function fN(l){return l.vnode.shapeFlag&4}let hl=!1;function NK(l,f=!1){hl=f;const{props:m,children:h}=l.vnode,v=fN(l);iK(l,m,v,f),cK(l,h);const E=v?AK(l,f):void 0;return hl=!1,E}function AK(l,f){const m=l.type;l.accessCache=Object.create(null),l.proxy=Dk(new Proxy(l.ctx,eK));const{setup:h}=m;if(h){const v=l.setupContext=h.length>1?RK(l):null;Mi(l),zi();const E=Go(h,l,0,[l.props,v]);if(Hi(),zr(),vk(E)){if(E.then(zr,zr),f)return E.then(N=>{ik(l,N,f)}).catch(N=>{Yu(N,l,0)});l.asyncDep=E}else ik(l,E,f)}else dN(l,f)}function ik(l,f,m){Ve(f)?l.type.__ssrInlineRender?l.ssrRender=f:l.render=f:Lt(f)&&(l.setupState=Fk(f)),dN(l,m)}let ak;function dN(l,f,m){const h=l.type;if(!l.render){if(!f&&ak&&!h.render){const v=h.template||Up(l).template;if(v){const{isCustomElement:E,compilerOptions:N}=l.appContext.config,{delimiters:P,compilerOptions:U}=h,ne=An(An({isCustomElement:E,delimiters:P},N),U);h.render=ak(v,ne)}}l.render=h.render||Ns}Mi(l),zi(),tK(l),Hi(),zr()}function TK(l){return new Proxy(l.attrs,{get(f,m){return Zn(l,"get","$attrs"),f[m]}})}function RK(l){const f=h=>{l.exposed=h||{}};let m;return{get attrs(){return m||(m=TK(l))},slots:l.slots,emit:l.emit,expose:f}}function Vp(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(Fk(Dk(l.exposed)),{get(f,m){if(m in f)return f[m];if(m in Uu)return Uu[m](l)}}))}function PK(l,f=!0){return Ve(l)?l.displayName||l.name:l.name||f&&l.__name}function OK(l){return Ve(l)&&"__vccOpts"in l}const mN=(l,f)=>xq(l,f,hl),DK="3.2.40",BK="http://www.w3.org/2000/svg",Mr=typeof document<"u"?document:null,lk=Mr&&Mr.createElement("template"),IK={insert:(l,f,m)=>{f.insertBefore(l,m||null)},remove:l=>{const f=l.parentNode;f&&f.removeChild(l)},createElement:(l,f,m,h)=>{const v=f?Mr.createElementNS(BK,l):Mr.createElement(l,m?{is:m}:void 0);return l==="select"&&h&&h.multiple!=null&&v.setAttribute("multiple",h.multiple),v},createText:l=>Mr.createTextNode(l),createComment:l=>Mr.createComment(l),setText:(l,f)=>{l.nodeValue=f},setElementText:(l,f)=>{l.textContent=f},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Mr.querySelector(l),setScopeId(l,f){l.setAttribute(f,"")},insertStaticContent(l,f,m,h,v,E){const N=m?m.previousSibling:f.lastChild;if(v&&(v===E||v.nextSibling))for(;f.insertBefore(v.cloneNode(!0),m),!(v===E||!(v=v.nextSibling)););else{lk.innerHTML=h?`<svg>${l}</svg>`:l;const P=lk.content;if(h){const U=P.firstChild;for(;U.firstChild;)P.appendChild(U.firstChild);P.removeChild(U)}f.insertBefore(P,m)}return[N?N.nextSibling:f.firstChild,m?m.previousSibling:f.lastChild]}};function FK(l,f,m){const h=l._vtc;h&&(f=(f?[f,...h]:[...h]).join(" ")),f==null?l.removeAttribute("class"):m?l.setAttribute("class",f):l.className=f}function $K(l,f,m){const h=l.style,v=fn(m);if(m&&!v){for(const E in m)_p(h,E,m[E]);if(f&&!fn(f))for(const E in f)m[E]==null&&_p(h,E,"")}else{const E=h.display;v?f!==m&&(h.cssText=m):f&&l.removeAttribute("style"),"_vod"in l&&(h.display=E)}}const ck=/\s*!important$/;function _p(l,f,m){if(je(m))m.forEach(h=>_p(l,f,h));else if(m==null&&(m=""),f.startsWith("--"))l.setProperty(f,m);else{const h=LK(l,f);ck.test(m)?l.setProperty(Ui(h),m.replace(ck,""),"important"):l[h]=m}}const uk=["Webkit","Moz","ms"],cp={};function LK(l,f){const m=cp[f];if(m)return m;let h=to(f);if(h!=="filter"&&h in l)return cp[f]=h;h=qu(h);for(let v=0;v<uk.length;v++){const E=uk[v]+h;if(E in l)return cp[f]=E}return f}const fk="http://www.w3.org/1999/xlink";function MK(l,f,m,h,v){if(h&&f.startsWith("xlink:"))m==null?l.removeAttributeNS(fk,f.slice(6,f.length)):l.setAttributeNS(fk,f,m);else{const E=O9(f);m==null||E&&!pk(m)?l.removeAttribute(f):l.setAttribute(f,E?"":m)}}function UK(l,f,m,h,v,E,N){if(f==="innerHTML"||f==="textContent"){h&&N(h,v,E),l[f]=m==null?"":m;return}if(f==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const U=m==null?"":m;(l.value!==U||l.tagName==="OPTION")&&(l.value=U),m==null&&l.removeAttribute(f);return}let P=!1;if(m===""||m==null){const U=typeof l[f];U==="boolean"?m=pk(m):m==null&&U==="string"?(m="",P=!0):U==="number"&&(m=0,P=!0)}try{l[f]=m}catch{}P&&l.removeAttribute(f)}const[gN,zK]=(()=>{let l=Date.now,f=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(l=performance.now.bind(performance));const m=navigator.userAgent.match(/firefox\/(\d+)/i);f=!!(m&&Number(m[1])<=53)}return[l,f]})();let wp=0;const HK=Promise.resolve(),WK=()=>{wp=0},VK=()=>wp||(HK.then(WK),wp=gN());function jK(l,f,m,h){l.addEventListener(f,m,h)}function qK(l,f,m,h){l.removeEventListener(f,m,h)}function KK(l,f,m,h,v=null){const E=l._vei||(l._vei={}),N=E[f];if(h&&N)N.value=h;else{const[P,U]=GK(f);if(h){const ne=E[f]=YK(h,v);jK(l,P,ne,U)}else N&&(qK(l,P,N,U),E[f]=void 0)}}const dk=/(?:Once|Passive|Capture)$/;function GK(l){let f;if(dk.test(l)){f={};let h;for(;h=l.match(dk);)l=l.slice(0,l.length-h[0].length),f[h[0].toLowerCase()]=!0}return[l[2]===":"?l.slice(3):Ui(l.slice(2)),f]}function YK(l,f){const m=h=>{const v=h.timeStamp||gN();(zK||v>=m.attached-1)&&As(XK(h,m.value),f,5,[h])};return m.value=l,m.attached=VK(),m}function XK(l,f){if(je(f)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},f.map(h=>v=>!v._stopped&&h&&h(v))}else return f}const mk=/^on[a-z]/,QK=(l,f,m,h,v=!1,E,N,P,U)=>{f==="class"?FK(l,h,v):f==="style"?$K(l,m,h):Wu(f)?Np(f)||KK(l,f,m,h,N):(f[0]==="."?(f=f.slice(1),!0):f[0]==="^"?(f=f.slice(1),!1):ZK(l,f,h,v))?UK(l,f,h,E,N,P,U):(f==="true-value"?l._trueValue=h:f==="false-value"&&(l._falseValue=h),MK(l,f,h,v))};function ZK(l,f,m,h){return h?!!(f==="innerHTML"||f==="textContent"||f in l&&mk.test(f)&&Ve(m)):f==="spellcheck"||f==="draggable"||f==="translate"||f==="form"||f==="list"&&l.tagName==="INPUT"||f==="type"&&l.tagName==="TEXTAREA"||mk.test(f)&&fn(m)?!1:f in l}const JK=An({patchProp:QK},IK);let gk;function e7(){return gk||(gk=mK(JK))}const t7=(...l)=>{const f=e7().createApp(...l),{mount:m}=f;return f.mount=h=>{const v=n7(h);if(!v)return;const E=f._component;!Ve(E)&&!E.render&&!E.template&&(E.template=v.innerHTML),v.innerHTML="";const N=m(v,!1,v instanceof SVGElement);return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),N},f};function n7(l){return fn(l)?document.querySelector(l):l}const s7=qk({name:"App",components:{},setup(){const l=Gu({content:"init content",show:!0,locale:""}),f=mN(()=>{let h={};return l.locale==="en"&&(h={language:"en_US"}),h});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:f,switchLanguage:m}}}),o7=(l,f)=>{const m=l.__vccOpts||l;for(const[h,v]of f)m[h]=v;return m},r7=as("h1",null,"VueTinymce example",-1),i7=as("br",null,null,-1),a7=as("br",null,null,-1),l7=as("br",null,null,-1),c7=as("br",null,null,-1),u7=as("h2",null,"output",-1),f7=["innerHTML"];function d7(l,f,m,h,v,E){const N=Qq("vue-tinymce");return Hu(),lN(Qs,null,[r7,as("button",{onClick:f[0]||(f[0]=P=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+F9(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),i7,a7,as("button",{onClick:f[1]||(f[1]=(...P)=>l.switchLanguage&&l.switchLanguage(...P))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),l7,c7,l.data.show?(Hu(),cN(N,{key:0,modelValue:l.data.content,"onUpdate:modelValue":f[2]||(f[2]=P=>l.data.content=P),config:l.config},null,8,["modelValue","config"])):_K("",!0),u7,as("div",{innerHTML:l.data.content},null,8,f7)],64)}const m7=o7(s7,[["render",d7]]);var pN={exports:{}};(function(l){(function(){var f=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},h=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},v=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},N=E(function(e,t){return e===t}),P=N,U=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},ne=function(e,t){return v(U(e),function(n){return h(n,t)})},ue=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!ne(P).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},he=E(function(e,t){if(e===t)return!0;var n=f(e),s=f(t);return n!==s?!1:m(n)?e===t:n==="array"?U(he).eq(e,t):n==="object"?ue(he).eq(e,t):!1});const Ne=Object.getPrototypeOf,ze=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},at=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&ze(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Ye=e=>t=>at(t)===e,mt=e=>t=>typeof t===e,ot=e=>t=>e===t,Jn=(e,t)=>it(e)&&ze(e,t,(n,s)=>Ne(n)===s),de=Ye("string"),it=Ye("object"),no=e=>Jn(e,Object),St=Ye("array"),es=ot(null),_n=mt("boolean"),Yt=ot(void 0),lt=e=>e==null,oe=e=>!lt(e),He=mt("function"),dn=mt("number"),Ts=(e,t)=>{if(St(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},$e=()=>{},It=(e,t)=>(...n)=>e(t.apply(null,n)),Nt=(e,t)=>n=>e(t(n)),K=e=>()=>e,Rt=e=>e,Wr=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const Tn=e=>t=>!e(t),bl=e=>()=>{throw new Error(e)},Wi=e=>e(),Xo=e=>{e()},Ze=K(!1),vt=K(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return oe(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const Rs=Array.prototype.slice,Vi=Array.prototype.indexOf,ji=Array.prototype.push,T=(e,t)=>Vi.call(e,t),B=(e,t)=>{const n=T(e,t);return n===-1?b.none():b.some(n)},z=(e,t)=>T(e,t)>-1,Y=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},V=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},R=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},Ce=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},le=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},j=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},se=(e,t,n)=>(Ce(e,(s,o)=>{n=t(n,s,o)}),n),Ee=(e,t,n)=>(R(e,(s,o)=>{n=t(n,s,o)}),n),Ae=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},ve=(e,t)=>Ae(e,t,Ze),Le=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},qe=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!St(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ji.apply(t,e[n])}return t},et=(e,t)=>qe(V(e,t)),tt=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},xt=e=>{const t=Rs.call(e,0);return t.reverse(),t},wn=(e,t)=>j(e,n=>!z(t,n)),Ps=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},_o=(e,t)=>{const n=Rs.call(e,0);return n.sort(t),n},so=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),Jt=e=>so(e,0),Mt=e=>so(e,e.length-1),Et=He(Array.from)?Array.from:e=>Rs.call(e),oo=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},bN=(e,t)=>{const n=[],s=He(t)?o=>Y(n,r=>t(r,o)):o=>z(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},$n=Object.keys,vN=Object.hasOwnProperty,ct=(e,t)=>{const n=$n(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},vl=(e,t)=>CN(e,(n,s)=>({k:s,v:t(n,s)})),CN=(e,t)=>{const n={};return ct(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Ju=e=>(t,n)=>{e[n]=t},jp=(e,t,n,s)=>{ct(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},yN=(e,t)=>{const n={},s={};return jp(e,t,Ju(n),Ju(s)),{t:n,f:s}},qi=(e,t)=>{const n={};return jp(e,t,Ju(n),$e),n},ef=(e,t)=>{const n=[];return ct(e,(s,o)=>{n.push(t(s,o))}),n},tf=e=>ef(e,Rt),gt=(e,t)=>Fe(e,t)?b.from(e[t]):b.none(),Fe=(e,t)=>vN.call(e,t),Vr=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,EN=(e,t,n=he)=>ue(n).eq(e,t),qp=e=>{const t={};return R(e,n=>{t[n]={}}),$n(t)},Kp=e=>e.length!==void 0,nf=Array.isArray,_N=e=>{if(nf(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Cl=(e,t,n)=>{if(!e)return!1;if(n=n||e,Kp(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(Fe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},sf=(e,t)=>{const n=[];return Cl(e,(s,o)=>{n.push(t(s,o,e))}),n},Ki=(e,t)=>{const n=[];return Cl(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},wN=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},yl=(e,t,n,s)=>{let o=Yt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Gp=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Qo=e=>e[e.length-1],Zo=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},SN=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),u=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!u&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(u),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},xN=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},kN=(e,t)=>{const n=xN(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return of(s(1),s(2))},NN=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Yp():kN(e,n)},Yp=()=>of(0,0),of=(e,t)=>({major:e,minor:t}),Gi={nu:of,detect:NN,unknown:Yp},AN=(e,t)=>oo(t.brands,n=>{const s=n.brand.toLowerCase();return ve(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Gi.nu(parseInt(n.version,10),0)}))}),Xp=(e,t)=>{const n=String(t).toLowerCase();return ve(e,s=>s.search(n))},TN=(e,t)=>Xp(e,t).map(n=>{const s=Gi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),RN=(e,t)=>Xp(e,t).map(n=>{const s=Gi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),PN=(e,t)=>e.substring(t),Qp=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,ON=(e,t)=>Xt(e,t)?PN(e,t.length):e,en=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?Yt(s)?!0:o+t.length<=s:!1},Xt=(e,t)=>Qp(e,t,0),Zp=(e,t)=>Qp(e,t,e.length-t.length),rf=e=>t=>t.replace(e,""),jr=rf(/^\s+|\s+$/g),DN=rf(/^\s+/g),Jp=rf(/\s+$/g),Os=e=>e.length>0,Yi=e=>!Os(e),BN=(e,t)=>t<=0?"":new Array(t+1).join(e),El=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},af=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ro=e=>t=>en(t,e),IN=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>en(e,"edge/")&&en(e,"chrome")&&en(e,"safari")&&en(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,af],search:e=>en(e,"chrome")&&!en(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>en(e,"msie")||en(e,"trident")},{name:"Opera",versionRegexes:[af,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ro("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ro("firefox")},{name:"Safari",versionRegexes:[af,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(en(e,"safari")||en(e,"mobile/"))&&en(e,"applewebkit")}],FN=[{name:"Windows",search:ro("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>en(e,"iphone")||en(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ro("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ro("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ro("linux"),versionRegexes:[]},{name:"Solaris",search:ro("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ro("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ro("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],eh={browsers:K(IN),oses:K(FN)},th="Edge",nh="Chromium",sh="IE",oh="Opera",rh="Firefox",ih="Safari",$N=()=>ah({current:void 0,version:Gi.unknown()}),ah=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(th),isChromium:s(nh),isIE:s(sh),isOpera:s(oh),isFirefox:s(rh),isSafari:s(ih)}},lh={unknown:$N,nu:ah,edge:K(th),chromium:K(nh),ie:K(sh),opera:K(oh),firefox:K(rh),safari:K(ih)},ch="Windows",uh="iOS",fh="Android",dh="Linux",mh="macOS",gh="Solaris",ph="FreeBSD",hh="ChromeOS",LN=()=>bh({current:void 0,version:Gi.unknown()}),bh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(ch),isiOS:s(uh),isAndroid:s(fh),isMacOS:s(mh),isLinux:s(dh),isSolaris:s(gh),isFreeBSD:s(ph),isChromeOS:s(hh)}},vh={unknown:LN,nu:bh,windows:K(ch),ios:K(uh),android:K(fh),linux:K(dh),macos:K(mh),solaris:K(gh),freebsd:K(ph),chromeos:K(hh)},MN={detect:(e,t,n)=>{const s=eh.browsers(),o=eh.oses(),r=t.bind(c=>AN(s,c)).orThunk(()=>TN(s,e)).fold(lh.unknown,lh.nu),i=RN(o,e).fold(vh.unknown,vh.nu),a=SN(i,r,e,n);return{browser:r,os:i,deviceType:a}}},UN=e=>window.matchMedia(e).matches;let zN=Zo(()=>MN.detect(navigator.userAgent,b.from(navigator.userAgentData),UN));const Jo=()=>zN(),HN=navigator.userAgent,lf=Jo(),Ds=lf.browser,Bs=lf.os,er=lf.deviceType,WN=HN.indexOf("Windows Phone")!==-1,Ke={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ds.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ds.isIE(),windowsPhone:WN,browser:{current:Ds.current,version:Ds.version,isChromium:Ds.isChromium,isEdge:Ds.isEdge,isFirefox:Ds.isFirefox,isIE:Ds.isIE,isOpera:Ds.isOpera,isSafari:Ds.isSafari},os:{current:Bs.current,version:Bs.version,isAndroid:Bs.isAndroid,isChromeOS:Bs.isChromeOS,isFreeBSD:Bs.isFreeBSD,isiOS:Bs.isiOS,isLinux:Bs.isLinux,isMacOS:Bs.isMacOS,isSolaris:Bs.isSolaris,isWindows:Bs.isWindows},deviceType:{isDesktop:er.isDesktop,isiPad:er.isiPad,isiPhone:er.isiPhone,isPhone:er.isPhone,isTablet:er.isTablet,isTouch:er.isTouch,isWebView:er.isWebView}},VN=/^\s*|\s*$/g,Ch=e=>lt(e)?"":(""+e).replace(VN,""),jN=(e,t)=>t?t==="array"&&nf(e)?!0:typeof e===t:e!==void 0,qN=(e,t,n={})=>{const s=de(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},KN=Fe,GN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Fe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},yh=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Cl(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(yh(o,t,n,s),!0)))},Q={trim:Ch,isArray:nf,is:jN,toArray:_N,makeMap:qN,each:Cl,map:sf,grep:Ki,inArray:wN,hasOwn:KN,extend:GN,walk:yh,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>St(e)?e:e===""?[]:sf(e.split(t||","),Ch),_addCacheSuffix:e=>{const t=Ke.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},qr=(e,t,n=Wr)=>e.exists(s=>n(s,t)),YN=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},mn=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),XN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),Xi=(e,t)=>e?b.some(t):b.none();typeof window<"u"||Function("return this;")();const Eh=8,_h=9,wh=11,Qi=1,Sh=3,_t=e=>e.dom.nodeName.toLowerCase(),xh=e=>e.dom.nodeType,_l=e=>t=>xh(t)===e,QN=e=>xh(e)===Eh||_t(e)==="#comment",ts=_l(Qi),Ln=_l(Sh),ZN=_l(_h),JN=_l(wh),cf=e=>t=>ts(t)&&_t(t)===e,kh=(e,t,n)=>{if(de(n)||_n(n)||dn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Vt=(e,t,n)=>{kh(e.dom,t,n)},wo=(e,t)=>{const n=e.dom;ct(t,(s,o)=>{kh(n,o,s)})},ns=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},io=(e,t)=>b.from(ns(e,t)),wl=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},tn=(e,t)=>{e.dom.removeAttribute(t)},eA=e=>{const t=e.dom.attributes;return t==null||t.length===0},Nh=e=>Ee(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),uf=(e,t)=>{const n=ns(e,t);return n===void 0||n===""?[]:n.split(" ")},tA=(e,t,n)=>{const o=uf(e,t).concat([n]);return Vt(e,t,o.join(" ")),!0},nA=(e,t,n)=>{const s=j(uf(e,t),o=>o!==n);return s.length>0?Vt(e,t,s.join(" ")):tn(e,t),!1},Zi=e=>e.dom.classList!==void 0,Ah=e=>uf(e,"class"),Th=(e,t)=>tA(e,"class",t),Rh=(e,t)=>nA(e,"class",t),sA=(e,t)=>z(Ah(e),t)?Rh(e,t):Th(e,t),Ji=(e,t)=>{Zi(e)?e.dom.classList.add(t):Th(e,t)},Ph=e=>{(Zi(e)?e.dom.classList:Ah(e)).length===0&&tn(e,"class")},Sl=(e,t)=>{Zi(e)?e.dom.classList.remove(t):Rh(e,t),Ph(e)},oA=(e,t)=>{const n=Zi(e)?e.dom.classList.toggle(t):sA(e,t);return Ph(e),n},ff=(e,t)=>Zi(e)&&e.dom.classList.contains(t),ea=e=>e.style!==void 0&&He(e.style.getPropertyValue),rA=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return ta(s.childNodes[0])},iA=(e,t)=>{const s=(t||document).createElement(e);return ta(s)},aA=(e,t)=>{const s=(t||document).createTextNode(e);return ta(s)},ta=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},x={fromHtml:rA,fromTag:iA,fromText:aA,fromDom:ta,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(ta)},Oh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},ls=(e,t)=>{const n=e.dom;if(n.nodeType!==Qi)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Dh=e=>e.nodeType!==Qi&&e.nodeType!==_h&&e.nodeType!==wh||e.childElementCount===0,lA=(e,t)=>{const n=t===void 0?document:t.dom;return Dh(n)?[]:V(n.querySelectorAll(e),x.fromDom)},cA=(e,t)=>{const n=t===void 0?document:t.dom;return Dh(n)?b.none():b.from(n.querySelector(e)).map(x.fromDom)},nt=(e,t)=>e.dom===t.dom,ao=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Bh=e=>x.fromDom(e.dom.ownerDocument),lo=e=>ZN(e)?e:Bh(e),uA=e=>x.fromDom(lo(e).dom.documentElement),na=e=>x.fromDom(lo(e).dom.defaultView),Mn=e=>b.from(e.dom.parentNode).map(x.fromDom),fA=e=>b.from(e.dom.parentElement).map(x.fromDom),dA=(e,t)=>{const n=He(t)?t:Ze;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=x.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},mA=e=>{const t=n=>j(n,s=>!nt(e,s));return Mn(e).map(nn).map(t).getOr([])},tr=e=>b.from(e.dom.previousSibling).map(x.fromDom),sa=e=>b.from(e.dom.nextSibling).map(x.fromDom),Ih=e=>xt(Oh(e,tr)),Fh=e=>Oh(e,sa),nn=e=>V(e.dom.childNodes,x.fromDom),xl=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(x.fromDom)},$h=e=>xl(e,0),df=e=>xl(e,e.dom.childNodes.length-1),Lh=e=>e.dom.childNodes.length,gA=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return x.fromDom(t)},mf=e=>JN(e)&&oe(e.dom.host),Mh=He(Element.prototype.attachShadow)&&He(Node.prototype.getRootNode),pA=K(Mh),So=Mh?e=>x.fromDom(e.dom.getRootNode()):lo,gf=e=>mf(e)?e:gA(lo(e)),hA=e=>mf(e)?e:x.fromDom(lo(e).dom.body),bA=e=>{const t=So(e);return mf(t)?b.some(t):b.none()},vA=e=>x.fromDom(e.dom.host),Uh=e=>{if(pA()&&oe(e.target)){const t=x.fromDom(e.target);if(ts(t)&&CA(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Jt(n)}}return b.from(e.target)},CA=e=>oe(e.dom.shadowRoot),Kr=e=>{const t=Ln(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return bA(x.fromDom(t)).fold(()=>n.body.contains(t),Nt(Kr,vA))},zh=(e,t,n)=>{if(!de(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ea(e)&&e.style.setProperty(t,n)},yA=(e,t)=>{ea(e)&&e.style.removeProperty(t)},Hh=(e,t,n)=>{const s=e.dom;zh(s,t,n)},kl=(e,t)=>{const n=e.dom;ct(t,(s,o)=>{zh(n,o,s)})},Is=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Kr(e)?Wh(n,t):o},Wh=(e,t)=>ea(e)?e.style.getPropertyValue(t):"",Nl=(e,t)=>{const n=e.dom,s=Wh(n,t);return b.from(s).filter(o=>o.length>0)},Vh=e=>{const t={},n=e.dom;if(ea(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},jh=(e,t)=>{const n=e.dom;yA(n,t),qr(io(e,"style").map(jr),"")&&tn(e,"style")},EA=e=>e.dom.offsetWidth,Un=(e,t)=>{Mn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},xo=(e,t)=>{sa(e).fold(()=>{Mn(e).each(o=>{Ut(o,t)})},s=>{Un(s,t)})},qh=(e,t)=>{$h(e).fold(()=>{Ut(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Ut=(e,t)=>{e.dom.appendChild(t.dom)},_A=(e,t)=>{Un(e,t),Ut(t,e)},wA=(e,t)=>{R(t,(n,s)=>{const o=s===0?e:t[s-1];xo(o,n)})},nr=(e,t)=>{R(t,n=>{Ut(e,n)})},oa=e=>{e.dom.textContent="",R(nn(e),t=>{Ct(t)})},Ct=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},ko=e=>{const t=nn(e);t.length>0&&wA(e,t),Ct(e)},SA=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,nn(x.fromDom(s))},xA=e=>V(e,x.fromDom),Kh=e=>e.dom.innerHTML,Al=(e,t)=>{const s=Bh(e).dom,o=x.fromDom(s.createDocumentFragment()),r=SA(t,s);nr(o,r),oa(e),Ut(e,o)},kA=e=>{const t=x.fromTag("div"),n=x.fromDom(e.dom.cloneNode(!0));return Ut(t,n),Kh(t)},NA=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),AA=e=>{const t=x.fromDom(Uh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=It(s,n);return NA(t,e.clientX,e.clientY,n,s,o,e)},TA=(e,t)=>n=>{e(n)&&t(AA(n))},RA=(e,t,n,s,o)=>{const r=TA(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(OA,e,t,r,o)}},PA=(e,t,n,s)=>RA(e,t,n,s,!1),OA=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Gh=(e,t)=>({left:e,top:t,translate:(s,o)=>Gh(e+s,t+o)}),Gr=Gh,DA=e=>{const t=e.getBoundingClientRect();return Gr(t.left,t.top)},Tl=(e,t)=>e!==void 0?e:t!==void 0?t:0,BA=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Gr(n.offsetLeft,n.offsetTop);const r=Tl(s==null?void 0:s.pageYOffset,o.scrollTop),i=Tl(s==null?void 0:s.pageXOffset,o.scrollLeft),a=Tl(o.clientTop,n.clientTop),c=Tl(o.clientLeft,n.clientLeft);return pf(e).translate(i-c,r-a)},pf=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Gr(s.offsetLeft,s.offsetTop):Kr(e)?DA(t):Gr(0,0)},hf=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Gr(n,s)},Yh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Xh=(e,t)=>{Jo().browser.isSafari()&&He(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},IA=e=>{const t=e===void 0?window:e;return Jo().browser.isFirefox()?b.none():b.from(t.visualViewport)},Qh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Zh=e=>{const t=e===void 0?window:e,n=t.document,s=hf(x.fromDom(n));return IA(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return Qh(s.left,s.top,r,i)},o=>Qh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},sr=e=>t=>!!t&&t.nodeType===e,Rl=e=>!!e&&!Object.getPrototypeOf(e),ce=sr(1),bf=e=>{const t=e.toLowerCase();return n=>oe(n)&&n.nodeName.toLowerCase()===t},cs=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return z(t,s)}return!1}},Pl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(ce(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const i=o.getComputedStyle(s,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}}return!1}},Jh=e=>t=>ce(t)&&t.hasAttribute(e),FA=(e,t)=>n=>ce(n)&&n.getAttribute(e)===t,or=e=>ce(e)&&e.hasAttribute("data-mce-bogus"),$A=e=>ce(e)&&e.getAttribute("data-mce-bogus")==="all",co=e=>ce(e)&&e.tagName==="TABLE",eb=e=>t=>!!(ce(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),vf=cs(["textarea","input"]),X=sr(3),LA=sr(4),MA=sr(7),No=sr(8),ra=sr(9),Cf=sr(11),Pt=bf("br"),tb=bf("img"),Fs=eb("true"),bt=eb("false"),Ol=cs(["td","th"]),nb=cs(["td","th","caption"]),$s=cs(["video","audio","object","embed"]),UA=bf("li"),zA=Jo().browser,sb=e=>ve(e,ts),HA=e=>zA.isFirefox()&&_t(e)==="table"?sb(nn(e)).filter(t=>_t(t)==="caption").bind(t=>sb(Fh(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,ob=(e,t)=>e.children&&z(e.children,t),WA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Is(x.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!ob(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!ob(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=HA(x.fromDom(t))}return{x:s,y:o}};var rb=(e,t,n,s,o)=>e(n,s)?b.some(n):He(o)&&o(n)?b.none():t(n,s,o);const Yr=(e,t,n)=>{let s=e.dom;const o=He(n)?n:Ze;for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},Xr=(e,t,n)=>rb((o,r)=>r(o),Yr,e,t,n),VA=(e,t)=>{const n=e.dom;return n.parentNode?jA(x.fromDom(n.parentNode),s=>!nt(e,s)&&t(s)):b.none()},jA=(e,t)=>{const n=o=>t(x.fromDom(o));return ve(e.dom.childNodes,n).map(x.fromDom)},qA=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=x.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},ia=(e,t,n)=>Yr(e,s=>ls(s,t),n),aa=(e,t)=>cA(t,e),rr=(e,t,n)=>rb((o,r)=>ls(o,r),ia,e,t,n),ib=(e,t={})=>{let n=0;const s={},o=x.fromDom(e),r=lo(o),i=t.maxLoadTime||5e3,a=C=>{t.referrerPolicy=C},c=C=>{Ut(gf(o),C)},u=C=>{const w=gf(o);aa(w,"#"+C).each(Ct)},d=C=>gt(s,C).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=C=>new Promise((w,S)=>{let k;const A=Q._addCacheSuffix(C),M=d(A);s[A]=M,M.count++;const H=(be,Te)=>{R(be,Xo),M.status=Te,M.passed=[],M.failed=[],k&&(k.onload=null,k.onerror=null,k=null)},J=()=>H(M.passed,2),W=()=>H(M.failed,3),F=(be,Te)=>{be()||(Date.now()-me<i?setTimeout(Te):W())},$=()=>{F(()=>{const be=e.styleSheets;let Te=be.length;for(;Te--;){const We=be[Te].ownerNode;if(We&&k&&We.id===k.id)return J(),!0}return!1},$)};if(w&&M.passed.push(w),S&&M.failed.push(S),M.status===1)return;if(M.status===2){J();return}if(M.status===3){W();return}M.status=1;const ee=x.fromTag("link",r.dom);wo(ee,{rel:"stylesheet",type:"text/css",id:M.id});const me=Date.now();t.contentCssCors&&Vt(ee,"crossOrigin","anonymous"),t.referrerPolicy&&Vt(ee,"referrerpolicy",t.referrerPolicy),k=ee.dom,k.onload=$,k.onerror=W,c(ee),Vt(ee,"href",A)}),g=C=>Promise.allSettled(V(C,S=>p(S).then(K(S)))).then(S=>{const k=le(S,A=>A.status==="fulfilled");return k.fail.length>0?Promise.reject(V(k.fail,A=>A.reason)):V(k.pass,A=>A.value)}),y=C=>{const w=Q._addCacheSuffix(C);gt(s,w).each(S=>{--S.count===0&&(delete s[w],u(S.id))})};return{load:p,loadAll:g,unload:y,unloadAll:C=>{R(C,w=>{y(w)})},_setReferrerPolicy:a}},ab=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=So(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=ib(r,s);return e.set(r,i),i})}}})();class Ft{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const KA=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],GA=["td","th"],YA=["thead","tbody","tfoot"],XA=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],QA=["h1","h2","h3","h4","h5","h6"],ZA=["li","dd","dt"],JA=["ul","ol","dl"],eT=["pre","script","textarea","style"],tT=["pre"].concat(QA),Ao=e=>{let t;return n=>(t=t||Ps(e,vt),Fe(t,_t(n)))},us=Ao(KA),nT=e=>_t(e)==="table",yf=e=>ts(e)&&!us(e),ir=e=>ts(e)&&_t(e)==="br",sT=Ao(XA),Ef=Ao(JA),la=Ao(ZA),oT=Ao(YA),Dl=Ao(GA),Bl=Ao(eT),rT=Ao(tT),iT=e=>rT(e)||yf(e),lb=(e,t,n)=>ia(e,t,n).isSome(),Qr="\uFEFF",jt="\xA0",cb=e=>e===Qr,aT=e=>e.replace(/\uFEFF/g,""),ub=(e,t)=>{let n=[];return R(nn(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(ub(s,t))}),n},gn=(e,t)=>lA(t,e),fb=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(Ln,"text"),_f=e=>fb.get(e),db=e=>fb.getOption(e),lT=e=>{const t=[];let n=e.dom;for(;n;)t.push(x.fromDom(n)),n=n.lastChild;return t},cT=e=>{const t=gn(e,"br"),n=j(lT(e).slice(-1),ir);t.length===n.length&&R(n,Ct)},wf=()=>{const e=x.fromTag("br");return Vt(e,"data-mce-bogus","1"),e},ar=e=>{oa(e),Ut(e,wf())},uT=e=>{df(e).each(t=>{tr(t).each(n=>{us(e)&&ir(t)&&us(n)&&Ct(t)})})},Qt=Qr,Il=cb,uo=aT,fT=ce,Zr=X,Jr=e=>(Zr(e)&&(e=e.parentNode),fT(e)&&e.hasAttribute("data-mce-caret")),ei=e=>Zr(e)&&Il(e.data),zn=e=>Jr(e)||ei(e),mb=e=>e.firstChild!==e.lastChild||!Pt(e.firstChild),dT=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Qt),r=e.parentNode;if(t){const i=e.previousSibling;if(Zr(i)){if(zn(i))return i;if($l(i))return i.splitText(i.data.length-1)}r==null||r.insertBefore(o,e)}else{const i=e.nextSibling;if(Zr(i)){if(zn(i))return i;if(Fl(i))return i.splitText(1),i}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},Sf=e=>{const t=e.container();return X(t)?t.data.charAt(e.offset())===Qt||e.isAtStart()&&ei(t.previousSibling):!1},xf=e=>{const t=e.container();return X(t)?t.data.charAt(e.offset()-1)===Qt||e.isAtEnd()&&ei(t.nextSibling):!1},mT=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(wf().dom);const i=t.parentNode;return n?i==null||i.insertBefore(r,t):t.nextSibling?i==null||i.insertBefore(r,t.nextSibling):i==null||i.appendChild(r),r},Fl=e=>Zr(e)&&e.data[0]===Qt,$l=e=>Zr(e)&&e.data[e.data.length-1]===Qt,gT=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];or(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},kf=e=>e&&e.hasAttribute("data-mce-caret")?(gT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,gb=e=>Jr(e.startContainer),pb=Fs,pT=bt,hT=Pt,bT=X,vT=cs(["script","style","textarea"]),hb=cs(["img","input","textarea","hr","iframe","video","audio","object","embed"]),CT=cs(["table"]),yT=zn,ss=e=>yT(e)?!1:bT(e)?!vT(e.parentNode):hb(e)||hT(e)||CT(e)||Nf(e),ET=e=>ce(e)&&e.getAttribute("unselectable")==="true",Nf=e=>!ET(e)&&pT(e),_T=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Nf(n))return!1;if(pb(n))return!0}return!0},wT=e=>Nf(e)?!Ee(Et(e.getElementsByTagName("*")),(t,n)=>t||pb(n),!1):!1,ST=e=>hb(e)||wT(e),bb=(e,t)=>ss(e)&&_T(e,t),xT=/^[ \t\r\n]*$/,lr=e=>xT.test(e),kT=e=>" \f	\v".indexOf(e)!==-1,vb=e=>e===`
`||e==="\r",NT=(e,t)=>t<e.length&&t>=0?vb(e[t]):!1,Cb=(e,t=4,n=!0,s=!0)=>{const o=BN(" ",t),r=e.replace(/\t/g,o);return Ee(r,(a,c)=>kT(c)||c===jt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||NT(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+jt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:vb(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},AT=(e,t)=>{const n=x.fromDom(t),s=x.fromDom(e);return lb(s,"pre,code",re(nt,n))},TT=(e,t)=>X(e)&&lr(e.data)&&!AT(e,t),RT=e=>ce(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Ll=(e,t)=>ss(e)&&!TT(e,t)||RT(e)||PT(e),PT=Jh("data-mce-bookmark"),OT=Jh("data-mce-bogus"),DT=FA("data-mce-bogus","all"),BT=(e,t)=>{let n=0;if(Ll(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new Ft(s,e);do{if(t){if(DT(s)){s=o.next(!0);continue}if(OT(s)){s=o.next();continue}}if(Pt(s)){n++,s=o.next();continue}if(Ll(s,e))return!1;s=o.next()}while(s);return n<=1}},qt=(e,t=!0)=>BT(e.dom,t),IT=e=>e.nodeName.toLowerCase()==="span",yb=(e,t)=>oe(e)&&(Ll(e,t)||yf(x.fromDom(e))),FT=(e,t)=>{const n=new Ft(e,t).prev(!1),s=new Ft(e,t).next(!1),o=Yt(n)||yb(n,t),r=Yt(s)||yb(s,t);return o&&r},Eb=e=>IT(e)&&e.getAttribute("data-mce-type")==="bookmark",$T=(e,t)=>X(e)&&e.data.length>0&&FT(e,t),LT=e=>ce(e)?e.childNodes.length>0:!1,MT=e=>Cf(e)||ra(e),Af=(e,t,n)=>{var s;const o=n||t;if(ce(t)&&Eb(t))return t;const r=t.childNodes;for(let i=r.length-1;i>=0;i--)Af(e,r[i],o);if(ce(t)){const i=t.childNodes;i.length===1&&Eb(i[0])&&((s=t.parentNode)===null||s===void 0||s.insertBefore(i[0],t))}return!MT(t)&&!Ll(t,o)&&!LT(t)&&!$T(t,o)&&e.remove(t),t},UT=Q.makeMap,Ml=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ul=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zT=/[<>&\"\']/g,HT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,WT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},cr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},VT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},jT=e=>{const t=x.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},_b=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!cr[r]){const i="&"+s[o+1]+";";n[r]=i,n[i]=r}}return n}else return},Tf=_b("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),wb=(e,t)=>e.replace(t?Ml:Ul,n=>cr[n]||n),qT=e=>(""+e).replace(zT,t=>cr[t]||t),Sb=(e,t)=>e.replace(t?Ml:Ul,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":cr[n]||"&#"+n.charCodeAt(0)+";"),Rf=(e,t,n)=>{const s=n||Tf;return e.replace(t?Ml:Ul,o=>cr[o]||s[o]||o)},To={encodeRaw:wb,encodeAllRaw:qT,encodeNumeric:Sb,encodeNamed:Rf,getEncodeFunc:(e,t)=>{const n=_b(t)||Tf,s=(i,a)=>i.replace(a?Ml:Ul,c=>cr[c]!==void 0?cr[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>Rf(i,a,n),r=UT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:Rf:r.numeric?Sb:wb},decode:e=>e.replace(HT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):WT[n]||String.fromCharCode(n)):VT[t]||Tf[t]||jT(t))},zl={},Hl={},KT={},ti=Q.makeMap,sn=Q.each,Pf=Q.extend,xb=Q.explode,GT=Q.inArray,Zt=(e,t)=>(e=Q.trim(e),e?e.split(t||" "):[]),kb=(e,t={})=>{const n=ti(e," ",ti(e.toUpperCase()," "));return Pf(n,t)},Nb=e=>kb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),YT=e=>{const t={};let n,s,o,r;const i=(c,u="",d="")=>{const p=Zt(d),g=Zt(c);let y=g.length;for(;y--;){const _=Zt([n,u].join(" "));t[g[y]]={attributes:Ps(_,()=>({})),attributesOrder:_,children:Ps(p,K(KT))}}},a=(c,u)=>{const d=Zt(c),p=Zt(u);let g=d.length;for(;g--;){const y=t[d[g]];for(let _=0,C=p.length;_<C;_++)y.attributes[p[_]]={},y.attributesOrder.push(p[_])}};if(zl[e])return zl[e];if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"){n+=" xml:lang";const c="acronym applet basefont big font strike tt";o=[o,c].join(" "),sn(Zt(c),d=>{i(d,"",o)});const u="center dir isindex noframes";s=[s,u].join(" "),r=[s,o].join(" "),sn(Zt(u),d=>{i(d,"",r)})}return r=r||[s,o].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),i("address dt dd div caption","",r),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),i("blockquote","cite",r),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",r),i("dl","","dt dd"),i("a","href target rel media hreflang type",o),i("q","cite",o),i("ins del","cite datetime",r),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",r),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),i("param","name value"),i("map","name",[r,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",r),i("th","colspan rowspan headers scope abbr",r),i("form","accept-charset action autocomplete enctype method name novalidate target",r),i("fieldset","disabled form name",[r,"legend"].join(" ")),i("label","form for",o),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[r,"li"].join(" ")),i("noscript","",r),e!=="html4"&&(i("wbr"),i("ruby","",[o,"rt rp"].join(" ")),i("figcaption","",r),i("mark rt rp summary bdi","",o),i("canvas","width height",r),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[o,"option"].join(" ")),i("article section nav aside main header footer","",r),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[r,"figcaption"].join(" ")),i("time","datetime",o),i("dialog","open",r),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",o),i("progress","value max",o),i("meter","value min max low high optimum",o),i("details","open",[r,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),e!=="html4"&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&R([t.video,t.audio],c=>{delete c.children.audio,delete c.children.video}),sn(Zt("a form meter progress dfn"),c=>{t[c]&&delete t[c].children[c]}),delete t.caption.children.table,delete t.script,zl[e]=t,t},Of=(e,t)=>{if(e){const n={};return de(e)&&(e={"*":e}),sn(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?ti(s,/[, ]/):xb(s,/[, ]/)}),n}else return},Ro=(e={})=>{var t;const n={},s={};let o=[];const r={},i={},a=(_e,ke,Ge)=>{const Qe=e[_e];if(Qe)return ti(Qe,/[, ]/,ti(Qe.toUpperCase(),/[, ]/));{let Ot=Hl[_e];return Ot||(Ot=kb(ke,Ge),Hl[_e]=Ot),Ot}},c=(t=e.schema)!==null&&t!==void 0?t:"html5",u=YT(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Of(e.valid_styles),p=Of(e.invalid_styles,"map"),g=Of(e.valid_classes,"map"),y=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),_=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),w=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),S="td th iframe video audio object script code",k=a("non_empty_elements",S+" pre",C),A=a("move_caret_before_on_enter_elements",S+" table",C),M=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),H=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",M),J=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");sn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),_e=>{i[_e]=new RegExp("</"+_e+"[^>]*>","gi")});const W=_e=>new RegExp("^"+_e.replace(/([?+*])/g,".$1")+"$"),F=_e=>{const ke=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ge=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Qe=/[*?+]/;if(_e){const Ot=Zt(_e,",");let pt,ut;n["@"]&&(pt=n["@"].attributes,ut=n["@"].attributesOrder);for(let Tt=0,Gt=Ot.length;Tt<Gt;Tt++){let Dt=ke.exec(Ot[Tt]);if(Dt){const Cs=Dt[1],Xn=Dt[2],ys=Dt[3],Es=Dt[5],_s={},ws=[],Bt={attributes:_s,attributesOrder:ws};if(Cs==="#"&&(Bt.paddEmpty=!0),Cs==="-"&&(Bt.removeEmpty=!0),Dt[4]==="!"&&(Bt.removeEmptyAttrs=!0),pt&&(ct(pt,(Qn,Ss)=>{_s[Ss]=Qn}),ut&&ws.push(...ut)),Es){const Qn=Zt(Es,"|");for(let Ss=0,Or=Qn.length;Ss<Or;Ss++)if(Dt=Ge.exec(Qn[Ss]),Dt){const rs={},On=Dt[1],an=Dt[2].replace(/[\\:]:/g,":"),is=Dt[3],Dn=Dt[4];if(On==="!"&&(Bt.attributesRequired=Bt.attributesRequired||[],Bt.attributesRequired.push(an),rs.required=!0),On==="-"){delete _s[an],ws.splice(GT(ws,an),1);continue}if(is&&(is==="="&&(Bt.attributesDefault=Bt.attributesDefault||[],Bt.attributesDefault.push({name:an,value:Dn}),rs.defaultValue=Dn),is==="~"&&(Bt.attributesForced=Bt.attributesForced||[],Bt.attributesForced.push({name:an,value:Dn}),rs.forcedValue=Dn),is==="<"&&(rs.validValues=ti(Dn,"?"))),Qe.test(an)){const Dr=rs;Bt.attributePatterns=Bt.attributePatterns||[],Dr.pattern=W(an),Bt.attributePatterns.push(Dr)}else _s[an]||ws.push(an),_s[an]=rs}}if(!pt&&Xn==="@"&&(pt=_s,ut=ws),ys&&(Bt.outputName=Xn,n[ys]=Bt),Qe.test(Xn)){const Qn=Bt;Qn.pattern=W(Xn),o.push(Qn)}else n[Xn]=Bt}}}},$=_e=>{o=[],R($n(n),ke=>{delete n[ke]}),F(_e),sn(u,(ke,Ge)=>{s[Ge]=ke.children})},ee=_e=>{const ke=/^(~)?(.+)$/;_e&&(delete Hl.text_block_elements,delete Hl.block_elements,sn(Zt(_e,","),Ge=>{const Qe=ke.exec(Ge);if(Qe){const Ot=Qe[1]==="~",pt=Ot?"span":"div",ut=Qe[2];if(s[ut]=s[pt],r[ut]=pt,k[ut.toUpperCase()]={},k[ut]={},Ot||(H[ut.toUpperCase()]={},H[ut]={}),!n[ut]){let Tt=n[pt];Tt=Pf({},Tt),delete Tt.removeEmptyAttrs,delete Tt.removeEmpty,n[ut]=Tt}sn(s,(Tt,Gt)=>{Tt[pt]&&(s[Gt]=Tt=Pf({},s[Gt]),Tt[ut]=Tt[pt])})}}))},me=_e=>{const ke=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete zl[c],_e&&sn(Zt(_e,","),Ge=>{const Qe=ke.exec(Ge);if(Qe){const Ot=Qe[1];let pt;Ot?pt=s[Qe[2]]:pt=s[Qe[2]]={"#comment":{}},pt=s[Qe[2]],sn(Zt(Qe[3],"|"),ut=>{Ot==="-"?delete pt[ut]:pt[ut]={}})}})},be=_e=>{const ke=n[_e];if(ke)return ke;let Ge=o.length;for(;Ge--;){const Qe=o[Ge];if(Qe.pattern.test(_e))return Qe}};e.valid_elements?$(e.valid_elements):(sn(u,(_e,ke)=>{n[ke]={attributes:_e.attributes,attributesOrder:_e.attributesOrder},s[ke]=_e.children}),sn(Zt("strong/b em/i"),_e=>{const ke=Zt(_e,"/");n[ke[1]].outputName=ke[0]}),sn(J,(_e,ke)=>{n[ke]&&(e.padd_empty_block_inline_children&&(n[ke].paddInEmptyBlock=!0),n[ke].removeEmpty=!0)}),sn(Zt("ol ul blockquote a table tbody"),_e=>{n[_e]&&(n[_e].removeEmpty=!0)}),sn(Zt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),_e=>{n[_e].paddEmpty=!0}),sn(Zt("span"),_e=>{n[_e].removeEmptyAttrs=!0})),ee(e.custom_elements),me(e.valid_children),F(e.extended_valid_elements),me("+ol[ul|ol],+ul[ul|ol]"),sn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(_e,ke)=>{n[ke]&&(n[ke].parentsRequired=Zt(_e))}),e.invalid_elements&&sn(xb(e.invalid_elements),_e=>{n[_e]&&delete n[_e]}),be("span")||F("span[!data-mce-type|*]");const Te=K(d),Me=K(p),We=K(g),Je=K(w),$t=K(H),Z=K(M),Re=K(J),Oe=K(Object.seal(C)),xe=K(_),wt=K(k),ie=K(A),we=K(y),ye=K(Object.seal(i)),te=(_e,ke)=>{const Ge=s[_e.toLowerCase()];return!!(Ge&&Ge[ke.toLowerCase()])},Ie=(_e,ke)=>{const Ge=be(_e);if(Ge)if(ke){if(Ge.attributes[ke])return!0;const Qe=Ge.attributePatterns;if(Qe){let Ot=Qe.length;for(;Ot--;)if(Qe[Ot].pattern.test(ke))return!0}}else return!0;return!1},De=K(r);return{type:c,children:s,elements:n,getValidStyles:Te,getValidClasses:We,getBlockElements:$t,getInvalidStyles:Me,getVoidElements:Oe,getTextBlockElements:Z,getTextInlineElements:Re,getBoolAttrs:Je,getElementRule:be,getSelfClosingElements:xe,getNonEmptyElements:wt,getMoveCaretBeforeOnEnterElements:ie,getWhitespaceElements:we,getSpecialElements:ye,isValidChild:te,isValid:Ie,getCustomElements:De,addValidElements:F,setValidElements:$,addCustomElements:ee,addValidChildren:me}},Df=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let i,a;const c=Qr;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const u=(`\\" \\' \\; \\: ; : `+c).split(" ");for(let p=0;p<u.length;p++)r[u[p]]=c+p,r[c+p]=u[p];const d={parse:p=>{const g={};let y=!1;const _=e.url_converter,C=e.url_converter_scope||d,w=(F,$,ee)=>{const me=g[F+"-top"+$];if(!me)return;const be=g[F+"-right"+$];if(!be)return;const Te=g[F+"-bottom"+$];if(!Te)return;const Me=g[F+"-left"+$];if(!Me)return;const We=[me,be,Te,Me];let Je=We.length-1;for(;Je--&&We[Je]===We[Je+1];);Je>-1&&ee||(g[F+$]=Je===-1?We[0]:We.join(" "),delete g[F+"-top"+$],delete g[F+"-right"+$],delete g[F+"-bottom"+$],delete g[F+"-left"+$])},S=F=>{const $=g[F];if(!$)return;const ee=$.split(" ");let me=ee.length;for(;me--;)if(ee[me]!==ee[0])return!1;return g[F]=ee[0],!0},k=(F,$,ee,me)=>{!S($)||!S(ee)||!S(me)||(g[F]=g[$]+" "+g[ee]+" "+g[me],delete g[$],delete g[ee],delete g[me])},A=F=>(y=!0,r[F]),M=(F,$)=>(y&&(F=F.replace(/\uFEFF[0-9]/g,ee=>r[ee])),$||(F=F.replace(/\\([\'\";:])/g,"$1")),F),H=F=>String.fromCharCode(parseInt(F.slice(1),16)),J=F=>F.replace(/\\[0-9a-f]+/gi,H),W=(F,$,ee,me,be,Te)=>{if(be=be||Te,be)return be=M(be),"'"+be.replace(/\'/g,"\\'")+"'";if($=M($||ee||me||""),!e.allow_script_urls){const Me=$.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Me)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Me))return""}return _&&($=_.call(C,$,"style")),"url('"+$.replace(/\'/g,"\\'")+"')"};if(p){p=p.replace(/[\u0000-\u001F]/g,""),p=p.replace(/\\[\"\';:\uFEFF]/g,A).replace(/\"[^\"]+\"|\'[^\']+\'/g,$=>$.replace(/[;:]/g,A));let F;for(;F=s.exec(p);){s.lastIndex=F.index+F[0].length;let $=F[1].replace(o,"").toLowerCase(),ee=F[2].replace(o,"");if($&&ee){if($=J($),ee=J(ee),$.indexOf(c)!==-1||$.indexOf('"')!==-1||!e.allow_script_urls&&($==="behavior"||/expression\s*\(|\/\*|\*\//.test(ee)))continue;$==="font-weight"&&ee==="700"?ee="bold":($==="color"||$==="background-color")&&(ee=ee.toLowerCase()),ee=ee.replace(n,W),g[$]=y?M(ee,!0):ee}}w("border","",!0),w("border","-width"),w("border","-color"),w("border","-style"),w("padding",""),w("margin",""),k("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border,g["border-image"]==="none"&&delete g["border-image"]}return g},serialize:(p,g)=>{let y="";const _=(w,S)=>{const k=S[w];if(k)for(let A=0,M=k.length;A<M;A++){const H=k[A],J=p[H];J&&(y+=(y.length>0?" ":"")+H+": "+J+";")}},C=(w,S)=>{if(!a||!S)return!0;let k=a["*"];return k&&k[w]?!1:(k=a[S],!(k&&k[w]))};return g&&i?(_("*",i),_(g,i)):ct(p,(w,S)=>{w&&C(S,g)&&(y+=(y.length>0?" ":"")+S+": "+w+";")}),y}};return d},XT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},QT=e=>e instanceof Event||He(e.initEvent),ZT=e=>e.isDefaultPrevented===vt||e.isDefaultPrevented===Ze,JT=e=>lt(e.preventDefault)||QT(e),Ab=(e,t)=>{const n=t!=null?t:{};for(const s in e)Fe(XT,s)||(n[s]=e[s]);return oe(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Bf=(e,t,n,s)=>{var o;const r=Ab(t,s);return r.type=e,lt(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),JT(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=vt,He(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=vt,He(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=vt,r.stopPropagation()},ZT(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?vt:Ze,r.isPropagationStopped=r.cancelBubble===!0?vt:Ze,r.isImmediatePropagationStopped=Ze)),r},eR="mce-data-",tR=/^(?:mouse|contextmenu)|click/,If=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},Wl=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},nR=e=>oe(e)&&tR.test(e.type),ca=(e,t)=>{const n=Bf(e.type,e,document,t);if(nR(e)&&Yt(e.pageX)&&!Yt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},sR=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{Wl(e,"DOMContentLoaded",i),Wl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():If(e,"DOMContentLoaded",i),n.domLoaded||If(e,"load",i)};class ur{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=eR+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i;const a=window,c=g=>{r.executeHandlers(ca(g||a.event),u)};if(!t||X(t)||No(t))return s;let u;t[r.expando]?u=t[r.expando]:(u=r.count++,t[r.expando]=u,r.events[u]={}),o=o||t;const d=n.split(" ");let p=d.length;for(;p--;){let g=d[p],y=c,_=!1,C=!1;if(g==="DOMContentLoaded"&&(g="ready"),r.domLoaded&&g==="ready"&&t.readyState==="complete"){s.call(o,ca({type:g}));continue}!r.hasFocusIn&&(g==="focusin"||g==="focusout")&&(_=!0,C=g==="focusin"?"focus":"blur",y=w=>{const S=ca(w||a.event);S.type=S.type==="focus"?"focusin":"focusout",r.executeHandlers(S,u)}),i=r.events[u][g],i?g==="ready"&&r.domLoaded?s(ca({type:g})):i.push({func:s,scope:o}):(r.events[u][g]=i=[{func:s,scope:o}],i.fakeName=C,i.capture=_,i.nativeHandler=y,g==="ready"?sR(t,y,r):If(t,C||g,y,_))}return t=i=null,s}unbind(t,n,s){if(!t||X(t)||No(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const c=i[a],u=r[c];if(u){if(s){let d=u.length;for(;d--;)if(u[d].func===s){const p=u.nativeHandler,g=u.fakeName,y=u.capture,_=u.slice(0,d).concat(u.slice(d+1));_.nativeHandler=p,_.fakeName=g,_.capture=y,r[c]=_}}(!s||u.length===0)&&(delete r[c],Wl(t,u.fakeName||c,u.nativeHandler,u.capture))}}}else ct(r,(i,a)=>{Wl(t,i.fakeName||a,i.nativeHandler,i.capture)}),r={};for(const i in r)if(Fe(r,i))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||X(t)||No(t))return this;const o=ca({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||X(t)||No(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ur.Event=new ur;const Ff=Q.each,oR=Q.grep,$f="data-mce-style",rR=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ua=(e,t,n)=>{lt(n)||n===""?tn(e,t):Vt(e,t,n)},Tb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),ni=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&X(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},Rb=(e,t)=>{const n=ns(t,"style"),s=e.serialize(e.parse(n),_t(t));ua(t,$f,s)},iR=(e,t)=>dn(e)?Fe(rR,t)?e+"":e+"px":e,Pb=(e,t,n)=>{const s=Tb(t);lt(n)||n===""?jh(e,s):Hh(e,s,iR(n,s))},aR=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const u=x.fromDom(i);He(t.url_converter)&&oe(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),String(a),c,i));const d="data-mce-"+c;ua(u,d,a),ua(u,c,a)},get:(i,a)=>{const c=x.fromDom(i);return ns(c,"data-mce-"+a)||ns(c,a)}},r={style:{set:(i,a)=>{const c=x.fromDom(i);s&&ua(c,$f,a),tn(c,"style"),de(a)&&kl(c,e.parse(a))},get:i=>{const a=x.fromDom(i),c=ns(a,$f)||ns(a,"style");return e.serialize(e.parse(c),_t(a))}}};return s&&(r.href=r.src=o),r},rt=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=ab.forElement(x.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),u=[],d=t.schema?t.schema:Ro({}),p=Df({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),g=t.ownEvents?new ur:ur.Event,y=d.getBlockElements(),_=O=>de(O)?Fe(y,O):ce(O)&&Fe(y,O.nodeName),C=O=>O&&e&&de(O)?e.getElementById(O):O,w=O=>{const D=C(O);return oe(D)?x.fromDom(D):null},S=(O,D,G="")=>{let q;const pe=w(O);if(oe(pe)&&ts(pe)){const Ue=Br[D];Ue&&Ue.get?q=Ue.get(pe.dom,D):q=ns(pe,D)}return oe(q)?q:G},k=O=>{const D=C(O);return lt(D)?[]:D.attributes},A=(O,D,G)=>{xe(O,q=>{if(ce(q)){const pe=x.fromDom(q),Ue=G===""?null:G,ft=ns(pe,D),dt=Br[D];dt&&dt.set?dt.set(pe.dom,Ue,D):ua(pe,D,Ue),ft!==Ue&&t.onSetAttrib&&t.onSetAttrib({attrElm:pe.dom,attrName:D,attrValue:Ue})}})},M=(O,D)=>O.cloneNode(D),H=()=>t.root_element||e.body,J=O=>{const D=Zh(O);return{x:D.x,y:D.y,w:D.width,h:D.height}},W=(O,D)=>WA(e.body,C(O),D),F=(O,D,G)=>{xe(O,q=>{const pe=x.fromDom(q);Pb(pe,D,G),t.update_styles&&Rb(p,pe)})},$=(O,D)=>{xe(O,G=>{const q=x.fromDom(G);ct(D,(pe,Ue)=>{Pb(q,Ue,pe)}),t.update_styles&&Rb(p,q)})},ee=(O,D,G)=>{const q=C(O);if(!(lt(q)||!ce(q)))return G?Is(x.fromDom(q),Tb(D)):(D=D.replace(/-(\D)/g,(pe,Ue)=>Ue.toUpperCase()),D==="float"&&(D="cssFloat"),q.style?q.style[D]:void 0)},me=O=>{const D=C(O);if(!D)return{w:0,h:0};let G=ee(D,"width"),q=ee(D,"height");return(!G||G.indexOf("px")===-1)&&(G="0"),(!q||q.indexOf("px")===-1)&&(q="0"),{w:parseInt(G,10)||D.offsetWidth||D.clientWidth,h:parseInt(q,10)||D.offsetHeight||D.clientHeight}},be=O=>{const D=C(O),G=W(D),q=me(D);return{x:G.x,y:G.y,w:q.w,h:q.h}},Te=(O,D)=>{if(!O)return!1;const G=St(O)?O:[O];return Y(G,q=>ls(x.fromDom(q),D))},Me=(O,D,G,q)=>{const pe=[];let Ue=C(O);q=q===void 0;const ft=G||(H().nodeName!=="BODY"?H().parentNode:null);if(de(D))if(D==="*")D=ce;else{const dt=D;D=Bn=>Te(Bn,dt)}for(;Ue&&!(Ue===ft||lt(Ue.nodeType)||ra(Ue)||Cf(Ue));){if(!D||D(Ue))if(q)pe.push(Ue);else return[Ue];Ue=Ue.parentNode}return q?pe:null},We=(O,D,G)=>{const q=Me(O,D,G,!1);return q&&q.length>0?q[0]:null},Je=(O,D,G)=>{let q=D;if(O){de(D)&&(q=pe=>Te(pe,D));for(let pe=O[G];pe;pe=pe[G])if(He(q)&&q(pe))return pe}return null},$t=(O,D)=>Je(O,D,"nextSibling"),Z=(O,D)=>Je(O,D,"previousSibling"),Re=O=>He(O.querySelectorAll),Oe=(O,D)=>{var G,q;const pe=(q=(G=C(D))!==null&&G!==void 0?G:t.root_element)!==null&&q!==void 0?q:e;return Re(pe)?Et(pe.querySelectorAll(O)):[]},xe=function(O,D,G){const q=G!=null?G:this;if(St(O)){const pe=[];return Ff(O,(Ue,ft)=>{const dt=C(Ue);dt&&pe.push(D.call(q,dt,ft))}),pe}else{const pe=C(O);return pe?D.call(q,pe):!1}},wt=(O,D)=>{xe(O,G=>{ct(D,(q,pe)=>{A(G,pe,q)})})},ie=(O,D)=>{xe(O,G=>{const q=x.fromDom(G);Al(q,D)})},we=(O,D,G,q,pe)=>xe(O,Ue=>{const ft=de(D)?e.createElement(D):D;return oe(G)&&wt(ft,G),q&&(!de(q)&&q.nodeType?ft.appendChild(q):de(q)&&ie(ft,q)),pe?ft:Ue.appendChild(ft)}),ye=(O,D,G)=>we(e.createElement(O),O,D,G,!0),te=To.decode,Ie=To.encodeAllRaw,De=(O,D,G="")=>{let q="<"+O;for(const pe in D)Vr(D,pe)&&(q+=" "+pe+'="'+Ie(D[pe])+'"');return Yi(G)&&Fe(d.getVoidElements(),O)?q+" />":q+">"+G+"</"+O+">"},_e=O=>{const D=e.createElement("div"),G=e.createDocumentFragment();G.appendChild(D),O&&(D.innerHTML=O);let q;for(;q=D.firstChild;)G.appendChild(q);return G.removeChild(D),G},ke=(O,D)=>xe(O,G=>{const q=x.fromDom(G);return D&&R(nn(q),pe=>{Ln(pe)&&pe.dom.length===0?Ct(pe):Un(q,pe)}),Ct(q),q.dom}),Ge=O=>xe(O,D=>{const G=D.attributes;for(let q=G.length-1;q>=0;q--)D.removeAttributeNode(G.item(q))}),Qe=O=>p.parse(O),Ot=(O,D)=>p.serialize(O,D),pt=O=>{if(Vo!==rt.DOM&&e===document){if(n[O])return;n[O]=!0}let D=e.getElementById("mceDefaultStyles");if(!D){D=e.createElement("style"),D.id="mceDefaultStyles",D.type="text/css";const G=e.head;G.firstChild?G.insertBefore(D,G.firstChild):G.appendChild(D)}D.styleSheet?D.styleSheet.cssText+=O:D.appendChild(e.createTextNode(O))},ut=O=>{O||(O=""),R(O.split(","),D=>{o[D]=!0,c.load(D).catch($e)})},Tt=(O,D,G)=>{xe(O,q=>{if(ce(q)){const pe=x.fromDom(q),Ue=D.split(" ");R(Ue,ft=>{oe(G)?(G?Ji:Sl)(pe,ft):oA(pe,ft)})}})},Gt=(O,D)=>{Tt(O,D,!0)},Dt=(O,D)=>{Tt(O,D,!1)},Cs=(O,D)=>{const G=w(O),q=D.split(" ");return oe(G)&&tt(q,pe=>ff(G,pe))},Xn=O=>{xe(O,D=>jh(x.fromDom(D),"display"))},ys=O=>{xe(O,D=>Hh(x.fromDom(D),"display","none"))},Es=O=>{const D=w(O);return oe(D)&&qr(Nl(D,"display"),"none")},_s=O=>(O||"mce_")+r++,ws=O=>{const D=w(O);return oe(D)?ce(D.dom)?D.dom.outerHTML:kA(D):""},Bt=(O,D)=>{xe(O,G=>{ce(G)&&(G.outerHTML=D)})},Qn=(O,D)=>{const G=C(D);return xe(O,q=>{const pe=G==null?void 0:G.parentNode,Ue=G==null?void 0:G.nextSibling;return pe&&(Ue?pe.insertBefore(q,Ue):pe.appendChild(q)),q})},Ss=(O,D,G)=>xe(D,q=>{var pe;const Ue=St(D)?O.cloneNode(!0):O;return G&&Ff(oR(q.childNodes),ft=>{Ue.appendChild(ft)}),(pe=q.parentNode)===null||pe===void 0||pe.replaceChild(Ue,q),q}),Or=(O,D)=>{if(O.nodeName!==D.toUpperCase()){const G=ye(D);return Ff(k(O),q=>{A(G,q.nodeName,S(O,q.nodeName))}),Ss(G,O,!0),G}else return O},rs=(O,D)=>{let G=O;for(;G;){let q=D;for(;q&&G!==q;)q=q.parentNode;if(G===q)break;G=G.parentNode}return!G&&O.ownerDocument?O.ownerDocument.documentElement:G},On=O=>{if(ce(O)){const D=O.nodeName.toLowerCase()==="a"&&!S(O,"href")&&S(O,"id");if(S(O,"name")||S(O,"data-mce-bookmark")||D)return!0}return!1},an=(O,D)=>{let G=0;if(On(O))return!1;const q=O.firstChild;if(q){const pe=new Ft(q,O),Ue=d?d.getWhitespaceElements():{},ft=D||(d?d.getNonEmptyElements():null);let dt=q;do{if(ce(dt)){const Bn=dt.getAttribute("data-mce-bogus");if(Bn){dt=pe.next(Bn==="all");continue}const il=dt.nodeName.toLowerCase();if(ft&&ft[il]){if(il==="br"){G++,dt=pe.next();continue}return!1}if(On(dt))return!1}if(No(dt)||X(dt)&&!lr(dt.data)||X(dt)&&dt.parentNode&&Ue[dt.parentNode.nodeName]&&lr(dt.data))return!1;dt=pe.next()}while(dt)}return G<=1},is=()=>e.createRange(),Dn=(O,D,G)=>{let q=is(),pe,Ue;if(O&&D&&O.parentNode&&D.parentNode){const ft=O.parentNode;return q.setStart(ft,ni(O)),q.setEnd(D.parentNode,ni(D)),pe=q.extractContents(),q=is(),q.setStart(D.parentNode,ni(D)+1),q.setEnd(ft,ni(O)+1),Ue=q.extractContents(),ft.insertBefore(Af(Vo,pe),O),G?ft.insertBefore(G,O):ft.insertBefore(D,O),ft.insertBefore(Af(Vo,Ue),O),ke(O),G||D}else return},Dr=(O,D,G,q)=>{if(St(O)){let pe=O.length;const Ue=[];for(;pe--;)Ue[pe]=Dr(O[pe],D,G,q);return Ue}else return t.collect&&(O===e||O===s)&&u.push([O,D,G,q]),g.bind(O,D,G,q||Vo)},Su=(O,D,G)=>{if(St(O)){let q=O.length;const pe=[];for(;q--;)pe[q]=Su(O[q],D,G);return pe}else{if(u.length>0&&(O===e||O===s)){let q=u.length;for(;q--;){const[pe,Ue,ft]=u[q];O===pe&&(!D||D===Ue)&&(!G||G===ft)&&g.unbind(pe,Ue,ft)}}return g.unbind(O,D,G)}},bo=(O,D,G)=>g.dispatch(O,D,G),Wo=(O,D,G)=>g.dispatch(O,D,G),xu=O=>{if(O&&ce(O)){const D=O.getAttribute("data-mce-contenteditable");return D&&D!=="inherit"?D:O.contentEditable!=="inherit"?O.contentEditable:null}else return null},Vo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:u,styles:p,schema:d,events:g,isBlock:_,root:null,clone:M,getRoot:H,getViewPort:J,getRect:be,getSize:me,getParent:We,getParents:Me,get:C,getNext:$t,getPrev:Z,select:Oe,is:Te,add:we,create:ye,createHTML:De,createFragment:_e,remove:ke,setStyle:F,getStyle:ee,setStyles:$,removeAllAttribs:Ge,setAttrib:A,setAttribs:wt,getAttrib:S,getPos:W,parseStyle:Qe,serializeStyle:Ot,addStyle:pt,loadCSS:ut,addClass:Gt,removeClass:Dt,hasClass:Cs,toggleClass:Tt,show:Xn,hide:ys,isHidden:Es,uniqueId:_s,setHTML:ie,getOuterHTML:ws,setOuterHTML:Bt,decode:te,encode:Ie,insertAfter:Qn,replace:Ss,rename:Or,findCommonAncestor:rs,run:xe,getAttribs:k,isEmpty:an,createRng:is,nodeIndex:ni,split:Dn,bind:Dr,unbind:Su,fire:Wo,dispatch:bo,getContentEditable:xu,getContentEditableParent:O=>{const D=H();let G=null;for(let q=O;q&&q!==D&&(G=xu(q),G===null);q=q.parentNode);return G},destroy:()=>{if(u.length>0){let O=u.length;for(;O--;){const[D,G,q]=u[O];g.unbind(D,G,q)}}ct(o,(O,D)=>{c.unload(D),delete o[D]})},isChildOf:(O,D)=>O===D||D.contains(O),dumpRng:O=>"startContainer: "+O.startContainer.nodeName+", startOffset: "+O.startOffset+", endContainer: "+O.endContainer.nodeName+", endOffset: "+O.endOffset},Br=aR(p,t,K(Vo));return Vo};rt.DOM=rt(document),rt.nodeIndex=ni;const lR=rt.DOM,cR=0,uR=1,Vl=2,Ob=3;class fo{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=lR;let r;const i=()=>{o.remove(u),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},u=o.uniqueId();r=document.createElement("script"),r.id=u,r.type="text/javascript",r.src=Q._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Vl}markDone(t){this.states[t]=Vl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=cR),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,u)=>{gt(n.scriptLoadedCallbacks,u).each(d=>{R(d,p=>p[c](u))}),delete n.scriptLoadedCallbacks[u]},o=c=>{const u=j(c,d=>d.status==="rejected");return u.length>0?Promise.reject(et(u,({reason:d})=>St(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(V(c,u=>n.states[u]===Vl?(s("resolve",u),Promise.resolve()):n.states[u]===Ob?(s("reject",u),Promise.reject(u)):(n.states[u]=uR,n.loadScript(u).then(()=>{n.states[u]=Vl,s("resolve",u);const d=n.queue;return d.length>0?(n.queue=[],r(d).then(o)):Promise.resolve()},()=>(n.states[u]=Ob,s("reject",u),Promise.reject(u)))))),i=c=>(n.loading=!0,r(c).then(u=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return b.from(d).each(Xo),o(u)})),a=qp(t);return n.loading?new Promise((c,u)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,u))}):i(a)}}fo.ScriptLoader=new fo;const zt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},fR=e=>it(e)&&Fe(e,"raw"),dR=e=>St(e)&&e.length>1,fa={},Lf=zt("en"),Db=()=>gt(fa,Lf.get()),fs={getData:()=>vl(fa,e=>({...e})),setCode:e=>{e&&Lf.set(e)},getCode:()=>Lf.get(),add:(e,t)=>{let n=fa[e];n||(fa[e]=n={}),ct(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=Db().getOr({}),n=i=>He(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return gt(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(fR(e))return n(e.raw);if(dR(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,u)=>Fe(i,u)?n(i[u]):c);return r(a)}return r(o(e))},isRtl:()=>Db().bind(e=>gt(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Fe(fa,e)},on=()=>{const e=[],t={},n={},s=[],o=(C,w)=>{const S=j(s,k=>k.name===C&&k.state===w);R(S,k=>k.resolve())},r=C=>Fe(t,C),i=C=>Fe(n,C),a=C=>{if(n[C])return n[C].instance},c=(C,w)=>{const S=fs.getCode(),k=","+(w||"")+",";!S||w&&k.indexOf(","+S+",")===-1||fo.ScriptLoader.add(t[C]+"/langs/"+S+".js")},u=(C,w)=>{on.languageLoad!==!1&&(r(C)?c(C,w):_(C,"loaded").then(()=>c(C,w)))},d=(C,w)=>(e.push(w),n[C]={instance:w},o(C,"added"),w),p=C=>{delete t[C],delete n[C]},g=(C,w)=>de(w)?de(C)?{prefix:"",resource:w,suffix:""}:{prefix:C.prefix,resource:w,suffix:C.suffix}:w,y=(C,w)=>{if(t[C])return Promise.resolve();let S=de(w)?w:w.prefix+w.resource+w.suffix;S.indexOf("/")!==0&&S.indexOf("://")===-1&&(S=on.baseURL+"/"+S),t[C]=S.substring(0,S.lastIndexOf("/"));const k=()=>(o(C,"loaded"),Promise.resolve());return n[C]?k():fo.ScriptLoader.add(S).then(k)},_=(C,w="added")=>w==="added"&&i(C)||w==="loaded"&&r(C)?Promise.resolve():new Promise(S=>{s.push({name:C,state:w,resolve:S})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:u,add:d,remove:p,createUrl:g,load:y,waitFor:_}};on.languageLoad=!0,on.baseURL="",on.PluginManager=on(),on.ThemeManager=on(),on.ModelManager=on();const mR=e=>{const t=zt(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(a))}}},gR=e=>{const t=zt(b.none()),n=()=>t.get().each(a=>clearInterval(a));return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(setInterval(a,e)))}}},Po=()=>{const e=mR($e);return{...e,on:n=>e.get().each(n)}},jl=(e,t)=>{let n=null;return{cancel:()=>{es(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{es(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Mf=(e,t)=>{let n=null;const s=()=>{es(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},da=K("mce-annotation"),fr=K("data-mce-annotation"),si=K("data-mce-annotation-uid"),ma=K("data-mce-annotation-active"),ga=K("data-mce-annotation-classes"),pa=K("data-mce-annotation-attrs"),Bb=e=>t=>nt(t,e),Ib=(e,t)=>{const n=e.selection.getRng(),s=x.fromDom(n.startContainer),o=x.fromDom(e.getBody()),r=t.fold(()=>"."+da(),c=>`[${fr()}="${c}"]`),i=xl(s,n.startOffset).getOr(s);return rr(i,r,Bb(o)).bind(c=>io(c,`${si()}`).bind(u=>io(c,`${fr()}`).map(d=>{const p=$b(e,u);return{uid:u,name:d,elements:p}})))},pR=e=>ts(e)&&ff(e,da()),Fb=(e,t)=>wl(e,"data-mce-bogus")||lb(e,'[data-mce-bogus="all"]',Bb(t)),$b=(e,t)=>{const n=x.fromDom(e.getBody()),s=gn(n,`[${si()}="${t}"]`);return j(s,o=>!Fb(o,n))},Lb=(e,t)=>{const n=x.fromDom(e.getBody()),s=gn(n,`[${fr()}="${t}"]`),o={};return R(s,r=>{if(!Fb(r,n)){const i=ns(r,si()),a=gt(o,i).getOr([]);o[i]=a.concat([r])}}),o},hR=(e,t)=>{const n=zt({}),s=()=>({listeners:[],previous:Po()}),o=(p,g)=>{r(p,y=>(g(y),y))},r=(p,g)=>{const y=n.get(),_=gt(y,p).getOrThunk(s),C=g(_);y[p]=C,n.set(y)},i=(p,g,y)=>{o(p,_=>{R(_.listeners,C=>C(!0,p,{uid:g,nodes:V(y,w=>w.dom)}))})},a=p=>{o(p,g=>{R(g.listeners,y=>y(!1,p))})},c=(p,g)=>{R($b(e,p),y=>{g?Vt(y,ma(),"true"):tn(y,ma())})},u=Mf(()=>{const p=_o(t.getNames());R(p,g=>{r(g,y=>{const _=y.previous.get();return Ib(e,b.some(g)).fold(()=>{_.each(C=>{a(g),y.previous.clear(),c(C,!1)})},({uid:C,name:w,elements:S})=>{qr(_,C)||(_.each(k=>c(k,!1)),i(w,C,S),y.previous.set(C),c(C,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return e.on("remove",()=>{u.cancel()}),e.on("NodeChange",()=>{u.throttle()}),{addListener:(p,g)=>{r(p,y=>({previous:y.previous,listeners:y.listeners.concat([g])}))}}},bR=(e,t)=>{const n=fr(),s=r=>b.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(si(),null),r.attr(fr(),null),r.attr(ma(),null);const c=b.from(r.attr(pa())).map(g=>g.split(",")).getOr([]),u=b.from(r.attr(ga())).map(g=>g.split(",")).getOr([]);R(c,g=>r.attr(g,null));const d=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],p=wn(d,[da()].concat(u));r.attr("class",p.length>0?p.join(" "):null),r.attr(ga(),null),r.attr(pa(),null)};e.serializer.addTempAttr(ma()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},vR=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>gt(e,o).map(r=>r.settings),getNames:()=>$n(e)}};let Mb=0;const Ub=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Mb++,e+"_"+s+Mb+String(n)},CR=(e,t)=>{R(t,n=>{Ji(e,n)})},yR=(e,t)=>{R(t,n=>{Sl(e,n)})},zb=(e,t)=>x.fromDom(e.dom.cloneNode(t)),oi=e=>zb(e,!1),Hb=e=>zb(e,!0),ER=(e,t)=>{const n=x.fromTag(t),s=Nh(e);return wo(n,s),n},_R=(e,t)=>{const n=ER(e,t);xo(e,n);const s=nn(e);return nr(n,s),Ct(e),n},Wb=(e,t,n=Ze)=>{const s=new Ft(e,t),o=r=>{let i;do i=s[r]();while(i&&!X(i)&&!n(i));return b.from(i).filter(X)};return{current:()=>b.from(s.current()).filter(X),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},dr=(e,t)=>{const n=t||(i=>e.isBlock(i)||Pt(i)||bt(i)),s=(i,a,c,u)=>{if(X(i)){const d=u(i,a,i.data);if(d!==-1)return b.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,u))};return{backwards:(i,a,c,u)=>{const d=Wb(i,u!=null?u:e.getRoot(),n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,u)=>{const d=Wb(i,u!=null?u:e.getRoot(),n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},ri=Math.round,mr=e=>e?{left:ri(e.left),top:ri(e.top),bottom:ri(e.bottom),right:ri(e.right),width:ri(e.width),height:ri(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Vb=(e,t)=>(e=mr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),wR=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,jb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ha=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:jb(t.top-e.bottom,e,t)},ba=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:jb(t.bottom-e.top,e,t),SR=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,xR=e=>Ee(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),b.none()),qb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},kR=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),NR=(e,t,n)=>Math.min(Math.max(e,t),n),ql=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Oo=(e,t)=>{if(ce(e)&&e.hasChildNodes()){const n=e.childNodes,s=NR(t,0,n.length-1);return n[s]}else return e},AR=(e,t)=>{if(!(t<0&&ce(e)&&e.hasChildNodes()))return Oo(e,t)},TR=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Kb=e=>de(e)&&e.charCodeAt(0)>=768&&TR.test(e),RR=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},PR=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Gb=ce,OR=ss,Yb=Pl("display","block table"),DR=Pl("float","left right"),va=PR(Gb,OR,Tn(DR)),BR=Tn(Pl("white-space","pre pre-line pre-wrap")),Ca=X,Uf=Pt,Xb=rt.nodeIndex,Kl=AR,zf=e=>e?e.createRange():rt.DOM.createRng(),Hf=e=>de(e)&&/[\r\n\t ]/.test(e),Qb=e=>!!e.setStart&&!!e.setEnd,Wf=e=>{const t=e.startContainer,n=e.startOffset;if(Hf(e.toString())&&BR(t.parentNode)&&X(t)){const s=t.data;if(Hf(s[n-1])||Hf(s[n+1]))return!0}return!1},IR=e=>{const t=e.ownerDocument,n=zf(t),s=t.createTextNode(jt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=mr(n.getBoundingClientRect());return o.removeChild(s),r},FR=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&X(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Do(r)}else return null},Zb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Do=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=mr(s[0]):n=mr(e.getBoundingClientRect()),!Qb(e)&&Uf(e)&&Zb(n)?IR(e):Zb(n)&&Qb(e)&&(t=FR(e))!==null&&t!==void 0?t:n},gr=(e,t)=>{const n=Vb(e,t);return n.width=1,n.right=n.left+1,n},$R=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&wR(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=zf(i.ownerDocument);if(a<i.data.length){if(Kb(i.data[a]))return;if(Kb(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!Wf(c))){n(gr(Do(c),!1));return}}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),Wf(c)||n(gr(Do(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),Wf(c)||n(gr(Do(c),!0)))},o=e.container(),r=e.offset();if(Ca(o))return s(o,r),t;if(Gb(o))if(e.isAtEnd()){const i=Kl(o,r);Ca(i)&&s(i,i.data.length),va(i)&&!Uf(i)&&n(gr(Do(i),!1))}else{const i=Kl(o,r);if(Ca(i)&&s(i,0),va(i)&&e.isAtEnd())return n(gr(Do(i),!1)),t;const a=Kl(e.container(),e.offset()-1);va(a)&&!Uf(a)&&(Yb(a)||Yb(i)||!va(i))&&n(gr(Do(a),!1)),va(i)&&n(gr(Do(i),!0))}return t},L=(e,t,n)=>{const s=()=>(Ca(e),t===0),o=()=>Ca(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=zf(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=$R(L(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),u=d=>Kl(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:u}};L.fromRangeStart=e=>L(e.startContainer,e.startOffset),L.fromRangeEnd=e=>L(e.endContainer,e.endOffset),L.after=e=>L(e.parentNode,Xb(e)+1),L.before=e=>L(e.parentNode,Xb(e)),L.isAbove=(e,t)=>mn(Jt(t.getClientRects()),Mt(e.getClientRects()),ha).getOr(!1),L.isBelow=(e,t)=>mn(Mt(t.getClientRects()),Jt(e.getClientRects()),ba).getOr(!1),L.isAtStart=e=>e?e.isAtStart():!1,L.isAtEnd=e=>e?e.isAtEnd():!1,L.isTextPosition=e=>e?X(e.container()):!1,L.isElementPosition=e=>!L.isTextPosition(e);const Gl=(e,t)=>{X(t)&&t.data.length===0&&e.remove(t)},LR=(e,t,n)=>{t.insertNode(n),Gl(e,n.previousSibling),Gl(e,n.nextSibling)},MR=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>Gl(e,r.previousSibling)),o.each(r=>Gl(e,r.nextSibling))},Vf=(e,t,n)=>{Cf(n)?MR(e,t,n):LR(e,t,n)},ds=X,Jb=or,ev=rt.nodeIndex,tv=e=>{const t=e.parentNode;return Jb(t)?tv(t):t},jf=e=>e?yl(e.childNodes,(t,n)=>(Jb(n)&&n.nodeName!=="BR"?t=t.concat(jf(n)):t.push(n),t),[]):[],UR=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&ds(n);)t+=n.data.length;return t},nv=e=>t=>e===t,zR=e=>{let t,n;t=jf(tv(e)),n=Gp(t,nv(e),e),t=t.slice(0,n+1);const s=yl(t,(o,r,i)=>(ds(r)&&ds(t[i-1])&&o++,o),0);return t=Ki(t,cs([e.nodeName])),n=Gp(t,nv(e),e),n-s},sv=e=>(ds(e)?"text()":e.nodeName.toLowerCase())+"["+zR(e)+"]",HR=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e&&!(n&&n(o));o=o.parentNode)s.push(o);return s},ov=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(ds(s))r=UR(s,o);else{const a=s.childNodes;o>=a.length?(r="after",o=a.length-1):r="before",s=a[o]}n.push(sv(s));let i=HR(e,s);return i=Ki(i,Tn(or)),n=n.concat(sf(i,a=>sv(a))),n.reverse().join("/")+","+r},WR=(e,t,n)=>{let s=jf(e);return s=Ki(s,(o,r)=>!ds(o)||!ds(s[r-1])),s=Ki(s,cs([t])),s[n]},VR=(e,t)=>{let n=e,s=0;for(;ds(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!ds(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return ds(e)&&t>e.data.length&&(t=e.data.length),L(e,t)},rv=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=yl(s,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),WR(i,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!ds(r)&&r.parentNode){let i;return o==="after"?i=ev(r)+1:i=ev(r),L(r.parentNode,i)}return VR(r,parseInt(o,10))},Yl=bt,jR=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&X(o);o=o.previousSibling)s+=e(o.data).length;return s},iv=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let i=o?s.startOffset:s.endOffset;const a=[],c=e.getRoot();if(X(r))a.push(n?jR(t,r,i):i);else{let u=0;const d=r.childNodes;i>=d.length&&d.length&&(u=1,i=Math.max(0,d.length-1)),a.push(e.nodeIndex(d[i],n)+u)}for(let u=r;u&&u!==c;u=u.parentNode)a.push(e.nodeIndex(u,n));return a},qR=(e,t,n,s)=>{const o=t.dom,r=iv(o,e,n,s,!0),i=t.isForward(),a=gb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...a};{const c=iv(o,e,n,s,!1);return{start:r,end:c,forward:i,...a}}},qf=(e,t,n)=>{let s=0;return Q.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},av=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(ce(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},lv=e=>(av(e,!0),av(e,!1),e),cv=(e,t)=>{if(ce(e)&&(e=Oo(e,t),Yl(e)))return e;if(zn(e)){X(e)&&Jr(e)&&(e=e.parentNode);let n=e.previousSibling;if(Yl(n)||(n=e.nextSibling,Yl(n)))return n}},KR=e=>cv(e.startContainer,e.startOffset)||cv(e.endContainer,e.endOffset),uv=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Yl(s)){const i=s.nodeName;return{name:i,index:qf(n.dom,i,s)}}const r=KR(o);if(r){const i=r.tagName;return{name:i,index:qf(n.dom,i,r)}}return qR(e,n,t,o)},GR=e=>{const t=e.getRng();return{start:ov(e.dom.getRoot(),L.fromRangeStart(t)),end:ov(e.dom.getRoot(),L.fromRangeEnd(t)),forward:e.isForward()}},YR=e=>({rng:e.getRng(),forward:e.isForward()}),fv=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},dv=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:qf(n,a,i)};const u=lv(s.cloneRange());if(!r){u.collapse(!1);const p=fv(n,o+"_end",t);Vf(n,u,p)}s=lv(s),s.collapse(!0);const d=fv(n,o+"_start",t);return Vf(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},XR=(e,t,n=!1)=>t===2?uv(uo,n,e):t===3?GR(e):t?YR(e):dv(e,!1),Kf=re(uv,Rt,!0),mv=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:vt,isError:Ze,map:r=>pn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},gv=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:Ze,isError:vt,map:t,mapError:s=>pn.error(s(e)),bind:t,exists:Ze,forall:vt,getOr:Rt,or:Rt,getOrThunk:Wi,orThunk:Wi,getOrDie:bl(String(e)),each:$e,toOptional:b.none};return n},pn={value:mv,error:gv,fromOption:(e,t)=>e.fold(()=>gv(t),mv)},Ls={generate:e=>{if(!St(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return R(e,(s,o)=>{const r=$n(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!St(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const u=c.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+u);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const g=$n(p);if(t.length!==g.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+g.join(","));if(!tt(t,_=>z(g,_)))throw new Error("Not all branches were specified when using match. Specified: "+g.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Ls.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const QR=e=>{const t=[],n=[];return R(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},ZR=e=>e.type==="inline-command"||e.type==="inline-format",JR=e=>e.type==="block-command"||e.type==="block-format",e1=e=>{const t=s=>pn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(St(e.format)){if(!tt(e.format,de))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(de(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return pn.value(o(i))}else return e.cmd!==void 0?de(e.cmd)?pn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!it(e))return t("Raw pattern is not an object");if(!de(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!de(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?de(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):pn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},pv=e=>j(e,JR),hv=e=>j(e,ZR),t1=(e,t)=>({inlinePatterns:hv(e),blockPatterns:pv(e),dynamicPatternsLookup:t}),bv=e=>{const t=QR(V(e,e1));return R(t.errors,n=>console.error(n.message,n.pattern)),t.values},n1=e=>t=>{const n=e(t);return bv(n)},Gf=Jo().deviceType,s1=Gf.isTouch(),o1=rt.DOM,r1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ee(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[jr(r)]=jr(i),n},{})},vv=e=>Jn(e,RegExp),fe=e=>t=>t.options.get(e),Yf=e=>de(e)||it(e),Cv=(e,t="")=>n=>{const s=de(n);if(s)if(n.indexOf("=")!==-1){const o=r1(n);return{value:gt(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},i1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Cv(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Cv(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=de(n)&&Os(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=z(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>_n(n)?{valid:!0,value:n}:de(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||de(n)||Ts(n,de);return s?de(n)?{value:V(n.split(","),jr),valid:s}:St(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Zf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=de(n)||Ts(n,de);return s?{value:St(n)?n:V(n.split(","),jr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=_n(n)||de(n);return s?n===!1||Gf.isiPhone()||Gf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!s1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||de(n)||He(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||de(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Yf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Yf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Yf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>de(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Ts(n,it)||n===!1?{value:bv(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>He(n)?{value:n1(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Ts(n,vv)?{value:n,valid:!0}:vv(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:fs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:o1.getAttrib(e.getElement(),"placeholder")})})},a1=fe("iframe_attrs"),l1=fe("doctype"),yv=fe("document_base_url"),c1=fe("body_id"),u1=fe("body_class"),Ev=fe("content_security_policy"),f1=fe("br_in_pre"),Rn=fe("forced_root_block"),ya=fe("forced_root_block_attrs"),d1=fe("newline_behavior"),m1=fe("br_newline_selector"),g1=fe("no_newline_selector"),p1=fe("keep_styles"),h1=fe("end_container_on_empty_block"),_v=fe("automatic_uploads"),wv=fe("images_reuse_filename"),b1=fe("images_replace_blob_uris"),Sv=fe("icons"),v1=fe("icons_url"),C1=fe("images_upload_url"),y1=fe("images_upload_base_path"),E1=fe("images_upload_credentials"),_1=fe("images_upload_handler"),w1=fe("content_css_cors"),Xf=fe("referrer_policy"),xv=fe("language"),S1=fe("language_url"),kv=fe("indent_use_margin"),x1=fe("indentation"),k1=fe("content_css"),N1=fe("content_style"),Nv=fe("font_css"),A1=fe("directionality"),T1=fe("inline_boundaries_selector"),Av=fe("object_resizing"),R1=fe("resize_img_proportional"),P1=fe("placeholder"),Tv=fe("event_root"),O1=fe("service_message"),ii=fe("theme"),D1=fe("theme_url"),Qf=fe("model"),B1=fe("model_url"),Ea=fe("inline_boundaries"),I1=fe("formats"),F1=fe("preview_styles"),$1=fe("format_empty_lines"),L1=fe("format_noneditable_selector"),M1=fe("custom_ui_selector"),Zf=fe("inline"),U1=fe("hidden_input"),z1=fe("submit_patch"),H1=fe("add_form_submit_trigger"),W1=fe("add_unload_trigger"),V1=fe("custom_undo_redo_levels"),j1=fe("disable_nodechange"),Rv=fe("readonly"),q1=fe("content_css_cors"),Xl=fe("plugins"),K1=fe("external_plugins"),G1=fe("block_unsupported_drop"),Y1=fe("visual"),X1=fe("visual_table_class"),Pv=fe("visual_anchor_class"),Q1=fe("iframe_aria_text"),Z1=fe("setup"),J1=fe("init_instance_callback"),eP=fe("urlconverter_callback"),tP=fe("auto_focus"),nP=fe("browser_spellcheck"),sP=fe("protect"),oP=fe("paste_block_drop"),Ql=fe("paste_data_images"),rP=fe("paste_preprocess"),iP=fe("paste_postprocess"),aP=fe("paste_webkit_styles"),lP=fe("paste_remove_styles_if_webkit"),cP=fe("paste_merge_formats"),uP=fe("smart_paste"),fP=fe("paste_as_text"),dP=fe("paste_tab_spaces"),mP=fe("allow_html_data_urls"),gP=fe("text_patterns"),pP=fe("text_patterns_lookup"),Ov=fe("noneditable_class"),hP=fe("editable_class"),bP=fe("noneditable_regexp"),vP=fe("preserve_cdata"),CP=e=>e.options.isSet("text_patterns_lookup"),yP=e=>Q.explode(e.options.get("font_size_style_values")),EP=e=>Q.explode(e.options.get("font_size_classes")),_P=e=>e.options.get("encoding")==="xml",Dv=e=>Q.explode(e.options.get("images_file_types")),wP=fe("table_tab_navigation"),SP=ce,Bv=X,Iv=e=>{const t=e.parentNode;t&&t.removeChild(e)},Fv=e=>{const t=uo(e);return{count:e.length-t.length,text:t}},$v=e=>{let t;for(;(t=e.data.lastIndexOf(Qt))!==-1;)e.deleteData(t,1)},Lv=(e,t)=>(pr(e),t),xP=(e,t)=>{const n=Fv(e.data.substr(0,t.offset())),s=Fv(e.data.substr(t.offset()));return(n.text+s.text).length>0?($v(e),L(e,t.offset()-n.count)):t},kP=(e,t)=>{const n=t.container(),s=B(Et(n.childNodes),e).map(o=>o<t.offset()?L(n,t.offset()-1):t).getOr(t);return pr(e),s},NP=(e,t)=>Bv(e)&&t.container()===e?xP(e,t):Lv(e,t),AP=(e,t)=>t.container()===e.parentNode?kP(e,t):Lv(e,t),TP=(e,t)=>L.isTextPosition(t)?NP(e,t):AP(e,t),pr=e=>{SP(e)&&zn(e)&&(mb(e)?e.removeAttribute("data-mce-caret"):Iv(e)),Bv(e)&&($v(e),e.data.length===0&&Iv(e))},RP=bt,PP=$s,OP=Ol,DP="*[contentEditable=false],video,audio,embed,object",Mv=(e,t,n)=>{const s=Vb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},BP=e=>{var t,n;const s=gn(x.fromDom(e),DP);for(let o=0;o<s.length;o++){const r=s[o].dom;let i=r.previousSibling;if($l(i)){const a=i.data;a.length===1?(t=i.parentNode)===null||t===void 0||t.removeChild(i):i.deleteData(a.length-1,1)}i=r.nextSibling,Fl(i)&&(i.data.length===1?(n=i.parentNode)===null||n===void 0||n.removeChild(i):i.deleteData(0,1))}},IP=(e,t,n,s)=>{const o=Po();let r,i;const a=Rn(e),c=e.dom,u=(C,w)=>{let S;if(d(),OP(w))return null;if(n(w)){const k=mT(a,w,C),A=Mv(t,w,C);c.setStyle(k,"top",A.top),i=k;const M=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(M,{...A}),c.add(t,M),o.set({caret:M,element:w,before:C}),C&&c.addClass(M,"mce-visual-caret-before"),p(),S=w.ownerDocument.createRange(),S.setStart(k,0),S.setEnd(k,0)}else return i=dT(w,C),S=w.ownerDocument.createRange(),_a(i.nextSibling)?(S.setStart(i,0),S.setEnd(i,0)):(S.setStart(i,1),S.setEnd(i,1)),S;return S},d=()=>{BP(t),i&&(pr(i),i=null),o.on(C=>{c.remove(C.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(C=>{s()?c.toggleClass(C.caret,"mce-visual-caret-hidden"):c.addClass(C.caret,"mce-visual-caret-hidden")})},500)};return{show:u,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(C=>{const w=Mv(t,C.element,C.before);c.setStyles(C.caret,{...w})})},destroy:()=>clearInterval(r)}},Uv=()=>Ke.browser.isFirefox(),_a=e=>RP(e)||PP(e),wa=e=>_a(e)||co(e)&&Uv(),FP=Fs,Jf=bt,$P=$s,zv=Pl("display","block table table-cell table-caption list-item"),Hv=zn,Wv=Jr,LP=ce,MP=X,UP=ss,ai=e=>e>0,hr=e=>e<0,Zl=(e,t)=>{let n;for(;n=e(t);)if(!Wv(n))return n;return null},Sa=(e,t,n,s,o)=>{const r=new Ft(e,s),i=Jf(e)||Wv(e);let a;if(hr(t)){if(i&&(a=Zl(r.prev.bind(r),!0),n(a)))return a;for(;a=Zl(r.prev.bind(r),o);)if(n(a))return a}if(ai(t)){if(i&&(a=Zl(r.next.bind(r),!0),n(a)))return a;for(;a=Zl(r.next.bind(r),o);)if(n(a))return a}return null},zP=(e,t)=>{const n=o=>FP(o.dom),s=o=>o.dom===t;return Yr(x.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Bo=(e,t)=>{for(;e&&e!==t;){if(zv(e))return e;e=e.parentNode}return null},Ms=(e,t,n)=>Bo(e.container(),n)===Bo(t.container(),n),ed=(e,t)=>{if(!t)return b.none();const n=t.container(),s=t.offset();return LP(n)?b.from(n.childNodes[s+e]):b.none()},Vv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},HP=(e,t,n)=>Bo(t,e)===Bo(n,e),jv=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&Hv(r)&&(r=r[s]),Jf(r)||$P(r)){if(HP(t,r,o))return r;break}if(UP(r))break;o=o.parentNode}return null},xa=re(Vv,!0),ka=re(Vv,!1),td=(e,t,n)=>{let s;const o=re(jv,!0,t),r=re(jv,!1,t),i=n.startContainer,a=n.startOffset;if(Jr(i)){const c=MP(i)?i.parentNode:i,u=c.getAttribute("data-mce-caret");if(u==="before"&&(s=c.nextSibling,wa(s)))return xa(s);if(u==="after"&&(s=c.previousSibling,wa(s)))return ka(s)}if(!n.collapsed)return n;if(X(i)){if(Hv(i)){if(e===1){if(s=r(i),s)return xa(s);if(s=o(i),s)return ka(s)}if(e===-1){if(s=o(i),s)return ka(s);if(s=r(i),s)return xa(s)}return n}if($l(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?xa(s):n;if(Fl(i)&&a<=1)return e===-1&&(s=o(i),s)?ka(s):n;if(a===i.data.length)return s=r(i),s?xa(s):n;if(a===0)return s=o(i),s?ka(s):n}return n},qv=(e,t)=>ed(e?0:-1,t).filter(Jf),Na=(e,t,n)=>{const s=td(e,t,n);return e===-1?L.fromRangeStart(s):L.fromRangeEnd(s)},Jl=e=>b.from(e.getNode()).map(x.fromDom),WP=e=>b.from(e.getNode(!0)).map(x.fromDom),nd=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},ec=(e,t)=>{const n=Ms(e,t);return!n&&Pt(e.getNode())?!0:n};var Ht;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ht||(Ht={}));const VP=bt,Us=X,Kv=ce,sd=Pt,li=ss,Gv=ST,tc=bb,jP=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},Yv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Xv=(e,t)=>{if(ai(e)){if(li(t.previousSibling)&&!Us(t.previousSibling))return L.before(t);if(Us(t))return L(t,0)}if(hr(e)){if(li(t.nextSibling)&&!Us(t.nextSibling))return L.after(t);if(Us(t))return L(t,t.data.length)}return hr(e)?sd(t)?L.before(t):L.after(t):L.before(t)},qP=(e,t)=>{const n=t.nextSibling;return n&&li(n)?Us(n)?L(n,0):L.before(n):od(Ht.Forwards,L.after(t),e)},od=(e,t,n)=>{let s,o,r,i;if(!Kv(n)||!t)return null;if(t.isEqual(L.after(n))&&n.lastChild){if(i=L.after(n.lastChild),hr(e)&&li(n.lastChild)&&Kv(n.lastChild))return sd(n.lastChild)?L.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Us(a)){if(hr(e)&&c>0)return L(a,--c);if(ai(e)&&c<a.length)return L(a,++c);s=a}else{if(hr(e)&&c>0&&(o=Yv(a,c-1),li(o)))return!Gv(o)&&(r=Sa(o,e,tc,o),r)?Us(r)?L(r,r.data.length):L.after(r):Us(o)?L(o,o.data.length):L.before(o);if(ai(e)&&c<a.childNodes.length&&(o=Yv(a,c),li(o)))return sd(o)?qP(n,o):!Gv(o)&&(r=Sa(o,e,tc,o),r)?Us(r)?L(r,0):L.before(r):Us(o)?L(o,0):L.after(o);s=o||i.getNode()}if(s&&(ai(e)&&i.isAtEnd()||hr(e)&&i.isAtStart())&&(s=Sa(s,e,vt,n,!0),tc(s,n)))return Xv(e,s);o=s&&Sa(s,e,tc,n);const u=Qo(j(jP(a,n),VP));return u&&(!o||!u.contains(o))?(ai(e)?i=L.after(u):i=L.before(u),i):o?Xv(e,o):null},zs=e=>({next:t=>od(Ht.Forwards,t,e),prev:t=>od(Ht.Backwards,t,e)}),KP=(e,t,n)=>{const s=e?L.before(n):L.after(n);return Hn(e,t,s)},GP=e=>Pt(e)?L.before(e):L.after(e),Qv=e=>L.isTextPosition(e)?e.offset()===0:ss(e.getNode()),Zv=e=>{if(L.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ss(e.getNode(!0))},Jv=(e,t)=>!L.isTextPosition(e)&&!L.isTextPosition(t)&&e.getNode()===t.getNode(!0),YP=e=>!L.isTextPosition(e)&&Pt(e.getNode()),XP=(e,t,n)=>e?!Jv(t,n)&&!YP(t)&&Zv(t)&&Qv(n):!Jv(n,t)&&Qv(t)&&Zv(n),Hn=(e,t,n)=>{const s=zs(t);return b.from(e?s.next(n):s.prev(n))},nc=(e,t,n)=>Hn(e,t,n).bind(s=>Ms(n,s,t)&&XP(e,n,s)?Hn(e,t,s):b.some(s)),eC=(e,t,n,s)=>nc(e,t,n).bind(o=>s(o)?eC(e,t,o,s):b.some(o)),ci=(e,t)=>{const n=e?t.firstChild:t.lastChild;return X(n)?b.some(L(n,e?0:n.data.length)):n?ss(n)?b.some(e?L.before(n):GP(n)):KP(e,t,n):b.none()},Sn=re(Hn,!0),Wn=re(Hn,!1),hn=re(ci,!0),Hs=re(ci,!1),rd="_mce_caret",ms=e=>ce(e)&&e.id===rd,br=(e,t)=>{let n=t;for(;n&&n!==e;){if(ms(n))return n;n=n.parentNode}return null},QP=e=>de(e.start),ZP=e=>Fe(e,"rng"),JP=e=>Fe(e,"id"),tC=e=>Fe(e,"name"),nC=e=>Q.isArray(e.start),sc=e=>!tC(e)&&_n(e.forward)?e.forward:!0,sC=(e,t)=>(ce(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),eO=(e,t)=>{const n=b.from(rv(e.getRoot(),t.start)),s=b.from(rv(e.getRoot(),t.end));return mn(n,s,(o,r)=>{const i=e.createRng();return i.setStart(o.container(),o.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:sc(t)}})},tO=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Qt);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},nO=e=>!e.hasChildNodes(),sO=(e,t)=>Hs(e).fold(Ze,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),oC=(e,t,n)=>nO(t)&&br(e,t)?(tO(t,n),!0):!1,rC=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let i=r,a=o[0];for(let c=o.length-1;i&&c>=1;c--){const u=i.childNodes;if(oC(r,i,s))return!0;if(o[c]>u.length-1)return oC(r,i,s)?!0:sO(i,s);i=u[o[c]]}X(i)&&(a=Math.min(o[0],i.data.length)),ce(i)&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},id=e=>X(e)&&e.data.length>0,iC=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let i,a;if(t==="start"?r?s.hasChildNodes()?(i=s.firstChild,a=1):id(s.nextSibling)?(i=s.nextSibling,a=0):id(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)+1):(i=o,a=e.nodeIndex(s)):r?s.hasChildNodes()?(i=s.firstChild,a=1):id(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)):(i=o,a=e.nodeIndex(s)),!r){const c=s.previousSibling,u=s.nextSibling;Q.each(Q.grep(s.childNodes),p=>{X(p)&&(p.data=p.data.replace(/\uFEFF/g,""))});let d;for(;d=e.get(n.id+"_"+t);)e.remove(d,!0);if(X(u)&&X(c)&&!Ke.browser.isOpera()){const p=c.data.length;c.appendData(u.data),e.remove(u),i=c,a=p}}return b.some(L(i,a))}else return b.none()},oO=(e,t)=>{const n=e.createRng();return rC(e,!0,t,n)&&rC(e,!1,t,n)?b.some({range:n,forward:sc(t)}):b.none()},rO=(e,t)=>{const n=iC(e,"start",t),s=iC(e,"end",t);return mn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(sC(e,o.container()),o.offset()),i.setEnd(sC(e,r.container()),r.offset()),{range:i,forward:sc(t)}})},iO=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),aO=(e,t)=>{const n=e.dom;if(t){if(nC(t))return oO(n,t);if(QP(t))return eO(n,t);if(JP(t))return rO(n,t);if(tC(t))return iO(n,t);if(ZP(t))return b.some({range:t.rng,forward:sc(t)})}return b.none()},lO=(e,t,n)=>XR(e,t,n),cO=(e,t)=>{aO(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Vn=e=>ce(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",oc=(e=>t=>e===t)(jt),ui=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,ad=e=>!ui(e)&&!oc(e)&&!cb(e),uO=e=>({value:e}),ld=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},fO=e=>{const t=ld(e.red)+ld(e.green)+ld(e.blue);return uO(t)},dO=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,mO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,aC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),lC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return aC(o,r,i,a)},gO=e=>{if(e==="transparent")return b.some(aC(0,0,0,0));const t=dO.exec(e);if(t!==null)return b.some(lC(t[1],t[2],t[3],"1"));const n=mO.exec(e);return n!==null?b.some(lC(n[1],n[2],n[3],n[4])):b.none()},rc=e=>gO(e).map(fO).map(t=>"#"+t.value).getOr(e),cd=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},pO=e=>et(e,t=>{const n=ql(t);return n?[x.fromDom(n)]:[]}),hO=e=>cd(e).length>1,bO=e=>j(pO(e),Dl),vO=e=>gn(e,"td[data-mce-selected],th[data-mce-selected]"),cC=(e,t)=>{const n=vO(t);return n.length>0?n:bO(e)},fi=e=>cC(cd(e.selection.getSel()),x.fromDom(e.getBody())),Aa=(e,t)=>ia(e,"table",t),CO=e=>{const t=e.startContainer,n=e.startOffset;return X(t)?n===0?b.some(x.fromDom(t)):b.none():b.from(t.childNodes[n]).map(x.fromDom)},yO=e=>{const t=e.endContainer,n=e.endOffset;return X(t)?n===t.data.length?b.some(x.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(x.fromDom)},uC=e=>$h(e).fold(K([e]),t=>[e].concat(uC(t))),ud=e=>df(e).fold(K([e]),t=>_t(t)==="br"?tr(t).map(n=>[e].concat(ud(n))).getOr([]):[e].concat(ud(t))),fd=(e,t)=>mn(CO(t),yO(t),(n,s)=>{const o=ve(uC(e),re(nt,n)),r=ve(ud(e),re(nt,s));return o.isSome()&&r.isSome()}).getOr(!1),dd=(e,t,n,s)=>{const o=n,r=new Ft(n,o),i=qi(e.schema.getMoveCaretBeforeOnEnterElements(),(c,u)=>!z(["td","th","table"],u.toLowerCase()));let a=n;do{if(X(a)&&Q.trim(a.data).length!==0){s?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(i[a.nodeName]){s?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},ic=e=>{const t=e.selection.getSel();return oe(t)&&t.rangeCount>0},md=(e,t)=>{const n=fi(e);n.length>0?R(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},fC=(e,t,n)=>{const s=dv(e,t);n(s),e.moveToBookmark(s)},Ta=e=>dn(e==null?void 0:e.nodeType),gd=e=>ce(e)&&!Vn(e)&&!ms(e)&&!or(e),EO=(e,t)=>{if(gd(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},vr=e=>e.isContentEditable===!0,dC=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),i=bt(r);fC(s,!0,()=>{t()}),i&&bt(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&_O(o,s)},_O=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:i}=o,a=t.getNode();if(!EO(e,a)&&ce(r)){const c=r.childNodes,u=e.getRoot();let d;if(i<c.length){const p=c[i];d=new Ft(p,(n=e.getParent(p,e.isBlock))!==null&&n!==void 0?n:u)}else{const p=c[c.length-1];d=new Ft(p,(s=e.getParent(p,e.isBlock))!==null&&s!==void 0?s:u),d.next(!0)}for(let p=d.current();p;p=d.next()){if(e.getContentEditable(p)==="false")return;if(X(p)&&!hd(p)){o.setStart(p,0),t.setRng(o);return}}}},mC=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(ce(e)||!hd(e))return e}},pd=(e,t)=>(Ta(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),di=(e,t,n)=>e.schema.isValidChild(t,n),hd=(e,t=!1)=>{if(oe(e)&&X(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return lr(n)}else return!1},wO=e=>oe(e)&&X(e)&&e.length===0,SO=(e,t)=>{const n="[data-mce-cef-wrappable]",s=L1(e),o=Yi(s)?n:`${n},${s}`;return ls(x.fromDom(t),o)},gC=(e,t)=>{const n=e.dom;return gd(t)&&n.getContentEditable(t)==="false"&&SO(e,t)&&n.select('[contenteditable="true"]',t).length===0},Io=(e,t)=>He(e)?e(t):(oe(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),bd=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),vd=(e,t)=>{if(lt(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=rc(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},ac=(e,t,n)=>{const s=e.getStyle(t,n);return vd(s,n)},pC=(e,t)=>{let n;return e.getParent(t,s=>ce(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},lc=(e,t,n)=>e.getParents(t,n,e.getRoot()),Cd=(e,t,n)=>{const s=e.formatter.get(t);return oe(s)&&Y(s,n)},xO=(e,t)=>Cd(e,t,s=>{const o=r=>He(r)||r.length>1&&r.charAt(0)==="%";return Y(["styles","attributes"],r=>gt(s,r).exists(i=>{const a=St(i)?i:tf(i);return Y(a,o)}))}),kO=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>qi(r,(i,a)=>Y(s,c=>c===a));return Cd(e,t,r=>{const i=o(r);return Cd(e,n,a=>{const c=o(a);return EN(i,c)})})},Ws=e=>Vr(e,"block"),NO=e=>Ws(e)&&e.wrapper===!0,AO=e=>Ws(e)&&e.wrapper!==!0,jn=e=>Vr(e,"selector"),Wt=e=>Vr(e,"inline"),TO=e=>jn(e)&&Wt(e)&&qr(gt(e,"mixed"),!0),yd=e=>jn(e)&&e.expand!==!1&&!Wt(e),mi=Vn,hC=lc,bC=hd,RO=pd,PO=e=>Pt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,vC=(e,t)=>{let n=t;for(;n;){if(ce(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},CC=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},OO=(e,t,n)=>CC(e,t,n,s=>oc(s)||ui(s)),DO=(e,t,n)=>CC(e,t,n,ad),yC=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,g)=>{const y=dr(e),_=o?y.backwards:y.forwards;return b.from(_(d,p,(C,w)=>mi(C.parentNode)?-1:(i=C,g(o,C,w)),a))};return c(n,s,OO).bind(d=>r?c(d.container,d.offset+(o?-1:0),DO):b.some(d)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},EC=(e,t,n,s,o)=>{const r=s[o];X(s)&&Yi(s.data)&&r&&(s=r);const i=hC(e,s);for(let a=0;a<i.length;a++)for(let c=0;c<t.length;c++){const u=t[c];if(!(oe(u.collapsed)&&u.collapsed!==n.collapsed)&&jn(u)&&e.is(i[a],u.selector))return i[a]}return s},_C=(e,t,n,s)=>{var o;let r=n;const i=e.dom,a=i.getRoot(),c=t[0];if(Ws(c)&&(r=c.wrapper?null:i.getParent(n,c.block,a)),!r){const u=(o=i.getParent(n,"LI,TD,TH"))!==null&&o!==void 0?o:a;r=i.getParent(X(n)?n.parentNode:n,d=>d!==a&&RO(e,d),u)}if(r&&Ws(c)&&c.wrapper&&(r=hC(i,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!i.isBlock(r[s])&&(r=r[s],!bd(r,"br")););return r||n},wC=(e,t,n,s)=>{const o=n.parentNode;return oe(n[s])?!1:o===t||lt(o)||e.isBlock(o)?!0:wC(e,t,o,s)},cc=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(X(n)&&!bC(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const u=X(c)&&!wC(e,a,c,i);if(!mi(c)&&!PO(c)&&!bC(c,u))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},SC=e=>mi(e.parentNode)||mi(e),gi=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,u=n[0];return ce(o)&&o.hasChildNodes()&&(o=Oo(o,r),X(o)&&(r=0)),ce(i)&&i.hasChildNodes()&&(i=Oo(i,t.collapsed?a:a-1),X(i)&&(a=i.data.length)),o=vC(c,o),i=vC(c,i),SC(o)&&(o=mi(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,X(o)&&(r=t.collapsed?o.length:0)),SC(i)&&(i=mi(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,X(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(yC(c,e.getBody(),o,r,!0,s).each(({container:g,offset:y})=>{o=g,r=y}),yC(c,e.getBody(),i,a,!1,s).each(({container:g,offset:y})=>{i=g,a=y})),(Wt(u)||u.block_expand)&&((!Wt(u)||!X(o)||r===0)&&(o=cc(c,n,o,r,!0)),(!Wt(u)||!X(i)||a===i.data.length)&&(i=cc(c,n,i,a,!1))),yd(u)&&(o=EC(c,n,t,o,"previousSibling"),i=EC(c,n,t,i,"nextSibling")),(Ws(u)||jn(u))&&(o=_C(e,n,o,"previousSibling"),i=_C(e,n,i,"nextSibling"),Ws(u)&&(c.isBlock(o)||(o=cc(c,n,o,r,!0)),c.isBlock(i)||(i=cc(c,n,i,a,!1)))),ce(o)&&o.parentNode&&(r=c.nodeIndex(o),o=o.parentNode),ce(i)&&i.parentNode&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},Ra=(e,t,n)=>{var s;const o=t.startOffset,r=Oo(t.startContainer,o),i=t.endOffset,a=Oo(t.endContainer,i-1),c=w=>{const S=w[0];X(S)&&S===r&&o>=S.data.length&&w.splice(0,1);const k=w[w.length-1];return i===0&&w.length>0&&k===a&&X(k)&&w.splice(w.length-1,1),w},u=(w,S,k)=>{const A=[];for(;w&&w!==k;w=w[S])A.push(w);return A},d=(w,S)=>e.getParent(w,k=>k.parentNode===S,S),p=(w,S,k)=>{const A=k?"nextSibling":"previousSibling";for(let M=w,H=M.parentNode;M&&M!==S;M=H){H=M.parentNode;const J=u(M===w?M:M[A],A);J.length&&(k||J.reverse(),n(c(J)))}};if(r===a)return n(c([r]));const g=(s=e.findCommonAncestor(r,a))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,a))return p(r,g,!0);if(e.isChildOf(a,r))return p(a,g);const y=d(r,g)||r,_=d(a,g)||a;p(r,y,!0);const C=u(y===r?y:y.nextSibling,"nextSibling",_===a?_.nextSibling:_);C.length&&n(c(C)),p(a,_)},BO=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],IO=e=>Ln(e)&&_f(e)===Qt,FO=(e,t,n,s)=>Mn(t).fold(()=>"skipping",o=>s==="br"||IO(t)?"valid":pR(t)?"existing":ms(t.dom)?"caret":Y(BO,r=>ls(t,r))?"valid-block":!di(e,n,s)||!di(e,_t(o),n)?"invalid-child":"valid"),$O=(e,t)=>{const n=gi(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},xC=(e,t,n,s,o,r)=>{const{uid:i=t,...a}=n;Ji(e,da()),Vt(e,`${si()}`,i),Vt(e,`${fr()}`,s);const{attributes:c={},classes:u=[]}=o(i,a);if(wo(e,c),CR(e,u),r){u.length>0&&Vt(e,`${ga()}`,u.join(","));const d=$n(c);d.length>0&&Vt(e,`${pa()}`,d.join(","))}},LO=e=>{Sl(e,da()),tn(e,`${si()}`),tn(e,`${fr()}`),tn(e,`${ma()}`);const t=io(e,`${pa()}`).map(s=>s.split(",")).getOr([]),n=io(e,`${ga()}`).map(s=>s.split(",")).getOr([]);R(t,s=>tn(e,s)),yR(e,n),tn(e,`${ga()}`),tn(e,`${pa()}`)},kC=(e,t,n,s,o)=>{const r=x.fromTag("span",e);return xC(r,t,n,s,o,!1),r},MO=(e,t,n,s,o,r)=>{const i=[],a=kC(e.getDoc(),n,r,s,o),c=Po(),u=()=>{c.clear()},d=()=>c.get().getOrThunk(()=>{const _=oi(a);return i.push(_),c.set(_),_}),p=_=>{R(_,g)},g=_=>{switch(FO(e,_,"span",_t(_))){case"invalid-child":{u();const w=nn(_);p(w),u();break}case"valid-block":{u(),xC(_,n,r,s,o,!0);break}case"valid":{const w=d();_A(_,w);break}}},y=_=>{const C=V(_,x.fromDom);p(C)};return Ra(e.dom,t,_=>{u(),y(_)}),i},UO=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=fi(e).length>0,a=Ub("mce-annotation");if(r.collapsed&&!i&&$O(e,r),o.getRng().collapsed&&!i){const c=kC(e.getDoc(),a,s,t,n.decorate);Al(c,jt),o.getRng().insertNode(c.dom),o.select(c.dom)}else fC(o,!1,()=>{md(e,c=>{MO(e,c,a,t,n.decorate,s)})})})},NC=e=>{const t=vR();bR(e,t);const n=hR(e,t),s=cf("span"),o=r=>{R(r,i=>{s(i)?ko(i):LO(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{UO(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{const i=e.selection.getBookmark();Ib(e,b.some(r)).each(({elements:a})=>{o(a)}),e.selection.moveToBookmark(i)},removeAll:r=>{const i=e.selection.getBookmark();ct(Lb(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=Lb(e,r);return vl(i,a=>V(a,c=>c.dom))}}},Pa=e=>({getBookmark:re(lO,e),moveToBookmark:re(cO,e)});Pa.isBookmarkNode=Vn;const AC=(e,t,n)=>n.collapsed?!1:Y(n.getClientRects(),s=>SR(s,e,t)),zO=(e,t)=>e.dispatch("PreProcess",t),HO=(e,t)=>e.dispatch("PostProcess",t),WO=e=>{e.dispatch("remove")},VO=e=>{e.dispatch("detach")},jO=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},qO=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},KO=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},GO=e=>{e.dispatch("PreInit")},YO=e=>{e.dispatch("PostRender")},XO=e=>{e.dispatch("Init")},QO=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},TC=(e,t,n)=>{e.dispatch(t,n)},RC=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},PC=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},ZO=(e,t)=>e.dispatch("BeforeSetContent",t),OC=(e,t)=>e.dispatch("SetContent",t),JO=(e,t)=>e.dispatch("BeforeGetContent",t),DC=(e,t)=>e.dispatch("GetContent",t),eD=(e,t)=>{e.dispatch("AutocompleterStart",t)},tD=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},nD=e=>{e.dispatch("AutocompleterEnd")},sD=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),oD=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),BC=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ge={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ge.metaKeyPressed(e),metaKeyPressed:e=>Ke.os.isMacOS()||Ke.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Cr="data-mce-selected",rD="table,img,figure.image,hr,video,span.mce-preview-object",IC=Math.abs,uc=Math.round,Ed={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},iD=e=>e.type==="longpress"||e.type.indexOf("touch")===0,FC=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,u,d,p,g,y,_,C,w,S,k,A,M,H,J;const W=te=>oe(te)&&(tb(te)||n.is(te,"figure.image")),F=te=>$s(te)||n.hasClass(te,"mce-preview-object"),$=(te,Ie)=>{if(iD(te)){const De=te.touches[0];return W(te.target)&&!AC(De.clientX,De.clientY,Ie)}else return W(te.target)&&!AC(te.clientX,te.clientY,Ie)},ee=te=>{const Ie=te.target;$(te,t.selection.getRng())&&!te.isDefaultPrevented()&&t.selection.select(Ie)},me=te=>n.hasClass(te,"mce-preview-object")&&oe(te.firstElementChild)?[te,te.firstElementChild]:n.is(te,"figure.image")?[te.querySelector("img")]:[te],be=te=>{const Ie=Av(t);return!Ie||te.getAttribute("data-mce-resize")==="false"||te===t.getBody()?!1:n.hasClass(te,"mce-preview-object")&&oe(te.firstElementChild)?ls(x.fromDom(te.firstElementChild),Ie):ls(x.fromDom(te),Ie)},Te=te=>F(te)?n.create("img",{src:Ke.transparentSrc}):te.cloneNode(!0),Me=(te,Ie,De)=>{if(oe(De)){const _e=me(te);R(_e,ke=>{ke.style[Ie]||!t.schema.isValid(ke.nodeName.toLowerCase(),Ie)?n.setStyle(ke,Ie,De):n.setAttrib(ke,Ie,""+De)})}},We=(te,Ie,De)=>{Me(te,"width",Ie),Me(te,"height",De)},Je=te=>{let Ie,De,_e,ke,Ge;Ie=te.screenX-p,De=te.screenY-g,A=Ie*u[2]+C,M=De*u[3]+w,A=A<5?5:A,M=M<5?5:M,(W(i)||F(i))&&R1(t)!==!1?_e=!ge.modifierPressed(te):_e=ge.modifierPressed(te),_e&&(IC(Ie)>IC(De)?(M=uc(A*S),A=uc(M/S)):(A=uc(M/S),M=uc(A*S))),We(a,A,M),ke=u.startPos.x+Ie,Ge=u.startPos.y+De,ke=ke>0?ke:0,Ge=Ge>0?Ge:0,n.setStyles(c,{left:ke,top:Ge,display:"block"}),c.innerHTML=A+" &times; "+M,u[2]<0&&a.clientWidth<=A&&n.setStyle(a,"left",y+(C-A)),u[3]<0&&a.clientHeight<=M&&n.setStyle(a,"top",_+(w-M)),Ie=r.scrollWidth-H,De=r.scrollHeight-J,Ie+De!==0&&n.setStyles(c,{left:ke-Ie,top:Ge-De}),k||(qO(t,i,C,w,"corner-"+u.name),k=!0)},$t=()=>{const te=k;k=!1,te&&(Me(i,"width",A),Me(i,"height",M)),n.unbind(s,"mousemove",Je),n.unbind(s,"mouseup",$t),o!==s&&(n.unbind(o,"mousemove",Je),n.unbind(o,"mouseup",$t)),n.remove(a),n.remove(c),n.remove(d),Z(i),te&&(KO(t,i,A,M,"corner-"+u.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Z=te=>{ie();const Ie=n.getPos(te,r),De=Ie.x,_e=Ie.y,ke=te.getBoundingClientRect(),Ge=ke.width||ke.right-ke.left,Qe=ke.height||ke.bottom-ke.top;i!==te&&(Oe(),i=te,A=M=0);const Ot=t.dispatch("ObjectSelected",{target:te});be(te)&&!Ot.isDefaultPrevented()?ct(Ed,(pt,ut)=>{const Tt=Dt=>{const Cs=me(i)[0];p=Dt.screenX,g=Dt.screenY,C=Cs.clientWidth,w=Cs.clientHeight,S=w/C,u=pt,u.name=ut,u.startPos={x:Ge*pt[0]+De,y:Qe*pt[1]+_e},H=r.scrollWidth,J=r.scrollHeight,d=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=Te(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:De,top:_e,margin:0}),We(a,Ge,Qe),a.removeAttribute(Cr),r.appendChild(a),n.bind(s,"mousemove",Je),n.bind(s,"mouseup",$t),o!==s&&(n.bind(o,"mousemove",Je),n.bind(o,"mouseup",$t)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+w)};let Gt=n.get("mceResizeHandle"+ut);Gt&&n.remove(Gt),Gt=n.add(r,"div",{id:"mceResizeHandle"+ut,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ut+"-resize; margin:0; padding:0"}),n.bind(Gt,"mousedown",Dt=>{Dt.stopImmediatePropagation(),Dt.preventDefault(),Tt(Dt)}),pt.elm=Gt,n.setStyles(Gt,{left:Ge*pt[0]+De-Gt.offsetWidth/2,top:Qe*pt[1]+_e-Gt.offsetHeight/2})}):Oe(!1)},Re=jl(Z,0),Oe=(te=!0)=>{Re.cancel(),ie(),i&&te&&i.removeAttribute(Cr),ct(Ed,(Ie,De)=>{const _e=n.get("mceResizeHandle"+De);_e&&(n.unbind(_e),n.remove(_e))})},xe=(te,Ie)=>n.isChildOf(te,Ie),wt=te=>{if(k||t.removed||t.composing)return;const Ie=te.type==="mousedown"?te.target:e.getNode(),De=rr(x.fromDom(Ie),rD).map(ke=>ke.dom).getOrUndefined(),_e=oe(De)?n.getAttrib(De,Cr,"1"):"1";if(R(n.select(`img[${Cr}],hr[${Cr}]`),ke=>{ke.removeAttribute(Cr)}),oe(De)&&xe(De,r)){we();const ke=e.getStart(!0);if(xe(ke,De)&&xe(e.getEnd(!0),De)){n.setAttrib(De,Cr,_e),Re.throttle(De);return}}Oe()},ie=()=>{ct(Ed,te=>{te.elm&&(n.unbind(te.elm),delete te.elm)})},we=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{we(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",wt),t.on("keyup compositionend",te=>{i&&i.nodeName==="TABLE"&&wt(te)}),t.on("hide blur",Oe),t.on("contextmenu longpress",ee,!0)}),t.on("remove",ie),{isResizable:be,showResizeRect:Z,hideResizeRect:Oe,updateResizeRect:wt,destroy:()=>{Re.cancel(),i=a=d=null}}},aD=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},lD=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},$C=(e,t,n)=>{const s=e.document.createRange();return aD(s,t),lD(s,n),s},_d=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Oa=Ls.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),LC=(e,t,n)=>t(x.fromDom(n.startContainer),n.startOffset,x.fromDom(n.endContainer),n.endOffset),cD=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:b.none}),relative:(n,s)=>({ltr:Zo(()=>$C(e,n,s)),rtl:Zo(()=>b.some($C(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Zo(()=>_d(e,n,s,o,r)),rtl:Zo(()=>b.some(_d(e,o,r,n,s)))})}),uD=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Oa.rtl(x.fromDom(o.endContainer),o.endOffset,x.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>LC(e,Oa.ltr,n)):LC(e,Oa.ltr,n)},fD=(e,t)=>{const n=cD(e,t);return uD(e,n)};Oa.ltr,Oa.rtl;const MC={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},dD=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return b.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),b.some(i)})},mD=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},gD=(()=>document.caretPositionFromPoint?dD:document.caretRangeFromPoint?mD:b.none)(),pD=(e,t,n)=>{const s=x.fromDom(e.document);return gD(s,t,n).map(o=>MC.create(x.fromDom(o.startContainer),o.startOffset,x.fromDom(o.endContainer),o.endOffset))},wd=Ls.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hD=(e,t,n,s)=>e.fold(t,n,s),bD=e=>e.fold(Rt,Rt,Rt),vD=wd.before,CD=wd.on,yD=wd.after,mo={before:vD,on:CD,after:yD,cata:hD,getStart:bD},fc=Ls.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ED=e=>fc.exact(e.start,e.soffset,e.finish,e.foffset),_D=e=>e.match({domRange:t=>x.fromDom(t.startContainer),relative:(t,n)=>mo.getStart(t),exact:(t,n,s,o)=>t}),wD=fc.domRange,SD=fc.relative,xD=fc.exact,kD=e=>{const t=_D(e);return na(t)},ND=MC.create,pi={domRange:wD,relative:SD,exact:xD,exactFromRange:ED,getWin:kD,range:ND},dc=(e,t)=>{const n=_t(e);return n==="input"?mo.after(e):z(["br","img"],n)?t===0?mo.before(e):mo.after(e):mo.on(e,t)},AD=(e,t)=>{const n=e.fold(mo.before,dc,mo.after),s=t.fold(mo.before,dc,mo.after);return pi.relative(n,s)},UC=(e,t,n,s)=>{const o=dc(e,t),r=dc(n,s);return pi.relative(o,r)},TD=e=>e.match({domRange:t=>{const n=x.fromDom(t.startContainer),s=x.fromDom(t.endContainer);return UC(n,t.startOffset,s,t.endOffset)},relative:AD,exact:UC}),Sd=(e,t)=>{const s=(t||document).createDocumentFragment();return R(e,o=>{s.appendChild(o.dom)}),x.fromDom(s)},RD=e=>{const t=pi.getWin(e).dom,n=(o,r,i,a)=>_d(t,o,r,i,a),s=TD(e);return fD(t,s).match({ltr:n,rtl:n})},PD=(e,t,n)=>pD(e,t,n),zC=(e,t,n)=>{const s=na(x.fromDom(n));return PD(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},xd=(e,t)=>oe(e)&&oe(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,OD=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},HC=(e,t,n)=>OD(e,t,n)!==null,DD=(e,t,n)=>HC(e,t,s=>s.nodeName===n),BD=(e,t)=>zn(e)&&!HC(e,t,ms),WC=(e,t,n)=>{const s=t.parentNode;if(s){const o=new Ft(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(Pt(r))return!0}return!1},ID=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},FD=(e,t)=>{let n=t;for(;n&&n!==e;){if(bt(n))return!0;n=n.parentNode}return!1},kd=(e,t,n,s,o)=>{const r=e.getRoot(),i=e.schema.getNonEmptyElements(),a=o.parentNode;let c,u;if(!a)return b.none();const d=e.getParent(a,e.isBlock)||r;if(s&&Pt(o)&&t&&e.isEmpty(d))return b.some(L(a,e.nodeIndex(o)));const p=new Ft(o,d);for(;u=p[s?"prev":"next"]();){if(e.getContentEditableParent(u)==="false"||BD(u,r))return b.none();if(X(u)&&u.data.length>0)return DD(u,r,"A")?b.none():b.some(L(u,s?u.data.length:0));if(e.isBlock(u)||i[u.nodeName.toLowerCase()])return b.none();c=u}return No(c)?b.none():n&&c?b.some(L(c,0)):b.none()},VC=(e,t,n,s)=>{const o=e.getRoot();let r,i=!1,a=n?s.startContainer:s.endContainer,c=n?s.startOffset:s.endOffset;const u=ce(a)&&c===a.childNodes.length,d=e.schema.getNonEmptyElements();let p=n;if(zn(a))return b.none();if(ce(a)&&c>a.childNodes.length-1&&(p=!1),ra(a)&&(a=o,c=0),a===o){if(p&&(r=a.childNodes[c>0?c-1:0],r&&(zn(r)||d[r.nodeName]||co(r))))return b.none();if(a.hasChildNodes()){if(c=Math.min(!p&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=X(a)&&u?a.data.length:0,!t&&a===o.lastChild&&co(a)||FD(o,a)||zn(a))return b.none();if(a.hasChildNodes()&&!co(a)){r=a;const g=new Ft(a,o);do{if(bt(r)||zn(r)){i=!1;break}if(X(r)&&r.data.length>0){c=p?0:r.data.length,a=r,i=!0;break}if(d[r.nodeName.toLowerCase()]&&!nb(r)){c=e.nodeIndex(r),a=r.parentNode,p||c++,i=!0;break}}while(r=p?g.next():g.prev())}}}return t&&(X(a)&&c===0&&kd(e,u,t,!0,a).each(g=>{a=g.container(),c=g.offset(),i=!0}),ce(a)&&(r=a.childNodes[c],r||(r=a.childNodes[c-1]),r&&Pt(r)&&!ID(r,"A")&&!WC(e,r,!1)&&!WC(e,r,!0)&&kd(e,u,t,!0,r).each(g=>{a=g.container(),c=g.offset(),i=!0}))),p&&!t&&X(a)&&c===a.data.length&&kd(e,u,t,!1,a).each(g=>{a=g.container(),c=g.offset(),i=!0}),i&&a?b.some(L(a,c)):b.none()},mc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=L.fromRangeStart(t);return VC(e,n,!0,s).each(r=>{(!n||!L.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||VC(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),xd(t,s)?b.none():b.some(s)},gc=(e,t)=>e.splitText(t),pc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&X(t)){if(n>0&&n<t.data.length)if(s=gc(t,n),t=s.previousSibling,o>n){o=o-n;const r=gc(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(X(t)&&n>0&&n<t.data.length&&(t=gc(t,n),n=0),X(s)&&o>0&&o<s.data.length){const r=gc(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},hi=e=>({walk:(o,r)=>Ra(e,o,r),split:pc,normalize:o=>mc(e,o).fold(Ze,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});hi.compareRanges=xd,hi.getCaretRangeFromPoint=zC,hi.getSelectedNode=ql,hi.getNode=Oo;const $D=((e,t)=>{const n=(a,c)=>{if(!dn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const u=a.dom;ea(u)&&(u.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const u=Is(a,e);return parseFloat(u)||0}return c},o=s,r=(a,c)=>Ee(c,(u,d)=>{const p=Is(a,d),g=p===void 0?0:parseInt(p,10);return isNaN(g)?u:u+g},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,u)=>{const d=r(a,u);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Kr(e)?t.getBoundingClientRect().height:t.offsetHeight}),LD=e=>$D.get(e),jC=()=>x.fromDom(document),qC=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=qC(e,o);return[s].concat(r)}),MD=(e,t)=>{const n=t.owner(e);return qC(t,n)};var UD=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(x.fromDom)},owner:e=>lo(e)});const zD=e=>{const t=jC(),n=hf(t),s=MD(e,UD),o=pf(e),r=se(s,(i,a)=>{const c=pf(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return Gr(r.left+o.left+n.left,r.top+o.top+n.top)},Nd=e=>_t(e)==="textarea",HD=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),WD=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},VD=(e,t)=>{const n=nn(e);if(n.length===0||Nd(e))return{element:e,offset:t};if(t<n.length&&!Nd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return Nd(s)?{element:e,offset:t}:_t(s)==="img"?{element:s,offset:1}:Ln(s)?{element:s,offset:_f(s).length}:{element:s,offset:nn(s).length}}},KC=(e,t)=>{const n=BA(e),s=LD(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},jD=(e,t)=>{const n=VD(e,t),s=x.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Qt+"</span>");return Un(n.element,s),KC(s,()=>Ct(s))},qD=e=>KC(x.fromDom(e),$e),GC=(e,t,n,s)=>{GD(e,(o,r)=>KD(e,t,n,s),n)},YC=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(HD(e,r))return;const i=hf(t).top;n(t,i,s,o),WD(e,r)},KD=(e,t,n,s)=>{const o=x.fromDom(e.getBody()),r=x.fromDom(e.getDoc());EA(o);const i=jD(x.fromDom(n.startContainer),n.startOffset);YC(e,r,t,i,s),i.cleanup()},XC=(e,t,n,s)=>{const o=x.fromDom(e.getDoc());YC(e,o,n,qD(t),s)},GD=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(x.fromDom(s),x.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},Ad=(e,t,n,s)=>{const o=e.pos;if(n)Yh(o.left,o.top,s);else{const r=o.top-t+e.height;Yh(o.left,r,s)}},QC=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?Ad(s,n,o!==!1,e):i>r?Ad(s,n,c?o!==!1:o===!0,e):a>r&&!c&&Ad(s,n,o===!0,e)},ZC=(e,t,n,s)=>{const o=na(e).dom.innerHeight;QC(e,t,o,n,s)},JC=(e,t,n,s)=>{const o=na(e).dom.innerHeight;QC(e,t,o,n,s);const r=zD(n.element),i=Zh(window);r.top<i.y?Xh(n.element,s!==!1):r.top>i.bottom&&Xh(n.element,s===!0)},YD=(e,t,n)=>GC(e,ZC,t,n),XD=(e,t,n)=>XC(e,t,ZC,n),QD=(e,t,n)=>GC(e,JC,t,n),ZD=(e,t,n)=>XC(e,t,JC,n),JD=(e,t,n)=>{(e.inline?XD:ZD)(e,t,n)},Da=(e,t,n)=>{(e.inline?YD:QD)(e,t,n)},ey=e=>e.dom.focus(),ty=e=>{const t=So(e).dom;return e.dom===t.activeElement},Td=(e=jC())=>b.from(e.dom.activeElement).map(x.fromDom),eB=e=>Td(So(e)).filter(t=>e.dom.contains(t.dom)),ny=(e,t)=>{const n=Ln(t)?_f(t).length:nn(t).length+1;return e>n?n:e<0?0:e},tB=e=>pi.range(e.start,ny(e.soffset,e.start),e.finish,ny(e.foffset,e.finish)),sy=(e,t)=>!Rl(t.dom)&&(ao(e,t)||nt(e,t)),oy=e=>t=>sy(e,t.start)&&sy(e,t.finish),nB=e=>e.inline,sB=e=>pi.range(x.fromDom(e.startContainer),e.startOffset,x.fromDom(e.endContainer),e.endOffset),oB=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(sB)},rB=e=>{const t=na(e);return oB(t.dom).filter(oy(e))},iB=(e,t)=>b.from(t).filter(oy(e)).map(tB),aB=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},Rd=e=>{const t=nB(e)?rB(x.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},Pd=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>iB(x.fromDom(e.getBody()),n)).bind(aB),lB=e=>{Pd(e).each(t=>e.selection.setRng(t))},ry={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},cB=(e,t)=>(dn(t)||(t=0),setTimeout(e,t)),uB=(e,t)=>(dn(t)||(t=0),setInterval(e,t)),qn={setEditorTimeout:(e,t,n)=>cB(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=uB(()=>{e.removed?clearInterval(s):t()},n);return s}},fB=e=>e.type==="nodechange"&&e.selectionChange,dB=(e,t)=>{const n=()=>{t.throttle()};rt.DOM.bind(document,"mouseup",n),e.on("remove",()=>{rt.DOM.unbind(document,"mouseup",n)})},mB=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},gB=(e,t)=>{mB(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{fB(n)||Rd(e)})},pB=e=>{const t=jl(()=>{Rd(e)},0);e.on("init",()=>{e.inline&&dB(e,t),gB(e,t)}),e.on("remove",()=>{t.cancel()})};let bi;const Od=rt.DOM,hB=e=>ce(e)&&ry.isEditorUIElement(e),bB=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},hc=(e,t)=>{const n=M1(e);return Od.getParent(t,o=>hB(o)||(n?e.dom.is(o,n):!1))!==null},vB=e=>{try{const t=So(x.fromDom(e.getElement()));return Td(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},CB=(e,t)=>{const n=t.editor;pB(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{qn.setEditorTimeout(n,()=>{const s=e.focusedEditor;!hc(n,vB(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),bi||(bi=s=>{const o=e.activeEditor;o&&Uh(s).each(r=>{const i=r;i.ownerDocument===document&&i!==document.body&&!hc(o,i)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Od.bind(document,"focusin",bi))},yB=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&bi&&(Od.unbind(document,"focusin",bi),bi=null)},EB=e=>{e.on("AddEditor",re(CB,e)),e.on("RemoveEditor",re(yB,e))},_B=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),wB=e=>e.collapsed?b.from(Oo(e.startContainer,e.startOffset)).map(x.fromDom):b.none(),SB=(e,t)=>wB(t).bind(n=>oT(n)?b.some(n):ao(e,n)?b.none():b.some(e)),iy=(e,t)=>{SB(x.fromDom(e.getBody()),t).bind(n=>hn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Dd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},xB=e=>ty(e)||eB(e).isSome(),kB=e=>oe(e.iframeElement)&&ty(x.fromDom(e.iframeElement)),NB=e=>{const t=e.getBody();return t&&xB(x.fromDom(t))},AB=e=>{const t=So(x.fromDom(e.getElement()));return Td(t).filter(n=>!bB(n.dom)&&hc(e,n.dom)).isSome()},yr=e=>e.inline?NB(e):kB(e),TB=e=>yr(e)||AB(e),RB=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),oe(e.bookmark)&&!yr(e)&&Pd(e).each(r=>{e.selection.setRng(r),s=r});const o=_B(e,t.getNode());if(o&&e.dom.isChildOf(o,n)){Dd(o),iy(e,s),Bd(e);return}e.inline||(Ke.browser.isOpera()||Dd(n),e.getWin().focus()),(Ke.browser.isFirefox()||e.inline)&&(Dd(n),iy(e,s)),Bd(e)},Bd=e=>e.editorManager.setActive(e),PB=(e,t)=>{e.removed||(t?Bd(e):RB(e))},ay=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(x.fromDom).map(a=>!s||!t.collapsed?xl(a,o(a,i)).getOr(a):a).bind(a=>ts(a)?b.some(a):Mn(a).filter(ts)).map(a=>a.dom).getOr(e)},ly=(e,t,n=!1)=>ay(e,t,!0,n,(s,o)=>Math.min(Lh(s),o)),cy=(e,t,n=!1)=>ay(e,t,!1,n,(s,o)=>o>0?o-1:o),uy=(e,t)=>{const n=e;for(;e&&X(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},OB=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(i=n.childNodes[o]),X(n)&&X(s)&&(n.length===o?n=uy(n.nextSibling,!0):n=n.parentNode,r===0?s=uy(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(i=n)));const a=X(i)?i.parentNode:i;return ce(a)?a:e},DB=(e,t,n,s)=>{const o=[],r=e.getRoot(),i=e.getParent(n||ly(r,t,t.collapsed),e.isBlock),a=e.getParent(s||cy(r,t,t.collapsed),e.isBlock);if(i&&i!==r&&o.push(i),i&&a&&i!==a){let c=i;const u=new Ft(i,r);for(;(c=u.next())&&c!==a;)e.isBlock(c)&&o.push(c)}return a&&i!==a&&a!==r&&o.push(a),o},BB=(e,t,n)=>b.from(t).bind(s=>b.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),i=e.createRng();return i.setStart(o,r),i.setEnd(o,r+1),n&&(dd(e,i,s,!0),dd(e,i,s,!1)),i})),Id=(e,t)=>V(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),IB=e=>_t(e)==="img"?1:db(e).fold(()=>nn(e).length,t=>t.length),FB=e=>db(e).filter(t=>t.trim().length!==0||t.indexOf(jt)>-1).isSome(),$B=["img","br"],fy=e=>FB(e)||z($B,_t(e)),LB=e=>qA(e,fy),MB=e=>UB(e,fy),UB=(e,t)=>{const n=s=>{const o=nn(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return b.some(i);const a=n(i);if(a.isSome())return a}return b.none()};return n(e)},dy="[data-mce-autocompleter]",zB=(e,t)=>{if(my(x.fromDom(e.getBody())).isNone()){const n=x.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ut(n,x.fromDom(t.extractContents())),t.insertNode(n.dom),Mn(n).each(s=>s.dom.normalize()),MB(n).map(s=>{e.selection.setCursorLocation(s.dom,IB(s))})}},HB=e=>rr(e,dy),my=e=>aa(e,dy),WB=(e,t)=>my(t).each(n=>{const s=e.selection.getBookmark();ko(n),e.selection.moveToBookmark(s)}),VB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},bc=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},jB=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!lr(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},gy=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class bn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new bn(t,VB[t]||1);return n&&ct(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!de(t))return oe(t)&&ct(t,(r,i)=>{s.attr(i,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new bn(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=bc(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=bc(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let i=r.firstChild;if(gy(r))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||gy(i))return!1}if(i.type===8||i.type===3&&!jB(i)||i.type===3&&i.parent&&n[i.parent.name]&&lr((o=i.value)!==null&&o!==void 0?o:"")||s&&s(i))return!1}while(i=bc(i,r));return!0}walk(t){return bc(this,null,t)}}const qB=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),py=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&qB(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},KB=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){Xt(c[2],"--")?a=py(t,!1,c.index+3):a=py(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const u=o.exec(t);if(es(u)||u.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Fe(r,c[2])||(i+=1),a=s.lastIndex+u[0].length;break}}return a},GB=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},hy=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=GB(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let u;r[i[1]]?u=a:u=KB(s,o,a),o=o.substring(0,a-c)+o.substring(u),n.lastIndex=a-c}return uo(o)},YB=hy,XB=(e,t)=>{const n=Rn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},QB=(e,t)=>{const n=e.getDoc(),s=So(x.fromDom(e.getBody())),o=x.fromTag("div",n);Vt(o,"data-mce-bogus","all"),kl(o,{position:"fixed",left:"-9999999px",top:"0"}),Al(o,t.innerHTML);const r=gn(o,"[data-mce-bogus]");R(r,c=>{ns(c,"data-mce-bogus")==="all"?Ct(c):ir(c)?(Un(c,x.fromText(Qr)),Ct(c)):ko(c)});const i=hA(s);Ut(i,o);const a=uo(o.dom.innerText);return Ct(o),a},ZB=(e,t,n)=>{let s;return t.format==="raw"?s=Q.trim(YB(e.serializer,n.innerHTML)):t.format==="text"?s=QB(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=XB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Bl(x.fromDom(n))&&de(s)?Q.trim(s):s},JB=(e,t)=>b.from(e.getBody()).fold(K(t.format==="tree"?new bn("body",11):""),n=>ZB(e,t,n)),by=Q.makeMap,vy=e=>{const t=[];e=e||{};const n=e.indent,s=by(e.indent_before||""),o=by(e.indent_after||""),r=To.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,u)=>{if(n&&s[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",a),c)for(let d=0,p=c.length;d<p;d++){const g=c[d];t.push(" ",g.name,'="',r(g.value,!0),'"')}if(!u||i?t[t.length]=">":t[t.length]=" />",u&&n&&o[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Fo=(e={},t=Ro())=>{const n=vy(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{var u;n.text((u=c.value)!==null&&u!==void 0?u:"",c.raw)},8:c=>{var u;n.comment((u=c.value)!==null&&u!==void 0?u:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var u;n.doctype((u=c.value)!==null&&u!==void 0?u:"")},4:c=>{var u;n.cdata((u=c.value)!==null&&u!==void 0?u:"")},11:c=>{let u=c;if(u=u.firstChild)do a(u);while(u=u.next)}};n.reset();const a=c=>{var u;const d=i[c.type];if(d)d(c);else{const p=c.name,g=p in t.getVoidElements();let y=c.attributes;if(r&&y&&y.length>1){const _=[];_.map={};const C=t.getElementRule(c.name);if(C){for(let w=0,S=C.attributesOrder.length;w<S;w++){const k=C.attributesOrder[w];if(k in y.map){const A=y.map[k];_.map[k]=A,_.push({name:k,value:A})}}for(let w=0,S=y.length;w<S;w++){const k=y[w].name;if(!(k in _.map)){const A=y.map[k];_.map[k]=A,_.push({name:k,value:A})}}y=_}}if(n.start(p,y,g),!g){let _=c.firstChild;if(_){(p==="pre"||p==="textarea")&&_.type===3&&((u=_.value)===null||u===void 0?void 0:u[0])===`
`&&n.text(`
`,!0);do a(_);while(_=_.next)}n.end(p)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},Cy=new Set;R(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Cy.add(t)});const yy=["font","text-decoration","text-emphasis"],Fd=(e,t)=>$n(e.parseStyle(e.getAttrib(t,"style"))),eI=e=>Cy.has(e),tI=(e,t)=>tt(Fd(e,t),n=>!eI(n)),nI=e=>j(e,t=>Y(yy,n=>Xt(t,n))),sI=(e,t,n)=>{const s=Fd(e,t),o=Fd(e,n),r=i=>{var a,c;const u=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Os(u)&&Os(d)&&u!==d};return Y(s,i=>{const a=c=>Y(c,u=>u===i);if(!a(o)&&a(yy)){const c=nI(o);return Y(c,r)}else return r(i)})},Ey=(e,t,n)=>b.from(n.container()).filter(X).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),$d=re(Ey,!0,ui),Ld=re(Ey,!1,ui),oI=e=>{const t=e.container();return X(t)&&(t.data.length===0||Il(t.data)&&Pa.isBookmarkNode(t.parentNode))},$o=(e,t)=>n=>ed(e?0:-1,n).filter(t).isSome(),_y=e=>tb(e)&&Is(x.fromDom(e),"display")==="block",wy=e=>bt(e)&&!$A(e),rI=$o(!0,_y),iI=$o(!1,_y),Ba=$o(!0,$s),Ia=$o(!1,$s),Sy=$o(!0,co),xy=$o(!1,co),Lo=$o(!0,wy),Mo=$o(!1,wy),aI=e=>e.slice(0,-1),lI=(e,t,n)=>ao(t,e)?aI(dA(e,s=>n(s)||nt(s,t))):[],ky=(e,t)=>lI(e,t,Ze),go=(e,t)=>[e].concat(ky(e,t)),Md=(e,t,n)=>eC(e,t,n,oI),Ny=(e,t)=>ve(go(x.fromDom(t.container()),e),us),Ay=(e,t,n)=>Md(e,t.dom,n).forall(s=>Ny(t,n).fold(()=>!Ms(s,n,t.dom),o=>!Ms(s,n,t.dom)&&ao(o,x.fromDom(s.container())))),Ty=(e,t,n)=>Ny(t,n).fold(()=>Md(e,t.dom,n).forall(s=>!Ms(s,n,t.dom)),s=>Md(e,s.dom,n).isNone()),Ud=re(Ty,!1),Ry=re(Ty,!0),cI=re(Ay,!1),uI=re(Ay,!0),fI=e=>Jl(e).exists(ir),vc=(e,t,n)=>{const s=j(go(x.fromDom(n.container()),t),us),o=Jt(s).getOr(t);return Hn(e,o.dom,n).filter(fI)},zd=(e,t)=>Jl(t).exists(ir)||vc(!0,e,t).isSome(),Hd=(e,t)=>WP(t).exists(ir)||vc(!1,e,t).isSome(),dI=re(vc,!1),mI=re(vc,!0),Py=e=>L.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Oy=(e,t)=>{const n=j(go(x.fromDom(t.container()),e),us);return Jt(n).getOr(e)},Dy=(e,t)=>Py(t)?Ld(t):Ld(t)||Wn(Oy(e,t).dom,t).exists(Ld),By=(e,t)=>Py(t)?$d(t):$d(t)||Sn(Oy(e,t).dom,t).exists($d),gI=e=>z(["pre","pre-wrap"],e),Wd=e=>Jl(e).bind(t=>Xr(t,ts)).exists(t=>gI(Is(t,"white-space"))),pI=(e,t)=>Wn(e.dom,t).isNone(),hI=(e,t)=>Sn(e.dom,t).isNone(),bI=(e,t)=>pI(e,t)||hI(e,t)||Ud(e,t)||Ry(e,t)||Hd(e,t)||zd(e,t),vI=e=>oe(e)&&bt(e)&&zv(e),Iy=(e,t)=>n=>vI(new Ft(n,e)[t]()),CI=(e,t)=>{const n=Sn(e.dom,t).getOr(t),s=Iy(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},yI=(e,t)=>{const n=Wn(e.dom,t).getOr(t),s=Iy(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},EI=(e,t)=>Wd(t)?!1:bI(e,t)||Dy(e,t)||By(e,t),Fa=(e,t)=>Wd(t)?!1:Ud(e,t)||cI(e,t)||Hd(e,t)||Dy(e,t)||yI(e,t),_I=e=>{const t=e.container(),n=e.offset();return X(t)&&n<t.data.length?L(t,n+1):e},$a=(e,t)=>Wd(t)?!1:Ry(e,t)||uI(e,t)||zd(e,t)||By(e,t)||CI(e,t),Vd=(e,t)=>Fa(e,t)||$a(e,_I(t)),Fy=(e,t)=>oc(e.charAt(t)),$y=(e,t)=>ui(e.charAt(t)),wI=e=>{const t=e.container();return X(t)&&en(t.data,jt)},SI=e=>{const t=e.split("");return V(t,(n,s)=>oc(n)&&s>0&&s<t.length-1&&ad(t[s-1])&&ad(t[s+1])?" ":n).join("")},Ly=(e,t,n)=>{const s=t.data,o=L(t,0);return!n&&Fy(s,0)&&!Vd(e,o)?(t.data=" "+s.slice(1),!0):n&&$y(s,0)&&Fa(e,o)?(t.data=jt+s.slice(1),!0):!1},xI=e=>{const t=e.data,n=SI(t);return n!==t?(e.data=n,!0):!1},My=(e,t,n)=>{const s=t.data,o=L(t,s.length-1);return!n&&Fy(s,s.length-1)&&!Vd(e,o)?(t.data=s.slice(0,-1)+" ",!0):n&&$y(s,s.length-1)&&$a(e,o)?(t.data=s.slice(0,-1)+jt,!0):!1},kI=(e,t)=>{const n=t.container();if(!X(n))return b.none();if(wI(t)){const s=Ly(e,n,!1)||xI(n)||My(e,n,!1);return Xi(s,t)}else if(Vd(e,t)){const s=Ly(e,n,!0)||My(e,n,!0);return Xi(s,t)}else return b.none()},NI=e=>{const t=x.fromDom(e.getBody());e.selection.isCollapsed()&&kI(t,L.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},Uy=(e,t,n)=>{if(n===0)return;const s=x.fromDom(e),o=Yr(s,us).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&$a(o,L(e,e.data.length)),a=t===0&&Fa(o,L(e,0));e.replaceData(t,n,Cb(r,4,a,i))},Cc=(e,t)=>{const n=e.data.slice(t),s=n.length-DN(n).length;Uy(e,t,s)},jd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-Jp(n).length;Uy(e,t-s,s)},qd=(e,t,n,s=!0)=>{const o=Jp(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),Ct(x.fromDom(i)),n&&Cc(r,o),r},AI=(e,t)=>{const n=e.container(),s=e.offset();return!L.isTextPosition(e)&&n===t.parentNode&&s>L.before(t).offset()},TI=(e,t)=>AI(t,e)?L(t.container(),t.offset()-1):t,RI=e=>X(e)?L(e,0):L.before(e),PI=e=>X(e)?L(e,e.data.length):L.after(e),zy=e=>ss(e.previousSibling)?b.some(PI(e.previousSibling)):e.previousSibling?Hs(e.previousSibling):b.none(),Hy=e=>ss(e.nextSibling)?b.some(RI(e.nextSibling)):e.nextSibling?hn(e.nextSibling):b.none(),OI=(e,t)=>b.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>Wn(e,L.before(n))).orThunk(()=>Sn(e,L.after(t))),DI=(e,t)=>Sn(e,L.after(t)).orThunk(()=>Wn(e,L.before(t))),BI=(e,t)=>zy(t).orThunk(()=>Hy(t)).orThunk(()=>OI(e,t)),II=(e,t)=>Hy(t).orThunk(()=>zy(t)).orThunk(()=>DI(e,t)),FI=(e,t,n)=>e?II(t,n):BI(t,n),$I=(e,t,n)=>FI(e,t,n).map(re(TI,n)),Wy=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},LI=e=>t=>t.dom===e,MI=(e,t)=>t&&Fe(e.schema.getBlockElements(),_t(t)),UI=e=>{if(qt(e)){const t=x.fromHtml('<br data-mce-bogus="1">');return oa(e),Ut(e,t),b.some(L.before(t.dom))}else return b.none()},zI=(e,t,n)=>{const s=tr(e).filter(Ln),o=sa(e).filter(Ln);return Ct(e),XN(s,o,t,(r,i,a)=>{const c=r.dom,u=i.dom,d=c.data.length;return qd(c,u,n),a.container()===u?L(c,d):a}).orThunk(()=>(n&&(s.each(r=>jd(r.dom,r.dom.length)),o.each(r=>Cc(r.dom,0))),t))},HI=(e,t)=>Fe(e.schema.getTextInlineElements(),_t(t)),Er=(e,t,n,s=!0)=>{const o=$I(t,e.getBody(),n.dom),r=Yr(n,re(MI,e),LI(e.getBody())),i=zI(n,o,HI(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(UI).fold(()=>{s&&Wy(e,t,i)},a=>{s&&Wy(e,t,b.some(a))})},WI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,VI=e=>WI.test(e),_r=(e,t)=>ls(x.fromDom(t),T1(e)),jI=e=>{var t;return rt.DOM.getStyle(e,"direction",!0)==="rtl"||VI((t=e.textContent)!==null&&t!==void 0?t:"")},qI=(e,t,n)=>j(rt.DOM.getParents(n.container(),"*",t),e),Uo=(e,t,n)=>{const s=qI(e,t,n);return b.from(s[s.length-1])},KI=(e,t,n)=>{const s=Bo(t,e),o=Bo(n,e);return oe(s)&&s===o},GI=e=>Sf(e)||xf(e),Kn=(e,t)=>{const n=t.container(),s=t.offset();return e?ei(n)?X(n.nextSibling)?L(n.nextSibling,0):L.after(n):Sf(t)?L(n,s+1):t:ei(n)?X(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):xf(t)?L(n,s-1):t},Vy=re(Kn,!0),jy=re(Kn,!1),qy=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},YI=e=>{e.execCommand("delete")},Ky=e=>qy(e,"Delete"),XI=e=>qy(e,"ForwardDelete"),QI=e=>t=>qr(Mn(t),e,nt),ZI=e=>sT(e)||la(e),yc=(e,t)=>ao(e,t)?Xr(t,ZI,QI(e)):b.none(),Kd=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},JI=(e,t,n)=>mn(hn(n),Hs(n),(s,o)=>{const r=Kn(!0,s),i=Kn(!1,o),a=Kn(!1,t);return e?Sn(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):Wn(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),Gy=e=>(QN(e)?tr(e):df(e)).bind(Gy).orThunk(()=>b.some(e)),Yy=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=Gy(n).getOr(n),i=x.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?Kd(e,s):qt(i)&&(ar(i),s&&e.selection.setCursorLocation(i.dom,0)),!nt(n,i)){const a=qr(Mn(i),n)?[]:mA(i);R(a.concat(nn(n)),c=>{!nt(c,i)&&!ao(c,i)&&qt(c)&&Ct(c)})}},eF=e=>t=>nt(e,t),Gd=e=>gn(e,"td,th"),tF=(e,t)=>{const n=u=>Aa(x.fromDom(u),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=mn(s,o,nt).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Yd=(e,t)=>({start:e,end:t}),nF=(e,t,n)=>({rng:e,table:t,cells:n}),La=Ls.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ec=(e,t)=>rr(x.fromDom(e),"td,th",t),Xy=e=>!nt(e.start,e.end),Qy=(e,t)=>Aa(e.start,t).bind(n=>Aa(e.end,t).bind(s=>Xi(nt(n,s),n))),sF=(e,t)=>!Xy(e)&&Qy(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),oF=(e,t)=>{const n=Ec(e.startContainer,t),s=Ec(e.endContainer,t);return mn(n,s,Yd)},rF=e=>t=>Aa(t,e).bind(n=>Mt(Gd(n)).map(s=>Yd(t,s))),iF=e=>t=>Aa(t,e).bind(n=>Jt(Gd(n)).map(s=>Yd(s,t))),Xd=e=>t=>Qy(t,e).map(n=>nF(t,n,Gd(n))),Zy=(e,t,n,s)=>{if(n.collapsed||!e.forall(Xy))return b.none();if(t.isSameTable){const o=e.bind(Xd(s));return b.some({start:o,end:o})}else{const o=Ec(n.startContainer,s),r=Ec(n.endContainer,s),i=o.bind(rF(s)).bind(Xd(s)),a=r.bind(iF(s)).bind(Xd(s));return b.some({start:i,end:a})}},Jy=(e,t)=>Le(e,n=>nt(n,t)),Qd=e=>mn(Jy(e.cells,e.rng.start),Jy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),aF=(e,t,n)=>e.exists(s=>sF(s,n)&&fd(s.start,t)),e0=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},lF=(e,t,n,s)=>Zy(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=Qd(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(La.fullTable(o.table));if(i.length>0){if(r)return b.some(La.partialTable(i,b.none()));{const a=e0(n,t);return b.some(La.partialTable(i,b.some({...t,rng:a})))}}else return b.none()}),cF=(e,t,n,s)=>Zy(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(Qd).getOr([]),a=r.bind(Qd).getOr([]);if(i.length>0&&a.length>0){const c=e0(n,t);return b.some(La.multiTable(i,a,c))}else return b.none()}),uF=(e,t)=>{const n=eF(e),s=oF(t,n),o=tF(t,n);return aF(s,t,n)?s.map(r=>La.singleCellTable(t,r.start)):o.isMultiTable?cF(s,o,t,n):lF(s,o,t,n)},t0=e=>R(e,t=>{tn(t,"contenteditable"),ar(t)}),fF=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(x.fromDom),dF=(e,t,n)=>{n.each(s=>{t?Ct(s):(ar(s),e.selection.setCursorLocation(s.dom,0))})},Zd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Jd(e,o,t,!1).each(r=>r())},n0=e=>{const t=fi(e),n=x.fromDom(e.selection.getNode());Ol(n.dom)&&qt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Y(t,s=>nt(s,n))&&Vt(n,"data-mce-selected","1")},s0=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=fF(e,i?r.endContainer:r.startContainer);r.deleteContents(),dF(e,i,a.filter(qt));const c=i?t[0]:t[t.length-1];return Zd(e,c,s,i),qt(c)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);t0(o),n0(e)}),mF=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Zd(e,r,o,!0),Zd(e,i,o,!1);const a=qt(r)?t:t.slice(1),c=qt(i)?n:n.slice(0,-1);t0(a.concat(c)),s.deleteContents(),n0(e)}),Jd=(e,t,n,s=!0)=>b.some(()=>{Yy(e,t,n,s)}),gF=(e,t)=>b.some(()=>Er(e,!1,t)),pF=(e,t,n)=>uF(t,n).bind(s=>s.fold(re(Jd,e),re(gF,e),re(s0,e),re(mF,e))),hF=(e,t)=>_c(e,t),bF=(e,t,n,s)=>em(t,s).fold(()=>pF(e,t,n),o=>hF(e,o)),vF=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?s0(e,n,b.none()):bF(e,s,o,t)},o0=(e,t)=>ve(go(t,e),Dl),em=(e,t)=>ve(go(t,e),cf("caption")),CF=(e,t,n,s,o)=>nc(n,e.getBody(),o).bind(r=>o0(t,x.fromDom(r.getNode())).bind(i=>nt(i,s)?b.none():b.some($e))),_c=(e,t)=>b.some(()=>{ar(t),e.selection.setCursorLocation(t.dom,0)}),yF=(e,t,n,s)=>hn(e.dom).bind(o=>Hs(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),EF=(e,t)=>_c(e,t),_F=(e,t,n)=>em(e,x.fromDom(n.getNode())).fold(()=>b.some($e),s=>Xi(!nt(s,t),$e)),wF=(e,t,n,s,o)=>nc(n,e.getBody(),o).fold(()=>b.some($e),r=>yF(s,n,o,r)?EF(e,s):_F(t,s,r)),SF=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return o0(n,s).bind(r=>qt(r)?_c(e,r):CF(e,n,t,r,o))},xF=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return qt(s)?_c(e,s):wF(e,n,t,s,o)},r0=(e,t)=>e?Sy(t):xy(t),kF=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return r0(t,n)||Hn(t,e.getBody(),n).exists(s=>r0(t,s))},NF=(e,t,n)=>{const s=x.fromDom(e.getBody());return em(s,n).fold(()=>SF(e,t,s,n).orThunk(()=>Xi(kF(e,t),$e)),o=>xF(e,t,s,o))},tm=(e,t)=>{const n=x.fromDom(e.selection.getStart(!0)),s=fi(e);return e.selection.isCollapsed()&&s.length===0?NF(e,t,n):vF(e,n,s)},wr=(e,t)=>{let n=t;for(;n&&n!==e;){if(Fs(n)||bt(n))return n;n=n.parentNode}return null},AF=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],TF=Q.each,nm=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,i)=>{if(r.nodeName!==i.nodeName||r.nodeType!==i.nodeType)return!1;const a=u=>{const d={};return TF(t.getAttribs(u),p=>{const g=p.nodeName.toLowerCase();g!=="style"&&!o(g)&&(d[g]=t.getAttrib(u,g))}),d},c=(u,d)=>{for(const p in u)if(Fe(u,p)){const g=d[p];if(Yt(g)||u[p]!==g)return!1;delete d[p]}for(const p in d)if(Fe(d,p))return!1;return!0};return ce(r)&&ce(i)&&(!c(a(r),a(i))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style"))))?!1:!Vn(r)&&!Vn(i)},o=r=>Y(AF,i=>Xt(r,i))||n.has(r);return{compare:s,isAttributeInternal:o}},RF=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},i0=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const u=s.attributes[c];u?u.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},PF=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&RF(n,o=>{i0(e,t,o,s)}),s},a0=(e,t)=>{const n=(s,o)=>{ct(s,r=>{const i=Et(r.nodes);R(r.filter.callbacks,a=>{for(let c=i.length-1;c>=0;c--){const u=i[c];(!(o?u.attr(r.filter.name)!==void 0:u.name===r.filter.name)||lt(u.parent))&&i.splice(c,1)}i.length>0&&a(i,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},l0=(e,t,n,s={})=>{const o=PF(e,t,n);a0(o,s)},sm=(e,t,n,s)=>{if(t.insert&&n[s.name]){const o=new bn("br",1);o.attr("data-mce-bogus","1"),s.empty().append(o)}else s.empty().append(new bn("#text",3)).value=jt},OF=e=>{var t;return c0(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===jt},c0=(e,t)=>{const n=e==null?void 0:e.firstChild;return oe(n)&&n===e.lastChild&&n.name===t},DF=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},Ma=(e,t,n,s)=>s.isEmpty(t,n,o=>DF(e,o)),BF=(e,t)=>oe(e)&&(e.name in t||e.name==="br"),om=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&om(o,t,n);e.unwrap()}},rm=(e,t,n=$e)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=Q.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const u=e[c];let d,p,g;if(!u.parent||a.has(u))continue;if(s[u.name]&&u.parent.name==="li"){let _=u.next;for(;_&&s[_.name];){_.name="li",a.add(_),u.parent.insert(_,u.parent);_=_.next}u.unwrap();continue}const y=[u];for(d=u.parent;d&&!t.isValidChild(d.name,u.name)&&!i[d.name];d=d.parent)y.push(d);if(d&&y.length>1)if(t.isValidChild(d.name,u.name)){y.reverse(),p=y[0].clone(),n(p);let _=p;for(let C=0;C<y.length-1;C++){t.isValidChild(_.name,y[C].name)?(g=y[C].clone(),n(g),_.append(g)):g=_;for(let w=y[C].firstChild;w&&w!==y[C+1];){const S=w.next;g.append(w),w=S}_=g}Ma(t,o,r,p)?d.insert(u,y[0],!0):(d.insert(p,y[0],!0),d.insert(u,p)),d=y[0],(Ma(t,o,r,d)||c0(d,"br"))&&d.empty().remove()}else om(u,t);else if(u.parent){if(u.name==="li"){let _=u.prev;if(_&&(_.name==="ul"||_.name==="ol")){_.append(u);continue}if(_=u.next,_&&(_.name==="ul"||_.name==="ol")&&_.firstChild){_.insert(u,_.firstChild,!0);continue}const C=new bn("ul",1);n(C),u.wrap(C);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const _=new bn("div",1);n(_),u.wrap(_)}else om(u,t)}}},IF=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},FF=e=>{const t=L.fromRangeStart(e),n=L.fromRangeEnd(e),s=e.commonAncestorContainer;return Hn(!1,s,n).map(o=>!Ms(t,n,s)&&Ms(t,o,s)?IF(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},im=e=>e.collapsed?e:FF(e),$F=e=>oe(e.firstChild)&&e.firstChild===e.lastChild,LF=e=>e.name==="br"||e.value===jt,MF=(e,t)=>e.getBlockElements()[t.name]&&$F(t)&&LF(t.firstChild),UF=(e,t)=>{const n=e.getNonEmptyElements();return oe(t)&&(t.isEmpty(n)||MF(e,t))},zF=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),UF(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},HF=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},WF=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return HF(o)},VF=e=>{var t;return j((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},jF=e=>e.data===jt||Pt(e),qF=e=>oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&jF(e.firstChild),KF=e=>!e.firstChild||qF(e),GF=e=>e.length>0&&KF(e[e.length-1])?e.slice(0,-1):e,am=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},YF=(e,t)=>!!am(e,t),XF=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},QF=(e,t)=>{const n=L.before(e),o=zs(t).next(n);return o?o.toRange():null},u0=(e,t)=>{const n=L.after(e),o=zs(t).prev(n);return o?o.toRange():null},ZF=(e,t,n,s)=>{const o=XF(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),Q.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e)),u0(t[t.length-1],n)},JF=(e,t,n)=>{const s=e.parentNode;return s&&Q.each(t,o=>{s.insertBefore(o,e)}),QF(e,n)},e$=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),u0(t[0],n)),t$=(e,t,n,s)=>{const o=WF(t,e,s),r=am(t,n.startContainer),i=GF(VF(o.firstChild)),a=1,c=2,u=t.getRoot(),d=p=>{const g=L.fromRangeStart(n),y=zs(t.getRoot()),_=p===a?y.prev(g):y.next(g),C=_==null?void 0:_.getNode();return C?am(t,C)!==r:!0};return r?d(a)?JF(r,i,u):d(c)?e$(r,i,u,t):ZF(r,i,u,n):null},n$=["pre"],s$=(e,t,n,s)=>{var o;const r=t.firstChild,i=t.lastChild,a=i.attr("data-mce-type")==="bookmark"?i.prev:i,c=r===a,u=z(n$,r.name);if(c&&u){const d=r.attr("contenteditable")!=="false",p=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,g=b.from(wr(s,n)).forall(Fs);return d&&p&&g}else return!1},lm=Ol,o$=(e,t,n)=>{if(oe(n)){const s=e.getParent(t.endContainer,lm);return n===s&&fd(x.fromDom(n),t)}else return!1},r$=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},i$=(e,t)=>{b.from(e.getParent(t,"td,th")).map(x.fromDom).each(uT)},a$=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=nm(e);Q.each(s.select("*[data-mce-fragment]"),i=>{if(oe(n[i.nodeName.toLowerCase()])&&tI(s,i)){for(let c=i.parentElement;oe(c)&&c!==o&&!sI(s,i,c);c=c.parentElement)if(r.compare(c,i)){s.remove(i,!0);break}}})}},l$=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},c$=e=>{Q.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},u$=e=>!!e.getAttribute("data-mce-fragment"),f$=(e,t)=>oe(t)&&!e.schema.getVoidElements()[t.nodeName],d$=(e,t)=>{var n,s,o;let r;const i=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);const c=wr(e.getBody(),t);if(c&&i.getContentEditable(c)==="false"){i.remove(t),a.select(c);return}let u=i.createRng();const d=t.previousSibling;if(X(d)){u.setStart(d,(s=(n=d.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const y=t.nextSibling;X(y)&&(d.appendData(y.data),(o=y.parentNode)===null||o===void 0||o.removeChild(y))}else u.setStartBefore(t),u.setEndBefore(t);const p=y=>{let _=L.fromRangeStart(y);return _=zs(e.getBody()).next(_),_==null?void 0:_.toRange()},g=i.getParent(t,i.isBlock);i.remove(t),g&&i.isEmpty(g)&&(oa(x.fromDom(g)),u.setStart(g,0),u.setEnd(g,0),!lm(g)&&!u$(g)&&(r=p(u))?(u=r,i.remove(g)):i.add(g,i.create("br",{"data-mce-bogus":"1"}))),a.setRng(u)},m$=e=>{const t=e.dom,n=im(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,lm);o$(t,n,s)?Jd(e,n,x.fromDom(s)):e.getDoc().execCommand("Delete",!1)},g$=(e,t,n)=>{var s,o,r;const i=e.selection,a=e.dom,c=e.parser,u=n.merge,d=Fo({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p);let g=i.getRng();const y=g.startContainer,_=e.getBody();y===_&&i.isCollapsed()&&a.isBlock(_.firstChild)&&f$(e,_.firstChild)&&a.isEmpty(_.firstChild)&&(g=a.createRng(),g.setStart(_.firstChild,0),g.setEnd(_.firstChild,0),i.setRng(g)),i.isCollapsed()||m$(e);const C=i.getNode(),w={context:C.nodeName.toLowerCase(),data:n.data,insert:!0},S=c.parse(t,w);if(n.paste===!0&&zF(e.schema,S)&&YF(a,C))return g=t$(d,a,i.getRng(),S),g&&i.setRng(g),t;n.paste===!0&&s$(a,S,C,e.getBody())&&((s=S.firstChild)===null||s===void 0||s.unwrap()),l$(S);let k=S.lastChild;if(k&&k.attr("id")==="mce_marker"){const A=k;for(k=k.prev;k;k=k.walk(!0))if(k.type===3||!a.isBlock(k.name)){k.parent&&e.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(A,k,k.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(C),!w.invalid)t=d.serialize(S),r$(e,t,C);else{e.selection.setContent(p);let A=i.getNode(),M;const H=e.getBody();for(ra(A)?A=M=H:M=A;M&&M!==H;)A=M,M=M.parentNode;t=A===H?H.innerHTML:a.getOuterHTML(A);const J=c.parse(t);for(let ee=J;ee;ee=ee.walk())if(ee.attr("id")==="mce_marker"){ee.replace(S);break}const W=S.children(),F=(r=(o=S.parent)===null||o===void 0?void 0:o.name)!==null&&r!==void 0?r:J.name;S.unwrap();const $=j(W,ee=>!e.schema.isValidChild(F,ee.name));rm($,e.schema),l0(c.getNodeFilters(),c.getAttributeFilters(),J),t=d.serialize(J),A===H?a.setHTML(H,t):a.setOuterHTML(A,t)}return a$(e,u),d$(e,a.get("mce_marker")),c$(e.getBody()),i$(a,i.getStart()),t},wc=e=>e instanceof bn,p$=e=>{yr(e)&&hn(e.getBody()).each(t=>{const n=t.getNode(),s=co(n)?hn(n).getOr(t):t;e.selection.setRng(s.toRange())})},cm=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&p$(e)},h$=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Rn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ya(e),n)):n||(n=o),cm(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Fo({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Bl(x.fromDom(t))?n:Q.trim(n);return cm(e,o,s.no_selection),{content:o,html:o}}},b$=(e,t,n,s)=>{l0(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Fo({validate:!1},e.schema).serialize(n),r=Bl(x.fromDom(t))?o:Q.trim(o);return cm(e,r,s.no_selection),{content:n,html:r}},v$=(e,t,n)=>b.from(e.getBody()).map(s=>wc(t)?b$(e,s,t,n):h$(e,s,t,n)).getOr({content:t,html:wc(n.content)?"":n.content}),C$=(e,t)=>VA(e,t).isSome(),f0=e=>He(e)?e:Ze,y$=(e,t,n)=>{let s=e.dom;const o=f0(n);for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},um=(e,t,n)=>{const s=t(e),o=f0(n);return s.orThunk(()=>o(e)?b.none():y$(e,t,o))},fm=bd,d0=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(jn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},dm=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const i=e.dom.getParent(t,a=>d0(e,a,n)?!0:a.parentNode===r||!!Vs(e,a,n,s,!0));return!!Vs(e,i,n,s,o)},Sc=(e,t,n)=>Wt(n)&&fm(t,n.inline)||Ws(n)&&fm(t,n.block)?!0:jn(n)?ce(t)&&e.is(t,n.selector):!1,m0=(e,t,n,s,o,r)=>{const i=n[s],a=s==="attributes";if(He(n.onmatch))return n.onmatch(t,n,s);if(i){if(Kp(i)){for(let c=0;c<i.length;c++)if(a?e.getAttrib(t,i[c]):ac(e,t,i[c]))return!0}else for(const c in i)if(Fe(i,c)){const u=a?e.getAttrib(t,c):ac(e,t,c),d=Io(i[c],r),p=lt(u)||Yi(u);if(p&&lt(d))continue;if(o&&p&&!n.exact||(!o||n.exact)&&!fm(u,vd(d,c)))return!1}}return!0},Vs=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&ce(t))for(let a=0;a<r.length;a++){const c=r[a];if(Sc(e.dom,t,c)&&m0(i,t,c,"attributes",o,s)&&m0(i,t,c,"styles",o,s)){const u=c.classes;if(u){for(let d=0;d<u.length;d++)if(!e.dom.hasClass(t,Io(u[d],s)))return}return c}}},mm=(e,t,n,s,o)=>{if(s)return dm(e,s,t,n,o);if(s=e.selection.getNode(),dm(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&dm(e,r,t,n,o))},E$=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Vs(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},_$=(e,t)=>{const n=o=>nt(o,x.fromDom(e.getBody())),s=(o,r)=>Vs(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>um(x.fromDom(o),r=>oo(t,i=>s(r,i)),n)).getOrNull()},w$=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=lc(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!jn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},S$=(e,t,n)=>Ee(n,(s,o)=>{const r=xO(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),vi=Qt,x$=(e,t)=>e.importNode(t,!0),k$=e=>{const t=[];let n=e;for(;n;){if(X(n)&&n.data!==vi||n.childNodes.length>1)return[];ce(n)&&t.push(n),n=n.firstChild}return t},g0=e=>k$(e).length>0,p0=e=>{if(e){const t=new Ft(e,e);for(let n=t.current();n;n=t.next())if(X(n))return n}return null},gm=e=>{const t=x.fromTag("span");return wo(t,{id:rd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ut(t,x.fromText(vi)),t},N$=e=>{const t=p0(e);return t&&t.data.charAt(0)===vi&&t.deleteData(0,1),t},pm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(g0(t))Er(e,!1,x.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,u=r.endContainer,d=r.endOffset,p=N$(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),u===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&ar(x.fromDom(i)),o.setRng(r)}},hm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)pm(e,t,n);else if(t=br(e.getBody(),o.getStart()),!t)for(;t=s.get(rd);)pm(e,t,!1)},A$=(e,t,n)=>{var s,o;const r=e.dom,i=r.getParent(n,re(pd,e));i&&r.isEmpty(i)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(cT(x.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},h0=(e,t)=>(e.appendChild(t),t),b0=(e,t)=>{var n;const s=se(e,(r,i)=>h0(r,i.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return h0(s,o.createTextNode(vi))},T$=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=j($n(i.get()),p=>p!==s&&!en(p,"removeformat")),u=S$(e,n,c);if(j(u,p=>!kO(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),b.some(p)}else return b.none()},R$=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const i=o.getRng();let a=i.startOffset;const u=i.startContainer.nodeValue;s=br(e.getBody(),o.getStart());const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&a>0&&a<u.length&&d.test(u.charAt(a))&&d.test(u.charAt(a-1))){const p=o.getBookmark();i.collapse(!0);let g=gi(e,i,r);g=pc(g),e.formatter.apply(t,n,g),o.moveToBookmark(p)}else{let p=s?p0(s):null;(!s||(p==null?void 0:p.data)!==vi)&&(s=x$(e.getDoc(),gm(!0).dom),p=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),o.setCursorLocation(p,a)}},P$=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const c=r.getRng(),u=c.startContainer,d=c.startOffset;let p=u;X(u)&&(d!==u.data.length&&(i=!0),p=p.parentNode);const g=[];let y;for(;p;){if(Vs(e,p,t,n,s)){y=p;break}p.nextSibling&&(i=!0),g.push(p),p=p.parentNode}if(!!y)if(i){const _=r.getBookmark();c.collapse(!0);let C=gi(e,c,a,!0);C=pc(C),e.formatter.remove(t,n,C,s),r.moveToBookmark(_)}else{const _=br(e.getBody(),y),C=gm(!1).dom;A$(e,C,_!=null?_:y);const w=T$(e,C,y,t,n,s),S=b0(g.concat(w.toArray()),C);_&&pm(e,_,!1),r.setCursorLocation(S,1),o.isEmpty(y)&&o.remove(y)}},O$=(e,t)=>{const n=e.selection,s=e.getBody();hm(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===vi&&hm(e,br(s,n.getStart())),(t===37||t===39)&&hm(e,br(s,n.getStart()))},D$=e=>{e.on("mouseup keydown",t=>{O$(e,t.keyCode)})},B$=(e,t)=>{const n=gm(!1),s=b0(t,n.dom);return Un(x.fromDom(e),n),Ct(x.fromDom(e)),L(s,0)},I$=(e,t)=>{const n=e.schema.getTextInlineElements();return Fe(n,_t(t))&&!ms(t.dom)&&!or(t.dom)},F$=e=>ms(e.dom)&&g0(e.dom),Ua={},v0=cs(["pre"]),$$=(e,t)=>{Ua[e]||(Ua[e]=[]),Ua[e].push(t)},L$=(e,t)=>{Fe(Ua,e)&&R(Ua[e],n=>{n(t)})};$$("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const i=r.previousSibling;return v0(i)&&z(o,i)},s=(o,r)=>{const i=x.fromDom(r),a=lo(i).dom;Ct(i),nr(x.fromDom(o),[x.fromTag("br",a),x.fromTag("br",a),...nn(i)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=j(j(o,v0),n(o));R(r,i=>{s(i.previousSibling,i)})}});const C0=["fontWeight","fontStyle","color","fontSize","fontFamily"],M$=e=>it(e.styles)&&Y($n(e.styles),t=>z(C0,t)),U$=e=>ve(e,t=>Wt(t)&&t.inline==="span"&&M$(t)),y0=(e,t)=>{const n=e.get(t);return St(n)?U$(n):b.none()},E0=(e,t)=>Wn(t,L.fromRangeStart(e)).isNone(),_0=(e,t)=>Sn(t,L.fromRangeEnd(e)).exists(n=>!Pt(n.getNode())||Sn(t,n).isSome())===!1,w0=e=>t=>UA(t)&&e.getContentEditableParent(t)!=="false",z$=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return E0(n,t[0])&&_0(n,t[0])?t:[];{const s=Jt(t).filter(i=>E0(n,i)).toArray(),o=Mt(t).filter(i=>_0(n,i)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},H$=e=>j(z$(e),w0(e.dom)),S0=e=>j(e.getSelectedBlocks(),w0(e.dom)),bm=Q.each,vm=e=>ce(e)&&!Vn(e)&&!ms(e)&&!or(e),x0=(e,t)=>{for(let n=e;n;n=n[t]){if(X(n)&&Os(n.data))return e;if(ce(n)&&!Vn(n))return n}return e},k0=(e,t,n)=>{const s=nm(e),o=ce(t)&&vr(t),r=ce(n)&&vr(n);if(o&&r){const i=x0(t,"previousSibling"),a=x0(n,"nextSibling");if(s.compare(i,a)){for(let c=i.nextSibling;c&&c!==a;){const u=c;c=c.nextSibling,i.appendChild(u)}return e.dom.remove(a),Q.each(Q.grep(a.childNodes),c=>{i.appendChild(c)}),i}}return n},N0=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=k0(e,mC(s),s))!==null&&o!==void 0?o:s;k0(e,r,mC(r,!0))}},W$=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";bm(e.select(s,n),o=>{vm(o)&&vr(o)&&bm(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},Cm=(e,t,n)=>{bm(e.childNodes,s=>{vm(s)&&(t(s)&&n(s),s.hasChildNodes()&&Cm(s,t,n))})},V$=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},A0=(e,t)=>n=>!!(n&&ac(e,n,t)),T0=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),V$(e,s)},Ci=Ls.generate([{keep:[]},{rename:["name"]},{removed:[]}]),j$=/^(src|href|style)$/,ym=Q.each,xc=bd,q$=e=>/^(TR|TH|TD)$/.test(e.nodeName),R0=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),P0=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(ce(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return X(s)&&n&&o>=s.data.length&&(s=new Ft(s,e.getBody()).next()||s),X(s)&&!n&&o===0&&(s=new Ft(s,e.getBody()).prev()||s),s},O0=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return q$(e)&&s?e.nodeName==="TR"&&s[n]||s:e},Em=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},D0=(e,t,n,s,o)=>{const r=x.fromDom(t),i=x.fromDom(e.create(s,o)),a=n?Fh(r):Ih(r);return nr(i,a),n?(Un(r,i),qh(i,r)):(xo(r,i),Ut(i,r)),i.dom},K$=(e,t)=>t.links&&e.nodeName==="A",G$=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Rn(e);Ws(n)&&s===r.getRoot()&&(!n.list_block||!xc(t,n.list_block))&&R(Et(t.childNodes),a=>{di(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=Em(r,a,i),r.setAttribs(o,ya(e))):o=null}),!(TO(n)&&!xc(n.inline,t))&&r.remove(t,!0)},B0=(e,t,n)=>dn(e)?{name:t,value:null}:{name:e,value:Io(t,n)},I0=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},F0=(e,t,n,s,o)=>{let r=!1;ym(n.styles,(i,a)=>{const{name:c,value:u}=B0(a,i,s),d=vd(u,c);(n.remove_similar||es(u)||!ce(o)||xc(ac(e,o,c),d))&&e.setStyle(t,c,""),r=!0}),r&&I0(e,t)},Y$=(e,t,n)=>{t==="removeformat"?R(S0(e.selection),s=>{R(C0,o=>e.dom.setStyle(s,o,"")),I0(e.dom,s)}):y0(e.formatter,t).each(s=>{R(S0(e.selection),o=>F0(e.dom,o,s,n,null))})},$0=(e,t,n,s,o)=>{const r=e.dom,i=nm(e);if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!Sc(r,s,t)&&!K$(s,t))return Ci.keep();const a=s,c=t.preserve_attributes;if(Wt(t)&&t.remove==="all"&&St(c)){const u=j(r.getAttribs(a),d=>z(c,d.name.toLowerCase()));if(r.removeAllAttribs(a),R(u,d=>r.setAttrib(a,d.name,d.value)),u.length>0)return Ci.rename("span")}if(t.remove!=="all"){F0(r,a,t,n,o),ym(t.attributes,(d,p)=>{const{name:g,value:y}=B0(p,d,n);if(t.remove_similar||es(y)||!ce(o)||xc(r.getAttrib(o,g),y)){if(g==="class"){const _=r.getAttrib(a,g);if(_){let C="";if(R(_.split(/\s+/),w=>{/mce\-\w+/.test(w)&&(C+=(C?" ":"")+w)}),C){r.setAttrib(a,g,C);return}}}if(j$.test(g)&&a.removeAttribute("data-mce-"+g),g==="style"&&cs(["li"])(a)&&r.getStyle(a,"list-style-type")==="none"){a.removeAttribute(g),r.setStyle(a,"list-style-type","none");return}g==="class"&&a.removeAttribute("className"),a.removeAttribute(g)}}),ym(t.classes,d=>{d=Io(d,n),(!ce(o)||r.hasClass(o,d))&&r.removeClass(a,d)});const u=r.getAttribs(a);for(let d=0;d<u.length;d++){const p=u[d].nodeName;if(!i.isAttributeInternal(p))return Ci.keep()}}return t.remove!=="none"?(G$(e,a,t),Ci.removed()):Ci.keep()},za=(e,t,n,s,o)=>$0(e,t,n,s,o).fold(Ze,r=>(e.dom.rename(s,r),!0),vt),X$=(e,t,n,s,o)=>{let r;return t.parentNode&&R(lc(e.dom,t.parentNode).reverse(),i=>{if(!r&&ce(i)&&i.id!=="_start"&&i.id!=="_end"){const a=Vs(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},Q$=(e,t,n,s)=>$0(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),Z$=(e,t,n,s,o,r,i,a)=>{var c,u;let d,p;const g=e.dom;if(n){const y=n.parentNode;for(let _=s.parentNode;_&&_!==y;_=_.parentNode){let C=g.clone(_,!1);for(let w=0;w<t.length&&(C=Q$(e,t[w],a,C),C!==null);w++);C&&(d&&C.appendChild(d),p||(p=C),d=C)}r&&(!i.mixed||!g.isBlock(n))&&(s=(c=g.split(n,s))!==null&&c!==void 0?c:s),d&&p&&((u=o.parentNode)===null||u===void 0||u.insertBefore(d,o),p.appendChild(o),Wt(i)&&N0(e,i,a,d))}return s},L0=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0],a=e.dom,c=e.selection,u=C=>{const w=X$(e,C,t,n,o);return Z$(e,r,w,C,C,!0,i,n)},d=C=>Vn(C)&&ce(C)&&(C.id==="_start"||C.id==="_end"),p=C=>Y(r,w=>za(e,w,n,C,C)),g=C=>{const w=Et(C.childNodes),k=p(C)||Y(r,H=>Sc(a,C,H)),A=C.parentNode;if(!k&&oe(A)&&yd(i)&&p(A),i.deep&&w.length)for(let H=0;H<w.length;H++)g(w[H]);R(["underline","line-through","overline"],H=>{ce(C)&&e.dom.getStyle(C,"text-decoration")===H&&C.parentNode&&pC(a,C.parentNode)===H&&za(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:H}},void 0,C)})},y=C=>{const w=a.get(C?"_start":"_end");if(w){let S=w[C?"firstChild":"lastChild"];return d(S)&&(S=S[C?"firstChild":"lastChild"]),X(S)&&S.data.length===0&&(S=C?w.previousSibling||w.nextSibling:w.nextSibling||w.previousSibling),a.remove(w,!0),S}else return null},_=C=>{let w,S,k=gi(e,C,r,C.collapsed);if(i.split){if(k=pc(k),w=P0(e,k,!0),S=P0(e,k),w!==S){if(w=O0(w,!0),S=O0(S,!1),R0(a,w,S)){const M=b.from(w.firstChild).getOr(w);u(D0(a,M,!0,"span",{id:"_start","data-mce-type":"bookmark"})),y(!0);return}if(R0(a,S,w)){const M=b.from(S.lastChild).getOr(S);u(D0(a,M,!1,"span",{id:"_end","data-mce-type":"bookmark"})),y(!1);return}w=Em(a,w,"span",{id:"_start","data-mce-type":"bookmark"}),S=Em(a,S,"span",{id:"_end","data-mce-type":"bookmark"});const A=a.createRng();A.setStartAfter(w),A.setEndBefore(S),Ra(a,A,M=>{R(M,H=>{!Vn(H)&&!Vn(H.parentNode)&&u(H)})}),u(w),u(S),w=y(!0),S=y()}else w=S=u(w);k.startContainer=w.parentNode?w.parentNode:w,k.startOffset=a.nodeIndex(w),k.endContainer=S.parentNode?S.parentNode:S,k.endOffset=a.nodeIndex(S)+1}Ra(a,k,A=>{R(A,g)})};if(s){if(Ta(s)){const C=a.createRng();C.setStartBefore(s),C.setEndAfter(s),_(C)}else _(s);PC(e,t,s,n);return}!c.isCollapsed()||!Wt(i)||fi(e).length?(dC(e,()=>md(e,_),C=>Wt(i)&&mm(e,t,n,C)),e.nodeChanged()):P$(e,t,n,o),Y$(e,t,n),PC(e,t,s,n)},M0=Q.each,J$=(e,t,n,s)=>{const o=r=>{if(ce(r)&&ce(r.parentNode)&&vr(r)){const i=pC(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Q.walk(s,o,"childNodes"),o(s))},eL=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=A0(e,"fontSize");Cm(s,r=>o(r)&&vr(r),T0(e,"backgroundColor",Io(t.styles.backgroundColor,n)))}},tL=(e,t,n,s)=>{if(Wt(t)&&(t.inline==="sub"||t.inline==="sup")){const o=A0(e,"fontSize");Cm(s,i=>o(i)&&vr(i),T0(e,"fontSize",""));const r=j(e.select(t.inline==="sup"?"sub":"sup",s),vr);e.remove(r,!0)}},nL=(e,t,n,s)=>{M0(t,o=>{Wt(o)&&M0(e.dom.select(o.inline,s),r=>{vm(r)&&za(e,o,n,r,o.exact?r:null)}),W$(e.dom,o,s)})},sL=(e,t,n,s,o)=>{const r=o.parentNode;Vs(e,r,n,s)&&za(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,i=>Vs(e,i,n,s)?(za(e,t,s,o),!0):!1)},kc=Q.each,oL=(e,t,n,s)=>{if($1(e)&&Wt(t)&&n.parentNode){const o=Nb(e.schema),r=C$(x.fromDom(n),i=>ms(i.dom));return Vr(o,s)&&qt(x.fromDom(n.parentNode),!1)&&!r}else return!1},U0=(e,t,n,s)=>{if(kc(n.styles,(o,r)=>{e.setStyle(t,r,Io(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},z0=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,u=(_,C=r)=>{He(C.onformat)&&C.onformat(_,C,n,s),U0(a,_,C,n),kc(C.attributes,(w,S)=>{a.setAttrib(_,S,Io(w,n))}),kc(C.classes,w=>{const S=Io(w,n);a.hasClass(_,S)||a.addClass(_,S)})},d=(_,C)=>{let w=!1;return kc(_,S=>jn(S)?a.getContentEditable(C)==="false"&&!S.ceFalseOverride||oe(S.collapsed)&&S.collapsed!==i?!0:a.is(C,S.selector)&&!ms(C)?(u(C,S),w=!0,!1):!0:!1),w},p=_=>{if(de(_)){const C=a.create(_);return u(C),C}else return null},g=(_,C,w)=>{const S=[];let k=!0;const A=r.inline||r.block,M=p(A),H=F=>NO(r)&&Vs(e,F,t,n),J=(F,$,ee)=>{const me=AO(r)&&pd(e,F)&&di(e,$,A);return ee&&me},W=(F,$,ee,me)=>{const be=F.nodeName.toLowerCase(),Te=di(e,A,be)&&di(e,$,A),Me=!w&&X(F)&&Il(F.data),We=ms(F),Je=!Wt(r)||!_.isBlock(F);return(ee||me)&&Te&&!Me&&!We&&Je};Ra(_,C,F=>{let $;const ee=me=>{let be=!1,Te=k,Me=!1;const We=me.nodeName.toLowerCase(),Je=me.parentNode,$t=Je.nodeName.toLowerCase(),Z=_.getContentEditable(me);oe(Z)&&(Te=k,k=Z==="true",be=!0,Me=gC(e,me));const Re=k&&!be;if(Pt(me)&&!oL(e,r,me,$t)){$=null,Ws(r)&&_.remove(me);return}if(H(me)){$=null;return}if(J(We,$t,Re)){const Oe=_.rename(me,A);u(Oe),S.push(Oe),$=null;return}if(jn(r)){let Oe=d(o,me);if(!Oe&&oe(Je)&&yd(r)&&(Oe=d(o,Je)),!Wt(r)||Oe){$=null;return}}oe(M)&&W(me,$t,Re,Me)?($||($=_.clone(M,!1),Je.insertBefore($,me),S.push($)),Me&&be&&(k=Te),$.appendChild(me)):($=null,R(Et(me.childNodes),ee),be&&(k=Te),$=null)};R(F,ee)}),r.links===!0&&R(S,F=>{const $=ee=>{ee.nodeName==="A"&&u(ee,r),R(Et(ee.childNodes),$)};$(F)}),R(S,F=>{const $=be=>{let Te=0;return R(be.childNodes,Me=>{!wO(Me)&&!Vn(Me)&&Te++}),Te},ee=be=>ve(be.childNodes,gd).filter(Me=>_.getContentEditable(Me)!=="false"&&Sc(_,Me,r)).map(Me=>{const We=_.clone(Me,!1);return u(We),_.replace(We,be,!0),_.remove(Me,!0),We}).getOr(be),me=$(F);if((S.length>1||!_.isBlock(F))&&me===0){_.remove(F,!0);return}(Wt(r)||Ws(r)&&r.wrapper)&&(!r.exact&&me===1&&(F=ee(F)),nL(e,o,n,F),sL(e,r,t,n,F),eL(_,r,n,F),J$(_,r,n,F),tL(_,r,n,F),N0(e,r,n,F))})},y=Ta(s)?s:c.getNode();if(a.getContentEditable(y)==="false"&&!gC(e,y)){s=y,d(o,s),RC(e,t,s,n);return}if(r){if(s)if(Ta(s)){if(!d(o,s)){const _=a.createRng();_.setStartBefore(s),_.setEndAfter(s),g(a,gi(e,_,o),!0)}}else g(a,s,!0);else!i||!Wt(r)||fi(e).length?(c.setRng(im(c.getRng())),dC(e,()=>{md(e,(_,C)=>{const w=C?_:gi(e,_,o);g(a,w,!1)})},vt),e.nodeChanged()):R$(e,t,n),y0(e.formatter,t).each(_=>{R(H$(e.selection),C=>U0(a,C,_,n))});L$(t,e)}RC(e,t,s,n)},H0=e=>Fe(e,"vars"),rL=(e,t)=>{e.set({}),t.on("NodeChange",n=>{q0(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>Ta(o)?o:o.startContainer).bind(o=>ce(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>W0(t));q0(t,s,e.get())})},W0=e=>e.selection.getStart(),V0=(e,t,n,s,o)=>Ae(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!Yt(c)},a=>d0(e,a,n)?!0:s?!1:oe(e.formatter.matchNode(a,n,o,!0))),j0=(e,t)=>{const n=t!=null?t:W0(e);return j(lc(e.dom,n),s=>ce(s)&&!or(s))},q0=(e,t,n)=>{const s=j0(e,t);ct(n,(o,r)=>{const i=a=>{const c=V0(e,s,r,a.similar,H0(a)?a.vars:void 0),u=c.isSome();if(a.state.get()!==u){a.state.set(u);const d=c.getOr(t);H0(a)?a.callback(u,{node:d,format:r,parents:s}):R(a.callbacks,p=>p(u,{node:d,format:r,parents:s}))}};R([o.withSimilar,o.withoutSimilar],i),R(o.withVars,i)})},iL=(e,t,n,s,o,r)=>{const i=t.get();R(n.split(","),a=>{const c=gt(i,a).getOrThunk(()=>{const d={withSimilar:{state:zt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:zt(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),u=()=>{const d=j0(e);return V0(e,d,a,o,r).isSome()};if(Yt(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(u())}else c.withVars.push({state:zt(u()),similar:o,vars:r,callback:s})}),t.set(i)},aL=(e,t,n)=>{const s=e.get();R(t.split(","),o=>gt(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:j(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:j(r.withoutSimilar.callbacks,i=>i!==n)},withVars:j(r.withVars,i=>i.callback!==n)}})),e.set(s)},lL=(e,t,n,s,o,r)=>(iL(e,t,n,s,o,r),{unbind:()=>aL(t,n,s)}),cL=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(mm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?L0(e,t,n,s):z0(e,t,n,s))};function Sr(e){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(e)}function _m(e,t){return _m=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},_m(e,t)}function uL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nc(e,t,n){return uL()?Nc=Reflect.construct:Nc=function(o,r,i){var a=[null];a.push.apply(a,r);var c=Function.bind.apply(o,a),u=new c;return i&&_m(u,i.prototype),u},Nc.apply(null,arguments)}function gs(e){return fL(e)||dL(e)||mL(e)||gL()}function fL(e){if(Array.isArray(e))return wm(e)}function dL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mL(e,t){if(!!e){if(typeof e=="string")return wm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wm(e,t)}}function wm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function gL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pL=Object.hasOwnProperty,K0=Object.setPrototypeOf,hL=Object.isFrozen,bL=Object.getPrototypeOf,vL=Object.getOwnPropertyDescriptor,xn=Object.freeze,js=Object.seal,CL=Object.create,G0=typeof Reflect<"u"&&Reflect,Ac=G0.apply,Sm=G0.construct;Ac||(Ac=function(t,n,s){return t.apply(n,s)}),xn||(xn=function(t){return t}),js||(js=function(t){return t}),Sm||(Sm=function(t,n){return Nc(t,gs(n))});var yL=ps(Array.prototype.forEach),EL=ps(Array.prototype.pop),Ha=ps(Array.prototype.push),Tc=ps(String.prototype.toLowerCase),_L=ps(String.prototype.match),zo=ps(String.prototype.replace),wL=ps(String.prototype.indexOf),SL=ps(String.prototype.trim),kn=ps(RegExp.prototype.test),xm=xL(TypeError);function ps(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return Ac(e,t,s)}}function xL(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Sm(e,n)}}function Xe(e,t){K0&&K0(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=Tc(s);o!==s&&(hL(t)||(t[n]=o),s=o)}e[s]=!0}return e}function xr(e){var t=CL(null),n;for(n in e)Ac(pL,e,[n])&&(t[n]=e[n]);return t}function Rc(e,t){for(;e!==null;){var n=vL(e,t);if(n){if(n.get)return ps(n.get);if(typeof n.value=="function")return ps(n.value)}e=bL(e)}function s(o){return console.warn("fallback value for",o),null}return s}var Y0=xn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),km=xn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nm=xn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kL=xn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Am=xn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),NL=xn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X0=xn(["#text"]),Q0=xn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Tm=xn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Z0=xn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pc=xn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AL=js(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TL=js(/<%[\w\W]*|[\w\W]*%>/gm),RL=js(/^data-[\-\w.\u00B7-\uFFFF]/),PL=js(/^aria-[\-\w]+$/),OL=js(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),DL=js(/^(?:\w+script|data):/i),BL=js(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IL=js(/^html$/i),FL=function(){return typeof window>"u"?null:window},$L=function(t,n){if(Sr(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function J0(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FL(),t=function(I){return J0(I)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,d=u===void 0?e.NamedNodeMap||e.MozNamedAttrMap:u,p=e.HTMLFormElement,g=e.DOMParser,y=e.trustedTypes,_=a.prototype,C=Rc(_,"cloneNode"),w=Rc(_,"nextSibling"),S=Rc(_,"childNodes"),k=Rc(_,"parentNode");if(typeof r=="function"){var A=s.createElement("template");A.content&&A.content.ownerDocument&&(s=A.content.ownerDocument)}var M=$L(y,n),H=M?M.createHTML(""):"",J=s,W=J.implementation,F=J.createNodeIterator,$=J.createDocumentFragment,ee=J.getElementsByTagName,me=n.importNode,be={};try{be=xr(s).documentMode?s.documentMode:{}}catch{}var Te={};t.isSupported=typeof k=="function"&&W&&typeof W.createHTMLDocument<"u"&&be!==9;var Me=AL,We=TL,Je=RL,$t=PL,Z=DL,Re=BL,Oe=OL,xe=null,wt=Xe({},[].concat(gs(Y0),gs(km),gs(Nm),gs(Am),gs(X0))),ie=null,we=Xe({},[].concat(gs(Q0),gs(Tm),gs(Z0),gs(Pc))),ye=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,Ie=null,De=!0,_e=!0,ke=!1,Ge=!1,Qe=!1,Ot=!1,pt=!1,ut=!1,Tt=!1,Gt=!1,Dt=!0,Cs=!0,Xn=!1,ys={},Es=null,_s=Xe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ws=null,Bt=Xe({},["audio","video","img","source","image","track"]),Qn=null,Ss=Xe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Or="http://www.w3.org/1998/Math/MathML",rs="http://www.w3.org/2000/svg",On="http://www.w3.org/1999/xhtml",an=On,is=!1,Dn,Dr=["application/xhtml+xml","text/html"],Su="text/html",bo,Wo=null,xu=s.createElement("form"),tp=function(I){return I instanceof RegExp||I instanceof Function},ku=function(I){Wo&&Wo===I||((!I||Sr(I)!=="object")&&(I={}),I=xr(I),xe="ALLOWED_TAGS"in I?Xe({},I.ALLOWED_TAGS):wt,ie="ALLOWED_ATTR"in I?Xe({},I.ALLOWED_ATTR):we,Qn="ADD_URI_SAFE_ATTR"in I?Xe(xr(Ss),I.ADD_URI_SAFE_ATTR):Ss,ws="ADD_DATA_URI_TAGS"in I?Xe(xr(Bt),I.ADD_DATA_URI_TAGS):Bt,Es="FORBID_CONTENTS"in I?Xe({},I.FORBID_CONTENTS):_s,te="FORBID_TAGS"in I?Xe({},I.FORBID_TAGS):{},Ie="FORBID_ATTR"in I?Xe({},I.FORBID_ATTR):{},ys="USE_PROFILES"in I?I.USE_PROFILES:!1,De=I.ALLOW_ARIA_ATTR!==!1,_e=I.ALLOW_DATA_ATTR!==!1,ke=I.ALLOW_UNKNOWN_PROTOCOLS||!1,Ge=I.SAFE_FOR_TEMPLATES||!1,Qe=I.WHOLE_DOCUMENT||!1,ut=I.RETURN_DOM||!1,Tt=I.RETURN_DOM_FRAGMENT||!1,Gt=I.RETURN_TRUSTED_TYPE||!1,pt=I.FORCE_BODY||!1,Dt=I.SANITIZE_DOM!==!1,Cs=I.KEEP_CONTENT!==!1,Xn=I.IN_PLACE||!1,Oe=I.ALLOWED_URI_REGEXP||Oe,an=I.NAMESPACE||On,I.CUSTOM_ELEMENT_HANDLING&&tp(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ye.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&tp(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ye.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ye.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dn=Dr.indexOf(I.PARSER_MEDIA_TYPE)===-1?Dn=Su:Dn=I.PARSER_MEDIA_TYPE,bo=Dn==="application/xhtml+xml"?function(ae){return ae}:Tc,Ge&&(_e=!1),Tt&&(ut=!0),ys&&(xe=Xe({},gs(X0)),ie=[],ys.html===!0&&(Xe(xe,Y0),Xe(ie,Q0)),ys.svg===!0&&(Xe(xe,km),Xe(ie,Tm),Xe(ie,Pc)),ys.svgFilters===!0&&(Xe(xe,Nm),Xe(ie,Tm),Xe(ie,Pc)),ys.mathMl===!0&&(Xe(xe,Am),Xe(ie,Z0),Xe(ie,Pc))),I.ADD_TAGS&&(xe===wt&&(xe=xr(xe)),Xe(xe,I.ADD_TAGS)),I.ADD_ATTR&&(ie===we&&(ie=xr(ie)),Xe(ie,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Xe(Qn,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(Es===_s&&(Es=xr(Es)),Xe(Es,I.FORBID_CONTENTS)),Cs&&(xe["#text"]=!0),Qe&&Xe(xe,["html","head","body"]),xe.table&&(Xe(xe,["tbody"]),delete te.tbody),xn&&xn(I),Wo=I)},np=Xe({},["mi","mo","mn","ms","mtext"]),sp=Xe({},["foreignobject","desc","title","annotation-xml"]),Vo=Xe({},["title","style","font","a","script"]),Br=Xe({},km);Xe(Br,Nm),Xe(Br,kL);var O=Xe({},Am);Xe(O,NL);var D=function(I){var ae=k(I);(!ae||!ae.tagName)&&(ae={namespaceURI:On,tagName:"template"});var Se=Tc(I.tagName),yt=Tc(ae.tagName);return I.namespaceURI===rs?ae.namespaceURI===On?Se==="svg":ae.namespaceURI===Or?Se==="svg"&&(yt==="annotation-xml"||np[yt]):Boolean(Br[Se]):I.namespaceURI===Or?ae.namespaceURI===On?Se==="math":ae.namespaceURI===rs?Se==="math"&&sp[yt]:Boolean(O[Se]):I.namespaceURI===On?ae.namespaceURI===rs&&!sp[yt]||ae.namespaceURI===Or&&!np[yt]?!1:!O[Se]&&(Vo[Se]||!Br[Se]):!1},G=function(I){Ha(t.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=H}catch{I.remove()}}},q=function(I,ae){try{Ha(t.removed,{attribute:ae.getAttributeNode(I),from:ae})}catch{Ha(t.removed,{attribute:null,from:ae})}if(ae.removeAttribute(I),I==="is"&&!ie[I])if(ut||Tt)try{G(ae)}catch{}else try{ae.setAttribute(I,"")}catch{}},pe=function(I){var ae,Se;if(pt)I="<remove></remove>"+I;else{var yt=_L(I,/^[\r\n\t ]+/);Se=yt&&yt[0]}Dn==="application/xhtml+xml"&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var In=M?M.createHTML(I):I;if(an===On)try{ae=new g().parseFromString(In,Dn)}catch{}if(!ae||!ae.documentElement){ae=W.createDocument(an,"template",null);try{ae.documentElement.innerHTML=is?"":In}catch{}}var Cn=ae.body||ae.documentElement;return I&&Se&&Cn.insertBefore(s.createTextNode(Se),Cn.childNodes[0]||null),an===On?ee.call(ae,Qe?"html":"body")[0]:Qe?ae.documentElement:Cn},Ue=function(I){return F.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ft=function(I){return I instanceof p&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof d)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function")},dt=function(I){return Sr(i)==="object"?I instanceof i:I&&Sr(I)==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},Bn=function(I,ae,Se){!Te[I]||yL(Te[I],function(yt){yt.call(t,ae,Se,Wo)})},il=function(I){var ae;if(Bn("beforeSanitizeElements",I,null),ft(I)||kn(/[\u0080-\uFFFF]/,I.nodeName))return G(I),!0;var Se=bo(I.nodeName);if(Bn("uponSanitizeElement",I,{tagName:Se,allowedTags:xe}),I.hasChildNodes()&&!dt(I.firstElementChild)&&(!dt(I.content)||!dt(I.content.firstElementChild))&&kn(/<[/\w]/g,I.innerHTML)&&kn(/<[/\w]/g,I.textContent)||Se==="select"&&kn(/<template/i,I.innerHTML))return G(I),!0;if(!xe[Se]||te[Se]){if(!te[Se]&&Lx(Se)&&(ye.tagNameCheck instanceof RegExp&&kn(ye.tagNameCheck,Se)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(Se)))return!1;if(Cs&&!Es[Se]){var yt=k(I)||I.parentNode,In=S(I)||I.childNodes;if(In&&yt)for(var Cn=In.length,ln=Cn-1;ln>=0;--ln)yt.insertBefore(C(In[ln],!0),w(I))}return G(I),!0}return I instanceof a&&!D(I)||(Se==="noscript"||Se==="noembed")&&kn(/<\/no(script|embed)/i,I.innerHTML)?(G(I),!0):(Ge&&I.nodeType===3&&(ae=I.textContent,ae=zo(ae,Me," "),ae=zo(ae,We," "),I.textContent!==ae&&(Ha(t.removed,{element:I.cloneNode()}),I.textContent=ae)),Bn("afterSanitizeElements",I,null),!1)},$x=function(I,ae,Se){if(Dt&&(ae==="id"||ae==="name")&&(Se in s||Se in xu))return!1;if(!(_e&&!Ie[ae]&&kn(Je,ae))){if(!(De&&kn($t,ae))){if(!ie[ae]||Ie[ae]){if(!(Lx(I)&&(ye.tagNameCheck instanceof RegExp&&kn(ye.tagNameCheck,I)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(I))&&(ye.attributeNameCheck instanceof RegExp&&kn(ye.attributeNameCheck,ae)||ye.attributeNameCheck instanceof Function&&ye.attributeNameCheck(ae))||ae==="is"&&ye.allowCustomizedBuiltInElements&&(ye.tagNameCheck instanceof RegExp&&kn(ye.tagNameCheck,Se)||ye.tagNameCheck instanceof Function&&ye.tagNameCheck(Se))))return!1}else if(!Qn[ae]){if(!kn(Oe,zo(Se,Re,""))){if(!((ae==="src"||ae==="xlink:href"||ae==="href")&&I!=="script"&&wL(Se,"data:")===0&&ws[I])){if(!(ke&&!kn(Z,zo(Se,Re,"")))){if(Se)return!1}}}}}}return!0},Lx=function(I){return I.indexOf("-")>0},Mx=function(I){var ae,Se,yt,In;Bn("beforeSanitizeAttributes",I,null);var Cn=I.attributes;if(!!Cn){var ln={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie};for(In=Cn.length;In--;){ae=Cn[In];var Nu=ae,cn=Nu.name,Ux=Nu.namespaceURI;Se=cn==="value"?ae.value:SL(ae.value),yt=bo(cn);var T9=Se;if(ln.attrName=yt,ln.attrValue=Se,ln.keepAttr=!0,ln.forceKeepAttr=void 0,Bn("uponSanitizeAttribute",I,ln),Se=ln.attrValue,!ln.forceKeepAttr){if(!ln.keepAttr){q(cn,I);continue}if(kn(/\/>/i,Se)){q(cn,I);continue}Ge&&(Se=zo(Se,Me," "),Se=zo(Se,We," "));var R9=bo(I.nodeName);if(!$x(R9,yt,Se)){q(cn,I);continue}if(Se!==T9)try{Ux?I.setAttributeNS(Ux,cn,Se):I.setAttribute(cn,Se)}catch{q(cn,I)}}}Bn("afterSanitizeAttributes",I,null)}},A9=function Pe(I){var ae,Se=Ue(I);for(Bn("beforeSanitizeShadowDOM",I,null);ae=Se.nextNode();)Bn("uponSanitizeShadowNode",ae,null),!il(ae)&&(ae.content instanceof o&&Pe(ae.content),Mx(ae));Bn("afterSanitizeShadowDOM",I,null)};return t.sanitize=function(Pe,I){var ae,Se,yt,In,Cn;if(is=!Pe,is&&(Pe="<!-->"),typeof Pe!="string"&&!dt(Pe)){if(typeof Pe.toString!="function")throw xm("toString is not a function");if(Pe=Pe.toString(),typeof Pe!="string")throw xm("dirty is not a string, aborting")}if(!t.isSupported){if(Sr(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Pe=="string")return e.toStaticHTML(Pe);if(dt(Pe))return e.toStaticHTML(Pe.outerHTML)}return Pe}if(Ot||ku(I),t.removed=[],typeof Pe=="string"&&(Xn=!1),Xn){if(Pe.nodeName){var ln=bo(Pe.nodeName);if(!xe[ln]||te[ln])throw xm("root node is forbidden and cannot be sanitized in-place")}}else if(Pe instanceof i)ae=pe("<!---->"),Se=ae.ownerDocument.importNode(Pe,!0),Se.nodeType===1&&Se.nodeName==="BODY"||Se.nodeName==="HTML"?ae=Se:ae.appendChild(Se);else{if(!ut&&!Ge&&!Qe&&Pe.indexOf("<")===-1)return M&&Gt?M.createHTML(Pe):Pe;if(ae=pe(Pe),!ae)return ut?null:Gt?H:""}ae&&pt&&G(ae.firstChild);for(var Nu=Ue(Xn?Pe:ae);yt=Nu.nextNode();)yt.nodeType===3&&yt===In||il(yt)||(yt.content instanceof o&&A9(yt.content),Mx(yt),In=yt);if(In=null,Xn)return Pe;if(ut){if(Tt)for(Cn=$.call(ae.ownerDocument);ae.firstChild;)Cn.appendChild(ae.firstChild);else Cn=ae;return ie.shadowroot&&(Cn=me.call(n,Cn,!0)),Cn}var cn=Qe?ae.outerHTML:ae.innerHTML;return Qe&&xe["!doctype"]&&ae.ownerDocument&&ae.ownerDocument.doctype&&ae.ownerDocument.doctype.name&&kn(IL,ae.ownerDocument.doctype.name)&&(cn="<!DOCTYPE "+ae.ownerDocument.doctype.name+`>
`+cn),Ge&&(cn=zo(cn,Me," "),cn=zo(cn,We," ")),M&&Gt?M.createHTML(cn):cn},t.setConfig=function(Pe){ku(Pe),Ot=!0},t.clearConfig=function(){Wo=null,Ot=!1},t.isValidAttribute=function(Pe,I,ae){Wo||ku({});var Se=bo(Pe),yt=bo(I);return $x(Se,yt,ae)},t.addHook=function(Pe,I){typeof I=="function"&&(Te[Pe]=Te[Pe]||[],Ha(Te[Pe],I))},t.removeHook=function(Pe){if(Te[Pe])return EL(Te[Pe])},t.removeHooks=function(Pe){Te[Pe]&&(Te[Pe]=[])},t.removeAllHooks=function(){Te={}},t}var LL=J0();const eE=Q.explode,tE=()=>{const e={};return{addFilter:(o,r)=>{R(eE(o),i=>{Fe(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>tf(e),removeFilter:(o,r)=>{R(eE(o),i=>{if(Fe(e,i))if(oe(r)){const a=e[i],c=j(a.callbacks,u=>u!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},ML=(e,t)=>{R(t,n=>{e.attr(n,null)})},UL=(e,t,n)=>{e.addNodeFilter("font",s=>{R(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&El(c).each(u=>{r["font-size"]=n[u-1]}),o.name="span",o.attr("style",t.serialize(r)),ML(o,["color","face","size"])})})},zL=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";R(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},HL=(e,t,n)=>{var s;const o=Df();t.convert_fonts_to_spans&&UL(e,o,Q.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),zL(e,n,o)},WL=(e,t,n)=>{t.inline_styles&&HL(e,t,n)},VL=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),jL=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Rm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?jL(s):decodeURIComponent(s);return b.some({type:o[1],data:i,base64Encoded:r})}else return b.none()},nE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return b.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return b.some(new Blob([o],{type:e}))},qL=e=>new Promise((t,n)=>{Rm(e).bind(({type:s,data:o,base64Encoded:r})=>nE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),KL=e=>Xt(e,"blob:")?VL(e):Xt(e,"data:")?qL(e):Promise.reject("Unknown URI format"),sE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let GL=0;const YL=e=>(e||"blobid")+GL++,oE=(e,t,n)=>Rm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return b.none();{const i=r?s:btoa(s);return n(i,o)}}),rE=(e,t,n)=>{const s=e.create(YL(),t,n);return e.add(s),s},iE=(e,t,n=!1)=>oE(t,n,(s,o)=>b.from(e.getByData(s,o)).orThunk(()=>nE(o,s).map(r=>rE(e,r,s)))),XL=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Xt(t,"blob:")){const s=e.getByUri(t);return oe(s)?Promise.resolve(s):KL(t).then(o=>sE(o).then(r=>oE(r,!1,i=>b.some(rE(e,o,i))).getOrThunk(n)))}else return Xt(t,"data:")?iE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},QL=e=>oe(e.attr("data-mce-bogus")),ZL=e=>e.attr("src")===Ke.transparentSrc||oe(e.attr("data-mce-placeholder")),JL=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");ZL(o)||QL(o)||lt(r)||iE(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};e.addAttributeFilter("src",o=>R(o,s))}},eM=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(o,r,i)=>{const a=Q.extend({},n.getBlockElements()),c=n.getNonEmptyElements(),u=n.getWhitespaceElements();a.body=1;for(let d=0,p=o.length;d<p;d++){let g=o[d],y=g.parent;if(y&&a[y.name]&&g===y.lastChild){let _=g.prev;for(;_;){const C=_.name;if(C!=="span"||_.attr("data-mce-type")!=="bookmark"){C==="br"&&(g=null);break}_=_.prev}if(g&&(g.remove(),Ma(n,c,u,y))){const C=n.getElementRule(y.name);C&&(C.removeEmpty?y.remove():C.paddEmpty&&sm(t,i,a,y))}}else{let _=g;for(;y&&y.firstChild===_&&y.lastChild===_&&(_=y,!a[y.name]);)y=y.parent;if(_===y){const C=new bn("#text",3);C.value=jt,g.replace(C)}}}}),e.addAttributeFilter("href",o=>{let r=o.length;const i=c=>c.split(" ").filter(d=>d.length>0).concat(["noopener"]).sort().join(" "),a=c=>{const u=c?Q.trim(c):"";return/\b(noopener)\b/g.test(u)?u:i(u)};if(!t.allow_unsafe_link_target)for(;r--;){const c=o[r];c.name==="a"&&c.attr("target")==="_blank"&&c.attr("rel",a(c.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let r=o.length,i,a,c,u;for(;r--;)if(u=o[r],u.name==="a"&&u.firstChild&&!u.attr("href"))for(c=u.parent,i=u.lastChild;i&&c;)a=i.prev,c.insert(i,u),i=a}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let r=o.length,i,a;for(;r--;)if(i=o[r],a=i.parent,a&&(a.name==="ul"||a.name==="ol"))if(i.prev&&i.prev.name==="li")i.prev.append(i);else{const c=new bn("li",1);c.attr("style","list-style-type: none"),i.wrap(c)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",o=>{var r;let i=o.length;for(;i--;){const a=o[i],c=(r=a.attr("class"))!==null&&r!==void 0?r:"",u=Q.explode(c," ");let d="";for(let p=0;p<u.length;p++){const g=u[p];let y=!1,_=s["*"];_&&_[g]&&(y=!0),_=s[a.name],!y&&_&&_[g]&&(y=!0),y&&(d&&(d+=" "),d+=g)}d.length||(d=null),a.attr("class",d)}}),JL(e,t)},aE=Q.each,tM=Q.trim,nM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],sM={ftp:21,http:80,https:443,mailto:25},oM=["img","video"],rM=(e,t)=>oe(e)?!e:oe(t)?!z(oM,t):!0,iM=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},lE=(e,t,n)=>{const s=iM(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?rM(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class hs{constructor(t,n={}){this.path="",this.directory="",t=tM(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=s?s.path:new hs(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&aE(nM,(a,c)=>{let u=i[c];u&&(u=u.replace(/\(mce_at\)/g,"@@")),o[a]=u}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=To.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!lE(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new hs(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new hs(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?sM[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),i=n.split("/"),a=[];aE(r,p=>{p&&a.push(p)});const c=[];for(let p=i.length-1;p>=0;p--)if(!(i[p].length===0||i[p]===".")){if(i[p]===".."){s++;continue}if(s>0){s--;continue}c.push(i[p])}const u=a.length-s;let d;return u<=0?d=xt(c).join("/"):d=a.slice(0,u).join("/")+"/"+xt(c).join("/"),d.indexOf("/")!==0&&(d="/"+d),o&&d.lastIndexOf("/")!==d.length-1&&(d+=o),d}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const cE=Q.makeMap,uE=Q.extend,aM={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},lM=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Pm="data-mce-type",cM=(e,t)=>{const n={...aM};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},uM=(e,t)=>{const n=LL(),s=t.getSpecialElements(),o=e.validate;let r=0;return n.addHook("uponSanitizeElement",(i,a)=>{var c,u,d;i.nodeType===Eh&&!e.allow_conditional_comments&&/^\[if/i.test((c=i.nodeValue)!==null&&c!==void 0?c:"")&&(i.nodeValue=" "+i.nodeValue);const p=a.tagName;if(i.nodeType!==Qi||p==="body")return;const g=x.fromDom(i),y=p.toLowerCase(),_=wl(g,Pm),C=ns(g,"data-mce-bogus");if(!_&&de(C)){C==="all"?Ct(g):ko(g);return}const w=t.getElementRule(y);if(o&&!w){Fe(s,y)?Ct(g):ko(g);return}else a.allowedTags[p]=!0;if(o&&w&&!_){if(R((u=w.attributesForced)!==null&&u!==void 0?u:[],S=>{Vt(g,S.name,S.value==="{$uid}"?`mce_${r++}`:S.value)}),R((d=w.attributesDefault)!==null&&d!==void 0?d:[],S=>{wl(g,S.name)||Vt(g,S.name,S.value==="{$uid}"?`mce_${r++}`:S.value)}),w.attributesRequired&&!Y(w.attributesRequired,S=>wl(g,S))){ko(g);return}if(w.removeEmptyAttrs&&eA(g)){ko(g);return}w.outputName&&w.outputName!==y&&_R(g,w.outputName)}}),n.addHook("uponSanitizeAttribute",(i,a)=>{const c=i.tagName.toLowerCase(),{attrName:u,attrValue:d}=a;a.keepAttr=!o||t.isValid(c,u)||Xt(u,"data-")||Xt(u,"aria-"),u in lM&&lE(e,d,c)&&(a.keepAttr=!1),a.keepAttr?(a.allowedAttributes[u]=!0,u in t.getBoolAttrs()&&(a.attrValue=u),e.allow_svg_data_urls&&Xt(d,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):i.hasAttribute(Pm)&&(u==="id"||u==="class"||u==="style")&&(a.forceKeepAttr=!0)}),n},fE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],u=new bn(c.nodeName.toLowerCase(),c.nodeType);if(ce(c)){const d=c.attributes;for(let p=0,g=d.length;p<g;p++){const y=d[p];u.attr(y.name,y.value)}}else X(c)?(u.value=c.data,o&&(u.raw=!0)):(No(c)||LA(c)||MA(c))&&(u.value=c.data);fE(u,c,n),e.append(u)}},fM=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const i=o;R(t,a=>a(i)),lt(i.parent)&&i!==e?o=r:s.push(i)}for(let o=s.length-1;o>=0;o--){const r=s[o];R(n,i=>i(r))}},dM=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=uE(cE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=Nb(t),u=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,g=S=>{let k=S.parent;for(;oe(k);){if(k.name in i)return!0;k=k.parent}return!1},y=S=>{let k=S;for(;oe(k);){if(k.name in c)return Ma(t,r,i,k);k=k.parent}return!1},_=(S,k)=>{const A=k?S.prev:S.next;return oe(A)||lt(S.parent)?!1:S.parent.name in a&&(S.parent!==e||s.isRootContent===!0)};return[S=>{var k;if(S.type===3&&!g(S)){let A=(k=S.value)!==null&&k!==void 0?k:"";A=A.replace(u," "),(BF(S.prev,a)||_(S,!0))&&(A=A.replace(d,"")),A.length===0?S.remove():S.value=A}},S=>{var k;if(S.type===1){const A=t.getElementRule(S.name);if(o&&A){const M=Ma(t,r,i,S);A.paddInEmptyBlock&&M&&y(S)?sm(n,s,a,S):A.removeEmpty&&M?a[S.name]?S.remove():S.unwrap():A.paddEmpty&&(M||OF(S))&&sm(n,s,a,S)}}else if(S.type===3&&!g(S)){let A=(k=S.value)!==null&&k!==void 0?k:"";(S.next&&a[S.next.name]||_(S,!1))&&(A=A.replace(p,"")),A.length===0?S.remove():S.value=A}}]},mM=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},yi=(e={},t=Ro())=>{const n=tE(),s=tE(),o={validate:!0,root_name:"body",...e},r=new DOMParser,i=uM(o,t),a=(k,A,M="html")=>{const H=M==="xhtml"?"application/xhtml+xml":"text/html",J=Fe(t.getSpecialElements(),A.toLowerCase()),W=J?`<${A}>${k}</${A}>`:k,F=M==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${W}</body></html>`:`<body>${W}</body>`,$=r.parseFromString(F,H).body;return i.sanitize($,cM(o,H)),i.removed=[],J?$.firstChild:$},c=n.addFilter,u=n.getFilters,d=n.removeFilter,p=s.addFilter,g=s.getFilters,y=s.removeFilter,_=(k,A)=>{const M=k.parent;M&&t.children[k.name]&&!t.isValidChild(M.name,k.name)&&A.push(k)},C=(k,A)=>{const M=uE(cE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),H=/^[ \t\r\n]+/,J=/[ \t\r\n]+$/;let W=k.firstChild,F=null;const $=ee=>{var me,be;ee&&(W=ee.firstChild,W&&W.type===3&&(W.value=(me=W.value)===null||me===void 0?void 0:me.replace(H,"")),W=ee.lastChild,W&&W.type===3&&(W.value=(be=W.value)===null||be===void 0?void 0:be.replace(J,"")))};if(!!t.isValidChild(k.name,A.toLowerCase())){for(;W;){const ee=W.next;W.type===3||W.type===1&&W.name!=="p"&&!M[W.name]&&!W.attr(Pm)?(F||(F=new bn(A,1),F.attr(o.forced_root_block_attrs),k.insert(F,W)),F.append(W)):($(F),F=null),W=ee}$(F)}},S={schema:t,addAttributeFilter:p,getAttributeFilters:g,removeAttributeFilter:y,addNodeFilter:c,getNodeFilters:u,removeNodeFilter:d,parse:(k,A={})=>{var M;const H=o.validate,J=(M=A.context)!==null&&M!==void 0?M:o.root_name,W=a(k,J,A.format),F=new bn(J,11);fE(F,W,t.getSpecialElements());const[$,ee]=dM(F,t,o,A),me=[],be=H?Je=>_(Je,me):$e,Te={nodes:{},attributes:{}},Me=Je=>i0(u(),g(),Je,Te);if(fM(F,[$,Me],[ee,be]),me.reverse(),H&&me.length>0)if(A.context){const{pass:Je,fail:$t}=le(me,Z=>Z.parent===F);rm($t,t,Me),A.invalid=Je.length>0}else rm(me,t,Me);const We=mM(o,A);return We&&(F.name==="body"||A.isRootContent)&&C(F,We),A.invalid||a0(Te,A),F}};return eM(S,o),WL(S,o,t),S},gM=e=>wc(e)?Fo({validate:!1}).serialize(e):e,dE=(e,t)=>{const n=gM(e),s=t(n);if(s.isDefaultPrevented())return s;if(wc(e))if(s.content!==n){const o=yi({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return{...s,content:o}}else return{...s,content:e};else return s},mE=(e,t)=>{if(t.no_events)return pn.value(t);{const n=JO(e,t);return n.isDefaultPrevented()?pn.error(DC(e,{content:"",...n}).content):pn.value(n)}},gE=(e,t,n)=>n.no_events?t:dE(t,o=>DC(e,{...n,content:o})).content,Om=(e,t)=>{if(t.no_events)return pn.value(t);{const n=dE(t.content,s=>ZO(e,{...t,content:s}));return n.isDefaultPrevented()?(OC(e,n),pn.error(void 0)):pn.value(n)}},Dm=(e,t,n)=>{n.no_events||OC(e,{...n,content:t})},Bm=(e,t,n)=>({element:e,width:t,rows:n}),pE=(e,t)=>({element:e,cells:t}),pM=(e,t)=>({x:e,y:t}),hE=(e,t)=>io(e,t).bind(El).getOr(1),hM=(e,t,n,s,o)=>{const r=hE(o,"rowspan"),i=hE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=pE(Hb(s),[]));for(let u=t;u<t+i;u++){const d=a[c].cells;d[u]=c===n&&u===t?o:oi(o)}}},bM=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},vM=(e,t,n)=>{for(;bM(e,t,n);)t++;return t},bE=e=>Ee(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),vE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(nt(o[r],t))return b.some(pM(r,s))}return b.none()},CE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,u=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(pE(i[a].element,u))}return r},CM=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?CE(e,s,o,r,i):CE(e,s,i,r,o);return Bm(e.element,bE(a),a)},yM=(e,t)=>{const n=oi(e.element),s=x.fromTag("tbody");return nr(s,t),Ut(n,s),n},EM=e=>V(e.rows,t=>{const n=V(t.cells,o=>{const r=Hb(o);return tn(r,"colspan"),tn(r,"rowspan"),r}),s=oi(t.element);return nr(s,n),s}),_M=e=>{const t=Bm(oi(e),0,[]);return R(gn(e,"tr"),(n,s)=>{R(gn(n,"td,th"),(o,r)=>{hM(t,vM(t,r,s),s,n,o)})}),Bm(t.element,bE(t.rows),t.rows)},wM=e=>yM(e,EM(e)),SM=(e,t,n)=>vE(e,t).bind(s=>vE(e,n).map(o=>CM(e,s,o))),xM=e=>ve(e,t=>_t(t)==="ul"||_t(t)==="ol"),kM=(e,t)=>ve(e,n=>_t(n)==="li"&&fd(n,t)).fold(K([]),n=>xM(e).map(s=>{const o=x.fromTag(_t(s)),r=qi(Vh(s),(i,a)=>Xt(a,"list-style"));return kl(o,r),[x.fromTag("li"),o]}).getOr([])),NM=(e,t)=>{const n=Ee(t,(s,o)=>(Ut(o,s),o),e);return t.length>0?Sd([n]):n},AM=e=>la(e)?Mn(e).filter(Ef).fold(K([]),t=>[e,t]):Ef(e)?[e]:[],TM=(e,t)=>{const n=x.fromDom(t.commonAncestorContainer),s=go(n,e),o=j(s,iT),r=kM(s,t),i=o.concat(r.length?r:AM(n));return V(i,oi)},yE=()=>Sd([]),RM=(e,t)=>NM(x.fromDom(t.cloneContents()),TM(e,t)),PM=(e,t)=>ia(t,"table",re(nt,e)),OM=(e,t)=>PM(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=_M(n);return SM(r,s,o).map(i=>Sd([wM(i)]))}).getOrThunk(yE),DM=(e,t)=>t.length>0&&t[0].collapsed?yE():RM(e,t[0]),BM=(e,t)=>{const n=cC(t,e);return n.length>0?OM(e,n):DM(e,t)},Oc=(e,t)=>t>=0&&t<e.length&&ui(e.charAt(t)),EE=e=>uo(e.innerText),IM=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),FM=e=>b.from(e.selection.getRng()).map(t=>{var n;const s=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=IM(s),i=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),a=EE(i),c=uo((n=i.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(i),Oc(c,0)||Oc(c,c.length-1)){const u=s.getOr(o),d=EE(u),p=d.indexOf(a);if(p===-1)return a;{const g=Oc(d,p-1),y=Oc(d,p+a.length);return(g?" ":"")+a+(y?" ":"")}}else return a}).getOr(""),$M=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Id(e,cd(o)),i=t.contextual?BM(x.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},LM=(e,t)=>{if(t.format==="text")return FM(e);{const n=$M(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},MM=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),UM=(e,t,n={})=>{const s=MM(n,t);return mE(e,s).fold(Rt,o=>{const r=LM(e,o);return gE(e,r,o)})},Im=0,_E=1,wE=2,zM=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,g)=>({start:d,end:p,diag:g}),i=(d,p,g,y,_)=>{const C=c(d,p,g,y);if(C===null||C.start===p&&C.diag===p-y||C.end===d&&C.diag===d-g){let w=d,S=g;for(;w<p||S<y;)w<p&&S<y&&e[w]===t[S]?(_.push([Im,e[w]]),++w,++S):p-d>y-g?(_.push([wE,e[w]]),++w):(_.push([_E,t[S]]),++S)}else{i(d,C.start,g,C.start-C.diag,_);for(let w=C.start;w<C.end;++w)_.push([Im,e[w]]);i(C.end,p,C.end-C.diag,y,_)}},a=(d,p,g,y)=>{let _=d;for(;_-p<y&&_<g&&e[_]===t[_-p];)++_;return r(d,_,p)},c=(d,p,g,y)=>{const _=p-d,C=y-g;if(_===0||C===0)return null;const w=_-C,S=C+_,k=(S%2===0?S:S+1)/2;s[1+k]=d,o[1+k]=p+1;let A,M,H,J,W;for(A=0;A<=k;++A){for(M=-A;M<=A;M+=2){for(H=M+k,M===-A||M!==A&&s[H-1]<s[H+1]?s[H]=s[H+1]:s[H]=s[H-1]+1,J=s[H],W=J-d+g-M;J<p&&W<y&&e[J]===t[W];)s[H]=++J,++W;if(w%2!==0&&w-A<=M&&M<=w+A&&o[H-w]<=s[H])return a(o[H-w],M+d-g,p,y)}for(M=w-A;M<=w+A;M+=2){for(H=M+k-w,M===w-A||M!==w+A&&o[H+1]<=o[H-1]?o[H]=o[H+1]-1:o[H]=o[H-1],J=o[H]-1,W=J-d+g-M;J>=d&&W>=g&&e[J]===t[W];)o[H]=J--,W--;if(w%2===0&&-A<=M&&M<=A&&o[H]<=s[H+w])return a(o[H],M+d-g,p,y)}}return null},u=[];return i(0,e.length,0,t.length,u),u},SE=e=>ce(e)?e.outerHTML:X(e)?To.encodeRaw(e.data,!1):No(e)?"<!--"+e.data+"-->":"",HM=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},WM=(e,t,n)=>{const s=HM(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},VM=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},jM=(e,t)=>{let n=0;R(e,s=>{s[0]===Im?n++:s[0]===_E?(WM(t,s[1],n),n++):s[0]===wE&&VM(t,n)})},qM=e=>j(V(Et(e.childNodes),SE),t=>t.length>0),KM=(e,t)=>{const n=V(Et(t.childNodes),SE);return jM(zM(n,e),t),t},GM=Zo(()=>document.implementation.createHTMLDocument("undo")),YM=e=>e.indexOf("</iframe>")!==-1,XM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),QM=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Dc=e=>{const t=qM(e.getBody()),n=et(t,o=>{const r=hy(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return YM(s)?XM(n):QM(s)},Fm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?KM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:oe(s)&&nC(s)?!s.isFakeCaret:!0}),s&&e.selection.moveToBookmark(s)},$m=e=>e.type==="fragmented"?e.fragments.join(""):e.content,xE=e=>{const t=x.fromTag("body",GM());return Al(t,$m(e)),R(gn(t,"*[data-mce-bogus]"),ko),Kh(t)},ZM=(e,t)=>$m(e)===$m(t),JM=(e,t)=>xE(e)===xE(t),Lm=(e,t)=>!e||!t?!1:ZM(e,t)?!0:JM(e,t),Mm=e=>e.get()===0,Bc=(e,t,n)=>{Mm(n)&&(e.typing=t)},kE=(e,t)=>{e.typing&&(Bc(e,!1,t),e.add())},eU=e=>{e.typing&&(e.typing=!1,e.add())},tU=(e,t,n)=>{Mm(t)&&n.set(Kf(e.selection))},nU=(e,t,n,s,o,r,i)=>{const a=Dc(e),c=Q.extend(r||{},a);if(!Mm(s)||e.removed)return null;const u=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:u,originalEvent:i}).isDefaultPrevented()||u&&Lm(u,c))return null;t.data[n.get()]&&o.get().each(g=>{t.data[n.get()].beforeBookmark=g});const d=V1(e);if(d&&t.data.length>d){for(let g=0;g<t.data.length-1;g++)t.data[g]=t.data[g+1];t.data.length--,n.set(t.data.length)}c.bookmark=Kf(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const p={level:c,lastLevel:u,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",p),e.dispatch("change",p)):e.dispatch("AddUndo",p),c},sU=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},oU=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Fm(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},rU=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Fm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},iU=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Bc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Fm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},aU=e=>{e.clear(),e.add()},lU=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Lm(Dc(e),t.data[0]),cU=(e,t)=>t.get()<e.data.length-1&&!e.typing,uU=(e,t,n)=>(kE(e,t),e.beforeChange(),e.ignore(n),e.add()),fU=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},dU=(e,t)=>{const n=e.dom,s=oe(t)?t:e.getBody();R(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=X1(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=Pv(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},NE=e=>({init:{bindEvents:$e},undoManager:{beforeChange:(t,n)=>tU(e,t,n),add:(t,n,s,o,r,i)=>nU(e,t,n,s,o,r,i),undo:(t,n,s)=>iU(e,t,n,s),redo:(t,n)=>rU(e,t,n),clear:(t,n)=>sU(e,t,n),reset:t=>aU(t),hasUndo:(t,n)=>lU(e,t,n),hasRedo:(t,n)=>cU(t,n),transact:(t,n,s)=>uU(t,n,s),ignore:(t,n)=>fU(t,n),extra:(t,n,s,o)=>oU(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>mm(e,t,n,s,o),matchAll:(t,n)=>E$(e,t,n),matchNode:(t,n,s,o)=>Vs(e,t,n,s,o),canApply:t=>w$(e,t),closest:t=>_$(e,t),apply:(t,n,s)=>z0(e,t,n,s),remove:(t,n,s,o)=>L0(e,t,n,s,o),toggle:(t,n,s)=>cL(e,t,n,s),formatChanged:(t,n,s,o,r)=>lL(e,t,n,s,o,r)},editor:{getContent:t=>JB(e,t),setContent:(t,n)=>v$(e,t,n),insertContent:(t,n)=>g$(e,t,n),addVisual:t=>dU(e,t)},selection:{getContent:(t,n)=>UM(e,t,n)},autocompleter:{addDecoration:t=>zB(e,t),removeDecoration:()=>WB(e,x.fromDom(e.getBody()))},raw:{getModel:()=>b.none()}}),mU=e=>{const t=u=>it(u)?u:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(u,d,p)=>s.transact(p),ignore:(u,d)=>s.ignore(d),extra:(u,d,p,g)=>s.extra(p,g)},formatter:{match:(u,d,p,g)=>o.match(u,t(d),g),matchAll:o.matchAll,matchNode:o.matchNode,canApply:u=>o.canApply(u),closest:u=>o.closest(u),apply:(u,d,p)=>o.apply(u,t(d)),remove:(u,d,p,g)=>o.remove(u,t(d)),toggle:(u,d,p)=>o.toggle(u,t(d)),formatChanged:(u,d,p,g,y)=>o.formatChanged(d,p,g,y)},editor:{getContent:u=>r.getContent(u),setContent:(u,d)=>({content:r.setContent(u,d),html:""}),insertContent:(u,d)=>(r.insertContent(u),""),addVisual:r.addVisual},selection:{getContent:(u,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>b.some(c.getRawModel())}}},gU=()=>{const e=K(null),t=K("");return{init:{bindEvents:$e},undoManager:{beforeChange:$e,add:e,undo:e,redo:e,clear:$e,reset:$e,hasUndo:Ze,hasRedo:Ze,transact:e,ignore:$e,extra:$e},formatter:{match:Ze,matchAll:K([]),matchNode:K(void 0),canApply:Ze,closest:t,apply:$e,remove:$e,toggle:$e,formatChanged:K({unbind:$e})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:$e},selection:{getContent:t},autocompleter:{addDecoration:$e,removeDecoration:$e},raw:{getModel:K(b.none())}}},qs=e=>Fe(e.plugins,"rtc"),pU=e=>gt(e.plugins,"rtc").bind(t=>b.from(t.setup)),hU=e=>{const t=e;return pU(e).fold(()=>(t.rtcInstance=NE(e),b.none()),n=>(t.rtcInstance=gU(),b.some(()=>n().then(s=>(t.rtcInstance=mU(s),s.rtc.isRemote)))))},Um=e=>e.rtcInstance?e.rtcInstance:NE(e),At=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},bU=(e,t,n)=>{At(e).undoManager.beforeChange(t,n)},vU=(e,t,n,s,o,r,i)=>At(e).undoManager.add(t,n,s,o,r,i),CU=(e,t,n,s)=>At(e).undoManager.undo(t,n,s),yU=(e,t,n)=>At(e).undoManager.redo(t,n),EU=(e,t,n)=>{At(e).undoManager.clear(t,n)},_U=(e,t)=>{At(e).undoManager.reset(t)},wU=(e,t,n)=>At(e).undoManager.hasUndo(t,n),SU=(e,t,n)=>At(e).undoManager.hasRedo(t,n),xU=(e,t,n,s)=>At(e).undoManager.transact(t,n,s),kU=(e,t,n)=>{At(e).undoManager.ignore(t,n)},NU=(e,t,n,s,o)=>{At(e).undoManager.extra(t,n,s,o)},AU=(e,t,n,s,o)=>At(e).formatter.match(t,n,s,o),TU=(e,t,n)=>At(e).formatter.matchAll(t,n),RU=(e,t,n,s,o)=>At(e).formatter.matchNode(t,n,s,o),PU=(e,t)=>At(e).formatter.canApply(t),OU=(e,t)=>At(e).formatter.closest(t),DU=(e,t,n,s)=>{At(e).formatter.apply(t,n,s)},BU=(e,t,n,s,o)=>{At(e).formatter.remove(t,n,s,o)},IU=(e,t,n,s)=>{At(e).formatter.toggle(t,n,s)},FU=(e,t,n,s,o,r)=>At(e).formatter.formatChanged(t,n,s,o,r),$U=(e,t)=>Um(e).editor.getContent(t),LU=(e,t,n)=>Um(e).editor.setContent(t,n),MU=(e,t,n)=>Um(e).editor.insertContent(t,n),UU=(e,t,n)=>At(e).selection.getContent(t,n),zU=(e,t)=>At(e).editor.addVisual(t),AE=e=>At(e).init.bindEvents(),HU=(e,t)=>At(e).autocompleter.addDecoration(t),WU=e=>At(e).autocompleter.removeDecoration(),VU=(e,t={})=>{const n=t.format?t.format:"html";return UU(e,n,t)},TE=e=>e.dom.length===0?(Ct(e),b.none()):b.some(e),jU=(e,t)=>e.filter(n=>Pa.isBookmarkNode(n.dom)).bind(t?sa:tr),qU=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(qd(o,r,!1,!s),n.setStart(r,i)):(qd(r,o,!1,!s),n.setEnd(r,i))},KU=(e,t)=>{Mn(e).each(n=>{const s=e.dom;t&&Fa(n,L(s,0))?Cc(s,0):!t&&$a(n,L(s,s.length))&&jd(s,s.length)})},RE=(e,t,n,s)=>{e.bind(o=>((s?jd:Cc)(o.dom,s?o.dom.length:0),t.filter(Ln).map(i=>qU(o,i,n,s)))).orThunk(()=>jU(t,s).or(t).filter(Ln).map(r=>KU(r,s)))},GU=(e,t)=>{const n=b.from(t.firstChild).map(x.fromDom),s=b.from(t.lastChild).map(x.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(tr).filter(Ln).bind(TE),r=s.bind(sa).filter(Ln).bind(TE);RE(o,n,e,!0),RE(r,s,e,!1),e.collapse(!1)},YU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),XU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Fo({validate:!1},e.schema).serialize(r)}else return t.content},QU=(e,t,n={})=>{const s=YU(n,t);Om(e,s).each(o=>{const r=XU(e,o),i=e.selection.getRng();GU(i,i.createContextualFragment(r)),e.selection.setRng(i),Da(e,i),Dm(e,r,o)})},PE=(e,t,n)=>{if(Fe(e,t)){const s=j(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var ZU=(e,t)=>{let n,s;const o=(a,c)=>ve(c,u=>e.is(u,a)),r=a=>e.getParents(a,void 0,e.getRoot()),i=()=>{n={},s={},t.on("NodeChange",a=>{const c=a.element,u=r(c),d={};ct(n,(p,g)=>{o(g,u).each(y=>{s[g]||(R(p,_=>{_(!0,{node:y,selector:g,parents:u})}),s[g]=p),d[g]=p})}),ct(s,(p,g)=>{d[g]||(delete s[g],R(p,y=>{y(!1,{node:c,selector:g,parents:u})}))})})};return{selectorChangedWithUnbind:(a,c)=>(n||i(),n[a]||(n[a]=[]),n[a].push(c),o(a,r(t.selection.getStart())).each(()=>{s[a]=n[a]}),{unbind:()=>{PE(n,a,c),PE(s,a,c)}})}};const OE=e=>!!(e&&e.ownerDocument)&&ao(x.fromDom(e.ownerDocument),x.fromDom(e)),JU=e=>e?OE(e.startContainer)&&OE(e.endContainer):!1,DE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=ZU(e,s),a=(Z,Re)=>{const Oe=e.createRng();oe(Z)&&oe(Re)?(Oe.setStart(Z,Re),Oe.setEnd(Z,Re),A(Oe),w(!1)):(dd(e,Oe,s.getBody(),!0),A(Oe))},c=Z=>VU(s,Z),u=(Z,Re)=>QU(s,Z,Re),d=Z=>ly(s.getBody(),k(),Z),p=Z=>cy(s.getBody(),k(),Z),g=(Z,Re)=>Je.getBookmark(Z,Re),y=Z=>Je.moveToBookmark(Z),_=(Z,Re)=>(BB(e,Z,Re).each(A),Z),C=()=>{const Z=k(),Re=S();return!Z||Z.item?!1:Z.compareEndPoints?Z.compareEndPoints("StartToEnd",Z)===0:!Re||Z.collapsed},w=Z=>{const Re=k();Re.collapse(!!Z),A(Re)},S=()=>t.getSelection?t.getSelection():t.document.selection,k=()=>{let Z;const Re=(xe,wt,ie)=>{try{return wt.compareBoundaryPoints(xe,ie)}catch{return-1}},Oe=t.document;if(oe(s.bookmark)&&!yr(s)){const xe=Pd(s);if(xe.isSome())return xe.map(wt=>Id(s,[wt])[0]).getOr(Oe.createRange())}try{const xe=S();xe&&!Rl(xe.anchorNode)&&(xe.rangeCount>0?Z=xe.getRangeAt(0):Z=Oe.createRange(),Z=Id(s,[Z])[0])}catch{}if(Z||(Z=Oe.createRange()),ra(Z.startContainer)&&Z.collapsed){const xe=e.getRoot();Z.setStart(xe,0),Z.setEnd(xe,0)}return o&&r&&(Re(Z.START_TO_START,Z,o)===0&&Re(Z.END_TO_END,Z,o)===0?Z=r:(o=null,r=null)),Z},A=(Z,Re)=>{if(!JU(Z))return;const Oe=S();if(Z=s.dispatch("SetSelectionRange",{range:Z,forward:Re}).range,Oe){r=Z;try{Oe.removeAllRanges(),Oe.addRange(Z)}catch{}Re===!1&&Oe.extend&&(Oe.collapse(Z.endContainer,Z.endOffset),Oe.extend(Z.startContainer,Z.startOffset)),o=Oe.rangeCount>0?Oe.getRangeAt(0):null}if(!Z.collapsed&&Z.startContainer===Z.endContainer&&(Oe==null?void 0:Oe.setBaseAndExtent)&&Z.endOffset-Z.startOffset<2&&Z.startContainer.hasChildNodes()){const wt=Z.startContainer.childNodes[Z.startOffset];wt&&wt.nodeName==="IMG"&&(Oe.setBaseAndExtent(Z.startContainer,Z.startOffset,Z.endContainer,Z.endOffset),(Oe.anchorNode!==Z.startContainer||Oe.focusNode!==Z.endContainer)&&Oe.setBaseAndExtent(wt,0,wt,1))}s.dispatch("AfterSetSelectionRange",{range:Z,forward:Re})},M=Z=>(u(e.getOuterHTML(Z)),Z),H=()=>OB(s.getBody(),k()),J=(Z,Re)=>DB(e,k(),Z,Re),W=()=>{const Z=S(),Re=Z==null?void 0:Z.anchorNode,Oe=Z==null?void 0:Z.focusNode;if(!Z||!Re||!Oe||Rl(Re)||Rl(Oe))return!0;const xe=e.createRng(),wt=e.createRng();try{xe.setStart(Re,Z.anchorOffset),xe.collapse(!0),wt.setStart(Oe,Z.focusOffset),wt.collapse(!0)}catch{return!0}return xe.compareBoundaryPoints(xe.START_TO_START,wt)<=0},We={dom:e,win:t,serializer:n,editor:s,collapse:w,setCursorLocation:a,getContent:c,setContent:u,getBookmark:g,moveToBookmark:y,select:_,isCollapsed:C,isForward:W,setNode:M,getNode:H,getSel:S,setRng:A,getRng:k,getStart:d,getEnd:p,getSelectedBlocks:J,normalize:()=>{const Z=k(),Re=S();if(!hO(Re)&&ic(s)){const Oe=mc(e,Z);return Oe.each(xe=>{A(xe,W())}),Oe.getOr(Z)}return Z},selectorChanged:(Z,Re)=>(i(Z,Re),We),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Z,Re=e.getRoot();for(;Re&&Re.nodeName!=="BODY";){if(Re.scrollHeight>Re.clientHeight){Z=Re;break}Re=Re.parentNode}return Z},scrollIntoView:(Z,Re)=>{oe(Z)?JD(s,Z,Re):Da(s,k(),Re)},placeCaretAt:(Z,Re)=>A(zC(Z,Re,s.getDoc())),getBoundingClientRect:()=>{const Z=k();return Z.collapsed?L.fromRangeStart(Z).getClientRects()[0]:Z.getBoundingClientRect()},destroy:()=>{t=o=r=null,$t.destroy()}},Je=Pa(We),$t=FC(We,s);return We.bookmarkManager=Je,We.controlSelection=$t,We},ez=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const u=s[c];let d=u.attr(r);d!==void 0?(u.attr(o,d.length>0?d:null),u.attr(r,null)):(d=u.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),u.name):i&&(d=i.call(a,d,o,u.name)),u.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(a.firstChild).exists(u=>{var d;return!Il((d=u.value)!==null&&d!==void 0?d:"")})?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{var o;let r=s.length;for(;r--;){const i=s[r].firstChild;i&&(i.value=To.decode((o=i.value)!==null&&o!==void 0?o:""))}}),e.addNodeFilter("script,style",(s,o)=>{var r;const i=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let a=s.length;for(;a--;){const c=s[a],u=c.firstChild,d=(r=u==null?void 0:u.value)!==null&&r!==void 0?r:"";if(o==="script"){const p=c.attr("type");p&&c.attr("type",p==="mce-no/type"?null:p.replace(/^mce\-/,"")),t.element_format==="xhtml"&&u&&d.length>0&&(u.value=`// <![CDATA[
`+i(d)+`
// ]]>`)}else t.element_format==="xhtml"&&u&&d.length>0&&(u.value=`<!--
`+i(d)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],i=r.value;t.preserve_cdata&&(i==null?void 0:i.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):(i==null?void 0:i.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{R(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},tz=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},nz=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");Q.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return zO(e,{...n,node:r}),s&&(o.doc=s),r},sz=(e,t)=>oe(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,oz=(e,t,n)=>sz(e,n)?nz(e,t,n):t,rz=(e,t,n)=>{Q.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},iz=(e,t,n)=>!t.no_events&&e?HO(e,{...t,content:n}).content:n,az=(e,t,n)=>{const s=uo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Bl(x.fromDom(t))?s:Q.trim(s)},lz=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return tz(o),o},cz=(e,t,n)=>Fo(e,t).serialize(n),uz=(e,t,n,s,o)=>{const r=cz(t,n,s);return iz(e,o,r)},fz=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:rt.DOM,o=t&&t.schema?t.schema:Ro(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=yi(e,o);ez(r,e,s);const i=(a,c={})=>{const u={format:"html",...c},d=oz(t,a,u),p=az(s,d,u),g=lz(r,p,u);return u.format==="tree"?g:uz(t,e,o,g,u)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(rz,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},BE=(e,t)=>{const n=fz(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},dz="html",mz=(e,t)=>({...e,format:t,get:!0,getInner:!0}),gz=(e,t={})=>{const n=t.format?t.format:dz,s=mz(t,n);return mE(e,s).fold(Rt,o=>{const r=$U(e,o);return gE(e,r,o)})},pz="html",hz=(e,t)=>({format:pz,...e,set:!0,content:t}),zm=(e,t,n={})=>{const s=hz(n,t);return Om(e,s).map(o=>{const r=LU(e,o.content,o);return Dm(e,r.html,o),r.content}).getOr(t)},bz="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vz="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Cz=e=>{const t=j(bz,s=>Fe(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),_o(t)},yz=e=>{const t=Q.makeMap(e.plugins," "),s=j(vz,o=>Fe(t,o));return _o(s)},Ez=(e,t)=>{const n=Cz(e),s=yz(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",u=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+u+d)}},_z=(e,t)=>{Ez(e,t)},Ic=rt.DOM,wz=e=>{Ic.setStyle(e.id,"display",e.orgDisplay)},Fc=e=>b.from(e).each(t=>t.destroy()),Sz=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},xz=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Ic.unbind(t,"submit reset",e.formEventDelegate))},kz=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&oe(o==null?void 0:o.nextSibling)&&Ic.remove(o.nextSibling),WO(e),e.editorManager.remove(e),!e.inline&&s&&wz(e),VO(e),Ic.remove(e.getContainer()),Fc(t),Fc(n),e.destroy()}},Nz=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Fc(n),Fc(s)),xz(e),Sz(e),e.destroyed=!0}},$c=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Fe(e,o)}})(),Ei=on.ModelManager,IE=(e,t)=>t.dom[e],FE=(e,t)=>parseInt(Is(t,e),10),Az=re(IE,"clientWidth"),Tz=re(IE,"clientHeight"),Rz=re(FE,"margin-top"),Pz=re(FE,"margin-left"),Oz=e=>e.dom.getBoundingClientRect(),Dz=(e,t,n)=>{const s=Az(e),o=Tz(e);return t>=0&&n>=0&&t<=s&&n<=o},Bz=(e,t,n,s)=>{const o=Oz(t),r=e?o.left+t.dom.clientLeft+Pz(t):0,i=e?o.top+t.dom.clientTop+Rz(t):0,a=n-r,c=s-i;return{x:a,y:c}},Iz=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.inline?s:uA(s),r=Bz(e.inline,o,t,n);return Dz(o,r.x,r.y)},Fz=e=>b.from(e).map(x.fromDom),$z=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return Fz(t).map(Kr).getOr(!1)};var Lz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const $E=e=>{const t=[],n=()=>{const g=e.theme;return g&&g.getNotificationManagerImpl?g.getNotificationManagerImpl():Lz()},s=()=>b.from(t[0]),o=(g,y)=>g.type===y.type&&g.text===y.text&&!g.progressBar&&!g.timeout&&!y.progressBar&&!y.timeout,r=()=>{R(t,g=>{g.reposition()})},i=g=>{t.push(g)},a=g=>{Le(t,y=>y===g).each(y=>{t.splice(y,1)})},c=(g,y=!0)=>e.removed||!$z(e)?{}:(y&&e.dispatch("BeforeOpenNotification",{notification:g}),ve(t,_=>o(n().getArgs(_),g)).getOrThunk(()=>{e.editorManager.setActive(e);const _=n().open(g,()=>{a(_),r(),s().fold(()=>e.focus(),C=>ey(x.fromDom(C.getEl())))});return i(_),r(),e.dispatch("OpenNotification",{notification:{..._}}),_})),u=()=>{s().each(g=>{n().close(g),a(g),r()})},d=K(t);return(g=>{g.on("SkinLoaded",()=>{const y=O1(g);y&&c({text:y,type:"warning",timeout:0},!1),r()}),g.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),g.on("remove",()=>{R(t.slice(),y=>{n().close(y)})})})(e),{open:c,close:u,getNotifications:d}},_i=on.PluginManager,kr=on.ThemeManager;var Mz=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const LE=e=>{let t=[];const n=()=>{const C=e.theme;return C&&C.getWindowManagerImpl?C.getWindowManagerImpl():Mz()},s=(C,w)=>(...S)=>w?w.apply(C,S):void 0,o=C=>{e.dispatch("OpenWindow",{dialog:C})},r=C=>{e.dispatch("CloseWindow",{dialog:C})},i=C=>{t.push(C),o(C)},a=C=>{r(C),t=j(t,w=>w!==C),t.length===0&&e.focus()},c=()=>b.from(t[t.length-1]),u=C=>{e.editorManager.setActive(e),Rd(e),e.ui.show();const w=C();return i(w),w},d=(C,w)=>u(()=>n().open(C,w,a)),p=C=>u(()=>n().openUrl(C,a)),g=(C,w,S)=>{const k=n();k.alert(C,s(S||k,w))},y=(C,w,S)=>{const k=n();k.confirm(C,s(S||k,w))},_=()=>{c().each(C=>{n().close(C),a(C)})};return e.on("remove",()=>{R(t,C=>{n().close(C)})}),{open:d,openUrl:p,alert:g,confirm:y,close:_}},ME=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Lc=(e,t)=>{e._skinLoaded?ME(e,t):e.on("SkinLoaded",()=>{ME(e,t)})},Uz=(e,t)=>{Lc(e,fs.translate(["Failed to upload image: {0}",t]))},Wa=(e,t,n)=>{TC(e,t,{message:n}),console.error(n)},Va=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,zz=(e,t,n)=>{Wa(e,"PluginLoadError",Va("plugin",t,n))},Hz=(e,t,n)=>{Wa(e,"IconsLoadError",Va("icons",t,n))},Wz=(e,t,n)=>{Wa(e,"LanguageLoadError",Va("language",t,n))},Vz=(e,t,n)=>{Wa(e,"ThemeLoadError",Va("theme",t,n))},jz=(e,t,n)=>{Wa(e,"ModelLoadError",Va("model",t,n))},qz=(e,t,n)=>{const s=fs.translate(["Failed to initialize plugin: {0}",t]);TC(e,"PluginLoadError",{message:s}),Mc(s,n),Lc(e,s)},Mc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Kz=e=>/^[a-z0-9\-]+$/i.test(e),Gz=e=>UE(e,k1(e)),Yz=e=>UE(e,Nv(e)),UE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return V(t,r=>Kz(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},Xz=e=>{e.contentCSS=e.contentCSS.concat(Gz(e),Yz(e))},Qz=vt,Zz=(e,t,n)=>PA(e,t,Qz,n),Jz=e=>e?Et(e.getElementsByTagName("img")):[],eH=(e,t)=>{const n={};return{findAll:(o,r=vt)=>{const i=j(Jz(o),c=>{const u=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!u||u===Ke.transparentSrc?!1:Xt(u,"blob:")?!e.isUploaded(u)&&r(c):Xt(u,"data:")?r(c):!1}),a=V(i,c=>{const u=c.src;if(Fe(n,u))return n[u].then(d=>de(d)?d:{image:c,blobInfo:d.blobInfo});{const d=XL(t,u).then(p=>(delete n[u],{image:c,blobInfo:p})).catch(p=>(delete n[u],p));return n[u]=d,d}});return Promise.all(a)}}},zE=()=>{let n={};const s=(g,y)=>({status:g,resultUri:y}),o=g=>g in n;return{hasBlobUri:o,getResultUri:g=>{const y=n[g];return y?y.resultUri:null},isPending:g=>o(g)?n[g].status===1:!1,isUploaded:g=>o(g)?n[g].status===2:!1,markPending:g=>{n[g]=s(1,null)},markUploaded:(g,y)=>{n[g]=s(2,y)},removeFailed:g=>{delete n[g]},destroy:()=>{n={}}}};let tH=0;const nH=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},sH=e=>e+tH+++nH(),oH=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,g,y,_,C)=>{if(de(p))return s({id:p,name:_,filename:C,blob:g,base64:y});if(it(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const g=p.id||sH("blobid"),y=p.name||g,_=p.blob;return{id:K(g),name:K(y),filename:K(p.filename||y+"."+t(_.type)),blob:K(_),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(_)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>ve(e,p).getOrUndefined(),i=p=>r(g=>g.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(g=>g.blobUri()===p),getByData:(p,g)=>r(y=>y.base64()===p&&y.blob().type===g),findFirst:r,removeByUri:p=>{e=j(e,g=>g.blobUri()===p?(URL.revokeObjectURL(g.blobUri()),!1):!0)},destroy:()=>{R(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},rH=(e,t)=>{const n={},s=(C,w)=>C?C.replace(/\/$/,"")+"/"+w.replace(/^\//,""):w,o=(C,w)=>new Promise((S,k)=>{const A=new XMLHttpRequest;A.open("POST",t.url),A.withCredentials=t.credentials,A.upload.onprogress=H=>{w(H.loaded/H.total*100)},A.onerror=()=>{k("Image upload failed due to a XHR Transport error. Code: "+A.status)},A.onload=()=>{if(A.status<200||A.status>=300){k("HTTP Error: "+A.status);return}const H=JSON.parse(A.responseText);if(!H||!de(H.location)){k("Invalid JSON: "+A.responseText);return}S(s(t.basePath,H.location))};const M=new FormData;M.append("file",C.blob(),C.filename()),A.send(M)}),r=He(t.handler)?t.handler:o,i=()=>new Promise(C=>{C([])}),a=(C,w)=>({url:w,blobInfo:C,status:!0}),c=(C,w)=>({url:"",blobInfo:C,status:!1,error:w}),u=(C,w)=>{Q.each(n[C],S=>{S(w)}),delete n[C]},d=(C,w,S)=>(e.markPending(C.blobUri()),new Promise(k=>{let A,M;try{const H=()=>{A&&(A.close(),M=$e)},J=F=>{H(),e.markUploaded(C.blobUri(),F),u(C.blobUri(),a(C,F)),k(a(C,F))},W=F=>{H(),e.removeFailed(C.blobUri()),u(C.blobUri(),c(C,F)),k(c(C,F))};M=F=>{F<0||F>100||b.from(A).orThunk(()=>b.from(S).map(Wi)).each($=>{A=$,$.progressBar.value(F)})},w(C,M).then(J,F=>{W(de(F)?{message:F}:F)})}catch(H){k(c(C,H))}})),p=C=>C===o,g=C=>{const w=C.blobUri();return new Promise(S=>{n[w]=n[w]||[],n[w].push(S)})},y=(C,w)=>(C=Q.grep(C,S=>!e.isUploaded(S.blobUri())),Promise.all(Q.map(C,S=>e.isPending(S.blobUri())?g(S):d(S,r,w))));return{upload:(C,w)=>!t.url&&p(r)?i():y(C,w)}},HE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),WE=(e,t)=>rH(t,{url:C1(e),basePath:y1(e),credentials:E1(e),handler:_1(e)}),iH=e=>{const t=zE(),n=WE(e,t);return{upload:(s,o=!0)=>n.upload(s,o?HE(e):void 0)}},aH=e=>{const t=oH();let n,s;const o=zE(),r=[],i=A=>M=>e.selection?A(M):[],a=A=>A+(A.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(A,M,H)=>{let J=0;do J=A.indexOf(M,J),J!==-1&&(A=A.substring(0,J)+H+A.substr(J+M.length),J+=H.length-M.length+1);while(J!==-1);return A},u=(A,M,H)=>{const J=`src="${H}"${H===Ke.transparentSrc?' data-mce-placeholder="1"':""}`;return A=c(A,`src="${M}"`,J),A=c(A,'data-mce-src="'+M+'"','data-mce-src="'+H+'"'),A},d=(A,M)=>{R(e.undoManager.data,H=>{H.type==="fragmented"?H.fragments=V(H.fragments,J=>u(J,A,M)):H.content=u(H.content,A,M)})},p=(A,M)=>{const H=e.convertURL(M,"src");d(A.src,M),wo(x.fromDom(A),{src:wv(e)?a(M):M,"data-mce-src":H})},g=()=>(n||(n=WE(e,o)),w().then(i(A=>{const M=V(A,H=>H.blobInfo);return n.upload(M,HE(e)).then(i(H=>{const J=[];let W=!1;const F=V(H,($,ee)=>{const{blobInfo:me,image:be}=A[ee];let Te=!1;return $.status&&b1(e)?($.url&&!en(be.src,$.url)&&(W=!0),t.removeByUri(be.src),qs(e)||p(be,$.url)):$.error&&($.error.remove&&(d(be.src,Ke.transparentSrc),J.push(be),Te=!0),Uz(e,$.error.message)),{element:be,status:$.status,uploadUri:$.url,blobInfo:me,removed:Te}});return J.length>0&&!qs(e)?e.undoManager.transact(()=>{R(J,$=>{e.dom.remove($),t.removeByUri($.src)})}):W&&e.undoManager.dispatchChange(),F}))}))),y=()=>_v(e)?g():Promise.resolve([]),_=A=>tt(r,M=>M(A)),C=A=>{r.push(A)},w=()=>(s||(s=eH(o,t)),s.findAll(e.getBody(),_).then(i(A=>{const M=j(A,H=>de(H)?(Lc(e,H),!1):!0);return qs(e)||R(M,H=>{d(H.image.src,H.blobInfo.blobUri()),H.image.src=H.blobInfo.blobUri(),H.image.removeAttribute("data-mce-src")}),M}))),S=()=>{t.destroy(),o.destroy(),s=n=null},k=A=>A.replace(/src="(blob:[^"]+)"/g,(M,H)=>{const J=o.getResultUri(H);if(J)return'src="'+J+'"';let W=t.getByUri(H);if(W||(W=Ee(e.editorManager.get(),(F,$)=>F||$.editorUpload&&$.editorUpload.blobCache.getByUri(H),void 0)),W){const F=W.blob();return'src="data:'+F.type+";base64,"+W.base64()+'"'}return M});return e.on("SetContent",()=>{_v(e)?y():w()}),e.on("RawSaveContent",A=>{A.content=k(A.content)}),e.on("GetContent",A=>{A.source_view||A.format==="raw"||A.format==="tree"||(A.content=k(A.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",A=>{R(A,M=>{const H=M.attr("src");if(!H||t.getByUri(H))return;const J=o.getResultUri(H);J&&M.attr("src",J)})})}),{blobCache:t,addFilter:C,uploadImages:g,uploadImagesAuto:y,scanForImages:w,destroy:S}},lH=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>ce(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{Q.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},VE={remove_similar:!0,inherit:!1},wi={selector:"td,th",...VE},cH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...wi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...wi},tablecellbordercolor:{styles:{borderColor:"%value"},...wi},tablecellclass:{classes:["%value"],...wi},tableclass:{selector:"table",classes:["%value"],...VE},tablecellborderstyle:{styles:{borderStyle:"%value"},...wi},tablecellborderwidth:{styles:{borderWidth:"%value"},...wi}},uH=K(cH),fH=e=>{const t={},n=i=>oe(i)?t[i]:t,s=i=>Fe(t,i),o=(i,a)=>{i&&(de(i)?(St(a)||(a=[a]),R(a,c=>{Yt(c.deep)&&(c.deep=!jn(c)),Yt(c.split)&&(c.split=!jn(c)||Wt(c)),Yt(c.remove)&&jn(c)&&!Wt(c)&&(c.remove="none"),jn(c)&&Wt(c)&&(c.mixed=!0,c.block_expand=!0),de(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):ct(i,(c,u)=>{o(u,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(lH(e)),o(uH()),o(I1(e)),{get:n,has:s,register:o,unregister:r}},Uc=Q.each,Gn=rt.DOM,Hm=e=>oe(e)&&it(e),jE=(e,t)=>{const n=t&&t.schema||Ro({}),s=(c,u)=>{u.classes.length>0&&Gn.addClass(c,u.classes.join(" ")),Gn.setAttribs(c,u.attrs)},o=c=>{const u=de(c)?{name:c,classes:[],attrs:{}}:c,d=Gn.create(u.name);return s(d,u),d},r=(c,u)=>{const d=n.getElementRule(c.nodeName.toLowerCase()),p=d==null?void 0:d.parentsRequired;return p&&p.length?u&&z(p,u)?u:p[0]:!1},i=(c,u,d)=>{let p;const g=u[0],y=Hm(g)?g.name:void 0,_=r(c,y);if(_)y===_?(p=g,u=u.slice(1)):p=_;else if(g)p=g,u=u.slice(1);else if(!d)return c;const C=p?o(p):Gn.create("div");C.appendChild(c),d&&Q.each(d,S=>{const k=o(S);C.insertBefore(k,c)});const w=Hm(p)?p.siblings:void 0;return i(C,u,w)},a=Gn.create("div");if(e.length>0){const c=e[0],u=o(c),d=Hm(c)?c.siblings:void 0;a.appendChild(i(u,e.slice(1),d))}return a},dH=e=>{e=Q.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":Q.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},mH=e=>de(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=Q.map(t.split(/(?:~\+|~|\+)/),dH),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],gH=(e,t)=>{let n="",s=F1(e);if(s==="")return"";const o=g=>de(g)?g.replace(/%(\w+)/g,""):"",r=(g,y)=>Gn.getStyle(y!=null?y:e.getBody(),g,!0);if(de(t)){const g=e.formatter.get(t);if(!g)return"";t=g[0]}if("preview"in t){const g=t.preview;if(g===!1)return"";s=g||s}let i=t.block||t.inline||"span",a;const c=mH(t.selector);c.length>0?(c[0].name||(c[0].name=i),i=t.selector,a=jE(c,e)):a=jE([i],e);const u=Gn.select(i,a)[0]||a.firstChild;Uc(t.styles,(g,y)=>{const _=o(g);_&&Gn.setStyle(u,y,_)}),Uc(t.attributes,(g,y)=>{const _=o(g);_&&Gn.setAttrib(u,y,_)}),Uc(t.classes,g=>{const y=o(g);Gn.hasClass(u,y)||Gn.addClass(u,y)}),e.dispatch("PreviewFormats"),Gn.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const d=r("fontSize"),p=/px$/.test(d)?parseInt(d,10):0;return Uc(s.split(" "),g=>{let y=r(g,u);if(!(g==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(y)&&(y=r(g),rc(y).toLowerCase()==="#ffffff"))&&!(g==="color"&&rc(y).toLowerCase()==="#000000")){if(g==="font-size"&&/em|%$/.test(y)){if(p===0)return;y=parseFloat(y)/(/%$/.test(y)?100:1)*p+"px"}g==="border"&&y&&(n+="padding:0 2px;"),n+=g+":"+y+";"}}),e.dispatch("AfterPreviewFormats"),Gn.remove(a),n},pH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},qE=e=>{const t=fH(e),n=zt({});return pH(e),D$(e),qs(e)||rL(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{DU(e,s,o,r)},remove:(s,o,r,i)=>{BU(e,s,o,r,i)},toggle:(s,o,r)=>{IU(e,s,o,r)},match:(s,o,r,i)=>AU(e,s,o,r,i),closest:s=>OU(e,s),matchAll:(s,o)=>TU(e,s,o),matchNode:(s,o,r,i)=>RU(e,s,o,r,i),canApply:s=>PU(e,s),formatChanged:(s,o,r,i)=>FU(e,n,s,o,r,i),getCssText:re(gH,e)}},KE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},hH=(e,t,n)=>{const s=zt(!1),o=c=>{Bc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const u=c.command;KE(u)||(kE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const u=c.command;KE(u)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const u=c.keyCode;c.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||u===45||c.ctrlKey)&&(o(),e.nodeChanged()),(u===46||u===8)&&e.nodeChanged(),s.get()&&t.typing&&!Lm(Dc(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;if(u>=33&&u<=36||u>=37&&u<=40||u===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(u<16||u>20)&&u!==224&&u!==91&&!t.typing&&!d&&(t.beforeChange(),Bc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},bH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},GE=e=>{const t=Po(),n=zt(0),s=zt(0),o={data:[],typing:!1,beforeChange:()=>{bU(e,n,t)},add:(r,i)=>vU(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0);const r=Dc(e);r.bookmark=Kf(e.selection),e.dispatch("change",{level:r,lastLevel:so(o.data,s.get()).getOrUndefined()})},undo:()=>CU(e,o,n,s),redo:()=>yU(e,s,o.data),clear:()=>{EU(e,o,s)},reset:()=>{_U(e,o)},hasUndo:()=>wU(e,o,s),hasRedo:()=>SU(e,o,s),transact:r=>xU(e,o,n,r),ignore:r=>{kU(e,n,r)},extra:(r,i)=>{NU(e,o,s,r,i)}};return qs(e)||hH(e,o,n),bH(e),o},vH=[9,27,ge.HOME,ge.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ge.DOWN,ge.UP,ge.LEFT,ge.RIGHT].concat(Ke.browser.isFirefox()?[224]:[]),YE="data-mce-placeholder",XE=e=>e.type==="keydown"||e.type==="keyup",QE=e=>{const t=e.keyCode;return t===ge.BACKSPACE||t===ge.DELETE},CH=e=>{if(XE(e)){const t=e.keyCode;return!QE(e)&&(ge.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||z(vH,t))}else return!1},yH=e=>XE(e)&&!(QE(e)||e.type==="keyup"&&e.keyCode===229),EH=(e,t,n)=>{if(qt(x.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},_H=e=>{var t;const n=e.dom,s=Rn(e),o=(t=P1(e))!==null&&t!==void 0?t:"",r=(i,a)=>{if(CH(i))return;const c=e.getBody(),u=yH(i)?!1:EH(n,c,s);(n.getAttrib(c,YE)!==""!==u||a)&&(n.setAttrib(c,YE,u?o:null),n.setAttrib(c,"aria-placeholder",u?o:null),QO(e,u),e.on(u?"keydown":"keyup",r),e.off(u?"keyup":"keydown",r))};Os(o)&&e.on("init",i=>{r(i,!0),e.on("change SetContent ExecCommand",r),e.on("paste",a=>qn.setEditorTimeout(e,()=>r(a)))})},wH=(e,t)=>({block:e,position:t}),SH=(e,t)=>({from:e,to:t}),Wm=(e,t)=>{const n=x.fromDom(e),s=x.fromDom(t.container());return yc(n,s).map(o=>wH(o,t))},xH=e=>!nt(e.from.block,e.to.block),kH=e=>Mn(e.from.block).bind(t=>Mn(e.to.block).filter(n=>nt(t,n))).isSome(),NH=e=>bt(e.from.block.dom)===!1&&bt(e.to.block.dom)===!1,AH=(e,t,n)=>Pt(n.position.getNode())&&!qt(n.block)?ci(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Hn(t,e,s).bind(o=>Wm(e,o)):b.some(n)).getOr(n):n,TH=(e,t,n)=>{const s=Wm(e,L.fromRangeStart(n)),o=s.bind(r=>Hn(t,e,r.position).bind(i=>Wm(e,i).map(a=>AH(e,t,a))));return mn(s,o,SH).filter(r=>xH(r)&&kH(r)&&NH(r))},RH=(e,t,n)=>n.collapsed?TH(e,t,n):b.none(),PH=e=>{const t=nn(e);return Le(t,us).fold(K(t),n=>t.slice(0,n))},ZE=e=>{const t=PH(e);return R(t,Ct),t},JE=(e,t)=>{const n=go(t,e);return ve(n.reverse(),s=>qt(s)).each(Ct)},OH=e=>j(Ih(e),t=>!qt(t)).length===0,DH=(e,t,n,s)=>{if(qt(n))return ar(n),hn(n.dom);OH(s)&&qt(t)&&Un(s,x.fromTag("br"));const o=Wn(n.dom,L.before(s.dom));return R(ZE(t),r=>{Un(s,r)}),JE(e,t),o},BH=(e,t,n)=>{if(qt(n))return Ct(n),qt(t)&&ar(t),hn(t.dom);const s=Hs(n.dom);return R(ZE(t),o=>{Ut(n,o)}),JE(e,t),s},IH=(e,t)=>{const n=go(t,e);return b.from(n[n.length-1])},FH=(e,t)=>ao(t,e)?IH(t,e):b.none(),e_=(e,t)=>{ci(e,t.dom).bind(n=>b.from(n.getNode())).map(x.fromDom).filter(ir).each(Ct)},t_=(e,t,n)=>(e_(!0,t),e_(!1,n),FH(t,n).fold(re(BH,e,t,n),re(DH,e,t,n))),n_=(e,t,n,s)=>t?t_(e,s,n):t_(e,n,s),Vm=(e,t)=>{const n=x.fromDom(e.getBody());return RH(n.dom,t,e.selection.getRng()).map(o=>()=>{n_(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},$H=(e,t)=>{const n=t.getRng();return mn(yc(e,x.fromDom(n.startContainer)),yc(e,x.fromDom(n.endContainer)),(s,o)=>nt(s,o)?b.none():b.some(()=>{n.deleteContents(),n_(e,!0,s,o).each(r=>{t.setRng(r.toRange())})})).getOr(b.none())},s_=(e,t)=>{const n=x.fromDom(t),s=re(nt,e);return Yr(n,Dl,s).isSome()},LH=(e,t)=>s_(e,t.startContainer)||s_(e,t.endContainer),MH=(e,t)=>{const n=Wn(e.dom,L.fromRangeStart(t)).isNone(),s=Sn(e.dom,L.fromRangeEnd(t)).isNone();return!LH(e,t)&&n&&s},UH=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),zH=e=>{const t=x.fromDom(e.getBody()),n=e.selection.getRng();return MH(t,n)?UH(e):$H(t,e.selection)},jm=(e,t)=>e.selection.isCollapsed()?b.none():zH(e),po=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),HH=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},ja=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(HH(t)),WH=(e,t,n)=>{const s=td(1,e.getBody(),t),o=L.fromRangeStart(s),r=o.getNode();if(_a(r))return po(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(_a(i))return po(1,e,i,!1,!1);const a=wr(e.dom.getRoot(),o.getNode());return _a(a)?po(1,e,a,!1,n):b.none()},qm=(e,t,n)=>t.collapsed?WH(e,t,n).getOr(t):t,VH=e=>Lo(e)||Ba(e),jH=e=>Mo(e)||Ia(e),qH=(e,t)=>{X(t)&&t.data.length===0&&e.remove(t)},o_=(e,t,n,s,o,r)=>{po(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),qH(e.dom,n)},KH=(e,t)=>{const n=e.selection.getRng();if(!X(n.commonAncestorContainer))return b.none();const s=t?Ht.Forwards:Ht.Backwards,o=zs(e.getBody()),r=re(nd,t?o.next:o.prev),i=t?VH:jH,a=Na(s,e.getBody(),n),c=r(a),u=c&&Kn(t,c);if(!u||!ec(a,u))return b.none();if(i(u))return b.some(()=>o_(e,n,a.getNode(),s,t,u));const d=r(u);return d&&i(d)&&ec(u,d)?b.some(()=>o_(e,n,a.getNode(),s,t,d)):b.none()},Km=(e,t)=>KH(e,t),Gm=(e,t)=>{const n=e.getBody();return t?hn(n).filter(Lo):Hs(n).filter(Mo)},Ym=e=>{const t=e.selection.getRng();return!t.collapsed&&(Gm(e,!0).exists(n=>n.isEqual(L.fromRangeStart(t)))||Gm(e,!1).exists(n=>n.isEqual(L.fromRangeEnd(t))))},GH=e=>oe(e)&&(Dl(x.fromDom(e))||la(x.fromDom(e))),Pn=Ls.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),YH=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return ce(n)&&n.getAttribute("data-mce-caret")===s},XH=(e,t,n,s)=>{const o=r=>yf(x.fromDom(r))&&!Ms(n,s,e);return qv(!t,n).fold(()=>qv(t,s).fold(Ze,o),o)},r_=(e,t,n,s)=>{const o=s.getNode(!t);return yc(x.fromDom(e),x.fromDom(n.getNode())).map(r=>qt(r)?Pn.remove(r.dom):Pn.moveToElement(o)).orThunk(()=>b.some(Pn.moveToElement(o)))},i_=(e,t,n)=>Hn(t,e,n).bind(s=>GH(s.getNode())||XH(e,t,n,s)?b.none():t&&bt(s.getNode())||!t&&bt(s.getNode(!0))?r_(e,t,n,s):t&&Mo(n)||!t&&Lo(n)?b.some(Pn.moveToPosition(s)):b.none()),QH=(e,t)=>lt(t)?b.none():e&&bt(t.nextSibling)?b.some(Pn.moveToElement(t.nextSibling)):!e&&bt(t.previousSibling)?b.some(Pn.moveToElement(t.previousSibling)):b.none(),ZH=(e,t,n)=>n.fold(s=>b.some(Pn.remove(s)),s=>b.some(Pn.moveToElement(s)),s=>Ms(t,s,e)?b.none():b.some(Pn.moveToPosition(s))),JH=(e,t,n)=>YH(t,n)?QH(t,n.getNode(!t)).orThunk(()=>i_(e,t,n)):i_(e,t,n).bind(s=>ZH(e,n,s)),e2=(e,t,n)=>{const s=td(t?1:-1,e,n),o=L.fromRangeStart(s),r=x.fromDom(e);return!t&&Mo(o)?b.some(Pn.remove(o.getNode(!0))):t&&Lo(o)?b.some(Pn.remove(o.getNode())):!t&&Lo(o)&&Hd(r,o)?dI(r,o).map(i=>Pn.remove(i.getNode())):t&&Mo(o)&&zd(r,o)?mI(r,o).map(i=>Pn.remove(i.getNode())):JH(e,t,o)},t2=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Er(e,t,x.fromDom(n)),!0),n2=(e,t)=>n=>{const s=t?L.before(n):L.after(n);return e.selection.setRng(s.toRange()),!0},s2=e=>t=>(e.selection.setRng(t.toRange()),!0),a_=(e,t)=>b.from(wr(e.getBody(),t)),o2=(e,t)=>{const n=e.selection.getNode();return a_(e,n).filter(bt).fold(()=>e2(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(t2(e,t),n2(e,t),s2(e))),()=>b.some($e))},r2=e=>{R(gn(e,".mce-offscreen-selection"),Ct)},i2=(e,t)=>{const n=e.selection.getNode();return bt(n)&&!Ol(n)?a_(e,n.parentNode).filter(bt).fold(()=>b.some(()=>{r2(x.fromDom(e.getBody())),Er(e,t,x.fromDom(e.selection.getNode())),Kd(e)}),()=>b.some($e)):Ym(e)?b.some(()=>{Yy(e,e.selection.getRng(),x.fromDom(e.getBody()))}):b.none()},l_=e=>{const t=e.dom,n=e.selection,s=wr(e.getBody(),n.getNode());if(Fs(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(L.before(o).toRange())}return!0},Xm=(e,t)=>e.selection.isCollapsed()?o2(e,t):i2(e,t),a2=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return Hn(t,e.getBody(),n).filter(s=>t?rI(s):iI(s)).bind(s=>ed(t?0:-1,s)).map(s=>()=>e.selection.select(s))},Qm=(e,t)=>e.selection.isCollapsed()?a2(e,t):b.none(),Si=X,c_=e=>Si(e)&&e.data[0]===Qt,u_=e=>Si(e)&&e.data[e.data.length-1]===Qt,f_=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Qt)},l2=e=>{var t;if(Si(e.previousSibling))return u_(e.previousSibling)||e.previousSibling.appendData(Qt),e.previousSibling;if(Si(e))return c_(e)||e.insertData(0,Qt),e;{const n=f_(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},c2=e=>{var t,n;if(Si(e.nextSibling))return c_(e.nextSibling)||e.nextSibling.insertData(0,Qt),e.nextSibling;if(Si(e))return u_(e)||e.appendData(Qt),e;{const s=f_(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},zc=(e,t)=>e?l2(t):c2(t),u2=re(zc,!0),f2=re(zc,!1),d_=(e,t)=>X(e.container())?zc(t,e.container()):zc(t,e.getNode()),m_=(e,t)=>{const n=t.get();return n&&e.container()===n&&ei(n)},Zm=(e,t)=>t.fold(n=>{pr(e.get());const s=u2(n);return e.set(s),b.some(L(s,s.length-1))},n=>hn(n).map(s=>{if(m_(s,e)){const o=e.get();return L(o,1)}else{pr(e.get());const o=d_(s,!0);return e.set(o),L(o,1)}}),n=>Hs(n).map(s=>{if(m_(s,e)){const o=e.get();return L(o,o.length-1)}else{pr(e.get());const o=d_(s,!1);return e.set(o),L(o,o.length-1)}}),n=>{pr(e.get());const s=f2(n);return e.set(s),b.some(L(s,1))}),g_=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},rn=Ls.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),p_=(e,t)=>{const n=Bo(t,e);return n||e},d2=(e,t,n)=>{const s=Vy(n),o=p_(t,s.container());return Uo(e,o,s).fold(()=>Sn(o,s).bind(re(Uo,e,o)).map(r=>rn.before(r)),b.none)},m2=(e,t)=>br(e,t)===null,h_=(e,t,n)=>Uo(e,t,n).filter(re(m2,t)),g2=(e,t,n)=>{const s=jy(n);return h_(e,t,s).bind(o=>Wn(o,s).isNone()?b.some(rn.start(o)):b.none())},p2=(e,t,n)=>{const s=Vy(n);return h_(e,t,s).bind(o=>Sn(o,s).isNone()?b.some(rn.end(o)):b.none())},h2=(e,t,n)=>{const s=jy(n),o=p_(t,s.container());return Uo(e,o,s).fold(()=>Wn(o,s).bind(re(Uo,e,o)).map(r=>rn.after(r)),b.none)},b_=e=>!jI(Jm(e)),Ks=(e,t,n)=>g_([d2,g2,p2,h2],[e,t,n]).filter(b_),Jm=e=>e.fold(Rt,Rt,Rt,Rt),v_=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Hc=e=>e.fold(rn.before,rn.before,rn.after,rn.after),eg=e=>e.fold(rn.start,rn.start,rn.end,rn.end),b2=(e,t)=>v_(e)===v_(t)&&Jm(e)===Jm(t),v2=(e,t,n,s,o,r)=>mn(Uo(t,n,s),Uo(t,n,o),(i,a)=>i!==a&&KI(n,i,a)?rn.after(e?i:a):r).getOr(r),C2=(e,t)=>e.fold(vt,n=>!b2(n,t)),y2=(e,t,n,s,o)=>{const r=Kn(e,o);return Hn(e,n,r).map(re(Kn,e)).fold(()=>s.map(Hc),c=>Ks(t,n,c).map(re(v2,e,t,n,r,c)).filter(re(C2,s))).filter(b_)},E2=(e,t)=>e?t.fold(It(b.some,rn.start),b.none,It(b.some,rn.after),b.none):t.fold(b.none,It(b.some,rn.before),b.none,It(b.some,rn.end)),_2=(e,t,n,s)=>{const o=Kn(e,s),r=Ks(t,n,o);return Ks(t,n,o).bind(re(E2,e)).orThunk(()=>y2(e,t,n,r,s))},w2=e=>He(e.selection.getSel().modify),C_=(e,t,n)=>{const s=e?1:-1;return t.setRng(L(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},S2=(e,t)=>{const n=t.selection.getRng(),s=e?L.fromRangeEnd(n):L.fromRangeStart(n);return w2(t)?e&&Sf(s)?C_(!0,t.selection,s):!e&&xf(s)?C_(!1,t.selection,s):!1:!1};var Gs;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Gs||(Gs={}));const Wc=(e,t)=>e===Ht.Backwards?xt(t):t,x2=(e,t,n)=>e===Ht.Forwards?t.next(n):t.prev(n),k2=(e,t,n,s)=>Pt(s.getNode(t===Ht.Forwards))?Gs.Br:Ms(n,s)===!1?Gs.Block:Gs.Wrap,y_=(e,t,n,s)=>{const o=zs(n);let r=s;const i=[];for(;r;){const a=x2(t,o,r);if(!a)break;if(Pt(a.getNode(!1)))return t===Ht.Forwards?{positions:Wc(t,i).concat([a]),breakType:Gs.Br,breakAt:b.some(a)}:{positions:Wc(t,i),breakType:Gs.Br,breakAt:b.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=k2(n,t,r,a);return{positions:Wc(t,i),breakType:c,breakAt:b.some(a)}}i.push(a),r=a}return{positions:Wc(t,i),breakType:Gs.Eol,breakAt:b.none()}},E_=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Ht.Backwards?r.concat(o):[o].concat(r)}).getOr([]),tg=(e,t)=>Ee(e,(n,s)=>n.fold(()=>b.some(s),o=>mn(Jt(o.getClientRects()),Jt(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),b.none()),Vc=(e,t)=>Jt(t.getClientRects()).bind(n=>tg(e,n.left)),qa=re(y_,L.isAbove,-1),Ka=re(y_,L.isBelow,1),__=re(E_,-1,qa),w_=re(E_,1,Ka),N2=(e,t)=>qa(e,t).breakAt.isNone(),A2=(e,t)=>Ka(e,t).breakAt.isNone(),T2=e=>hn(e).map(t=>[t].concat(Ka(e,t).positions)).getOr([]),R2=e=>Hs(e).map(t=>qa(e,t).positions.concat(t)).getOr([]),P2=(e,t)=>Vc(__(e,t),t),O2=(e,t)=>Vc(w_(e,t),t),D2=bt,S_=(e,t)=>Math.abs(e.left-t),x_=(e,t)=>Math.abs(e.right-t),B2=e=>Vr(e,"node"),k_=(e,t)=>yl(e,(n,s)=>{const o=Math.min(S_(n,t),x_(n,t)),r=Math.min(S_(s,t),x_(s,t));return r===o&&B2(s)&&D2(s.node)||r<o?s:n}),I2=e=>{const t=n=>V(n,s=>{const o=mr(s);return o.node=e,o});if(ce(e))return t(e.getClientRects());if(X(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},N_=e=>et(e,I2);var Ga;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ga||(Ga={}));const F2=(e,t,n,s)=>{let o=s;for(;o=Sa(o,e,bb,t);)if(n(o))return},A_=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let g=N_([p]);e===-1&&(g=g.reverse());for(let y=0;y<g.length;y++){const _=g[y];if(!n(_,u)){if(a.length>0&&t(_,Qo(a))&&i++,_.line=i,o(_))return!0;a.push(_)}}return!1},u=Qo(r.getClientRects());if(!u)return a;const d=r.getNode();return d&&(c(d),F2(e,s,c,d)),a},$2=(e,t)=>t.line>e,L2=(e,t)=>t.line===e,M2=re(A_,Ga.Up,ha,ba),U2=re(A_,Ga.Down,ba,ha),T_=e=>Qo(e.getClientRects()),z2=(e,t,n,s)=>{const o=zs(t);let r,i,a,c;const u=[];let d=0;e===1?(r=o.next,i=ba,a=ha,c=L.after(s)):(r=o.prev,i=ha,a=ba,c=L.before(s));const p=T_(c);do{if(!c.isVisible())continue;const g=T_(c);if(a(g,p))continue;u.length>0&&i(g,Qo(u))&&d++;const y=mr(g);if(y.position=c,y.line=d,n(y))return u;u.push(y)}while(c=r(c));return u},R_=e=>t=>$2(e,t),ng=e=>t=>L2(e,t),ho=(e,t)=>{e.selection.setRng(t),Da(e,e.selection.getRng())},sg=(e,t,n)=>b.some(qm(e,t,n)),P_=(e,t,n,s,o,r)=>{const i=t===Ht.Forwards,a=zs(e.getBody()),c=re(nd,i?a.next:a.prev),u=i?s:o;if(!n.collapsed){const _=ql(n);if(r(_))return po(t,e,_,t===Ht.Backwards,!1);if(Ym(e)){const C=n.cloneRange();return C.collapse(t===Ht.Backwards),b.from(C)}}const d=Na(t,e.getBody(),n);if(u(d))return ja(e,d.getNode(!i));let p=c(d);const g=gb(n);if(p)p=Kn(i,p);else return g?b.some(n):b.none();if(u(p))return po(t,e,p.getNode(!i),i,!1);const y=c(p);return y&&u(y)&&ec(p,y)?po(t,e,y.getNode(!i),i,!1):g?sg(e,p.toRange(),!1):b.none()},O_=(e,t,n,s,o,r)=>{const i=Na(t,e.getBody(),n),a=Qo(i.getClientRects()),c=t===Ga.Down,u=e.getBody();if(!a)return b.none();if(Ym(e)){const w=c?L.fromRangeEnd(n):L.fromRangeStart(n);return(c?O2:P2)(u,w).orThunk(()=>b.from(w)).map(k=>k.toRange())}const p=(c?U2:M2)(u,R_(1),i),g=j(p,ng(1)),y=a.left,_=k_(g,y);if(_&&r(_.node)){const w=Math.abs(y-_.left),S=Math.abs(y-_.right);return po(t,e,_.node,w<S,!1)}let C;if(s(i)?C=i.getNode():o(i)?C=i.getNode(!0):C=ql(n),C){const w=z2(t,u,R_(1),C);let S=k_(j(w,ng(1)),y);if(S||(S=Qo(j(w,ng(0))),S))return sg(e,S.position.toRange(),!1)}return g.length===0?og(e,c).filter(c?o:s).map(w=>qm(e,w.toRange(),!1)):b.none()},og=(e,t)=>{const n=e.selection.getRng(),s=t?L.fromRangeEnd(n):L.fromRangeStart(n),o=zP(s.container(),e.getBody());if(t){const r=Ka(o,s);return Mt(r.positions)}else{const r=qa(o,s);return Jt(r.positions)}},D_=(e,t,n)=>og(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),jc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},B_=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},I_=(e,t,n)=>Zm(t,n).map(s=>(jc(e,s),n)),H2=(e,t,n)=>{const s=L.fromRangeStart(e);if(e.collapsed)return s;{const o=L.fromRangeEnd(e);return n?Wn(t,o).getOr(o):Sn(t,s).getOr(s)}},W2=(e,t,n)=>{const s=e.getBody(),o=H2(e.selection.getRng(),s,n),r=re(_r,e);return _2(n,r,s,o).bind(a=>I_(e,t,a))},V2=(e,t,n)=>{const s=V(gn(x.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=j(s,e),r=j(n,e);R(wn(o,r),re(B_,!1)),R(wn(r,o),re(B_,!0))},j2=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=L.fromRangeStart(e.selection.getRng());L.isTextPosition(s)&&!GI(s)&&(jc(e,TP(n,s)),t.set(null))}},q2=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=j(s,e);R(o,r=>{const i=L.fromRangeStart(t.selection.getRng());Ks(e,t.getBody(),i).bind(a=>I_(t,n,a))})}},F_=(e,t,n)=>Ea(e)?W2(e,t,n).isSome():!1,$_=(e,t,n)=>Ea(t)?S2(e,t):!1,K2=e=>{const t=zt(null),n=re(_r,e);return e.on("NodeChange",s=>{Ea(e)&&(V2(n,e.dom,s.parents),j2(e,t),q2(n,e,t,s.parents))}),t},G2=re($_,!0),Y2=re($_,!1),qc=(e,t,n)=>{if(Ea(e)){const s=og(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?L.fromRangeEnd(o):L.fromRangeStart(o)});return Ks(re(_r,e),e.getBody(),s).exists(o=>{const r=Hc(o);return Zm(n,r).exists(i=>(jc(e,i),!0))})}else return!1},X2=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Q2=e=>mn(hn(e),Hs(e),(t,n)=>{const s=Kn(!0,t),o=Kn(!1,n);return Sn(e,s).forall(r=>r.isEqual(o))}).getOr(!0),L_=(e,t)=>n=>Zm(t,n).map(s=>()=>jc(e,s)),M_=(e,t,n,s)=>{const o=e.getBody(),r=re(_r,e);e.undoManager.ignore(()=>{e.selection.setRng(X2(n,s)),Ky(e),Ks(r,o,L.fromRangeStart(e.selection.getRng())).map(eg).bind(L_(e,t)).each(Xo)}),e.nodeChanged()},Z2=(e,t)=>{const n=Bo(t,e);return n||e},J2=(e,t,n,s)=>{const o=Z2(e.getBody(),s.container()),r=re(_r,e),i=Ks(r,o,s);return i.bind(c=>n?c.fold(K(b.some(eg(c))),b.none,K(b.some(Hc(c))),b.none):c.fold(b.none,K(b.some(Hc(c))),b.none,K(b.some(eg(c))))).map(L_(e,t)).getOrThunk(()=>{const c=nc(n,o,s),u=c.bind(d=>Ks(r,o,d));return mn(i,u,()=>Uo(r,o,s).bind(d=>Q2(d)?b.some(()=>{Er(e,n,x.fromDom(d))}):b.none())).getOrThunk(()=>u.bind(()=>c.map(d=>()=>{n?M_(e,t,s,d):M_(e,t,d,s)})))})},rg=(e,t,n)=>{if(e.selection.isCollapsed()&&Ea(e)){const s=L.fromRangeStart(e.selection.getRng());return J2(e,t,n,s)}return b.none()},e3=(e,t)=>{const n=go(t,e);return Le(n,us).fold(K(n),s=>n.slice(0,s))},t3=e=>Lh(e)===1,n3=(e,t,n,s)=>{const o=re(I$,t),r=V(j(s,o),i=>i.dom);if(r.length===0)Er(t,e,n);else{const i=B$(n.dom,r);t.selection.setRng(i.toRange())}},s3=(e,t)=>{const n=x.fromDom(e.getBody()),s=x.fromDom(e.selection.getStart()),o=j(e3(n,s),t3);return Mt(o).bind(r=>{const i=L.fromRangeStart(e.selection.getRng());return JI(t,i,r.dom)&&!F$(r)?b.some(()=>n3(t,e,r,o)):b.none()})},ig=(e,t)=>e.selection.isCollapsed()?s3(e,t):b.none(),ag=(e,t,n)=>oe(n)?b.some(()=>{e._selectionOverrides.hideFakeCaret(),Er(e,t,x.fromDom(n))}):b.none(),o3=(e,t)=>{const n=t?Ba:Ia,s=t?Ht.Forwards:Ht.Backwards,o=Na(s,e.getBody(),e.selection.getRng());return n(o)?ag(e,t,o.getNode(!t)):b.from(Kn(t,o)).filter(r=>n(r)&&ec(o,r)).bind(r=>ag(e,t,r.getNode(!t)))},r3=(e,t)=>{const n=e.selection.getNode();return $s(n)?ag(e,t,n):b.none()},lg=(e,t)=>e.selection.isCollapsed()?o3(e,t):r3(e,t),i3=e=>Xr(e,t=>Fs(t.dom)||bt(t.dom)).exists(t=>Fs(t.dom)),cg=e=>El(e!=null?e:"").getOr(0),U_=(e,t)=>{const n=e||nT(t)?"margin":"padding",s=Is(t,"direction")==="rtl"?"-right":"-left";return n+s},a3=(e,t,n,s,o,r)=>{const i=U_(n,x.fromDom(r)),a=cg(e.getStyle(r,i));if(t==="outdent"){const c=Math.max(0,a-s);e.setStyle(r,i,c?c+o:"")}else{const c=a+s+o;e.setStyle(r,i,c)}},l3=(e,t)=>tt(t,n=>{const s=U_(kv(e),n),o=Nl(n,s).map(cg).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),z_=e=>{const t=W_(e);return!e.mode.isReadOnly()&&(t.length>1||l3(e,t))},H_=e=>Ef(e)||la(e),c3=e=>Mn(e).exists(H_),W_=e=>j(xA(e.selection.getSelectedBlocks()),t=>!H_(t)&&!c3(t)&&i3(t)),V_=(e,t)=>{var n,s;const{dom:o}=e,r=x1(e),i=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",a=cg(r),c=kv(e);R(W_(e),u=>{a3(o,t,c,a,i,u.dom)})},u3=e=>V_(e,"indent"),j_=e=>V_(e,"outdent"),q_=e=>{if(e.selection.isCollapsed()&&z_(e)){const t=e.dom,n=e.selection.getRng(),s=L.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Ud(x.fromDom(o),s))return b.some(()=>j_(e))}return b.none()},K_=(e,t,n)=>oo([q_,Xm,Km,(s,o)=>rg(s,t,o),Vm,tm,Qm,lg,jm,ig],s=>s(e,n)),f3=(e,t)=>{K_(e,t,!1).fold(()=>{Ky(e),Kd(e)},Xo)},d3=(e,t)=>{K_(e,t,!0).fold(()=>XI(e),Xo)},m3=(e,t)=>{e.addCommand("delete",()=>{f3(e,t)}),e.addCommand("forwardDelete",()=>{d3(e,t)})},G_=5,g3=400,Y_=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),p3=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>G_||s>G_},h3=e=>{const t=Po(),n=zt(!1),s=Mf(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},g3);e.on("touchstart",o=>{Y_(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),Y_(o).each(r=>{t.on(i=>{p3(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},ug=(e,t)=>Fe(e,t.nodeName),b3=(e,t)=>X(t)?!0:ce(t)?!ug(e,t)&&!Vn(t):!1,v3=(e,t,n)=>Y(ky(x.fromDom(n),x.fromDom(t)),s=>ug(e,s.dom)),C3=(e,t)=>{if(X(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||ug(e,t.nextSibling)))return!0}return!1},X_=e=>e.dom.create(Rn(e),ya(e)),y3=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),i=e.getBody();let a,c,u=!1;const d=Rn(e);if(!r||!ce(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||v3(o,i,r))return;const g=n.getRng(),{startContainer:y,startOffset:_,endContainer:C,endOffset:w}=g,S=yr(e);let k=i.firstChild;for(;k;)if(b3(o,k)){if(C3(o,k)){c=k,k=k.nextSibling,t.remove(c);continue}a||(a=X_(e),i.insertBefore(a,k),u=!0),c=k,k=k.nextSibling,a.appendChild(c)}else a=null,k=k.nextSibling;u&&S&&(g.setStart(y,_),g.setEnd(C,w),n.setRng(g),e.nodeChanged())},Q_=(e,t,n)=>{const s=x.fromDom(X_(e)),o=wf();Ut(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},E3=e=>{e.on("NodeChange",re(y3,e))},Z_=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,_3=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},w3=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],_3(e,o,Ov(e)));n.content=o}},S3=e=>{const t="contenteditable",n=" "+Q.trim(hP(e))+" ",s=" "+Q.trim(Ov(e))+" ",o=Z_(n),r=Z_(s),i=bP(e);i.length>0&&e.on("BeforeSetContent",a=>{w3(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const u=a[c];o(u)?u.attr(t,"true"):r(u)&&u.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const u=a[c];!o(u)&&!r(u)||(i.length>0&&u.attr("data-mce-content")?(u.name="#text",u.type=3,u.raw=!0,u.value=u.attr("data-mce-content")):u.attr(t,null))}})},x3=e=>aa(x.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),J_=(e,t)=>{t.hasAttribute("data-mce-caret")&&(kf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},k3=(e,t)=>{const n=x3(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),J_(e,n);return}mb(n)&&(J_(e,n),e.undoManager.add())}},N3=e=>{e.on("keyup compositionstart",re(k3,e))},ew=bt,A3=(e,t,n)=>P_(t,e,n,Lo,Mo,ew),T3=(e,t,n)=>O_(t,e,n,r=>Lo(r)||Sy(r),r=>Mo(r)||xy(r),ew),R3=e=>{const t=e.dom.create(Rn(e));return t.innerHTML='<br data-mce-bogus="1">',t},tw=(e,t,n)=>{const s=zs(e.getBody()),o=re(nd,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(L.fromRangeStart(n))){const a=x.fromDom(R3(e));t===1?xo(x.fromDom(r),a):Un(x.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},P3=(e,t)=>{const n=t?Ht.Forwards:Ht.Backwards,s=e.selection.getRng();return A3(n,e,s).orThunk(()=>(tw(e,n,s),b.none()))},O3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return T3(n,e,s).orThunk(()=>(tw(e,n,s),b.none()))},nw=(e,t)=>P3(e,t).exists(n=>(ho(e,n),!0)),sw=(e,t)=>O3(e,t).exists(n=>(ho(e,n),!0)),ow=(e,t)=>D_(e,t,t?Mo:Lo),Kc=(e,t)=>Gm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(ho(e,n),!0)),D3=e=>z(["figcaption"],_t(e)),B3=(e,t)=>{const n=re(nt,t);return Xr(x.fromDom(e.container()),us,n).filter(D3)},I3=(e,t,n)=>t?A2(e.dom,n):N2(e.dom,n),F3=(e,t)=>{const n=x.fromDom(e.getBody()),s=L.fromRangeStart(e.selection.getRng());return B3(s,n).exists(()=>{if(I3(n,t,s)){const r=Q_(e,n,t?Ut:qh);return e.selection.setRng(r),!0}else return!1})},rw=(e,t)=>e.selection.isCollapsed()?F3(e,t):!1,iw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},$3=e=>V(e,t=>({...iw,...t})),L3=e=>V(e,t=>({...iw,...t})),aw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,M3=(e,t)=>et($3(e),n=>aw(n,t)?[n]:[]),U3=(e,t)=>et(L3(e),n=>aw(n,t)?[n]:[]),Be=(e,...t)=>()=>e.apply(null,t),Ya=(e,t)=>ve(M3(e,t),n=>n.action()),lw=(e,t)=>oo(U3(e,t),n=>n.action()),cw=(e,t)=>{const n=t?Ht.Forwards:Ht.Backwards,s=e.selection.getRng();return P_(e,n,s,Ba,Ia,$s).exists(o=>(ho(e,o),!0))},uw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return O_(e,n,s,Ba,Ia,$s).exists(o=>(ho(e,o),!0))},fw=(e,t)=>D_(e,t,t?Ia:Ba),dw=Ls.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Xa={...dw,none:e=>dw.none(e)},z3=(e,t)=>mw(e,t,vt),mw=(e,t,n)=>et(nn(e),s=>ls(s,t)?n(s)?[s]:[]:mw(s,t,n)),H3=(e,t,n=Ze)=>{if(n(t))return b.none();if(z(e,_t(t)))return b.some(t);const s=o=>ls(o,"table")||n(o);return ia(t,e.join(","),s)},W3=(e,t)=>H3(["td","th"],e,t),V3=e=>z3(e,"th,td"),gw=(e,t)=>rr(e,"table",t),fg=(e,t,n,s,o=vt)=>{const r=s===1;if(!r&&n<=0)return Xa.first(e[0]);if(r&&n>=e.length-1)return Xa.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Xa.middle(t,a):fg(e,t,i,s,o)}},pw=(e,t)=>gw(e,t).bind(n=>{const s=V3(n);return Le(s,r=>nt(e,r)).map(r=>({index:r,all:s}))}),j3=(e,t,n)=>pw(e,n).fold(()=>Xa.none(e),o=>fg(o.all,e,o.index,1,t)),q3=(e,t,n)=>pw(e,n).fold(()=>Xa.none(),o=>fg(o.all,e,o.index,-1,t)),K3=e=>rr(e,"[contenteditable]"),hw=(e,t=!1)=>Kr(e)?e.dom.isContentEditable:K3(e).fold(K(t),n=>G3(n)==="true"),G3=e=>e.dom.contentEditable,Y3=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),X3=(e,t)=>et(t,n=>{const s=Y3(mr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),Q3=(e,t,n)=>Ee(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(a<i?o:r)}),b.none()),bw=(e,t,n,s,o)=>{const r=gn(x.fromDom(n),"td,th,caption").map(a=>a.dom),i=j(X3(e,r),a=>t(a,o));return Q3(i,s,o).map(a=>a.cell)},Z3=e=>e.bottom,J3=e=>e.top,eW=(e,t)=>e.y<t,tW=(e,t)=>e.y>t,nW=re(bw,Z3,eW),sW=re(bw,J3,tW),oW=(e,t)=>Jt(t.getClientRects()).bind(n=>nW(e,n.left,n.top)).bind(n=>Vc(R2(n),t)),rW=(e,t)=>Mt(t.getClientRects()).bind(n=>sW(e,n.left,n.top)).bind(n=>Vc(T2(n),t)),iW=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),aW=e=>e.breakType===Gs.Wrap&&e.positions.length===0,lW=e=>e.breakType===Gs.Br&&e.positions.length===1,vw=(e,t,n)=>{const s=e(t,n);return aW(s)||!Pt(n.getNode())&&lW(s)?!iW(e,t,s):s.breakAt.isNone()},cW=re(vw,qa),uW=re(vw,Ka),fW=(e,t,n)=>{const s=L.fromRangeStart(t);return ci(!e,n).exists(o=>o.isEqual(s))},dW=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return Uv()&&fW(t,o,n)?(po(r,e,n,!t,!1).each(i=>{ho(e,i)}),!0):!1},mW=(e,t,n)=>oW(t,n).orThunk(()=>Jt(n.getClientRects()).bind(s=>tg(__(e,L.before(t)),s.left))).getOr(L.before(t)),gW=(e,t,n)=>rW(t,n).orThunk(()=>Jt(n.getClientRects()).bind(s=>tg(w_(e,L.after(t)),s.left))).getOr(L.after(t)),Cw=(e,t)=>{const n=t.getNode(e);return co(n)?b.some(n):b.none()},pW=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?xo:Un,o=Q_(t,x.fromDom(n),s);ho(t,o)})},yw=(e,t,n)=>{const s=Cw(!!t,n),o=t===!1;s.fold(()=>ho(e,n.toRange()),r=>ci(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>ho(e,n.toRange()),i=>pW(t,e,r)))},hW=(e,t,n,s)=>{const o=e.selection.getRng(),r=L.fromRangeStart(o),i=e.getBody();if(!t&&cW(s,r)){const a=mW(i,n,r);return yw(e,t,a),!0}else if(t&&uW(s,r)){const a=gW(i,n,r);return yw(e,t,a),!0}else return!1},Ew=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),_w=(e,t)=>Ew(e,t,dW),ww=(e,t)=>Ew(e,t,hW),bW=e=>{const t=pi.exact(e,0,e,0);return RD(t)},Sw=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>LB(o).map(r=>bW(r)),s=>(e.execCommand("mceTableInsertRowAfter"),xw(e,t,s))),xw=(e,t,n)=>Sw(e,t,j3(n,hw)),vW=(e,t,n)=>Sw(e,t,q3(n,hw)),kw=(e,t)=>{const n=["table","li","dl"],s=x.fromDom(e.getBody()),o=a=>{const c=_t(a);return nt(a,s)||z(n,c)},r=e.selection.getRng(),i=x.fromDom(t?r.endContainer:r.startContainer);return W3(i,o).map(a=>(gw(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?xw:vW)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},CW=(e,t,n)=>{const s=Ke.os.isMacOS()||Ke.os.isiOS();Ya([{keyCode:ge.RIGHT,action:Be(nw,e,!0)},{keyCode:ge.LEFT,action:Be(nw,e,!1)},{keyCode:ge.UP,action:Be(sw,e,!1)},{keyCode:ge.DOWN,action:Be(sw,e,!0)},...s?[{keyCode:ge.UP,action:Be(Kc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ge.DOWN,action:Be(Kc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ge.RIGHT,action:Be(_w,e,!0)},{keyCode:ge.LEFT,action:Be(_w,e,!1)},{keyCode:ge.UP,action:Be(ww,e,!1)},{keyCode:ge.DOWN,action:Be(ww,e,!0)},{keyCode:ge.RIGHT,action:Be(cw,e,!0)},{keyCode:ge.LEFT,action:Be(cw,e,!1)},{keyCode:ge.UP,action:Be(uw,e,!1)},{keyCode:ge.DOWN,action:Be(uw,e,!0)},{keyCode:ge.RIGHT,action:Be(F_,e,t,!0)},{keyCode:ge.LEFT,action:Be(F_,e,t,!1)},{keyCode:ge.RIGHT,ctrlKey:!s,altKey:s,action:Be(G2,e,t)},{keyCode:ge.LEFT,ctrlKey:!s,altKey:s,action:Be(Y2,e,t)},{keyCode:ge.UP,action:Be(rw,e,!1)},{keyCode:ge.DOWN,action:Be(rw,e,!0)}],n).each(o=>{n.preventDefault()})},yW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||CW(e,t,n)})},bs=(e,t)=>({container:e,offset:t}),Gc=rt.DOM,Yc=e=>t=>e===t?-1:0,EW=e=>t=>e.isBlock(t)||z(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",dg=(e,t,n)=>{if(X(e)&&t>=0)return b.some(bs(e,t));{const s=dr(Gc);return b.from(s.backwards(e,t,Yc(e),n)).map(o=>bs(o.container,o.container.data.length))}},_W=(e,t,n)=>{if(X(e)&&t>=e.length)return b.some(bs(e,t));{const s=dr(Gc);return b.from(s.forwards(e,t,Yc(e),n)).map(o=>bs(o.container,0))}},mg=(e,t,n)=>{if(!X(e))return b.none();const s=e.data;if(t>=0&&t<=s.length)return b.some(bs(e,t));{const o=dr(Gc);return b.from(o.backwards(e,t,Yc(e),n)).bind(r=>{const i=r.container.data;return mg(r.container,t+i.length,n)})}},Nw=(e,t,n)=>{if(!X(e))return b.none();const s=e.data;if(t<=s.length)return b.some(bs(e,t));{const o=dr(Gc);return b.from(o.forwards(e,t,Yc(e),n)).bind(r=>Nw(r.container,t-s.length,n))}},gg=(e,t,n,s,o)=>{const r=dr(e,EW(e));return b.from(r.backwards(t,n,s,o))},wW=e=>e.collapsed&&X(e.startContainer),Aw=e=>uo(e.toString().replace(/\u00A0/g," ")),Tw=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,pg=(e,t)=>e.substring(t.length),SW=(e,t,n)=>{let s;const o=n.charAt(0);for(s=t-1;s>=0;s--){const r=e.charAt(s);if(Tw(r))return b.none();if(o===r&&en(e,n,s,t))break}return b.some(s)},xW=(e,t,n,s=0)=>{if(!wW(t))return b.none();const o={text:"",offset:0},r=(a,c,u)=>(o.text=u+o.text,o.offset+=c,SW(o.text,o.offset,n).getOr(c)),i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return gg(e,t.startContainer,t.startOffset,r,i).bind(a=>{const c=t.cloneRange();if(c.setStart(a.container,a.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return b.none();const u=Aw(c);return u.lastIndexOf(n)!==0||pg(u,n).length<s?b.none():b.some({text:pg(u,n),range:c,trigger:n})})},Rw=(e,t,n,s=0)=>HB(x.fromDom(t.startContainer)).fold(()=>xW(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=Aw(r);return b.some({range:r,text:pg(i,n),trigger:n})}),kW=e=>e.nodeType===Sh,NW=e=>e.nodeType===Qi,Pw=e=>{if(kW(e))return bs(e,e.data.length);{const t=e.childNodes;return t.length>0?Pw(t[t.length-1]):bs(e,t.length)}},Ow=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Ow(n[t],0):n.length>0&&NW(e)&&n.length===t?Pw(n[n.length-1]):bs(e,t)},AW=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return gg(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!Tw(r)}).isSome()},TW=e=>t=>{const n=Ow(t.startContainer,t.startOffset);return!AW(e,n)},RW=(e,t,n)=>oo(n.triggers,s=>Rw(e,t,s)),PW=(e,t)=>{const n=t(),s=e.selection.getRng();return RW(e.dom,s,n).bind(o=>Dw(e,t,o))},Dw=(e,t,n,s={})=>{var o;const r=t(),a=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",c=j(r.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>TW(e.dom))(n.range,a,n.text));if(c.length===0)return b.none();const u=Promise.all(V(c,d=>d.fetch(n.text,d.maxResults,s).then(g=>({matchText:n.text,items:g,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return b.some({lookupData:u,context:n})};var vs;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(vs||(vs={}));const hg=(e,t,n)=>e.stype===vs.Error?t(e.serror):n(e.svalue),OW=e=>{const t=[],n=[];return R(e,s=>{hg(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},DW=(e,t)=>e.stype===vs.Error?{stype:vs.Error,serror:t(e.serror)}:e,BW=(e,t)=>e.stype===vs.Value?{stype:vs.Value,svalue:t(e.svalue)}:e,IW=(e,t)=>e.stype===vs.Value?t(e.svalue):e,FW=(e,t)=>e.stype===vs.Error?t(e.serror):e,Bw=e=>({stype:vs.Value,svalue:e}),Iw=e=>({stype:vs.Error,serror:e}),Kt={fromResult:e=>e.fold(Iw,Bw),toResult:e=>hg(e,pn.error,pn.value),svalue:Bw,partition:OW,serror:Iw,bind:IW,bindError:FW,map:BW,mapError:DW,fold:hg},bg=e=>it(e)&&$n(e).length>100?" removed due to size":JSON.stringify(e,null,2),$W=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return V(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Xc=(e,t)=>Kt.serror([{path:e,getErrorInfo:t}]),LW=(e,t,n)=>Xc(e,()=>'Could not find valid *required* value for "'+t+'" in '+bg(n)),MW=(e,t)=>Xc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),UW=(e,t,n)=>Xc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+bg(t)),zW=(e,t)=>Xc(e,K(t)),HW=(e,t,n,s)=>gt(n,s).fold(()=>UW(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),WW=(e,t)=>({extract:(o,r)=>gt(r,e).fold(()=>MW(o,e),a=>HW(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+$n(t)}),VW=(e,t)=>t,jW=(e,t)=>no(e)&&no(t)?Qc(e,t):t,Fw=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Fe(o,r)&&(n[r]=e(n[r],o[r]))}return n},Qc=Fw(jW),qW=Fw(VW),$w=()=>({tag:"required",process:{}}),KW=e=>({tag:"defaultedThunk",process:e}),Lw=e=>KW(K(e)),GW=()=>({tag:"option",process:{}}),YW=(e,t)=>e.length>0?Kt.svalue(Qc(t,qW.apply(void 0,e))):Kt.svalue(t),Mw=e=>It(Kt.serror,qe)(e),XW={consolidateObj:(e,t)=>{const n=Kt.partition(e);return n.errors.length>0?Mw(n.errors):YW(n.values,t)},consolidateArr:e=>{const t=Kt.partition(e);return t.errors.length>0?Mw(t.errors):Kt.svalue(t.values)}},QW=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),ZW=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Uw=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},vg=e=>{const t=(s,o)=>Kt.bindError(e(o),r=>zW(s,r)),n=K("val");return{extract:t,toString:n}},JW=vg(Kt.svalue),eV=(e,t,n,s)=>gt(t,n).fold(()=>LW(e,n,t),s),zw=(e,t,n,s)=>{const o=gt(e,t).getOrThunk(()=>n(e));return s(o)},tV=(e,t,n)=>n(gt(e,t)),nV=(e,t,n,s)=>{const o=gt(e,t).map(r=>r===!0?n(e):r);return s(o)},sV=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>Kt.svalue(b.none()),c=>{const u=o.extract(t.concat([s]),c);return Kt.map(u,b.some)});switch(e.tag){case"required":return eV(t,n,s,r);case"defaultedThunk":return zw(n,s,e.process,r);case"option":return tV(n,s,i);case"defaultedOptionThunk":return nV(n,s,e.process,i);case"mergeWithThunk":return zw(n,s,K({}),a=>{const c=Qc(e.process(n),a);return r(c)})}},oV=(e,t,n)=>{const s={},o=[];for(const r of n)Uw(r,(i,a,c,u)=>{const d=sV(c,e,t,i,u);Kt.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?Kt.serror(o):Kt.svalue(s)},Cg=e=>({extract:(s,o)=>oV(s,o,e),toString:()=>{const s=V(e,o=>Uw(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),Hw=e=>({extract:(s,o)=>{const r=V(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return XW.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),rV=e=>vg(t=>e(t).fold(Kt.serror,Kt.svalue)),iV=(e,t,n)=>{const s=t.extract([e],n);return Kt.mapError(s,o=>({input:n,errors:o}))},aV=(e,t,n)=>Kt.toResult(iV(e,t,n)),lV=e=>`Errors: 
`+$W(e.errors).join(`
`)+`

Input object: `+bg(e.input),Ww=(e,t)=>WW(e,vl(t,Cg)),cV=K(JW),Zc=(e,t)=>vg(n=>{const s=typeof n;return e(n)?Kt.svalue(n):Kt.serror(`Expected type: ${t} but got: ${s}`)}),uV=Zc(dn,"number"),Jc=Zc(de,"string"),fV=Zc(_n,"boolean"),yg=Zc(He,"function"),Qa=QW,Vw=ZW,dV=e=>rV(t=>z(e,t)?pn.value(t):pn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),jw=(e,t)=>Qa(e,e,$w(),t),qw=e=>jw(e,Jc),Kw=e=>jw(e,yg),mV=(e,t)=>Qa(e,e,$w(),Hw(t)),Eg=(e,t)=>Qa(e,e,GW(),t),eu=e=>Eg(e,Jc),gV=e=>Eg(e,yg),pV=(e,t)=>Qa(e,e,Lw(t),cV()),xi=(e,t,n)=>Qa(e,e,Lw(t),n),Gw=(e,t)=>xi(e,t,uV),hV=(e,t)=>xi(e,t,Jc),Yw=(e,t,n)=>xi(e,t,dV(n)),_g=(e,t)=>xi(e,t,fV),wg=(e,t)=>xi(e,t,yg),bV=(e,t,n)=>xi(e,t,Hw(n)),vV=qw("type"),CV=Kw("fetch"),Sg=Kw("onAction"),yV=wg("onSetup",()=>$e),EV=eu("text"),_V=eu("icon"),wV=eu("tooltip"),SV=eu("label"),xV=_g("active",!1),kV=_g("enabled",!0),Xw=_g("primary",!1),NV=e=>pV("columns",e),Za=e=>hV("type",e),AV=Cg([vV,qw("trigger"),Gw("minChars",1),NV(1),Gw("maxResults",10),gV("matches"),CV,Sg,bV("highlightOn",[],Jc)]),TV=e=>aV("Autocompleter",AV,{trigger:e.ch,...e}),xg=[kV,wV,_V,EV,yV],Qw=[xV].concat(xg),RV=[wg("predicate",Ze),Yw("scope","node",["node","editor"]),Yw("position","selection",["node","selection","line"])],PV=xg.concat([Za("contextformbutton"),Xw,Sg,Vw("original",Rt)]),OV=Qw.concat([Za("contextformbutton"),Xw,Sg,Vw("original",Rt)]),DV=xg.concat([Za("contextformbutton")]),BV=Qw.concat([Za("contextformtogglebutton")]),IV=Ww("type",{contextformbutton:PV,contextformtogglebutton:OV});Cg([Za("contextform"),wg("initValue",K("")),SV,mV("commands",IV),Eg("launch",Ww("type",{contextformbutton:DV,contextformtogglebutton:BV}))].concat(RV));const FV=e=>{const t=e.ui.registry.getAll().popups,n=vl(t,i=>TV(i).fold(a=>{throw new Error(lV(a))},Rt)),s=qp(ef(n,i=>i.trigger)),o=tf(n);return{dataset:n,triggers:s,lookupByTrigger:i=>j(o,a=>a.trigger===i)}},$V=(e,t)=>{const n=Mf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},LV=e=>{const t=Po(),n=zt(!1),s=t.isSet,o=()=>{s()&&(WU(e),nD(e),n.set(!1),t.clear())},r=u=>{s()||(HU(e,u.range),t.set({trigger:u.trigger,matchLength:u.text.length}))},i=Zo(()=>FV(e)),a=u=>t.get().map(d=>Rw(e.dom,e.selection.getRng(),d.trigger).bind(p=>Dw(e,i,p,u))).getOrThunk(()=>PW(e,i)),c=u=>{a(u).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(g=>{const y=d.context;g.trigger===y.trigger&&(y.text.length-g.matchLength>=10?o():(t.set({...g,matchLength:y.text.length}),n.get()?tD(e,{lookupData:p}):(n.set(!0),eD(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(u,d)=>{const p=it(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),$V(e,{cancelIfNecessary:o,load:c})},Zw=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:$e,inputType:n},i=Ab(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},kg=Zw("input"),Ng=Zw("beforeinput"),MV=(e,t,n)=>{const s=n.keyCode===ge.BACKSPACE?"deleteContentBackward":"deleteContentForward";lw([{keyCode:ge.BACKSPACE,action:Be(q_,e)},{keyCode:ge.BACKSPACE,action:Be(Xm,e,!1)},{keyCode:ge.DELETE,action:Be(Xm,e,!0)},{keyCode:ge.BACKSPACE,action:Be(Km,e,!1)},{keyCode:ge.DELETE,action:Be(Km,e,!0)},{keyCode:ge.BACKSPACE,action:Be(rg,e,t,!1)},{keyCode:ge.DELETE,action:Be(rg,e,t,!0)},{keyCode:ge.BACKSPACE,action:Be(tm,e,!1)},{keyCode:ge.DELETE,action:Be(tm,e,!0)},{keyCode:ge.BACKSPACE,action:Be(Qm,e,!1)},{keyCode:ge.DELETE,action:Be(Qm,e,!0)},{keyCode:ge.BACKSPACE,action:Be(lg,e,!1)},{keyCode:ge.DELETE,action:Be(lg,e,!0)},{keyCode:ge.BACKSPACE,action:Be(jm,e,!1)},{keyCode:ge.DELETE,action:Be(jm,e,!0)},{keyCode:ge.BACKSPACE,action:Be(Vm,e,!1)},{keyCode:ge.DELETE,action:Be(Vm,e,!0)},{keyCode:ge.BACKSPACE,action:Be(ig,e,!1)},{keyCode:ge.DELETE,action:Be(ig,e,!0)}],n).each(o=>{n.preventDefault(),Ng(e,s).isDefaultPrevented()||(o(),kg(e,s))})},UV=(e,t)=>{Ya([{keyCode:ge.BACKSPACE,action:Be(l_,e)},{keyCode:ge.DELETE,action:Be(l_,e)}],t)},zV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||MV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()||UV(e,n)})},HV=e=>{for(;e;){if(ce(e)||X(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Ja=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=HV(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(jt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new Ft(t,t);let i=t,a;for(;a=r.current();){if(X(a)){o.setStart(a,0),o.setEnd(a,0);break}if(s[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=r.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Pt(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Da(e,o)},tu=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";)e.getContentEditable(o)==="true"&&(s=o),o=o.parentNode;return o!==n?s:n},Ag=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),WV=e=>Ag(e).fold(K(""),t=>t.nodeName.toUpperCase()),VV=e=>Ag(e).filter(t=>la(x.fromDom(t))).isSome(),jV=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,qV=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Jw=(e,t)=>{const n=e==null?void 0:e.parentNode;return oe(n)&&n.nodeName===t},eS=e=>oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),KV=e=>oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),GV=e=>eS(e)&&eS(e.parentNode),nu=e=>{const t=e.parentNode;return KV(t)?t:e},su=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!ce(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},YV=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng(),a=n.parentNode;if(n===e.getBody()||!a)return;GV(n)&&(o="LI");let c=t(o);if(su(n,s,!0)&&su(n,s,!1))if(Jw(n,"LI")){const u=nu(n);r.insertAfter(c,u),qV(n)?r.remove(u):r.remove(n)}else r.replace(c,n);else if(su(n,s,!0))Jw(n,"LI")?(r.insertAfter(c,nu(n)),c.appendChild(r.doc.createTextNode(" ")),c.appendChild(n)):a.insertBefore(c,n),r.remove(s);else if(su(n,s,!1))r.insertAfter(c,nu(n)),r.remove(s);else{n=nu(n);const u=i.cloneRange();u.setStartAfter(s),u.setEndAfter(n);const d=u.extractContents();o==="LI"&&jV(d,"LI")?(c=d.firstChild,r.insertAfter(d,n)):(r.insertAfter(d,n),r.insertAfter(c,n)),r.remove(s)}Ja(e,c)},XV=e=>{R(ub(x.fromDom(e),Ln),t=>{const n=t.dom;n.nodeValue=uo(n.data)})},QV=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},ZV=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),Tg=e=>{e.innerHTML='<br data-mce-bogus="1">'},Rg=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,tS=(e,t)=>oe(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",JV=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;ce(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let i=o.length;for(;i--;)r=o[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||ZV(e,r))&&e.remove(r)},Pg=(e,t,n)=>X(t)?e?n===1&&t.data.charAt(n-1)===Qt?0:n:n===t.data.length-1&&t.data.charAt(n)===Qt?t.data.length:n:n,e6=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Pg(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Pg(!1,e.endContainer,e.endOffset)),t},t6=e=>{let t=e;do X(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},n6=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(c=>{const d={...Vh(x.fromDom(t)),...c};s.setStyles(t,d)});const o=b.from(n.class).map(c=>c.split(/\s+/)),r=b.from(t.className).map(c=>j(c.split(/\s+/),u=>u!==""));mn(o,r,(c,u)=>{const d=j(u,g=>!z(c,g)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=qi(n,(c,u)=>!z(i,u));s.setAttribs(t,a)},el=(e,t)=>{if(Rn(e).toLowerCase()===t.tagName.toLowerCase()){const s=ya(e);n6(e,t,s)}},s6=(e,t,n,s,o)=>{var r;const i=e.dom,a=(r=tu(i,s))!==null&&r!==void 0?r:i.getRoot();let c=i.getParent(s,i.isBlock);if(!c||!tS(i,c)){c=c||a;let u;if(c===e.getBody()||nb(c)?u=c.nodeName.toLowerCase():c.parentNode?u=c.parentNode.nodeName.toLowerCase():u="",!c.hasChildNodes()){const g=i.create(t);return el(e,g),c.appendChild(g),n.setStart(g,0),n.setEnd(g,0),g}let d=s;for(;d&&d.parentNode!==c;)d=d.parentNode;let p;for(;d&&!i.isBlock(d);)p=d,d=d.previousSibling;if(p&&e.schema.isValidChild(u,t.toLowerCase())){const g=p.parentNode,y=i.create(t);for(el(e,y),g.insertBefore(y,p),d=p;d&&!i.isBlock(d);){const _=d.nextSibling;y.appendChild(d),d=_}n.setStart(s,o),n.setEnd(s,o)}}return s},o6=(e,t)=>{t.normalize();const n=t.lastChild;(!n||ce(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},r6=(e,t)=>{const n=h1(e);return lt(t)?!1:de(n)?z(Q.explode(n),t.nodeName.toLowerCase()):n},nS={insert:(e,t)=>{let n,s,o,r,i=!1;const a=e.dom,c=e.schema,u=c.getNonEmptyElements(),d=e.selection.getRng(),p=Rn(e),g=J=>{let W=n;const F=c.getTextInlineElements();let $;J||o==="TABLE"||o==="HR"?$=a.create(J||p):$=k.cloneNode(!1);let ee=$;if(p1(e)===!1)a.setAttrib($,"style",null),a.setAttrib($,"class",null);else do if(F[W.nodeName]){if(ms(W)||Vn(W))continue;const me=W.cloneNode(!1);a.setAttrib(me,"id",""),$.hasChildNodes()?(me.appendChild($.firstChild),$.appendChild(me)):(ee=me,$.appendChild(me))}while((W=W.parentNode)&&W!==S);return el(e,$),Tg(ee),$},y=J=>{const W=Pg(J,n,s);if(X(n)&&(J?W>0:W<n.data.length))return!1;if(n.parentNode===k&&i&&!J||J&&ce(n)&&n===k.firstChild)return!0;if(Rg(n,"TABLE")||Rg(n,"HR"))return i&&!J||!i&&J;const F=new Ft(n,k);X(n)&&(J&&W===0?F.prev():!J&&W===n.data.length&&F.next());let $;for(;$=F.current();){if(ce($)){if(!$.getAttribute("data-mce-bogus")){const ee=$.nodeName.toLowerCase();if(u[ee]&&ee!=="br")return!1}}else if(X($)&&!lr($.data))return!1;J?F.prev():F.next()}return!0},_=()=>{let J;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&A!=="HGROUP"?J=g(p):J=g(),r6(e,r)&&tS(a,r)&&a.isEmpty(k)?J=a.split(r,k):a.insertAfter(J,k),Ja(e,J),J};mc(a,d).each(J=>{d.setStart(J.startContainer,J.startOffset),d.setEnd(J.endContainer,J.endOffset)}),n=d.startContainer,s=d.startOffset;const C=!!(t&&t.shiftKey),w=!!(t&&t.ctrlKey);ce(n)&&n.hasChildNodes()&&(i=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,i&&X(n)?s=n.data.length:s=0);const S=tu(a,n);if(!S||QV(e,n))return;C||(n=s6(e,p,d,n,s));let k=a.getParent(n,a.isBlock)||a.getRoot();r=oe(k==null?void 0:k.parentNode)?a.getParent(k.parentNode,a.isBlock):null,o=k?k.nodeName.toUpperCase():"";const A=r?r.nodeName.toUpperCase():"";if(A==="LI"&&!w){const J=r;k=J,r=J.parentNode,o=A}if(/^(LI|DT|DD)$/.test(o)&&ce(r)&&a.isEmpty(k)){YV(e,g,r,k,p);return}if(k===e.getBody())return;const M=k.parentNode;let H;if(Jr(k))H=kf(k),a.isEmpty(k)&&Tg(k),el(e,H),Ja(e,H);else if(y(!1))H=_();else if(y(!0)&&M)H=M.insertBefore(g(),k),Ja(e,Rg(k,"HR")?H:k);else{const J=e6(d).cloneRange();J.setEndAfter(k);const W=J.extractContents();XV(W),t6(W),H=W.firstChild,a.insertAfter(W,k),JV(a,u,H),o6(a,k),a.isEmpty(k)&&Tg(k),H.normalize(),a.isEmpty(H)?(a.remove(H),_()):(el(e,H),Ja(e,H))}a.setAttrib(H,"id",""),e.dispatch("NewBlock",{newBlock:H})},fakeEventName:"insertParagraph"},i6=(e,t,n)=>{const s=new Ft(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||X(o)&&o.length>0)return!0;return!1},sS=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Da(e,s)},a6=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i=!1;mc(s,o).each(y=>{o.setStart(y.startContainer,y.startOffset),o.setEnd(y.endContainer,y.endOffset)});let a=o.startOffset,c=o.startContainer;if(ce(c)&&c.hasChildNodes()){const y=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,y&&X(c)?a=c.data.length:a=0}let u=s.getParent(c,s.isBlock);const d=u&&u.parentNode?s.getParent(u.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",g=!!(t&&t.ctrlKey);p==="LI"&&!g&&(u=d),X(c)&&a>=c.data.length&&(i6(e.schema,c,u||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Vf(s,o,r),sS(e,r,i),e.undoManager.add()},l6=(e,t)=>{const n=x.fromTag("br");Un(x.fromDom(t),n),e.undoManager.add()},c6=(e,t)=>{f6(e.getBody(),t)||xo(x.fromDom(t),x.fromTag("br"));const n=x.fromTag("br");xo(x.fromDom(t),n),sS(e,n.dom,!1),e.undoManager.add()},u6=e=>Pt(e.getNode()),f6=(e,t)=>u6(L.after(t))?!0:Sn(e,L.after(t)).map(n=>Pt(n.getNode())).getOr(!1),oS=e=>e&&e.nodeName==="A"&&"href"in e,d6=e=>e.fold(Ze,oS,oS,Ze),m6=e=>{const t=re(_r,e),n=L.fromRangeStart(e.selection.getRng());return Ks(t,e.getBody(),n).filter(d6)},g6=(e,t)=>{t.fold($e,re(l6,e),re(c6,e),$e)},rS={insert:(e,t)=>{const n=m6(e);n.isSome()?n.each(re(g6,e)):a6(e,t)},fakeEventName:"insertLineBreak"},iS=(e,t)=>Ag(e).filter(n=>t.length>0&&ls(x.fromDom(n),t)).isSome(),p6=e=>iS(e,m1(e)),h6=e=>iS(e,g1(e)),Yn=Ls.generate([{br:[]},{block:[]},{none:[]}]),b6=(e,t)=>h6(e),aS=e=>(t,n)=>VV(t)===e,lS=(e,t)=>(n,s)=>WV(n)===e.toUpperCase()===t,v6=e=>{const t=tu(e.dom,e.selection.getStart());return lt(t)},tl=e=>lS("pre",e),C6=()=>lS("summary",!0),ou=e=>(t,n)=>f1(t)===e,y6=(e,t)=>p6(e),ru=(e,t)=>t,E6=e=>{const t=Rn(e),n=tu(e.dom,e.selection.getStart());return oe(n)&&e.schema.isValidChild(n.nodeName,t)},os=(e,t)=>(n,s)=>Ee(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),_6=(e,t)=>g_([os([b6],Yn.none()),os([tl(!0),v6],Yn.none()),os([C6()],Yn.br()),os([tl(!0),ou(!1),ru],Yn.br()),os([tl(!0),ou(!1)],Yn.block()),os([tl(!0),ou(!0),ru],Yn.block()),os([tl(!0),ou(!0)],Yn.br()),os([aS(!0),ru],Yn.br()),os([aS(!0)],Yn.block()),os([y6],Yn.br()),os([ru],Yn.br()),os([E6],Yn.block())],[e,!!(t&&t.shiftKey)]).getOr(Yn.none()),iu=(e,t,n)=>{t.selection.isCollapsed()||YI(t),!(oe(n)&&Ng(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),oe(n)&&kg(t,e.fakeEventName))},cS=(e,t)=>{const n=()=>iu(rS,e,t),s=()=>iu(nS,e,t),o=_6(e,t);switch(d1(e)){case"linebreak":o.fold(n,n,$e);break;case"block":o.fold(s,s,$e);break;case"invert":o.fold(s,n,$e);break;default:o.fold(n,s,$e);break}},w6=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),eU(e.undoManager),e.undoManager.transact(()=>{cS(e,t)}))},S6=e=>{e.on("keydown",t=>{t.keyCode===ge.ENTER&&w6(e,t)})},x6=(e,t,n)=>{const s=Ke.os.isMacOS()||Ke.os.isiOS();Ya([{keyCode:ge.END,action:Be(ow,e,!0)},{keyCode:ge.HOME,action:Be(ow,e,!1)},...s?[]:[{keyCode:ge.HOME,action:Be(Kc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ge.END,action:Be(Kc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ge.END,action:Be(fw,e,!0)},{keyCode:ge.HOME,action:Be(fw,e,!1)},{keyCode:ge.END,action:Be(qc,e,!0,t)},{keyCode:ge.HOME,action:Be(qc,e,!1,t)}],n).each(o=>{n.preventDefault()})},k6=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||x6(e,t,n)})},N6=e=>{e.on("input",t=>{t.isComposing||NI(e)})},A6=Jo(),T6=(e,t,n)=>{Ya([{keyCode:ge.PAGE_UP,action:Be(qc,e,!1,t)},{keyCode:ge.PAGE_DOWN,action:Be(qc,e,!0,t)}],n)},uS=e=>e.stopImmediatePropagation(),fS=e=>e.keyCode===ge.PAGE_UP||e.keyCode===ge.PAGE_DOWN,dS=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",uS,!0):!n&&e.get()&&t.off("NodeChange",uS),e.set(n)},R6=(e,t)=>{if(A6.os.isMacOS())return;const n=zt(!1);e.on("keydown",s=>{fS(s)&&dS(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||T6(e,t,s),fS(s)&&n.get()&&(dS(n,e,!1),e.nodeChanged())})},mS=(e,t)=>{const n=t.container(),s=t.offset();return X(n)?(n.insertData(s,e),b.some(L(n,s+e.length))):Jl(t).map(o=>{const r=x.fromText(e);return t.isAtEnd()?xo(o,r):Un(o,r),L(r.dom,e.length)})},P6=re(mS,jt),O6=re(mS," "),D6=e=>t=>t.fold(n=>Wn(e.dom,L.before(n)),n=>hn(n),n=>Hs(n),n=>Sn(e.dom,L.after(n))),B6=(e,t)=>n=>EI(e,n)?P6(t):O6(t),I6=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),F6=e=>{const t=L.fromRangeStart(e.selection.getRng()),n=x.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(_r,e),o=L.fromRangeStart(e.selection.getRng());return Ks(s,e.getBody(),o).bind(D6(n)).map(r=>()=>B6(n,t)(r).each(I6(e)))}else return b.none()},$6=(e,t)=>{lw([{keyCode:ge.SPACEBAR,action:Be(F6,e)}],t).each(n=>{t.preventDefault(),Ng(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),kg(e,"insertText",{data:" "}))})},L6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||$6(e,t)})},M6=e=>wP(e)?[{keyCode:ge.TAB,action:Be(kw,e,!0)},{keyCode:ge.TAB,shiftKey:!0,action:Be(kw,e,!1)}]:[],U6=(e,t)=>{Ya([...M6(e)],t).each(n=>{t.preventDefault()})},z6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||U6(e,t)})},H6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),LV(e),qs(e))return zt(null);{const t=K2(e);return N3(e),yW(e,t),zV(e,t),S6(e),L6(e),N6(e),z6(e),k6(e,t),R6(e,t),t}};class W6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!xd(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||ic(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&ic(t)&&(t.selection.getNode().nodeName==="IMG"?qn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!j1(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,i=>i===o?!0:(r.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=xt(s.dom.getParents(t,vt,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const gS="x-tinymce/html",au=K(gS),Og="<!-- "+gS+" -->",V6=e=>Og+e,j6=e=>e.replace(Og,""),pS=e=>e.indexOf(Og)!==-1,q6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),K6=(e,t)=>{let n="<"+e;const s=ef(t,(o,r)=>r+'="'+To.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},G6=(e,t,n)=>{const s=e.split(/\n\n/),o=K6(t,n),r="</"+t+">",i=V(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:V(i,a).join("")},hS="%MCEPASTEBIN%",Y6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},hS);Ke.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},X6=(e,t)=>{const n=e.dom;if(Dg(e)){let s;const o=t.get();for(;s=Dg(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Dg=e=>e.dom.get("mcepastebin"),Q6=e=>oe(e)&&e.id==="mcepastebin",Z6=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=j(e.getBody().childNodes,Q6);R(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},bS=e=>e===hS,J6=e=>{const t=zt(null);return{create:()=>Y6(e,t),remove:()=>X6(e,t),getEl:()=>Dg(e),getHtml:()=>Z6(e),getLastRng:t.get}},vS=(e,t)=>(Q.each(t,n=>{Jn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),ej=e=>{const t=Ro(),n=yi({},t);let s="";const o=t.getVoidElements(),r=Q.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const u=c.name,d=c;if(u==="br"){s+=`
`;return}if(u!=="wbr"){if(o[u]&&(s+=" "),r[u]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())){let p=c.firstChild;if(p)do a(p);while(p=p.next)}i[u]&&d.next&&(s+=`
`,u==="p"&&(s+=`
`))}};return e=vS(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},CS=e=>(e=vS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":jt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),tj=e=>{let t=0;return()=>e+t++},nj=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(n,t)?"image/"+n[t]:"image/"+t},sj=(e,t)=>{const n=yi({},e.schema);n.addNodeFilter("meta",o=>{Q.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Fo({validate:!0},e.schema).serialize(s)},yS=(e,t)=>({content:e,cancelled:t}),oj=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=oD(e,s,n);return yS(o.node.innerHTML,o.isDefaultPrevented())},rj=(e,t,n)=>{const s=sD(e,t,n),o=sj(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?oj(e,o,n):yS(o,s.isDefaultPrevented())},ij=(e,t,n)=>rj(e,t,n),Bg=(e,t)=>(e.insertContent(t,{merge:cP(e),paste:!0}),!0),Ig=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),aj=(e,t)=>Ig(t)&&Y(Dv(e),n=>Zp(t.toLowerCase(),`.${n.toLowerCase()}`)),lj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),cj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),uj=(e,t,n)=>!e.selection.isCollapsed()&&Ig(t)?cj(e,t,n):!1,fj=(e,t,n)=>aj(e,t)?lj(e,t,n):!1,dj=(e,t)=>{Q.each([uj,fj,Bg],n=>!n(e,t,Bg))},mj=(e,t,n)=>{n||!uP(e)?Bg(e,t):dj(e,t)},gj=tj("mceclip"),ES=(e,t,n,s)=>{const o=ij(e,t,n);o.cancelled||mj(e,o.content,s)},lu=(e,t,n)=>{const s=n||pS(t);ES(e,j6(t),s,!1)},Fg=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=Cb(n,dP(e)),o=G6(s,Rn(e),ya(e));ES(e,o,!1,!0)},_S=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},ki=(e,t)=>t in e&&e[t].length>0,wS=e=>ki(e,"text/html")||ki(e,"text/plain"),pj=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return oe(n)?e.dom.encode(n[1]):void 0},hj=(e,t,n,s)=>{const o=gj(),r=wv(e)&&oe(n.name),i=r?pj(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},bj=(e,t)=>{Rm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),u=c!=null?c:hj(e,a,i,r);lu(e,`<img src="${u.blobUri()}">`,!1)})},vj=e=>e.type==="paste",Cj=e=>Promise.all(V(e,t=>sE(t).then(n=>({file:t,uri:n})))),yj=e=>{const t=Dv(e);return n=>Xt(n.type,"image/")&&Y(t,s=>nj(s)===n.type)},Ej=(e,t)=>{const n=t.items?et(Et(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?Et(t.files):[];return j(n.length>0?n:s,yj(e))},SS=(e,t,n)=>{const s=vj(t)?t.clipboardData:t.dataTransfer;if(Ql(e)&&s){const o=Ej(e,s);if(o.length>0)return t.preventDefault(),Cj(o).then(r=>{n&&e.selection.setRng(n),R(r,i=>{bj(e,i)})}),!0}return!1},_j=e=>{var t,n;return Ke.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},wj=e=>ge.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,xS=(e,t,n,s)=>{let o=CS(n);const r=ki(t,au())||pS(n),i=!r&&q6(o),a=Ig(o);(bS(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(ki(t,"text/plain")&&i?o=t["text/plain"]:o=ej(o)),!bS(o)&&(s?Fg(e,o):lu(e,o,r))},Sj=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{wj(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||_j(r))return;const i=n.get()==="text"||s;s=!1;const a=_S(r.clipboardData);!wS(a)&&SS(e,r,o())||(ki(a,"text/html")?(r.preventDefault(),xS(e,a,a["text/html"],i)):(t.create(),qn.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),xS(e,a,c,i)},0)))})},xj=e=>{const t=o=>Xt(o,"webkit-fake-url"),n=o=>Xt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Ql(e)&&s(i))for(const a of o){const c=a.attr("src");de(c)&&!a.attr("data-mce-object")&&c!==Ke.transparentSrc&&(t(c)||!mP(e)&&n(c))&&a.remove()}})},kj=(e,t,n)=>{Sj(e,t,n),xj(e)},Nj=(e,t)=>{t.get()==="text"?(t.set("html"),BC(e,!1)):(t.set("text"),BC(e,!0)),e.focus()},Aj=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Nj(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&lu(e,s.html,s.internal),s.text&&Fg(e,s.text)})},Tj=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(au(),t),!0}catch{return!1}else return!1},kS=(e,t,n,s)=>{Tj(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},NS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),qn.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},AS=e=>({html:V6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Rj=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),TS=e=>!e.selection.isCollapsed()||Rj(e),Pj=e=>t=>{!t.isDefaultPrevented()&&TS(e)&&kS(t,AS(e),NS(e),()=>{if(Ke.browser.isChromium()||Ke.browser.isFirefox()){const n=e.selection.getRng();qn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Oj=e=>t=>{!t.isDefaultPrevented()&&TS(e)&&kS(t,AS(e),NS(e),$e)},Dj=e=>{e.on("cut",Pj(e)),e.on("copy",Oj(e))},RS=(e,t)=>{var n,s;return hi.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},Bj=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},PS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Ij=e=>Y(e.files,t=>/^image\//.test(t.type)),Fj=(e,t)=>{oP(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Ql(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&Ij(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=RS(e,n);if(lt(s))return;const o=_S(n.dataTransfer),r=ki(o,au());if((!wS(o)||Bj(o))&&SS(e,n,s))return;const i=o[au()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),qn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),PS(e,s);const c=CS(a);o["text/html"]?lu(e,c,r):Fg(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Ql(e)&&!t.get()&&(n.preventDefault(),PS(e,RS(e,n))),n.type==="dragend"&&t.set(!1)})},$j=e=>{const t=o=>r=>{o(e,r)},n=rP(e);He(n)&&e.on("PastePreProcess",t(n));const s=iP(e);He(s)&&e.on("PastePostProcess",t(s))},Lj=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Mj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,OS=e=>Q.trim(e).replace(Mj,rc).toLowerCase(),Uj=(e,t,n)=>{const s=aP(e);if(n||s==="all"||!lP(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,u,d)=>{const p=r.parseStyle(r.decode(u)),g={};for(let _=0;_<o.length;_++){const C=p[o[_]];let w=C,S=r.getStyle(i,o[_],!0);/color/.test(o[_])&&(w=OS(w),S=OS(S)),S!==w&&(g[o[_]]=C)}const y=r.serializeStyle(g,"span");return y?c+' style="'+y+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},zj=e=>{(Ke.browser.isChromium()||Ke.browser.isSafari())&&Lj(e,Uj)},Hj=e=>{const t=zt(!1),n=zt(fP(e)?"text":"html"),s=J6(e);zj(e),Aj(e,n),$j(e),e.on("PreInit",()=>{Dj(e),Fj(e,t),kj(e,s,n)})},Wj=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Vj=e=>{e.parser.addNodeFilter("details",t=>{R(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{R(t,n=>{const s=n.attr("data-mce-open");n.attr("open",de(s)?s:null),n.attr("data-mce-open",null)})})},jj=e=>{Wj(e),Vj(e)},qj=Pt,DS=X,Kj=e=>bt(e.dom),Gj=e=>Fs(e.dom),BS=e=>t=>nt(x.fromDom(e),t),Yj=(e,t)=>Xr(x.fromDom(e),n=>Gj(n)||us(n),BS(t)).getOr(x.fromDom(t)).dom,IS=(e,t)=>Xr(x.fromDom(e),Kj,BS(t)),FS=(e,t,n)=>{const s=new Ft(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!qj(i);i=o())ss(i)&&(r=i);return r},Xj=(e,t)=>{const s=L.fromRangeStart(e).getNode(),o=Yj(s,t),r=FS(s,o,!1),i=FS(s,o,!0),a=document.createRange();return IS(r,o).fold(()=>{DS(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),IS(i,o).fold(()=>{DS(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a},Qj=e=>{const t=Xj(e.selection.getRng(),e.getBody());e.selection.setRng(im(t))},Zj=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),Qj(e))})};var nl;(function(e){e.Before="before",e.After="after"})(nl||(nl={}));const Jj=(e,t)=>Math.abs(e.left-t),e8=(e,t)=>Math.abs(e.right-t),t8=(e,t)=>e>=t.top&&e<=t.bottom,n8=(e,t)=>e.top<t.bottom&&e.bottom>t.top,s8=(e,t)=>{const n=kR(e,t)/Math.min(e.height,t.height);return n8(e,t)&&n>.5},o8=(e,t)=>{const n=j(e,s=>t8(t,s));return xR(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=le(e,i=>s8(i,s));return[o,r]})},r8=(e,t)=>({node:e.node,position:Jj(e,t)<e8(e,t)?nl.Before:nl.After}),i8=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),$g=(e,t,n)=>{const s=d=>ss(d.node)?b.some(d):ce(d.node)?$g(Et(d.node.childNodes),t,n):b.none(),o=(d,p)=>{if(d.length>=2){const g=s(d[0]).getOr(d[0]),y=s(d[1]).getOr(d[1]);if(Math.abs(p(g,t,n)-p(y,t,n))<2){if(X(g.node))return b.some(g);if(X(y.node))return b.some(y)}}return b.none()},r=(d,p)=>{const g=_o(d,(y,_)=>p(y,t,n)-p(_,t,n));return o(g,p).orThunk(()=>oo(g,s))},[i,a]=o8(N_(e),n),{pass:c,fail:u}=le(a,d=>d.top<n);return r(i,i8).orThunk(()=>r(u,qb)).orThunk(()=>r(c,qb))},a8=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>$g(Et(r.dom.childNodes),n,s),a=>{const c=j(Et(r.dom.childNodes),u=>u!==a.dom);return $g(c,n,s)}).orThunk(()=>(nt(r,e)?b.none():fA(r)).bind(c=>o(c,b.some(r))));return o(t,b.none())},l8=(e,t,n)=>{const s=x.fromDom(e),o=lo(s),i=x.fromPoint(o,t,n).filter(a=>ao(s,a)).getOr(s);return a8(s,i,t,n)},c8=(e,t,n)=>l8(e,t,n).filter(s=>wa(s.node)).map(s=>r8(s,t)),$S=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,i=o.defaultView;return{top:s.top+((t=i==null?void 0:i.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=i==null?void 0:i.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},u8=e=>e.inline?$S(e.getBody()):{left:0,top:0},f8=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},d8=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},m8=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=$S(e.getContentAreaContainer()),s=d8(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},g8=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),p8=(e,t)=>g8(u8(e),f8(e),m8(e,t)),cu=32,h8=100,uu=8,fu=16,Lg=bt,b8=RR(Lg,Fs),v8=(e,t)=>Lg(t)&&t!==e,C8=(e,t,n)=>lt(t)||t===n||e.dom.isChildOf(t,n)?!1:!Lg(t),y8=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},E8=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},_8=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},du=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},LS=du("left",-cu),MS=du("left",cu),US=du("top",-cu),zS=du("top",cu),w8=(e,t,n,s,o,r,i,a,c,u,d)=>{let p=0,g=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(p=t.pageX+n-o),t.pageY+s>r&&(g=t.pageY+s-r),e.style.width=n-p+"px",e.style.height=s-g+"px";const y=c.clientHeight,_=c.clientWidth,C=i+c.getBoundingClientRect().top,w=a+c.getBoundingClientRect().left;d.on(S=>{S.intervalId.clear(),S.dragging&&(i+uu>=y?S.intervalId.set(zS(u)):i-uu<=0?S.intervalId.set(US(u)):a+uu>=_?S.intervalId.set(MS(u)):a-uu<=0?S.intervalId.set(LS(u)):C+fu>=window.innerHeight?S.intervalId.set(zS(window)):C-fu<=0?S.intervalId.set(US(window)):w+fu>=window.innerWidth?S.intervalId.set(MS(window)):w-fu<=0&&S.intervalId.set(LS(window)))})},HS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},S8=e=>e.button===0,x8=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),k8=(e,t)=>n=>{if(S8(n)){const s=ve(t.dom.getParents(n.target),b8).getOr(null);if(oe(s)&&v8(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:E8(t,s,s.offsetWidth,s.offsetHeight),intervalId:gR(h8)})}}},N8=(e,t)=>{const n=jl((o,r)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(o,r)},0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const i=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&i>10){if(t.dispatch("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const a=x8(r,p8(t,o));_8(r.ghost,t.getBody()),w8(r.ghost,a,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s),n.throttle(o.clientX,o.clientY)}})},A8=e=>{const t=e.getSel();if(oe(t)){const s=t.getRangeAt(0).startContainer;return X(s)?s.parentNode:s}else return null},T8=(e,t)=>n=>{e.on(s=>{if(s.intervalId.clear(),s.dragging){if(C8(t,A8(t.selection),s.element)){const o=y8(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{HS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),WS(e)},R8=(e,t)=>()=>{e.on(n=>{n.intervalId.clear(),n.dragging&&t.dispatch("dragend")}),WS(e)},WS=e=>{e.on(t=>{t.intervalId.clear(),HS(t.ghost)}),e.clear()},P8=e=>{const t=Po(),n=rt.DOM,s=document,o=k8(t,e),r=N8(t,e),i=T8(t,e),a=R8(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===ge.ESC&&a()})},O8=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(z(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Lc(e,"Dropped file type is not supported"))}},n=o=>{hc(e,o.target)&&t(o)},s=()=>{const o=rt.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];R(c,u=>{o.bind(i,u,n),r.bind(a,u,t)}),e.on("remove",()=>{R(c,u=>{o.unbind(i,u,n),r.unbind(a,u,t)})})};e.on("init",()=>{qn.setEditorTimeout(e,s,0)})},D8=e=>{P8(e),G1(e)&&O8(e)},B8=e=>{const t=jl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=qm(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},I8=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if($s(n)){const s=wr(e.getBody(),n),o=bt(s)?s:n;e.selection.getNode()!==o&&ja(e,o).each(r=>e.selection.setRng(r))}})})},Ni=bt,Mg=(e,t)=>wr(e.getBody(),t),F8=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=IP(e,s,n.isBlock,()=>yr(e)),r="sel-"+n.uniqueId(),i="data-mce-selected";let a;const c=W=>oe(W)&&n.hasClass(W,"mce-offscreen-selection"),u=W=>W!==s&&(Ni(W)||$s(W))&&n.isChildOf(W,s),d=W=>{W&&t.setRng(W)},p=(W,F,$,ee=!0)=>e.dispatch("ShowCaret",{target:F,direction:W,before:$}).isDefaultPrevented()?null:(ee&&t.scrollIntoView(F,W===-1),o.show($,F)),g=W=>{W.hasAttribute("data-mce-caret")&&(kf(W),t.scrollIntoView(W))},y=()=>{e.on("click",F=>{const $=Mg(e,F.target);$&&Ni($)&&(F.preventDefault(),e.focus())}),e.on("blur NewBlock",M),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",F=>{const $=F.target,ee=Mg(e,$);Ni(ee)?(F.preventDefault(),ja(e,ee).each(A)):u($)&&ja(e,$).each(A)},!0),e.on("mousedown",F=>{const $=F.target;if($!==s&&$.nodeName!=="HTML"&&!n.isChildOf($,s)||!Iz(e,F.clientX,F.clientY))return;M(),J();const ee=Mg(e,$);Ni(ee)?(F.preventDefault(),ja(e,ee).each(A)):c8(s,F.clientX,F.clientY).each(me=>{F.preventDefault();const be=p(1,me.node,me.position===nl.Before,!1);d(be),ce(ee)?ee.focus():e.getBody().focus()})}),e.on("keypress",F=>{ge.modifierPressed(F)||Ni(t.getNode())&&F.preventDefault()}),e.on("GetSelectionRange",F=>{let $=F.range;if(a){if(!a.parentNode){a=null;return}$=$.cloneRange(),$.selectNode(a),F.range=$}}),e.on("SetSelectionRange",F=>{F.range=w(F.range);const $=A(F.range,F.forward);$&&(F.range=$)});const W=F=>ce(F)&&F.id==="mcepastebin";e.on("AfterSetSelectionRange",F=>{const $=F.range,ee=$.startContainer.parentElement;!C($)&&!W(ee)&&J(),c(ee)||M()}),D8(e),B8(e),I8(e)},_=W=>zn(W)||Fl(W)||$l(W),C=W=>_(W.startContainer)||_(W.endContainer),w=W=>{const F=e.schema.getVoidElements(),$=n.createRng(),ee=W.startContainer,me=W.startOffset,be=W.endContainer,Te=W.endOffset;return Fe(F,ee.nodeName.toLowerCase())?me===0?$.setStartBefore(ee):$.setStartAfter(ee):$.setStart(ee,me),Fe(F,be.nodeName.toLowerCase())?Te===0?$.setEndBefore(be):$.setEndAfter(be):$.setEnd(be,Te),$},S=(W,F)=>{const $=x.fromDom(e.getBody()),ee=e.getDoc(),me=aa($,"#"+r).getOrThunk(()=>{const Me=x.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ee);return Vt(Me,"id",r),Ut($,Me),Me}),be=n.createRng();oa(me),nr(me,[x.fromText(jt,ee),x.fromDom(F),x.fromText(jt,ee)]),be.setStart(me.dom.firstChild,1),be.setEnd(me.dom.lastChild,0),kl(me,{top:n.getPos(W,e.getBody()).y+"px"}),ey(me);const Te=t.getSel();return Te&&(Te.removeAllRanges(),Te.addRange(be)),be},k=W=>{const F=W.cloneNode(!0),$=e.dispatch("ObjectSelected",{target:W,targetClone:F});if($.isDefaultPrevented())return null;const ee=S(W,$.targetClone),me=x.fromDom(W);return R(gn(x.fromDom(e.getBody()),`*[${i}]`),be=>{nt(me,be)||tn(be,i)}),n.getAttrib(W,i)||W.setAttribute(i,"1"),a=W,J(),ee},A=(W,F)=>{if(!W)return null;if(W.collapsed){if(!C(W)){const be=F?1:-1,Te=Na(be,s,W),Me=Te.getNode(!F);if(wa(Me))return p(be,Me,F?!Te.isAtEnd():!1,!1);const We=Te.getNode(F);if(wa(We))return p(be,We,F?!1:!Te.isAtEnd(),!1)}return null}let $=W.startContainer,ee=W.startOffset;const me=W.endOffset;if(X($)&&ee===0&&Ni($.parentNode)&&($=$.parentNode,ee=n.nodeIndex($),$=$.parentNode),!ce($))return null;if(me===ee+1&&$===W.endContainer){const be=$.childNodes[ee];if(u(be))return k(be)}return null},M=()=>{a&&a.removeAttribute(i),aa(x.fromDom(e.getBody()),"#"+r).each(Ct),a=null},H=()=>{o.destroy(),a=null},J=()=>{o.hide()};return qs(e)||y(),{showCaret:p,showBlockCaretContainer:g,hideFakeCaret:J,destroy:H}},$8=(e,t)=>{let n=t;for(let s=e.previousSibling;X(s);s=s.previousSibling)n+=s.data.length;return n},VS=(e,t,n,s,o)=>{if(X(n)&&(s<0||s>n.data.length))return[];const r=o&&X(n)?[$8(n,s)]:[s];let i=n;for(;i!==t&&i.parentNode;)r.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?r.reverse():[]},Ug=(e,t,n,s,o,r,i=!1)=>{const a=VS(e,t,n,s,i),c=VS(e,t,o,r,i);return{start:a,end:c}},jS=(e,t)=>{const n=t.slice(),s=n.pop();return dn(s)?Ee(n,(r,i)=>r.bind(a=>b.from(a.childNodes[i])),b.some(e)).bind(r=>X(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s})):b.none()},qS=(e,t)=>jS(e,t.start).bind(({node:n,offset:s})=>jS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),L8=(e,t,n,s=!1)=>Ug(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Ai=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Ai(e,s,n)}},mu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(X(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),X(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ai(e,o,n),o!==r&&Ai(e,r,n))},zg=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),KS=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:pv(s).concat(e.blockPatterns),inlinePatterns:hv(s).concat(e.inlinePatterns)}},GS=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},YS=(e,t,n)=>{_W(t,0,t).each(o=>{const r=o.container;Nw(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),mu(e,a,c=>c===t)})})},M8=(e,t)=>{const n=e.dom,s=t.pattern,o=qS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return St(c)&&Jt(c).exists(u=>Fe(u,"block"))};return zg(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{YS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{YS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},U8=e=>_o(e,(t,n)=>n.start.length-t.start.length),z8=(e,t)=>{const n=U8(e),s=t.replace(jt," ");return ve(n,o=>t.indexOf(o.start)===0||s.indexOf(o.start)===0)},H8=(e,t,n,s)=>{var o;const r=e.dom,i=Rn(e);if(!r.is(t,i))return[];const a=(o=t.textContent)!==null&&o!==void 0?o:"";return z8(n.blockPatterns,a).map(c=>Q.trim(a).length===c.start.length?[]:[{pattern:c,range:Ug(r,r.getRoot(),t,0,t,0,s)}]).getOr([])},W8=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();R(t,s=>M8(e,s)),e.selection.moveToBookmark(n)},XS=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),gu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},QS=(e,t,n)=>{const s=qS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset),c=a.parentNode,u=i.parentNode;return{prefix:t,end:u.insertBefore(XS(e,t+"-end"),i),start:c.insertBefore(XS(e,t+"-start"),a)}},ZS=(e,t,n)=>{Ai(e,e.get(t.prefix+"-end"),n),Ai(e,e.get(t.prefix+"-start"),n)},Hg=e=>e.start.length===0,V8=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},JS=(e,t,n,s)=>{const o=t.start;return gg(e,s.container,s.offset,V8(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),b.some(a)}else{const a=i.offset-o.length;return mg(i.container,a,n).map(c=>{const u=e.createRng();return u.setStart(c.container,c.offset),u.setEnd(i.container,i.offset),u}).filter(c=>c.toString()===o).orThunk(()=>JS(e,t,n,bs(i.container,0)))}})},j8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return dg(n,s,o).bind(i=>JS(e,t,o,i).bind(c=>{var u;if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return b.none();if(i.offset===0&&((u=c.endContainer.textContent)===null||u===void 0?void 0:u.length)===c.endOffset)return b.none()}return b.some(c)}))},q8=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),i=n.pattern,a=n.position.container,c=n.position.offset;return mg(a,c-n.pattern.end.length,t).bind(u=>{const d=Ug(o,r,u.container,u.offset,a,c,s);if(Hg(i))return b.some({matches:[{pattern:i,startRng:d,endRng:d}],position:u});{const p=ex(e,n.remainingPatterns,u.container,u.offset,t,s),g=p.getOr({matches:[],position:u}),y=g.position;return j8(o,i,y.container,y.offset,t,p.isNone()).map(C=>{const w=L8(o,r,C,s);return{matches:g.matches.concat([{pattern:i,startRng:w,endRng:d}]),position:bs(C.startContainer,C.startOffset)}})}})},ex=(e,t,n,s,o,r)=>{const i=e.dom;return dg(n,s,i.getRoot()).bind(a=>{const c=GS(i,o,n,s);for(let u=0;u<t.length;u++){const d=t[u];if(!Zp(c,d.end))continue;const p=t.slice();p.splice(u,1);const g=q8(e,o,{pattern:d,remainingPatterns:p,position:a},r);if(g.isSome())return g}return b.none()})},tx=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?R(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},K8=(e,t,n,s)=>{const o=gu(e.dom,n);mu(e.dom,o,s),tx(e,t,o)},G8=(e,t,n,s,o)=>{const r=e.dom,i=gu(r,s),a=gu(r,n);mu(r,a,o),mu(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},u=gu(r,c);tx(e,t,u)},Y8=(e,t)=>{const n=Ub("mce_textpattern"),s=se(t,(o,r)=>{const i=QS(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return se(s,(o,r)=>{const i=s.length-o.length-1,a=Hg(r.pattern)?r.endMarker:QS(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:a}])},[])},nx=(e,t,n,s,o,r)=>ex(e,o.inlinePatterns,n,s,t,r).fold(()=>[],i=>i.matches),sx=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=Y8(n,t);R(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Hg(r.pattern)?K8(e,r.pattern,r.endMarker,a):G8(e,r.pattern,r.startMarker,r.endMarker,a),ZS(n,r.endMarker,a),ZS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},X8=(e,t)=>{const n=e.selection.getRng();return zg(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),i=KS(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),a=nx(e,s,n.startContainer,r,i,!0),c=H8(e,s,i,!0);return c.length>0||a.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Qr),sx(e,a),W8(e,c);const u=e.selection.getRng(),d=dg(u.startContainer,u.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),d.each(p=>{const g=p.container;g.data.charAt(p.offset-1)===Qr&&(g.deleteData(p.offset-1,1),Ai(e.dom,g.parentNode,y=>y===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},Q8=(e,t)=>{const n=e.selection.getRng();zg(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=GS(e.dom,s,n.startContainer,o),i=KS(t,s,r),a=nx(e,s,n.startContainer,o,i,!1);a.length>0&&e.undoManager.transact(()=>{sx(e,a)})})},ox=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},Z8=(e,t)=>ox(e,t,(n,s)=>n===s.keyCode&&!ge.modifierPressed(s)),J8=(e,t)=>ox(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),e5=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>t1(gP(e),pP(e)),o=()=>CP(e);e.on("keydown",i=>{if(i.keyCode===13&&!ge.modifierPressed(i)&&e.selection.isCollapsed()){const a=s();(a.inlinePatterns.length>0||a.blockPatterns.length>0||o())&&X8(e,a)&&i.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const i=s();(i.inlinePatterns.length>0||o())&&Q8(e,i)}};e.on("keyup",i=>{Z8(n,i)&&r()}),e.on("keypress",i=>{J8(t,i)&&qn.setEditorTimeout(e,r)})},t5=e=>{e5(e)},n5=e=>{const t=Q.each,n=ge.BACKSPACE,s=ge.DELETE,o=e.dom,r=e.selection,i=e.parser,a=Ke.browser,c=a.isFirefox(),u=a.isChromium()||a.isSafari(),d=Ke.deviceType.isiPhone()||Ke.deviceType.isiPad(),p=Ke.os.isMacOS()||Ke.os.isiOS(),g=(ie,we)=>{try{e.getDoc().execCommand(ie,!1,String(we))}catch{}},y=ie=>ie.isDefaultPrevented(),_=()=>{const ie=ye=>{const te=o.create("body"),Ie=ye.cloneContents();return te.appendChild(Ie),r.serializer.serialize(te,{format:"html"})},we=ye=>{const te=ie(ye),Ie=o.createRng();Ie.selectNode(e.getBody());const De=ie(Ie);return te===De};e.on("keydown",ye=>{const te=ye.keyCode;if(!y(ye)&&(te===s||te===n)){const Ie=e.selection.isCollapsed(),De=e.getBody();if(Ie&&!o.isEmpty(De)||!Ie&&!we(e.selection.getRng()))return;ye.preventDefault(),e.setContent(""),De.firstChild&&o.isBlock(De.firstChild)?e.selection.setCursorLocation(De.firstChild,0):e.selection.setCursorLocation(De,0),e.nodeChanged()}})},C=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},w=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",ie=>{let we;if(ie.target===e.getDoc().documentElement)if(we=r.getRng(),e.getBody().focus(),ie.type==="mousedown"){if(zn(we.startContainer))return;r.placeCaretAt(ie.clientX,ie.clientY)}else r.setRng(we)})},S=()=>{e.on("keydown",ie=>{if(!y(ie)&&ie.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode(),ye=we.previousSibling;if(we.nodeName==="HR"){o.remove(we),ie.preventDefault();return}ye&&ye.nodeName&&ye.nodeName.toLowerCase()==="hr"&&(o.remove(ye),ie.preventDefault())}}})},k=()=>{Range.prototype.getClientRects||e.on("mousedown",ie=>{if(!y(ie)&&ie.target.nodeName==="HTML"){const we=e.getBody();we.blur(),qn.setEditorTimeout(e,()=>{we.focus()})}})},A=()=>{const ie=Pv(e);e.on("click",we=>{const ye=we.target;/^(IMG|HR)$/.test(ye.nodeName)&&o.getContentEditableParent(ye)!=="false"&&(we.preventDefault(),e.selection.select(ye),e.nodeChanged()),ye.nodeName==="A"&&o.hasClass(ye,ie)&&ye.childNodes.length===0&&(we.preventDefault(),r.select(ye))})},M=()=>{const ie=()=>{const ye=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const te=r.getStart();te!==e.getBody()&&(o.setAttrib(te,"style",null),t(ye,Ie=>{te.setAttributeNode(Ie.cloneNode(!0))}))}},we=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",ye=>{let te;return!y(ye)&&(ye.keyCode===8||ye.keyCode===46)&&we()?(te=ie(),e.getDoc().execCommand("delete",!1),te(),ye.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",ye=>{if(!y(ye)&&we()){const te=ie();qn.setEditorTimeout(e,()=>{te()})}})},H=()=>{e.on("keydown",ie=>{if(!y(ie)&&ie.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode().previousSibling;if(we&&we.nodeName&&we.nodeName.toLowerCase()==="table")return ie.preventDefault(),!1}return!0})},J=()=>{e.on("keydown",ie=>{if(y(ie)||ie.keyCode!==ge.BACKSPACE)return;let we=r.getRng();const ye=we.startContainer,te=we.startOffset,Ie=o.getRoot();let De=ye;if(!(!we.collapsed||te!==0)){for(;De.parentNode&&De.parentNode.firstChild===De&&De.parentNode!==Ie;)De=De.parentNode;De.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,De),we=o.createRng(),we.setStart(ye,0),we.setEnd(ye,0),r.setRng(we))}})},W=()=>{const ie=()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),Av(e)||g("enableObjectResizing",!1)};Rv(e)||e.on("BeforeExecCommand mousedown",ie)},F=()=>{const ie=()=>{t(o.select("a"),we=>{var ye;let te=we.parentNode;const Ie=o.getRoot();if((te==null?void 0:te.lastChild)===we){for(;te&&!o.isBlock(te);){if(((ye=te.parentNode)===null||ye===void 0?void 0:ye.lastChild)!==te||te===Ie)return;te=te.parentNode}o.add(te,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",we=>{(we.type==="setcontent"||we.command==="mceInsertLink")&&ie()})},$=()=>{e.on("init",()=>{g("DefaultParagraphSeparator",Rn(e))})},ee=ie=>{const we=ie.getBody(),ye=ie.selection.getRng();return ye.startContainer===ye.endContainer&&ye.startContainer===we&&ye.startOffset===0&&ye.endOffset===we.childNodes.length},me=()=>{e.on("keyup focusin mouseup",ie=>{!ge.modifierPressed(ie)&&!ee(e)&&r.normalize()},!0)},be=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Te=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Me=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ie=>{let we;ie.target.nodeName==="HTML"&&(we=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(we),e.selection.normalize(),e.nodeChanged())}))},We=()=>{p&&e.on("keydown",ie=>{ge.metaKeyPressed(ie)&&!ie.shiftKey&&(ie.keyCode===37||ie.keyCode===39)&&(ie.preventDefault(),e.selection.getSel().modify("move",ie.keyCode===37?"backward":"forward","lineboundary"))})},Je=()=>{e.on("click",ie=>{let we=ie.target;do if(we.tagName==="A"){ie.preventDefault();return}while(we=we.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},$t=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ie=>{ie.preventDefault()})})},Z=()=>{i.addNodeFilter("br",ie=>{let we=ie.length;for(;we--;)ie[we].attr("class")==="Apple-interchange-newline"&&ie[we].remove()})},Re=$e,Oe=()=>{if(!c||e.removed)return!1;const ie=e.selection.getSel();return!ie||!ie.rangeCount||ie.rangeCount===0},xe=()=>{u&&(w(),A(),$t(),C(),d&&(Te(),Me(),Je())),c&&(k(),W(),be(),We())},wt=()=>{J(),_(),Ke.windowsPhone||me(),u&&(w(),A(),$(),$t(),H(),Z(),d?(Te(),Me(),Je()):C()),c&&(S(),k(),M(),W(),F(),be(),We(),H())};return qs(e)?xe():wt(),{refreshContentEditable:Re,isHidden:Oe}},Wg=rt.DOM,s5=(e,t)=>{const n=x.fromDom(e.getBody()),s=gf(So(n)),o=x.fromTag("style");Vt(o,"type","text/css"),Ut(o,x.fromText(t)),Ut(s,o),e.on("remove",()=>{Ct(o)})},o5=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Vg=e=>qi(e,t=>Yt(t)===!1),rx=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Vg({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:o5(e),validate:!0,blob_cache:n,document:e.getDoc()})},ix=e=>{const t=e.options.get;return Vg({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},r5=e=>{const t=e.options.get;return{...rx(e),...ix(e),...Vg({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},i5=e=>{const t=yi(rx(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let i=n.length;for(;i--;){const a=n[i];let c=a.attr(s);if(c&&!a.attr(r)){if(c.indexOf("data:")===0||c.indexOf("blob:")===0)continue;s==="style"?(c=o.serializeStyle(o.parseStyle(c),a.name),c.length||(c=null),a.attr(r,c),a.attr(s,c)):s==="tabindex"?(a.attr(r,c),a.attr(s,null)):a.attr(r,e.convertURL(c,s,a.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),vP(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new bn("br",1))}}),t},a5=e=>{const t=tP(e);t&&qn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},l5=e=>{const t=e.dom.getRoot();!e.inline&&(!ic(e)||e.selection.getStart(!0)===t)&&hn(t).each(n=>{const s=n.getNode(),o=co(s)?hn(s).getOr(n):n;e.selection.setRng(o.toRange())})},c5=e=>{e.bindPendingEventDelegates(),e.initialized=!0,XO(e),e.focus(!0),l5(e),e.nodeChanged({initial:!0});const t=J1(e);He(t)&&t.call(e,e),a5(e)},ax=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,u5=(e,t,n)=>{const s=[ax(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},lx=e=>{const t=ax(e),n=Nv(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";Q.each(e.contentStyles,u=>{c+=u+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(u5(e,s,n)).then(r).catch(r),a=N1(e);return a&&s5(e,a),i},f5=e=>{const t=e.getDoc(),n=e.getBody();GO(e),nP(e)||(t.body.spellcheck=!1,Wg.setAttrib(n,"spellcheck","false")),e.quirks=n5(e),YO(e);const s=A1(e);s!==void 0&&(n.dir=s);const o=sP(e);o&&e.on("BeforeSetContent",r=>{Q.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},d5=e=>{qs(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},jg=e=>{e.removed!==!0&&(d5(e),c5(e))},cx=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Wg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=Rv(e),e.readonly||(e.inline&&Wg.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=aH(e),e.schema=Ro(ix(e)),e.dom=rt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:w1(e),referrerPolicy:Xf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=i5(e),e.serializer=BE(r5(e),e),e.selection=DE(e.dom,e.getWin(),e.serializer,e),e.annotator=NC(e),e.formatter=qE(e),e.undoManager=GE(e),e._nodeChangeDispatcher=new W6(e),e._selectionOverrides=F8(e),h3(e),jj(e),S3(e),qs(e)||(Zj(e),t5(e));const o=H6(e);m3(e,o),E3(e),_H(e),Hj(e);const r=hU(e);f5(e),r.fold(()=>{lx(e).then(()=>jg(e))},i=>{e.setProgressState(!0),lx(e).then(()=>{i().then(a=>{e.setProgressState(!1),jg(e),AE(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),jg(e),AE(e)})})})},ux=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=Zz(x.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,cx(e)});if(Ke.browser.isFirefox()){const o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close()}else n.srcdoc=e.iframeHTML}else cx(e)},qg=rt.DOM,m5=(e,t,n,s)=>{const o=x.fromTag("iframe");return s.each(r=>Vt(o,"tabindex",r)),wo(o,n),wo(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Ji(o,"tox-edit-area__iframe"),o},g5=e=>{let t=l1(e)+"<html><head>";yv(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=c1(e),s=u1(e),o=e.translate(Q1(e));return Ev(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Ev(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},p5=(e,t)=>{const n=e.translate("Rich Text Area"),s=io(x.fromDom(e.getElement()),"tabindex").bind(El),o=m5(e.id,n,a1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=g5(e),qg.add(t.iframeContainer,o)},h5=(e,t)=>{p5(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=qg.isHidden(t.editorContainer)),e.getElement().style.display="none",qg.setAttrib(e.id,"aria-hidden","true"),ux(e)},fx=rt.DOM,b5=(e,t,n)=>{const s=_i.get(n),o=_i.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Q.trim(n),s&&Q.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,He(r.init)&&(r.init(e,o),t.push(n))}catch(r){qz(e,n,r)}}},v5=e=>e.replace(/^\-/,""),C5=e=>{const t=[];R(Xl(e),n=>{b5(e,t,v5(n))})},y5=e=>{const t=Q.trim(Sv(e)),n=e.ui.registry.getAll().icons,s={...$c.get("default").icons,...$c.get(t).icons};ct(s,(o,r)=>{Fe(n,r)||e.ui.registry.addIcon(r,o)})},E5=e=>{const t=ii(e);if(de(t)){const n=kr.get(t);e.theme=n(e,kr.urls[t])||{},He(e.theme.init)&&e.theme.init(e,kr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},_5=e=>{const t=Qf(e),n=Ei.get(t);e.model=n(e,Ei.urls[t])},w5=e=>{const t=e.theme.renderUI;return t?t():mx(e)},S5=e=>{const t=e.getElement(),s=ii(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},dx=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),x5=e=>{const t=fx.create("div");return fx.insertAfter(t,e),dx(t,t)},mx=e=>{const t=e.getElement();return e.inline?dx(null):x5(t)},k5=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,de(ii(e))?w5(e):He(ii(e))?S5(e):mx(e)},N5=(e,t)=>{const n={show:b.from(t.show).getOr($e),hide:b.from(t.hide).getOr($e),isEnabled:b.from(t.isEnabled).getOr(vt),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},A5=e=>{e.dispatch("ScriptsLoaded"),y5(e),E5(e),_5(e),C5(e);const t=k5(e);N5(e,b.from(t.api).getOr({})),e.editorContainer=t.editorContainer,Xz(e),e.inline?ux(e):h5(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Nr=rt.DOM,gx=e=>e.charAt(0)==="-",T5=(e,t)=>{const n=xv(t),s=S1(t);if(!fs.hasCode(n)&&n!=="en"){const o=Os(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{Wz(t,o,n)})}},R5=(e,t)=>{const n=ii(e);if(de(n)&&!gx(n)&&!Fe(kr.urls,n)){const s=D1(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;kr.load(n,o).catch(()=>{Vz(e,o,n)})}},P5=(e,t)=>{const n=Qf(e);if(n!=="plugin"&&!Fe(Ei.urls,n)){const s=B1(e),o=de(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;Ei.load(n,o).catch(()=>{jz(e,o,n)})}},O5=e=>b.from(v1(e)).filter(Os).map(t=>({url:t,name:b.none()})),px=(e,t,n)=>b.from(t).filter(s=>Os(s)&&!$c.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),D5=(e,t,n)=>{const s=px(t,"default",n),o=O5(t).orThunk(()=>px(t,Sv(t),""));R(YN([s,o]),r=>{e.add(r.url).catch(()=>{Hz(t,r.url,r.name.getOrUndefined())})})},B5=(e,t)=>{const n=(s,o)=>{_i.load(s,o).catch(()=>{zz(e,o,s)})};ct(K1(e),(s,o)=>{n(o,s),e.options.set("plugins",Xl(e).concat(o))}),R(Xl(e),s=>{s=Q.trim(s),s&&!_i.urls[s]&&!gx(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},I5=e=>{const t=ii(e);return!de(t)||oe(kr.get(t))},F5=e=>{const t=Qf(e);return oe(Ei.get(t))},$5=(e,t)=>{const n=fo.ScriptLoader,s=()=>{!e.removed&&I5(e)&&F5(e)&&A5(e)};R5(e,t),P5(e,t),T5(n,e),D5(n,e,t),B5(e,t),n.loadQueue().then(s,s)},L5=(e,t)=>ab.forElement(e,{contentCssCors:q1(t),referrerPolicy:Xf(t)}),M5=e=>{const t=e.id;fs.setCode(xv(e));const n=()=>{Nr.unbind(window,"ready",n),e.render()};if(!ur.Event.domLoaded){Nr.bind(window,"ready",n);return}if(!e.getElement())return;const s=x.fromDom(e.getElement()),o=Nh(s);e.on("remove",()=>{Ce(s.dom.attributes,i=>tn(s,i.name)),wo(s,o)}),e.ui.styleSheetLoader=L5(s,e),Zf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Nr.getParent(t,"form");r&&(e.formElement=r,U1(e)&&!vf(e.getElement())&&(Nr.insertAfter(Nr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Nr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),z1(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=LE(e),e.notificationManager=$E(e),_P(e)&&e.on("GetContent",i=>{i.save&&(i.content=Nr.encode(i.content))}),H1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),W1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),$5(e,e.suffix)},U5=(e,t)=>({sections:K(e),options:K(t)}),hx=Jo().deviceType,bx=hx.isPhone(),z5=hx.isTablet(),sl=e=>{if(lt(e))return[];{const t=St(e)?e:e.split(/[ ,]/),n=V(t,jr);return j(n,Os)}},H5=(e,t)=>{const n=yN(t,(s,o)=>z(e,o));return U5(n.t,n.f)},W5=(e,t,n={})=>{const s=e.sections(),o=gt(s,t).getOr({});return Q.extend({},n,o)},Kg=(e,t)=>Fe(e.sections(),t),V5=(e,t)=>Kg(e,t)?e.sections()[t]:{},j5=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:gt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),q5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?Q.extend({},e.external_plugins,s):s},K5=(e,t)=>[...sl(e),...sl(t)],G5=(e,t,n,s)=>e&&Kg(t,"mobile")?s:n,Y5=(e,t,n,s)=>{const o=sl(n.forced_plugins),r=sl(s.plugins),i=V5(t,"mobile"),a=i.plugins?sl(i.plugins):r,c=G5(e,t,r,a),u=K5(o,c);return Q.extend(s,{forced_plugins:o,plugins:u})},X5=(e,t)=>e&&Kg(t,"mobile"),Q5=(e,t,n,s,o)=>{var r;const i=e?{mobile:j5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=H5(["mobile"],Qc(i,o)),c=Q.extend(n,s,a.options(),X5(e,a)?W5(a,"mobile"):{},{external_plugins:q5(s,a.options())});return Y5(e,a,s,c)},Z5=(e,t)=>Q5(bx||z5,bx,t,e,t),J5=(e,t)=>zU(e,t),e4=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{R("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},t4=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return Y(o,r=>oe(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},n4=e=>{e4(e),t4(e)},s4=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ke.os.isMacOS()||Ke.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},o4=(e,t,n)=>{const s=x.fromDom(e.getRoot());return Fa(s,L.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),$a(s,L.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},r4=e=>{if(typeof e!="string"){const t=Q.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},i4=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?o4(s,n.getRng(),t):t},pu=(e,t)=>{const{content:n,details:s}=r4(t);Om(e,{...s,content:i4(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=MU(e,o.content,s);Dm(e,r,o),e.addVisual()})},a4=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{pu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{pu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{pu(e,s)},mceInsertContent:(t,n,s)=>{pu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},l4={"font-size":"size","font-family":"face"},c4=cf("font"),u4=(e,t,n)=>{const s=r=>Nl(r,e).orThunk(()=>c4(r)?gt(l4,e).bind(i=>io(r,i)):b.none()),o=r=>nt(x.fromDom(t),r);return um(x.fromDom(n),r=>s(r),o)},f4=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),d4=(e,t)=>b.from(rt.DOM.getStyle(t,e,!0)),vx=e=>(t,n)=>b.from(n).map(x.fromDom).filter(ts).bind(s=>u4(e,t,s.dom).or(d4(e,s.dom))).getOr(""),m4=vx("font-size"),g4=It(f4,vx("font-family")),p4=e=>hn(e.getBody()).bind(t=>{const n=t.container();return b.from(X(n)?n.parentNode:n)}),h4=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),b4=(e,t)=>h4(e).orThunk(re(p4,e)).map(x.fromDom).filter(ts).bind(t),Gg=(e,t)=>b4(e,Nt(b.some,t)),Cx=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=yP(e),o=EP(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},v4=e=>{const t=e.split(/\s*,\s*/);return V(t,n=>n.indexOf(" ")!==-1&&!(Xt(n,'"')||Xt(n,"'"))?`'${n}'`:n).join(",")},C4=(e,t)=>{const n=Cx(e,t);e.formatter.toggle("fontname",{value:v4(n)}),e.nodeChanged()},y4=e=>Gg(e,t=>g4(e.getBody(),t.dom)).getOr(""),E4=(e,t)=>{e.formatter.toggle("fontsize",{value:Cx(e,t)}),e.nodeChanged()},_4=e=>Gg(e,t=>m4(e.getBody(),t.dom)).getOr(""),w4=e=>Gg(e,t=>{const n=x.fromDom(e.getBody()),s=um(t,r=>Nl(r,"line-height"),re(nt,n)),o=()=>{const r=parseFloat(Is(t,"line-height")),i=parseFloat(Is(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),S4=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},x4=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{C4(e,o)},FontSize:(n,s,o)=>{E4(e,o)},LineHeight:(n,s,o)=>{S4(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(de(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},k4=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>y4(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>_4(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>w4(e))},N4=e=>{x4(e),k4(e)},A4=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},T4=e=>{e.editorCommands.addCommands({Indent:()=>{u3(e)},Outdent:()=>{j_(e)}}),e.editorCommands.addCommands({Outdent:()=>z_(e)},"state")},R4=e=>{const t=(n,s,o)=>{const r=de(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");it(r)&&de(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},P4=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},O4=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},D4=e=>{P4(e),O4(e)},B4=e=>{e.editorCommands.addCommands({insertParagraph:()=>{iu(nS,e)},mceInsertNewLine:(t,n,s)=>{cS(e,s)},InsertLineBreak:(t,n,s)=>{iu(rS,e)}})},I4=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>ce(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Fs);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},F4=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{PB(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},$4=e=>{n4(e),s4(e),A4(e),I4(e),a4(e),R4(e),T4(e),B4(e),D4(e),N4(e),F4(e)};class yx{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():lB(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const u=this.commands.exec[i];return He(u)?(u(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return He(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return He(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;ct(t,(o,r)=>{R(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const Ar="data-mce-contenteditable",L4=(e,t,n)=>{ff(e,t)&&!n?Sl(e,t):n&&Ji(e,t)},Yg=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},hu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},M4=e=>{R(gn(e,'*[contenteditable="true"]'),t=>{Vt(t,Ar,"true"),hu(t,!1)})},U4=e=>{R(gn(e,`*[${Ar}="true"]`),t=>{tn(t,Ar),hu(t,!0)})},z4=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},H4=e=>{e.selection.setRng(e.selection.getRng())},W4=(e,t)=>{const n=x.fromDom(e.getBody());L4(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),z4(e),e.readonly=!0,hu(n,!1),M4(n)):(e.readonly=!1,hu(n,!0),U4(n),Yg(e,"StyleWithCSS",!1),Yg(e,"enableInlineTableEditing",!1),Yg(e,"enableObjectResizing",!1),TB(e)&&e.focus(),H4(e),e.nodeChanged())},Tr=e=>e.readonly,Ex=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Tr(e)&&R(t,n=>{n.attr(Ar,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Ar,t=>{Tr(e)&&R(t,n=>{n.attr("contenteditable",n.attr(Ar))})}),e.serializer.addTempAttr(Ar)},V4=e=>{e.serializer?Ex(e):e.on("PreInit",()=>{Ex(e)})},j4=e=>e.type==="click",q4=["copy"],K4=e=>z(q4,e.type),G4=(e,t)=>rr(t,"a",s=>nt(s,x.fromDom(e.getBody()))).bind(s=>io(s,"href")),Y4=(e,t)=>{if(j4(t)&&!ge.metaKeyPressed(t)){const n=x.fromDom(t.target);G4(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${ON(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else K4(t)&&e.dispatch(t.type,t)},X4=e=>{e.on("ShowCaret",t=>{Tr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Tr(e)&&t.preventDefault()})},Q4=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Xg{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ze}static isNative(t){return!!Q4[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=Bf(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=Ze),n){const r={func:n,removed:!1};o&&Q.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let u=this.bindings[c];u||(u=[],this.toggleEvent(c,!0)),s?u=[r,...u]:u=[...u,r],this.bindings[c]=u}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return ct(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=le(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,R(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else ct(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const ol=e=>(e._eventDispatcher||(e._eventDispatcher=new Xg({scope:e,toggleEvent:(t,n)=>{Xg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Qg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Bf(e.toLowerCase(),t!=null?t:{},s);const o=ol(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return ol(this).on(e,t,n)},off(e,t){return ol(this).off(e,t)},once(e,t){return ol(this).once(e,t)},hasEventListeners(e){return ol(this).has(e)}},bu=rt.DOM;let Rr;const vu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=Tv(e);return n?(e.eventRoot||(e.eventRoot=bu.select(n)[0]),e.eventRoot):e.getBody()},Z4=e=>!e.hidden&&!Tr(e),_x=(e,t,n)=>{Z4(e)?e.dispatch(t,n):Tr(e)&&Y4(e,n)},wx=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=vu(e,t);if(Tv(e)){if(Rr||(Rr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Rr&&(ct(Rr,(o,r)=>{e.dom.unbind(vu(e,r))}),Rr=null)})),Rr[t])return;const s=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||bu.isChildOf(r,c))&&_x(i[a],t,o)}};Rr[t]=s,bu.bind(n,t,s)}else{const s=o=>{_x(e,t,o)};bu.bind(n,t,s),e.delegates[t]=s}},Sx={...Qg,bindPendingEventDelegates(){const e=this;Q.each(e._pendingNativeEvents,t=>{wx(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?wx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(vu(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(ct(e.delegates,(s,o)=>{e.dom.unbind(vu(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},J4=e=>de(e)?{value:e.split(/[ ,]/),valid:!0}:Ts(e,de)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},e9=e=>{const t=(()=>{switch(e){case"array":return St;case"boolean":return _n;case"function":return He;case"number":return dn;case"object":return it;case"string":return de;case"string[]":return J4;case"object[]":return n=>Ts(n,it);case"regexp":return n=>Jn(n,RegExp);default:return vt}})();return n=>Zg(n,t,`The value must be a ${e}.`)},t9=e=>de(e.processor),xx=(e,t)=>{const n=Yi(t.message)?"":`. ${t.message}`;return e+n},kx=e=>e.valid,Zg=(e,t,n="")=>{const s=t(e);return _n(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},n9=(e,t,n)=>{if(!Yt(t)){const s=Zg(t,n);if(kx(s))return s.value;console.error(xx(`Invalid default value passed for the "${e}" option`,s))}},s9=(e,t)=>{const n={},s={},o=(p,g,y)=>{const _=Zg(g,y);return kx(_)?(s[p]=_.value,!0):(console.warn(xx(`Invalid value passed for the ${p} option`,_)),!1)},r=(p,g)=>{const y=t9(g)?e9(g.processor):g.processor,_=n9(p,g.default,y);n[p]={...g,default:_,processor:y},gt(s,p).orThunk(()=>gt(t,p)).each(w=>o(p,w,y))},i=p=>Fe(n,p);return{register:r,isRegistered:i,get:p=>gt(s,p).orThunk(()=>gt(n,p).map(g=>g.default)).getOrUndefined(),set:(p,g)=>{if(i(p)){const y=n[p];return y.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,g,y.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const g=i(p);return g&&delete s[p],g},isSet:p=>Fe(s,p)}},o9=["design","readonly"],Nx=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&W4(e,r.editorReadOnly),t.set(s),jO(e,s)},r9=(e,t,n,s)=>{if(s!==n.get()){if(!Fe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Nx(e,n,t,s):e.on("init",()=>Nx(e,n,t,s))}},i9=(e,t,n)=>{if(z(o9,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},a9=e=>{const t=zt("design"),n=zt({design:{activate:$e,deactivate:$e,editorReadOnly:!1},readonly:{activate:$e,deactivate:$e,editorReadOnly:!0}});return V4(e),X4(e),{isReadOnly:()=>Tr(e),set:s=>r9(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(i9(n.get(),s,o))}}},Jg=Q.each,ep=Q.explode,l9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ax=Q.makeMap("alt,ctrl,shift,meta,access"),c9=e=>e in Ax,u9=e=>{const t={},n=Ke.os.isMacOS()||Ke.os.isiOS();Jg(ep(e.toLowerCase(),"+"),r=>{c9(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=l9[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in Ax)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Tx{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(Jg(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return Jg(ep(Q.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:Q.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=Q.map(ep(t,">"),u9);return r[r.length-1]=Q.extend(r[r.length-1],{func:s,scope:o||this.editor}),Q.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const f9=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(u,d)=>(p,g)=>{u[p.toLowerCase()]={...g,type:d}},c=(u,d)=>s[u.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},d9=()=>{const e=f9();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Pr=rt.DOM,Rx=Q.extend,m9=Q.each;class Cu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Rx(this,Sx);const o=this;this.id=t,this.hidden=!1;const r=Z5(s.defaultOptions,n);this.options=s9(o,r),i1(o);const i=this.options.get;i("deprecation_warnings")&&_z(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const u=Xf(o);u&&(fo.ScriptLoader._setReferrerPolicy(u),rt.DOM.styleSheetLoader._setReferrerPolicy(u)),on.languageLoad=i("language_load"),on.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new hs(yv(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Zf(o),this.hasVisual=Y1(o),this.shortcuts=new Tx(this),this.editorCommands=new yx(this),$4(this);const d=i("cache_suffix");d&&(Ke.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:d9(),styleSheetLoader:void 0,show:$e,hide:$e,setEnabled:$e,isEnabled:vt},this.mode=a9(o),s.dispatch("SetupEditor",{editor:this});const p=Z1(o);He(p)&&p.call(o,o)}render(){M5(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return yr(this)}translate(t){return fs.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(oe(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:vt,default:n})),!o.isSet(t)&&!Yt(n)?n:o.get(t)}hasPlugin(t,n){return z(Xl(this),t)?n?_i.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Pr.show(t.getContainer()),Pr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Pr.hide(t.getContainer()),Pr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=vf(s)?s.value:s.innerHTML,i=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),i}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const i={...o,content:r};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),r=i.content,vf(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const a=Pr.getParent(n.id,"form");a&&m9(a.elements,c=>c.name===n.id?(c.value=r,!1):!0)}return i.element=o.element=s=null,i.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return zm(this,t,n)}getContent(t){return gz(this,t)}insertContent(t,n){n&&(t=Rx({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?zm(this,this.startContent,{format:"raw"}):zm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Pr.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Pr.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,i=eP(o);return He(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s==="link"||it(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){J5(this,t)}remove(){kz(this)}destroy(t){Nz(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ti=rt.DOM,yu=Q.each;let Px=!1,Eu,vn=[];const _u=e=>{const t=e.type;yu(Ho.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},Ox=e=>{if(e!==Px){const t=rt.DOM;e?(t.bind(window,"resize",_u),t.bind(window,"scroll",_u)):(t.unbind(window,"resize",_u),t.unbind(window,"scroll",_u)),Px=e}},Dx=e=>{const t=vn;return vn=j(vn,n=>e!==n),Ho.activeEditor===e&&(Ho.activeEditor=vn.length>0?vn[0]:null),Ho.focusedEditor===e&&(Ho.focusedEditor=null),t.length!==vn.length},g9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Dx(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},p9=document.compatMode!=="CSS1Compat",Ho={...Qg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"2.0",releaseDate:"2022-09-08",i18n:fs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=hs.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new hs(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new hs(e.baseURL),e.suffix=n,EB(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&ct(s,(o,r)=>{on.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=gt(d,"name").filter(g=>!Ti.get(g)).getOrThunk(Ti.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>Ke.browser.isIE()||Ke.browser.isEdge()?(Mc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):p9?(Mc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):de(d.selector)?Ti.select(d.selector):oe(d.target)?[d.target]:[];let c=d=>{n=d};const u=()=>{let d=0;const p=[];let g;const y=(_,C,w)=>{const S=new Cu(_,C,t);p.push(S),S.on("init",()=>{++d===g.length&&c(p)}),S.targetElm=S.targetElm||w,S.render()};Ti.unbind(window,"ready",u),i("onpageload"),g=bN(a(e)),Q.each(g,_=>{g9(t.get(_.id))}),g=Q.grep(g,_=>!t.get(_.id)),g.length===0?c([]):yu(g,_=>{o(e,_)?Mc("Could not initialize inline editor on invalid inline target element",_):y(r(_),e,_)})};return Ti.bind(window,"ready",u),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?vn.slice(0):de(e)?ve(vn,t=>t.id===e).getOr(null):dn(e)&&vn[e]?vn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&vn.push(e),Ox(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Eu||(Eu=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Eu))),e},createEditor(e,t){return this.add(new Cu(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=vn.length-1;s>=0;s--)t.remove(vn[s]);return}if(de(e)){yu(Ti.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,es(t.get(n.id))?null:(Dx(n)&&t.dispatch("RemoveEditor",{editor:n}),vn.length===0&&window.removeEventListener("beforeunload",Eu),n.remove(),Ox(vn.length>0),n)},execCommand(e,t,n){var s;const o=this,r=it(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new Cu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{yu(vn,e=>{e.save()})},addI18n:(e,t)=>{fs.add(e,t)},translate:e=>fs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new hs(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new hs(this.baseURL)}};Ho.setup();const h9=(()=>{const e=Po(),t=r=>({items:r,types:$n(r),getType:i=>gt(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Bx=Math.min,Ri=Math.max,wu=Math.round,Ix=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,u=(n||"").split("");return u[0]==="b"&&(o+=c),u[1]==="r"&&(s+=a),u[0]==="c"&&(o+=wu(c/2)),u[1]==="c"&&(s+=wu(a/2)),u[3]==="b"&&(o-=i),u[4]==="r"&&(s-=r),u[3]==="c"&&(o-=wu(i/2)),u[4]==="c"&&(s-=wu(r/2)),Pi(s,o,r,i)},b9=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Ix(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},v9=(e,t,n)=>Pi(e.x-t,e.y-n,e.w+t*2,e.h+n*2),C9=(e,t)=>{const n=Ri(e.x,t.x),s=Ri(e.y,t.y),o=Bx(e.x+e.w,t.x+t.w),r=Bx(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Pi(n,s,o-n,r-s)},y9=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,u=Ri(0,t.x-s),d=Ri(0,t.y-o),p=Ri(0,r-a),g=Ri(0,i-c);return s+=u,o+=d,n&&(r+=u,i+=d,s-=p,o-=g),r-=p,i-=g,Pi(s,o,r-s,i-o)},Pi=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),E9={inflate:v9,relativePosition:Ix,findBestRelativePosition:b9,intersect:C9,clamp:y9,create:Pi,fromClientRect:e=>Pi(e.left,e.top,e.width,e.height)},_9=(e,t,n=1e3)=>{let s=!1,o=null;const r=u=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),u.apply(null,d))},i=r(e),a=r(t);return{start:(...u)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,u),n))},resolve:i,reject:a}},w9=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const u=new Promise((d,p)=>{const g=_9(d,p);t[r]=g.resolve,fo.ScriptLoader.loadScript(i).then(()=>g.start(c),()=>g.reject(a))});return e[r]=u,u}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),S9=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let rl;try{const e="__storage_test__";rl=window.localStorage,rl.setItem(e,e),rl.removeItem(e)}catch{rl=S9()}var x9=rl;const k9={geom:{Rect:E9},util:{Delay:qn,Tools:Q,VK:ge,URI:hs,EventDispatcher:Xg,Observable:Qg,I18n:fs,LocalStorage:x9,ImageUploader:iH},dom:{EventUtils:ur,TreeWalker:Ft,TextSeeker:dr,DOMUtils:rt,ScriptLoader:fo,RangeUtils:hi,Serializer:BE,StyleSheetLoader:ib,ControlSelection:FC,BookmarkManager:Pa,Selection:DE,Event:ur.Event},html:{Styles:Df,Entities:To,Node:bn,Schema:Ro,DomParser:yi,Writer:vy,Serializer:Fo},Env:Ke,AddOnManager:on,Annotator:NC,Formatter:qE,UndoManager:GE,EditorCommands:yx,WindowManager:LE,NotificationManager:$E,EditorObservable:Sx,Shortcuts:Tx,Editor:Cu,FocusManager:ry,EditorManager:Ho,DOM:rt.DOM,ScriptLoader:fo.ScriptLoader,PluginManager:_i,ThemeManager:kr,ModelManager:Ei,IconManager:$c,Resource:w9,FakeClipboard:h9,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},Fx=Q.extend(Ho,k9),N9=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Fx),N9(Fx)})()})(pN);const up=pN.exports,g7=qk({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.2.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,f){const m=Cq(null);let h=null,v={};function E(){if(m.value){v=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,promotion:!0,indentation:"2px",font_size_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},l.config);const he=l.baseUrl,Ne="zh_CN",ze="en_US";if(v.language===ze?(delete v.language,delete v.language_url):(v.language||(v.language=Ne),!v.language_url&&v.language===Ne&&(v.language_url=`${he}/@panhezeng/vue-tinymce@latest/dist/langs/${v.language}.js`),!v.font_family_formats&&v.language===Ne&&(v.font_family_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(v.font_family_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${v.font_family_formats||""}`,v.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(v.font_family_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${v.font_family_formats||""}`,v.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(v.font_family_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${v.font_family_formats||""}`,v.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),v.external_plugins||(v.external_plugins={}),!v.external_plugins.textindentoutdent){const at=Object.keys(v);for(let Ye=at.length-1;Ye>=0;Ye--){const mt=at[Ye];if(mt&&typeof mt=="string"&&mt.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(v[mt]))){v.language===Ne&&(v.external_plugins.textindentoutdentzhcn=`${he}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),v.external_plugins.textindentoutdent=`${he}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}v.target=m.value,v.init_instance_callback=at=>{m.value&&(h=at,N(),h.on(l.updateEvent,P),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(h)),ue()}}}function N(){Bu().then(()=>{m.value&&h&&h.getContent()!==l.modelValue&&h.setContent(l.modelValue)})}function P(){Bu().then(()=>{if(m.value&&h){const he=h.getContent();f.emit("update:modelValue",he),f.emit("content-change",he)}})}function U(){try{m.value&&h&&(h.plugins.autosave&&h.plugins.autosave.removeDraft(),up.PluginManager.remove("autosave"),h.remove(),h.destroy(),h=null)}catch{return}}function ne(){Bu().then(()=>{m.value&&(U(),E(),up.init(v))})}cl(()=>l.modelValue,N),cl(()=>l.config,()=>{ne()},{deep:!0});function ue(){const he=document.querySelector(".tox-promotion");he&&(he.style.display="none")}return Yk(()=>{up.EditorManager.baseURL=l.url,ne()}),Xk(()=>{U()}),{editorElement:m}}}),p7=(l,f)=>{const m=l.__vccOpts||l;for(const[h,v]of f)m[h]=v;return m},h7={class:"vue-tinymce-comp"},b7={ref:"editorElement"};function v7(l,f,m,h,v,E){return Hu(),lN("div",h7,[as("textarea",b7,null,512)])}const fp=p7(g7,[["render",v7]]),C7=Object.assign(fp,{install:l=>{l.component(fp.name,fp)}}),hN=t7(m7);hN.use(C7);hN.mount("#app");
