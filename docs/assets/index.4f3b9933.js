var K5=Object.defineProperty,G5=Object.defineProperties;var Y5=Object.getOwnPropertyDescriptors;var lu=Object.getOwnPropertySymbols;var Fw=Object.prototype.hasOwnProperty,Mw=Object.prototype.propertyIsEnumerable;var Lw=(l,u,m)=>u in l?K5(l,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[u]=m,we=(l,u)=>{for(var m in u||(u={}))Fw.call(u,m)&&Lw(l,m,u[m]);if(lu)for(var m of lu(u))Mw.call(u,m)&&Lw(l,m,u[m]);return l},ut=(l,u)=>G5(l,Y5(u));var Uw=(l,u)=>{var m={};for(var g in l)Fw.call(l,g)&&u.indexOf(g)<0&&(m[g]=l[g]);if(l!=null&&lu)for(var g of lu(l))u.indexOf(g)<0&&Mw.call(l,g)&&(m[g]=l[g]);return m};const X5=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))g(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const T of x.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&g(T)}).observe(document,{childList:!0,subtree:!0});function m(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerpolicy&&(x.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?x.credentials="include":h.crossorigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function g(h){if(h.ep)return;h.ep=!0;const x=m(h);fetch(h.href,x)}};X5();function Qp(l,u){const m=Object.create(null),g=l.split(",");for(let h=0;h<g.length;h++)m[g[h]]=!0;return u?h=>!!m[h.toLowerCase()]:h=>!!m[h]}const Q5="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z5=Qp(Q5);function m_(l){return!!l||l===""}function Zp(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++){const g=l[m],h=ln(g)?t4(g):Zp(g);if(h)for(const x in h)u[x]=h[x]}return u}else{if(ln(l))return l;if(cn(l))return l}}const J5=/;(?![^(]*\))/g,e4=/:(.+)/;function t4(l){const u={};return l.split(J5).forEach(m=>{if(m){const g=m.split(e4);g.length>1&&(u[g[0].trim()]=g[1].trim())}}),u}function Jp(l){let u="";if(ln(l))u=l;else if(Qe(l))for(let m=0;m<l.length;m++){const g=Jp(l[m]);g&&(u+=g+" ")}else if(cn(l))for(const m in l)l[m]&&(u+=m+" ");return u.trim()}const n4=l=>ln(l)?l:l==null?"":Qe(l)||cn(l)&&(l.toString===b_||!Xe(l.toString))?JSON.stringify(l,p_,2):String(l),p_=(l,u)=>u&&u.__v_isRef?p_(l,u.value):Ai(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((m,[g,h])=>(m[`${g} =>`]=h,m),{})}:g_(u)?{[`Set(${u.size})`]:[...u.values()]}:cn(u)&&!Qe(u)&&!C_(u)?String(u):u,wt={},Ti=[],gs=()=>{},s4=()=>!1,o4=/^on[^a-z]/,_u=l=>o4.test(l),eg=l=>l.startsWith("onUpdate:"),An=Object.assign,tg=(l,u)=>{const m=l.indexOf(u);m>-1&&l.splice(m,1)},r4=Object.prototype.hasOwnProperty,nt=(l,u)=>r4.call(l,u),Qe=Array.isArray,Ai=l=>ku(l)==="[object Map]",g_=l=>ku(l)==="[object Set]",Xe=l=>typeof l=="function",ln=l=>typeof l=="string",ng=l=>typeof l=="symbol",cn=l=>l!==null&&typeof l=="object",h_=l=>cn(l)&&Xe(l.then)&&Xe(l.catch),b_=Object.prototype.toString,ku=l=>b_.call(l),i4=l=>ku(l).slice(8,-1),C_=l=>ku(l)==="[object Object]",sg=l=>ln(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,pu=Qp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nu=l=>{const u=Object.create(null);return m=>u[m]||(u[m]=l(m))},a4=/-(\w)/g,Ks=Nu(l=>l.replace(a4,(u,m)=>m?m.toUpperCase():"")),l4=/\B([A-Z])/g,Oi=Nu(l=>l.replace(l4,"-$1").toLowerCase()),Tu=Nu(l=>l.charAt(0).toUpperCase()+l.slice(1)),Ap=Nu(l=>l?`on${Tu(l)}`:""),Ya=(l,u)=>!Object.is(l,u),Rp=(l,u)=>{for(let m=0;m<l.length;m++)l[m](u)},Cu=(l,u,m)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,value:m})},c4=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let zw;const u4=()=>zw||(zw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Vs;class f4{constructor(u=!1){this.active=!0,this.effects=[],this.cleanups=[],!u&&Vs&&(this.parent=Vs,this.index=(Vs.scopes||(Vs.scopes=[])).push(this)-1)}run(u){if(this.active){const m=Vs;try{return Vs=this,u()}finally{Vs=m}}}on(){Vs=this}off(){Vs=this.parent}stop(u){if(this.active){let m,g;for(m=0,g=this.effects.length;m<g;m++)this.effects[m].stop();for(m=0,g=this.cleanups.length;m<g;m++)this.cleanups[m]();if(this.scopes)for(m=0,g=this.scopes.length;m<g;m++)this.scopes[m].stop(!0);if(this.parent&&!u){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.active=!1}}}function d4(l,u=Vs){u&&u.active&&u.effects.push(l)}const og=l=>{const u=new Set(l);return u.w=0,u.n=0,u},y_=l=>(l.w&jo)>0,v_=l=>(l.n&jo)>0,m4=({deps:l})=>{if(l.length)for(let u=0;u<l.length;u++)l[u].w|=jo},p4=l=>{const{deps:u}=l;if(u.length){let m=0;for(let g=0;g<u.length;g++){const h=u[g];y_(h)&&!v_(h)?h.delete(l):u[m++]=h,h.w&=~jo,h.n&=~jo}u.length=m}},Lp=new WeakMap;let Wa=0,jo=1;const Fp=30;let ps;const Pr=Symbol(""),Mp=Symbol("");class rg{constructor(u,m=null,g){this.fn=u,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,d4(this,g)}run(){if(!this.active)return this.fn();let u=ps,m=Vo;for(;u;){if(u===this)return;u=u.parent}try{return this.parent=ps,ps=this,Vo=!0,jo=1<<++Wa,Wa<=Fp?m4(this):Hw(this),this.fn()}finally{Wa<=Fp&&p4(this),jo=1<<--Wa,ps=this.parent,Vo=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ps===this?this.deferStop=!0:this.active&&(Hw(this),this.onStop&&this.onStop(),this.active=!1)}}function Hw(l){const{deps:u}=l;if(u.length){for(let m=0;m<u.length;m++)u[m].delete(l);u.length=0}}let Vo=!0;const E_=[];function Di(){E_.push(Vo),Vo=!1}function Bi(){const l=E_.pop();Vo=l===void 0?!0:l}function Wn(l,u,m){if(Vo&&ps){let g=Lp.get(l);g||Lp.set(l,g=new Map);let h=g.get(m);h||g.set(m,h=og()),x_(h)}}function x_(l,u){let m=!1;Wa<=Fp?v_(l)||(l.n|=jo,m=!y_(l)):m=!l.has(ps),m&&(l.add(ps),ps.deps.push(l))}function go(l,u,m,g,h,x){const T=Lp.get(l);if(!T)return;let O=[];if(u==="clear")O=[...T.values()];else if(m==="length"&&Qe(l))T.forEach((L,X)=>{(X==="length"||X>=g)&&O.push(L)});else switch(m!==void 0&&O.push(T.get(m)),u){case"add":Qe(l)?sg(m)&&O.push(T.get("length")):(O.push(T.get(Pr)),Ai(l)&&O.push(T.get(Mp)));break;case"delete":Qe(l)||(O.push(T.get(Pr)),Ai(l)&&O.push(T.get(Mp)));break;case"set":Ai(l)&&O.push(T.get(Pr));break}if(O.length===1)O[0]&&Up(O[0]);else{const L=[];for(const X of O)X&&L.push(...X);Up(og(L))}}function Up(l,u){for(const m of Qe(l)?l:[...l])(m!==ps||m.allowRecurse)&&(m.scheduler?m.scheduler():m.run())}const g4=Qp("__proto__,__v_isRef,__isVue"),S_=new Set(Object.getOwnPropertyNames(Symbol).map(l=>Symbol[l]).filter(ng)),h4=ig(),b4=ig(!1,!0),C4=ig(!0),Vw=y4();function y4(){const l={};return["includes","indexOf","lastIndexOf"].forEach(u=>{l[u]=function(...m){const g=dt(this);for(let x=0,T=this.length;x<T;x++)Wn(g,"get",x+"");const h=g[u](...m);return h===-1||h===!1?g[u](...m.map(dt)):h}}),["push","pop","shift","unshift","splice"].forEach(u=>{l[u]=function(...m){Di();const g=dt(this)[u].apply(this,m);return Bi(),g}}),l}function ig(l=!1,u=!1){return function(g,h,x){if(h==="__v_isReactive")return!l;if(h==="__v_isReadonly")return l;if(h==="__v_isShallow")return u;if(h==="__v_raw"&&x===(l?u?I4:T_:u?N_:k_).get(g))return g;const T=Qe(g);if(!l&&T&&nt(Vw,h))return Reflect.get(Vw,h,x);const O=Reflect.get(g,h,x);return(ng(h)?S_.has(h):g4(h))||(l||Wn(g,"get",h),u)?O:an(O)?!T||!sg(h)?O.value:O:cn(O)?l?A_(O):Ru(O):O}}const v4=w_(),E4=w_(!0);function w_(l=!1){return function(m,g,h,x){let T=m[g];if(Xa(T)&&an(T)&&!an(h))return!1;if(!l&&!Xa(h)&&(R_(h)||(h=dt(h),T=dt(T)),!Qe(m)&&an(T)&&!an(h)))return T.value=h,!0;const O=Qe(m)&&sg(g)?Number(g)<m.length:nt(m,g),L=Reflect.set(m,g,h,x);return m===dt(x)&&(O?Ya(h,T)&&go(m,"set",g,h):go(m,"add",g,h)),L}}function x4(l,u){const m=nt(l,u);l[u];const g=Reflect.deleteProperty(l,u);return g&&m&&go(l,"delete",u,void 0),g}function S4(l,u){const m=Reflect.has(l,u);return(!ng(u)||!S_.has(u))&&Wn(l,"has",u),m}function w4(l){return Wn(l,"iterate",Qe(l)?"length":Pr),Reflect.ownKeys(l)}const __={get:h4,set:v4,deleteProperty:x4,has:S4,ownKeys:w4},_4={get:C4,set(l,u){return!0},deleteProperty(l,u){return!0}},k4=An({},__,{get:b4,set:E4}),ag=l=>l,Au=l=>Reflect.getPrototypeOf(l);function cu(l,u,m=!1,g=!1){l=l.__v_raw;const h=dt(l),x=dt(u);u!==x&&!m&&Wn(h,"get",u),!m&&Wn(h,"get",x);const{has:T}=Au(h),O=g?ag:m?ug:Qa;if(T.call(h,u))return O(l.get(u));if(T.call(h,x))return O(l.get(x));l!==h&&l.get(u)}function uu(l,u=!1){const m=this.__v_raw,g=dt(m),h=dt(l);return l!==h&&!u&&Wn(g,"has",l),!u&&Wn(g,"has",h),l===h?m.has(l):m.has(l)||m.has(h)}function fu(l,u=!1){return l=l.__v_raw,!u&&Wn(dt(l),"iterate",Pr),Reflect.get(l,"size",l)}function Ww(l){l=dt(l);const u=dt(this);return Au(u).has.call(u,l)||(u.add(l),go(u,"add",l,l)),this}function jw(l,u){u=dt(u);const m=dt(this),{has:g,get:h}=Au(m);let x=g.call(m,l);x||(l=dt(l),x=g.call(m,l));const T=h.call(m,l);return m.set(l,u),x?Ya(u,T)&&go(m,"set",l,u):go(m,"add",l,u),this}function qw(l){const u=dt(this),{has:m,get:g}=Au(u);let h=m.call(u,l);h||(l=dt(l),h=m.call(u,l)),g&&g.call(u,l);const x=u.delete(l);return h&&go(u,"delete",l,void 0),x}function Kw(){const l=dt(this),u=l.size!==0,m=l.clear();return u&&go(l,"clear",void 0,void 0),m}function du(l,u){return function(g,h){const x=this,T=x.__v_raw,O=dt(T),L=u?ag:l?ug:Qa;return!l&&Wn(O,"iterate",Pr),T.forEach((X,oe)=>g.call(h,L(X),L(oe),x))}}function mu(l,u,m){return function(...g){const h=this.__v_raw,x=dt(h),T=Ai(x),O=l==="entries"||l===Symbol.iterator&&T,L=l==="keys"&&T,X=h[l](...g),oe=m?ag:u?ug:Qa;return!u&&Wn(x,"iterate",L?Mp:Pr),{next(){const{value:ve,done:_e}=X.next();return _e?{value:ve,done:_e}:{value:O?[oe(ve[0]),oe(ve[1])]:oe(ve),done:_e}},[Symbol.iterator](){return this}}}}function Uo(l){return function(...u){return l==="delete"?!1:this}}function N4(){const l={get(x){return cu(this,x)},get size(){return fu(this)},has:uu,add:Ww,set:jw,delete:qw,clear:Kw,forEach:du(!1,!1)},u={get(x){return cu(this,x,!1,!0)},get size(){return fu(this)},has:uu,add:Ww,set:jw,delete:qw,clear:Kw,forEach:du(!1,!0)},m={get(x){return cu(this,x,!0)},get size(){return fu(this,!0)},has(x){return uu.call(this,x,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:du(!0,!1)},g={get(x){return cu(this,x,!0,!0)},get size(){return fu(this,!0)},has(x){return uu.call(this,x,!0)},add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear"),forEach:du(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{l[x]=mu(x,!1,!1),m[x]=mu(x,!0,!1),u[x]=mu(x,!1,!0),g[x]=mu(x,!0,!0)}),[l,m,u,g]}const[T4,A4,R4,P4]=N4();function lg(l,u){const m=u?l?P4:R4:l?A4:T4;return(g,h,x)=>h==="__v_isReactive"?!l:h==="__v_isReadonly"?l:h==="__v_raw"?g:Reflect.get(nt(m,h)&&h in g?m:g,h,x)}const O4={get:lg(!1,!1)},D4={get:lg(!1,!0)},B4={get:lg(!0,!1)},k_=new WeakMap,N_=new WeakMap,T_=new WeakMap,I4=new WeakMap;function $4(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function L4(l){return l.__v_skip||!Object.isExtensible(l)?0:$4(i4(l))}function Ru(l){return Xa(l)?l:cg(l,!1,__,O4,k_)}function F4(l){return cg(l,!1,k4,D4,N_)}function A_(l){return cg(l,!0,_4,B4,T_)}function cg(l,u,m,g,h){if(!cn(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const x=h.get(l);if(x)return x;const T=L4(l);if(T===0)return l;const O=new Proxy(l,T===2?g:m);return h.set(l,O),O}function Ri(l){return Xa(l)?Ri(l.__v_raw):!!(l&&l.__v_isReactive)}function Xa(l){return!!(l&&l.__v_isReadonly)}function R_(l){return!!(l&&l.__v_isShallow)}function P_(l){return Ri(l)||Xa(l)}function dt(l){const u=l&&l.__v_raw;return u?dt(u):l}function O_(l){return Cu(l,"__v_skip",!0),l}const Qa=l=>cn(l)?Ru(l):l,ug=l=>cn(l)?A_(l):l;function D_(l){Vo&&ps&&(l=dt(l),x_(l.dep||(l.dep=og())))}function B_(l,u){l=dt(l),l.dep&&Up(l.dep)}function an(l){return!!(l&&l.__v_isRef===!0)}function M4(l){return U4(l,!1)}function U4(l,u){return an(l)?l:new z4(l,u)}class z4{constructor(u,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?u:dt(u),this._value=m?u:Qa(u)}get value(){return D_(this),this._value}set value(u){u=this.__v_isShallow?u:dt(u),Ya(u,this._rawValue)&&(this._rawValue=u,this._value=this.__v_isShallow?u:Qa(u),B_(this))}}function H4(l){return an(l)?l.value:l}const V4={get:(l,u,m)=>H4(Reflect.get(l,u,m)),set:(l,u,m,g)=>{const h=l[u];return an(h)&&!an(m)?(h.value=m,!0):Reflect.set(l,u,m,g)}};function I_(l){return Ri(l)?l:new Proxy(l,V4)}class W4{constructor(u,m,g,h){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new rg(u,()=>{this._dirty||(this._dirty=!0,B_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=g}get value(){const u=dt(this);return D_(u),(u._dirty||!u._cacheable)&&(u._dirty=!1,u._value=u.effect.run()),u._value}set value(u){this._setter(u)}}function j4(l,u,m=!1){let g,h;const x=Xe(l);return x?(g=l,h=gs):(g=l.get,h=l.set),new W4(g,h,x||!h,m)}function Wo(l,u,m,g){let h;try{h=g?l(...g):l()}catch(x){Pu(x,u,m)}return h}function hs(l,u,m,g){if(Xe(l)){const x=Wo(l,u,m,g);return x&&h_(x)&&x.catch(T=>{Pu(T,u,m)}),x}const h=[];for(let x=0;x<l.length;x++)h.push(hs(l[x],u,m,g));return h}function Pu(l,u,m,g=!0){const h=u?u.vnode:null;if(u){let x=u.parent;const T=u.proxy,O=m;for(;x;){const X=x.ec;if(X){for(let oe=0;oe<X.length;oe++)if(X[oe](l,T,O)===!1)return}x=x.parent}const L=u.appContext.config.errorHandler;if(L){Wo(L,null,10,[l,T,O]);return}}q4(l,m,h,g)}function q4(l,u,m,g=!0){console.error(l)}let yu=!1,zp=!1;const Vn=[];let mo=0;const qa=[];let ja=null,_i=0;const Ka=[];let zo=null,ki=0;const $_=Promise.resolve();let fg=null,Hp=null;function gu(l){const u=fg||$_;return l?u.then(this?l.bind(this):l):u}function K4(l){let u=mo+1,m=Vn.length;for(;u<m;){const g=u+m>>>1;Za(Vn[g])<l?u=g+1:m=g}return u}function L_(l){(!Vn.length||!Vn.includes(l,yu&&l.allowRecurse?mo+1:mo))&&l!==Hp&&(l.id==null?Vn.push(l):Vn.splice(K4(l.id),0,l),F_())}function F_(){!yu&&!zp&&(zp=!0,fg=$_.then(z_))}function G4(l){const u=Vn.indexOf(l);u>mo&&Vn.splice(u,1)}function M_(l,u,m,g){Qe(l)?m.push(...l):(!u||!u.includes(l,l.allowRecurse?g+1:g))&&m.push(l),F_()}function Y4(l){M_(l,ja,qa,_i)}function X4(l){M_(l,zo,Ka,ki)}function dg(l,u=null){if(qa.length){for(Hp=u,ja=[...new Set(qa)],qa.length=0,_i=0;_i<ja.length;_i++)ja[_i]();ja=null,_i=0,Hp=null,dg(l,u)}}function U_(l){if(Ka.length){const u=[...new Set(Ka)];if(Ka.length=0,zo){zo.push(...u);return}for(zo=u,zo.sort((m,g)=>Za(m)-Za(g)),ki=0;ki<zo.length;ki++)zo[ki]();zo=null,ki=0}}const Za=l=>l.id==null?1/0:l.id;function z_(l){zp=!1,yu=!0,dg(l),Vn.sort((m,g)=>Za(m)-Za(g));const u=gs;try{for(mo=0;mo<Vn.length;mo++){const m=Vn[mo];m&&m.active!==!1&&Wo(m,null,14)}}finally{mo=0,Vn.length=0,U_(),yu=!1,fg=null,(Vn.length||qa.length||Ka.length)&&z_(l)}}function Q4(l,u,...m){if(l.isUnmounted)return;const g=l.vnode.props||wt;let h=m;const x=u.startsWith("update:"),T=x&&u.slice(7);if(T&&T in g){const oe=`${T==="modelValue"?"model":T}Modifiers`,{number:ve,trim:_e}=g[oe]||wt;_e?h=m.map(Ve=>Ve.trim()):ve&&(h=m.map(c4))}let O,L=g[O=Ap(u)]||g[O=Ap(Ks(u))];!L&&x&&(L=g[O=Ap(Oi(u))]),L&&hs(L,l,6,h);const X=g[O+"Once"];if(X){if(!l.emitted)l.emitted={};else if(l.emitted[O])return;l.emitted[O]=!0,hs(X,l,6,h)}}function H_(l,u,m=!1){const g=u.emitsCache,h=g.get(l);if(h!==void 0)return h;const x=l.emits;let T={},O=!1;if(!Xe(l)){const L=X=>{const oe=H_(X,u,!0);oe&&(O=!0,An(T,oe))};!m&&u.mixins.length&&u.mixins.forEach(L),l.extends&&L(l.extends),l.mixins&&l.mixins.forEach(L)}return!x&&!O?(g.set(l,null),null):(Qe(x)?x.forEach(L=>T[L]=null):An(T,x),g.set(l,T),T)}function Ou(l,u){return!l||!_u(u)?!1:(u=u.slice(2).replace(/Once$/,""),nt(l,u[0].toLowerCase()+u.slice(1))||nt(l,Oi(u))||nt(l,u))}let qs=null,V_=null;function vu(l){const u=qs;return qs=l,V_=l&&l.type.__scopeId||null,u}function Z4(l,u=qs,m){if(!u||l._n)return l;const g=(...h)=>{g._d&&s_(-1);const x=vu(u),T=l(...h);return vu(x),g._d&&s_(1),T};return g._n=!0,g._c=!0,g._d=!0,g}function Pp(l){const{type:u,vnode:m,proxy:g,withProxy:h,props:x,propsOptions:[T],slots:O,attrs:L,emit:X,render:oe,renderCache:ve,data:_e,setupState:Ve,ctx:rt,inheritAttrs:Rt}=l;let Je,mt;const Bn=vu(l);try{if(m.shapeFlag&4){const ft=h||g;Je=js(oe.call(ft,ft,ve,x,Ve,_e,rt)),mt=L}else{const ft=u;Je=js(ft.length>1?ft(x,{attrs:L,slots:O,emit:X}):ft(x,null)),mt=u.props?L:J4(L)}}catch(ft){Ga.length=0,Pu(ft,l,1),Je=po(Br)}let be=Je;if(mt&&Rt!==!1){const ft=Object.keys(mt),{shapeFlag:Gs}=be;ft.length&&Gs&7&&(T&&ft.some(eg)&&(mt=e9(mt,T)),be=Ja(be,mt))}return m.dirs&&(be.dirs=be.dirs?be.dirs.concat(m.dirs):m.dirs),m.transition&&(be.transition=m.transition),Je=be,vu(Bn),Je}const J4=l=>{let u;for(const m in l)(m==="class"||m==="style"||_u(m))&&((u||(u={}))[m]=l[m]);return u},e9=(l,u)=>{const m={};for(const g in l)(!eg(g)||!(g.slice(9)in u))&&(m[g]=l[g]);return m};function t9(l,u,m){const{props:g,children:h,component:x}=l,{props:T,children:O,patchFlag:L}=u,X=x.emitsOptions;if(u.dirs||u.transition)return!0;if(m&&L>=0){if(L&1024)return!0;if(L&16)return g?Gw(g,T,X):!!T;if(L&8){const oe=u.dynamicProps;for(let ve=0;ve<oe.length;ve++){const _e=oe[ve];if(T[_e]!==g[_e]&&!Ou(X,_e))return!0}}}else return(h||O)&&(!O||!O.$stable)?!0:g===T?!1:g?T?Gw(g,T,X):!0:!!T;return!1}function Gw(l,u,m){const g=Object.keys(u);if(g.length!==Object.keys(l).length)return!0;for(let h=0;h<g.length;h++){const x=g[h];if(u[x]!==l[x]&&!Ou(m,x))return!0}return!1}function n9({vnode:l,parent:u},m){for(;u&&u.subTree===l;)(l=u.vnode).el=m,u=u.parent}const s9=l=>l.__isSuspense;function o9(l,u){u&&u.pendingBranch?Qe(l)?u.effects.push(...l):u.effects.push(l):X4(l)}function r9(l,u){if(rn){let m=rn.provides;const g=rn.parent&&rn.parent.provides;g===m&&(m=rn.provides=Object.create(g)),m[l]=u}}function Op(l,u,m=!1){const g=rn||qs;if(g){const h=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(h&&l in h)return h[l];if(arguments.length>1)return m&&Xe(u)?u.call(g.proxy):u}}const Yw={};function hu(l,u,m){return W_(l,u,m)}function W_(l,u,{immediate:m,deep:g,flush:h,onTrack:x,onTrigger:T}=wt){const O=rn;let L,X=!1,oe=!1;if(an(l)?(L=()=>l.value,X=R_(l)):Ri(l)?(L=()=>l,g=!0):Qe(l)?(oe=!0,X=l.some(Ri),L=()=>l.map(mt=>{if(an(mt))return mt.value;if(Ri(mt))return Ni(mt);if(Xe(mt))return Wo(mt,O,2)})):Xe(l)?u?L=()=>Wo(l,O,2):L=()=>{if(!(O&&O.isUnmounted))return ve&&ve(),hs(l,O,3,[_e])}:L=gs,u&&g){const mt=L;L=()=>Ni(mt())}let ve,_e=mt=>{ve=Je.onStop=()=>{Wo(mt,O,4)}};if(el)return _e=gs,u?m&&hs(u,O,3,[L(),oe?[]:void 0,_e]):L(),gs;let Ve=oe?[]:Yw;const rt=()=>{if(!!Je.active)if(u){const mt=Je.run();(g||X||(oe?mt.some((Bn,be)=>Ya(Bn,Ve[be])):Ya(mt,Ve)))&&(ve&&ve(),hs(u,O,3,[mt,Ve===Yw?void 0:Ve,_e]),Ve=mt)}else Je.run()};rt.allowRecurse=!!u;let Rt;h==="sync"?Rt=rt:h==="post"?Rt=()=>Dn(rt,O&&O.suspense):Rt=()=>{!O||O.isMounted?Y4(rt):rt()};const Je=new rg(L,Rt);return u?m?rt():Ve=Je.run():h==="post"?Dn(Je.run.bind(Je),O&&O.suspense):Je.run(),()=>{Je.stop(),O&&O.scope&&tg(O.scope.effects,Je)}}function i9(l,u,m){const g=this.proxy,h=ln(l)?l.includes(".")?j_(g,l):()=>g[l]:l.bind(g,g);let x;Xe(u)?x=u:(x=u.handler,m=u);const T=rn;Pi(this);const O=W_(h,x.bind(g),m);return T?Pi(T):Dr(),O}function j_(l,u){const m=u.split(".");return()=>{let g=l;for(let h=0;h<m.length&&g;h++)g=g[m[h]];return g}}function Ni(l,u){if(!cn(l)||l.__v_skip||(u=u||new Set,u.has(l)))return l;if(u.add(l),an(l))Ni(l.value,u);else if(Qe(l))for(let m=0;m<l.length;m++)Ni(l[m],u);else if(g_(l)||Ai(l))l.forEach(m=>{Ni(m,u)});else if(C_(l))for(const m in l)Ni(l[m],u);return l}function q_(l){return Xe(l)?{setup:l,name:l.name}:l}const Vp=l=>!!l.type.__asyncLoader,K_=l=>l.type.__isKeepAlive;function a9(l,u){G_(l,"a",u)}function l9(l,u){G_(l,"da",u)}function G_(l,u,m=rn){const g=l.__wdc||(l.__wdc=()=>{let h=m;for(;h;){if(h.isDeactivated)return;h=h.parent}return l()});if(Du(u,g,m),m){let h=m.parent;for(;h&&h.parent;)K_(h.parent.vnode)&&c9(g,u,m,h),h=h.parent}}function c9(l,u,m,g){const h=Du(u,l,g,!0);Q_(()=>{tg(g[u],h)},m)}function Du(l,u,m=rn,g=!1){if(m){const h=m[l]||(m[l]=[]),x=u.__weh||(u.__weh=(...T)=>{if(m.isUnmounted)return;Di(),Pi(m);const O=hs(u,m,l,T);return Dr(),Bi(),O});return g?h.unshift(x):h.push(x),x}}const ho=l=>(u,m=rn)=>(!el||l==="sp")&&Du(l,u,m),u9=ho("bm"),Y_=ho("m"),f9=ho("bu"),d9=ho("u"),X_=ho("bum"),Q_=ho("um"),m9=ho("sp"),p9=ho("rtg"),g9=ho("rtc");function h9(l,u=rn){Du("ec",l,u)}let Wp=!0;function b9(l){const u=J_(l),m=l.proxy,g=l.ctx;Wp=!1,u.beforeCreate&&Xw(u.beforeCreate,l,"bc");const{data:h,computed:x,methods:T,watch:O,provide:L,inject:X,created:oe,beforeMount:ve,mounted:_e,beforeUpdate:Ve,updated:rt,activated:Rt,deactivated:Je,beforeDestroy:mt,beforeUnmount:Bn,destroyed:be,unmounted:ft,render:Gs,renderTracked:Nt,renderTriggered:Ys,errorCaptured:bs,serverPrefetch:Pt,expose:Mt,inheritAttrs:Ne,components:Ye,directives:yn,filters:Xs}=u;if(X&&C9(X,g,null,l.appContext.config.unwrapInjectedRef),T)for(const _t in T){const K=T[_t];Xe(K)&&(g[_t]=K.bind(m))}if(h){const _t=h.call(m,m);cn(_t)&&(l.data=Ru(_t))}if(Wp=!0,x)for(const _t in x){const K=x[_t],xt=Xe(K)?K.bind(m,m):Xe(K.get)?K.get.bind(m,m):gs,Ii=!Xe(K)&&Xe(K.set)?K.set.bind(m):gs,re=pk({get:xt,set:Ii});Object.defineProperty(g,_t,{enumerable:!0,configurable:!0,get:()=>re.value,set:Cs=>re.value=Cs})}if(O)for(const _t in O)Z_(O[_t],g,m,_t);if(L){const _t=Xe(L)?L.call(m):L;Reflect.ownKeys(_t).forEach(K=>{r9(K,_t[K])})}oe&&Xw(oe,l,"c");function Ot(_t,K){Qe(K)?K.forEach(xt=>_t(xt.bind(m))):K&&_t(K.bind(m))}if(Ot(u9,ve),Ot(Y_,_e),Ot(f9,Ve),Ot(d9,rt),Ot(a9,Rt),Ot(l9,Je),Ot(h9,bs),Ot(g9,Nt),Ot(p9,Ys),Ot(X_,Bn),Ot(Q_,ft),Ot(m9,Pt),Qe(Mt))if(Mt.length){const _t=l.exposed||(l.exposed={});Mt.forEach(K=>{Object.defineProperty(_t,K,{get:()=>m[K],set:xt=>m[K]=xt})})}else l.exposed||(l.exposed={});Gs&&l.render===gs&&(l.render=Gs),Ne!=null&&(l.inheritAttrs=Ne),Ye&&(l.components=Ye),yn&&(l.directives=yn)}function C9(l,u,m=gs,g=!1){Qe(l)&&(l=jp(l));for(const h in l){const x=l[h];let T;cn(x)?"default"in x?T=Op(x.from||h,x.default,!0):T=Op(x.from||h):T=Op(x),an(T)&&g?Object.defineProperty(u,h,{enumerable:!0,configurable:!0,get:()=>T.value,set:O=>T.value=O}):u[h]=T}}function Xw(l,u,m){hs(Qe(l)?l.map(g=>g.bind(u.proxy)):l.bind(u.proxy),u,m)}function Z_(l,u,m,g){const h=g.includes(".")?j_(m,g):()=>m[g];if(ln(l)){const x=u[l];Xe(x)&&hu(h,x)}else if(Xe(l))hu(h,l.bind(m));else if(cn(l))if(Qe(l))l.forEach(x=>Z_(x,u,m,g));else{const x=Xe(l.handler)?l.handler.bind(m):u[l.handler];Xe(x)&&hu(h,x,l)}}function J_(l){const u=l.type,{mixins:m,extends:g}=u,{mixins:h,optionsCache:x,config:{optionMergeStrategies:T}}=l.appContext,O=x.get(u);let L;return O?L=O:!h.length&&!m&&!g?L=u:(L={},h.length&&h.forEach(X=>Eu(L,X,T,!0)),Eu(L,u,T)),x.set(u,L),L}function Eu(l,u,m,g=!1){const{mixins:h,extends:x}=u;x&&Eu(l,x,m,!0),h&&h.forEach(T=>Eu(l,T,m,!0));for(const T in u)if(!(g&&T==="expose")){const O=y9[T]||m&&m[T];l[T]=O?O(l[T],u[T]):u[T]}return l}const y9={data:Qw,props:Ar,emits:Ar,methods:Ar,computed:Ar,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:Ar,directives:Ar,watch:E9,provide:Qw,inject:v9};function Qw(l,u){return u?l?function(){return An(Xe(l)?l.call(this,this):l,Xe(u)?u.call(this,this):u)}:u:l}function v9(l,u){return Ar(jp(l),jp(u))}function jp(l){if(Qe(l)){const u={};for(let m=0;m<l.length;m++)u[l[m]]=l[m];return u}return l}function Tn(l,u){return l?[...new Set([].concat(l,u))]:u}function Ar(l,u){return l?An(An(Object.create(null),l),u):u}function E9(l,u){if(!l)return u;if(!u)return l;const m=An(Object.create(null),l);for(const g in u)m[g]=Tn(l[g],u[g]);return m}function x9(l,u,m,g=!1){const h={},x={};Cu(x,Bu,1),l.propsDefaults=Object.create(null),ek(l,u,h,x);for(const T in l.propsOptions[0])T in h||(h[T]=void 0);m?l.props=g?h:F4(h):l.type.props?l.props=h:l.props=x,l.attrs=x}function S9(l,u,m,g){const{props:h,attrs:x,vnode:{patchFlag:T}}=l,O=dt(h),[L]=l.propsOptions;let X=!1;if((g||T>0)&&!(T&16)){if(T&8){const oe=l.vnode.dynamicProps;for(let ve=0;ve<oe.length;ve++){let _e=oe[ve];if(Ou(l.emitsOptions,_e))continue;const Ve=u[_e];if(L)if(nt(x,_e))Ve!==x[_e]&&(x[_e]=Ve,X=!0);else{const rt=Ks(_e);h[rt]=qp(L,O,rt,Ve,l,!1)}else Ve!==x[_e]&&(x[_e]=Ve,X=!0)}}}else{ek(l,u,h,x)&&(X=!0);let oe;for(const ve in O)(!u||!nt(u,ve)&&((oe=Oi(ve))===ve||!nt(u,oe)))&&(L?m&&(m[ve]!==void 0||m[oe]!==void 0)&&(h[ve]=qp(L,O,ve,void 0,l,!0)):delete h[ve]);if(x!==O)for(const ve in x)(!u||!nt(u,ve)&&!0)&&(delete x[ve],X=!0)}X&&go(l,"set","$attrs")}function ek(l,u,m,g){const[h,x]=l.propsOptions;let T=!1,O;if(u)for(let L in u){if(pu(L))continue;const X=u[L];let oe;h&&nt(h,oe=Ks(L))?!x||!x.includes(oe)?m[oe]=X:(O||(O={}))[oe]=X:Ou(l.emitsOptions,L)||(!(L in g)||X!==g[L])&&(g[L]=X,T=!0)}if(x){const L=dt(m),X=O||wt;for(let oe=0;oe<x.length;oe++){const ve=x[oe];m[ve]=qp(h,L,ve,X[ve],l,!nt(X,ve))}}return T}function qp(l,u,m,g,h,x){const T=l[m];if(T!=null){const O=nt(T,"default");if(O&&g===void 0){const L=T.default;if(T.type!==Function&&Xe(L)){const{propsDefaults:X}=h;m in X?g=X[m]:(Pi(h),g=X[m]=L.call(null,u),Dr())}else g=L}T[0]&&(x&&!O?g=!1:T[1]&&(g===""||g===Oi(m))&&(g=!0))}return g}function tk(l,u,m=!1){const g=u.propsCache,h=g.get(l);if(h)return h;const x=l.props,T={},O=[];let L=!1;if(!Xe(l)){const oe=ve=>{L=!0;const[_e,Ve]=tk(ve,u,!0);An(T,_e),Ve&&O.push(...Ve)};!m&&u.mixins.length&&u.mixins.forEach(oe),l.extends&&oe(l.extends),l.mixins&&l.mixins.forEach(oe)}if(!x&&!L)return g.set(l,Ti),Ti;if(Qe(x))for(let oe=0;oe<x.length;oe++){const ve=Ks(x[oe]);Zw(ve)&&(T[ve]=wt)}else if(x)for(const oe in x){const ve=Ks(oe);if(Zw(ve)){const _e=x[oe],Ve=T[ve]=Qe(_e)||Xe(_e)?{type:_e}:_e;if(Ve){const rt=t_(Boolean,Ve.type),Rt=t_(String,Ve.type);Ve[0]=rt>-1,Ve[1]=Rt<0||rt<Rt,(rt>-1||nt(Ve,"default"))&&O.push(ve)}}}const X=[T,O];return g.set(l,X),X}function Zw(l){return l[0]!=="$"}function Jw(l){const u=l&&l.toString().match(/^\s*function (\w+)/);return u?u[1]:l===null?"null":""}function e_(l,u){return Jw(l)===Jw(u)}function t_(l,u){return Qe(u)?u.findIndex(m=>e_(m,l)):Xe(u)&&e_(u,l)?0:-1}const nk=l=>l[0]==="_"||l==="$stable",mg=l=>Qe(l)?l.map(js):[js(l)],w9=(l,u,m)=>{const g=Z4((...h)=>mg(u(...h)),m);return g._c=!1,g},sk=(l,u,m)=>{const g=l._ctx;for(const h in l){if(nk(h))continue;const x=l[h];if(Xe(x))u[h]=w9(h,x,g);else if(x!=null){const T=mg(x);u[h]=()=>T}}},ok=(l,u)=>{const m=mg(u);l.slots.default=()=>m},_9=(l,u)=>{if(l.vnode.shapeFlag&32){const m=u._;m?(l.slots=dt(u),Cu(u,"_",m)):sk(u,l.slots={})}else l.slots={},u&&ok(l,u);Cu(l.slots,Bu,1)},k9=(l,u,m)=>{const{vnode:g,slots:h}=l;let x=!0,T=wt;if(g.shapeFlag&32){const O=u._;O?m&&O===1?x=!1:(An(h,u),!m&&O===1&&delete h._):(x=!u.$stable,sk(u,h)),T=u}else u&&(ok(l,u),T={default:1});if(x)for(const O in h)!nk(O)&&!(O in T)&&delete h[O]};function Nr(l,u,m,g){const h=l.dirs,x=u&&u.dirs;for(let T=0;T<h.length;T++){const O=h[T];x&&(O.oldValue=x[T].value);let L=O.dir[g];L&&(Di(),hs(L,m,8,[l.el,O,l,u]),Bi())}}function rk(){return{app:null,config:{isNativeTag:s4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N9=0;function T9(l,u){return function(g,h=null){Xe(g)||(g=Object.assign({},g)),h!=null&&!cn(h)&&(h=null);const x=rk(),T=new Set;let O=!1;const L=x.app={_uid:N9++,_component:g,_props:h,_container:null,_context:x,_instance:null,version:J9,get config(){return x.config},set config(X){},use(X,...oe){return T.has(X)||(X&&Xe(X.install)?(T.add(X),X.install(L,...oe)):Xe(X)&&(T.add(X),X(L,...oe))),L},mixin(X){return x.mixins.includes(X)||x.mixins.push(X),L},component(X,oe){return oe?(x.components[X]=oe,L):x.components[X]},directive(X,oe){return oe?(x.directives[X]=oe,L):x.directives[X]},mount(X,oe,ve){if(!O){const _e=po(g,h);return _e.appContext=x,oe&&u?u(_e,X):l(_e,X,ve),O=!0,L._container=X,X.__vue_app__=L,hg(_e.component)||_e.component.proxy}},unmount(){O&&(l(null,L._container),delete L._container.__vue_app__)},provide(X,oe){return x.provides[X]=oe,L}};return L}}function Kp(l,u,m,g,h=!1){if(Qe(l)){l.forEach((_e,Ve)=>Kp(_e,u&&(Qe(u)?u[Ve]:u),m,g,h));return}if(Vp(g)&&!h)return;const x=g.shapeFlag&4?hg(g.component)||g.component.proxy:g.el,T=h?null:x,{i:O,r:L}=l,X=u&&u.r,oe=O.refs===wt?O.refs={}:O.refs,ve=O.setupState;if(X!=null&&X!==L&&(ln(X)?(oe[X]=null,nt(ve,X)&&(ve[X]=null)):an(X)&&(X.value=null)),Xe(L))Wo(L,O,12,[T,oe]);else{const _e=ln(L),Ve=an(L);if(_e||Ve){const rt=()=>{if(l.f){const Rt=_e?oe[L]:L.value;h?Qe(Rt)&&tg(Rt,x):Qe(Rt)?Rt.includes(x)||Rt.push(x):_e?(oe[L]=[x],nt(ve,L)&&(ve[L]=oe[L])):(L.value=[x],l.k&&(oe[l.k]=L.value))}else _e?(oe[L]=T,nt(ve,L)&&(ve[L]=T)):an(L)&&(L.value=T,l.k&&(oe[l.k]=T))};T?(rt.id=-1,Dn(rt,m)):rt()}}}const Dn=o9;function A9(l){return R9(l)}function R9(l,u){const m=u4();m.__VUE__=!0;const{insert:g,remove:h,patchProp:x,createElement:T,createText:O,createComment:L,setText:X,setElementText:oe,parentNode:ve,nextSibling:_e,setScopeId:Ve=gs,cloneNode:rt,insertStaticContent:Rt}=l,Je=(k,R,M,U=null,A=null,ce=null,Ce=!1,H=null,fe=!!R.dynamicChildren)=>{if(k===R)return;k&&!Va(k,R)&&(U=b(k),ys(k,A,ce,!0),k=null),R.patchFlag===-2&&(fe=!1,R.dynamicChildren=null);const{type:Q,ref:Pe,shapeFlag:de}=R;switch(Q){case pg:mt(k,R,M,U);break;case Br:Bn(k,R,M,U);break;case Dp:k==null&&be(R,M,U,Ce);break;case Ws:yn(k,R,M,U,A,ce,Ce,H,fe);break;default:de&1?Nt(k,R,M,U,A,ce,Ce,H,fe):de&6?Xs(k,R,M,U,A,ce,Ce,H,fe):(de&64||de&128)&&Q.process(k,R,M,U,A,ce,Ce,H,fe,bo)}Pe!=null&&A&&Kp(Pe,k&&k.ref,ce,R||k,!R)},mt=(k,R,M,U)=>{if(k==null)g(R.el=O(R.children),M,U);else{const A=R.el=k.el;R.children!==k.children&&X(A,R.children)}},Bn=(k,R,M,U)=>{k==null?g(R.el=L(R.children||""),M,U):R.el=k.el},be=(k,R,M,U)=>{[k.el,k.anchor]=Rt(k.children,R,M,U,k.el,k.anchor)},ft=({el:k,anchor:R},M,U)=>{let A;for(;k&&k!==R;)A=_e(k),g(k,M,U),k=A;g(R,M,U)},Gs=({el:k,anchor:R})=>{let M;for(;k&&k!==R;)M=_e(k),h(k),k=M;h(R)},Nt=(k,R,M,U,A,ce,Ce,H,fe)=>{Ce=Ce||R.type==="svg",k==null?Ys(R,M,U,A,ce,Ce,H,fe):Mt(k,R,A,ce,Ce,H,fe)},Ys=(k,R,M,U,A,ce,Ce,H)=>{let fe,Q;const{type:Pe,props:de,shapeFlag:Te,transition:Ue,patchFlag:Ke,dirs:at}=k;if(k.el&&rt!==void 0&&Ke===-1)fe=k.el=rt(k.el);else{if(fe=k.el=T(k.type,ce,de&&de.is,de),Te&8?oe(fe,k.children):Te&16&&Pt(k.children,fe,null,U,A,ce&&Pe!=="foreignObject",Ce,H),at&&Nr(k,null,U,"created"),de){for(const ht in de)ht!=="value"&&!pu(ht)&&x(fe,ht,null,de[ht],ce,k.children,U,A,it);"value"in de&&x(fe,"value",null,de.value),(Q=de.onVnodeBeforeMount)&&Hs(Q,U,k)}bs(fe,k,k.scopeId,Ce,U)}at&&Nr(k,null,U,"beforeMount");const st=(!A||A&&!A.pendingBranch)&&Ue&&!Ue.persisted;st&&Ue.beforeEnter(fe),g(fe,R,M),((Q=de&&de.onVnodeMounted)||st||at)&&Dn(()=>{Q&&Hs(Q,U,k),st&&Ue.enter(fe),at&&Nr(k,null,U,"mounted")},A)},bs=(k,R,M,U,A)=>{if(M&&Ve(k,M),U)for(let ce=0;ce<U.length;ce++)Ve(k,U[ce]);if(A){let ce=A.subTree;if(R===ce){const Ce=A.vnode;bs(k,Ce,Ce.scopeId,Ce.slotScopeIds,A.parent)}}},Pt=(k,R,M,U,A,ce,Ce,H,fe=0)=>{for(let Q=fe;Q<k.length;Q++){const Pe=k[Q]=H?Ho(k[Q]):js(k[Q]);Je(null,Pe,R,M,U,A,ce,Ce,H)}},Mt=(k,R,M,U,A,ce,Ce)=>{const H=R.el=k.el;let{patchFlag:fe,dynamicChildren:Q,dirs:Pe}=R;fe|=k.patchFlag&16;const de=k.props||wt,Te=R.props||wt;let Ue;M&&Tr(M,!1),(Ue=Te.onVnodeBeforeUpdate)&&Hs(Ue,M,R,k),Pe&&Nr(R,k,M,"beforeUpdate"),M&&Tr(M,!0);const Ke=A&&R.type!=="foreignObject";if(Q?Ne(k.dynamicChildren,Q,H,M,U,Ke,ce):Ce||xt(k,R,H,null,M,U,Ke,ce,!1),fe>0){if(fe&16)Ye(H,R,de,Te,M,U,A);else if(fe&2&&de.class!==Te.class&&x(H,"class",null,Te.class,A),fe&4&&x(H,"style",de.style,Te.style,A),fe&8){const at=R.dynamicProps;for(let st=0;st<at.length;st++){const ht=at[st],vn=de[ht],jn=Te[ht];(jn!==vn||ht==="value")&&x(H,ht,vn,jn,A,k.children,M,U,it)}}fe&1&&k.children!==R.children&&oe(H,R.children)}else!Ce&&Q==null&&Ye(H,R,de,Te,M,U,A);((Ue=Te.onVnodeUpdated)||Pe)&&Dn(()=>{Ue&&Hs(Ue,M,R,k),Pe&&Nr(R,k,M,"updated")},U)},Ne=(k,R,M,U,A,ce,Ce)=>{for(let H=0;H<R.length;H++){const fe=k[H],Q=R[H],Pe=fe.el&&(fe.type===Ws||!Va(fe,Q)||fe.shapeFlag&70)?ve(fe.el):M;Je(fe,Q,Pe,null,U,A,ce,Ce,!0)}},Ye=(k,R,M,U,A,ce,Ce)=>{if(M!==U){for(const H in U){if(pu(H))continue;const fe=U[H],Q=M[H];fe!==Q&&H!=="value"&&x(k,H,Q,fe,Ce,R.children,A,ce,it)}if(M!==wt)for(const H in M)!pu(H)&&!(H in U)&&x(k,H,M[H],null,Ce,R.children,A,ce,it);"value"in U&&x(k,"value",M.value,U.value)}},yn=(k,R,M,U,A,ce,Ce,H,fe)=>{const Q=R.el=k?k.el:O(""),Pe=R.anchor=k?k.anchor:O("");let{patchFlag:de,dynamicChildren:Te,slotScopeIds:Ue}=R;Ue&&(H=H?H.concat(Ue):Ue),k==null?(g(Q,M,U),g(Pe,M,U),Pt(R.children,M,Pe,A,ce,Ce,H,fe)):de>0&&de&64&&Te&&k.dynamicChildren?(Ne(k.dynamicChildren,Te,M,A,ce,Ce,H),(R.key!=null||A&&R===A.subTree)&&ik(k,R,!0)):xt(k,R,M,Pe,A,ce,Ce,H,fe)},Xs=(k,R,M,U,A,ce,Ce,H,fe)=>{R.slotScopeIds=H,k==null?R.shapeFlag&512?A.ctx.activate(R,M,U,Ce,fe):Ie(R,M,U,A,ce,Ce,fe):Ot(k,R,fe)},Ie=(k,R,M,U,A,ce,Ce)=>{const H=k.component=q9(k,U,A);if(K_(k)&&(H.ctx.renderer=bo),K9(H),H.asyncDep){if(A&&A.registerDep(H,_t),!k.el){const fe=H.subTree=po(Br);Bn(null,fe,R,M)}return}_t(H,k,R,M,A,ce,Ce)},Ot=(k,R,M)=>{const U=R.component=k.component;if(t9(k,R,M))if(U.asyncDep&&!U.asyncResolved){K(U,R,M);return}else U.next=R,G4(U.update),U.update();else R.component=k.component,R.el=k.el,U.vnode=R},_t=(k,R,M,U,A,ce,Ce)=>{const H=()=>{if(k.isMounted){let{next:Pe,bu:de,u:Te,parent:Ue,vnode:Ke}=k,at=Pe,st;Tr(k,!1),Pe?(Pe.el=Ke.el,K(k,Pe,Ce)):Pe=Ke,de&&Rp(de),(st=Pe.props&&Pe.props.onVnodeBeforeUpdate)&&Hs(st,Ue,Pe,Ke),Tr(k,!0);const ht=Pp(k),vn=k.subTree;k.subTree=ht,Je(vn,ht,ve(vn.el),b(vn),k,A,ce),Pe.el=ht.el,at===null&&n9(k,ht.el),Te&&Dn(Te,A),(st=Pe.props&&Pe.props.onVnodeUpdated)&&Dn(()=>Hs(st,Ue,Pe,Ke),A)}else{let Pe;const{el:de,props:Te}=R,{bm:Ue,m:Ke,parent:at}=k,st=Vp(R);if(Tr(k,!1),Ue&&Rp(Ue),!st&&(Pe=Te&&Te.onVnodeBeforeMount)&&Hs(Pe,at,R),Tr(k,!0),de&&Lr){const ht=()=>{k.subTree=Pp(k),Lr(de,k.subTree,k,A,null)};st?R.type.__asyncLoader().then(()=>!k.isUnmounted&&ht()):ht()}else{const ht=k.subTree=Pp(k);Je(null,ht,M,U,k,A,ce),R.el=ht.el}if(Ke&&Dn(Ke,A),!st&&(Pe=Te&&Te.onVnodeMounted)){const ht=R;Dn(()=>Hs(Pe,at,ht),A)}R.shapeFlag&256&&k.a&&Dn(k.a,A),k.isMounted=!0,R=M=U=null}},fe=k.effect=new rg(H,()=>L_(k.update),k.scope),Q=k.update=fe.run.bind(fe);Q.id=k.uid,Tr(k,!0),Q()},K=(k,R,M)=>{R.component=k;const U=k.vnode.props;k.vnode=R,k.next=null,S9(k,R.props,U,M),k9(k,R.children,M),Di(),dg(void 0,k.update),Bi()},xt=(k,R,M,U,A,ce,Ce,H,fe=!1)=>{const Q=k&&k.children,Pe=k?k.shapeFlag:0,de=R.children,{patchFlag:Te,shapeFlag:Ue}=R;if(Te>0){if(Te&128){re(Q,de,M,U,A,ce,Ce,H,fe);return}else if(Te&256){Ii(Q,de,M,U,A,ce,Ce,H,fe);return}}Ue&8?(Pe&16&&it(Q,A,ce),de!==Q&&oe(M,de)):Pe&16?Ue&16?re(Q,de,M,U,A,ce,Ce,H,fe):it(Q,A,ce,!0):(Pe&8&&oe(M,""),Ue&16&&Pt(de,M,U,A,ce,Ce,H,fe))},Ii=(k,R,M,U,A,ce,Ce,H,fe)=>{k=k||Ti,R=R||Ti;const Q=k.length,Pe=R.length,de=Math.min(Q,Pe);let Te;for(Te=0;Te<de;Te++){const Ue=R[Te]=fe?Ho(R[Te]):js(R[Te]);Je(k[Te],Ue,M,null,A,ce,Ce,H,fe)}Q>Pe?it(k,A,ce,!0,!1,de):Pt(R,M,U,A,ce,Ce,H,fe,de)},re=(k,R,M,U,A,ce,Ce,H,fe)=>{let Q=0;const Pe=R.length;let de=k.length-1,Te=Pe-1;for(;Q<=de&&Q<=Te;){const Ue=k[Q],Ke=R[Q]=fe?Ho(R[Q]):js(R[Q]);if(Va(Ue,Ke))Je(Ue,Ke,M,null,A,ce,Ce,H,fe);else break;Q++}for(;Q<=de&&Q<=Te;){const Ue=k[de],Ke=R[Te]=fe?Ho(R[Te]):js(R[Te]);if(Va(Ue,Ke))Je(Ue,Ke,M,null,A,ce,Ce,H,fe);else break;de--,Te--}if(Q>de){if(Q<=Te){const Ue=Te+1,Ke=Ue<Pe?R[Ue].el:U;for(;Q<=Te;)Je(null,R[Q]=fe?Ho(R[Q]):js(R[Q]),M,Ke,A,ce,Ce,H,fe),Q++}}else if(Q>Te)for(;Q<=de;)ys(k[Q],A,ce,!0),Q++;else{const Ue=Q,Ke=Q,at=new Map;for(Q=Ke;Q<=Te;Q++){const gt=R[Q]=fe?Ho(R[Q]):js(R[Q]);gt.key!=null&&at.set(gt.key,Q)}let st,ht=0;const vn=Te-Ke+1;let jn=!1,Fr=0;const Ut=new Array(vn);for(Q=0;Q<vn;Q++)Ut[Q]=0;for(Q=Ue;Q<=de;Q++){const gt=k[Q];if(ht>=vn){ys(gt,A,ce,!0);continue}let en;if(gt.key!=null)en=at.get(gt.key);else for(st=Ke;st<=Te;st++)if(Ut[st-Ke]===0&&Va(gt,R[st])){en=st;break}en===void 0?ys(gt,A,ce,!0):(Ut[en-Ke]=Q+1,en>=Fr?Fr=en:jn=!0,Je(gt,R[en],M,null,A,ce,Ce,H,fe),ht++)}const vs=jn?P9(Ut):Ti;for(st=vs.length-1,Q=vn-1;Q>=0;Q--){const gt=Ke+Q,en=R[gt],tl=gt+1<Pe?R[gt+1].el:U;Ut[Q]===0?Je(null,en,M,tl,A,ce,Ce,H,fe):jn&&(st<0||Q!==vs[st]?Cs(en,M,tl,2):st--)}}},Cs=(k,R,M,U,A=null)=>{const{el:ce,type:Ce,transition:H,children:fe,shapeFlag:Q}=k;if(Q&6){Cs(k.component.subTree,R,M,U);return}if(Q&128){k.suspense.move(R,M,U);return}if(Q&64){Ce.move(k,R,M,bo);return}if(Ce===Ws){g(ce,R,M);for(let de=0;de<fe.length;de++)Cs(fe[de],R,M,U);g(k.anchor,R,M);return}if(Ce===Dp){ft(k,R,M);return}if(U!==2&&Q&1&&H)if(U===0)H.beforeEnter(ce),g(ce,R,M),Dn(()=>H.enter(ce),A);else{const{leave:de,delayLeave:Te,afterLeave:Ue}=H,Ke=()=>g(ce,R,M),at=()=>{de(ce,()=>{Ke(),Ue&&Ue()})};Te?Te(ce,Ke,at):at()}else g(ce,R,M)},ys=(k,R,M,U=!1,A=!1)=>{const{type:ce,props:Ce,ref:H,children:fe,dynamicChildren:Q,shapeFlag:Pe,patchFlag:de,dirs:Te}=k;if(H!=null&&Kp(H,null,M,k,!0),Pe&256){R.ctx.deactivate(k);return}const Ue=Pe&1&&Te,Ke=!Vp(k);let at;if(Ke&&(at=Ce&&Ce.onVnodeBeforeUnmount)&&Hs(at,R,k),Pe&6)pt(k.component,M,U);else{if(Pe&128){k.suspense.unmount(M,U);return}Ue&&Nr(k,null,R,"beforeUnmount"),Pe&64?k.type.remove(k,R,M,A,bo,U):Q&&(ce!==Ws||de>0&&de&64)?it(Q,R,M,!1,!0):(ce===Ws&&de&384||!A&&Pe&16)&&it(fe,R,M),U&&Ir(k)}(Ke&&(at=Ce&&Ce.onVnodeUnmounted)||Ue)&&Dn(()=>{at&&Hs(at,R,k),Ue&&Nr(k,null,R,"unmounted")},M)},Ir=k=>{const{type:R,el:M,anchor:U,transition:A}=k;if(R===Ws){qo(M,U);return}if(R===Dp){Gs(k);return}const ce=()=>{h(M),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(k.shapeFlag&1&&A&&!A.persisted){const{leave:Ce,delayLeave:H}=A,fe=()=>Ce(M,ce);H?H(k.el,ce,fe):fe()}else ce()},qo=(k,R)=>{let M;for(;k!==R;)M=_e(k),h(k),k=M;h(R)},pt=(k,R,M)=>{const{bum:U,scope:A,update:ce,subTree:Ce,um:H}=k;U&&Rp(U),A.stop(),ce&&(ce.active=!1,ys(Ce,k,R,M)),H&&Dn(H,R),Dn(()=>{k.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},it=(k,R,M,U=!1,A=!1,ce=0)=>{for(let Ce=ce;Ce<k.length;Ce++)ys(k[Ce],R,M,U,A)},b=k=>k.shapeFlag&6?b(k.component.subTree):k.shapeFlag&128?k.suspense.next():_e(k.anchor||k.el),$r=(k,R,M)=>{k==null?R._vnode&&ys(R._vnode,null,null,!0):Je(R._vnode||null,k,R,null,null,null,M),U_(),R._vnode=k},bo={p:Je,um:ys,m:Cs,r:Ir,mt:Ie,mc:Pt,pc:xt,pbc:Ne,n:b,o:l};let $i,Lr;return u&&([$i,Lr]=u(bo)),{render:$r,hydrate:$i,createApp:T9($r,$i)}}function Tr({effect:l,update:u},m){l.allowRecurse=u.allowRecurse=m}function ik(l,u,m=!1){const g=l.children,h=u.children;if(Qe(g)&&Qe(h))for(let x=0;x<g.length;x++){const T=g[x];let O=h[x];O.shapeFlag&1&&!O.dynamicChildren&&((O.patchFlag<=0||O.patchFlag===32)&&(O=h[x]=Ho(h[x]),O.el=T.el),m||ik(T,O))}}function P9(l){const u=l.slice(),m=[0];let g,h,x,T,O;const L=l.length;for(g=0;g<L;g++){const X=l[g];if(X!==0){if(h=m[m.length-1],l[h]<X){u[g]=h,m.push(g);continue}for(x=0,T=m.length-1;x<T;)O=x+T>>1,l[m[O]]<X?x=O+1:T=O;X<l[m[x]]&&(x>0&&(u[g]=m[x-1]),m[x]=g)}}for(x=m.length,T=m[x-1];x-- >0;)m[x]=T,T=u[T];return m}const O9=l=>l.__isTeleport,ak="components";function D9(l,u){return I9(ak,l,!0,u)||l}const B9=Symbol();function I9(l,u,m=!0,g=!1){const h=qs||rn;if(h){const x=h.type;if(l===ak){const O=Q9(x);if(O&&(O===u||O===Ks(u)||O===Tu(Ks(u))))return x}const T=n_(h[l]||x[l],u)||n_(h.appContext[l],u);return!T&&g?x:T}}function n_(l,u){return l&&(l[u]||l[Ks(u)]||l[Tu(Ks(u))])}const Ws=Symbol(void 0),pg=Symbol(void 0),Br=Symbol(void 0),Dp=Symbol(void 0),Ga=[];let Or=null;function xu(l=!1){Ga.push(Or=l?null:[])}function $9(){Ga.pop(),Or=Ga[Ga.length-1]||null}let Su=1;function s_(l){Su+=l}function lk(l){return l.dynamicChildren=Su>0?Or||Ti:null,$9(),Su>0&&Or&&Or.push(l),l}function ck(l,u,m,g,h,x){return lk(Jn(l,u,m,g,h,x,!0))}function uk(l,u,m,g,h){return lk(po(l,u,m,g,h,!0))}function L9(l){return l?l.__v_isVNode===!0:!1}function Va(l,u){return l.type===u.type&&l.key===u.key}const Bu="__vInternal",fk=({key:l})=>l!=null?l:null,bu=({ref:l,ref_key:u,ref_for:m})=>l!=null?ln(l)||an(l)||Xe(l)?{i:qs,r:l,k:u,f:!!m}:l:null;function Jn(l,u=null,m=null,g=0,h=null,x=l===Ws?0:1,T=!1,O=!1){const L={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&fk(u),ref:u&&bu(u),scopeId:V_,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:g,dynamicProps:h,dynamicChildren:null,appContext:null};return O?(gg(L,m),x&128&&l.normalize(L)):m&&(L.shapeFlag|=ln(m)?8:16),Su>0&&!T&&Or&&(L.patchFlag>0||x&6)&&L.patchFlag!==32&&Or.push(L),L}const po=F9;function F9(l,u=null,m=null,g=0,h=null,x=!1){if((!l||l===B9)&&(l=Br),L9(l)){const O=Ja(l,u,!0);return m&&gg(O,m),O}if(Z9(l)&&(l=l.__vccOpts),u){u=M9(u);let{class:O,style:L}=u;O&&!ln(O)&&(u.class=Jp(O)),cn(L)&&(P_(L)&&!Qe(L)&&(L=An({},L)),u.style=Zp(L))}const T=ln(l)?1:s9(l)?128:O9(l)?64:cn(l)?4:Xe(l)?2:0;return Jn(l,u,m,g,h,T,x,!0)}function M9(l){return l?P_(l)||Bu in l?An({},l):l:null}function Ja(l,u,m=!1){const{props:g,ref:h,patchFlag:x,children:T}=l,O=u?H9(g||{},u):g;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:O,key:O&&fk(O),ref:u&&u.ref?m&&h?Qe(h)?h.concat(bu(u)):[h,bu(u)]:bu(u):h,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:T,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==Ws?x===-1?16:x|16:x,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Ja(l.ssContent),ssFallback:l.ssFallback&&Ja(l.ssFallback),el:l.el,anchor:l.anchor}}function U9(l=" ",u=0){return po(pg,null,l,u)}function z9(l="",u=!1){return u?(xu(),uk(Br,null,l)):po(Br,null,l)}function js(l){return l==null||typeof l=="boolean"?po(Br):Qe(l)?po(Ws,null,l.slice()):typeof l=="object"?Ho(l):po(pg,null,String(l))}function Ho(l){return l.el===null||l.memo?l:Ja(l)}function gg(l,u){let m=0;const{shapeFlag:g}=l;if(u==null)u=null;else if(Qe(u))m=16;else if(typeof u=="object")if(g&65){const h=u.default;h&&(h._c&&(h._d=!1),gg(l,h()),h._c&&(h._d=!0));return}else{m=32;const h=u._;!h&&!(Bu in u)?u._ctx=qs:h===3&&qs&&(qs.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Xe(u)?(u={default:u,_ctx:qs},m=32):(u=String(u),g&64?(m=16,u=[U9(u)]):m=8);l.children=u,l.shapeFlag|=m}function H9(...l){const u={};for(let m=0;m<l.length;m++){const g=l[m];for(const h in g)if(h==="class")u.class!==g.class&&(u.class=Jp([u.class,g.class]));else if(h==="style")u.style=Zp([u.style,g.style]);else if(_u(h)){const x=u[h],T=g[h];T&&x!==T&&!(Qe(x)&&x.includes(T))&&(u[h]=x?[].concat(x,T):T)}else h!==""&&(u[h]=g[h])}return u}function Hs(l,u,m,g=null){hs(l,u,7,[m,g])}const Gp=l=>l?dk(l)?hg(l)||l.proxy:Gp(l.parent):null,wu=An(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>Gp(l.parent),$root:l=>Gp(l.root),$emit:l=>l.emit,$options:l=>J_(l),$forceUpdate:l=>()=>L_(l.update),$nextTick:l=>gu.bind(l.proxy),$watch:l=>i9.bind(l)}),V9={get({_:l},u){const{ctx:m,setupState:g,data:h,props:x,accessCache:T,type:O,appContext:L}=l;let X;if(u[0]!=="$"){const Ve=T[u];if(Ve!==void 0)switch(Ve){case 1:return g[u];case 2:return h[u];case 4:return m[u];case 3:return x[u]}else{if(g!==wt&&nt(g,u))return T[u]=1,g[u];if(h!==wt&&nt(h,u))return T[u]=2,h[u];if((X=l.propsOptions[0])&&nt(X,u))return T[u]=3,x[u];if(m!==wt&&nt(m,u))return T[u]=4,m[u];Wp&&(T[u]=0)}}const oe=wu[u];let ve,_e;if(oe)return u==="$attrs"&&Wn(l,"get",u),oe(l);if((ve=O.__cssModules)&&(ve=ve[u]))return ve;if(m!==wt&&nt(m,u))return T[u]=4,m[u];if(_e=L.config.globalProperties,nt(_e,u))return _e[u]},set({_:l},u,m){const{data:g,setupState:h,ctx:x}=l;return h!==wt&&nt(h,u)?(h[u]=m,!0):g!==wt&&nt(g,u)?(g[u]=m,!0):nt(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(x[u]=m,!0)},has({_:{data:l,setupState:u,accessCache:m,ctx:g,appContext:h,propsOptions:x}},T){let O;return!!m[T]||l!==wt&&nt(l,T)||u!==wt&&nt(u,T)||(O=x[0])&&nt(O,T)||nt(g,T)||nt(wu,T)||nt(h.config.globalProperties,T)},defineProperty(l,u,m){return m.get!=null?l._.accessCache[u]=0:nt(m,"value")&&this.set(l,u,m.value,null),Reflect.defineProperty(l,u,m)}},W9=rk();let j9=0;function q9(l,u,m){const g=l.type,h=(u?u.appContext:l.appContext)||W9,x={uid:j9++,vnode:l,type:g,parent:u,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new f4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tk(g,h),emitsOptions:H_(g,h),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:g.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=u?u.root:x,x.emit=Q4.bind(null,x),l.ce&&l.ce(x),x}let rn=null;const Pi=l=>{rn=l,l.scope.on()},Dr=()=>{rn&&rn.scope.off(),rn=null};function dk(l){return l.vnode.shapeFlag&4}let el=!1;function K9(l,u=!1){el=u;const{props:m,children:g}=l.vnode,h=dk(l);x9(l,m,h,u),_9(l,g);const x=h?G9(l,u):void 0;return el=!1,x}function G9(l,u){const m=l.type;l.accessCache=Object.create(null),l.proxy=O_(new Proxy(l.ctx,V9));const{setup:g}=m;if(g){const h=l.setupContext=g.length>1?X9(l):null;Pi(l),Di();const x=Wo(g,l,0,[l.props,h]);if(Bi(),Dr(),h_(x)){if(x.then(Dr,Dr),u)return x.then(T=>{o_(l,T,u)}).catch(T=>{Pu(T,l,0)});l.asyncDep=x}else o_(l,x,u)}else mk(l,u)}function o_(l,u,m){Xe(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:cn(u)&&(l.setupState=I_(u)),mk(l,m)}let r_;function mk(l,u,m){const g=l.type;if(!l.render){if(!u&&r_&&!g.render){const h=g.template;if(h){const{isCustomElement:x,compilerOptions:T}=l.appContext.config,{delimiters:O,compilerOptions:L}=g,X=An(An({isCustomElement:x,delimiters:O},T),L);g.render=r_(h,X)}}l.render=g.render||gs}Pi(l),Di(),b9(l),Bi(),Dr()}function Y9(l){return new Proxy(l.attrs,{get(u,m){return Wn(l,"get","$attrs"),u[m]}})}function X9(l){const u=g=>{l.exposed=g||{}};let m;return{get attrs(){return m||(m=Y9(l))},slots:l.slots,emit:l.emit,expose:u}}function hg(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(I_(O_(l.exposed)),{get(u,m){if(m in u)return u[m];if(m in wu)return wu[m](l)}}))}function Q9(l){return Xe(l)&&l.displayName||l.name}function Z9(l){return Xe(l)&&"__vccOpts"in l}const pk=(l,u)=>j4(l,u,el),J9="3.2.33",eq="http://www.w3.org/2000/svg",Rr=typeof document!="undefined"?document:null,i_=Rr&&Rr.createElement("template"),tq={insert:(l,u,m)=>{u.insertBefore(l,m||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,m,g)=>{const h=u?Rr.createElementNS(eq,l):Rr.createElement(l,m?{is:m}:void 0);return l==="select"&&g&&g.multiple!=null&&h.setAttribute("multiple",g.multiple),h},createText:l=>Rr.createTextNode(l),createComment:l=>Rr.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Rr.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},cloneNode(l){const u=l.cloneNode(!0);return"_value"in l&&(u._value=l._value),u},insertStaticContent(l,u,m,g,h,x){const T=m?m.previousSibling:u.lastChild;if(h&&(h===x||h.nextSibling))for(;u.insertBefore(h.cloneNode(!0),m),!(h===x||!(h=h.nextSibling)););else{i_.innerHTML=g?`<svg>${l}</svg>`:l;const O=i_.content;if(g){const L=O.firstChild;for(;L.firstChild;)O.appendChild(L.firstChild);O.removeChild(L)}u.insertBefore(O,m)}return[T?T.nextSibling:u.firstChild,m?m.previousSibling:u.lastChild]}};function nq(l,u,m){const g=l._vtc;g&&(u=(u?[u,...g]:[...g]).join(" ")),u==null?l.removeAttribute("class"):m?l.setAttribute("class",u):l.className=u}function sq(l,u,m){const g=l.style,h=ln(m);if(m&&!h){for(const x in m)Yp(g,x,m[x]);if(u&&!ln(u))for(const x in u)m[x]==null&&Yp(g,x,"")}else{const x=g.display;h?u!==m&&(g.cssText=m):u&&l.removeAttribute("style"),"_vod"in l&&(g.display=x)}}const a_=/\s*!important$/;function Yp(l,u,m){if(Qe(m))m.forEach(g=>Yp(l,u,g));else if(m==null&&(m=""),u.startsWith("--"))l.setProperty(u,m);else{const g=oq(l,u);a_.test(m)?l.setProperty(Oi(g),m.replace(a_,""),"important"):l[g]=m}}const l_=["Webkit","Moz","ms"],Bp={};function oq(l,u){const m=Bp[u];if(m)return m;let g=Ks(u);if(g!=="filter"&&g in l)return Bp[u]=g;g=Tu(g);for(let h=0;h<l_.length;h++){const x=l_[h]+g;if(x in l)return Bp[u]=x}return u}const c_="http://www.w3.org/1999/xlink";function rq(l,u,m,g,h){if(g&&u.startsWith("xlink:"))m==null?l.removeAttributeNS(c_,u.slice(6,u.length)):l.setAttributeNS(c_,u,m);else{const x=Z5(u);m==null||x&&!m_(m)?l.removeAttribute(u):l.setAttribute(u,x?"":m)}}function iq(l,u,m,g,h,x,T){if(u==="innerHTML"||u==="textContent"){g&&T(g,h,x),l[u]=m==null?"":m;return}if(u==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const L=m==null?"":m;(l.value!==L||l.tagName==="OPTION")&&(l.value=L),m==null&&l.removeAttribute(u);return}let O=!1;if(m===""||m==null){const L=typeof l[u];L==="boolean"?m=m_(m):m==null&&L==="string"?(m="",O=!0):L==="number"&&(m=0,O=!0)}try{l[u]=m}catch{}O&&l.removeAttribute(u)}const[gk,aq]=(()=>{let l=Date.now,u=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(l=()=>performance.now());const m=navigator.userAgent.match(/firefox\/(\d+)/i);u=!!(m&&Number(m[1])<=53)}return[l,u]})();let Xp=0;const lq=Promise.resolve(),cq=()=>{Xp=0},uq=()=>Xp||(lq.then(cq),Xp=gk());function fq(l,u,m,g){l.addEventListener(u,m,g)}function dq(l,u,m,g){l.removeEventListener(u,m,g)}function mq(l,u,m,g,h=null){const x=l._vei||(l._vei={}),T=x[u];if(g&&T)T.value=g;else{const[O,L]=pq(u);if(g){const X=x[u]=gq(g,h);fq(l,O,X,L)}else T&&(dq(l,O,T,L),x[u]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function pq(l){let u;if(u_.test(l)){u={};let m;for(;m=l.match(u_);)l=l.slice(0,l.length-m[0].length),u[m[0].toLowerCase()]=!0}return[Oi(l.slice(2)),u]}function gq(l,u){const m=g=>{const h=g.timeStamp||gk();(aq||h>=m.attached-1)&&hs(hq(g,m.value),u,5,[g])};return m.value=l,m.attached=uq(),m}function hq(l,u){if(Qe(u)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},u.map(g=>h=>!h._stopped&&g&&g(h))}else return u}const f_=/^on[a-z]/,bq=(l,u,m,g,h=!1,x,T,O,L)=>{u==="class"?nq(l,g,h):u==="style"?sq(l,m,g):_u(u)?eg(u)||mq(l,u,m,g,T):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):Cq(l,u,g,h))?iq(l,u,g,x,T,O,L):(u==="true-value"?l._trueValue=g:u==="false-value"&&(l._falseValue=g),rq(l,u,g,h))};function Cq(l,u,m,g){return g?!!(u==="innerHTML"||u==="textContent"||u in l&&f_.test(u)&&Xe(m)):u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA"||f_.test(u)&&ln(m)?!1:u in l}const yq=An({patchProp:bq},tq);let d_;function vq(){return d_||(d_=A9(yq))}const Eq=(...l)=>{const u=vq().createApp(...l),{mount:m}=u;return u.mount=g=>{const h=xq(g);if(!h)return;const x=u._component;!Xe(x)&&!x.render&&!x.template&&(x.template=h.innerHTML),h.innerHTML="";const T=m(h,!1,h instanceof SVGElement);return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),T},u};function xq(l){return ln(l)?document.querySelector(l):l}var Sq=(l,u)=>{const m=l.__vccOpts||l;for(const[g,h]of u)m[g]=h;return m};const wq=q_({name:"App",components:{},setup(){const l=Ru({content:"init content",show:!0,locale:""}),u=pk(()=>{let g={};return l.locale==="en"&&(g={language:"en_US"}),g});function m(){l.locale?l.locale="":l.locale="en"}return{data:l,config:u,switchLanguage:m}}}),_q=Jn("h1",null,"VueTinymce example",-1),kq=Jn("br",null,null,-1),Nq=Jn("br",null,null,-1),Tq=Jn("br",null,null,-1),Aq=Jn("br",null,null,-1),Rq=Jn("h2",null,"output",-1),Pq=["innerHTML"];function Oq(l,u,m,g,h,x){const T=D9("vue-tinymce");return xu(),ck(Ws,null,[_q,Jn("button",{onClick:u[0]||(u[0]=O=>l.data.show=!l.data.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+n4(l.data.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),kq,Nq,Jn("button",{onClick:u[1]||(u[1]=(...O)=>l.switchLanguage&&l.switchLanguage(...O))},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),Tq,Aq,l.data.show?(xu(),uk(T,{key:0,modelValue:l.data.content,"onUpdate:modelValue":u[2]||(u[2]=O=>l.data.content=O),config:l.config},null,8,["modelValue","config"])):z9("",!0),Rq,Jn("div",{innerHTML:l.data.content},null,8,Pq)],64)}var Dq=Sq(wq,[["render",Oq]]),hk={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},g=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},h=function(e,t){return x(function(n,s){return e.eq(t(n),t(s))})},x=function(e){return{eq:e}},T=x(function(e,t){return e===t}),O=T,L=function(e){return x(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},X=function(e,t){return h(L(e),function(n){return g(n,t)})},oe=function(e){return x(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!X(O).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},ve=x(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:m(n)?e===t:n==="array"?L(ve).eq(e,t):n==="object"?oe(ve).eq(e,t):!1});const _e=Object.getPrototypeOf,Ve=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},rt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Ve(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Rt=e=>t=>rt(t)===e,Je=e=>t=>typeof t===e,mt=e=>t=>e===t,Bn=(e,t)=>ft(e)&&Ve(e,t,(n,s)=>_e(n)===s),be=Rt("string"),ft=Rt("object"),Gs=e=>Bn(e,Object),Nt=Rt("array"),Ys=mt(null),bs=Je("boolean"),Pt=mt(void 0),Mt=e=>e==null,Ne=e=>!Mt(e),Ye=Je("function"),yn=Je("number"),Xs=(e,t)=>{if(Nt(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Ie=()=>{},Ot=(e,t)=>(...n)=>e(t.apply(null,n)),_t=(e,t)=>n=>e(t(n)),K=e=>()=>e,xt=e=>e,Ii=(e,t)=>e===t;function re(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const Cs=e=>t=>!e(t),ys=e=>()=>{throw new Error(e)},Ir=e=>e(),qo=e=>{e()},pt=K(!1),it=K(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return Ne(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const $r=Array.prototype.slice,bo=Array.prototype.indexOf,$i=Array.prototype.push,Lr=(e,t)=>bo.call(e,t),k=(e,t)=>{const n=Lr(e,t);return n===-1?b.none():b.some(n)},R=(e,t)=>Lr(e,t)>-1,M=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},U=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},A=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},ce=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},Ce=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},H=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},fe=(e,t,n)=>(ce(e,(s,o)=>{n=t(n,s,o)}),n),Q=(e,t,n)=>(A(e,(s,o)=>{n=t(n,s,o)}),n),Pe=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},de=(e,t)=>Pe(e,t,pt),Te=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},Ue=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Nt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$i.apply(t,e[n])}return t},Ke=(e,t)=>Ue(U(e,t)),at=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},st=e=>{const t=$r.call(e,0);return t.reverse(),t},ht=(e,t)=>H(e,n=>!R(t,n)),vn=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},jn=(e,t)=>{const n=$r.call(e,0);return n.sort(t),n},Fr=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),Ut=e=>Fr(e,0),vs=e=>Fr(e,e.length-1),gt=Ye(Array.from)?Array.from:e=>$r.call(e),en=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},tl=(e,t)=>{const n=[],s=Ye(t)?o=>M(n,r=>t(r,o)):o=>R(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},es=Object.keys,Ck=Object.hasOwnProperty,bt=(e,t)=>{const n=es(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},Li=(e,t)=>yk(e,(n,s)=>({k:s,v:t(n,s)})),yk=(e,t)=>{const n={};return bt(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Iu=e=>(t,n)=>{e[n]=t},bg=(e,t,n,s)=>{const o={};return bt(e,(r,i)=>{(t(r,i)?n:s)(r,i)}),o},vk=(e,t)=>{const n={},s={};return bg(e,t,Iu(n),Iu(s)),{t:n,f:s}},Fi=(e,t)=>{const n={};return bg(e,t,Iu(n),Ie),n},$u=(e,t)=>{const n=[];return bt(e,(s,o)=>{n.push(t(s,o))}),n},Cg=e=>$u(e,xt),lt=(e,t)=>Fe(e,t)?b.from(e[t]):b.none(),Fe=(e,t)=>Ck.call(e,t),Mr=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,Ek=(e,t,n=ve)=>oe(n).eq(e,t),yg=e=>{const t={};return A(e,n=>{t[n]={}}),es(t)},Lu=Array.isArray,xk=e=>{if(Lu(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Mi=(e,t,n)=>{let s,o;if(!e)return!1;if(n=n||e,e.length!==void 0){for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(s in e)if(Fe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Fu=(e,t)=>{const n=[];return Mi(e,(s,o)=>{n.push(t(s,o,e))}),n},Ur=(e,t)=>{const n=[];return Mi(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},vg=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},nl=(e,t,n,s)=>{let o=Pt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Eg=(e,t,n)=>{let s,o;for(s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Co=e=>e[e.length-1],Ko=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},Sk=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(f),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(p)}},wk=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},_k=(e,t)=>{const n=wk(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Mu(s(1),s(2))},kk=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?xg():_k(e,n)},xg=()=>Mu(0,0),Mu=(e,t)=>({major:e,minor:t}),Ui={nu:Mu,detect:kk,unknown:xg},Nk=(e,t)=>en(t.brands,n=>{const s=n.brand.toLowerCase();return de(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Ui.nu(parseInt(n.version,10),0)}))}),Sg=(e,t)=>{const n=String(t).toLowerCase();return de(e,s=>s.search(n))},Tk=(e,t)=>Sg(e,t).map(n=>{const s=Ui.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Ak=(e,t)=>Sg(e,t).map(n=>{const s=Ui.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Rk=(e,t)=>e.substring(t),wg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Pk=(e,t)=>qn(e,t)?Rk(e,t.length):e,un=(e,t)=>e.indexOf(t)!==-1,qn=(e,t)=>wg(e,t,0),_g=(e,t)=>wg(e,t,e.length-t.length),Uu=e=>t=>t.replace(e,""),zr=Uu(/^\s+|\s+$/g),Ok=Uu(/^\s+/g),kg=Uu(/\s+$/g),Qs=e=>e.length>0,sl=e=>!Qs(e),Dk=(e,t)=>t<=0?"":new Array(t+1).join(e),Bk=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},zu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zs=e=>t=>un(t,e),Ik=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>un(e,"edge/")&&un(e,"chrome")&&un(e,"safari")&&un(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,zu],search:e=>un(e,"chrome")&&!un(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>un(e,"msie")||un(e,"trident")},{name:"Opera",versionRegexes:[zu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zs("firefox")},{name:"Safari",versionRegexes:[zu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(un(e,"safari")||un(e,"mobile/"))&&un(e,"applewebkit")}],$k=[{name:"Windows",search:Zs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>un(e,"iphone")||un(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zs("linux"),versionRegexes:[]},{name:"Solaris",search:Zs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ng={browsers:K(Ik),oses:K($k)},Tg="Edge",Ag="Chromium",Rg="IE",Pg="Opera",Og="Firefox",Dg="Safari",Lk=()=>Bg({current:void 0,version:Ui.unknown()}),Bg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Tg),isChromium:s(Ag),isIE:s(Rg),isOpera:s(Pg),isFirefox:s(Og),isSafari:s(Dg)}},Ig={unknown:Lk,nu:Bg,edge:K(Tg),chromium:K(Ag),ie:K(Rg),opera:K(Pg),firefox:K(Og),safari:K(Dg)},$g="Windows",Lg="iOS",Fg="Android",Mg="Linux",Ug="macOS",zg="Solaris",Hg="FreeBSD",Vg="ChromeOS",Fk=()=>Wg({current:void 0,version:Ui.unknown()}),Wg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s($g),isiOS:s(Lg),isAndroid:s(Fg),isMacOS:s(Ug),isLinux:s(Mg),isSolaris:s(zg),isFreeBSD:s(Hg),isChromeOS:s(Vg)}},jg={unknown:Fk,nu:Wg,windows:K($g),ios:K(Lg),android:K(Fg),linux:K(Mg),macos:K(Ug),solaris:K(zg),freebsd:K(Hg),chromeos:K(Vg)},Mk={detect:(e,t,n)=>{const s=Ng.browsers(),o=Ng.oses(),r=t.bind(c=>Nk(s,c)).orThunk(()=>Tk(s,e)).fold(Ig.unknown,Ig.nu),i=Ak(o,e).fold(jg.unknown,jg.nu),a=Sk(i,r,e,n);return{browser:r,os:i,deviceType:a}}},Uk=e=>window.matchMedia(e).matches;let zk=Ko(()=>Mk.detect(navigator.userAgent,b.from(navigator.userAgentData),Uk));const yo=()=>zk(),Hk=navigator.userAgent,Hu=yo(),Es=Hu.browser,xs=Hu.os,Go=Hu.deviceType,Vk=Hk.indexOf("Windows Phone")!==-1,et={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Es.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Es.isIE(),windowsPhone:Vk,browser:{current:Es.current,version:Es.version,isChromium:Es.isChromium,isEdge:Es.isEdge,isFirefox:Es.isFirefox,isIE:Es.isIE,isOpera:Es.isOpera,isSafari:Es.isSafari},os:{current:xs.current,version:xs.version,isAndroid:xs.isAndroid,isChromeOS:xs.isChromeOS,isFreeBSD:xs.isFreeBSD,isiOS:xs.isiOS,isLinux:xs.isLinux,isMacOS:xs.isMacOS,isSolaris:xs.isSolaris,isWindows:xs.isWindows},deviceType:{isDesktop:Go.isDesktop,isiPad:Go.isiPad,isiPhone:Go.isiPhone,isPhone:Go.isPhone,isTablet:Go.isTablet,isTouch:Go.isTouch,isWebView:Go.isWebView}},Wk=/^\s*|\s*$/g,qg=e=>e==null?"":(""+e).replace(Wk,""),Kg=(e,t)=>t?t==="array"&&Lu(e)?!0:typeof e===t:e!==void 0,jk=(e,t,n)=>{let s;for(e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},s=e.length;s--;)n[e[s]]={};return n},qk=Fe,Kk=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Fe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Gg=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Mi(e,(o,r)=>{if(t.call(s,o,r,n)===!1)return!1;Gg(o,t,n,s)}))},G={trim:qg,isArray:Lu,is:Kg,toArray:xk,makeMap:jk,each:Mi,map:Fu,grep:Ur,inArray:vg,hasOwn:qk,extend:Kk,walk:Gg,resolve:(e,t)=>{let n,s;for(t=t||window,e=e.split("."),n=0,s=e.length;n<s&&(t=t[e[n]],!!t);n++);return t},explode:(e,t)=>!e||Kg(e,"array")?e:Fu(e.split(t||","),qg),_addCacheSuffix:e=>{const t=et.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Hr=(e,t,n=Ii)=>e.exists(s=>n(s,t)),Gk=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},En=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),Yk=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),Vu=(e,t)=>e?b.some(t):b.none();typeof window!="undefined"||Function("return this;")();const Yg=8,Xg=9,Qg=11,zi=1,Zg=3,Ct=e=>e.dom.nodeName.toLowerCase(),Jg=e=>e.dom.nodeType,ol=e=>t=>Jg(t)===e,Xk=e=>Jg(e)===Yg||Ct(e)==="#comment",Kn=ol(zi),In=ol(Zg),Qk=ol(Xg),Zk=ol(Qg),Jk=e=>t=>Kn(t)&&Ct(t)===e,eh=(e,t,n)=>{if(be(n)||bs(n)||yn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},fn=(e,t,n)=>{eh(e.dom,t,n)},Ss=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{eh(n,o,s)})},$n=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},rl=(e,t)=>b.from($n(e,t)),il=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Gn=(e,t)=>{e.dom.removeAttribute(t)},eN=e=>{const t=e.dom.attributes;return t==null||t.length===0},th=e=>Q(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Wu=(e,t)=>{const n=$n(e,t);return n===void 0||n===""?[]:n.split(" ")},tN=(e,t,n)=>{const o=Wu(e,t).concat([n]);return fn(e,t,o.join(" ")),!0},nN=(e,t,n)=>{const s=H(Wu(e,t),o=>o!==n);return s.length>0?fn(e,t,s.join(" ")):Gn(e,t),!1},Hi=e=>e.dom.classList!==void 0,nh=e=>Wu(e,"class"),sh=(e,t)=>tN(e,"class",t),oh=(e,t)=>nN(e,"class",t),sN=(e,t)=>R(nh(e),t)?oh(e,t):sh(e,t),Vi=(e,t)=>{Hi(e)?e.dom.classList.add(t):sh(e,t)},rh=e=>{(Hi(e)?e.dom.classList:nh(e)).length===0&&Gn(e,"class")},ih=(e,t)=>{Hi(e)?e.dom.classList.remove(t):oh(e,t),rh(e)},oN=(e,t)=>{const n=Hi(e)?e.dom.classList.toggle(t):sN(e,t);return rh(e),n},ju=(e,t)=>Hi(e)&&e.dom.classList.contains(t),Wi=e=>e.style!==void 0&&Ye(e.style.getPropertyValue),rN=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return ji(s.childNodes[0])},iN=(e,t)=>{const s=(t||document).createElement(e);return ji(s)},aN=(e,t)=>{const s=(t||document).createTextNode(e);return ji(s)},ji=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},w={fromHtml:rN,fromTag:iN,fromText:aN,fromDom:ji,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(ji)},ah=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},Js=(e,t)=>{const n=e.dom;if(n.nodeType!==zi)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},lh=e=>e.nodeType!==zi&&e.nodeType!==Xg&&e.nodeType!==Qg||e.childElementCount===0,lN=(e,t)=>{const n=t===void 0?document:t.dom;return lh(n)?[]:U(n.querySelectorAll(e),w.fromDom)},cN=(e,t)=>{const n=t===void 0?document:t.dom;return lh(n)?b.none():b.from(n.querySelector(e)).map(w.fromDom)},tt=(e,t)=>e.dom===t.dom,eo=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},ch=e=>w.fromDom(e.dom.ownerDocument),vo=e=>Qk(e)?e:ch(e),uN=e=>w.fromDom(vo(e).dom.documentElement),uh=e=>w.fromDom(vo(e).dom.defaultView),Yn=e=>b.from(e.dom.parentNode).map(w.fromDom),fN=e=>b.from(e.dom.parentElement).map(w.fromDom),dN=(e,t)=>{const n=Ye(t)?t:pt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=w.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},mN=e=>{const t=n=>H(n,s=>!tt(e,s));return Yn(e).map(Yt).map(t).getOr([])},Yo=e=>b.from(e.dom.previousSibling).map(w.fromDom),qi=e=>b.from(e.dom.nextSibling).map(w.fromDom),fh=e=>st(ah(e,Yo)),dh=e=>ah(e,qi),Yt=e=>U(e.dom.childNodes,w.fromDom),al=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(w.fromDom)},mh=e=>al(e,0),qu=e=>al(e,e.dom.childNodes.length-1),ph=e=>e.dom.childNodes.length,pN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return w.fromDom(t)},gh=e=>Zk(e)&&Ne(e.dom.host),hh=Ye(Element.prototype.attachShadow)&&Ye(Node.prototype.getRootNode),gN=K(hh),Xo=hh?e=>w.fromDom(e.dom.getRootNode()):vo,Ku=e=>gh(e)?e:pN(vo(e)),hN=e=>{const t=Xo(e);return gh(t)?b.some(t):b.none()},bN=e=>w.fromDom(e.dom.host),bh=e=>{if(gN()&&Ne(e.target)){const t=w.fromDom(e.target);if(Kn(t)&&CN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ut(n)}}return b.from(e.target)},CN=e=>Ne(e.dom.shadowRoot),Vr=e=>{const t=In(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return hN(w.fromDom(t)).fold(()=>n.body.contains(t),_t(Vr,bN))},Ch=(e,t,n)=>{if(!be(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Wi(e)&&e.style.setProperty(t,n)},yN=(e,t)=>{Wi(e)&&e.style.removeProperty(t)},yh=(e,t,n)=>{const s=e.dom;Ch(s,t,n)},ll=(e,t)=>{const n=e.dom;bt(t,(s,o)=>{Ch(n,o,s)})},ws=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Vr(e)?vh(n,t):o},vh=(e,t)=>Wi(e)?e.style.getPropertyValue(t):"",cl=(e,t)=>{const n=e.dom,s=vh(n,t);return b.from(s).filter(o=>o.length>0)},Eh=e=>{const t={},n=e.dom;if(Wi(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},xh=(e,t)=>{const n=e.dom;yN(n,t),Hr(rl(e,"style").map(zr),"")&&Gn(e,"style")},vN=e=>e.dom.offsetWidth,Xn=(e,t)=>{Yn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Eo=(e,t)=>{qi(e).fold(()=>{Yn(e).each(o=>{It(o,t)})},s=>{Xn(s,t)})},Sh=(e,t)=>{mh(e).fold(()=>{It(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},It=(e,t)=>{e.dom.appendChild(t.dom)},EN=(e,t)=>{Xn(e,t),It(t,e)},xN=(e,t)=>{A(t,(n,s)=>{const o=s===0?e:t[s-1];Eo(o,n)})},Qo=(e,t)=>{A(t,n=>{It(e,n)})},Ki=e=>{e.dom.textContent="",A(Yt(e),t=>{Tt(t)})},Tt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},xo=e=>{const t=Yt(e);t.length>0&&xN(e,t),Tt(e)},SN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Yt(w.fromDom(s))},wN=e=>U(e,w.fromDom),wh=e=>e.dom.innerHTML,Gu=(e,t)=>{const s=ch(e).dom,o=w.fromDom(s.createDocumentFragment()),r=SN(t,s);Qo(o,r),Ki(e),It(e,o)},_N=e=>{const t=w.fromTag("div"),n=w.fromDom(e.dom.cloneNode(!0));return It(t,n),wh(t)},kN=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),NN=e=>{const t=w.fromDom(bh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Ot(s,n);return kN(t,e.clientX,e.clientY,n,s,o,e)},TN=(e,t)=>n=>{e(n)&&t(NN(n))},AN=(e,t,n,s,o)=>{const r=TN(n,s);return e.dom.addEventListener(t,r,o),{unbind:re(PN,e,t,r,o)}},RN=(e,t,n,s)=>AN(e,t,n,s,!1),PN=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},_h=(e,t)=>({left:e,top:t,translate:(s,o)=>_h(e+s,t+o)}),Wr=_h,ON=e=>{const t=e.getBoundingClientRect();return Wr(t.left,t.top)},ul=(e,t)=>e!==void 0?e:t!==void 0?t:0,DN=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Wr(n.offsetLeft,n.offsetTop);const r=ul(s==null?void 0:s.pageYOffset,o.scrollTop),i=ul(s==null?void 0:s.pageXOffset,o.scrollLeft),a=ul(o.clientTop,n.clientTop),c=ul(o.clientLeft,n.clientLeft);return Yu(e).translate(i-c,r-a)},Yu=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Wr(s.offsetLeft,s.offsetTop):Vr(e)?ON(t):Wr(0,0)},Xu=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Wr(n,s)},kh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Nh=(e,t)=>{yo().browser.isSafari()&&Ye(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},BN=e=>{const t=e===void 0?window:e;return yo().browser.isFirefox()?b.none():b.from(t.visualViewport)},Th=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Ah=e=>{const t=e===void 0?window:e,n=t.document,s=Xu(w.fromDom(n));return BN(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return Th(s.left,s.top,r,i)},o=>Th(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},Zo=e=>t=>!!t&&t.nodeType===e,fl=e=>!!e&&!Object.getPrototypeOf(e),Ee=Zo(1),Qn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return R(t,s)}return!1}},dl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Ee(s))for(let o=0;o<n.length;o++){const r=s.ownerDocument.defaultView.getComputedStyle(s,null);if((r?r.getPropertyValue(e):null)===n[o])return!0}return!1}},Rh=e=>t=>Ee(t)&&t.hasAttribute(e),IN=(e,t)=>n=>Ee(n)&&n.getAttribute(e)===t,Jo=e=>Ee(e)&&e.hasAttribute("data-mce-bogus"),$N=e=>Ee(e)&&e.getAttribute("data-mce-bogus")==="all",Gi=e=>Ee(e)&&e.tagName==="TABLE",Ph=e=>t=>!!(Ee(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Qu=Qn(["textarea","input"]),ne=Zo(3),LN=Zo(4),FN=Zo(7),Oh=Zo(8),Zu=Zo(9),Ju=Zo(11),Dt=Qn(["br"]),Dh=Qn(["img"]),to=Ph("true"),St=Ph("false"),ml=Qn(["td","th"]),_s=Qn(["video","audio","object","embed"]),MN=yo().browser,Bh=e=>de(e,Kn),UN=e=>MN.isFirefox()&&Ct(e)==="table"?Bh(Yt(e)).filter(t=>Ct(t)==="caption").bind(t=>Bh(dh(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Ih=(e,t)=>e.children&&R(e.children,t),zN=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&ws(w.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!Ih(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!Ih(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=UN(w.fromDom(t))}return{x:s,y:o}};var $h=(e,t,n,s,o)=>e(n,s)?b.some(n):Ye(o)&&o(n)?b.none():t(n,s,o);const jr=(e,t,n)=>{let s=e.dom;const o=Ye(n)?n:pt;for(;s.parentNode;){s=s.parentNode;const r=w.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},pl=(e,t,n)=>$h((o,r)=>r(o),jr,e,t,n),HN=(e,t)=>{const n=e.dom;return n.parentNode?VN(w.fromDom(n.parentNode),s=>!tt(e,s)&&t(s)):b.none()},VN=(e,t)=>{const n=o=>t(w.fromDom(o));return de(e.dom.childNodes,n).map(w.fromDom)},WN=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=w.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},Yi=(e,t,n)=>jr(e,s=>Js(s,t),n),Xi=(e,t)=>cN(t,e),er=(e,t,n)=>$h((o,r)=>Js(o,r),Yi,e,t,n),Lh=(e,t={})=>{let n=0;const s={},o=w.fromDom(e),r=vo(o),i=t.maxLoadTime||5e3,a=v=>{t.referrerPolicy=v},c=v=>{It(Ku(o),v)},f=v=>{const E=Ku(o);Xi(E,"#"+v).each(Tt)},d=v=>lt(s,v).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=v=>new Promise((E,_)=>{let P;const z=G._addCacheSuffix(v),I=d(z);s[z]=I,I.count++;const $=(ae,se)=>{A(ae,qo),I.status=se,I.passed=[],I.failed=[],P&&(P.onload=null,P.onerror=null,P=null)},te=()=>$(I.passed,2),W=()=>$(I.failed,3),q=(ae,se)=>{ae()||(Date.now()-xe<i?setTimeout(se):W())},Z=()=>{q(()=>{const ae=e.styleSheets;let se=ae.length;for(;se--;){const je=ae[se].ownerNode;if(je&&je.id===P.id)return te(),!0}return!1},Z)};if(E&&I.passed.push(E),_&&I.failed.push(_),I.status===1)return;if(I.status===2){te();return}if(I.status===3){W();return}I.status=1;const ee=w.fromTag("link",r.dom);Ss(ee,{rel:"stylesheet",type:"text/css",id:I.id});const xe=Date.now();t.contentCssCors&&fn(ee,"crossOrigin","anonymous"),t.referrerPolicy&&fn(ee,"referrerpolicy",t.referrerPolicy),P=ee.dom,P.onload=Z,P.onerror=W,c(ee),fn(ee,"href",z)}),y=v=>Promise.allSettled(U(v,_=>p(_).then(K(_)))).then(_=>{const P=Ce(_,z=>z.status==="fulfilled");return P.fail.length>0?Promise.reject(U(P.fail,z=>z.reason)):U(P.pass,z=>z.value)}),C=v=>{const E=G._addCacheSuffix(v);lt(s,E).each(_=>{--_.count===0&&(delete s[E],f(_.id))})};return{load:p,loadAll:y,unload:C,unloadAll:v=>{A(v,E=>{C(E)})},_setReferrerPolicy:a}},Fh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Xo(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=Lh(r,s);return e.set(r,i),i})}}})();class zt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node}findSibling(t,n,s,o){let r,i;if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){if(r=t[s],r)return r;for(i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n,s,o){let r,i,a;if(t){if(r=t[s],this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(a=r[n];a;a=a[n])if(!a[n])return a}return r}if(i=t.parentNode,i&&i!==this.rootNode)return i}}}const jN=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],qN=["td","th"],KN=["thead","tbody","tfoot"],GN=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],YN=["h1","h2","h3","h4","h5","h6"],XN=["li","dd","dt"],QN=["ul","ol","dl"],ZN=["pre","script","textarea","style"],So=e=>{let t;return n=>(t=t||vn(e,it),Fe(t,Ct(n)))},JN=So(YN),ks=So(jN),eT=e=>Ct(e)==="table",ef=e=>Kn(e)&&!ks(e),qr=e=>Kn(e)&&Ct(e)==="br",Mh=So(GN),tf=So(QN),Qi=So(XN),tT=So(KN),gl=So(qN),hl=So(ZN),nT=(e,t,n)=>Yi(e,t,n).isSome(),Zi="\uFEFF",Xt="\xA0",Uh=e=>e===Zi,sT=e=>e.replace(/\uFEFF/g,""),Kt=Zi,bl=Uh,wo=sT,oT=Ee,Kr=ne,Gr=e=>(Kr(e)&&(e=e.parentNode),oT(e)&&e.hasAttribute("data-mce-caret")),Yr=e=>Kr(e)&&bl(e.data),Ln=e=>Gr(e)||Yr(e),zh=e=>e.firstChild!==e.lastChild||!Dt(e.firstChild),rT=(e,t)=>{const s=e.ownerDocument.createTextNode(Kt),o=e.parentNode;if(t){const r=e.previousSibling;if(Kr(r)){if(Ln(r))return r;if(yl(r))return r.splitText(r.data.length-1)}o.insertBefore(s,e)}else{const r=e.nextSibling;if(Kr(r)){if(Ln(r))return r;if(Cl(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(s,e.nextSibling):o.appendChild(s)}return s},nf=e=>{const t=e.container();return ne(t)?t.data.charAt(e.offset())===Kt||e.isAtStart()&&Yr(t.previousSibling):!1},sf=e=>{const t=e.container();return ne(t)?t.data.charAt(e.offset()-1)===Kt||e.isAtEnd()&&Yr(t.nextSibling):!1},iT=()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},aT=(e,t,n)=>{const o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(iT());const r=t.parentNode;return n?r.insertBefore(o,t):t.nextSibling?r.insertBefore(o,t.nextSibling):r.appendChild(o),o},Cl=e=>Kr(e)&&e.data[0]===Kt,yl=e=>Kr(e)&&e.data[e.data.length-1]===Kt,lT=e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];Jo(n)&&n.parentNode.removeChild(n)},of=e=>e&&e.hasAttribute("data-mce-caret")?(lT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Hh=e=>Gr(e.startContainer),Vh=to,cT=St,uT=Dt,fT=ne,dT=Qn(["script","style","textarea"]),Wh=Qn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),mT=Qn(["table"]),pT=Ln,ts=e=>pT(e)?!1:fT(e)?!dT(e.parentNode):Wh(e)||uT(e)||mT(e)||rf(e),gT=e=>Ee(e)&&e.getAttribute("unselectable")==="true",rf=e=>gT(e)===!1&&cT(e),hT=(e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(rf(e))return!1;if(Vh(e))return!0}return!0},bT=e=>rf(e)?Q(gt(e.getElementsByTagName("*")),(t,n)=>t||Vh(n),!1)!==!0:!1,CT=e=>Wh(e)||bT(e),jh=(e,t)=>ts(e)&&hT(e,t),yT=/^[ \t\r\n]*$/,tr=e=>yT.test(e),vT=e=>" \f	\v".indexOf(e)!==-1,qh=e=>e===`
`||e==="\r",ET=(e,t)=>t<e.length&&t>=0?qh(e[t]):!1,Kh=(e,t=4,n=!0,s=!0)=>{const o=Dk(" ",t),r=e.replace(/\t/g,o);return Q(r,(a,c)=>vT(c)||c===Xt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||ET(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Xt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:qh(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},xT=(e,t)=>{const n=w.fromDom(t),s=w.fromDom(e);return nT(s,"pre,code",re(tt,n))},ST=(e,t)=>ne(e)&&tr(e.data)&&xT(e,t)===!1,wT=e=>Ee(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),vl=(e,t)=>ts(e)&&ST(e,t)===!1||wT(e)||_T(e),_T=Rh("data-mce-bookmark"),kT=Rh("data-mce-bogus"),NT=IN("data-mce-bogus","all"),TT=(e,t)=>{let n=0;if(vl(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new zt(s,e);do{if(t){if(NT(s)){s=o.next(!0);continue}if(kT(s)){s=o.next();continue}}if(Dt(s)){n++,s=o.next();continue}if(vl(s,e))return!1;s=o.next()}while(s);return n<=1}},Ht=(e,t=!0)=>TT(e.dom,t),AT=e=>e.nodeName.toLowerCase()==="span",Gh=(e,t)=>Ne(e)&&(vl(e,t)||ef(w.fromDom(e))),RT=(e,t)=>{const n=new zt(e,t).prev(!1),s=new zt(e,t).next(!1),o=Pt(n)||Gh(n,t),r=Pt(s)||Gh(s,t);return o&&r},Yh=e=>AT(e)&&e.getAttribute("data-mce-type")==="bookmark",PT=(e,t)=>ne(e)&&e.data.length>0&&RT(e,t),OT=e=>Ee(e)?e.childNodes.length>0:!1,DT=e=>Ju(e)||Zu(e),af=(e,t,n)=>{const s=n||t;if(Ee(t)&&Yh(t))return t;const o=t.childNodes;for(let r=o.length-1;r>=0;r--)af(e,o[r],s);if(Ee(t)){const r=t.childNodes;r.length===1&&Yh(r[0])&&t.parentNode.insertBefore(r[0],t)}return!DT(t)&&!vl(t,s)&&!OT(t)&&!PT(t,s)&&e.remove(t),t},BT=G.makeMap,El=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IT=/[<>&\"\']/g,$T=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,LT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},nr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},FT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},MT=e=>{const t=w.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Xh=(e,t)=>{let n,s,o;const r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)s=String.fromCharCode(parseInt(e[n],t)),nr[s]||(o="&"+e[n+1]+";",r[s]=o,r[o]=s);return r}},lf=Xh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qh=(e,t)=>e.replace(t?El:xl,n=>nr[n]||n),UT=e=>(""+e).replace(IT,t=>nr[t]||t),Zh=(e,t)=>e.replace(t?El:xl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":nr[n]||"&#"+n.charCodeAt(0)+";"),cf=(e,t,n)=>(n=n||lf,e.replace(t?El:xl,s=>nr[s]||n[s]||s)),_o={encodeRaw:Qh,encodeAllRaw:UT,encodeNumeric:Zh,encodeNamed:cf,getEncodeFunc:(e,t)=>{const n=Xh(t)||lf,s=(i,a)=>i.replace(a?El:xl,c=>nr[c]!==void 0?nr[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>cf(i,a,n),r=BT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:cf:r.numeric?Zh:Qh},decode:e=>e.replace($T,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):LT[n]||String.fromCharCode(n)):FT[t]||lf[t]||MT(t))},ko={},zT={},Xr=G.makeMap,tn=G.each,uf=G.extend,Jh=G.explode,HT=G.inArray,Gt=(e,t)=>(e=G.trim(e),e?e.split(t||" "):[]),VT=e=>{const t={};let n,s,o,r,i,a;const c=(d,p="",y="")=>{const C=Gt(y),S=Gt(d);let v=S.length;for(;v--;){const E=Gt([n,p].join(" "));t[S[v]]={attributes:vn(E,()=>({})),attributesOrder:E,children:vn(C,K(zT))}}},f=(d,p)=>{const y=Gt(d),C=Gt(p);let S=y.length;for(;S--;){const v=t[y[S]];for(let E=0,_=C.length;E<_;E++)v.attributes[C[E]]={},v.attributesOrder.push(C[E])}};return ko[e]?ko[e]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",o=[o,a].join(" "),tn(Gt(a),d=>{c(d,"",o)}),i="center dir isindex noframes",s=[s,i].join(" "),r=[s,o].join(" "),tn(Gt(i),d=>{c(d,"",r)})),r=r||[s,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),c("address dt dd div caption","",r),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",r),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",r),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",r),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",r),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),c("param","name value"),c("map","name",[r,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",r),c("th","colspan rowspan headers scope abbr",r),c("form","accept-charset action autocomplete enctype method name novalidate target",r),c("fieldset","disabled form name",[r,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[r,"li"].join(" ")),c("noscript","",r),e!=="html4"&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",r),c("mark rt rp summary bdi","",o),c("canvas","width height",r),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",r),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[r,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",r),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[r,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),e!=="html4"&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("img","loading"),f("iframe","sandbox seamless allowfullscreen loading")),e!=="html4"&&A([t.video,t.audio],d=>{delete d.children.audio,delete d.children.video}),tn(Gt("a form meter progress dfn"),d=>{t[d]&&delete t[d].children[d]}),delete t.caption.children.table,delete t.script,ko[e]=t,t)},ff=(e,t)=>{let n;return e&&(n={},typeof e=="string"&&(e={"*":e}),tn(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Xr(s,/[, ]/):Jh(s,/[, ]/)})),n},No=e=>{var t;const n={},s={};let o=[];const r={},i={},a=(Y,he,Ae)=>{let Re=e[Y];return Re?Re=Xr(Re,/[, ]/,Xr(Re.toUpperCase(),/[, ]/)):(Re=ko[Y],Re||(Re=Xr(he," ",Xr(he.toUpperCase()," ")),Re=uf(Re,Ae),ko[Y]=Re)),Re};e=e||{};const c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=VT(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=ff(e.valid_styles),p=ff(e.invalid_styles,"map"),y=ff(e.valid_classes,"map"),C=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),S=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),E=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_="td th iframe video audio object script code",P=a("non_empty_elements",_+" pre",v),z=a("move_caret_before_on_enter_elements",_+" table",v),I=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),$=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",I),te=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");tn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Y=>{i[Y]=new RegExp("</"+Y+"[^>]*>","gi")});const W=Y=>new RegExp("^"+Y.replace(/([?+*])/g,".$1")+"$"),q=Y=>{let he,Ae,Re,qe,ze,Le,vt,Qt,Zt,Bt,Ft,Jt,At,hn,Fo,Us,zs,us;const _r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Mo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Hn=/[*?+]/;if(Y){const fs=Gt(Y,",");for(n["@"]&&(Us=n["@"].attributes,zs=n["@"].attributesOrder),he=0,Ae=fs.length;he<Ae;he++)if(ze=_r.exec(fs[he]),ze){if(hn=ze[1],Zt=ze[2],Fo=ze[3],Qt=ze[5],Jt={},At=[],Le={attributes:Jt,attributesOrder:At},hn==="#"&&(Le.paddEmpty=!0),hn==="-"&&(Le.removeEmpty=!0),ze[4]==="!"&&(Le.removeEmptyAttrs=!0),Us&&(bt(Us,(kr,ds)=>{Jt[ds]=kr}),At.push.apply(At,zs)),Qt){for(Qt=Gt(Qt,"|"),Re=0,qe=Qt.length;Re<qe;Re++)if(ze=Mo.exec(Qt[Re]),ze){if(vt={},Ft=ze[1],Bt=ze[2].replace(/[\\:]:/g,":"),hn=ze[3],us=ze[4],Ft==="!"&&(Le.attributesRequired=Le.attributesRequired||[],Le.attributesRequired.push(Bt),vt.required=!0),Ft==="-"){delete Jt[Bt],At.splice(HT(At,Bt),1);continue}hn&&(hn==="="&&(Le.attributesDefault=Le.attributesDefault||[],Le.attributesDefault.push({name:Bt,value:us}),vt.defaultValue=us),hn==="~"&&(Le.attributesForced=Le.attributesForced||[],Le.attributesForced.push({name:Bt,value:us}),vt.forcedValue=us),hn==="<"&&(vt.validValues=Xr(us,"?"))),Hn.test(Bt)?(Le.attributePatterns=Le.attributePatterns||[],vt.pattern=W(Bt),Le.attributePatterns.push(vt)):(Jt[Bt]||At.push(Bt),Jt[Bt]=vt)}}!Us&&Zt==="@"&&(Us=Jt,zs=At),Fo&&(Le.outputName=Zt,n[Fo]=Le),Hn.test(Zt)?(Le.pattern=W(Zt),o.push(Le)):n[Zt]=Le}}},Z=Y=>{o=[],A(es(n),he=>{delete n[he]}),q(Y),tn(f,(he,Ae)=>{s[Ae]=he.children})},ee=Y=>{const he=/^(~)?(.+)$/;Y&&(ko.text_block_elements=ko.block_elements=null,tn(Gt(Y,","),Ae=>{const Re=he.exec(Ae),qe=Re[1]==="~",ze=qe?"span":"div",Le=Re[2];if(s[Le]=s[ze],r[Le]=ze,qe||($[Le.toUpperCase()]={},$[Le]={}),!n[Le]){let vt=n[ze];vt=uf({},vt),delete vt.removeEmptyAttrs,delete vt.removeEmpty,n[Le]=vt}tn(s,(vt,Qt)=>{vt[ze]&&(s[Qt]=vt=uf({},s[Qt]),vt[Le]=vt[ze])})}))},xe=Y=>{const he=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;ko[c]=null,Y&&tn(Gt(Y,","),Ae=>{const Re=he.exec(Ae);let qe,ze;Re&&(ze=Re[1],ze?qe=s[Re[2]]:qe=s[Re[2]]={"#comment":{}},qe=s[Re[2]],tn(Gt(Re[3],"|"),Le=>{ze==="-"?delete qe[Le]:qe[Le]={}}))})},ae=Y=>{let he=n[Y],Ae;if(he)return he;for(Ae=o.length;Ae--;)if(he=o[Ae],he.pattern.test(Y))return he};e.valid_elements?Z(e.valid_elements):(tn(f,(Y,he)=>{n[he]={attributes:Y.attributes,attributesOrder:Y.attributesOrder},s[he]=Y.children}),tn(Gt("strong/b em/i"),Y=>{const he=Gt(Y,"/");n[he[1]].outputName=he[0]}),tn(Gt("ol ul sub sup blockquote span font a table tbody strong em b i"),Y=>{n[Y]&&(n[Y].removeEmpty=!0)}),tn(Gt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Y=>{n[Y].paddEmpty=!0}),tn(Gt("span"),Y=>{n[Y].removeEmptyAttrs=!0})),ee(e.custom_elements),xe(e.valid_children),q(e.extended_valid_elements),xe("+ol[ul|ol],+ul[ul|ol]"),tn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Y,he)=>{n[he]&&(n[he].parentsRequired=Gt(Y))}),e.invalid_elements&&tn(Jh(e.invalid_elements),Y=>{n[Y]&&delete n[Y]}),ae("span")||q("span[!data-mce-type|*]");const se=K(d),Ge=K(p),je=K(y),ct=K(E),qt=K($),J=K(I),pe=K(te),Me=K(Object.seal(v)),De=K(S),me=K(P),le=K(z),Se=K(C),Be=K(Object.seal(i)),yt=(Y,he)=>{const Ae=s[Y.toLowerCase()];return!!(Ae&&Ae[he.toLowerCase()])},Lt=(Y,he)=>{let Ae,Re;const qe=ae(Y);if(qe)if(he){if(qe.attributes[he])return!0;if(Ae=qe.attributePatterns,Ae){for(Re=Ae.length;Re--;)if(Ae[Re].pattern.test(he))return!0}}else return!0;return!1},wr=K(r);return{type:c,children:s,elements:n,getValidStyles:se,getValidClasses:je,getBlockElements:qt,getInvalidStyles:Ge,getVoidElements:Me,getTextBlockElements:J,getTextInlineElements:pe,getBoolAttrs:ct,getElementRule:ae,getSelfClosingElements:De,getNonEmptyElements:me,getMoveCaretBeforeOnEnterElements:le,getWhitespaceElements:Se,getSpecialElements:Be,isValidChild:yt,isValid:Lt,getCustomElements:wr,addValidElements:q,setValidElements:Z,addCustomElements:ee,addValidChildren:xe}},df=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/;let r;const i={};let a,c;const f=Zi;e=e||{},t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+f).split(" ");for(r=0;r<d.length;r++)i[d[r]]=f+r,i[f+r]=d[r];const p={parse:y=>{const C={};let S,v,E,_;const P=e.url_converter,z=e.url_converter_scope||p,I=(ae,se,Ge)=>{const je=C[ae+"-top"+se];if(!je)return;const ct=C[ae+"-right"+se];if(!ct)return;const qt=C[ae+"-bottom"+se];if(!qt)return;const J=C[ae+"-left"+se];if(!J)return;const pe=[je,ct,qt,J];for(r=pe.length-1;r--&&pe[r]===pe[r+1];);r>-1&&Ge||(C[ae+se]=r===-1?pe[0]:pe.join(" "),delete C[ae+"-top"+se],delete C[ae+"-right"+se],delete C[ae+"-bottom"+se],delete C[ae+"-left"+se])},$=ae=>{let se=C[ae],Ge;if(!!se){for(se=se.split(" "),Ge=se.length;Ge--;)if(se[Ge]!==se[0])return!1;return C[ae]=se[0],!0}},te=(ae,se,Ge,je)=>{!$(se)||!$(Ge)||!$(je)||(C[ae]=C[se]+" "+C[Ge]+" "+C[je],delete C[se],delete C[Ge],delete C[je])},W=ae=>(_=!0,i[ae]),q=(ae,se)=>(_&&(ae=ae.replace(/\uFEFF[0-9]/g,Ge=>i[Ge])),se||(ae=ae.replace(/\\([\'\";:])/g,"$1")),ae),Z=ae=>String.fromCharCode(parseInt(ae.slice(1),16)),ee=ae=>ae.replace(/\\[0-9a-f]+/gi,Z),xe=(ae,se,Ge,je,ct,qt)=>{if(ct=ct||qt,ct)return ct=q(ct),"'"+ct.replace(/\'/g,"\\'")+"'";if(se=q(se||Ge||je),!e.allow_script_urls){const J=se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(J)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(J))return""}return P&&(se=P.call(z,se,"style")),"url('"+se.replace(/\'/g,"\\'")+"')"};if(y){for(y=y.replace(/[\u0000-\u001F]/g,""),y=y.replace(/\\[\"\';:\uFEFF]/g,W).replace(/\"[^\"]+\"|\'[^\']+\'/g,ae=>ae.replace(/[;:]/g,W));S=s.exec(y);)if(s.lastIndex=S.index+S[0].length,v=S[1].replace(o,"").toLowerCase(),E=S[2].replace(o,""),v&&E){if(v=ee(v),E=ee(E),v.indexOf(f)!==-1||v.indexOf('"')!==-1||!e.allow_script_urls&&(v==="behavior"||/expression\s*\(|\/\*|\*\//.test(E)))continue;v==="font-weight"&&E==="700"?E="bold":(v==="color"||v==="background-color")&&(E=E.toLowerCase()),E=E.replace(n,xe),C[v]=_?q(E,!0):E}I("border","",!0),I("border","-width"),I("border","-color"),I("border","-style"),I("padding",""),I("margin",""),te("border","border-width","border-style","border-color"),C.border==="medium none"&&delete C.border,C["border-image"]==="none"&&delete C["border-image"]}return C},serialize:(y,C)=>{let S="";const v=_=>{let P;const z=a[_];if(z)for(let I=0,$=z.length;I<$;I++)_=z[I],P=y[_],P&&(S+=(S.length>0?" ":"")+_+": "+P+";")},E=(_,P)=>{let z=c["*"];return z&&z[_]?!1:(z=c[P],!(z&&z[_]))};return C&&a?(v("*"),v(C)):bt(y,(_,P)=>{_&&(!c||E(P,C))&&(S+=(S.length>0?" ":"")+P+": "+_+";")}),S}};return p},WT={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},jT=e=>e instanceof Event||Ye(e.initEvent),qT=e=>e.isDefaultPrevented===it||e.isDefaultPrevented===pt,KT=e=>Mt(e.preventDefault)||jT(e),eb=(e,t)=>{const n=t!=null?t:{};for(const s in e)Fe(WT,s)||(n[s]=e[s]);return Ne(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},mf=(e,t,n,s)=>{var o;const r=eb(t,s);return r.type=e,Mt(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),KT(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=it,Ye(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=it,Ye(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=it,r.stopPropagation()},qT(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?it:pt,r.isPropagationStopped=r.cancelBubble===!0?it:pt,r.isImmediatePropagationStopped=pt)),r},GT="mce-data-",YT=/^(?:mouse|contextmenu)|click/,pf=(e,t,n,s)=>{e.addEventListener?e.addEventListener(t,n,s||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Sl=(e,t,n,s)=>{e.removeEventListener?e.removeEventListener(t,n,s||!1):e.detachEvent&&e.detachEvent("on"+t,n)},XT=e=>Ne(e)&&YT.test(e.type),Qr=(e,t)=>{const n=mf(e.type,e,document,t);if(XT(e)&&Pt(e.pageX)&&!Pt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},QT=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{Sl(e,"DOMContentLoaded",i),Sl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():pf(e,"DOMContentLoaded",i),n.domLoaded||pf(e,"load",i)};class sr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=GT+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i,a,c,f,d,p,y;const C=window,S=E=>{r.executeHandlers(Qr(E||C.event),i)};if(!t||t.nodeType===3||t.nodeType===8)return;t[r.expando]?i=t[r.expando]:(i=r.count++,t[r.expando]=i,r.events[i]={}),o=o||t;const v=n.split(" ");for(c=v.length;c--;){if(f=v[c],p=S,d=y=!1,f==="DOMContentLoaded"&&(f="ready"),r.domLoaded&&f==="ready"&&t.readyState==="complete"){s.call(o,Qr({type:f}));continue}r.hasMouseEnterLeave||(d=r.mouseEnterLeave[f],d&&(p=E=>{const _=E.currentTarget;let P=E.relatedTarget;if(P&&_.contains)P=_.contains(P);else for(;P&&P!==_;)P=P.parentNode;P||(E=Qr(E||C.event),E.type=E.type==="mouseout"?"mouseleave":"mouseenter",E.target=_,r.executeHandlers(E,i))})),!r.hasFocusIn&&(f==="focusin"||f==="focusout")&&(y=!0,d=f==="focusin"?"focus":"blur",p=E=>{E=Qr(E||C.event),E.type=E.type==="focus"?"focusin":"focusout",r.executeHandlers(E,i)}),a=r.events[i][f],a?f==="ready"&&r.domLoaded?s(Qr({type:f})):a.push({func:s,scope:o}):(r.events[i][f]=a=[{func:s,scope:o}],a.fakeName=d,a.capture=y,a.nativeHandler=p,f==="ready"?QT(t,p,r):pf(t,d||f,p,y))}return t=a=null,s}unbind(t,n,s){let o,r,i,a,c;if(!t||t.nodeType===3||t.nodeType===8)return this;const f=t[this.expando];if(f){if(c=this.events[f],n){const d=n.split(" ");for(r=d.length;r--;)if(a=d[r],o=c[a],o){if(s){for(i=o.length;i--;)if(o[i].func===s){const p=o.nativeHandler,y=o.fakeName,C=o.capture;o=o.slice(0,i).concat(o.slice(i+1)),o.nativeHandler=p,o.fakeName=y,o.capture=C,c[a]=o}}(!s||o.length===0)&&(delete c[a],Sl(t,o.fakeName||a,o.nativeHandler,o.capture))}}else bt(c,(d,p)=>{Sl(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(a in c)if(Fe(c,a))return this;delete this.events[f];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){let o;if(!t||t.nodeType===3||t.nodeType===8)return this;const r=Qr({type:n,target:t},s);do o=t[this.expando],o&&this.executeHandlers(r,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!r.isPropagationStopped());return this}clean(t){let n,s;if(!t||t.nodeType===3||t.nodeType===8)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),s=t.getElementsByTagName("*"),n=s.length;n--;)t=s[n],t[this.expando]&&this.unbind(t);return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}sr.Event=new sr;const gf=G.each,ZT=G.grep,hf="data-mce-style",Ji=(e,t,n)=>{Mt(n)||n===""?Gn(e,t):fn(e,t,n)},JT=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=w.fromDom(i);Ye(t.url_converter)&&Ne(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),a,c,i[0]));const d="data-mce-"+c;Ji(f,d,a),Ji(f,c,a)},get:(i,a)=>{const c=w.fromDom(i);return $n(c,"data-mce-"+a)||$n(c,a)}},r={style:{set:(i,a)=>{const c=w.fromDom(i);if(ft(a)){ll(c,a);return}s&&Ji(c,hf,a),Gn(c,"style"),be(a)&&ll(c,e.parse(a))},get:i=>{const a=w.fromDom(i),c=$n(a,hf)||$n(a,"style");return e.serialize(e.parse(c),Ct(a))}}};return s&&(r.href=r.src=o),r},eA=(e,t)=>{const n=$n(t,"style"),s=e.serialize(e.parse(n),Ct(t));Ji(t,hf,s)},Zr=(e,t)=>{let n=0,s,o;if(e)for(s=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,!(t&&o===3&&(o===s||!e.nodeValue.length))&&(n++,s=o);return n},tA=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),tb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),ot=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=Fh.forElement(w.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],d=t.schema?t.schema:No({}),p=df({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),y=t.ownEvents?new sr:sr.Event,C=d.getBlockElements(),S=N=>be(N)?Fe(C,N):Ee(N)&&Fe(C,N.nodeName),v=N=>N&&e&&be(N)?e.getElementById(N):N,E=N=>{const D=v(N);return Ne(D)?w.fromDom(D):null},_=(N,D,j)=>{let V;const ye=E(N);if(Ne(ye)&&Kn(ye)){const We=iu[D];We&&We.get?V=We.get(ye.dom,D):V=$n(ye,D)}return Ne(V)?V:j!=null?j:""},P=N=>{const D=v(N);return Mt(D)?[]:D.attributes},z=(N,D,j)=>{Me(N,V=>{if(Ee(V)){const ye=w.fromDom(V);j===""&&(j=null);const We=$n(ye,D),He=iu[D];He&&He.set?He.set(ye.dom,j,D):Ji(ye,D,j),We!==j&&t.onSetAttrib&&t.onSetAttrib({attrElm:ye,attrName:D,attrValue:j})}})},I=(N,D)=>N.cloneNode(D),$=()=>t.root_element||e.body,te=N=>{const D=Ah(N);return{x:D.x,y:D.y,w:D.width,h:D.height}},W=(N,D)=>zN(e.body,v(N),D),q=(N,D,j)=>{const V=(We,He)=>be(We)?We:yn(We)?Fe(tA,He)?We+"":We+"px":Li(We,V),ye=(We,He,Nn)=>{const ms=tb(He);Mt(Nn)||Nn===""?xh(We,ms):yh(We,ms,V(Nn,ms))};Me(N,We=>{const He=w.fromDom(We);be(D)?ye(He,D,j):bt(D,(Nn,ms)=>{ye(He,ms,Nn)}),t.update_styles&&eA(p,He)})},Z=(N,D)=>{q(N,D)},ee=(N,D,j)=>{const V=v(N);if(!(Mt(V)||!Ee(V)))return j?ws(w.fromDom(V),tb(D)):(D=D.replace(/-(\D)/g,(ye,We)=>We.toUpperCase()),D==="float"&&(D="cssFloat"),V.style?V.style[D]:void 0)},xe=N=>{let D,j;const V=v(N);return D=ee(V,"width"),j=ee(V,"height"),D.indexOf("px")===-1&&(D=0),j.indexOf("px")===-1&&(j=0),{w:parseInt(D,10)||V.offsetWidth||V.clientWidth,h:parseInt(j,10)||V.offsetHeight||V.clientHeight}},ae=N=>{const D=v(N),j=W(D),V=xe(D);return{x:j.x,y:j.y,w:V.w,h:V.h}},se=(N,D)=>{if(!N)return!1;const j=Nt(N)?N:[N];return M(j,V=>Js(w.fromDom(V),D))},Ge=(N,D,j,V)=>{const ye=[];let We,He=v(N);for(V=V===void 0,j=j||($().nodeName!=="BODY"?$().parentNode:null),be(D)&&(We=D,D==="*"?D=Ee:D=Nn=>se(Nn,We));He&&!(He===j||Mt(He.nodeType)||Zu(He)||Ju(He));){if(!D||D(He))if(V)ye.push(He);else return[He];He=He.parentNode}return V?ye:null},je=(N,D,j)=>{const V=Ge(N,D,j,!1);return V&&V.length>0?V[0]:null},ct=(N,D,j)=>{let V=D;if(N){for(be(D)&&(V=ye=>se(ye,D)),N=N[j];N;N=N[j])if(Ye(V)&&V(N))return N}return null},qt=(N,D)=>ct(N,D,"nextSibling"),J=(N,D)=>ct(N,D,"previousSibling"),pe=(N,D)=>{var j,V;const ye=(V=(j=v(D))!==null&&j!==void 0?j:t.root_element)!==null&&V!==void 0?V:e;return gt(ye.querySelectorAll(N))},Me=function(N,D,j){const V=j!=null?j:this,ye=be(N)?v(N):N;if(!ye)return!1;if(Nt(ye)&&(ye.length||ye.length===0)){const We=[];return gf(ye,(He,Nn)=>{He&&We.push(D.call(V,be(He)?v(He):He,Nn))}),We}else return D.call(V,ye)},De=(N,D)=>{Me(N,j=>{bt(D,(V,ye)=>{z(j,ye,V)})})},me=(N,D)=>{Me(N,j=>{const V=w.fromDom(j);Gu(V,D)})},le=(N,D,j,V,ye)=>Me(N,We=>{const He=be(D)?e.createElement(D):D;return Ne(j)&&De(He,j),V&&(!be(V)&&V.nodeType?He.appendChild(V):be(V)&&me(He,V)),ye?He:We.appendChild(He)}),Se=(N,D,j)=>le(e.createElement(N),N,D,j,!0),Be=_o.decode,yt=_o.encodeAllRaw,Lt=(N,D,j="")=>{let V="",ye;V+="<"+N;for(ye in D)Mr(D,ye)&&(V+=" "+ye+'="'+yt(D[ye])+'"');return sl(j)&&Fe(d.getVoidElements(),N)?V+" />":V+">"+j+"</"+N+">"},wr=N=>{let D;const j=e.createElement("div"),V=e.createDocumentFragment();for(V.appendChild(j),N&&(j.innerHTML=N);D=j.firstChild;)V.appendChild(D);return V.removeChild(j),V},Y=(N,D)=>Me(N,j=>{const V=w.fromDom(j);return D&&A(Yt(V),ye=>{In(ye)&&ye.dom.length===0?Tt(ye):Xn(V,ye)}),Tt(V),V.dom}),he=N=>Me(N,D=>{const j=D.attributes;for(let V=j.length-1;V>=0;V--)D.removeAttributeNode(j.item(V))}),Ae=N=>p.parse(N),Re=(N,D)=>p.serialize(N,D),qe=N=>{let D,j;if(uo!==ot.DOM&&e===document){if(n[N])return;n[N]=!0}j=e.getElementById("mceDefaultStyles"),j||(j=e.createElement("style"),j.id="mceDefaultStyles",j.type="text/css",D=e.getElementsByTagName("head")[0],D.firstChild?D.insertBefore(j,D.firstChild):D.appendChild(j)),j.styleSheet?j.styleSheet.cssText+=N:j.appendChild(e.createTextNode(N))},ze=N=>{N||(N=""),A(N.split(","),D=>{o[D]=!0,c.load(D).catch(Ie)})},Le=(N,D,j)=>{Me(N,V=>{if(Ee(V)){const ye=w.fromDom(V),We=D.split(" ");A(We,He=>{Ne(j)?(j?Vi:ih)(ye,He):oN(ye,He)})}})},vt=(N,D)=>{Le(N,D,!0)},Qt=(N,D)=>{Le(N,D,!1)},Zt=(N,D)=>{const j=E(N),V=D.split(" ");return at(V,ye=>ju(j,ye))},Bt=N=>{Me(N,D=>xh(w.fromDom(D),"display"))},Ft=N=>{Me(N,D=>yh(w.fromDom(D),"display","none"))},Jt=N=>{const D=E(N);return Hr(cl(D,"display"),"none")},At=N=>(N||"mce_")+r++,hn=N=>{const D=E(N);return Ee(D.dom)?D.dom.outerHTML:_N(D)},Fo=(N,D)=>{Me(N,j=>{Ee(j)&&(j.outerHTML=D)})},Us=(N,D)=>{const j=v(D);return Me(N,V=>{const ye=j.parentNode,We=j.nextSibling;return We?ye.insertBefore(V,We):ye.appendChild(V),V})},zs=(N,D,j)=>Me(D,V=>(Nt(V)&&(N=N.cloneNode(!0)),j&&gf(ZT(V.childNodes),ye=>{N.appendChild(ye)}),V.parentNode.replaceChild(N,V))),us=(N,D)=>{let j;return N.nodeName!==D.toUpperCase()&&(j=Se(D),gf(P(N),V=>{z(j,V.nodeName,_(N,V.nodeName))}),zs(j,N,!0)),j||N},_r=(N,D)=>{let j=N,V;for(;j;){for(V=D;V&&j!==V;)V=V.parentNode;if(j===V)break;j=j.parentNode}return!j&&N.ownerDocument?N.ownerDocument.documentElement:j},Mo=N=>{if(Ee(N)){const D=N.nodeName.toLowerCase()==="a"&&!_(N,"href")&&_(N,"id");if(_(N,"name")||_(N,"data-mce-bookmark")||D)return!0}return!1},Hn=(N,D)=>{let j,V,ye=0;if(Mo(N))return!1;if(N=N.firstChild,N){const We=new zt(N,N.parentNode),He=d?d.getWhitespaceElements():{};D=D||(d?d.getNonEmptyElements():null);do{if(j=N.nodeType,Ee(N)){const Nn=N.getAttribute("data-mce-bogus");if(Nn){N=We.next(Nn==="all");continue}if(V=N.nodeName.toLowerCase(),D&&D[V]){if(V==="br"){ye++,N=We.next();continue}return!1}if(Mo(N))return!1}if(j===8||j===3&&!tr(N.nodeValue)||j===3&&N.parentNode&&He[N.parentNode.nodeName]&&tr(N.nodeValue))return!1;N=We.next()}while(N)}return ye<=1},fs=()=>e.createRange(),kr=(N,D,j)=>{let V=fs(),ye,We,He;if(N&&D)return V.setStart(N.parentNode,Zr(N)),V.setEnd(D.parentNode,Zr(D)),ye=V.extractContents(),V=fs(),V.setStart(D.parentNode,Zr(D)+1),V.setEnd(N.parentNode,Zr(N)+1),We=V.extractContents(),He=N.parentNode,He.insertBefore(af(uo,ye),N),j?He.insertBefore(j,N):He.insertBefore(D,N),He.insertBefore(af(uo,We),N),Y(N),j||D},ds=(N,D,j,V)=>{if(Nt(N)){let ye=N.length;const We=[];for(;ye--;)We[ye]=ds(N[ye],D,j,V);return We}else return t.collect&&(N===e||N===s)&&f.push([N,D,j,V]),y.bind(N,D,j,V||uo)},ou=(N,D,j)=>{if(Nt(N)){let V=N.length;const ye=[];for(;V--;)ye[V]=ou(N[V],D,j);return ye}else{if(f.length>0&&(N===e||N===s)){let V=f.length;for(;V--;){const ye=f[V];N===ye[0]&&(!D||D===ye[1])&&(!j||j===ye[2])&&y.unbind(ye[0],ye[1],ye[2])}}return y.unbind(N,D,j)}},kp=(N,D,j)=>y.dispatch(N,D,j),lo=(N,D,j)=>y.dispatch(N,D,j),co=N=>{if(N&&Ee(N)){const D=N.getAttribute("data-mce-contenteditable");return D&&D!=="inherit"?D:N.contentEditable!=="inherit"?N.contentEditable:null}else return null},uo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:d,events:y,isBlock:S,root:null,clone:I,getRoot:$,getViewPort:te,getRect:ae,getSize:xe,getParent:je,getParents:Ge,get:v,getNext:qt,getPrev:J,select:pe,is:se,add:le,create:Se,createHTML:Lt,createFragment:wr,remove:Y,setStyle:q,getStyle:ee,setStyles:Z,removeAllAttribs:he,setAttrib:z,setAttribs:De,getAttrib:_,getPos:W,parseStyle:Ae,serializeStyle:Re,addStyle:qe,loadCSS:ze,addClass:vt,removeClass:Qt,hasClass:Zt,toggleClass:Le,show:Bt,hide:Ft,isHidden:Jt,uniqueId:At,setHTML:me,getOuterHTML:hn,setOuterHTML:Fo,decode:Be,encode:yt,insertAfter:Us,replace:zs,rename:us,findCommonAncestor:_r,run:Me,getAttribs:P,isEmpty:Hn,createRng:fs,nodeIndex:Zr,split:kr,bind:ds,unbind:ou,fire:lo,dispatch:kp,getContentEditable:co,getContentEditableParent:N=>{const D=$();let j=null;for(;N&&N!==D&&(j=co(N),j===null);N=N.parentNode);return j},destroy:()=>{if(f.length>0){let N=f.length;for(;N--;){const D=f[N];y.unbind(D[0],D[1],D[2])}}bt(o,(N,D)=>{c.unload(D),delete o[D]})},isChildOf:(N,D)=>N===D||D.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},iu=JT(p,t,K(uo));return uo};ot.DOM=ot(document),ot.nodeIndex=Zr;const nA=ot.DOM,sA=0,oA=1,wl=2,nb=3;class no{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=nA;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===wl}markDone(t){this.states[t]=wl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=sA),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{lt(n.scriptLoadedCallbacks,f).each(d=>{A(d,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=H(c,d=>d.status==="rejected");return f.length>0?Promise.reject(Ke(f,({reason:d})=>Nt(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(U(c,f=>n.states[f]===wl?(s("resolve",f),Promise.resolve()):n.states[f]===nb?(s("reject",f),Promise.reject(f)):(n.states[f]=oA,n.loadScript(f).then(()=>{n.states[f]=wl,s("resolve",f);const d=n.queue;if(d.length>0)return n.queue=[],r(d).then(o)},()=>(n.states[f]=nb,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return b.from(d).each(qo),o(f)})),a=yg(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,f))}):i(a)}}no.ScriptLoader=new no;const $t=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},rA=e=>ft(e)&&Fe(e,"raw"),iA=e=>Nt(e)&&e.length>1,ea={},bf=$t("en"),sb=()=>lt(ea,bf.get()),ns={getData:()=>Li(ea,e=>we({},e)),setCode:e=>{e&&bf.set(e)},getCode:()=>bf.get(),add:(e,t)=>{let n=ea[e];n||(ea[e]=n={}),bt(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=sb().getOr({}),n=i=>Ye(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return lt(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(rA(e))return n(e.raw);if(iA(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Fe(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>sb().bind(e=>lt(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Fe(ea,e)},nn=()=>{const e=[],t={},n={},s=[],o=(v,E)=>{const _=H(s,P=>P.name===v&&P.state===E);A(_,P=>P.resolve())},r=v=>Fe(t,v),i=v=>Fe(n,v),a=v=>{if(n[v])return n[v].instance},c=(v,E)=>{const _=ns.getCode(),P=","+(E||"")+",";!_||E&&P.indexOf(","+_+",")===-1||no.ScriptLoader.add(t[v]+"/langs/"+_+".js")},f=(v,E)=>{nn.languageLoad!==!1&&(r(v)?c(v,E):S(v,"loaded").then(()=>c(v,E)))},d=(v,E)=>(e.push(E),n[v]={instance:E},o(v,"added"),E),p=v=>{delete t[v],delete n[v]},y=(v,E)=>be(E)?be(v)?{prefix:"",resource:E,suffix:""}:{prefix:v.prefix,resource:E,suffix:v.suffix}:E,C=(v,E)=>{if(t[v])return Promise.resolve();let _=be(E)?E:E.prefix+E.resource+E.suffix;_.indexOf("/")!==0&&_.indexOf("://")===-1&&(_=nn.baseURL+"/"+_),t[v]=_.substring(0,_.lastIndexOf("/"));const P=()=>(o(v,"loaded"),Promise.resolve());return n[v]?P():no.ScriptLoader.add(_).then(P)},S=(v,E="added")=>E==="added"&&i(v)||E==="loaded"&&r(v)?Promise.resolve():new Promise(_=>{s.push({name:v,state:E,resolve:_})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:d,remove:p,createUrl:y,load:C,waitFor:S}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const aA=e=>{const t=$t(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(a))}}},To=()=>{const e=aA(Ie),t=n=>e.get().each(n);return ut(we({},e),{on:t})},_l=(e,t)=>{let n=null;return{cancel:()=>{Ys(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Ys(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Cf=(e,t)=>{let n=null;const s=()=>{Ys(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},ob=(e,t)=>{let n=[];return A(Yt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(ob(s,t))}),n},xn=(e,t)=>lN(t,e),yf=K("mce-annotation"),ta=K("data-mce-annotation"),kl=K("data-mce-annotation-uid"),vf=K("data-mce-annotation-active"),rb=(e,t)=>{const n=e.selection.getRng(),s=w.fromDom(n.startContainer),o=w.fromDom(e.getBody()),r=t.fold(()=>"."+yf(),f=>`[${ta()}="${f}"]`),i=al(s,n.startOffset).getOr(s),a=er(i,r,f=>tt(f,o)),c=(f,d)=>il(f,d)?b.some($n(f,d)):b.none();return a.bind(f=>c(f,`${kl()}`).bind(d=>c(f,`${ta()}`).map(p=>{const y=ib(e,d);return{uid:d,name:p,elements:y}})))},lA=e=>Kn(e)&&ju(e,yf()),ib=(e,t)=>{const n=w.fromDom(e.getBody());return xn(n,`[${kl()}="${t}"]`)},ab=(e,t)=>{const n=w.fromDom(e.getBody()),s=xn(n,`[${ta()}="${t}"]`),o={};return A(s,r=>{const i=$n(r,kl()),a=lt(o,i).getOr([]);o[i]=a.concat([r])}),o},cA=(e,t)=>{const n=$t({}),s=()=>({listeners:[],previous:To()}),o=(p,y)=>{r(p,C=>(y(C),C))},r=(p,y)=>{const C=n.get(),S=lt(C,p).getOrThunk(s),v=y(S);C[p]=v,n.set(C)},i=(p,y,C)=>{o(p,S=>{A(S.listeners,v=>v(!0,p,{uid:y,nodes:U(C,E=>E.dom)}))})},a=p=>{o(p,y=>{A(y.listeners,C=>C(!1,p))})},c=(p,y)=>{A(ib(e,p),C=>{y?fn(C,vf(),"true"):Gn(C,vf())})},f=Cf(()=>{const p=jn(t.getNames());A(p,y=>{r(y,C=>{const S=C.previous.get();return rb(e,b.some(y)).fold(()=>{S.each(v=>{a(y),C.previous.clear(),c(v,!1)})},({uid:v,name:E,elements:_})=>{Hr(S,v)||(S.each(P=>c(P,!1)),i(E,v,_),C.previous.set(v),c(v,!0))}),{previous:C.previous,listeners:C.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,y)=>{r(p,C=>({previous:C.previous,listeners:C.listeners.concat([y])}))}}},uA=(e,t)=>{const n=s=>b.from(s.attr(ta())).bind(t.lookup);e.serializer.addTempAttr(vf()),e.serializer.addNodeFilter("span",s=>{A(s,o=>{n(o).each(r=>{r.persistent===!1&&o.unwrap()})})})},fA=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>lt(e,o).map(r=>r.settings),getNames:()=>es(e)}};let lb=0;const cb=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return lb++,e+"_"+s+lb+String(n)},dA=(e,t)=>{A(t,n=>{Vi(e,n)})},ub=(e,t)=>w.fromDom(e.dom.cloneNode(t)),Jr=e=>ub(e,!1),fb=e=>ub(e,!0),mA=(e,t)=>{const n=w.fromTag(t),s=th(e);return Ss(n,s),n},pA=(e,t)=>{const n=mA(e,t);Eo(e,n);const s=Yt(e);return Qo(n,s),Tt(e),n},db=(e,t,n=pt)=>{const s=new zt(e,t),o=r=>{let i;do i=s[r]();while(i&&!ne(i)&&!n(i));return b.from(i).filter(ne)};return{current:()=>b.from(s.current()).filter(ne),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},or=(e,t)=>{const n=t||(i=>e.isBlock(i)||Dt(i)||St(i)),s=(i,a,c,f)=>{if(ne(i)){const d=f(i,a,i.data);if(d!==-1)return b.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,f))};return{backwards:(i,a,c,f)=>{const d=db(i,f,n);return s(i,a,()=>d.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const d=db(i,f,n);return s(i,a,()=>d.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},ei=Math.round,rr=e=>e?{left:ei(e.left),top:ei(e.top),bottom:ei(e.bottom),right:ei(e.right),width:ei(e.width),height:ei(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},mb=(e,t)=>(e=rr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),gA=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,pb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,na=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:pb(t.top-e.bottom,e,t)},sa=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:pb(t.bottom-e.top,e,t),hA=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,bA=e=>Q(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),b.none()),gb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},CA=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),yA=(e,t,n)=>Math.min(Math.max(e,t),n),Nl=e=>{const t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ao=(e,t)=>{if(Ee(e)&&e.hasChildNodes()){const n=e.childNodes,s=yA(t,0,n.length-1);return n[s]}else return e},vA=(e,t)=>{if(!(t<0&&Ee(e)&&e.hasChildNodes()))return Ao(e,t)},EA=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),hb=e=>typeof e=="string"&&e.charCodeAt(0)>=768&&EA.test(e),xA=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},SA=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},bb=Ee,wA=ts,Cb=dl("display","block table"),_A=dl("float","left right"),oa=SA(bb,wA,Cs(_A)),kA=Cs(dl("white-space","pre pre-line pre-wrap")),ra=ne,Ef=Dt,yb=ot.nodeIndex,Tl=vA,xf=e=>"createRange"in e?e.createRange():ot.DOM.createRng(),Sf=e=>e&&/[\r\n\t ]/.test(e),vb=e=>!!e.setStart&&!!e.setEnd,wf=e=>{const t=e.startContainer,n=e.startOffset;if(Sf(e.toString())&&kA(t.parentNode)&&ne(t)){const s=t.data;if(Sf(s[n-1])||Sf(s[n+1]))return!0}return!1},NA=e=>{const t=e.ownerDocument,n=xf(t),s=t.createTextNode(Xt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=rr(n.getBoundingClientRect());return o.removeChild(s),r},TA=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&ne(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Ro(r)}else return null},Eb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ro=e=>{let t;const n=e.getClientRects();return n.length>0?t=rr(n[0]):t=rr(e.getBoundingClientRect()),!vb(e)&&Ef(e)&&Eb(t)?NA(e):Eb(t)&&vb(e)?TA(e):t},ir=(e,t)=>{const n=mb(e,t);return n.width=1,n.right=n.left+1,n},AA=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&gA(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=xf(i.ownerDocument);if(a<i.data.length){if(hb(i.data[a]))return t;if(hb(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!wf(c)))return n(ir(Ro(c),!1)),t}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),wf(c)||n(ir(Ro(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),wf(c)||n(ir(Ro(c),!0)))},o=e.container(),r=e.offset();if(ra(o))return s(o,r),t;if(bb(o))if(e.isAtEnd()){const i=Tl(o,r);ra(i)&&s(i,i.data.length),oa(i)&&!Ef(i)&&n(ir(Ro(i),!1))}else{const i=Tl(o,r);if(ra(i)&&s(i,0),oa(i)&&e.isAtEnd())return n(ir(Ro(i),!1)),t;const a=Tl(e.container(),e.offset()-1);oa(a)&&!Ef(a)&&(Cb(a)||Cb(i)||!oa(i))&&n(ir(Ro(a),!1)),oa(i)&&n(ir(Ro(i),!0))}return t},F=(e,t,n)=>{const s=()=>(ra(e),t===0),o=()=>ra(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=xf(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=AA(F(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),f=d=>Tl(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};F.fromRangeStart=e=>F(e.startContainer,e.startOffset),F.fromRangeEnd=e=>F(e.endContainer,e.endOffset),F.after=e=>F(e.parentNode,yb(e)+1),F.before=e=>F(e.parentNode,yb(e)),F.isAbove=(e,t)=>En(Ut(t.getClientRects()),vs(e.getClientRects()),na).getOr(!1),F.isBelow=(e,t)=>En(vs(t.getClientRects()),Ut(e.getClientRects()),sa).getOr(!1),F.isAtStart=e=>e?e.isAtStart():!1,F.isAtEnd=e=>e?e.isAtEnd():!1,F.isTextPosition=e=>e?ne(e.container()):!1,F.isElementPosition=e=>F.isTextPosition(e)===!1;const Al=(e,t)=>{ne(t)&&t.data.length===0&&e.remove(t)},RA=(e,t,n)=>{t.insertNode(n),Al(e,n.previousSibling),Al(e,n.nextSibling)},PA=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>Al(e,r.previousSibling)),o.each(r=>Al(e,r.nextSibling))},_f=(e,t,n)=>{Ju(n)?PA(e,t,n):RA(e,t,n)},ss=ne,xb=Jo,Sb=ot.nodeIndex,wb=e=>{const t=e.parentNode;return xb(t)?wb(t):t},kf=e=>e?nl(e.childNodes,(t,n)=>(xb(n)&&n.nodeName!=="BR"?t=t.concat(kf(n)):t.push(n),t),[]):[],OA=(e,t)=>{for(;(e=e.previousSibling)&&ss(e);)t+=e.data.length;return t},_b=e=>t=>e===t,DA=e=>{let t,n;t=kf(wb(e)),n=Eg(t,_b(e),e),t=t.slice(0,n+1);const s=nl(t,(o,r,i)=>(ss(r)&&ss(t[i-1])&&o++,o),0);return t=Ur(t,Qn([e.nodeName])),n=Eg(t,_b(e),e),n-s},kb=e=>{let t;return ss(e)?t="text()":t=e.nodeName.toLowerCase(),t+"["+DA(e)+"]"},BA=(e,t,n)=>{const s=[];for(t=t.parentNode;t!==e&&!(n&&n(t));t=t.parentNode)s.push(t);return s},Nb=(e,t)=>{let n,s,o=[],r,i,a;return n=t.container(),s=t.offset(),ss(n)?r=OA(n,s):(i=n.childNodes,s>=i.length?(r="after",s=i.length-1):r="before",n=i[s]),o.push(kb(n)),a=BA(e,n),a=Ur(a,Cs(Jo)),o=o.concat(Fu(a,c=>kb(c))),o.reverse().join("/")+","+r},IA=(e,t,n)=>{let s=kf(e);return s=Ur(s,(o,r)=>!ss(o)||!ss(s[r-1])),s=Ur(s,Qn([t])),s[n]},$A=(e,t)=>{let n=e,s=0,o;for(;ss(n);){if(o=n.data.length,t>=s&&t<=s+o){e=n,t=t-s;break}if(!ss(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return ss(e)&&t>e.data.length&&(t=e.data.length),F(e,t)},Tb=(e,t)=>{let n;if(!t)return null;const s=t.split(","),o=s[0].split("/");n=s.length>1?s[1]:"before";const r=nl(o,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),IA(i,c[1],parseInt(c[2],10))):null},e);return r?ss(r)?$A(r,parseInt(n,10)):(n==="after"?n=Sb(r)+1:n=Sb(r),F(r.parentNode,n)):null},Rl=St,LA=(e,t,n)=>{let s,o;for(o=e(t.data.slice(0,n)).length,s=t.previousSibling;s&&ne(s);s=s.previousSibling)o+=e(s.data).length;return o},Ab=(e,t,n,s,o)=>{let r=s[o?"startContainer":"endContainer"],i=s[o?"startOffset":"endOffset"];const a=[];let c,f=0;const d=e.getRoot();for(ne(r)?a.push(n?LA(t,r,i):i):(c=r.childNodes,i>=c.length&&c.length&&(f=1,i=Math.max(0,c.length-1)),a.push(e.nodeIndex(c[i],n)+f));r&&r!==d;r=r.parentNode)a.push(e.nodeIndex(r,n));return a},FA=(e,t,n,s)=>{const o=t.dom,r={};return r.start=Ab(o,e,n,s,!0),t.isCollapsed()||(r.end=Ab(o,e,n,s,!1)),Hh(s)&&(r.isFakeCaret=!0),r},Nf=(e,t,n)=>{let s=0;return G.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++}}),s},Rb=(e,t)=>{let n,s,o;const r=t?"start":"end";n=e[r+"Container"],s=e[r+"Offset"],Ee(n)&&n.nodeName==="TR"&&(o=n.childNodes,n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,s)))},Pb=e=>(Rb(e,!0),Rb(e,!1),e),Ob=(e,t)=>{let n;if(Ee(e)&&(e=Ao(e,t),Rl(e)))return e;if(Ln(e)&&(ne(e)&&Gr(e)&&(e=e.parentNode),n=e.previousSibling,Rl(n)||(n=e.nextSibling,Rl(n))))return n},MA=e=>Ob(e.startContainer,e.startOffset)||Ob(e.endContainer,e.endOffset),Db=(e,t,n)=>{const s=n.getNode();let o=s?s.nodeName:null;const r=n.getRng();if(Rl(s)||o==="IMG")return{name:o,index:Nf(n.dom,o,s)};const i=MA(r);return i?(o=i.tagName,{name:o,index:Nf(n.dom,o,i)}):FA(e,n,t,r)},UA=e=>{const t=e.getRng();return{start:Nb(e.dom.getRoot(),F.fromRangeStart(t)),end:Nb(e.dom.getRoot(),F.fromRangeEnd(t))}},zA=e=>({rng:e.getRng()}),Bb=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},Ib=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName;if(a==="IMG")return{name:a,index:Nf(n,a,i)};const c=Pb(s.cloneRange());if(!r){c.collapse(!1);const d=Bb(n,o+"_end",t);_f(n,c,d)}s=Pb(s),s.collapse(!0);const f=Bb(n,o+"_start",t);return _f(n,s,f),e.moveToBookmark({id:o,keep:!0}),{id:o}},HA=(e,t,n)=>t===2?Db(wo,n,e):t===3?UA(e):t?zA(e):Ib(e,!1),$b=re(Db,xt,!0),Lb=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:it,isError:pt,map:r=>dn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},Fb=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:pt,isError:it,map:t,mapError:s=>dn.error(s(e)),bind:t,exists:pt,forall:it,getOr:xt,or:xt,getOrThunk:Ir,orThunk:Ir,getOrDie:ys(String(e)),each:Ie,toOptional:b.none};return n},dn={value:Lb,error:Fb,fromOption:(e,t)=>e.fold(()=>Fb(t),Lb)},Ns={generate:e=>{if(!Nt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return A(e,(s,o)=>{const r=es(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Nt(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const y=es(p);if(t.length!==y.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+y.join(","));if(!at(t,S=>R(y,S)))throw new Error("Not all branches were specified when using match. Specified: "+y.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Ns.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const VA=e=>{const t=[],n=[];return A(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},WA=e=>e.type==="inline-command"||e.type==="inline-format",jA=e=>e.type==="block-command"||e.type==="block-format",qA=e=>jn(e,(t,n)=>t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1),KA=e=>{const t=s=>dn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(Nt(e.format)){if(!at(e.format,be))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(be(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return dn.value(o(i))}else return e.cmd!==void 0?be(e.cmd)?dn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!ft(e))return t("Raw pattern is not an object");if(!be(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!be(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?be(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):dn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},GA=e=>qA(H(e,jA)),Mb=e=>H(e,WA),YA=e=>({inlinePatterns:Mb(e),blockPatterns:GA(e)}),XA=e=>{const t=VA(U(e,KA));return A(t.errors,n=>console.error(n.message,n.pattern)),t.values},Tf=yo().deviceType,QA=Tf.isTouch(),ZA=ot.DOM,JA=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Q(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[zr(r)]=zr(i),n},{})},Ub=e=>Bn(e,RegExp),ue=e=>t=>t.options.get(e),Af=e=>be(e)||ft(e),zb=(e,t="")=>n=>{const s=be(n);if(s)if(n.indexOf("=")!==-1){const o=JA(n);return{value:lt(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},e1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:zb(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:zb(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=be(n)&&Qs(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:"boolean",default:!1}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||be(n)||Xs(n,be);return s?be(n)?{value:U(n.split(","),zr),valid:s}:Nt(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Of(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=be(n)||Xs(n,be);return s?{value:Nt(n)?n:U(n.split(","),zr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),t("object_resizing",{processor:n=>{const s=bs(n)||be(n);return s?n===!1||Tf.isiPhone()||Tf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!QA}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||be(n)||Ye(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:n=>{const s=n===!1||be(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Af}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Af}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Af}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>be(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Xs(n,ft)||n===!1?{value:XA(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Xs(n,Ub)?{value:n,valid:!0}:Ub(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ns.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:ZA.getAttrib(e.getElement(),"placeholder")})})},t1=ue("iframe_attrs"),n1=ue("doctype"),Hb=ue("document_base_url"),s1=ue("body_id"),o1=ue("body_class"),Vb=ue("content_security_policy"),r1=ue("br_in_pre"),Sn=ue("forced_root_block"),ar=ue("forced_root_block_attrs"),i1=ue("br_newline_selector"),a1=ue("no_newline_selector"),l1=ue("keep_styles"),c1=ue("end_container_on_empty_block"),Wb=ue("automatic_uploads"),jb=ue("images_reuse_filename"),u1=ue("images_replace_blob_uris"),qb=ue("icons"),f1=ue("icons_url"),d1=ue("images_upload_url"),m1=ue("images_upload_base_path"),p1=ue("images_upload_credentials"),g1=ue("images_upload_handler"),h1=ue("content_css_cors"),Rf=ue("referrer_policy"),Kb=ue("language"),b1=ue("language_url"),Gb=ue("indent_use_margin"),C1=ue("indentation"),y1=ue("content_css"),v1=ue("content_style"),Yb=ue("font_css"),E1=ue("directionality"),x1=ue("inline_boundaries_selector"),Xb=ue("object_resizing"),S1=ue("resize_img_proportional"),w1=ue("placeholder"),Qb=ue("event_root"),_1=ue("service_message"),ti=ue("theme"),k1=ue("theme_url"),Pf=ue("model"),N1=ue("model_url"),ia=ue("inline_boundaries"),T1=ue("formats"),A1=ue("preview_styles"),R1=ue("format_empty_lines"),P1=ue("custom_ui_selector"),Of=ue("inline"),O1=ue("hidden_input"),D1=ue("submit_patch"),B1=ue("add_form_submit_trigger"),I1=ue("add_unload_trigger"),$1=ue("custom_undo_redo_levels"),L1=ue("disable_nodechange"),Zb=ue("readonly"),F1=ue("content_css_cors"),Pl=ue("plugins"),M1=ue("external_plugins"),U1=ue("block_unsupported_drop"),z1=ue("visual"),H1=ue("visual_table_class"),Jb=ue("visual_anchor_class"),V1=ue("iframe_aria_text"),W1=ue("setup"),j1=ue("init_instance_callback"),q1=ue("urlconverter_callback"),K1=ue("auto_focus"),G1=ue("browser_spellcheck"),Y1=ue("protect"),X1=ue("paste_block_drop"),Ol=ue("paste_data_images"),Q1=ue("paste_preprocess"),Z1=ue("paste_postprocess"),J1=ue("paste_webkit_styles"),eR=ue("paste_remove_styles_if_webkit"),tR=ue("paste_merge_formats"),nR=ue("smart_paste"),sR=ue("paste_as_text"),oR=ue("paste_tab_spaces"),rR=ue("allow_html_data_urls"),eC=ue("text_patterns"),tC=ue("noneditable_class"),iR=ue("editable_class"),aR=ue("noneditable_regexp"),lR=e=>G.explode(e.options.get("font_size_style_values")),cR=e=>G.explode(e.options.get("font_size_classes")),uR=e=>e.options.get("encoding")==="xml",nC=e=>G.explode(e.options.get("images_file_types")),fR=ue("table_tab_navigation"),dR=Ee,sC=ne,oC=e=>{const t=e.parentNode;t&&t.removeChild(e)},rC=e=>{const t=wo(e);return{count:e.length-t.length,text:t}},iC=e=>{let t;for(;(t=e.data.lastIndexOf(Kt))!==-1;)e.deleteData(t,1)},aC=(e,t)=>(lr(e),t),mR=(e,t)=>{const n=rC(e.data.substr(0,t.offset())),s=rC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(iC(e),F(e,t.offset()-n.count)):t},pR=(e,t)=>{const n=t.container(),s=k(gt(n.childNodes),e).map(o=>o<t.offset()?F(n,t.offset()-1):t).getOr(t);return lr(e),s},gR=(e,t)=>sC(e)&&t.container()===e?mR(e,t):aC(e,t),hR=(e,t)=>t.container()===e.parentNode?pR(e,t):aC(e,t),bR=(e,t)=>F.isTextPosition(t)?gR(e,t):hR(e,t),lr=e=>{dR(e)&&Ln(e)&&(zh(e)?e.removeAttribute("data-mce-caret"):oC(e)),sC(e)&&(iC(e),e.data.length===0&&oC(e))},CR=St,yR=_s,vR=ml,ER="*[contentEditable=false],video,audio,embed,object",lC=(e,t,n)=>{const s=mb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},xR=e=>{const t=xn(w.fromDom(e),ER);for(let n=0;n<t.length;n++){const s=t[n].dom;let o=s.previousSibling;if(yl(o)){const r=o.data;r.length===1?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)}o=s.nextSibling,Cl(o)&&(o.data.length===1?o.parentNode.removeChild(o):o.deleteData(0,1))}},SR=(e,t,n,s)=>{const o=To();let r,i;const a=Sn(e),c=e.dom,f=(v,E)=>{let _;if(d(),vR(E))return null;if(n(E)){i=aT(a,E,v);const P=lC(t,E,v);c.setStyle(i,"top",P.top);const z=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(z,we({},P)),c.add(t,z),o.set({caret:z,element:E,before:v}),v&&c.addClass(z,"mce-visual-caret-before"),p(),_=E.ownerDocument.createRange(),_.setStart(i,0),_.setEnd(i,0)}else return i=rT(E,v),_=E.ownerDocument.createRange(),aa(i.nextSibling)?(_.setStart(i,0),_.setEnd(i,0)):(_.setStart(i,1),_.setEnd(i,1)),_;return _},d=()=>{xR(t),i&&(lr(i),i=null),o.on(v=>{c.remove(v.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(v=>{s()?c.toggleClass(v.caret,"mce-visual-caret-hidden"):c.addClass(v.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(v=>{const E=lC(t,v.element,v.before);c.setStyles(v.caret,we({},E))})},destroy:()=>clearInterval(r)}},cC=()=>et.browser.isFirefox(),aa=e=>CR(e)||yR(e),la=e=>aa(e)||Gi(e)&&cC(),wR=to,Df=St,_R=_s,kR=dl("display","block table table-cell table-caption list-item"),uC=Ln,fC=Gr,dC=Ee,NR=ts,ni=e=>e>0,cr=e=>e<0,Dl=(e,t)=>{let n;for(;n=e(t);)if(!fC(n))return n;return null},ca=(e,t,n,s,o)=>{const r=new zt(e,s),i=Df(e)||fC(e);if(cr(t)){if(i&&(e=Dl(r.prev.bind(r),!0),n(e)))return e;for(;e=Dl(r.prev.bind(r),o);)if(n(e))return e}if(ni(t)){if(i&&(e=Dl(r.next.bind(r),!0),n(e)))return e;for(;e=Dl(r.next.bind(r),o);)if(n(e))return e}return null},TR=(e,t)=>{const n=o=>wR(o.dom),s=o=>o.dom===t;return jr(w.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Po=(e,t)=>{for(;e&&e!==t;){if(kR(e))return e;e=e.parentNode}return null},Ts=(e,t,n)=>Po(e.container(),n)===Po(t.container(),n),Bf=(e,t)=>{if(!t)return null;const n=t.container(),s=t.offset();return dC(n)?n.childNodes[s+e]:null},mC=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},AR=(e,t,n)=>Po(t,e)===Po(n,e),pC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let o=n[s];if(uC(o)&&(o=o[s]),Df(o)||_R(o)){if(AR(t,o,n))return o;break}if(NR(o))break;n=n.parentNode}return null},ua=re(mC,!0),fa=re(mC,!1),If=(e,t,n)=>{let s;const o=re(pC,!0,t),r=re(pC,!1,t);let i=n.startContainer;const a=n.startOffset;if(Gr(i)){dC(i)||(i=i.parentNode);const c=i.getAttribute("data-mce-caret");if(c==="before"&&(s=i.nextSibling,la(s)))return ua(s);if(c==="after"&&(s=i.previousSibling,la(s)))return fa(s)}if(!n.collapsed)return n;if(ne(i)){if(uC(i)){if(e===1){if(s=r(i),s)return ua(s);if(s=o(i),s)return fa(s)}if(e===-1){if(s=o(i),s)return fa(s);if(s=r(i),s)return ua(s)}return n}if(yl(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?ua(s):n;if(Cl(i)&&a<=1)return e===-1&&(s=o(i),s)?fa(s):n;if(a===i.data.length)return s=r(i),s?ua(s):n;if(a===0)return s=o(i),s?fa(s):n}return n},gC=(e,t)=>b.from(Bf(e?0:-1,t)).filter(Df),da=(e,t,n)=>{const s=If(e,t,n);return e===-1?F.fromRangeStart(s):F.fromRangeEnd(s)},Bl=e=>b.from(e.getNode()).map(w.fromDom),RR=e=>b.from(e.getNode(!0)).map(w.fromDom),$f=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Il=(e,t)=>{const n=Ts(e,t);return!n&&Dt(e.getNode())?!0:n};var Vt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Vt||(Vt={}));const PR=St,As=ne,hC=Ee,Lf=Dt,si=ts,bC=CT,$l=jh,OR=(e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},CC=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,yC=(e,t)=>{if(ni(e)){if(si(t.previousSibling)&&!As(t.previousSibling))return F.before(t);if(As(t))return F(t,0)}if(cr(e)){if(si(t.nextSibling)&&!As(t.nextSibling))return F.after(t);if(As(t))return F(t,t.data.length)}return cr(e)?Lf(t)?F.before(t):F.after(t):F.before(t)},DR=(e,t)=>{const n=t.nextSibling;return n&&si(n)?As(n)?F(n,0):F.before(n):Ff(Vt.Forwards,F.after(t),e)},Ff=(e,t,n)=>{let s,o,r,i;if(!hC(n)||!t)return null;if(t.isEqual(F.after(n))&&n.lastChild){if(i=F.after(n.lastChild),cr(e)&&si(n.lastChild)&&hC(n.lastChild))return Lf(n.lastChild)?F.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(As(a)){if(cr(e)&&c>0)return F(a,--c);if(ni(e)&&c<a.length)return F(a,++c);s=a}else{if(cr(e)&&c>0&&(o=CC(a,c-1),si(o)))return!bC(o)&&(r=ca(o,e,$l,o),r)?As(r)?F(r,r.data.length):F.after(r):As(o)?F(o,o.data.length):F.before(o);if(ni(e)&&c<a.childNodes.length&&(o=CC(a,c),si(o)))return Lf(o)?DR(n,o):!bC(o)&&(r=ca(o,e,$l,o),r)?As(r)?F(r,0):F.before(r):As(o)?F(o,0):F.after(o);s=o||i.getNode()}if((ni(e)&&i.isAtEnd()||cr(e)&&i.isAtStart())&&(s=ca(s,e,it,n,!0),$l(s,n)))return yC(e,s);o=ca(s,e,$l,n);const f=Co(H(OR(a,n),PR));return f&&(!o||!f.contains(o))?(ni(e)?i=F.after(f):i=F.before(f),i):o?yC(e,o):null},Rs=e=>({next:t=>Ff(Vt.Forwards,t,e),prev:t=>Ff(Vt.Backwards,t,e)}),BR=(e,t,n)=>{const s=e?F.before(n):F.after(n);return Fn(e,t,s)},IR=e=>Dt(e)?F.before(e):F.after(e),vC=e=>F.isTextPosition(e)?e.offset()===0:ts(e.getNode()),EC=e=>{if(F.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ts(e.getNode(!0))},xC=(e,t)=>!F.isTextPosition(e)&&!F.isTextPosition(t)&&e.getNode()===t.getNode(!0),$R=e=>!F.isTextPosition(e)&&Dt(e.getNode()),LR=(e,t,n)=>e?!xC(t,n)&&!$R(t)&&EC(t)&&vC(n):!xC(n,t)&&vC(t)&&EC(n),Fn=(e,t,n)=>{const s=Rs(t);return b.from(e?s.next(n):s.prev(n))},Ll=(e,t,n)=>Fn(e,t,n).bind(s=>Ts(n,s,t)&&LR(e,n,s)?Fn(e,t,s):b.some(s)),SC=(e,t,n,s)=>Ll(e,t,n).bind(o=>s(o)?SC(e,t,o,s):b.some(o)),oi=(e,t)=>{const n=e?t.firstChild:t.lastChild;return ne(n)?b.some(F(n,e?0:n.data.length)):n?ts(n)?b.some(e?F.before(n):IR(n)):BR(e,t,n):b.none()},os=re(Fn,!0),Ps=re(Fn,!1),mn=re(oi,!0),Os=re(oi,!1),wC="_mce_caret",Ds=e=>Ee(e)&&e.id===wC,ur=(e,t)=>{for(;t&&t!==e;){if(t.id===wC)return t;t=t.parentNode}return null},FR=e=>be(e.start),MR=e=>Fe(e,"rng"),UR=e=>Fe(e,"id"),zR=e=>Fe(e,"name"),_C=e=>G.isArray(e.start),kC=(e,t)=>(Ee(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),HR=(e,t)=>{let n;const s=e.createRng();return n=Tb(e.getRoot(),t.start),s.setStart(n.container(),n.offset()),n=Tb(e.getRoot(),t.end),s.setEnd(n.container(),n.offset()),s},VR=(e,t)=>{const n=e.ownerDocument.createTextNode(Kt);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},WR=e=>e.hasChildNodes()===!1,jR=(e,t)=>Os(e).fold(pt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),NC=(e,t,n)=>WR(t)&&ur(e,t)?(VR(t,n),!0):!1,TC=(e,t,n,s)=>{const o=n[t?"start":"end"];let r,i,a,c;const f=e.getRoot();if(o){for(a=o[0],i=f,r=o.length-1;r>=1;r--){if(c=i.childNodes,NC(f,i,s))return!0;if(o[r]>c.length-1)return NC(f,i,s)?!0:jR(i,s);i=c[o[r]]}i.nodeType===3&&(a=Math.min(o[0],i.nodeValue.length)),i.nodeType===1&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},Mf=e=>ne(e)&&e.data.length>0,AC=(e,t,n)=>{let s=e.get(n.id+"_"+t),o,r,i,a;const c=n.keep;let f,d;if(s){if(o=s.parentNode,t==="start"?(c?s.hasChildNodes()?(o=s.firstChild,r=1):Mf(s.nextSibling)?(o=s.nextSibling,r=0):Mf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)+1):r=e.nodeIndex(s),f=o,d=r):(c?s.hasChildNodes()?(o=s.firstChild,r=1):Mf(s.previousSibling)?(o=s.previousSibling,r=s.previousSibling.data.length):(o=s.parentNode,r=e.nodeIndex(s)):r=e.nodeIndex(s),f=o,d=r),!c){for(a=s.previousSibling,i=s.nextSibling,G.each(G.grep(s.childNodes),p=>{ne(p)&&(p.nodeValue=p.nodeValue.replace(/\uFEFF/g,""))});s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&ne(a)&&!et.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),f=a,d=r)}return b.some(F(f,d))}else return b.none()},qR=(e,t)=>{const n=e.createRng();return TC(e,!0,t,n)&&TC(e,!1,t,n)?b.some(n):b.none()},KR=(e,t)=>{const n=AC(e,"start",t),s=AC(e,"end",t);return En(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(kC(e,o.container()),o.offset()),i.setEnd(kC(e,r.container()),r.offset()),i})},GR=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),s}),YR=(e,t)=>{const n=e.dom;if(t){if(_C(t))return qR(n,t);if(FR(t))return b.some(HR(n,t));if(UR(t))return KR(n,t);if(zR(t))return GR(n,t);if(MR(t))return b.some(t.rng)}return b.none()},XR=(e,t,n)=>HA(e,t,n),QR=(e,t)=>{YR(e,t).each(n=>{e.setRng(n)})},Mn=e=>Ee(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Fl=(e=>t=>e===t)(Xt),ma=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Uf=e=>!ma(e)&&!Fl(e)&&!Uh(e),ZR=e=>({value:e}),zf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},JR=e=>{const t=zf(e.red)+zf(e.green)+zf(e.blue);return ZR(t)},eP=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,tP=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,RC=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),PC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return RC(o,r,i,a)},nP=e=>{if(e==="transparent")return b.some(RC(0,0,0,0));const t=eP.exec(e);if(t!==null)return b.some(PC(t[1],t[2],t[3],"1"));const n=tP.exec(e);return n!==null?b.some(PC(n[1],n[2],n[3],n[4])):b.none()},Ml=e=>nP(e).map(JR).map(t=>"#"+t.value).getOr(e),Ul=e=>!!e.nodeType,sP=e=>e&&/^(IMG)$/.test(e.nodeName),OC=(e,t,n)=>{const s=n.startOffset;let o=n.startContainer;if(!(o===n.endContainer&&sP(o.childNodes[s]))&&Ee(o)){const r=o.childNodes;let i;s<r.length?(o=r[s],i=new zt(o,e.getParent(o,e.isBlock))):(o=r[r.length-1],i=new zt(o,e.getParent(o,e.isBlock)),i.next(!0));for(let a=i.current();a;a=i.next())if(ne(a)&&!Vf(a)){n.setStart(a,0),t.setRng(n);return}}},DC=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(Ee(e)||!Vf(e))return e}},Hf=(e,t)=>(Ul(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),ri=(e,t,n)=>e.schema.isValidChild(t,n),Vf=(e,t=!1)=>{if(Ne(e)&&ne(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return tr(n)}else return!1},oP=e=>Ne(e)&&ne(e)&&e.length===0,so=(e,t)=>(Ye(e)?e=e(t):Ne(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),Wf=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),jf=(e,t)=>((t==="color"||t==="backgroundColor")&&(e=Ml(e)),t==="fontWeight"&&e===700&&(e="bold"),t==="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),zl=(e,t,n)=>jf(e.getStyle(t,n),n),BC=(e,t)=>{let n;return e.getParent(t,s=>(n=e.getStyle(s,"text-decoration"),n&&n!=="none")),n},Hl=(e,t,n)=>e.getParents(t,n,e.getRoot()),rP=(e,t)=>{const n=s=>{const o=r=>r.length>1&&r.charAt(0)==="%";return M(["styles","attributes"],r=>lt(s,r).exists(i=>{const a=Nt(i)?i:Cg(i);return M(a,o)}))};return M(e.formatter.get(t),n)},iP=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Fi(r,(i,a)=>M(s,c=>c===a));return M(e.formatter.get(t),r=>{const i=o(r);return M(e.formatter.get(n),a=>{const c=o(a);return Ek(i,c)})})},Bs=e=>Mr(e,"block"),Rn=e=>Mr(e,"selector"),Wt=e=>Mr(e,"inline"),aP=e=>Rn(e)&&Wt(e)&&Hr(lt(e,"mixed"),!0),qf=e=>Rn(e)&&e.expand!==!1&&!Wt(e),ii=Mn,IC=Hl,$C=Vf,lP=Hf,cP=e=>Dt(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,LC=(e,t)=>{let n=t;for(;n;){if(Ee(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},FC=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},uP=(e,t,n)=>FC(e,t,n,s=>Fl(s)||ma(s)),fP=(e,t,n)=>FC(e,t,n,Uf),MC=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,p,y)=>{const C=or(e),S=o?C.backwards:C.forwards;return b.from(S(d,p,(v,E)=>ii(v.parentNode)?-1:(i=v,y(o,v,E)),a))};return c(n,s,uP).bind(d=>r?c(d.container,d.offset+(o?-1:0),fP):b.some(d)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},UC=(e,t,n,s,o)=>{ne(s)&&sl(s.data)&&s[o]&&(s=s[o]);const r=IC(e,s);for(let i=0;i<r.length;i++)for(let a=0;a<t.length;a++){const c=t[a];if(!(Ne(c.collapsed)&&c.collapsed!==n.collapsed)&&Rn(c)&&e.is(r[i],c.selector))return r[i]}return s},zC=(e,t,n,s)=>{let o=n;const r=e.dom,i=r.getRoot(),a=t[0];if(Bs(a)&&(o=a.wrapper?null:r.getParent(n,a.block,i)),!o){const c=r.getParent(n,"LI,TD,TH");o=r.getParent(ne(n)?n.parentNode:n,f=>f!==i&&lP(e,f),c)}if(o&&Bs(a)&&a.wrapper&&(o=IC(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[s]&&!r.isBlock(o[s])&&(o=o[s],!Wf(o,"br")););return o||n},HC=(e,t,n,s)=>{const o=n.parentNode;return Ne(n[s])?!1:o===t||Mt(o)||e.isBlock(o)?!0:HC(e,t,o,s)},Vl=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(ne(n)&&!$C(n)&&(o?s>0:s<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=ne(c)&&!HC(e,a,c,i);if(!ii(c)&&!cP(c)&&!$C(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},VC=e=>ii(e.parentNode)||ii(e),ai=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,f=n[0];return Ee(o)&&o.hasChildNodes()&&(o=Ao(o,r),ne(o)&&(r=0)),Ee(i)&&i.hasChildNodes()&&(i=Ao(i,t.collapsed?a:a-1),ne(i)&&(a=i.nodeValue.length)),o=LC(c,o),i=LC(c,i),VC(o)&&(o=ii(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,ne(o)&&(r=t.collapsed?o.length:0)),VC(i)&&(i=ii(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,ne(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(MC(c,e.getBody(),o,r,!0,s).each(({container:y,offset:C})=>{o=y,r=C}),MC(c,e.getBody(),i,a,!1,s).each(({container:y,offset:C})=>{i=y,a=C})),(Wt(f)||f.block_expand)&&((!Wt(f)||!ne(o)||r===0)&&(o=Vl(c,n,o,r,!0)),(!Wt(f)||!ne(i)||a===i.nodeValue.length)&&(i=Vl(c,n,i,a,!1))),qf(f)&&(o=UC(c,n,t,o,"previousSibling"),i=UC(c,n,t,i,"nextSibling")),(Bs(f)||Rn(f))&&(o=zC(e,n,o,"previousSibling"),i=zC(e,n,i,"nextSibling"),Bs(f)&&(c.isBlock(o)||(o=Vl(c,n,o,r,!0)),c.isBlock(i)||(i=Vl(c,n,i,a,!1)))),Ee(o)&&(r=c.nodeIndex(o),o=o.parentNode),Ee(i)&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},pa=(e,t,n)=>{const s=t.startOffset,o=Ao(t.startContainer,s),r=t.endOffset,i=Ao(t.endContainer,r-1),a=v=>{const E=v[0];ne(E)&&E===o&&s>=E.data.length&&v.splice(0,1);const _=v[v.length-1];return r===0&&v.length>0&&_===i&&ne(_)&&v.splice(v.length-1,1),v},c=(v,E,_)=>{const P=[];for(;v&&v!==_;v=v[E])P.push(v);return P},f=(v,E)=>e.getParent(v,_=>_.parentNode===E,E),d=(v,E,_)=>{const P=_?"nextSibling":"previousSibling";for(let z=v,I=z.parentNode;z&&z!==E;z=I){I=z.parentNode;const $=c(z===v?z:z[P],P);$.length&&(_||$.reverse(),n(a($)))}};if(o===i)return n(a([o]));const p=e.findCommonAncestor(o,i);if(e.isChildOf(o,i))return d(o,p,!0);if(e.isChildOf(i,o))return d(i,p);const y=f(o,p)||o,C=f(i,p)||i;d(o,y,!0);const S=c(y===o?y:y.nextSibling,"nextSibling",C===i?C.nextSibling:C);S.length&&n(a(S)),d(i,C)},Kf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},dP=e=>Ke(e,t=>{const n=Nl(t);return n?[w.fromDom(n)]:[]}),mP=e=>Kf(e).length>1,pP=e=>H(dP(e),gl),gP=e=>xn(e,"td[data-mce-selected],th[data-mce-selected]"),WC=(e,t)=>{const n=gP(t);return n.length>0?n:pP(e)},li=e=>WC(Kf(e.selection.getSel()),w.fromDom(e.getBody())),ga=(e,t)=>Yi(e,"table",t),hP=e=>{const t=e.startContainer,n=e.startOffset;return ne(t)?n===0?b.some(w.fromDom(t)):b.none():b.from(t.childNodes[n]).map(w.fromDom)},bP=e=>{const t=e.endContainer,n=e.endOffset;return ne(t)?n===t.data.length?b.some(w.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(w.fromDom)},jC=e=>mh(e).fold(K([e]),t=>[e].concat(jC(t))),Gf=e=>qu(e).fold(K([e]),t=>Ct(t)==="br"?Yo(t).map(n=>[e].concat(Gf(n))).getOr([]):[e].concat(Gf(t))),Yf=(e,t)=>En(hP(t),bP(t),(n,s)=>{const o=de(jC(e),re(tt,n)),r=de(Gf(e),re(tt,s));return o.isSome()&&r.isSome()}).getOr(!1),Xf=(e,t,n,s)=>{const o=n,r=new zt(n,o),i=Fi(e.schema.getMoveCaretBeforeOnEnterElements(),(a,c)=>!R(["td","th","table"],c.toLowerCase()));do{if(ne(n)&&G.trim(n.nodeValue).length!==0){s?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(i[n.nodeName]){s?t.setStartBefore(n):n.nodeName==="BR"?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Wl=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},Qf=(e,t)=>{const n=li(e);n.length>0?A(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},Zf=(e,t,n)=>{const s=Ib(e,t);n(s),e.moveToBookmark(s)},qC=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(In,"text"),Jf=e=>qC.get(e),KC=e=>qC.getOption(e),CP=e=>In(e)&&Jf(e)===Kt,yP=(e,t,n,s)=>Yn(t).fold(()=>"skipping",o=>s==="br"||CP(t)?"valid":lA(t)?"existing":Ds(t.dom)?"caret":!ri(e,n,s)||!ri(e,Ct(o),n)?"invalid-child":"valid"),vP=(e,t)=>{const n=ai(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},GC=(e,r,s,o)=>{var i=r,{uid:t=cb("mce-annotation")}=i,n=Uw(i,["uid"]);const a=w.fromTag("span",e);Vi(a,yf()),fn(a,`${kl()}`,t),fn(a,`${ta()}`,s);const{attributes:c={},classes:f=[]}=o(t,n);return Ss(a,c),dA(a,f),a},EP=(e,t,n,s,o)=>{const r=[],i=GC(e.getDoc(),o,n,s),a=To(),c=()=>{a.clear()},f=()=>a.get().getOrThunk(()=>{const C=Jr(i);return r.push(C),a.set(C),C}),d=C=>{A(C,p)},p=C=>{switch(yP(e,C,"span",Ct(C))){case"invalid-child":{c();const v=Yt(C);d(v),c();break}case"valid":{const v=f();EN(C,v);break}}},y=C=>{const S=U(C,w.fromDom);d(S)};return pa(e.dom,t,C=>{c(),y(C)}),r},xP=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=li(e).length>0;if(r.collapsed&&!i&&vP(e,r),o.getRng().collapsed&&!i){const a=GC(e.getDoc(),s,t,n.decorate);Gu(a,Xt),o.getRng().insertNode(a.dom),o.select(a.dom)}else Zf(o,!1,()=>{Qf(e,a=>{EP(e,a,t,n.decorate,s)})})})},YC=e=>{const t=fA();uA(e,t);const n=cA(e,t);return{register:(s,o)=>{t.register(s,o)},annotate:(s,o)=>{t.lookup(s).each(r=>{xP(e,s,r,o)})},annotationChanged:(s,o)=>{n.addListener(s,o)},remove:s=>{const o=e.selection.getBookmark();rb(e,b.some(s)).each(({elements:r})=>{A(r,xo)}),e.selection.moveToBookmark(o)},removeAll:s=>{const o=e.selection.getBookmark();bt(ab(e,s),(r,i)=>A(r,xo)),e.selection.moveToBookmark(o)},getAll:s=>{const o=ab(e,s);return Li(o,r=>U(r,i=>i.dom))}}},ha=e=>({getBookmark:re(XR,e),moveToBookmark:re(QR,e)});ha.isBookmarkNode=Mn;const XC=(e,t,n)=>n.collapsed?!1:M(n.getClientRects(),s=>hA(s,e,t)),SP=(e,t)=>e.dispatch("PreProcess",t),wP=(e,t)=>e.dispatch("PostProcess",t),_P=e=>e.dispatch("remove"),kP=e=>e.dispatch("detach"),NP=(e,t)=>e.dispatch("SwitchMode",{mode:t}),TP=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},AP=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},RP=e=>e.dispatch("PreInit"),PP=e=>e.dispatch("PostRender"),OP=e=>e.dispatch("Init"),DP=(e,t)=>e.dispatch("PlaceholderToggle",{state:t}),QC=(e,t,n)=>e.dispatch(t,n),ZC=(e,t,n,s)=>e.dispatch("FormatApply",{format:t,node:n,vars:s}),ed=(e,t,n,s)=>e.dispatch("FormatRemove",{format:t,node:n,vars:s}),BP=(e,t)=>e.dispatch("BeforeSetContent",t),JC=(e,t)=>e.dispatch("SetContent",t),IP=(e,t)=>e.dispatch("BeforeGetContent",t),ey=(e,t)=>e.dispatch("GetContent",t),$P=(e,t)=>e.dispatch("AutocompleterStart",t),LP=(e,t)=>e.dispatch("AutocompleterUpdate",t),FP=e=>e.dispatch("AutocompleterEnd"),MP=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),UP=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),ty=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ge={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ge.metaKeyPressed(e),metaKeyPressed:e=>et.os.isMacOS()||et.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ny=(e,t)=>{const n="data-mce-selected",s=t.dom,o=G.each;let r,i,a,c,f,d,p,y,C,S,v,E,_,P,z;const I=t.getDoc(),$=document,te=Math.abs,W=Math.round,q=t.getBody();let Z,ee;const xe={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ae=Y=>Ne(Y)&&(Dh(Y)||t.dom.is(Y,"figure.image")),se=Y=>_s(Y)||s.hasClass(Y,"mce-preview-object"),Ge=(Y,he)=>{if(Y.type==="longpress"||Y.type.indexOf("touch")===0){const Ae=Y.touches[0];return ae(Y.target)&&!XC(Ae.clientX,Ae.clientY,he)}else return ae(Y.target)&&!XC(Y.clientX,Y.clientY,he)},je=Y=>{const he=Y.target;Ge(Y,t.selection.getRng())&&!Y.isDefaultPrevented()&&t.selection.select(he)},ct=Y=>s.is(Y,"figure.image")?[Y.querySelector("img")]:s.hasClass(Y,"mce-preview-object")&&Ne(Y.firstElementChild)?[Y,Y.firstElementChild]:[Y],qt=Y=>{const he=Xb(t);return!he||Y.getAttribute("data-mce-resize")==="false"||Y===t.getBody()?!1:s.hasClass(Y,"mce-preview-object")?Js(w.fromDom(Y.firstElementChild),he):Js(w.fromDom(Y),he)},J=Y=>se(Y)?s.create("img",{src:et.transparentSrc}):Y.cloneNode(!0),pe=(Y,he,Ae)=>{if(Ne(Ae)){const Re=ct(Y);A(Re,qe=>{qe.style[he]||!t.schema.isValid(qe.nodeName.toLowerCase(),he)?s.setStyle(qe,he,Ae):s.setAttrib(qe,he,""+Ae)})}},Me=(Y,he,Ae)=>{pe(Y,"width",he),pe(Y,"height",Ae)},De=Y=>{let he,Ae,Re,qe,ze;he=Y.screenX-d,Ae=Y.screenY-p,P=he*c[2]+S,z=Ae*c[3]+v,P=P<5?5:P,z=z<5?5:z,(ae(r)||se(r))&&S1(t)!==!1?Re=!ge.modifierPressed(Y):Re=ge.modifierPressed(Y),Re&&(te(he)>te(Ae)?(z=W(P*E),P=W(z/E)):(P=W(z/E),z=W(P*E))),Me(i,P,z),qe=c.startPos.x+he,ze=c.startPos.y+Ae,qe=qe>0?qe:0,ze=ze>0?ze:0,s.setStyles(a,{left:qe,top:ze,display:"block"}),a.innerHTML=P+" &times; "+z,c[2]<0&&i.clientWidth<=P&&s.setStyle(i,"left",y+(S-P)),c[3]<0&&i.clientHeight<=z&&s.setStyle(i,"top",C+(v-z)),he=q.scrollWidth-Z,Ae=q.scrollHeight-ee,he+Ae!==0&&s.setStyles(a,{left:qe-he,top:ze-Ae}),_||(TP(t,r,S,v,"corner-"+c.name),_=!0)},me=()=>{const Y=_;_=!1,Y&&(pe(r,"width",P),pe(r,"height",z)),s.unbind(I,"mousemove",De),s.unbind(I,"mouseup",me),$!==I&&(s.unbind($,"mousemove",De),s.unbind($,"mouseup",me)),s.remove(i),s.remove(a),s.remove(f),le(r),Y&&(AP(t,r,P,z,"corner-"+c.name),s.setAttrib(r,"style",s.getAttrib(r,"style"))),t.nodeChanged()},le=Y=>{yt();const he=s.getPos(Y,q),Ae=he.x,Re=he.y,qe=Y.getBoundingClientRect(),ze=qe.width||qe.right-qe.left,Le=qe.height||qe.bottom-qe.top;r!==Y&&(Se(),r=Y,P=z=0);const vt=t.dispatch("ObjectSelected",{target:Y}),Qt=s.getAttrib(r,n,"1");qt(Y)&&!vt.isDefaultPrevented()?o(xe,(Zt,Bt)=>{let Ft;const Jt=At=>{const hn=ct(r)[0];d=At.screenX,p=At.screenY,S=hn.clientWidth,v=hn.clientHeight,E=v/S,c=Zt,c.name=Bt,c.startPos={x:ze*Zt[0]+Ae,y:Le*Zt[1]+Re},Z=q.scrollWidth,ee=q.scrollHeight,f=s.add(q,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(f,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=J(r),s.addClass(i,"mce-clonedresizable"),s.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",s.setStyles(i,{left:Ae,top:Re,margin:0}),Me(i,ze,Le),i.removeAttribute(n),q.appendChild(i),s.bind(I,"mousemove",De),s.bind(I,"mouseup",me),$!==I&&(s.bind($,"mousemove",De),s.bind($,"mouseup",me)),a=s.add(q,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},S+" &times; "+v)};Ft=s.get("mceResizeHandle"+Bt),Ft&&s.remove(Ft),Ft=s.add(q,"div",{id:"mceResizeHandle"+Bt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Bt+"-resize; margin:0; padding:0"}),s.bind(Ft,"mousedown",At=>{At.stopImmediatePropagation(),At.preventDefault(),Jt(At)}),Zt.elm=Ft,s.setStyles(Ft,{left:ze*Zt[0]+Ae-Ft.offsetWidth/2,top:Le*Zt[1]+Re-Ft.offsetHeight/2})}):Se(),s.getAttrib(r,n)||r.setAttribute(n,Qt)},Se=()=>{yt(),r&&r.removeAttribute(n),bt(xe,(Y,he)=>{const Ae=s.get("mceResizeHandle"+he);Ae&&(s.unbind(Ae),s.remove(Ae))})},Be=Y=>{var he;let Ae,Re;const qe=(ze,Le)=>{if(ze)do if(ze===Le)return!0;while(ze=ze.parentNode)};if(!(_||t.removed)){if(o(s.select("img[data-mce-selected],hr[data-mce-selected]"),ze=>{ze.removeAttribute(n)}),Re=Y.type==="mousedown"?Y.target:e.getNode(),Re=(he=er(w.fromDom(Re),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())===null||he===void 0?void 0:he.dom,qe(Re,q)&&(Lt(),Ae=e.getStart(!0),qe(Ae,Re)&&qe(e.getEnd(!0),Re))){le(Re);return}Se()}},yt=()=>{bt(xe,Y=>{Y.elm&&(s.unbind(Y.elm),delete Y.elm)})},Lt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Lt();const Y=_l(he=>{t.composing||Be(he)},0);t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",Y.throttle),t.on("keyup compositionend",he=>{r&&r.nodeName==="TABLE"&&Y.throttle(he)}),t.on("hide blur",Se),t.on("contextmenu longpress",je,!0)}),t.on("remove",yt),{isResizable:qt,showResizeRect:le,hideResizeRect:Se,updateResizeRect:Be,destroy:()=>{r=i=f=null}}},zP=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},HP=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},sy=(e,t,n)=>{const s=e.document.createRange();return zP(s,t),HP(s,n),s},td=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},ba=Ns.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),oy=(e,t,n)=>t(w.fromDom(n.startContainer),n.startOffset,w.fromDom(n.endContainer),n.endOffset),VP=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:b.none}),relative:(n,s)=>({ltr:Ko(()=>sy(e,n,s)),rtl:Ko(()=>b.some(sy(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Ko(()=>td(e,n,s,o,r)),rtl:Ko(()=>b.some(td(e,o,r,n,s)))})}),WP=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>ba.rtl(w.fromDom(o.endContainer),o.endOffset,w.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>oy(e,ba.ltr,n)):oy(e,ba.ltr,n)},jP=(e,t)=>{const n=VP(e,t);return WP(e,n)};ba.ltr,ba.rtl;const ry={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},qP=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return b.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),b.some(i)})},KP=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},GP=(()=>document.caretPositionFromPoint?qP:document.caretRangeFromPoint?KP:b.none)(),YP=(e,t,n)=>{const s=w.fromDom(e.document);return GP(s,t,n).map(o=>ry.create(w.fromDom(o.startContainer),o.startOffset,w.fromDom(o.endContainer),o.endOffset))},nd=Ns.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),XP=(e,t,n,s)=>e.fold(t,n,s),QP=e=>e.fold(xt,xt,xt),ZP=nd.before,JP=nd.on,eO=nd.after,oo={before:ZP,on:JP,after:eO,cata:XP,getStart:QP},jl=Ns.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),tO=e=>jl.exact(e.start,e.soffset,e.finish,e.foffset),nO=e=>e.match({domRange:t=>w.fromDom(t.startContainer),relative:(t,n)=>oo.getStart(t),exact:(t,n,s,o)=>t}),sO=jl.domRange,oO=jl.relative,rO=jl.exact,iO=e=>{const t=nO(e);return uh(t)},aO=ry.create,ci={domRange:sO,relative:oO,exact:rO,exactFromRange:tO,getWin:iO,range:aO},ql=(e,t)=>{const n=Ct(e);return n==="input"?oo.after(e):R(["br","img"],n)?t===0?oo.before(e):oo.after(e):oo.on(e,t)},lO=(e,t)=>{const n=e.fold(oo.before,ql,oo.after),s=t.fold(oo.before,ql,oo.after);return ci.relative(n,s)},iy=(e,t,n,s)=>{const o=ql(e,t),r=ql(n,s);return ci.relative(o,r)},cO=e=>e.match({domRange:t=>{const n=w.fromDom(t.startContainer),s=w.fromDom(t.endContainer);return iy(n,t.startOffset,s,t.endOffset)},relative:lO,exact:iy}),sd=(e,t)=>{const s=(t||document).createDocumentFragment();return A(e,o=>{s.appendChild(o.dom)}),w.fromDom(s)},uO=e=>{const t=ci.getWin(e).dom,n=(o,r,i,a)=>td(t,o,r,i,a),s=cO(e);return jP(t,s).match({ltr:n,rtl:n})},fO=(e,t,n)=>YP(e,t,n),ay=(e,t,n)=>fO(n.defaultView,e,t).map(s=>{const o=n.createRange();return o.setStart(s.start.dom,s.soffset),o.setEnd(s.finish.dom,s.foffset),o}).getOrUndefined(),od=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,dO=(e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},ly=(e,t,n)=>dO(e,t,n)!==null,mO=(e,t,n)=>ly(e,t,s=>s.nodeName===n),rd=e=>e&&e.nodeName==="TABLE",pO=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),gO=(e,t)=>Ln(e)&&ly(e,t,Ds)===!1,cy=(e,t,n)=>{const s=new zt(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=s[n?"prev":"next"]();)if(Dt(t))return!0},hO=(e,t)=>e.previousSibling&&e.previousSibling.nodeName===t,bO=(e,t)=>{for(;t&&t!==e;){if(St(t))return!0;t=t.parentNode}return!1},id=(e,t,n,s,o)=>{let r;const i=e.getRoot();let a;const c=e.schema.getNonEmptyElements(),f=e.getParent(o.parentNode,e.isBlock)||i;if(s&&Dt(o)&&t&&e.isEmpty(f))return b.some(F(o.parentNode,e.nodeIndex(o)));const d=new zt(o,f);for(;a=d[s?"prev":"next"]();){if(e.getContentEditableParent(a)==="false"||gO(a,i))return b.none();if(ne(a)&&a.nodeValue.length>0)return mO(a,i,"A")===!1?b.some(F(a,s?a.nodeValue.length:0)):b.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return b.none();r=a}return n&&r?b.some(F(r,0)):b.none()},uy=(e,t,n,s)=>{let o,r;const i=e.getRoot();let a,c,f=!1;o=s[(n?"start":"end")+"Container"],r=s[(n?"start":"end")+"Offset"];const d=Ee(o)&&r===o.childNodes.length,p=e.schema.getNonEmptyElements();if(c=n,Ln(o))return b.none();if(Ee(o)&&r>o.childNodes.length-1&&(c=!1),Zu(o)&&(o=i,r=0),o===i){if(c&&(a=o.childNodes[r>0?r-1:0],a&&(Ln(a)||p[a.nodeName]||rd(a))))return b.none();if(o.hasChildNodes()){if(r=Math.min(!c&&r>0?r-1:r,o.childNodes.length-1),o=o.childNodes[r],r=ne(o)&&d?o.data.length:0,!t&&o===i.lastChild&&rd(o)||bO(i,o)||Ln(o))return b.none();if(o.hasChildNodes()&&rd(o)===!1){a=o;const y=new zt(o,i);do{if(St(a)||Ln(a)){f=!1;break}if(ne(a)&&a.nodeValue.length>0){r=c?0:a.nodeValue.length,o=a,f=!0;break}if(p[a.nodeName.toLowerCase()]&&!pO(a)){r=e.nodeIndex(a),o=a.parentNode,c||r++,f=!0;break}}while(a=c?y.next():y.prev())}}}return t&&(ne(o)&&r===0&&id(e,d,t,!0,o).each(y=>{o=y.container(),r=y.offset(),f=!0}),Ee(o)&&(a=o.childNodes[r],a||(a=o.childNodes[r-1]),a&&Dt(a)&&!hO(a,"A")&&!cy(e,a,!1)&&!cy(e,a,!0)&&id(e,d,t,!0,a).each(y=>{o=y.container(),r=y.offset(),f=!0}))),c&&!t&&ne(o)&&r===o.nodeValue.length&&id(e,d,t,!1,o).each(y=>{o=y.container(),r=y.offset(),f=!0}),f?b.some(F(o,r)):b.none()},Kl=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=F.fromRangeStart(t);return uy(e,n,!0,s).each(r=>{(!n||!F.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||uy(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),od(t,s)?b.none():b.some(s)},Gl=(e,t)=>e.splitText(t),Yl=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;return t===s&&ne(t)?n>0&&n<t.nodeValue.length&&(s=Gl(t,n),t=s.previousSibling,o>n?(o=o-n,t=s=Gl(s,o).previousSibling,o=s.nodeValue.length,n=0):o=0):(ne(t)&&n>0&&n<t.nodeValue.length&&(t=Gl(t,n),n=0),ne(s)&&o>0&&o<s.nodeValue.length&&(s=Gl(s,o).previousSibling,o=s.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},ui=e=>({walk:(o,r)=>pa(e,o,r),split:Yl,normalize:o=>Kl(e,o).fold(pt,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});ui.compareRanges=od,ui.getCaretRangeFromPoint=ay,ui.getSelectedNode=Nl,ui.getNode=Ao;const CO=((e,t)=>{const n=(a,c)=>{if(!yn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;Wi(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=ws(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>Q(c,(f,d)=>{const p=ws(a,d),y=p===void 0?0:parseInt(p,10);return isNaN(y)?f:f+y},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const d=r(a,f);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Vr(e)?t.getBoundingClientRect().height:t.offsetHeight}),yO=e=>CO.get(e),fy=()=>w.fromDom(document),dy=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=dy(e,o);return[s].concat(r)}),vO=(e,t)=>{const n=t.owner(e);return dy(t,n)};var EO=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(w.fromDom)},owner:e=>vo(e)});const xO=e=>{const t=fy(),n=Xu(t),s=vO(e,EO),o=Yu(e),r=fe(s,(i,a)=>{const c=Yu(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return Wr(r.left+o.left+n.left,r.top+o.top+n.top)},ad=e=>Ct(e)==="textarea",SO=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),wO=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},_O=(e,t)=>{const n=Yt(e);if(n.length===0||ad(e))return{element:e,offset:t};if(t<n.length&&!ad(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return ad(s)?{element:e,offset:t}:Ct(s)==="img"?{element:s,offset:1}:In(s)?{element:s,offset:Jf(s).length}:{element:s,offset:Yt(s).length}}},my=(e,t)=>{const n=DN(e),s=yO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},kO=(e,t)=>{const n=_O(e,t),s=w.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Kt+"</span>");return Xn(n.element,s),my(s,()=>Tt(s))},NO=e=>my(w.fromDom(e),Ie),py=(e,t,n,s)=>{AO(e,(o,r)=>TO(e,t,n,s),n)},gy=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(SO(e,r))return;const i=Xu(t).top;n(t,i,s,o),wO(e,r)},TO=(e,t,n,s)=>{const o=w.fromDom(e.getBody()),r=w.fromDom(e.getDoc());vN(o);const i=kO(w.fromDom(n.startContainer),n.startOffset);gy(e,r,t,i,s),i.cleanup()},hy=(e,t,n,s)=>{const o=w.fromDom(e.getDoc());gy(e,o,n,NO(t),s)},AO=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(w.fromDom(s),w.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},ld=(e,t,n,s)=>{const o=e.pos;if(n)kh(o.left,o.top,s);else{const r=o.top-t+e.height;kh(o.left,r,s)}},by=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?ld(s,n,o!==!1,e):i>r?ld(s,n,c?o!==!1:o===!0,e):a>r&&!c&&ld(s,n,o===!0,e)},Cy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;by(e,t,o,n,s)},yy=(e,t,n,s)=>{const o=e.dom.defaultView.innerHeight;by(e,t,o,n,s);const r=xO(n.element),i=Ah(window);r.top<i.y?Nh(n.element,s!==!1):r.top>i.bottom&&Nh(n.element,s===!0)},RO=(e,t,n)=>py(e,Cy,t,n),PO=(e,t,n)=>hy(e,t,Cy,n),OO=(e,t,n)=>py(e,yy,t,n),DO=(e,t,n)=>hy(e,t,yy,n),BO=(e,t,n)=>{(e.inline?PO:DO)(e,t,n)},Ca=(e,t,n)=>{(e.inline?RO:OO)(e,t,n)},vy=e=>e.dom.focus(),Ey=e=>{const t=Xo(e).dom;return e.dom===t.activeElement},cd=(e=fy())=>b.from(e.dom.activeElement).map(w.fromDom),IO=e=>cd(Xo(e)).filter(t=>e.dom.contains(t.dom)),xy=(e,t)=>{const n=In(t)?Jf(t).length:Yt(t).length+1;return e>n?n:e<0?0:e},$O=e=>ci.range(e.start,xy(e.soffset,e.start),e.finish,xy(e.foffset,e.finish)),Sy=(e,t)=>!fl(t.dom)&&(eo(e,t)||tt(e,t)),wy=e=>t=>Sy(e,t.start)&&Sy(e,t.finish),LO=e=>e.inline,FO=e=>ci.range(w.fromDom(e.startContainer),e.startOffset,w.fromDom(e.endContainer),e.endOffset),MO=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(FO)},UO=e=>{const t=uh(e);return MO(t.dom).filter(wy(e))},zO=(e,t)=>b.from(t).filter(wy(e)).map($O),HO=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},ud=e=>{const t=LO(e)?UO(w.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},fd=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>zO(w.fromDom(e.getBody()),n)).bind(HO),VO=e=>{fd(e).each(t=>e.selection.setRng(t))},_y={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},WO=(e,t)=>(yn(t)||(t=0),setTimeout(e,t)),jO=(e,t)=>(yn(t)||(t=0),setInterval(e,t)),Un={setEditorTimeout:(e,t,n)=>WO(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=jO(()=>{e.removed?clearInterval(s):t()},n);return s}},qO=e=>e.type==="nodechange"&&e.selectionChange,KO=(e,t)=>{const n=()=>{t.throttle()};ot.DOM.bind(document,"mouseup",n),e.on("remove",()=>{ot.DOM.unbind(document,"mouseup",n)})},GO=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},YO=(e,t)=>{GO(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{qO(n)||ud(e)})},XO=e=>{const t=_l(()=>{ud(e)},0);e.on("init",()=>{e.inline&&KO(e,t),YO(e,t)}),e.on("remove",()=>{t.cancel()})};let ya;const dd=ot.DOM,QO=e=>_y.isEditorUIElement(e),ZO=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Xl=(e,t)=>{const n=P1(e);return dd.getParent(t,o=>QO(o)||(n?e.dom.is(o,n):!1))!==null},JO=e=>{try{const t=Xo(w.fromDom(e.getElement()));return cd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},eD=(e,t)=>{const n=t.editor;XO(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Un.setEditorTimeout(n,()=>{const s=e.focusedEditor;!Xl(n,JO(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ya||(ya=s=>{const o=e.activeEditor;o&&bh(s).each(r=>{r.ownerDocument===document&&r!==document.body&&!Xl(o,r)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},dd.bind(document,"focusin",ya))},tD=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(dd.unbind(document,"focusin",ya),ya=null)},nD=e=>{e.on("AddEditor",re(eD,e)),e.on("RemoveEditor",re(tD,e))},sD=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),oD=e=>e.collapsed?b.from(Ao(e.startContainer,e.startOffset)).map(w.fromDom):b.none(),rD=(e,t)=>oD(t).bind(n=>tT(n)?b.some(n):eo(e,n)===!1?b.some(e):b.none()),ky=(e,t)=>{rD(w.fromDom(e.getBody()),t).bind(n=>mn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},md=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},iD=e=>Ey(e)||IO(e).isSome(),aD=e=>e.iframeElement&&Ey(w.fromDom(e.iframeElement)),lD=e=>{const t=e.getBody();return t&&iD(w.fromDom(t))},cD=e=>{const t=Xo(w.fromDom(e.getElement()));return cd(t).filter(n=>!ZO(n.dom)&&Xl(e,n.dom)).isSome()},fr=e=>e.inline?lD(e):aD(e),uD=e=>fr(e)||cD(e),fD=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&fr(e)===!1&&fd(e).each(r=>{e.selection.setRng(r),s=r});const o=sD(e,t.getNode());if(e.dom.isChildOf(o,n)){md(o),ky(e,s),pd(e);return}e.inline||(et.browser.isOpera()||md(n),e.getWin().focus()),(et.browser.isFirefox()||e.inline)&&(md(n),ky(e,s)),pd(e)},pd=e=>e.editorManager.setActive(e),dD=(e,t)=>{e.removed||(t?pd(e):fD(e))},Ny=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(w.fromDom).map(a=>!s||!t.collapsed?al(a,o(a,i)).getOr(a):a).bind(a=>Kn(a)?b.some(a):Yn(a).filter(Kn)).map(a=>a.dom).getOr(e)},Ty=(e,t,n)=>Ny(e,t,!0,n,(s,o)=>Math.min(ph(s),o)),Ay=(e,t,n)=>Ny(e,t,!1,n,(s,o)=>o>0?o-1:o),Ry=(e,t)=>{const n=e;for(;e&&ne(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},mD=(e,t)=>{let n,s,o;if(!t)return e;s=t.startContainer,o=t.endContainer;const r=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(s===o&&i-r<2&&s.hasChildNodes()&&(n=s.childNodes[r]),s.nodeType===3&&o.nodeType===3&&(s.length===r?s=Ry(s.nextSibling,!0):s=s.parentNode,i===0?o=Ry(o.previousSibling,!1):o=o.parentNode,s&&s===o))?s:n&&n.nodeType===3?n.parentNode:n},pD=(e,t,n,s)=>{let o;const r=[],i=e.getRoot();if(n=e.getParent(n||Ty(i,t,t.collapsed),e.isBlock),s=e.getParent(s||Ay(i,t,t.collapsed),e.isBlock),n&&n!==i&&r.push(n),n&&s&&n!==s){o=n;const a=new zt(n,i);for(;(o=a.next())&&o!==s;)e.isBlock(o)&&r.push(o)}return s&&n!==s&&s!==i&&r.push(s),r},gD=(e,t,n)=>b.from(t).map(s=>{const o=e.nodeIndex(s),r=e.createRng();return r.setStart(s.parentNode,o),r.setEnd(s.parentNode,o+1),n&&(Xf(e,r,s,!0),Xf(e,r,s,!1)),r}),gd=(e,t)=>U(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),hD=e=>Ct(e)==="img"?1:KC(e).fold(()=>Yt(e).length,t=>t.length),bD=e=>KC(e).filter(t=>t.trim().length!==0||t.indexOf(Xt)>-1).isSome(),CD=["img","br"],Py=e=>bD(e)||R(CD,Ct(e)),yD=e=>WN(e,Py),vD=e=>ED(e,Py),ED=(e,t)=>{const n=s=>{const o=Yt(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return b.some(i);const a=n(i);if(a.isSome())return a}return b.none()};return n(e)},Oy="[data-mce-autocompleter]",xD=(e,t)=>{if(Dy(w.fromDom(e.getBody())).isNone()){const n=w.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());It(n,w.fromDom(t.extractContents())),t.insertNode(n.dom),Yn(n).each(s=>s.dom.normalize()),vD(n).map(s=>{e.selection.setCursorLocation(s.dom,hD(s))})}},SD=e=>er(e,Oy),Dy=e=>Xi(e,Oy),wD=(e,t)=>Dy(t).each(n=>{const s=e.selection.getBookmark();xo(n),e.selection.moveToBookmark(s)}),_D={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ql=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},kD=e=>{if(!tr(e.value))return!1;const t=e.parent;return!(t&&(t.name!=="span"||t.attr("style"))&&/^[ ]+$/.test(e.value))},By=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class pn{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new pn(t,_D[t]||1);return n&&bt(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;let o;if(typeof t!="string")return t!=null&&bt(t,(r,i)=>{s.attr(i,r)}),s;if(o=s.attributes){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new pn(t.name,t.type);let s;if(s=t.attributes){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent.insert(t,n),t.append(n),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o.next=s,n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s.prev=o,t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev.next=t,t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next.prev=t,t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Ql(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Ql(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){const o=this;let r=o.firstChild;if(By(o))return!1;if(r)do{if(r.type===1){if(r.attr("data-mce-bogus"))continue;if(t[r.name]||By(r))return!1}if(r.type===8||r.type===3&&!kD(r)||r.type===3&&r.parent&&n[r.parent.name]&&tr(r.value)||s&&s(r))return!1}while(r=Ql(r,o));return!0}walk(t){return Ql(this,null,t)}}const ND=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),Iy=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&ND(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},TD=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){qn(c[2],"--")?a=Iy(t,!1,c.index+3):a=Iy(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Ys(f)||f.index!==s.lastIndex)continue;c[1]==="/"?i-=1:Fe(r,c[2])||(i+=1),a=s.lastIndex+f[0].length;break}}return a},AD=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},$y=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=AD(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let f;r[i[1]]?f=a:f=TD(s,o,a),o=o.substring(0,a-c)+o.substring(f),n.lastIndex=a-c}return wo(o)},RD=$y,PD=(e,t)=>{const n=Sn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},OD=(e,t,n)=>{let s;return t.format==="raw"?s=G.trim(RD(e.serializer,n.innerHTML)):t.format==="text"?s=e.dom.isEmpty(n)?"":wo(n.innerText||n.textContent):t.format==="tree"?s=e.serializer.serialize(n,t):s=PD(e,e.serializer.serialize(n,t)),t.format!=="text"&&!hl(w.fromDom(n))&&be(s)?G.trim(s):s},DD=(e,t)=>b.from(e.getBody()).fold(K(t.format==="tree"?new pn("body",11):""),n=>OD(e,t,n)),BD=G.each,Ly=e=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const o=i=>{const a={};return BD(e.getAttribs(i),c=>{const f=c.nodeName.toLowerCase();f.indexOf("_")!==0&&f!=="style"&&f.indexOf("data-")!==0&&(a[f]=e.getAttrib(i,f))}),a},r=(i,a)=>{let c,f;for(f in i)if(Fe(i,f)){if(c=a[f],typeof c=="undefined"||i[f]!==c)return!1;delete a[f]}for(f in a)if(Fe(a,f))return!1;return!0};return!r(o(n),o(s))||!r(e.parseStyle(e.getAttrib(n,"style")),e.parseStyle(e.getAttrib(s,"style")))?!1:!Mn(n)&&!Mn(s)}}),Fy=G.makeMap,My=e=>{const t=[];e=e||{};const n=e.indent,s=Fy(e.indent_before||""),o=Fy(e.indent_after||""),r=_o.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{let d,p,y,C;if(n&&s[a]&&t.length>0&&(C=t[t.length-1],C.length>0&&C!==`
`&&t.push(`
`)),t.push("<",a),c)for(d=0,p=c.length;d<p;d++)y=c[d],t.push(" ",y.name,'="',r(y.value,!0),'"');!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0&&(C=t[t.length-1],C.length>0&&C!==`
`&&t.push(`
`))},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Oo=(e,t=No())=>{const n=My(e);return e=e||{},e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{n.text(c.value,c.raw)},8:c=>{n.comment(c.value)},7:c=>{n.pi(c.name,c.value)},10:c=>{n.doctype(c.value)},4:c=>{n.cdata(c.value)},11:c=>{if(c=c.firstChild)do a(c);while(c=c.next)}};n.reset();const a=c=>{const f=i[c.type];if(f)f(c);else{const d=c.name,p=d in t.getVoidElements();let y=c.attributes;if(r&&y&&y.length>1){const C=[];C.map={};const S=t.getElementRule(c.name);if(S){for(let v=0,E=S.attributesOrder.length;v<E;v++){const _=S.attributesOrder[v];if(_ in y.map){const P=y.map[_];C.map[_]=P,C.push({name:_,value:P})}}for(let v=0,E=y.length;v<E;v++){const _=y[v].name;if(!(_ in C.map)){const P=y.map[_];C.map[_]=P,C.push({name:_,value:P})}}y=C}}if(n.start(d,y,p),!p){let C=c.firstChild;if(C){(d==="pre"||d==="textarea")&&C.type===3&&C.value[0]===`
`&&n.text(`
`,!0);do a(C);while(C=C.next)}n.end(d)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},Uy=new Set;A(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Uy.add(t)});const zy=["font","text-decoration","text-emphasis"],hd=(e,t)=>es(e.parseStyle(e.getAttrib(t,"style"))),ID=e=>Uy.has(e),$D=(e,t)=>at(hd(e,t),n=>!ID(n)),LD=e=>H(e,t=>M(zy,n=>qn(t,n))),FD=(e,t,n)=>{const s=hd(e,t),o=hd(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Qs(f)&&Qs(d)&&f!==d};return M(s,i=>{const a=c=>M(c,f=>f===i);if(!a(o)&&a(zy)){const c=LD(o);return M(c,r)}else return r(i)})},Hy=(e,t,n)=>b.from(n.container()).filter(ne).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),bd=re(Hy,!0,ma),Cd=re(Hy,!1,ma),MD=e=>{const t=e.container();return ne(t)&&(t.data.length===0||bl(t.data)&&ha.isBookmarkNode(t.parentNode))},Do=(e,t)=>n=>b.from(Bf(e?0:-1,n)).filter(t).isSome(),Vy=e=>Dh(e)&&ws(w.fromDom(e),"display")==="block",Wy=e=>St(e)&&!$N(e),UD=Do(!0,Vy),zD=Do(!1,Vy),va=Do(!0,_s),Ea=Do(!1,_s),jy=Do(!0,Gi),qy=Do(!1,Gi),dr=Do(!0,Wy),mr=Do(!1,Wy),HD=e=>{const t=[];let n=e.dom;for(;n;)t.push(w.fromDom(n)),n=n.lastChild;return t},VD=e=>{const t=xn(e,"br"),n=H(HD(e).slice(-1),qr);t.length===n.length&&A(n,Tt)},pr=e=>{Ki(e),It(e,w.fromHtml('<br data-mce-bogus="1">'))},WD=e=>{qu(e).each(t=>{Yo(t).each(n=>{ks(e)&&qr(t)&&ks(n)&&Tt(t)})})},jD=e=>e.slice(0,-1),qD=(e,t,n)=>eo(t,e)?jD(dN(e,s=>n(s)||tt(s,t))):[],Ky=(e,t)=>qD(e,t,pt),ro=(e,t)=>[e].concat(Ky(e,t)),yd=(e,t,n)=>SC(e,t,n,MD),Gy=(e,t)=>de(ro(w.fromDom(t.container()),e),ks),Yy=(e,t,n)=>yd(e,t.dom,n).forall(s=>Gy(t,n).fold(()=>Ts(s,n,t.dom)===!1,o=>Ts(s,n,t.dom)===!1&&eo(o,w.fromDom(s.container())))),Xy=(e,t,n)=>Gy(t,n).fold(()=>yd(e,t.dom,n).forall(s=>Ts(s,n,t.dom)===!1),s=>yd(e,s.dom,n).isNone()),vd=re(Xy,!1),Qy=re(Xy,!0),KD=re(Yy,!1),GD=re(Yy,!0),YD=e=>Bl(e).exists(qr),Zl=(e,t,n)=>{const s=H(ro(w.fromDom(n.container()),t),ks),o=Ut(s).getOr(t);return Fn(e,o.dom,n).filter(YD)},Ed=(e,t)=>Bl(t).exists(qr)||Zl(!0,e,t).isSome(),xd=(e,t)=>RR(t).exists(qr)||Zl(!1,e,t).isSome(),XD=re(Zl,!1),QD=re(Zl,!0),Zy=e=>F.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Jy=(e,t)=>{const n=H(ro(w.fromDom(t.container()),e),ks);return Ut(n).getOr(e)},ev=(e,t)=>Zy(t)?Cd(t):Cd(t)||Ps(Jy(e,t).dom,t).exists(Cd),tv=(e,t)=>Zy(t)?bd(t):bd(t)||os(Jy(e,t).dom,t).exists(bd),ZD=e=>R(["pre","pre-wrap"],e),Sd=e=>Bl(e).bind(t=>pl(t,Kn)).exists(t=>ZD(ws(t,"white-space"))),JD=(e,t)=>Ps(e.dom,t).isNone(),eB=(e,t)=>os(e.dom,t).isNone(),tB=(e,t)=>JD(e,t)||eB(e,t)||vd(e,t)||Qy(e,t)||xd(e,t)||Ed(e,t),nB=(e,t)=>Sd(t)?!1:tB(e,t)||ev(e,t)||tv(e,t),Jl=(e,t)=>Sd(t)?!1:vd(e,t)||KD(e,t)||xd(e,t)||ev(e,t),sB=e=>{const t=e.container(),n=e.offset();return ne(t)&&n<t.data.length?F(t,n+1):e},ec=(e,t)=>Sd(t)?!1:Qy(e,t)||GD(e,t)||Ed(e,t)||tv(e,t),nv=(e,t)=>Jl(e,t)||ec(e,sB(t)),sv=(e,t)=>Fl(e.charAt(t)),oB=e=>{const t=e.container();return ne(t)&&un(t.data,Xt)},rB=e=>{const t=e.split("");return U(t,(n,s)=>Fl(n)&&s>0&&s<t.length-1&&Uf(t[s-1])&&Uf(t[s+1])?" ":n).join("")},iB=(e,t)=>{const n=t.data,s=F(t,0);return sv(n,0)&&!nv(e,s)?(t.data=" "+n.slice(1),!0):!1},aB=e=>{const t=e.data,n=rB(t);return n!==t?(e.data=n,!0):!1},lB=(e,t)=>{const n=t.data,s=F(t,n.length-1);return sv(n,n.length-1)&&!nv(e,s)?(t.data=n.slice(0,-1)+" ",!0):!1},cB=(e,t)=>b.some(t).filter(oB).bind(n=>{const s=n.container();return iB(e,s)||aB(s)||lB(e,s)?b.some(n):b.none()}),uB=e=>{const t=w.fromDom(e.getBody());e.selection.isCollapsed()&&cB(t,F.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},ov=(e,t,n)=>{if(n===0)return;const s=w.fromDom(e),o=jr(s,ks).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&ec(o,F(e,e.data.length)),a=t===0&&Jl(o,F(e,0));e.replaceData(t,n,Kh(r,4,a,i))},tc=(e,t)=>{const n=e.data.slice(t),s=n.length-Ok(n).length;ov(e,t,s)},wd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-kg(n).length;ov(e,t-s,s)},_d=(e,t,n,s=!0)=>{const o=kg(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),Tt(w.fromDom(i)),n&&tc(r,o),r},fB=(e,t)=>{const n=e.container(),s=e.offset();return F.isTextPosition(e)===!1&&n===t.parentNode&&s>F.before(t).offset()},dB=(e,t)=>fB(t,e)?F(t.container(),t.offset()-1):t,mB=e=>ne(e)?F(e,0):F.before(e),pB=e=>ne(e)?F(e,e.data.length):F.after(e),rv=e=>ts(e.previousSibling)?b.some(pB(e.previousSibling)):e.previousSibling?Os(e.previousSibling):b.none(),iv=e=>ts(e.nextSibling)?b.some(mB(e.nextSibling)):e.nextSibling?mn(e.nextSibling):b.none(),gB=(e,t)=>{const n=F.before(t.previousSibling?t.previousSibling:t.parentNode);return Ps(e,n).fold(()=>os(e,F.after(t)),b.some)},hB=(e,t)=>os(e,F.after(t)).fold(()=>Ps(e,F.before(t)),b.some),bB=(e,t)=>rv(t).orThunk(()=>iv(t)).orThunk(()=>gB(e,t)),CB=(e,t)=>iv(t).orThunk(()=>rv(t)).orThunk(()=>hB(e,t)),yB=(e,t,n)=>e?CB(t,n):bB(t,n),vB=(e,t,n)=>yB(e,t,n).map(re(dB,n)),av=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},EB=e=>t=>t.dom===e,xB=(e,t)=>t&&Fe(e.schema.getBlockElements(),Ct(t)),SB=e=>{if(Ht(e)){const t=w.fromHtml('<br data-mce-bogus="1">');return Ki(e),It(e,t),b.some(F.before(t.dom))}else return b.none()},wB=(e,t,n)=>{const s=Yo(e).filter(In),o=qi(e).filter(In);return Tt(e),Yk(s,o,t,(r,i,a)=>{const c=r.dom,f=i.dom,d=c.data.length;return _d(c,f,n),a.container()===f?F(c,d):a}).orThunk(()=>(n&&(s.each(r=>wd(r.dom,r.dom.length)),o.each(r=>tc(r.dom,0))),t))},_B=(e,t)=>Fe(e.schema.getTextInlineElements(),Ct(t)),gr=(e,t,n,s=!0)=>{const o=vB(t,e.getBody(),n.dom),r=jr(n,re(xB,e),EB(e.getBody())),i=wB(n,o,_B(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(SB).fold(()=>{s&&av(e,t,i)},a=>{s&&av(e,t,b.some(a))})},kB=e=>t=>tt(e,t),kd=e=>xn(e,"td,th"),NB=(e,t)=>{const n=f=>ga(w.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=En(s,o,tt).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Nd=(e,t)=>({start:e,end:t}),TB=(e,t,n)=>({rng:e,table:t,cells:n}),xa=Ns.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),nc=(e,t)=>er(w.fromDom(e),"td,th",t),lv=e=>!tt(e.start,e.end),cv=(e,t)=>ga(e.start,t).bind(n=>ga(e.end,t).bind(s=>Vu(tt(n,s),n))),AB=(e,t)=>!lv(e)&&cv(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),RB=(e,t)=>{const n=nc(e.startContainer,t),s=nc(e.endContainer,t);return En(n,s,Nd)},PB=e=>t=>ga(t,e).bind(n=>vs(kd(n)).map(s=>Nd(t,s))),OB=e=>t=>ga(t,e).bind(n=>Ut(kd(n)).map(s=>Nd(s,t))),Td=e=>t=>cv(t,e).map(n=>TB(t,n,kd(n))),uv=(e,t,n,s)=>{if(n.collapsed||!e.forall(lv))return b.none();if(t.isSameTable){const o=e.bind(Td(s));return b.some({start:o,end:o})}else{const o=nc(n.startContainer,s),r=nc(n.endContainer,s),i=o.bind(PB(s)).bind(Td(s)),a=r.bind(OB(s)).bind(Td(s));return b.some({start:i,end:a})}},fv=(e,t)=>Te(e,n=>tt(n,t)),Ad=e=>En(fv(e.cells,e.rng.start),fv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),DB=(e,t,n)=>e.exists(s=>AB(s,n)&&Yf(s.start,t)),dv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},BB=(e,t,n,s)=>uv(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=Ad(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(xa.fullTable(o.table));if(i.length>0){if(r)return b.some(xa.partialTable(i,b.none()));{const a=dv(n,t);return b.some(xa.partialTable(i,b.some(ut(we({},t),{rng:a}))))}}else return b.none()}),IB=(e,t,n,s)=>uv(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(Ad).getOr([]),a=r.bind(Ad).getOr([]);if(i.length>0&&a.length>0){const c=dv(n,t);return b.some(xa.multiTable(i,a,c))}else return b.none()}),$B=(e,t)=>{const n=kB(e),s=RB(t,n),o=NB(t,n);return DB(s,t,n)?s.map(r=>xa.singleCellTable(t,r.start)):o.isMultiTable?IB(s,o,t,n):BB(s,o,t,n)},mv=e=>(Xk(e)?Yo(e):qu(e)).bind(mv).orThunk(()=>b.some(e)),pv=e=>A(e,t=>{Gn(t,"contenteditable"),pr(t)}),LB=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(w.fromDom),FB=(e,t,n)=>{n.each(s=>{t?Tt(s):(pr(s),e.selection.setCursorLocation(s.dom,0))})},Rd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Pd(e,o,t,!1).each(r=>r())},gv=e=>{const t=li(e),n=w.fromDom(e.selection.getNode());ml(n.dom)&&Ht(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&M(t,s=>tt(s,n))&&fn(n,"data-mce-selected","1")},hv=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=LB(e,i?r.endContainer:r.startContainer);r.deleteContents(),FB(e,i,a.filter(Ht));const c=i?t[0]:t[t.length-1];return Rd(e,c,s,i),Ht(c)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);pv(o),gv(e)}),MB=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Rd(e,r,o,!0),Rd(e,i,o,!1);const a=Ht(r)?t:t.slice(1),c=Ht(i)?n:n.slice(0,-1);pv(a.concat(c)),s.deleteContents(),gv(e)}),Pd=(e,t,n,s=!0)=>b.some(()=>{t.deleteContents();const o=mv(n).getOr(n),r=w.fromDom(e.dom.getParent(o.dom,e.dom.isBlock));if(Ht(r)&&(pr(r),s&&e.selection.setCursorLocation(r.dom,0)),!tt(n,r)){const i=Hr(Yn(r),n)?[]:mN(r);A(i.concat(Yt(n)),a=>{!tt(a,r)&&!eo(a,r)&&Ht(a)&&Tt(a)})}}),UB=(e,t)=>b.some(()=>gr(e,!1,t)),zB=(e,t,n)=>$B(t,n).bind(s=>s.fold(re(Pd,e),re(UB,e),re(hv,e),re(MB,e))),HB=(e,t)=>sc(e,t),VB=(e,t,n,s)=>Od(t,s).fold(()=>zB(e,t,n),o=>HB(e,o)),WB=(e,t,n)=>{const s=w.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?hv(e,n,b.none()):VB(e,s,o,t)},bv=(e,t)=>de(ro(t,e),gl),Od=(e,t)=>de(ro(t,e),Jk("caption")),jB=(e,t,n,s,o)=>Ll(n,e.getBody(),o).bind(r=>bv(t,w.fromDom(r.getNode())).bind(i=>tt(i,s)?b.none():b.some(Ie))),sc=(e,t)=>b.some(()=>{pr(t),e.selection.setCursorLocation(t.dom,0)}),qB=(e,t,n,s)=>mn(e.dom).bind(o=>Os(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),KB=(e,t)=>sc(e,t),GB=(e,t,n)=>Od(e,w.fromDom(n.getNode())).fold(()=>b.some(Ie),s=>Vu(!tt(s,t),Ie)),YB=(e,t,n,s,o)=>Ll(n,e.getBody(),o).fold(()=>b.some(Ie),r=>qB(s,n,o,r)?KB(e,s):GB(t,s,r)),XB=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return bv(n,s).bind(r=>Ht(r)?sc(e,r):jB(e,n,t,r,o))},QB=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return Ht(s)?sc(e,s):YB(e,n,t,s,o)},Cv=(e,t)=>e?jy(t):qy(t),ZB=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Cv(t,n)||Fn(t,e.getBody(),n).exists(s=>Cv(t,s))},JB=(e,t,n)=>{const s=w.fromDom(e.getBody());return Od(s,n).fold(()=>XB(e,t,s,n).orThunk(()=>Vu(ZB(e,t),Ie)),o=>QB(e,t,s,o))},Dd=(e,t)=>{const n=w.fromDom(e.selection.getStart(!0)),s=li(e);return e.selection.isCollapsed()&&s.length===0?JB(e,t,n):WB(e,n,s)},Sa=(e,t)=>{for(;t&&t!==e;){if(to(t)||St(t))return t;t=t.parentNode}return null},Bd=(e,t)=>{t(e),e.firstChild&&Bd(e.firstChild,t),e.next&&Bd(e.next,t)},yv=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},eI=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&Bd(n.firstChild,o=>{yv(e,t,o,s)}),s},vv=(e,t)=>{const n=s=>{bt(s,o=>{const r=H(o.nodes,i=>Ne(i.parent));A(o.filter.callbacks,i=>{i(r,o.filter.name,t)})})};n(e.nodes),n(e.attributes)},Ev=(e,t,n,s={})=>{const o=eI(e,t,n);vv(o,s)},xv=(e,t,n,s)=>{t.insert&&n[s.name]?s.empty().append(new pn("br",1)):s.empty().append(new pn("#text",3)).value=Xt},tI=e=>Sv(e,"#text")&&e.firstChild.value===Xt,Sv=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,nI=(e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty},oc=(e,t,n,s)=>s.isEmpty(t,n,o=>nI(e,o)),sI=(e,t)=>e&&(e.name in t||e.name==="br"),Id=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)t.isValidChild(n.name,o.name)||Id(o,t,n);e.unwrap()}},$d=(e,t,n=Ie)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const f=e[c];let d,p,y;if(!f.parent||a.has(f))continue;if(s[f.name]&&f.parent.name==="li"){let S=f.next;for(;S&&s[S.name];){S.name="li",a.add(S),f.parent.insert(S,f.parent);S=S.next}f.unwrap();continue}const C=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&!i[d.name];d=d.parent)C.push(d);if(d&&C.length>1)if(t.isValidChild(d.name,f.name)){C.reverse(),p=C[0].clone(),n(p);let S=p;for(let v=0;v<C.length-1;v++){t.isValidChild(S.name,C[v].name)?(y=C[v].clone(),n(y),S.append(y)):y=S;for(let E=C[v].firstChild;E&&E!==C[v+1];){const _=E.next;y.append(E),E=_}S=y}oc(t,o,r,p)?d.insert(f,C[0],!0):(d.insert(p,C[0],!0),d.insert(f,p)),d=C[0],(oc(t,o,r,d)||Sv(d,"br"))&&d.empty().remove()}else Id(f,t);else if(f.parent){if(f.name==="li"){let S=f.prev;if(S&&(S.name==="ul"||S.name==="ol")){S.append(f);continue}if(S=f.next,S&&(S.name==="ul"||S.name==="ol")){S.insert(f,S.firstChild,!0);continue}const v=new pn("ul",1);n(v),f.wrap(v);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const S=new pn("div",1);n(S),f.wrap(S)}else Id(f,t)}}},oI=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},rI=e=>{const t=F.fromRangeStart(e),n=F.fromRangeEnd(e),s=e.commonAncestorContainer;return Fn(!1,s,n).map(o=>!Ts(t,n,s)&&Ts(t,o,s)?oI(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Ld=e=>e.collapsed?e:rI(e),iI=e=>e.firstChild&&e.firstChild===e.lastChild,aI=e=>e.name==="br"||e.value===Xt,lI=(e,t)=>e.getBlockElements()[t.name]&&iI(t)&&aI(t.firstChild),cI=(e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||lI(e,t))},uI=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),cI(e,s)&&(s=s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},fI=e=>{const t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode.removeChild(n),e},dI=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return fI(o)},mI=e=>H(e.childNodes,t=>t.nodeName==="LI"),pI=e=>e.data===Xt||Dt(e),gI=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&pI(e.firstChild),hI=e=>!e.firstChild||gI(e),bI=e=>e.length>0&&hI(e[e.length-1])?e.slice(0,-1):e,Fd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},CI=(e,t)=>!!Fd(e,t),yI=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},vI=(e,t)=>{const n=F.before(e),o=Rs(t).next(n);return o?o.toRange():null},wv=(e,t)=>{const n=F.after(e),o=Rs(t).prev(n);return o?o.toRange():null},EI=(e,t,n,s)=>{const o=yI(e,s),r=e.parentNode;return r.insertBefore(o[0],e),G.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e),wv(t[t.length-1],n)},xI=(e,t,n)=>{const s=e.parentNode;return G.each(t,o=>{s.insertBefore(o,e)}),vI(e,n)},SI=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),wv(t[0],n)),wI=(e,t,n,s)=>{const o=dI(t,e,s),r=Fd(t,n.startContainer),i=bI(mI(o.firstChild)),a=1,c=2,f=t.getRoot(),d=p=>{const y=F.fromRangeStart(n),C=Rs(t.getRoot()),S=p===a?C.prev(y):C.next(y);return S?Fd(t,S.getNode())!==r:!0};return d(a)?xI(r,i,f):d(c)?SI(r,i,f,t):EI(r,i,f,n)},Md=ml,_I=(e,t,n)=>{if(n!==null){const s=e.getParent(t.endContainer,Md);return n===s&&Yf(w.fromDom(n),t)}else return!1},kI=(e,t,n)=>{if(n.getAttribute("data-mce-bogus")==="all")n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const s=n.firstChild,o=n.lastChild;!s||s===o&&s.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},NI=(e,t)=>{b.from(e.getParent(t,"td,th")).map(w.fromDom).each(WD)},TI=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=Ly(s);G.each(s.select("*[data-mce-fragment]"),i=>{if(Ne(n[i.nodeName.toLowerCase()])&&$D(s,i)){for(let c=i.parentNode;Ne(c)&&c!==o&&!FD(s,i,c);c=c.parentNode)if(r.compare(c,i)){s.remove(i,!0);break}}})}},AI=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},RI=e=>{G.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},PI=e=>!!e.getAttribute("data-mce-fragment"),OI=(e,t)=>t&&!e.schema.getVoidElements()[t.nodeName],DI=(e,t)=>{let n;const s=e.dom,o=e.selection;if(!t)return;o.scrollIntoView(t);const r=Sa(e.getBody(),t);if(s.getContentEditable(r)==="false"){s.remove(t),o.select(r);return}let i=s.createRng();const a=t.previousSibling;if(ne(a)){i.setStart(a,a.nodeValue.length);const d=t.nextSibling;ne(d)&&(a.appendData(d.data),d.parentNode.removeChild(d))}else i.setStartBefore(t),i.setEndBefore(t);const c=d=>{let p=F.fromRangeStart(d);if(p=Rs(e.getBody()).next(p),p)return p.toRange()},f=s.getParent(t,s.isBlock);s.remove(t),f&&s.isEmpty(f)&&(Ki(w.fromDom(f)),i.setStart(f,0),i.setEnd(f,0),!Md(f)&&!PI(f)&&(n=c(i))?(i=n,s.remove(f)):s.add(f,s.create("br",{"data-mce-bogus":"1"}))),o.setRng(i)},BI=e=>{const t=e.dom,n=Ld(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Md);_I(t,n,s)?Pd(e,n,w.fromDom(s)):e.getDoc().execCommand("Delete",!1,null)},II=(e,t,n)=>{let s,o,r;const i=e.selection,a=e.dom,c=e.parser,f=n.merge,d=Oo({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p),o=i.getRng();const y=o.startContainer||(o.parentElement?o.parentElement():null),C=e.getBody();y===C&&i.isCollapsed()&&a.isBlock(C.firstChild)&&OI(e,C.firstChild)&&a.isEmpty(C.firstChild)&&(o=a.createRng(),o.setStart(C.firstChild,0),o.setEnd(C.firstChild,0),i.setRng(o)),i.isCollapsed()||BI(e),s=i.getNode();const S={context:s.nodeName.toLowerCase(),data:n.data,insert:!0},v=c.parse(t,S);if(n.paste===!0&&uI(e.schema,v)&&CI(a,s))return o=wI(d,a,i.getRng(),v),i.setRng(o),t;if(AI(v),r=v.lastChild,r.attr("id")==="mce_marker"){const E=r;for(r=r.prev;r;r=r.walk(!0))if(r.type===3||!a.isBlock(r.name)){e.schema.isValidChild(r.parent.name,"span")&&r.parent.insert(E,r,r.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(s),!S.invalid)t=d.serialize(v),kI(e,t,s);else{e.selection.setContent(p),s=i.getNode();const E=e.getBody();for(s.nodeType===9?s=r=E:r=s;r!==E;)s=r,r=r.parentNode;t=s===E?E.innerHTML:a.getOuterHTML(s);const _=c.parse(t);for(let $=_;$;$=$.walk())if($.attr("id")==="mce_marker"){$.replace(v);break}const P=v.children(),z=v.parent.name;v.unwrap();const I=H(P,$=>!e.schema.isValidChild(z,$.name));$d(I,e.schema),Ev(c.getNodeFilters(),c.getAttributeFilters(),_),t=d.serialize(_),s===E?a.setHTML(E,t):a.setOuterHTML(s,t)}return TI(e,f),DI(e,a.get("mce_marker")),RI(e.getBody()),NI(a,i.getStart()),t},rc=e=>e instanceof pn,$I=e=>{fr(e)&&mn(e.getBody()).each(t=>{const n=t.getNode(),s=Gi(n)?mn(n).getOr(t):t;e.selection.setRng(s.toRange())})},Ud=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&$I(e)},LI=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Sn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ar(e),n)):n||(n=o),Ud(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Oo({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=hl(w.fromDom(t))?n:G.trim(n);return Ud(e,o,s.no_selection),{content:o,html:o}}},FI=(e,t,n,s)=>{Ev(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Oo({validate:!1},e.schema).serialize(n),r=hl(w.fromDom(t))?o:G.trim(o);return Ud(e,r,s.no_selection),{content:n,html:r}},MI=(e,t,n)=>b.from(e.getBody()).map(s=>rc(t)?FI(e,s,t,n):LI(e,s,t,n)).getOr({content:t,html:rc(n.content)?"":n.content}),UI=(e,t)=>HN(e,t).isSome(),_v=e=>Ye(e)?e:pt,zI=(e,t,n)=>{let s=e.dom;const o=_v(n);for(;s.parentNode;){s=s.parentNode;const r=w.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},zd=(e,t,n)=>{const s=t(e),o=_v(n);return s.orThunk(()=>o(e)?b.none():zI(e,t,o))},Hd=Wf,kv=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Rn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},Vd=(e,t,n,s,o)=>{const r=e.dom.getRoot();return t===r?!1:(t=e.dom.getParent(t,i=>kv(e,i,n)?!0:i.parentNode===r||!!Is(e,i,n,s,!0)),!!Is(e,t,n,s,o))},ic=(e,t,n)=>Wt(n)&&Hd(t,n.inline)||Bs(n)&&Hd(t,n.block)?!0:Rn(n)?Ee(t)&&e.is(t,n.selector):!1,Nv=(e,t,n,s,o,r)=>{const i=n[s];if(Ye(n.onmatch))return n.onmatch(t,n,s);if(i){if(Pt(i.length)){for(const a in i)if(Fe(i,a)){const c=s==="attributes"?e.getAttrib(t,a):zl(e,t,a),f=so(i[a],r),d=Mt(c)||sl(c);if(d&&Mt(f))continue;if(o&&d&&!n.exact||(!o||n.exact)&&!Hd(c,jf(f,a)))return!1}}else for(let a=0;a<i.length;a++)if(s==="attributes"?e.getAttrib(t,i[a]):zl(e,t,i[a]))return!0}return!0},Is=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&t)for(let a=0;a<r.length;a++){const c=r[a];if(ic(e.dom,t,c)&&Nv(i,t,c,"attributes",o,s)&&Nv(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let d=0;d<f.length;d++)if(!e.dom.hasClass(t,so(f[d],s)))return}return c}}},Wd=(e,t,n,s,o)=>{if(s)return Vd(e,s,t,n,o);if(s=e.selection.getNode(),Vd(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&Vd(e,r,t,n,o))},HI=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Is(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},VI=(e,t)=>{const n=o=>tt(o,w.fromDom(e.getBody())),s=(o,r)=>Is(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>zd(w.fromDom(o),r=>en(t,i=>s(r,i)),n)).getOrNull()},WI=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Hl(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Rn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},jI=(e,t,n)=>Q(n,(s,o)=>{const r=rP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),fi=Kt,Tv="_mce_caret",qI=(e,t)=>e.importNode(t,!0),KI=e=>{const t=[];for(;e;){if(e.nodeType===3&&e.nodeValue!==fi||e.childNodes.length>1)return[];e.nodeType===1&&t.push(e),e=e.firstChild}return t},Av=e=>KI(e).length>0,Rv=e=>{if(e){const t=new zt(e,e);for(e=t.current();e;e=t.next())if(ne(e))return e}return null},jd=e=>{const t=w.fromTag("span");return Ss(t,{id:Tv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&It(t,w.fromText(fi)),t},GI=e=>{const t=Rv(e);return t&&t.nodeValue.charAt(0)===fi&&t.deleteData(0,1),t},qd=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(Av(t))gr(e,!1,w.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,d=r.endOffset,p=GI(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&d>0&&r.setEnd(p,d-1),i&&s.isEmpty(i)&&pr(w.fromDom(i)),o.setRng(r)}},Kd=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)qd(e,t,n);else if(t=ur(e.getBody(),o.getStart()),!t)for(;t=s.get(Tv);)qd(e,t,!1)},YI=(e,t,n)=>{const s=e.dom,o=s.getParent(n,re(Hf,e));o&&s.isEmpty(o)?n.parentNode.replaceChild(t,n):(VD(w.fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(t,n):s.insertAfter(t,n))},Pv=(e,t)=>(e.appendChild(t),t),Ov=(e,t)=>{const n=fe(e,(s,o)=>Pv(s,o.cloneNode(!1)),t);return Pv(n,n.ownerDocument.createTextNode(fi))},XI=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=H(es(i.get()),p=>p!==s&&!un(p,"removeformat")),f=jI(e,n,c);if(H(f,p=>!iP(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),b.some(p)}else return b.none()},QI=(e,t,n)=>{let s,o;const r=e.selection,i=r.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=ur(e.getBody(),r.getStart()),s&&(o=Rv(s));const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&d.test(f.charAt(a))&&d.test(f.charAt(a-1))){const p=r.getBookmark();i.collapse(!0);let y=ai(e,i,e.formatter.get(t));y=Yl(y),e.formatter.apply(t,n,y),r.moveToBookmark(p)}else(!s||o.nodeValue!==fi)&&(s=qI(e.getDoc(),jd(!0).dom),o=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),r.setCursorLocation(o,a)},ZI=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i,a,c;const f=[],d=r.getRng(),p=d.startContainer,y=d.startOffset;for(a=p,p.nodeType===3&&(y!==p.nodeValue.length&&(i=!0),a=a.parentNode);a;){if(Is(e,a,t,n,s)){c=a;break}a.nextSibling&&(i=!0),f.push(a),a=a.parentNode}if(!!c)if(i){const C=r.getBookmark();d.collapse(!0);let S=ai(e,d,e.formatter.get(t),!0);S=Yl(S),e.formatter.remove(t,n,S,s),r.moveToBookmark(C)}else{const C=ur(e.getBody(),c),S=jd(!1).dom;YI(e,S,C!==null?C:c);const v=XI(e,S,c,t,n,s),E=Ov(f.concat(v.toArray()),S);qd(e,C,!1),r.setCursorLocation(E,1),o.isEmpty(c)&&o.remove(c)}},JI=(e,t)=>{const n=e.selection,s=e.getBody();Kd(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===fi&&Kd(e,ur(s,n.getStart())),(t===37||t===39)&&Kd(e,ur(s,n.getStart()))},e$=e=>{e.on("mouseup keydown",t=>{JI(e,t.keyCode)})},t$=(e,t)=>{const n=jd(!1),s=Ov(t,n.dom);return Xn(w.fromDom(e),n),Tt(w.fromDom(e)),F(s,0)},n$=(e,t)=>{const n=e.schema.getTextInlineElements();return Fe(n,Ct(t))&&!Ds(t.dom)&&!Jo(t.dom)},s$=e=>Ds(e.dom)&&Av(e.dom),ac={},Dv=Ur,Bv=Mi,o$=(e,t)=>{ac[e]||(ac[e]=[]),ac[e].push(t)},r$=(e,t)=>{Bv(ac[e],n=>{n(t)})};o$("pre",e=>{const t=e.selection.getRng();let n;const s=i=>r(i.previousSibling)&&vg(n,i.previousSibling)!==-1,o=(i,a)=>{const c=w.fromDom(a),f=vo(c).dom;Tt(c),Qo(w.fromDom(i),[w.fromTag("br",f),w.fromTag("br",f),...Yt(c)])},r=Qn(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),Bv(Dv(Dv(n,r),s),i=>{o(i.previousSibling,i)}))});const Gd=G.each,Yd=e=>Ee(e)&&!Mn(e)&&!Ds(e)&&!Jo(e),Iv=(e,t)=>{for(let n=e;n;n=n[t]){if(ne(n)&&Qs(n.data))return e;if(Ee(n)&&!Mn(n))return n}return e},$v=(e,t,n)=>{const s=Ly(e);if(t&&n&&(t=Iv(t,"previousSibling"),n=Iv(n,"nextSibling"),s.compare(t,n))){for(let o=t.nextSibling;o&&o!==n;){const r=o;o=o.nextSibling,t.appendChild(r)}return e.remove(n),G.each(G.grep(n.childNodes),o=>{t.appendChild(o)}),t}return n},Lv=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){const o=$v(e,DC(s),s);$v(e,o,DC(o,!0))}},i$=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Gd(e.select(s,n),o=>{Yd(o)&&Gd(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},Xd=(e,t,n)=>{Gd(e.childNodes,s=>{Yd(s)&&(t(s)&&n(s),s.hasChildNodes()&&Xd(s,t,n))})},a$=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},Fv=(e,t)=>n=>!!(n&&zl(e,n,t)),Mv=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),a$(e,s)},wa=Ns.generate([{keep:[]},{rename:["name"]},{removed:[]}]),l$=/^(src|href|style)$/,Qd=G.each,lc=Wf,c$=e=>/^(TR|TH|TD)$/.test(e.nodeName),Uv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),zv=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ee(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return ne(s)&&n&&o>=s.nodeValue.length&&(s=new zt(s,e.getBody()).next()||s),ne(s)&&!n&&o===0&&(s=new zt(s,e.getBody()).prev()||s),s},Hv=(e,t)=>{const n=t?"firstChild":"lastChild";if(c$(e)&&e[n]){const s=e[n];return e.nodeName==="TR"&&s[n]||s}return e},Zd=(e,t,n,s)=>{const o=e.create(n,s);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},Vv=(e,t,n,s,o)=>{const r=w.fromDom(t),i=w.fromDom(e.create(s,o)),a=n?dh(r):fh(r);return Qo(i,a),n?(Xn(r,i),Sh(i,r)):(Eo(r,i),It(i,r)),i.dom},u$=(e,t)=>t.links&&e.nodeName==="A",f$=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Sn(e);Bs(n)&&s===r.getRoot()&&(!n.list_block||!lc(t,n.list_block))&&A(gt(t.childNodes),a=>{ri(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=Zd(r,a,i),r.setAttribs(o,ar(e))):o=null}),!(aP(n)&&!lc(n.inline,t))&&r.remove(t,!0)},Wv=(e,t,n,s,o)=>{let r;const i=e.dom;if(!ic(i,s,t)&&!u$(s,t))return wa.keep();const a=s;if(Wt(t)&&t.remove==="all"&&Nt(t.preserve_attributes)){const c=H(i.getAttribs(a),f=>R(t.preserve_attributes,f.name.toLowerCase()));if(i.removeAllAttribs(a),A(c,f=>i.setAttrib(a,f.name,f.value)),c.length>0)return wa.rename("span")}if(t.remove!=="all"){Qd(t.styles,(f,d)=>{f=jf(so(f,n),d+""),yn(d)&&(d=f,o=null),(t.remove_similar||!o||lc(zl(i,o,d),f))&&i.setStyle(a,d,""),r=!0}),r&&i.getAttrib(a,"style")===""&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),Qd(t.attributes,(f,d)=>{let p;if(f=so(f,n),yn(d)&&(d=f,o=null),t.remove_similar||!o||lc(i.getAttrib(o,d),f)){if(d==="class"&&(f=i.getAttrib(a,d),f&&(p="",A(f.split(/\s+/),y=>{/mce\-\w+/.test(y)&&(p+=(p?" ":"")+y)}),p))){i.setAttrib(a,d,p);return}if(l$.test(d)&&a.removeAttribute("data-mce-"+d),d==="style"&&Qn(["li"])(a)&&i.getStyle(a,"list-style-type")==="none"){a.removeAttribute(d),i.setStyle(a,"list-style-type","none");return}d==="class"&&a.removeAttribute("className"),a.removeAttribute(d)}}),Qd(t.classes,f=>{f=so(f,n),(!o||i.hasClass(o,f))&&i.removeClass(a,f)});const c=i.getAttribs(a);for(let f=0;f<c.length;f++){const d=c[f].nodeName;if(d.indexOf("_")!==0&&d.indexOf("data-")!==0)return wa.keep()}}return t.remove!=="none"?(f$(e,a,t),wa.removed()):wa.keep()},di=(e,t,n,s,o)=>Wv(e,t,n,s,o).fold(pt,r=>(e.dom.rename(s,r),!0),it),d$=(e,t,n,s,o)=>{let r;return A(Hl(e.dom,t.parentNode).reverse(),i=>{if(!r&&i.id!=="_start"&&i.id!=="_end"){const a=Is(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},m$=(e,t,n,s)=>Wv(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),p$=(e,t,n,s,o,r,i,a)=>{let c,f,d;const p=e.dom;if(n){const y=n.parentNode;for(let C=s.parentNode;C&&C!==y;C=C.parentNode){c=p.clone(C,!1);for(let S=0;S<t.length&&(c=m$(e,t[S],a,c),c!==null);S++);c&&(f&&c.appendChild(f),d||(d=c),f=c)}r&&(!i.mixed||!p.isBlock(n))&&(s=p.split(n,s)),f&&(o.parentNode.insertBefore(f,o),d.appendChild(o),Wt(i)&&Lv(p,i,a,f))}return s},jv=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0];let a=!0;const c=e.dom,f=e.selection,d=E=>{const _=d$(e,E,t,n,o);return p$(e,r,_,E,E,!0,i,n)},p=E=>Mn(E)&&Ee(E)&&(E.id==="_start"||E.id==="_end"),y=E=>M(r,_=>di(e,_,n,E,E)),C=E=>{let _=!0,P=!1;Ee(E)&&c.getContentEditable(E)&&(_=a,a=c.getContentEditable(E)==="true",P=!0);const z=gt(E.childNodes);if(a&&!P){const te=y(E)||M(r,q=>ic(c,E,q)),W=E.parentNode;!te&&Ne(W)&&qf(i)&&y(W)}if(i.deep&&z.length){for(let $=0;$<z.length;$++)C(z[$]);P&&(a=_)}A(["underline","line-through","overline"],$=>{Ee(E)&&e.dom.getStyle(E,"text-decoration")===$&&E.parentNode&&BC(c,E.parentNode)===$&&di(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:$}},null,E)})},S=E=>{const _=c.get(E?"_start":"_end");let P=_[E?"firstChild":"lastChild"];return p(P)&&(P=P[E?"firstChild":"lastChild"]),ne(P)&&P.data.length===0&&(P=E?_.previousSibling||_.nextSibling:_.nextSibling||_.previousSibling),c.remove(_,!0),P},v=E=>{let _,P,z=ai(e,E,r,E.collapsed);if(i.split){if(z=Yl(z),_=zv(e,z,!0),P=zv(e,z),_!==P){if(_=Hv(_,!0),P=Hv(P,!1),Uv(c,_,P)){const $=b.from(_.firstChild).getOr(_);d(Vv(c,$,!0,"span",{id:"_start","data-mce-type":"bookmark"})),S(!0);return}if(Uv(c,P,_)){const $=b.from(P.lastChild).getOr(P);d(Vv(c,$,!1,"span",{id:"_end","data-mce-type":"bookmark"})),S(!1);return}_=Zd(c,_,"span",{id:"_start","data-mce-type":"bookmark"}),P=Zd(c,P,"span",{id:"_end","data-mce-type":"bookmark"});const I=c.createRng();I.setStartAfter(_),I.setEndBefore(P),pa(c,I,$=>{A($,te=>{!Mn(te)&&!Mn(te.parentNode)&&d(te)})}),d(_),d(P),_=S(!0),P=S()}else _=P=d(_);z.startContainer=_.parentNode?_.parentNode:_,z.startOffset=c.nodeIndex(_),z.endContainer=P.parentNode?P.parentNode:P,z.endOffset=c.nodeIndex(P)+1}pa(c,z,I=>{A(I,C)})};if(s){if(Ul(s)){const E=c.createRng();E.setStartBefore(s),E.setEndAfter(s),v(E)}else v(s);ed(e,t,s,n);return}if(c.getContentEditable(f.getNode())==="false"){s=f.getNode();for(let E=0;E<r.length&&!(r[E].ceFalseOverride&&di(e,r[E],n,s,s));E++);ed(e,t,s,n);return}!f.isCollapsed()||!Wt(i)||li(e).length?(Zf(f,!0,()=>{Qf(e,v)}),Wt(i)&&Wd(e,t,n,f.getStart())&&OC(c,f,f.getRng()),e.nodeChanged()):ZI(e,t,n,o),ed(e,t,s,n)},qv=G.each,g$=(e,t,n,s)=>{const o=r=>{if(r.nodeType===1&&r.parentNode&&r.parentNode.nodeType===1){const i=BC(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(G.walk(s,o,"childNodes"),o(s))},h$=(e,t,n,s)=>{t.styles&&t.styles.backgroundColor&&Xd(s,Fv(e,"fontSize"),Mv(e,"backgroundColor",so(t.styles.backgroundColor,n)))},b$=(e,t,n,s)=>{Wt(t)&&(t.inline==="sub"||t.inline==="sup")&&(Xd(s,Fv(e,"fontSize"),Mv(e,"fontSize","")),e.remove(e.select(t.inline==="sup"?"sub":"sup",s),!0))},C$=(e,t,n,s)=>{qv(t,o=>{Wt(o)&&qv(e.dom.select(o.inline,s),r=>{!Yd(r)||di(e,o,n,r,o.exact?r:null)}),i$(e.dom,o,s)})},y$=(e,t,n,s,o)=>{Is(e,o.parentNode,n,s)&&di(e,t,s,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,r=>{if(Is(e,r,n,s))return di(e,t,s,o),!0})},cc=G.each,v$=e=>Ee(e)&&!Mn(e)&&!Ds(e)&&!Jo(e),E$=(e,t,n,s)=>{if(R1(e)&&Wt(t)){const o=ut(we({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),r=UI(w.fromDom(n),i=>Ds(i.dom));return Mr(o,s)&&Ht(w.fromDom(n.parentNode),!1)&&!r}else return!1},Kv=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(C,S=r)=>{if(Ye(S.onformat)&&S.onformat(C,S,n,s),cc(S.styles,(v,E)=>{a.setStyle(C,E,so(v,n))}),S.styles){const v=a.getAttrib(C,"style");v&&a.setAttrib(C,"data-mce-style",v)}cc(S.attributes,(v,E)=>{a.setAttrib(C,E,so(v,n))}),cc(S.classes,v=>{v=so(v,n),a.hasClass(C,v)||a.addClass(C,v)})},d=(C,S)=>{let v=!1;return cc(C,E=>{if(!Rn(E))return!1;if(!(Ne(E.collapsed)&&E.collapsed!==i)&&a.is(S,E.selector)&&!Ds(S))return f(S,E),v=!0,!1}),v},p=C=>{if(be(C)){const S=a.create(C);return f(S),S}else return null},y=(C,S,v)=>{const E=[];let _=!0;const P=r.inline||r.block,z=p(P);pa(C,S,I=>{let $;const te=W=>{let q=!1,Z=_;const ee=W.nodeName.toLowerCase(),xe=W.parentNode,ae=xe.nodeName.toLowerCase();if(Ee(W)&&C.getContentEditable(W)&&(Z=_,_=C.getContentEditable(W)==="true",q=!0),Dt(W)&&!E$(e,r,W,ae)){$=null,Bs(r)&&C.remove(W);return}if(Bs(r)&&r.wrapper&&Is(e,W,t,n)){$=null;return}if(_&&!q&&Bs(r)&&!r.wrapper&&Hf(e,ee)&&ri(e,ae,P)){const se=C.rename(W,P);f(se),E.push(se),$=null;return}if(Rn(r)){let se=d(o,W);if(!se&&Ne(xe)&&qf(r)&&(se=d(o,xe)),!Wt(r)||se){$=null;return}}_&&!q&&ri(e,P,ee)&&ri(e,ae,P)&&!(!v&&ne(W)&&bl(W.data))&&!Ds(W)&&(!Wt(r)||!C.isBlock(W))?($||($=C.clone(z,!1),W.parentNode.insertBefore($,W),E.push($)),$.appendChild(W)):($=null,A(gt(W.childNodes),te),q&&(_=Z),$=null)};A(I,te)}),r.links===!0&&A(E,I=>{const $=te=>{te.nodeName==="A"&&f(te,r),A(gt(te.childNodes),$)};$(I)}),A(E,I=>{const $=q=>{let Z=0;return A(q.childNodes,ee=>{!oP(ee)&&!Mn(ee)&&Z++}),Z},te=q=>de(q.childNodes,v$).filter(ee=>ic(C,ee,r)).map(ee=>{const xe=C.clone(ee,!1);return f(xe),C.replace(xe,q,!0),C.remove(ee,!0),xe}).getOr(q),W=$(I);if((E.length>1||!C.isBlock(I))&&W===0){C.remove(I,!0);return}(Wt(r)||Bs(r)&&r.wrapper)&&(!r.exact&&W===1&&(I=te(I)),C$(e,o,n,I),y$(e,r,t,n,I),h$(C,r,n,I),g$(C,r,n,I),b$(C,r,n,I),Lv(C,r,n,I))})};if(a.getContentEditable(c.getNode())==="false"){s=c.getNode();for(let C=0,S=o.length;C<S;C++){const v=o[C];if(v.ceFalseOverride&&Rn(v)&&a.is(s,v.selector)){f(s,v);break}}ZC(e,t,s,n);return}if(r){if(s)if(Ul(s)){if(!d(o,s)){const C=a.createRng();C.setStartBefore(s),C.setEndAfter(s),y(a,ai(e,C,o),!0)}}else y(a,s,!0);else!i||!Wt(r)||li(e).length?(c.setRng(Ld(c.getRng())),Zf(c,!0,()=>{Qf(e,(C,S)=>{const v=S?C:ai(e,C,o);y(a,v,!1)})}),OC(a,c,c.getRng()),e.nodeChanged()):QI(e,t,n);r$(t,e)}ZC(e,t,s,n)},Gv=e=>Fe(e,"vars"),x$=(e,t)=>{e.set({}),t.on("NodeChange",n=>{Zv(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>Ul(o)?o:o.startContainer).bind(o=>Ee(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>Yv(t));Zv(t,s,e.get())})},Yv=e=>e.selection.getStart(),Xv=(e,t,n,s,o)=>Pe(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!Pt(c)},a=>kv(e,a,n)?!0:s?!1:Ne(e.formatter.matchNode(a,n,o,!0))),Qv=(e,t)=>{const n=t!=null?t:Yv(e);return H(Hl(e.dom,n),s=>Ee(s)&&!Jo(s))},Zv=(e,t,n)=>{const s=Qv(e,t);bt(n,(o,r)=>{const i=a=>{const c=Xv(e,s,r,a.similar,Gv(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const d=c.getOr(t);Gv(a)?a.callback(f,{node:d,format:r,parents:s}):A(a.callbacks,p=>p(f,{node:d,format:r,parents:s}))}};A([o.withSimilar,o.withoutSimilar],i),A(o.withVars,i)})},S$=(e,t,n,s,o,r)=>{const i=t.get();A(n.split(","),a=>{const c=lt(i,a).getOrThunk(()=>{const d={withSimilar:{state:$t(!1),similar:!0,callbacks:[]},withoutSimilar:{state:$t(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),f=()=>{const d=Qv(e);return Xv(e,d,a,o,r).isSome()};if(Pt(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(f())}else c.withVars.push({state:$t(f()),similar:o,vars:r,callback:s})}),t.set(i)},w$=(e,t,n)=>{const s=e.get();A(t.split(","),o=>lt(s,o).each(r=>{s[o]={withSimilar:ut(we({},r.withSimilar),{callbacks:H(r.withSimilar.callbacks,i=>i!==n)}),withoutSimilar:ut(we({},r.withoutSimilar),{callbacks:H(r.withoutSimilar.callbacks,i=>i!==n)}),withVars:H(r.withVars,i=>i.callback!==n)}})),e.set(s)},_$=(e,t,n,s,o,r)=>(t.get()===null&&x$(t,e),S$(e,t,n,s,o,r),{unbind:()=>w$(t,n,s)}),k$=(e,t,n,s)=>{const o=e.formatter.get(t);Wd(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?jv(e,t,n,s):Kv(e,t,n,s)};function N$(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var T$=Object.hasOwnProperty,Jv=Object.setPrototypeOf,A$=Object.isFrozen,R$=Object.getPrototypeOf,P$=Object.getOwnPropertyDescriptor,wn=Object.freeze,$s=Object.seal,O$=Object.create,eE=typeof Reflect!="undefined"&&Reflect,uc=eE.apply,Jd=eE.construct;uc||(uc=function(t,n,s){return t.apply(n,s)}),wn||(wn=function(t){return t}),$s||($s=function(t){return t}),Jd||(Jd=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(N$(n))))});var D$=rs(Array.prototype.forEach),B$=rs(Array.prototype.pop),_a=rs(Array.prototype.push),fc=rs(String.prototype.toLowerCase),I$=rs(String.prototype.match),Bo=rs(String.prototype.replace),$$=rs(String.prototype.indexOf),L$=rs(String.prototype.trim),_n=rs(RegExp.prototype.test),em=F$(TypeError);function rs(e){return function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return uc(e,t,s)}}function F$(e){return function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];return Jd(e,n)}}function Ze(e,t){Jv&&Jv(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=fc(s);o!==s&&(A$(t)||(t[n]=o),s=o)}e[s]=!0}return e}function hr(e){var t=O$(null),n=void 0;for(n in e)uc(T$,e,[n])&&(t[n]=e[n]);return t}function dc(e,t){for(;e!==null;){var n=P$(e,t);if(n){if(n.get)return rs(n.get);if(typeof n.value=="function")return rs(n.value)}e=R$(e)}function s(o){return console.warn("fallback value for",o),null}return s}var tE=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tm=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nm=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M$=wn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sm=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U$=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nE=wn(["#text"]),sE=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),om=wn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oE=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mc=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z$=$s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),H$=$s(/<%[\s\S]*|[\s\S]*%>/gm),V$=$s(/^data-[\-\w.\u00B7-\uFFFF]/),W$=$s(/^aria-[\-\w]+$/),j$=$s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q$=$s(/^(?:\w+script|data):/i),K$=$s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),G$=$s(/^html$/i),ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ls(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var Y$=function(){return typeof window=="undefined"?null:window},X$=function(t,n){if((typeof t=="undefined"?"undefined":ka(t))!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function rE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y$(),t=function(B){return rE(B)};if(t.version="2.3.6",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,f=e.NamedNodeMap,d=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,p=e.HTMLFormElement,y=e.DOMParser,C=e.trustedTypes,S=a.prototype,v=dc(S,"cloneNode"),E=dc(S,"nextSibling"),_=dc(S,"childNodes"),P=dc(S,"parentNode");if(typeof r=="function"){var z=s.createElement("template");z.content&&z.content.ownerDocument&&(s=z.content.ownerDocument)}var I=X$(C,n),$=I?I.createHTML(""):"",te=s,W=te.implementation,q=te.createNodeIterator,Z=te.createDocumentFragment,ee=te.getElementsByTagName,xe=n.importNode,ae={};try{ae=hr(s).documentMode?s.documentMode:{}}catch{}var se={};t.isSupported=typeof P=="function"&&W&&typeof W.createHTMLDocument!="undefined"&&ae!==9;var Ge=z$,je=H$,ct=V$,qt=W$,J=q$,pe=K$,Me=j$,De=null,me=Ze({},[].concat(Ls(tE),Ls(tm),Ls(nm),Ls(sm),Ls(nE))),le=null,Se=Ze({},[].concat(Ls(sE),Ls(om),Ls(oE),Ls(mc))),Be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,Lt=null,wr=!0,Y=!0,he=!1,Ae=!1,Re=!1,qe=!1,ze=!1,Le=!1,vt=!1,Qt=!1,Zt=!0,Bt=!0,Ft=!1,Jt={},At=null,hn=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fo=null,Us=Ze({},["audio","video","img","source","image","track"]),zs=null,us=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_r="http://www.w3.org/1998/Math/MathML",Mo="http://www.w3.org/2000/svg",Hn="http://www.w3.org/1999/xhtml",fs=Hn,kr=!1,ds=void 0,ou=["application/xhtml+xml","text/html"],kp="text/html",lo=void 0,co=null,Pw=s.createElement("form"),Np=function(B){return B instanceof RegExp||B instanceof Function},ru=function(B){co&&co===B||((!B||(typeof B=="undefined"?"undefined":ka(B))!=="object")&&(B={}),B=hr(B),De="ALLOWED_TAGS"in B?Ze({},B.ALLOWED_TAGS):me,le="ALLOWED_ATTR"in B?Ze({},B.ALLOWED_ATTR):Se,zs="ADD_URI_SAFE_ATTR"in B?Ze(hr(us),B.ADD_URI_SAFE_ATTR):us,Fo="ADD_DATA_URI_TAGS"in B?Ze(hr(Us),B.ADD_DATA_URI_TAGS):Us,At="FORBID_CONTENTS"in B?Ze({},B.FORBID_CONTENTS):hn,yt="FORBID_TAGS"in B?Ze({},B.FORBID_TAGS):{},Lt="FORBID_ATTR"in B?Ze({},B.FORBID_ATTR):{},Jt="USE_PROFILES"in B?B.USE_PROFILES:!1,wr=B.ALLOW_ARIA_ATTR!==!1,Y=B.ALLOW_DATA_ATTR!==!1,he=B.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=B.SAFE_FOR_TEMPLATES||!1,Re=B.WHOLE_DOCUMENT||!1,Le=B.RETURN_DOM||!1,vt=B.RETURN_DOM_FRAGMENT||!1,Qt=B.RETURN_TRUSTED_TYPE||!1,ze=B.FORCE_BODY||!1,Zt=B.SANITIZE_DOM!==!1,Bt=B.KEEP_CONTENT!==!1,Ft=B.IN_PLACE||!1,Me=B.ALLOWED_URI_REGEXP||Me,fs=B.NAMESPACE||Hn,B.CUSTOM_ELEMENT_HANDLING&&Np(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Np(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ds=ou.indexOf(B.PARSER_MEDIA_TYPE)===-1?ds=kp:ds=B.PARSER_MEDIA_TYPE,lo=ds==="application/xhtml+xml"?function(ie){return ie}:fc,Ae&&(Y=!1),vt&&(Le=!0),Jt&&(De=Ze({},[].concat(Ls(nE))),le=[],Jt.html===!0&&(Ze(De,tE),Ze(le,sE)),Jt.svg===!0&&(Ze(De,tm),Ze(le,om),Ze(le,mc)),Jt.svgFilters===!0&&(Ze(De,nm),Ze(le,om),Ze(le,mc)),Jt.mathMl===!0&&(Ze(De,sm),Ze(le,oE),Ze(le,mc))),B.ADD_TAGS&&(De===me&&(De=hr(De)),Ze(De,B.ADD_TAGS)),B.ADD_ATTR&&(le===Se&&(le=hr(le)),Ze(le,B.ADD_ATTR)),B.ADD_URI_SAFE_ATTR&&Ze(zs,B.ADD_URI_SAFE_ATTR),B.FORBID_CONTENTS&&(At===hn&&(At=hr(At)),Ze(At,B.FORBID_CONTENTS)),Bt&&(De["#text"]=!0),Re&&Ze(De,["html","head","body"]),De.table&&(Ze(De,["tbody"]),delete yt.tbody),wn&&wn(B),co=B)},Tp=Ze({},["mi","mo","mn","ms","mtext"]),uo=Ze({},["foreignobject","desc","title","annotation-xml"]),iu=Ze({},["title","style","font","a","script"]),N=Ze({},tm);Ze(N,nm),Ze(N,M$);var D=Ze({},sm);Ze(D,U$);var j=function(B){var ie=P(B);(!ie||!ie.tagName)&&(ie={namespaceURI:Hn,tagName:"template"});var ke=fc(B.tagName),Et=fc(ie.tagName);return B.namespaceURI===Mo?ie.namespaceURI===Hn?ke==="svg":ie.namespaceURI===_r?ke==="svg"&&(Et==="annotation-xml"||Tp[Et]):Boolean(N[ke]):B.namespaceURI===_r?ie.namespaceURI===Hn?ke==="math":ie.namespaceURI===Mo?ke==="math"&&uo[Et]:Boolean(D[ke]):B.namespaceURI===Hn?ie.namespaceURI===Mo&&!uo[Et]||ie.namespaceURI===_r&&!Tp[Et]?!1:!D[ke]&&(iu[ke]||!N[ke]):!1},V=function(B){_a(t.removed,{element:B});try{B.parentNode.removeChild(B)}catch{try{B.outerHTML=$}catch{B.remove()}}},ye=function(B,ie){try{_a(t.removed,{attribute:ie.getAttributeNode(B),from:ie})}catch{_a(t.removed,{attribute:null,from:ie})}if(ie.removeAttribute(B),B==="is"&&!le[B])if(Le||vt)try{V(ie)}catch{}else try{ie.setAttribute(B,"")}catch{}},We=function(B){var ie=void 0,ke=void 0;if(ze)B="<remove></remove>"+B;else{var Et=I$(B,/^[\r\n\t ]+/);ke=Et&&Et[0]}ds==="application/xhtml+xml"&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");var On=I?I.createHTML(B):B;if(fs===Hn)try{ie=new y().parseFromString(On,ds)}catch{}if(!ie||!ie.documentElement){ie=W.createDocument(fs,"template",null);try{ie.documentElement.innerHTML=kr?"":On}catch{}}var bn=ie.body||ie.documentElement;return B&&ke&&bn.insertBefore(s.createTextNode(ke),bn.childNodes[0]||null),fs===Hn?ee.call(ie,Re?"html":"body")[0]:Re?ie.documentElement:bn},He=function(B){return q.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Nn=function(B){return B instanceof p&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof d)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function")},ms=function(B){return(typeof i=="undefined"?"undefined":ka(i))==="object"?B instanceof i:B&&(typeof B=="undefined"?"undefined":ka(B))==="object"&&typeof B.nodeType=="number"&&typeof B.nodeName=="string"},fo=function(B,ie,ke){!se[B]||D$(se[B],function(Et){Et.call(t,ie,ke,co)})},Ow=function(B){var ie=void 0;if(fo("beforeSanitizeElements",B,null),Nn(B)||_n(/[\u0080-\uFFFF]/,B.nodeName))return V(B),!0;var ke=lo(B.nodeName);if(fo("uponSanitizeElement",B,{tagName:ke,allowedTags:De}),B.hasChildNodes()&&!ms(B.firstElementChild)&&(!ms(B.content)||!ms(B.content.firstElementChild))&&_n(/<[/\w]/g,B.innerHTML)&&_n(/<[/\w]/g,B.textContent)||ke==="select"&&_n(/<template/i,B.innerHTML))return V(B),!0;if(!De[ke]||yt[ke]){if(!yt[ke]&&Bw(ke)&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,ke)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(ke)))return!1;if(Bt&&!At[ke]){var Et=P(B)||B.parentNode,On=_(B)||B.childNodes;if(On&&Et)for(var bn=On.length,on=bn-1;on>=0;--on)Et.insertBefore(v(On[on],!0),E(B))}return V(B),!0}return B instanceof a&&!j(B)||(ke==="noscript"||ke==="noembed")&&_n(/<\/no(script|embed)/i,B.innerHTML)?(V(B),!0):(Ae&&B.nodeType===3&&(ie=B.textContent,ie=Bo(ie,Ge," "),ie=Bo(ie,je," "),B.textContent!==ie&&(_a(t.removed,{element:B.cloneNode()}),B.textContent=ie)),fo("afterSanitizeElements",B,null),!1)},Dw=function(B,ie,ke){if(Zt&&(ie==="id"||ie==="name")&&(ke in s||ke in Pw))return!1;if(!(Y&&!Lt[ie]&&_n(ct,ie))){if(!(wr&&_n(qt,ie))){if(!le[ie]||Lt[ie]){if(!(Bw(B)&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,B)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(B))&&(Be.attributeNameCheck instanceof RegExp&&_n(Be.attributeNameCheck,ie)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(ie))||ie==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&_n(Be.tagNameCheck,ke)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(ke))))return!1}else if(!zs[ie]){if(!_n(Me,Bo(ke,pe,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&B!=="script"&&$$(ke,"data:")===0&&Fo[B])){if(!(he&&!_n(J,Bo(ke,pe,"")))){if(ke)return!1}}}}}}return!0},Bw=function(B){return B.indexOf("-")>0},Iw=function(B){var ie=void 0,ke=void 0,Et=void 0,On=void 0;fo("beforeSanitizeAttributes",B,null);var bn=B.attributes;if(!!bn){var on={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for(On=bn.length;On--;){ie=bn[On];var au=ie,Cn=au.name,$w=au.namespaceURI;ke=L$(ie.value),Et=lo(Cn);var j5=ke;if(on.attrName=Et,on.attrValue=ke,on.keepAttr=!0,on.forceKeepAttr=void 0,fo("uponSanitizeAttribute",B,on),ke=on.attrValue,!on.forceKeepAttr){if(!on.keepAttr){ye(Cn,B);continue}if(_n(/\/>/i,ke)){ye(Cn,B);continue}Ae&&(ke=Bo(ke,Ge," "),ke=Bo(ke,je," "));var q5=lo(B.nodeName);if(!Dw(q5,Et,ke)){ye(Cn,B);continue}if(ke!==j5)try{$w?B.setAttributeNS($w,Cn,ke):B.setAttribute(Cn,ke)}catch{ye(Cn,B)}}}fo("afterSanitizeAttributes",B,null)}},W5=function Oe(B){var ie=void 0,ke=He(B);for(fo("beforeSanitizeShadowDOM",B,null);ie=ke.nextNode();)fo("uponSanitizeShadowNode",ie,null),!Ow(ie)&&(ie.content instanceof o&&Oe(ie.content),Iw(ie));fo("afterSanitizeShadowDOM",B,null)};return t.sanitize=function(Oe,B){var ie=void 0,ke=void 0,Et=void 0,On=void 0,bn=void 0;if(kr=!Oe,kr&&(Oe="<!-->"),typeof Oe!="string"&&!ms(Oe)){if(typeof Oe.toString!="function")throw em("toString is not a function");if(Oe=Oe.toString(),typeof Oe!="string")throw em("dirty is not a string, aborting")}if(!t.isSupported){if(ka(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Oe=="string")return e.toStaticHTML(Oe);if(ms(Oe))return e.toStaticHTML(Oe.outerHTML)}return Oe}if(qe||ru(B),t.removed=[],typeof Oe=="string"&&(Ft=!1),Ft){if(Oe.nodeName){var on=lo(Oe.nodeName);if(!De[on]||yt[on])throw em("root node is forbidden and cannot be sanitized in-place")}}else if(Oe instanceof i)ie=We("<!---->"),ke=ie.ownerDocument.importNode(Oe,!0),ke.nodeType===1&&ke.nodeName==="BODY"||ke.nodeName==="HTML"?ie=ke:ie.appendChild(ke);else{if(!Le&&!Ae&&!Re&&Oe.indexOf("<")===-1)return I&&Qt?I.createHTML(Oe):Oe;if(ie=We(Oe),!ie)return Le?null:Qt?$:""}ie&&ze&&V(ie.firstChild);for(var au=He(Ft?Oe:ie);Et=au.nextNode();)Et.nodeType===3&&Et===On||Ow(Et)||(Et.content instanceof o&&W5(Et.content),Iw(Et),On=Et);if(On=null,Ft)return Oe;if(Le){if(vt)for(bn=Z.call(ie.ownerDocument);ie.firstChild;)bn.appendChild(ie.firstChild);else bn=ie;return le.shadowroot&&(bn=xe.call(n,bn,!0)),bn}var Cn=Re?ie.outerHTML:ie.innerHTML;return Re&&De["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&_n(G$,ie.ownerDocument.doctype.name)&&(Cn="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+Cn),Ae&&(Cn=Bo(Cn,Ge," "),Cn=Bo(Cn,je," ")),I&&Qt?I.createHTML(Cn):Cn},t.setConfig=function(Oe){ru(Oe),qe=!0},t.clearConfig=function(){co=null,qe=!1},t.isValidAttribute=function(Oe,B,ie){co||ru({});var ke=lo(Oe),Et=lo(B);return Dw(ke,Et,ie)},t.addHook=function(Oe,B){typeof B=="function"&&(se[Oe]=se[Oe]||[],_a(se[Oe],B))},t.removeHook=function(Oe){se[Oe]&&B$(se[Oe])},t.removeHooks=function(Oe){se[Oe]&&(se[Oe]=[])},t.removeAllHooks=function(){se={}},t}var Q$=rE();const Z$=(e,t)=>{A(t,n=>{e.attr(n,null)})},J$=(e,t,n)=>{e.addNodeFilter("font",s=>{A(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&(r["font-size"]=n[parseInt(o.attr("size"),10)-1]),o.name="span",o.attr("style",t.serialize(r)),Z$(o,["color","face","size"])})})},eL=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";A(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},tL=(e,t,n)=>{const s=df();t.convert_fonts_to_spans&&J$(e,s,G.explode(t.font_size_legacy_values)),eL(e,n,s)},nL=(e,t,n)=>{t.inline_styles&&tL(e,t,n)},sL=e=>new Promise((t,n)=>{const s=()=>{n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=()=>{o.status===200?t(o.response):s()},o.onerror=s,o.send()}catch{s()}}),pc=e=>{let t;const n=decodeURIComponent(e).split(","),s=/data:([^;]+)/.exec(n[0]);return s&&(t=s[1]),{type:t,data:n[1]}},iE=(e,t)=>{let n;try{n=atob(t)}catch{return b.none()}const s=new Uint8Array(n.length);for(let o=0;o<s.length;o++)s[o]=n.charCodeAt(o);return b.some(new Blob([s],{type:e}))},oL=e=>new Promise(t=>{const{type:n,data:s}=pc(e);iE(n,s).fold(()=>t(new Blob([])),t)}),aE=e=>e.indexOf("blob:")===0?sL(e):e.indexOf("data:")===0?oL(e):null,lE=e=>new Promise(t=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(e)});let rL=0;const rm=e=>(e||"blobid")+rL++,iL=(e,t,n,s)=>{let o,r;if(t.src.indexOf("blob:")===0){r=e.getByUri(t.src),r?n({image:t,blobInfo:r}):aE(t.src).then(c=>{lE(c).then(f=>{o=pc(f).data,r=e.create(rm(),c,o),e.add(r),n({image:t,blobInfo:r})})},c=>{s(c)});return}const{data:i,type:a}=pc(t.src);o=i,r=e.getByData(o,a),r?n({image:t,blobInfo:r}):aE(t.src).then(c=>{r=e.create(rm(),c,o),e.add(r),n({image:t,blobInfo:r})},c=>{s(c)})},aL=e=>e?gt(e.getElementsByTagName("img")):[],lL=(e,t)=>{const n={};return{findAll:(o,r)=>{r||(r=it);const i=H(aL(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===et.transparentSrc?!1:f.indexOf("blob:")===0?!e.isUploaded(f)&&r(c):f.indexOf("data:")===0?r(c):!1}),a=U(i,c=>{if(n[c.src]!==void 0)return new Promise(d=>{n[c.src].then(p=>{if(typeof p=="string")return p;d({image:c,blobInfo:p.blobInfo})})});const f=new Promise((d,p)=>{iL(t,c,d,p)}).then(d=>(delete n[d.image.src],d)).catch(d=>(delete n[c.src],d));return n[c.src]=f,f});return Promise.all(a)}}},cL=e=>{const t=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return t?b.some({type:t[1],data:decodeURIComponent(t[2])}):b.none()},uL=e=>Ne(e.attr("data-mce-bogus")),fL=e=>e.attr("src")===et.transparentSrc||Ne(e.attr("data-mce-placeholder")),dL=(e,t)=>{const{blob_cache:n}=t,s=o=>{const r=o.attr("src");fL(o)||uL(o)||cL(r).bind(({type:i,data:a})=>b.from(n.getByData(a,i)).orThunk(()=>iE(i,a).map(c=>{const f=n.create(rm(),c,a);return n.add(f),f}))).each(i=>{o.attr("src",i.blobUri())})};n&&e.addAttributeFilter("src",o=>A(o,s))},mL=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(s,o,r)=>{const i=G.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;for(let f=0,d=s.length;f<d;f++){let p=s[f],y=p.parent;if(i[p.parent.name]&&p===y.lastChild){let C=p.prev;for(;C;){const S=C.name;if(S!=="span"||C.attr("data-mce-type")!=="bookmark"){S==="br"&&(p=null);break}C=C.prev}if(p&&(p.remove(),oc(n,a,c,y))){const S=n.getElementRule(y.name);S&&(S.removeEmpty?y.remove():S.paddEmpty&&xv(t,r,i,y))}}else{let C=p;for(;y&&y.firstChild===C&&y.lastChild===C&&(C=y,!i[y.name]);)y=y.parent;if(C===y){const S=new pn("#text",3);S.value=Xt,p.replace(S)}}}}),e.addAttributeFilter("href",s=>{let o=s.length;const r=a=>a.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=a=>{const c=a?G.trim(a):"";return/\b(noopener)\b/g.test(c)?c:r(c)};if(!t.allow_unsafe_link_target)for(;o--;){const a=s[o];a.name==="a"&&a.attr("target")==="_blank"&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",s=>{let o=s.length,r,i,a,c;for(;o--;)if(c=s[o],c.name==="a"&&c.firstChild&&!c.attr("href")){a=c.parent,r=c.lastChild;do i=r.prev,a.insert(r,c),r=i;while(r)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",s=>{let o=s.length,r,i;for(;o--;)if(r=s[o],i=r.parent,i.name==="ul"||i.name==="ol")if(r.prev&&r.prev.name==="li")r.prev.append(r);else{const a=new pn("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",s=>{const o=n.getValidClasses();let r=s.length;for(;r--;){const i=s[r],a=i.attr("class").split(" ");let c="";for(let f=0;f<a.length;f++){const d=a[f];let p=!1,y=o["*"];y&&y[d]&&(p=!0),y=o[i.name],!p&&y&&y[d]&&(p=!0),p&&(c&&(c+=" "),c+=d)}c.length||(c=null),i.attr("class",c)}}),dL(e,t)},cE=G.each,pL=G.trim,gL="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),hL={ftp:21,http:80,https:443,mailto:25},bL=["img","video"],CL=(e,t)=>Ne(e)?!e:Ne(t)?!R(bL,t):!0,yL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},uE=(e,t,n)=>{const s=yL(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?CL(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class is{constructor(t,n){t=pL(t),this.settings=n||{};const s=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=this.settings.base_uri?this.settings.base_uri.path:new is(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2]}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);cE(gL,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=_o.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!uE(s,o,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href:n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(t){let n;if(t==="./")return t;const s=new is(t,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const o=this.getURI(),r=s.getURI();return o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r?o:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(t,n){const s=new is(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=hL[this.protocol];if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s,o=0,r=[],i;const a=/\/$/.test(n)?"/":"";let c=t.split("/");const f=n.split("/");for(cE(c,d=>{d&&r.push(d)}),c=r,s=f.length-1,r=[];s>=0;s--)if(!(f[s].length===0||f[s]===".")){if(f[s]===".."){o++;continue}if(o>0){o--;continue}r.push(f[s])}return s=c.length-o,s<=0?i=st(r).join("/"):i=c.slice(0,s).join("/")+"/"+st(r).join("/"),i.indexOf("/")!==0&&(i="/"+i),a&&i.lastIndexOf("/")!==i.length-1&&(i+=a),i}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const fE=G.makeMap,dE=G.each,mE=G.explode,pE=G.extend,vL={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},EL=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),im="data-mce-type",xL=(e,t)=>{const n=we({},vL);return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},SL=(e,t)=>{const n=Q$(),s=e.validate;let o=0;return n.addHook("uponSanitizeElement",(r,i)=>{var a,c;r.nodeType===Yg&&!e.allow_conditional_comments&&/^\[if/i.test(r.nodeValue)&&(r.nodeValue=" "+r.nodeValue);const f=i.tagName;if(r.nodeType!==zi||f==="body")return;const d=w.fromDom(r),p=il(d,im),y=$n(d,"data-mce-bogus");if(!p&&be(y)){y==="all"?Tt(d):xo(d);return}const C=t.getElementRule(f.toLowerCase());if(s&&!C){xo(d);return}else i.allowedTags[f]=!0;if(s&&!p){if(A((a=C.attributesForced)!==null&&a!==void 0?a:[],S=>{fn(d,S.name,S.value==="{$uid}"?`mce_${o++}`:S.value)}),A((c=C.attributesDefault)!==null&&c!==void 0?c:[],S=>{il(d,S.name)||fn(d,S.name,S.value==="{$uid}"?`mce_${o++}`:S.value)}),C.attributesRequired&&!M(C.attributesRequired,S=>il(d,S))){xo(d);return}if(C.removeEmptyAttrs&&eN(d)){xo(d);return}C.outputName&&C.outputName!==f.toLowerCase()&&pA(d,C.outputName)}}),n.addHook("uponSanitizeAttribute",(r,i)=>{const a=r.tagName.toLowerCase(),{attrName:c,attrValue:f}=i;i.keepAttr=!s||t.isValid(a,c)||qn(c,"data-")||qn(c,"aria-"),c in EL&&uE(e,f,a)&&(i.keepAttr=!1),i.keepAttr?(i.allowedAttributes[c]=!0,c in t.getBoolAttrs()&&(i.attrValue=c),e.allow_svg_data_urls&&qn(f,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):r.hasAttribute(im)&&(c==="id"||c==="class"||c==="style")&&(i.forceKeepAttr=!0)}),n},gE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],f=new pn(c.nodeName.toLowerCase(),c.nodeType);if(Ee(c)){const d=c.attributes;for(let p=0,y=d.length;p<y;p++){const C=d[p];f.attr(C.name,C.value)}}else ne(c)?(f.value=c.data,o&&(f.raw=!0)):(Oh(c)||LN(c)||FN(c))&&(f.value=c.data);gE(f,c,n),e.append(f)}},wL=(e,t,n)=>{const s=[];for(let o=e,r=o;Ne(o);r=o,o=o.walk())A(t,i=>i(o)),Mt(o.parent)&&o!==e?o=r:s.push(o);for(let o=s.length-1;o>=0;o--){const r=s[o];A(n,i=>i(r))}},_L=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=pE(fE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=/[ \t\r\n]+/g,f=/^[ \t\r\n]+/,d=/[ \t\r\n]+$/,p=v=>{for(v=v.parent;Ne(v);){if(v.name in i)return!0;v=v.parent}return!1},y=(v,E)=>{const _=E?v.prev:v.next;return Ne(_)?!1:v.parent.name in a&&(v.parent!==e||s.isRootContent)};return[v=>{if(v.type===3&&!p(v)){let E=v.value;E=E.replace(c," "),(sI(v.prev,a)||y(v,!0))&&(E=E.replace(f,"")),E.length===0?v.remove():v.value=E}},v=>{var E;if(v.type===1){const _=t.getElementRule(v.name);if(o&&_){const P=oc(t,r,i,v);_.removeEmpty&&P?a[v.name]?v.remove():v.unwrap():_.paddEmpty&&(P||tI(v))&&xv(n,s,a,v)}}else if(v.type===3&&!p(v)){let _=v.value;(a[(E=v.next)===null||E===void 0?void 0:E.name]||y(v,!1))&&(_=_.replace(d,"")),_.length===0?v.remove():v.value=_}}]},kL=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},mi=(e={},t=No())=>{const n={},s=[],o=we({validate:!0,root_name:"body"},e),r=new DOMParser,i=SL(o,t),a=(E,_,P="html")=>{const z=P==="xhtml"?"application/xhtml+xml":"text/html",I=Fe(t.getSpecialElements(),_.toLowerCase()),$=I?`<${_}>${E}</${_}>`:E,te=P==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${$}</body></html>`:`<body>${$}</body>`,W=r.parseFromString(te,z).body;return i.sanitize(W,xL(o,z)),i.removed=[],I?W.firstChild:W},c=(E,_)=>{dE(mE(E),P=>{let z=n[P];z||(n[P]=z=[]),z.push(_)})},f=()=>{const E=[];for(const _ in n)Fe(n,_)&&E.push({name:_,callbacks:n[_]});return E},d=(E,_)=>{dE(mE(E),P=>{let z;for(z=0;z<s.length;z++)if(s[z].name===P){s[z].callbacks.push(_);return}s.push({name:P,callbacks:[_]})})},p=()=>[].concat(s),y=(E,_)=>{const P=E.parent;P&&t.children[E.name]&&!t.isValidChild(P.name,E.name)&&_.push(E)},C=(E,_)=>{const P=pE(fE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),z=/^[ \t\r\n]+/,I=/[ \t\r\n]+$/;let $=E.firstChild,te=null;const W=q=>{q&&($=q.firstChild,$&&$.type===3&&($.value=$.value.replace(z,"")),$=q.lastChild,$&&$.type===3&&($.value=$.value.replace(I,"")))};if(!!t.isValidChild(E.name,_.toLowerCase())){for(;$;){const q=$.next;$.type===3||$.type===1&&$.name!=="p"&&!P[$.name]&&!$.attr(im)?(te||(te=new pn(_,1),te.attr(o.forced_root_block_attrs),E.insert(te,$)),te.append($)):(W(te),te=null),$=q}W(te)}},v={schema:t,addAttributeFilter:d,getAttributeFilters:p,addNodeFilter:c,getNodeFilters:f,parse:(E,_={})=>{var P;const z=o.validate,I=(P=_.context)!==null&&P!==void 0?P:o.root_name,$=a(E,I,_.format),te=new pn(I,11);gE(te,$,t.getSpecialElements());const[W,q]=_L(te,t,o,_),Z=[],ee=z?je=>y(je,Z):Ie,xe=f(),ae={nodes:{},attributes:{}},se=je=>yv(xe,s,je,ae);if(wL(te,[W,se],[q,ee]),Z.reverse(),z&&Z.length>0)if(_.context){const{pass:je,fail:ct}=Ce(Z,qt=>qt.parent===te);$d(ct,t,se),_.invalid=je.length>0}else $d(Z,t,se);const Ge=kL(o,_);return Ge&&(te.name==="body"||_.isRootContent)&&C(te,Ge),_.invalid||vv(ae,_),te}};return mL(v,o),nL(v,o,t),v},NL=e=>rc(e)?Oo({validate:!1}).serialize(e):e,hE=(e,t)=>{const n=NL(e),s=t(n);if(s.isDefaultPrevented())return s;if(rc(e))if(s.content!==n){const o=mi({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return ut(we({},s),{content:o})}else return ut(we({},s),{content:e});else return s},bE=(e,t)=>{if(t.no_events)return dn.value(t);{const n=IP(e,t);return n.isDefaultPrevented()?dn.error(ey(e,we({content:""},n)).content):dn.value(n)}},CE=(e,t,n)=>n.no_events?t:hE(t,o=>ey(e,ut(we({},n),{content:o}))).content,am=(e,t)=>{if(t.no_events)return dn.value(t);{const n=hE(t.content,s=>BP(e,ut(we({},t),{content:s})));return n.isDefaultPrevented()?(JC(e,n),dn.error(void 0)):dn.value(n)}},lm=(e,t,n)=>{n.no_events||JC(e,ut(we({},n),{content:t}))},cm=(e,t,n)=>({element:e,width:t,rows:n}),yE=(e,t)=>({element:e,cells:t}),TL=(e,t)=>({x:e,y:t}),vE=(e,t)=>{const n=parseInt($n(e,t),10);return isNaN(n)?1:n},AL=(e,t,n,s,o)=>{const r=vE(o,"rowspan"),i=vE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=yE(fb(s),[]));for(let f=t;f<t+i;f++){const d=a[c].cells;d[f]=c===n&&f===t?o:Jr(o)}}},RL=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},PL=(e,t,n)=>{for(;RL(e,t,n);)t++;return t},EE=e=>Q(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),xE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(tt(o[r],t))return b.some(TL(r,s))}return b.none()},SE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(yE(i[a].element,f))}return r},OL=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?SE(e,s,o,r,i):SE(e,s,i,r,o);return cm(e.element,EE(a),a)},DL=(e,t)=>{const n=Jr(e.element),s=w.fromTag("tbody");return Qo(s,t),It(n,s),n},BL=e=>U(e.rows,t=>{const n=U(t.cells,o=>{const r=fb(o);return Gn(r,"colspan"),Gn(r,"rowspan"),r}),s=Jr(t.element);return Qo(s,n),s}),IL=e=>{const t=cm(Jr(e),0,[]);return A(xn(e,"tr"),(n,s)=>{A(xn(n,"td,th"),(o,r)=>{AL(t,PL(t,r,s),s,n,o)})}),cm(t.element,EE(t.rows),t.rows)},$L=e=>DL(e,BL(e)),LL=(e,t,n)=>xE(e,t).bind(s=>xE(e,n).map(o=>OL(e,s,o))),FL=e=>de(e,t=>Ct(t)==="ul"||Ct(t)==="ol"),ML=(e,t)=>de(e,n=>Ct(n)==="li"&&Yf(n,t)).fold(K([]),n=>FL(e).map(s=>{const o=w.fromTag(Ct(s)),r=Fi(Eh(s),(i,a)=>qn(a,"list-style"));return ll(o,r),[w.fromTag("li"),o]}).getOr([])),UL=(e,t)=>{const n=Q(t,(s,o)=>(It(o,s),o),e);return t.length>0?sd([n]):n},zL=e=>Qi(e)?Yn(e).filter(tf).fold(K([]),t=>[e,t]):tf(e)?[e]:[],HL=(e,t)=>{const n=w.fromDom(t.commonAncestorContainer),s=ro(n,e),o=H(s,a=>ef(a)||JN(a)),r=ML(s,t),i=o.concat(r.length?r:zL(n));return U(i,Jr)},wE=()=>sd([]),VL=(e,t)=>UL(w.fromDom(t.cloneContents()),HL(e,t)),WL=(e,t)=>Yi(t,"table",re(tt,e)),jL=(e,t)=>WL(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=IL(n);return LL(r,s,o).map(i=>sd([$L(i)]))}).getOrThunk(wE),qL=(e,t)=>t.length>0&&t[0].collapsed?wE():VL(e,t[0]),KL=(e,t)=>{const n=WC(t,e);return n.length>0?jL(e,n):qL(e,t)},gc=(e,t)=>t>=0&&t<e.length&&ma(e.charAt(t)),_E=e=>wo(e.innerText),GL=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),YL=e=>b.from(e.selection.getRng()).map(t=>{const n=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),o=GL(n),r=e.dom.add(s,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=_E(r),a=wo(r.textContent);if(e.dom.remove(r),gc(a,0)||gc(a,a.length-1)){const c=n.getOr(s),f=_E(c),d=f.indexOf(i);if(d===-1)return i;{const p=gc(f,d-1),y=gc(f,d+i.length);return(p?" ":"")+i+(y?" ":"")}}else return i}).getOr(""),XL=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=gd(e,Kf(o)),i=t.contextual?KL(w.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},QL=(e,t)=>{if(t.format==="text")return YL(e);{const n=XL(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},ZL=(e,t)=>ut(we({},e),{format:t,get:!0,selection:!0,getInner:!0}),JL=(e,t,n={})=>{const s=ZL(n,t);return bE(e,s).fold(xt,o=>{const r=QL(e,o);return CE(e,r,o)})},um=0,kE=1,NE=2,eF=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,p,y)=>({start:d,end:p,diag:y}),i=(d,p,y,C,S)=>{const v=c(d,p,y,C);if(v===null||v.start===p&&v.diag===p-C||v.end===d&&v.diag===d-y){let E=d,_=y;for(;E<p||_<C;)E<p&&_<C&&e[E]===t[_]?(S.push([um,e[E]]),++E,++_):p-d>C-y?(S.push([NE,e[E]]),++E):(S.push([kE,t[_]]),++_)}else{i(d,v.start,y,v.start-v.diag,S);for(let E=v.start;E<v.end;++E)S.push([um,e[E]]);i(v.end,p,v.end-v.diag,C,S)}},a=(d,p,y,C)=>{let S=d;for(;S-p<C&&S<y&&e[S]===t[S-p];)++S;return r(d,S,p)},c=(d,p,y,C)=>{const S=p-d,v=C-y;if(S===0||v===0)return null;const E=S-v,_=v+S,P=(_%2===0?_:_+1)/2;s[1+P]=d,o[1+P]=p+1;let z,I,$,te,W;for(z=0;z<=P;++z){for(I=-z;I<=z;I+=2){for($=I+P,I===-z||I!==z&&s[$-1]<s[$+1]?s[$]=s[$+1]:s[$]=s[$-1]+1,te=s[$],W=te-d+y-I;te<p&&W<C&&e[te]===t[W];)s[$]=++te,++W;if(E%2!==0&&E-z<=I&&I<=E+z&&o[$-E]<=s[$])return a(o[$-E],I+d-y,p,C)}for(I=E-z;I<=E+z;I+=2){for($=I+P-E,I===E-z||I!==E+z&&o[$+1]<=o[$-1]?o[$]=o[$+1]-1:o[$]=o[$-1],te=o[$]-1,W=te-d+y-I;te>=d&&W>=y&&e[te]===t[W];)o[$]=te--,W--;if(E%2===0&&-z<=I&&I<=z&&o[$]<=s[$+E])return a(o[$],I+d-y,p,C)}}},f=[];return i(0,e.length,0,t.length,f),f},TE=e=>Ee(e)?e.outerHTML:ne(e)?_o.encodeRaw(e.data,!1):Oh(e)?"<!--"+e.data+"-->":"",tF=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},nF=(e,t,n)=>{const s=tF(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];o.parentNode.insertBefore(s,o)}else e.appendChild(s)},sF=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}},oF=(e,t)=>{let n=0;A(e,s=>{s[0]===um?n++:s[0]===kE?(nF(t,s[1],n),n++):s[0]===NE&&sF(t,n)})},rF=e=>H(U(gt(e.childNodes),TE),t=>t.length>0),iF=(e,t)=>{const n=U(gt(t.childNodes),TE);return oF(eF(n,e),t),t},aF=Ko(()=>document.implementation.createHTMLDocument("undo")),lF=e=>e.indexOf("</iframe>")!==-1,cF=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),uF=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),fm=e=>{const t=rF(e.getBody()),n=Ke(t,o=>{const r=$y(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return lF(s)?cF(n):uF(s)},dm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?iF(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:Ne(s)&&_C(s)?!s.isFakeCaret:!0}),e.selection.moveToBookmark(s)},mm=e=>e.type==="fragmented"?e.fragments.join(""):e.content,AE=e=>{const t=w.fromTag("body",aF());return Gu(t,mm(e)),A(xn(t,"*[data-mce-bogus]"),xo),wh(t)},fF=(e,t)=>mm(e)===mm(t),dF=(e,t)=>AE(e)===AE(t),hc=(e,t)=>!e||!t?!1:fF(e,t)?!0:dF(e,t),pm=e=>e.get()===0,bc=(e,t,n)=>{pm(n)&&(e.typing=t)},RE=(e,t)=>{e.typing&&(bc(e,!1,t),e.add())},mF=e=>{e.typing&&(e.typing=!1,e.add())},pF=(e,t,n)=>{pm(t)&&n.set($b(e.selection))},gF=(e,t,n,s,o,r,i)=>{const a=fm(e);if(r=r||{},r=G.extend(r,a),pm(s)===!1||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:r,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&hc(c,r))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const f=$1(e);if(f&&t.data.length>f){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}r.bookmark=$b(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(r),n.set(t.data.length-1);const d={level:r,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),r},hF=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},bF=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];dm(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},CF=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],dm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},yF=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,bc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],dm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},vF=e=>{e.clear(),e.add()},EF=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!hc(fm(e),t.data[0]),xF=(e,t)=>t.get()<e.data.length-1&&!e.typing,SF=(e,t,n)=>(RE(e,t),e.beforeChange(),e.ignore(n),e.add()),wF=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},_F=(e,t)=>{const n=e.dom,s=Ne(t)?t:e.getBody();Pt(e.hasVisual)&&(e.hasVisual=z1(e)),A(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=H1(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=Jb(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},PE=e=>({init:{bindEvents:Ie},undoManager:{beforeChange:(t,n)=>pF(e,t,n),add:(t,n,s,o,r,i)=>gF(e,t,n,s,o,r,i),undo:(t,n,s)=>yF(e,t,n,s),redo:(t,n)=>CF(e,t,n),clear:(t,n)=>hF(e,t,n),reset:t=>vF(t),hasUndo:(t,n)=>EF(e,t,n),hasRedo:(t,n)=>xF(t,n),transact:(t,n,s)=>SF(t,n,s),ignore:(t,n)=>wF(t,n),extra:(t,n,s,o)=>bF(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>Wd(e,t,n,s,o),matchAll:(t,n)=>HI(e,t,n),matchNode:(t,n,s,o)=>Is(e,t,n,s,o),canApply:t=>WI(e,t),closest:t=>VI(e,t),apply:(t,n,s)=>Kv(e,t,n,s),remove:(t,n,s,o)=>jv(e,t,n,s,o),toggle:(t,n,s)=>k$(e,t,n,s),formatChanged:(t,n,s,o,r)=>_$(e,t,n,s,o,r)},editor:{getContent:t=>DD(e,t),setContent:(t,n)=>MI(e,t,n),insertContent:(t,n)=>II(e,t,n),addVisual:t=>_F(e,t)},selection:{getContent:(t,n)=>JL(e,t,n)},autocompleter:{addDecoration:t=>xD(e,t),removeDecoration:()=>wD(e,w.fromDom(e.getBody()))},raw:{getModel:()=>b.none()}}),kF=e=>{const t=f=>ft(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,d,p)=>s.transact(p),ignore:(f,d)=>s.ignore(d),extra:(f,d,p,y)=>s.extra(p,y)},formatter:{match:(f,d,p,y)=>o.match(f,t(d),y),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,d,p)=>o.apply(f,t(d)),remove:(f,d,p,y)=>o.remove(f,t(d)),toggle:(f,d,p)=>o.toggle(f,t(d)),formatChanged:(f,d,p,y,C)=>o.formatChanged(d,p,y,C)},editor:{getContent:f=>r.getContent(f),setContent:(f,d)=>({content:r.setContent(f,d),html:""}),insertContent:(f,d)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>b.some(c.getRawModel())}}},NF=()=>{const e=K(null),t=K("");return{init:{bindEvents:Ie},undoManager:{beforeChange:Ie,add:e,undo:e,redo:e,clear:Ie,reset:Ie,hasUndo:pt,hasRedo:pt,transact:e,ignore:Ie,extra:Ie},formatter:{match:pt,matchAll:K([]),matchNode:K(void 0),canApply:pt,closest:t,apply:Ie,remove:Ie,toggle:Ie,formatChanged:K({unbind:Ie})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Ie},selection:{getContent:t},autocompleter:{addDecoration:Ie,removeDecoration:Ie},raw:{getModel:K(b.none())}}},io=e=>Fe(e.plugins,"rtc"),TF=e=>lt(e.plugins,"rtc").bind(t=>b.from(t.setup)),AF=e=>{const t=e;return TF(e).fold(()=>(t.rtcInstance=PE(e),b.none()),n=>(t.rtcInstance=NF(),b.some(()=>n().then(s=>(t.rtcInstance=kF(s),s.rtc.isRemote)))))},gm=e=>e.rtcInstance?e.rtcInstance:PE(e),kt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},RF=(e,t,n)=>{kt(e).undoManager.beforeChange(t,n)},PF=(e,t,n,s,o,r,i)=>kt(e).undoManager.add(t,n,s,o,r,i),OF=(e,t,n,s)=>kt(e).undoManager.undo(t,n,s),DF=(e,t,n)=>kt(e).undoManager.redo(t,n),BF=(e,t,n)=>{kt(e).undoManager.clear(t,n)},IF=(e,t)=>{kt(e).undoManager.reset(t)},$F=(e,t,n)=>kt(e).undoManager.hasUndo(t,n),LF=(e,t,n)=>kt(e).undoManager.hasRedo(t,n),FF=(e,t,n,s)=>kt(e).undoManager.transact(t,n,s),MF=(e,t,n)=>{kt(e).undoManager.ignore(t,n)},UF=(e,t,n,s,o)=>{kt(e).undoManager.extra(t,n,s,o)},zF=(e,t,n,s,o)=>kt(e).formatter.match(t,n,s,o),HF=(e,t,n)=>kt(e).formatter.matchAll(t,n),VF=(e,t,n,s,o)=>kt(e).formatter.matchNode(t,n,s,o),WF=(e,t)=>kt(e).formatter.canApply(t),jF=(e,t)=>kt(e).formatter.closest(t),qF=(e,t,n,s)=>{kt(e).formatter.apply(t,n,s)},KF=(e,t,n,s,o)=>{kt(e).formatter.remove(t,n,s,o)},GF=(e,t,n,s)=>{kt(e).formatter.toggle(t,n,s)},YF=(e,t,n,s,o,r)=>kt(e).formatter.formatChanged(t,n,s,o,r),XF=(e,t)=>gm(e).editor.getContent(t),QF=(e,t,n)=>gm(e).editor.setContent(t,n),ZF=(e,t,n)=>gm(e).editor.insertContent(t,n),JF=(e,t,n)=>kt(e).selection.getContent(t,n),eM=(e,t)=>kt(e).editor.addVisual(t),OE=e=>kt(e).init.bindEvents(),tM=(e,t)=>kt(e).autocompleter.addDecoration(t),nM=e=>kt(e).autocompleter.removeDecoration(),sM=(e,t={})=>{const n=t.format?t.format:"html";return JF(e,n,t)},DE=e=>e.dom.length===0?(Tt(e),b.none()):b.some(e),oM=(e,t)=>e.filter(n=>ha.isBookmarkNode(n.dom)).bind(t?qi:Yo),rM=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(_d(o,r,!1,!s),n.setStart(r,i)):(_d(r,o,!1,!s),n.setEnd(r,i))},iM=(e,t)=>{Yn(e).each(n=>{const s=e.dom;t&&Jl(n,F(s,0))?tc(s,0):!t&&ec(n,F(s,s.length))&&wd(s,s.length)})},BE=(e,t,n,s)=>{e.bind(o=>((s?wd:tc)(o.dom,s?o.dom.length:0),t.filter(In).map(i=>rM(o,i,n,s)))).orThunk(()=>oM(t,s).or(t).filter(In).map(r=>iM(r,s)))},aM=(e,t)=>{const n=b.from(t.firstChild).map(w.fromDom),s=b.from(t.lastChild).map(w.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Yo).filter(In).bind(DE),r=s.bind(qi).filter(In).bind(DE);BE(o,n,e,!0),BE(r,s,e,!1),e.collapse(!1)},lM=(e,t)=>ut(we({format:"html"},e),{set:!0,selection:!0,content:t}),cM=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,we(we({forced_root_block:!1},o),t));return Oo({validate:!1},e.schema).serialize(r)}else return t.content},uM=(e,t,n={})=>{const s=lM(n,t);am(e,s).each(o=>{const r=cM(e,o),i=e.selection.getRng();aM(i,i.createContextualFragment(r)),e.selection.setRng(i),Ca(e,i),lm(e,r,o)})},IE=(e,t,n)=>{if(e&&Fe(e,t)){const s=H(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var fM=(e,t)=>{let n,s;const o=(i,a)=>de(a,c=>e.is(c,i)),r=i=>e.getParents(i,null,e.getRoot());return{selectorChangedWithUnbind:(i,a)=>(n||(n={},s={},t.on("NodeChange",c=>{const f=c.element,d=r(f),p={};G.each(n,(y,C)=>{o(C,d).each(S=>{s[C]||(A(y,v=>{v(!0,{node:S,selector:C,parents:d})}),s[C]=y),p[C]=y})}),G.each(s,(y,C)=>{p[C]||(delete s[C],G.each(y,S=>{S(!1,{node:f,selector:C,parents:d})}))})})),n[i]||(n[i]=[]),n[i].push(a),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{IE(n,i,a),IE(s,i,a)}})}};const $E=e=>!!(e&&e.ownerDocument)&&eo(w.fromDom(e.ownerDocument),w.fromDom(e)),dM=e=>e?$E(e.startContainer)&&$E(e.endContainer):!1,LE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=fM(e,s),a=(J,pe)=>{const Me=e.createRng();Ne(J)&&Ne(pe)?(Me.setStart(J,pe),Me.setEnd(J,pe),z(Me),E(!1)):(Xf(e,Me,s.getBody(),!0),z(Me))},c=J=>sM(s,J),f=(J,pe)=>uM(s,J,pe),d=J=>Ty(s.getBody(),P(),J),p=J=>Ay(s.getBody(),P(),J),y=(J,pe)=>ct.getBookmark(J,pe),C=J=>ct.moveToBookmark(J),S=(J,pe)=>(gD(e,J,pe).each(z),J),v=()=>{const J=P(),pe=_();return!J||J.item?!1:J.compareEndPoints?J.compareEndPoints("StartToEnd",J)===0:!pe||J.collapsed},E=J=>{const pe=P();pe.collapse(!!J),z(pe)},_=()=>t.getSelection?t.getSelection():t.document.selection,P=()=>{let J,pe,Me;const De=(le,Se,Be)=>{try{return Se.compareBoundaryPoints(le,Be)}catch{return-1}},me=t.document;if(s.bookmark!==void 0&&fr(s)===!1){const le=fd(s);if(le.isSome())return le.map(Se=>gd(s,[Se])[0]).getOr(me.createRange())}try{(J=_())&&!fl(J.anchorNode)&&(J.rangeCount>0?pe=J.getRangeAt(0):pe=J.createRange?J.createRange():me.createRange(),pe=gd(s,[pe])[0])}catch{}return pe||(pe=me.createRange()),pe.setStart&&pe.startContainer.nodeType===9&&pe.collapsed&&(Me=e.getRoot(),pe.setStart(Me,0),pe.setEnd(Me,0)),o&&r&&(De(pe.START_TO_START,pe,o)===0&&De(pe.END_TO_END,pe,o)===0?pe=r:(o=null,r=null)),pe},z=(J,pe)=>{let Me;if(!dM(J))return;const De=_();if(J=s.dispatch("SetSelectionRange",{range:J,forward:pe}).range,De){r=J;try{De.removeAllRanges(),De.addRange(J)}catch{}pe===!1&&De.extend&&(De.collapse(J.endContainer,J.endOffset),De.extend(J.startContainer,J.startOffset)),o=De.rangeCount>0?De.getRangeAt(0):null}!J.collapsed&&J.startContainer===J.endContainer&&De.setBaseAndExtent&&J.endOffset-J.startOffset<2&&J.startContainer.hasChildNodes()&&(Me=J.startContainer.childNodes[J.startOffset],Me&&Me.tagName==="IMG"&&(De.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),(De.anchorNode!==J.startContainer||De.focusNode!==J.endContainer)&&De.setBaseAndExtent(Me,0,Me,1))),s.dispatch("AfterSetSelectionRange",{range:J,forward:pe})},I=J=>(f(e.getOuterHTML(J)),J),$=()=>mD(s.getBody(),P()),te=(J,pe)=>pD(e,P(),J,pe),W=()=>{const J=_(),pe=J==null?void 0:J.anchorNode,Me=J==null?void 0:J.focusNode;if(!J||!pe||!Me||fl(pe)||fl(Me))return!0;const De=e.createRng();De.setStart(pe,J.anchorOffset),De.collapse(!0);const me=e.createRng();return me.setStart(Me,J.focusOffset),me.collapse(!0),De.compareBoundaryPoints(De.START_TO_START,me)<=0},je={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:s,collapse:E,setCursorLocation:a,getContent:c,setContent:f,getBookmark:y,moveToBookmark:C,select:S,isCollapsed:v,isForward:W,setNode:I,getNode:$,getSel:_,setRng:z,getRng:P,getStart:d,getEnd:p,getSelectedBlocks:te,normalize:()=>{const J=P(),pe=_();if(!mP(pe)&&Wl(s)){const Me=Kl(e,J);return Me.each(De=>{z(De,W())}),Me.getOr(J)}return J},selectorChanged:(J,pe)=>(i(J,pe),je),selectorChangedWithUnbind:i,getScrollContainer:()=>{let J,pe=e.getRoot();for(;pe&&pe.nodeName!=="BODY";){if(pe.scrollHeight>pe.clientHeight){J=pe;break}pe=pe.parentNode}return J},scrollIntoView:(J,pe)=>{Ne(J)?BO(s,J,pe):Ca(s,P(),pe)},placeCaretAt:(J,pe)=>z(ay(J,pe,s.getDoc())),getBoundingClientRect:()=>{const J=P();return J.collapsed?F.fromRangeStart(J).getClientRects()[0]:J.getBoundingClientRect()},destroy:()=>{t=o=r=null,qt.destroy()}},ct=ha(je),qt=ny(je,s);return je.bookmarkManager=ct,je.controlSelection=qt,je},mM=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let d=f.attr(r);d!==void 0?(f.attr(o,d.length>0?d:null),f.attr(r,null)):(d=f.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),f.name):i&&(d=i.call(a,d,o,f.name)),f.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=r.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(a.firstChild).exists(f=>!bl(f.value))?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{let o=s.length;for(;o--;){const r=s[o].firstChild;r&&(r.value=_o.decode(r.value))}}),e.addNodeFilter("script,style",(s,o)=>{const r=a=>a.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const a=s[i],c=a.firstChild?a.firstChild.value:"";if(o==="script"){const f=a.attr("type");f&&a.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`// <![CDATA[
`+r(c)+`
// ]]>`)}else t.element_format==="xhtml"&&c.length>0&&(a.firstChild.value=`<!--
`+r(c)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o];t.preserve_cdata&&r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{A(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},pM=e=>{const t=s=>s&&s.name==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},gM=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");G.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return SP(e,ut(we({},n),{node:r})),s&&(o.doc=s),r},hM=(e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events,bM=(e,t,n)=>hM(e,n)?gM(e,t,n):t,CM=(e,t,n)=>{G.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},yM=(e,t,n)=>!t.no_events&&e?wP(e,ut(we({},t),{content:n})).content:n,vM=(e,t,n)=>{const s=wo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||hl(w.fromDom(t))?s:G.trim(s)},EM=(e,t,n)=>{const s=n.selection?we({forced_root_block:!1},n):n,o=e.parse(t,s);return pM(o),o},xM=(e,t,n)=>Oo(e,t).serialize(n),SM=(e,t,n,s,o)=>{const r=xM(t,n,s);return yM(e,o,r)},wM=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:ot.DOM,o=t&&t.schema?t.schema:No(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=mi(e,o);mM(r,e,s);const i=(a,c={})=>{const f=we({format:"html"},c),d=bM(t,a,f),p=vM(s,d,f),y=EM(r,p,f);return f.format==="tree"?y:SM(t,e,o,y,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:re(CM,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters}},FE=(e,t)=>{const n=wM(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},_M="html",kM=(e,t)=>ut(we({},e),{format:t,get:!0,getInner:!0}),NM=(e,t={})=>{const n=t.format?t.format:_M,s=kM(t,n);return bE(e,s).fold(xt,o=>{const r=XF(e,o);return CE(e,r,o)})},TM="html",AM=(e,t)=>ut(we({format:TM},e),{set:!0,content:t}),hm=(e,t,n={})=>{const s=AM(n,t);return am(e,s).map(o=>{const r=QF(e,o.content,o);return lm(e,r.html,o),r.content}).getOr(t)},RM="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),PM="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),OM=e=>{const t=H(RM,s=>Fe(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),jn(t)},DM=e=>{const t=G.makeMap(e.plugins," "),s=H(PM,o=>Fe(t,o));return jn(s)},BM=(e,t)=>{const n=OM(e),s=DM(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+f+d)}},IM=(e,t)=>{BM(e,t)},Cc=ot.DOM,$M=e=>{Cc.setStyle(e.id,"display",e.orgDisplay)},yc=e=>b.from(e).each(t=>t.destroy()),LM=e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},FM=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Cc.unbind(t,"submit reset",e.formEventDelegate))},MM=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Cc.remove(o.nextSibling),_P(e),e.editorManager.remove(e),!e.inline&&s&&$M(e),kP(e),Cc.remove(e.getContainer()),yc(t),yc(n),e.destroy()}},UM=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),yc(n),yc(s)),FM(e),LM(e),e.destroyed=!0}},vc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Fe(e,o)}})(),pi=nn.ModelManager,ME=(e,t)=>t.dom[e],UE=(e,t)=>parseInt(ws(t,e),10),zM=re(ME,"clientWidth"),HM=re(ME,"clientHeight"),VM=re(UE,"margin-top"),WM=re(UE,"margin-left"),jM=e=>e.dom.getBoundingClientRect(),qM=(e,t,n)=>{const s=zM(e),o=HM(e);return t>=0&&n>=0&&t<=s&&n<=o},KM=(e,t,n,s)=>{const o=jM(t),r=e?o.left+t.dom.clientLeft+WM(t):0,i=e?o.top+t.dom.clientTop+VM(t):0,a=n-r,c=s-i;return{x:a,y:c}},GM=(e,t,n)=>{const s=w.fromDom(e.getBody()),o=e.inline?s:uN(s),r=KM(e.inline,o,t,n);return qM(o,r.x,r.y)},YM=e=>b.from(e).map(w.fromDom),XM=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return YM(t).map(Vr).getOr(!1)},QM=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}},zE=e=>{const t=[],n=()=>{const y=e.theme;return y&&y.getNotificationManagerImpl?y.getNotificationManagerImpl():QM()},s=()=>b.from(t[0]),o=(y,C)=>y.type===C.type&&y.text===C.text&&!y.progressBar&&!y.timeout&&!C.progressBar&&!C.timeout,r=()=>{A(t,y=>{y.reposition()})},i=y=>{t.push(y)},a=y=>{Te(t,C=>C===y).each(C=>{t.splice(C,1)})},c=(y,C=!0)=>{if(!(e.removed||!XM(e)))return C&&e.dispatch("BeforeOpenNotification",{notification:y}),de(t,S=>o(n().getArgs(S),y)).getOrThunk(()=>{e.editorManager.setActive(e);const S=n().open(y,()=>{a(S),r(),s().fold(()=>e.focus(),v=>vy(w.fromDom(v.getEl())))});return i(S),r(),e.dispatch("OpenNotification",{notification:we({},S)}),S})},f=()=>{s().each(y=>{n().close(y),a(y),r()})},d=K(t);return(y=>{y.on("SkinLoaded",()=>{const C=_1(y);C&&c({text:C,type:"warning",timeout:0},!1),r()}),y.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),y.on("remove",()=>{A(t.slice(),C=>{n().close(C)})})})(e),{open:c,close:f,getNotifications:d}},gi=nn.PluginManager,br=nn.ThemeManager;var ZM=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}};const HE=e=>{let t=[];const n=()=>{const v=e.theme;return v&&v.getWindowManagerImpl?v.getWindowManagerImpl():ZM()},s=(v,E)=>(..._)=>E?E.apply(v,_):void 0,o=v=>{e.dispatch("OpenWindow",{dialog:v})},r=v=>{e.dispatch("CloseWindow",{dialog:v})},i=v=>{t.push(v),o(v)},a=v=>{r(v),t=H(t,E=>E!==v),t.length===0&&e.focus()},c=()=>b.from(t[t.length-1]),f=v=>{e.editorManager.setActive(e),ud(e),e.ui.show();const E=v();return i(E),E},d=(v,E)=>f(()=>n().open(v,E,a)),p=v=>f(()=>n().openUrl(v,a)),y=(v,E,_)=>{const P=n();P.alert(v,s(_||P,E))},C=(v,E,_)=>{const P=n();P.confirm(v,s(_||P,E))},S=()=>{c().each(v=>{n().close(v),a(v)})};return e.on("remove",()=>{A(t,v=>{n().close(v)})}),{open:d,openUrl:p,alert:y,confirm:C,close:S}},VE=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Ec=(e,t)=>{e._skinLoaded?VE(e,t):e.on("SkinLoaded",()=>{VE(e,t)})},JM=(e,t)=>{Ec(e,ns.translate(["Failed to upload image: {0}",t]))},Na=(e,t,n)=>{QC(e,t,{message:n}),console.error(n)},Ta=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,eU=(e,t,n)=>{Na(e,"PluginLoadError",Ta("plugin",t,n))},tU=(e,t,n)=>{Na(e,"IconsLoadError",Ta("icons",t,n))},nU=(e,t,n)=>{Na(e,"LanguageLoadError",Ta("language",t,n))},sU=(e,t,n)=>{Na(e,"ThemeLoadError",Ta("theme",t,n))},oU=(e,t,n)=>{Na(e,"ModelLoadError",Ta("model",t,n))},rU=(e,t,n)=>{const s=ns.translate(["Failed to initialize plugin: {0}",t]);QC(e,"PluginLoadError",{message:s}),xc(s,n),Ec(e,s)},xc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},iU=e=>/^[a-z0-9\-]+$/i.test(e),aU=e=>WE(e,y1(e)),lU=e=>WE(e,Yb(e)),WE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`,r=e.inline===!0;return U(t,i=>iU(i)&&!r?`${n}/${i}/${o}`:e.documentBaseURI.toAbsolute(i))},cU=e=>{e.contentCSS=e.contentCSS.concat(aU(e),lU(e))},uU=it,fU=(e,t,n)=>RN(e,t,uU,n),jE=()=>{let n={};const s=(y,C)=>({status:y,resultUri:C}),o=y=>y in n;return{hasBlobUri:o,getResultUri:y=>{const C=n[y];return C?C.resultUri:null},isPending:y=>o(y)?n[y].status===1:!1,isUploaded:y=>o(y)?n[y].status===2:!1,markPending:y=>{n[y]=s(1,null)},markUploaded:(y,C)=>{n[y]=s(2,C)},removeFailed:y=>{delete n[y]},destroy:()=>{n={}}}};let dU=0;const mU=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36),t=new Date().getTime();return"s"+t.toString(36)+e()+e()+e()},pU=e=>e+dU+++mU(),gU=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,y,C,S,v)=>{if(be(p))return s({id:p,name:S,filename:v,blob:y,base64:C});if(ft(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const y=p.id||pU("blobid"),C=p.name||y,S=p.blob;return{id:K(y),name:K(C),filename:K(p.filename||C+"."+t(S.type)),blob:K(S),base64:K(p.base64),blobUri:K(p.blobUri||URL.createObjectURL(S)),uri:K(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>de(e,p).getOrUndefined(),i=p=>r(y=>y.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(y=>y.blobUri()===p),getByData:(p,y)=>r(C=>C.base64()===p&&C.blob().type===y),findFirst:r,removeByUri:p=>{e=H(e,y=>y.blobUri()===p?(URL.revokeObjectURL(y.blobUri()),!1):!0)},destroy:()=>{A(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},hU=(e,t)=>{const n={},s=(S,v)=>S?S.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v,o=(S,v)=>new Promise((E,_)=>{const P=new XMLHttpRequest;P.open("POST",t.url),P.withCredentials=t.credentials,P.upload.onprogress=I=>{v(I.loaded/I.total*100)},P.onerror=()=>{_("Image upload failed due to a XHR Transport error. Code: "+P.status)},P.onload=()=>{if(P.status<200||P.status>=300){_("HTTP Error: "+P.status);return}const I=JSON.parse(P.responseText);if(!I||!be(I.location)){_("Invalid JSON: "+P.responseText);return}E(s(t.basePath,I.location))};const z=new FormData;z.append("file",S.blob(),S.filename()),P.send(z)}),r=()=>new Promise(S=>{S([])}),i=(S,v)=>({url:v,blobInfo:S,status:!0}),a=(S,v)=>({url:"",blobInfo:S,status:!1,error:v}),c=(S,v)=>{G.each(n[S],E=>{E(v)}),delete n[S]},f=(S,v,E)=>(e.markPending(S.blobUri()),new Promise(_=>{let P,z;try{const I=()=>{P&&(P.close(),z=Ie)},$=W=>{I(),e.markUploaded(S.blobUri(),W),c(S.blobUri(),i(S,W)),_(i(S,W))},te=W=>{I(),e.removeFailed(S.blobUri()),c(S.blobUri(),a(S,W)),_(a(S,W))};z=W=>{W<0||W>100||b.from(P).orThunk(()=>b.from(E).map(Ir)).each(q=>{P=q,q.progressBar.value(W)})},v(S,z).then($,W=>{te(be(W)?{message:W}:W)})}catch(I){_(a(S,I))}})),d=S=>S===o,p=S=>{const v=S.blobUri();return new Promise(E=>{n[v]=n[v]||[],n[v].push(E)})},y=(S,v)=>(S=G.grep(S,E=>!e.isUploaded(E.blobUri())),Promise.all(G.map(S,E=>e.isPending(E.blobUri())?p(E):f(E,t.handler,v)))),C=(S,v)=>!t.url&&d(t.handler)?r():y(S,v);return Ye(t.handler)===!1&&(t.handler=o),{upload:C}},qE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),KE=(e,t)=>hU(t,{url:d1(e),basePath:m1(e),credentials:p1(e),handler:g1(e)}),bU=e=>{const t=jE(),n=KE(e,t);return{upload:(s,o=!0)=>n.upload(s,o?qE(e):void 0)}},CU=e=>{const t=$t(null);return e.on("change AddUndo",s=>{t.set(we({},s.level))}),{fireIfChanged:()=>{const s=e.undoManager.data;vs(s).filter(o=>!hc(t.get(),o)).each(o=>{e.setDirty(!0),e.dispatch("change",{level:o,lastLevel:Fr(s,s.length-2).getOrNull()})})}}},yU=e=>{const t=gU();let n,s;const o=jE(),r=[],i=CU(e),a=I=>$=>e.selection?I($):[],c=I=>I+(I.indexOf("?")===-1?"?":"&")+new Date().getTime(),f=(I,$,te)=>{let W=0;do W=I.indexOf($,W),W!==-1&&(I=I.substring(0,W)+te+I.substr(W+$.length),W+=te.length-$.length+1);while(W!==-1);return I},d=(I,$,te)=>{const W=`src="${te}"${te===et.transparentSrc?' data-mce-placeholder="1"':""}`;return I=f(I,`src="${$}"`,W),I=f(I,'data-mce-src="'+$+'"','data-mce-src="'+te+'"'),I},p=(I,$)=>{A(e.undoManager.data,te=>{te.type==="fragmented"?te.fragments=U(te.fragments,W=>d(W,I,$)):te.content=d(te.content,I,$)})},y=(I,$)=>{const te=e.convertURL($,"src");p(I.src,$),Ss(w.fromDom(I),{src:jb(e)?c($):$,"data-mce-src":te})},C=()=>(n||(n=KE(e,o)),_().then(a(I=>{const $=U(I,te=>te.blobInfo);return n.upload($,qE(e)).then(a(te=>{const W=[],q=U(te,(Z,ee)=>{const xe=I[ee].blobInfo,ae=I[ee].image;let se=!1;return Z.status&&u1(e)?(t.removeByUri(ae.src),io(e)||y(ae,Z.url)):Z.error&&(Z.error.remove&&(p(ae.getAttribute("src"),et.transparentSrc),W.push(ae),se=!0),JM(e,Z.error.message)),{element:ae,status:Z.status,uploadUri:Z.url,blobInfo:xe,removed:se}});return q.length>0&&i.fireIfChanged(),W.length>0&&!io(e)&&e.undoManager.transact(()=>{A(W,Z=>{e.dom.remove(Z),t.removeByUri(Z.src)})}),q}))}))),S=()=>Wb(e)?C():Promise.resolve([]),v=I=>at(r,$=>$(I)),E=I=>{r.push(I)},_=()=>(s||(s=lL(o,t)),s.findAll(e.getBody(),v).then(a(I=>(I=H(I,$=>typeof $=="string"?(Ec(e,$),!1):!0),io(e)||A(I,$=>{p($.image.src,$.blobInfo.blobUri()),$.image.src=$.blobInfo.blobUri(),$.image.removeAttribute("data-mce-src")}),I)))),P=()=>{t.destroy(),o.destroy(),s=n=null},z=I=>I.replace(/src="(blob:[^"]+)"/g,($,te)=>{const W=o.getResultUri(te);if(W)return'src="'+W+'"';let q=t.getByUri(te);if(q||(q=Q(e.editorManager.get(),(Z,ee)=>Z||ee.editorUpload&&ee.editorUpload.blobCache.getByUri(te),null)),q){const Z=q.blob();return'src="data:'+Z.type+";base64,"+q.base64()+'"'}return $});return e.on("SetContent",()=>{Wb(e)?S():_()}),e.on("RawSaveContent",I=>{I.content=z(I.content)}),e.on("GetContent",I=>{I.source_view||I.format==="raw"||I.format==="tree"||(I.content=z(I.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",I=>{A(I,$=>{const te=$.attr("src");if(t.getByUri(te))return;const W=o.getResultUri(te);W&&$.attr("src",W)})})}),{blobCache:t,addFilter:E,uploadImages:C,uploadImagesAuto:S,scanForImages:_,destroy:P}},vU=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>Ee(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{G.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},GE={remove_similar:!0,inherit:!1},hi=we({selector:"td,th"},GE),EU={tablecellbackgroundcolor:we({styles:{backgroundColor:"%value"}},hi),tablecellverticalalign:we({styles:{"vertical-align":"%value"}},hi),tablecellbordercolor:we({styles:{borderColor:"%value"}},hi),tablecellclass:we({classes:["%value"]},hi),tableclass:we({selector:"table",classes:["%value"]},GE),tablecellborderstyle:we({styles:{borderStyle:"%value"}},hi),tablecellborderwidth:we({styles:{borderWidth:"%value"}},hi)},xU=K(EU),SU=e=>{const t={},n=i=>Ne(i)?t[i]:t,s=i=>Fe(t,i),o=(i,a)=>{i&&(be(i)?(Nt(a)||(a=[a]),A(a,c=>{Pt(c.deep)&&(c.deep=!Rn(c)),Pt(c.split)&&(c.split=!Rn(c)||Wt(c)),Pt(c.remove)&&Rn(c)&&!Wt(c)&&(c.remove="none"),Rn(c)&&Wt(c)&&(c.mixed=!0,c.block_expand=!0),be(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):bt(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(vU(e)),o(xU()),o(T1(e)),{get:n,has:s,register:o,unregister:r}},Sc=G.each,kn=ot.DOM,YE=(e,t)=>{let n,s,o;const r=t&&t.schema||No({}),i=(d,p)=>{p.classes.length&&kn.addClass(d,p.classes.join(" ")),kn.setAttribs(d,p.attrs)},a=d=>{s=typeof d=="string"?{name:d,classes:[],attrs:{}}:d;const p=kn.create(s.name);return i(p,s),p},c=(d,p)=>{const y=typeof d!="string"?d.nodeName.toLowerCase():d,C=r.getElementRule(y),S=C&&C.parentsRequired;return S&&S.length?p&&G.inArray(S,p)!==-1?p:S[0]:!1},f=(d,p,y)=>{let C,S;const v=p.length>0&&p[0],E=v&&v.name,_=c(d,E);if(_)E===_?(S=p[0],p=p.slice(1)):S=_;else if(v)S=p[0],p=p.slice(1);else if(!y)return d;return S&&(C=a(S),C.appendChild(d)),y&&(C||(C=kn.create("div"),C.appendChild(d)),G.each(y,P=>{const z=a(P);C.insertBefore(z,d)})),f(C,p,S&&S.siblings)};return e&&e.length?(s=e[0],n=a(s),o=kn.create("div"),o.appendChild(f(n,e.slice(1),s.siblings)),o):""},wU=e=>{let t;const n={classes:[],attrs:{}};return e=n.selector=G.trim(e),e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":G.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},_U=e=>!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=G.map(t.split(/(?:~\+|~|\+)/),wU),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()),kU=(e,t)=>{let n,s,o="",r,i=A1(e);if(i==="")return"";const a=d=>d.replace(/%(\w+)/g,"");if(typeof t=="string"){if(t=e.formatter.get(t),!t)return;t=t[0]}if("preview"in t){const d=lt(t,"preview");if(Hr(d,!1))return"";i=d.getOr(i)}n=t.block||t.inline||"span";const c=_U(t.selector);c.length?(c[0].name||(c[0].name=n),n=t.selector,s=YE(c,e)):s=YE([n],e);const f=kn.select(n,s)[0]||s.firstChild;return Sc(t.styles,(d,p)=>{const y=a(d);y&&kn.setStyle(f,p,y)}),Sc(t.attributes,(d,p)=>{const y=a(d);y&&kn.setAttrib(f,p,y)}),Sc(t.classes,d=>{const p=a(d);kn.hasClass(f,p)||kn.addClass(f,p)}),e.dispatch("PreviewFormats"),kn.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s),r=kn.getStyle(e.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Sc(i.split(" "),d=>{let p=kn.getStyle(f,d,!0);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(p)&&(p=kn.getStyle(e.getBody(),d,!0),Ml(p).toLowerCase()==="#ffffff"))&&!(d==="color"&&Ml(p).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(p)){if(r===0)return;p=parseFloat(p)/(/%$/.test(p)?100:1)*r+"px"}d==="border"&&p&&(o+="padding:0 2px;"),o+=d+":"+p+";"}}),e.dispatch("AfterPreviewFormats"),kn.remove(s),o},NU=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},XE=e=>{const t=SU(e),n=$t(null);return NU(e),e$(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{qF(e,s,o,r)},remove:(s,o,r,i)=>{KF(e,s,o,r,i)},toggle:(s,o,r)=>{GF(e,s,o,r)},match:(s,o,r,i)=>zF(e,s,o,r,i),closest:s=>jF(e,s),matchAll:(s,o)=>HF(e,s,o),matchNode:(s,o,r,i)=>VF(e,s,o,r,i),canApply:s=>WF(e,s),formatChanged:(s,o,r,i)=>YF(e,n,s,o,r,i),getCssText:re(kU,e)}},QE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},TU=(e,t,n)=>{const s=$t(!1),o=c=>{bc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;QE(f)||(RE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;QE(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;c.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&hc(fm(e),t.data[0])===!1&&(e.isDirty()===!1&&e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!d&&(t.beforeChange(),bc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},AU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},ZE=e=>{const t=To(),n=$t(0),s=$t(0),o={data:[],typing:!1,beforeChange:()=>{RF(e,n,t)},add:(r,i)=>PF(e,o,s,n,t,r,i),undo:()=>OF(e,o,n,s),redo:()=>DF(e,s,o.data),clear:()=>{BF(e,o,s)},reset:()=>{IF(e,o)},hasUndo:()=>$F(e,o,s),hasRedo:()=>LF(e,o,s),transact:r=>FF(e,o,n,r),ignore:r=>{MF(e,n,r)},extra:(r,i)=>{UF(e,o,s,r,i)}};return io(e)||TU(e,o,n),AU(e),o},RU=[9,27,ge.HOME,ge.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ge.DOWN,ge.UP,ge.LEFT,ge.RIGHT].concat(et.browser.isFirefox()?[224]:[]),JE="data-mce-placeholder",e0=e=>e.type==="keydown"||e.type==="keyup",t0=e=>{const t=e.keyCode;return t===ge.BACKSPACE||t===ge.DELETE},PU=e=>{if(e0(e)){const t=e.keyCode;return!t0(e)&&(ge.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||R(RU,t))}else return!1},OU=e=>e0(e)&&!(t0(e)||e.type==="keyup"&&e.keyCode===229),DU=(e,t,n)=>{if(Ht(w.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},BU=e=>{const t=e.dom,n=Sn(e),s=w1(e),o=(r,i)=>{if(PU(r))return;const a=e.getBody(),c=OU(r)?!1:DU(t,a,n);(t.getAttrib(a,JE)!==""!==c||i)&&(t.setAttrib(a,JE,c?s:null),t.setAttrib(a,"aria-placeholder",c?s:null),DP(e,c),e.on(c?"keydown":"keyup",o),e.off(c?"keyup":"keydown",o))};s&&e.on("init",r=>{o(r,!0),e.on("change SetContent ExecCommand",o),e.on("paste",i=>Un.setEditorTimeout(e,()=>o(i)))})},IU=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,$U=e=>IU.test(e),Cr=(e,t)=>Js(w.fromDom(t),x1(e)),LU=e=>ot.DOM.getStyle(e,"direction",!0)==="rtl"||$U(e.textContent),FU=(e,t,n)=>H(ot.DOM.getParents(n.container(),"*",t),e),Io=(e,t,n)=>{const s=FU(e,t,n);return b.from(s[s.length-1])},MU=(e,t,n)=>{const s=Po(t,e),o=Po(n,e);return s&&s===o},UU=e=>nf(e)||sf(e),zn=(e,t)=>{if(!t)return t;const n=t.container(),s=t.offset();return e?Yr(n)?ne(n.nextSibling)?F(n.nextSibling,0):F.after(n):nf(t)?F(n,s+1):t:Yr(n)?ne(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):sf(t)?F(n,s-1):t},n0=re(zn,!0),s0=re(zn,!1),o0=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},bm=e=>o0(e,"Delete"),zU=e=>o0(e,"ForwardDelete"),HU=e=>t=>tt(e,w.fromDom(t.dom.parentNode)),VU=e=>Mh(e)||Qi(e),wc=(e,t)=>eo(e,t)?pl(t,VU,HU(e)):b.none(),WU=e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},r0=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),WU(e))},jU=(e,t,n)=>En(mn(n),Os(n),(s,o)=>{const r=zn(!0,s),i=zn(!1,o),a=zn(!1,t);return e?os(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):Ps(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),qU=(e,t)=>({block:e,position:t}),KU=(e,t)=>({from:e,to:t}),Cm=(e,t)=>{const n=w.fromDom(e),s=w.fromDom(t.container());return wc(n,s).map(o=>qU(o,t))},GU=e=>tt(e.from.block,e.to.block)===!1,YU=e=>Yn(e.from.block).bind(t=>Yn(e.to.block).filter(n=>tt(t,n))).isSome(),XU=e=>St(e.from.block.dom)===!1&&St(e.to.block.dom)===!1,QU=(e,t,n)=>Dt(n.position.getNode())&&Ht(n.block)===!1?oi(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Fn(t,e,s).bind(o=>Cm(e,o)):b.some(n)).getOr(n):n,ZU=(e,t,n)=>{const s=Cm(e,F.fromRangeStart(n)),o=s.bind(r=>Fn(t,e,r.position).bind(i=>Cm(e,i).map(a=>QU(e,t,a))));return En(s,o,KU).filter(r=>GU(r)&&YU(r)&&XU(r))},JU=(e,t,n)=>n.collapsed?ZU(e,t,n):b.none(),ez=e=>{const t=Yt(e);return Te(t,ks).fold(K(t),n=>t.slice(0,n))},i0=e=>{const t=ez(e);return A(t,Tt),t},a0=(e,t)=>{const n=ro(t,e);return de(n.reverse(),s=>Ht(s)).each(Tt)},tz=e=>H(fh(e),t=>!Ht(t)).length===0,nz=(e,t,n,s)=>{if(Ht(n))return pr(n),mn(n.dom);tz(s)&&Ht(t)&&Xn(s,w.fromTag("br"));const o=Ps(n.dom,F.before(s.dom));return A(i0(t),r=>{Xn(s,r)}),a0(e,t),o},sz=(e,t,n)=>{if(Ht(n))return Tt(n),Ht(t)&&pr(t),mn(t.dom);const s=Os(n.dom);return A(i0(t),o=>{It(n,o)}),a0(e,t),s},oz=(e,t)=>{const n=ro(t,e);return b.from(n[n.length-1])},rz=(e,t)=>eo(t,e)?oz(t,e):b.none(),l0=(e,t)=>{oi(e,t.dom).map(n=>n.getNode()).map(w.fromDom).filter(qr).each(Tt)},c0=(e,t,n)=>(l0(!0,t),l0(!1,n),rz(t,n).fold(re(sz,e,t,n),re(nz,e,t,n))),u0=(e,t,n,s)=>t?c0(e,s,n):c0(e,n,s),ym=(e,t)=>{const n=w.fromDom(e.getBody());return JU(n.dom,t,e.selection.getRng()).map(o=>()=>{u0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},iz=(e,t)=>{const n=t.getRng();return En(wc(e,w.fromDom(n.startContainer)),wc(e,w.fromDom(n.endContainer)),(s,o)=>tt(s,o)===!1?b.some(()=>{n.deleteContents(),u0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})}):b.none()).getOr(b.none())},f0=(e,t)=>{const n=w.fromDom(t),s=re(tt,e);return jr(n,gl,s).isSome()},az=(e,t)=>f0(e,t.startContainer)||f0(e,t.endContainer),lz=(e,t)=>{const n=Ps(e.dom,F.fromRangeStart(t)).isNone(),s=os(e.dom,F.fromRangeEnd(t)).isNone();return!az(e,t)&&n&&s},cz=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),uz=e=>{const t=w.fromDom(e.getBody()),n=e.selection.getRng();return lz(t,n)?cz(e):iz(t,e.selection)},vm=(e,t)=>e.selection.isCollapsed()?b.none():uz(e),fz=to,dz=St,ao=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),mz=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Aa=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(mz(t)),pz=(e,t,n)=>{const s=If(1,e.getBody(),t),o=F.fromRangeStart(s),r=o.getNode();if(aa(r))return ao(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(aa(i))return ao(1,e,i,!1,!1);const a=e.dom.getParent(o.getNode(),c=>dz(c)||fz(c));return aa(a)?ao(1,e,a,!1,n):b.none()},Em=(e,t,n)=>t.collapsed?pz(e,t,n).getOr(t):t,gz=e=>dr(e)||va(e),hz=e=>mr(e)||Ea(e),bz=(e,t)=>{ne(t)&&t.data.length===0&&e.remove(t)},d0=(e,t,n,s,o,r)=>{ao(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),bz(e.dom,n)},Cz=(e,t)=>{const n=e.selection.getRng();if(!ne(n.commonAncestorContainer))return b.none();const s=t?Vt.Forwards:Vt.Backwards,o=Rs(e.getBody()),r=re($f,t?o.next:o.prev),i=t?gz:hz,a=da(s,e.getBody(),n),c=zn(t,r(a));if(!c||!Il(a,c))return b.none();if(i(c))return b.some(()=>d0(e,n,a.getNode(),s,t,c));const f=r(c);return f&&i(f)&&Il(c,f)?b.some(()=>d0(e,n,a.getNode(),s,t,f)):b.none()},xm=(e,t)=>Cz(e,t),yz=e=>gl(w.fromDom(e))||Qi(w.fromDom(e)),Pn=Ns.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vz=(e,t)=>{const n=t.getNode(e===!1),s=e?"after":"before";return Ee(n)&&n.getAttribute("data-mce-caret")===s},Ez=(e,t,n,s)=>{const o=r=>ef(w.fromDom(r))&&!Ts(n,s,e);return gC(!t,n).fold(()=>gC(t,s).fold(pt,o),o)},m0=(e,t,n,s)=>{const o=s.getNode(t===!1);return wc(w.fromDom(e),w.fromDom(n.getNode())).map(r=>Ht(r)?Pn.remove(r.dom):Pn.moveToElement(o)).orThunk(()=>b.some(Pn.moveToElement(o)))},p0=(e,t,n)=>Fn(t,e,n).bind(s=>yz(s.getNode())||Ez(e,t,n,s)?b.none():t&&St(s.getNode())||t===!1&&St(s.getNode(!0))?m0(e,t,n,s):t&&mr(n)||t===!1&&dr(n)?b.some(Pn.moveToPosition(s)):b.none()),xz=(e,t)=>e&&St(t.nextSibling)?b.some(Pn.moveToElement(t.nextSibling)):e===!1&&St(t.previousSibling)?b.some(Pn.moveToElement(t.previousSibling)):b.none(),Sz=(e,t,n)=>n.fold(s=>b.some(Pn.remove(s)),s=>b.some(Pn.moveToElement(s)),s=>Ts(t,s,e)?b.none():b.some(Pn.moveToPosition(s))),wz=(e,t,n)=>vz(t,n)?xz(t,n.getNode(t===!1)).fold(()=>p0(e,t,n),b.some):p0(e,t,n).bind(s=>Sz(e,n,s)),_z=(e,t,n)=>{const s=If(t?1:-1,e,n),o=F.fromRangeStart(s),r=w.fromDom(e);return t===!1&&mr(o)?b.some(Pn.remove(o.getNode(!0))):t&&dr(o)?b.some(Pn.remove(o.getNode())):t===!1&&dr(o)&&xd(r,o)?XD(r,o).map(i=>Pn.remove(i.getNode())):t&&mr(o)&&Ed(r,o)?QD(r,o).map(i=>Pn.remove(i.getNode())):wz(e,t,o)},kz=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),gr(e,t,w.fromDom(n)),!0),Nz=(e,t)=>n=>{const s=t?F.before(n):F.after(n);return e.selection.setRng(s.toRange()),!0},Tz=e=>t=>(e.selection.setRng(t.toRange()),!0),g0=(e,t)=>b.from(Sa(e.getBody(),t)),Az=(e,t)=>{const n=e.selection.getNode();return g0(e,n).filter(St).fold(()=>_z(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(kz(e,t),Nz(e,t),Tz(e))),()=>b.some(Ie))},Rz=e=>{A(xn(e,".mce-offscreen-selection"),Tt)},Pz=(e,t)=>{const n=e.selection.getNode();return St(n)&&!ml(n)?g0(e,n.parentNode).filter(St).fold(()=>b.some(()=>{Rz(w.fromDom(e.getBody())),gr(e,t,w.fromDom(e.selection.getNode())),r0(e)}),()=>b.some(Ie)):b.none()},h0=e=>{const t=e.dom,n=e.selection,s=Sa(e.getBody(),n.getNode());if(to(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(F.before(o).toRange())}return!0},Sm=(e,t)=>e.selection.isCollapsed()?Az(e,t):Pz(e,t),Oz=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Fn(t,e.getBody(),n).filter(s=>t?UD(s):zD(s)).bind(s=>b.from(Bf(t?0:-1,s))).map(s=>()=>e.selection.select(s))},wm=(e,t)=>e.selection.isCollapsed()?Oz(e,t):b.none(),bi=ne,b0=e=>bi(e)&&e.data[0]===Kt,C0=e=>bi(e)&&e.data[e.data.length-1]===Kt,y0=e=>e.ownerDocument.createTextNode(Kt),Dz=e=>{if(bi(e.previousSibling))return C0(e.previousSibling)||e.previousSibling.appendData(Kt),e.previousSibling;if(bi(e))return b0(e)||e.insertData(0,Kt),e;{const t=y0(e);return e.parentNode.insertBefore(t,e),t}},Bz=e=>{if(bi(e.nextSibling))return b0(e.nextSibling)||e.nextSibling.insertData(0,Kt),e.nextSibling;if(bi(e))return C0(e)||e.appendData(Kt),e;{const t=y0(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}},_c=(e,t)=>e?Dz(t):Bz(t),Iz=re(_c,!0),$z=re(_c,!1),v0=(e,t)=>ne(e.container())?_c(t,e.container()):_c(t,e.getNode()),E0=(e,t)=>{const n=t.get();return n&&e.container()===n&&Yr(n)},_m=(e,t)=>t.fold(n=>{lr(e.get());const s=Iz(n);return e.set(s),b.some(F(s,s.length-1))},n=>mn(n).map(s=>{if(E0(s,e))return F(e.get(),1);{lr(e.get());const o=v0(s,!0);return e.set(o),F(o,1)}}),n=>Os(n).map(s=>{if(E0(s,e))return F(e.get(),e.get().length-1);{lr(e.get());const o=v0(s,!1);return e.set(o),F(o,o.length-1)}}),n=>{lr(e.get());const s=$z(n);return e.set(s),b.some(F(s,1))}),x0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},sn=Ns.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),S0=(e,t)=>{const n=Po(t,e);return n||e},Lz=(e,t,n)=>{const s=n0(n),o=S0(t,s.container());return Io(e,o,s).fold(()=>os(o,s).bind(re(Io,e,o)).map(r=>sn.before(r)),b.none)},Fz=(e,t)=>ur(e,t)===null,w0=(e,t,n)=>Io(e,t,n).filter(re(Fz,t)),Mz=(e,t,n)=>{const s=s0(n);return w0(e,t,s).bind(o=>Ps(o,s).isNone()?b.some(sn.start(o)):b.none())},Uz=(e,t,n)=>{const s=n0(n);return w0(e,t,s).bind(o=>os(o,s).isNone()?b.some(sn.end(o)):b.none())},zz=(e,t,n)=>{const s=s0(n),o=S0(t,s.container());return Io(e,o,s).fold(()=>Ps(o,s).bind(re(Io,e,o)).map(r=>sn.after(r)),b.none)},_0=e=>LU(km(e))===!1,Fs=(e,t,n)=>x0([Lz,Mz,Uz,zz],[e,t,n]).filter(_0),km=e=>e.fold(xt,xt,xt,xt),k0=e=>e.fold(K("before"),K("start"),K("end"),K("after")),kc=e=>e.fold(sn.before,sn.before,sn.after,sn.after),Nm=e=>e.fold(sn.start,sn.start,sn.end,sn.end),Hz=(e,t)=>k0(e)===k0(t)&&km(e)===km(t),Vz=(e,t,n,s,o,r)=>En(Io(t,n,s),Io(t,n,o),(i,a)=>i!==a&&MU(n,i,a)?sn.after(e?i:a):r).getOr(r),Wz=(e,t)=>e.fold(it,n=>!Hz(n,t)),jz=(e,t,n,s,o)=>{const r=zn(e,o);return Fn(e,n,r).map(re(zn,e)).fold(()=>s.map(kc),c=>Fs(t,n,c).map(re(Vz,e,t,n,r,c)).filter(re(Wz,s))).filter(_0)},qz=(e,t)=>e?t.fold(Ot(b.some,sn.start),b.none,Ot(b.some,sn.after),b.none):t.fold(b.none,Ot(b.some,sn.before),b.none,Ot(b.some,sn.end)),Kz=(e,t,n,s)=>{const o=zn(e,s),r=Fs(t,n,o);return Fs(t,n,o).bind(re(qz,e)).orThunk(()=>jz(e,t,n,r,s))},Gz=e=>Ye(e.selection.getSel().modify),N0=(e,t,n)=>{const s=e?1:-1;return t.setRng(F(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Yz=(e,t)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n);return Gz(t)?e&&nf(s)?N0(!0,t.selection,s):!e&&sf(s)?N0(!1,t.selection,s):!1:!1};var Ms;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ms||(Ms={}));const Nc=(e,t)=>e===Vt.Backwards?st(t):t,Xz=(e,t,n)=>e===Vt.Forwards?t.next(n):t.prev(n),Qz=(e,t,n,s)=>Dt(s.getNode(t===Vt.Forwards))?Ms.Br:Ts(n,s)===!1?Ms.Block:Ms.Wrap,T0=(e,t,n,s)=>{const o=Rs(n);let r=s;const i=[];for(;r;){const a=Xz(t,o,r);if(!a)break;if(Dt(a.getNode(!1)))return t===Vt.Forwards?{positions:Nc(t,i).concat([a]),breakType:Ms.Br,breakAt:b.some(a)}:{positions:Nc(t,i),breakType:Ms.Br,breakAt:b.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=Qz(n,t,r,a);return{positions:Nc(t,i),breakType:c,breakAt:b.some(a)}}i.push(a),r=a}return{positions:Nc(t,i),breakType:Ms.Eol,breakAt:b.none()}},A0=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Vt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Tm=(e,t)=>Q(e,(n,s)=>n.fold(()=>b.some(s),o=>En(Ut(o.getClientRects()),Ut(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),b.none()),R0=(e,t)=>Ut(t.getClientRects()).bind(n=>Tm(e,n.left)),Ra=re(T0,F.isAbove,-1),Pa=re(T0,F.isBelow,1),Zz=re(A0,-1,Ra),Jz=re(A0,1,Pa),eH=(e,t)=>Ra(e,t).breakAt.isNone(),tH=(e,t)=>Pa(e,t).breakAt.isNone(),nH=e=>mn(e).map(t=>[t].concat(Pa(e,t).positions)).getOr([]),sH=e=>Os(e).map(t=>Ra(e,t).positions.concat(t)).getOr([]),oH=St,P0=(e,t)=>Math.abs(e.left-t),O0=(e,t)=>Math.abs(e.right-t),rH=e=>Mr(e,"node"),D0=(e,t)=>nl(e,(n,s)=>{const o=Math.min(P0(n,t),O0(n,t)),r=Math.min(P0(s,t),O0(s,t));return r===o&&rH(s)&&oH(s.node)||r<o?s:n}),iH=e=>{const t=n=>U(n,s=>{const o=rr(s);return o.node=e,o});if(Ee(e))return t(e.getClientRects());if(ne(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},B0=e=>Ke(e,iH);var Oa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Oa||(Oa={}));const aH=(e,t,n,s)=>{for(;s=ca(s,e,jh,t);)if(n(s))return},I0=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let y=B0([p]);e===-1&&(y=y.reverse());for(let C=0;C<y.length;C++){const S=y[C];if(!n(S,f)){if(a.length>0&&t(S,Co(a))&&i++,S.line=i,o(S))return!0;a.push(S)}}},f=Co(r.getClientRects());if(!f)return a;const d=r.getNode();return c(d),aH(e,s,c,d),a},lH=(e,t)=>t.line>e,cH=(e,t)=>t.line===e,uH=re(I0,Oa.Up,na,sa),fH=re(I0,Oa.Down,sa,na),dH=(e,t,n,s)=>{const o=Rs(t);let r,i,a,c;const f=[];let d=0;const p=C=>Co(C.getClientRects());e===1?(r=o.next,i=sa,a=na,c=F.after(s)):(r=o.prev,i=na,a=sa,c=F.before(s));const y=p(c);do{if(!c.isVisible())continue;const C=p(c);if(a(C,y))continue;f.length>0&&i(C,Co(f))&&d++;const S=rr(C);if(S.position=c,S.line=d,n(S))return f;f.push(S)}while(c=r(c));return f},$0=e=>t=>lH(e,t),Am=e=>t=>cH(e,t),$o=(e,t)=>{e.selection.setRng(t),Ca(e,e.selection.getRng())},Rm=(e,t,n)=>b.some(Em(e,t,n)),L0=(e,t,n,s,o,r)=>{const i=t===Vt.Forwards,a=Rs(e.getBody()),c=re($f,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const S=Nl(n);if(r(S))return ao(t,e,S,t===Vt.Backwards,!1)}const d=da(t,e.getBody(),n);if(f(d))return Aa(e,d.getNode(!i));const p=zn(i,c(d)),y=Hh(n);if(!p)return y?b.some(n):b.none();if(f(p))return ao(t,e,p.getNode(!i),i,!1);const C=c(p);return C&&f(C)&&Il(p,C)?ao(t,e,C.getNode(!i),i,!1):y?Rm(e,p.toRange(),!1):b.none()},F0=(e,t,n,s,o,r)=>{const i=da(t,e.getBody(),n),a=Co(i.getClientRects()),c=t===Oa.Down;if(!a)return b.none();const d=(c?fH:uH)(e.getBody(),$0(1),i),p=H(d,Am(1)),y=a.left,C=D0(p,y);if(C&&r(C.node)){const v=Math.abs(y-C.left),E=Math.abs(y-C.right);return ao(t,e,C.node,v<E,!1)}let S;if(s(i)?S=i.getNode():o(i)?S=i.getNode(!0):S=Nl(n),S){const v=dH(t,e.getBody(),$0(1),S);let E=D0(H(v,Am(1)),y);if(E||(E=Co(H(v,Am(0))),E))return Rm(e,E.position.toRange(),!1)}return p.length===0?Pm(e,c).filter(c?o:s).map(v=>Em(e,v.toRange(),!1)):b.none()},Pm=(e,t)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n),o=TR(s.container(),e.getBody());if(t){const r=Pa(o,s);return vs(r.positions)}else{const r=Ra(o,s);return Ut(r.positions)}},M0=(e,t,n)=>Pm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Tc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},U0=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},z0=(e,t,n)=>_m(t,n).map(s=>(Tc(e,s),n)),mH=(e,t,n)=>{const s=e.getBody(),o=F.fromRangeStart(e.selection.getRng()),r=re(Cr,e);return Kz(n,r,s,o).bind(a=>z0(e,t,a))},pH=(e,t,n)=>{const s=U(xn(w.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=H(s,e),r=H(n,e);A(ht(o,r),re(U0,!1)),A(ht(r,o),re(U0,!0))},gH=(e,t)=>{if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){const n=F.fromRangeStart(e.selection.getRng());F.isTextPosition(n)&&UU(n)===!1&&(Tc(e,bR(t.get(),n)),t.set(null))}},hH=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=H(s,e);A(o,r=>{const i=F.fromRangeStart(t.selection.getRng());Fs(e,t.getBody(),i).bind(a=>z0(t,n,a))})}},H0=(e,t,n)=>ia(e)?mH(e,t,n).isSome():!1,V0=(e,t,n)=>ia(t)?Yz(e,t):!1,bH=e=>{const t=$t(null),n=re(Cr,e);return e.on("NodeChange",s=>{ia(e)&&(pH(n,e.dom,s.parents),gH(e,t),hH(n,e,t,s.parents))}),t},CH=re(V0,!0),yH=re(V0,!1),Ac=(e,t,n)=>{if(ia(e)){const s=Pm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?F.fromRangeEnd(o):F.fromRangeStart(o)});return Fs(re(Cr,e),e.getBody(),s).exists(o=>{const r=kc(o);return _m(n,r).exists(i=>(Tc(e,i),!0))})}else return!1},vH=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},EH=e=>En(mn(e),Os(e),(t,n)=>{const s=zn(!0,t),o=zn(!1,n);return os(e,s).forall(r=>r.isEqual(o))}).getOr(!0),W0=(e,t)=>n=>_m(t,n).map(s=>()=>Tc(e,s)),j0=(e,t,n,s)=>{const o=e.getBody(),r=re(Cr,e);e.undoManager.ignore(()=>{e.selection.setRng(vH(n,s)),bm(e),Fs(r,o,F.fromRangeStart(e.selection.getRng())).map(Nm).bind(W0(e,t)).each(qo)}),e.nodeChanged()},xH=(e,t)=>{const n=Po(t,e);return n||e},SH=(e,t,n,s)=>{const o=xH(e.getBody(),s.container()),r=re(Cr,e),i=Fs(r,o,s);return i.bind(c=>n?c.fold(K(b.some(Nm(c))),b.none,K(b.some(kc(c))),b.none):c.fold(b.none,K(b.some(kc(c))),b.none,K(b.some(Nm(c))))).map(W0(e,t)).getOrThunk(()=>{const c=Ll(n,o,s),f=c.bind(d=>Fs(r,o,d));return En(i,f,()=>Io(r,o,s).bind(d=>EH(d)?b.some(()=>{gr(e,n,w.fromDom(d))}):b.none())).getOrThunk(()=>f.bind(()=>c.map(d=>()=>{n?j0(e,t,s,d):j0(e,t,d,s)})))})},Om=(e,t,n)=>{if(e.selection.isCollapsed()&&ia(e)){const s=F.fromRangeStart(e.selection.getRng());return SH(e,t,n,s)}return b.none()},wH=(e,t)=>{const n=ro(t,e);return Te(n,ks).fold(K(n),s=>n.slice(0,s))},_H=e=>ph(e)===1,kH=(e,t,n,s)=>{const o=re(n$,t),r=U(H(s,o),i=>i.dom);if(r.length===0)gr(t,e,n);else{const i=t$(n.dom,r);t.selection.setRng(i.toRange())}},NH=(e,t)=>{const n=w.fromDom(e.getBody()),s=w.fromDom(e.selection.getStart()),o=H(wH(n,s),_H);return vs(o).bind(r=>{const i=F.fromRangeStart(e.selection.getRng());return jU(t,i,r.dom)&&!s$(r)?b.some(()=>kH(t,e,r,o)):b.none()})},Dm=(e,t)=>e.selection.isCollapsed()?NH(e,t):b.none(),Bm=(e,t,n)=>b.some(()=>{e._selectionOverrides.hideFakeCaret(),gr(e,t,w.fromDom(n))}),TH=(e,t)=>{const n=t?va:Ea,s=t?Vt.Forwards:Vt.Backwards,o=da(s,e.getBody(),e.selection.getRng());return n(o)?Bm(e,t,o.getNode(!t)):b.from(zn(t,o)).filter(r=>n(r)&&Il(o,r)).map(r=>()=>Bm(e,t,r.getNode(!t)))},AH=(e,t)=>{const n=e.selection.getNode();return _s(n)?Bm(e,t,n):b.none()},Im=(e,t)=>e.selection.isCollapsed()?TH(e,t):AH(e,t),RH=e=>pl(e,t=>to(t.dom)||St(t.dom)).exists(t=>to(t.dom)),$m=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},q0=(e,t)=>{const n=e||eT(t)?"margin":"padding",s=ws(t,"direction")==="rtl"?"-right":"-left";return n+s},PH=(e,t,n,s,o,r)=>{const i=q0(n,w.fromDom(r));if(t==="outdent"){const a=Math.max(0,$m(r.style[i])-s);e.setStyle(r,i,a?a+o:"")}else{const a=$m(r.style[i])+s+o;e.setStyle(r,i,a)}},OH=(e,t)=>at(t,n=>{const s=q0(Gb(e),n),o=cl(n,s).map($m).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),K0=e=>{const t=Y0(e);return!e.mode.isReadOnly()&&(t.length>1||OH(e,t))},G0=e=>tf(e)||Qi(e),DH=e=>Yn(e).exists(G0),Y0=e=>H(wN(e.selection.getSelectedBlocks()),t=>!G0(t)&&!DH(t)&&RH(t)),X0=(e,t)=>{const{dom:n}=e,s=C1(e),o=/[a-z%]+$/i.exec(s)[0],r=parseInt(s,10),i=Gb(e);A(Y0(e),a=>{PH(n,t,i,r,o,a.dom)})},BH=e=>X0(e,"indent"),Q0=e=>X0(e,"outdent"),Z0=e=>{if(e.selection.isCollapsed()&&K0(e)){const t=e.dom,n=e.selection.getRng(),s=F.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&vd(w.fromDom(o),s))return b.some(()=>Q0(e))}return b.none()},J0=(e,t,n)=>en([Z0,Sm,xm,(s,o)=>Om(s,t,o),ym,Dd,wm,Im,vm,Dm],s=>s(e,n)),IH=(e,t)=>{J0(e,t,!1).fold(()=>{bm(e),r0(e)},qo)},$H=(e,t)=>{J0(e,t,!0).fold(()=>zU(e),qo)},LH=(e,t)=>{e.addCommand("delete",()=>{IH(e,t)}),e.addCommand("forwardDelete",()=>{$H(e,t)})},ex=5,FH=400,tx=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),MH=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>ex||s>ex},UH=e=>{const t=To(),n=$t(!1),s=Cf(o=>{e.dispatch("longpress",ut(we({},o),{type:"longpress"})),n.set(!0)},FH);e.on("touchstart",o=>{tx(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),tx(o).each(r=>{t.on(i=>{MH(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",ut(we({},o),{type:"tap"}))})},!0)},Lm=(e,t)=>Fe(e,t.nodeName),zH=(e,t)=>ne(t)?!0:Ee(t)?!Lm(e,t)&&!Mn(t):!1,HH=(e,t,n)=>M(Ky(w.fromDom(n),w.fromDom(t)),s=>Lm(e,s.dom)),VH=(e,t)=>{if(ne(t)){if(t.nodeValue.length===0)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Lm(e,t.nextSibling)))return!0}return!1},WH=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements();let r=n.getStart();const i=e.getBody();let a,c,f;const d=Sn(e);if(!r||!Ee(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,d.toLowerCase())||HH(o,i,r))return;const y=n.getRng(),C=y.startContainer,S=y.startOffset,v=y.endContainer,E=y.endOffset,_=fr(e);for(r=i.firstChild;r;)if(zH(o,r)){if(VH(o,r)){c=r,r=r.nextSibling,t.remove(c);continue}a||(a=t.create(d,ar(e)),r.parentNode.insertBefore(a,r),f=!0),c=r,r=r.nextSibling,a.appendChild(c)}else a=null,r=r.nextSibling;f&&_&&(y.setStart(C,S),y.setEnd(v,E),n.setRng(y),e.nodeChanged())},jH=e=>{e.on("NodeChange",re(WH,e))},nx=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,qH=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},KH=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],qH(e,o,tC(e)));n.content=o}},GH=e=>{const t="contenteditable",n=" "+G.trim(iR(e))+" ",s=" "+G.trim(tC(e))+" ",o=nx(n),r=nx(s),i=aR(e);i.length>0&&e.on("BeforeSetContent",a=>{KH(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];!o(f)&&!r(f)||(i.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},YH=e=>Xi(w.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),sx=(e,t)=>{t.hasAttribute("data-mce-caret")&&(of(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},XH=(e,t)=>{const n=YH(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),sx(e,n);return}zh(n)&&(sx(e,n),e.undoManager.add())}},QH=e=>{e.on("keyup compositionstart",re(XH,e))},ox=St,ZH=(e,t,n)=>L0(t,e,n,dr,mr,ox),JH=(e,t,n)=>F0(t,e,n,r=>dr(r)||jy(r),r=>mr(r)||qy(r),ox),e3=e=>{const t=e.dom.create(Sn(e));return t.innerHTML='<br data-mce-bogus="1">',t},rx=(e,t,n)=>{const s=Rs(e.getBody()),o=re($f,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(F.fromRangeStart(n))){const a=w.fromDom(e3(e));t===1?Eo(w.fromDom(r),a):Xn(w.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},t3=(e,t)=>{const n=t?Vt.Forwards:Vt.Backwards,s=e.selection.getRng();return ZH(n,e,s).orThunk(()=>(rx(e,n,s),b.none()))},n3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return JH(n,e,s).orThunk(()=>(rx(e,n,s),b.none()))},ix=(e,t)=>t3(e,t).exists(n=>($o(e,n),!0)),ax=(e,t)=>n3(e,t).exists(n=>($o(e,n),!0)),lx=(e,t)=>M0(e,t,t?mr:dr),s3=e=>R(["figcaption"],Ct(e)),o3=e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},r3=(e,t,n)=>{n?It(e,t):Sh(e,t)},i3=(e,t,n,s)=>{const o=w.fromTag(n),r=w.fromTag("br");return Ss(o,s),It(o,r),r3(e,o,t),o3(r)},a3=(e,t)=>{const n=re(tt,t);return pl(w.fromDom(e.container()),ks,n).filter(s3)},l3=(e,t,n)=>t?tH(e.dom,n):eH(e.dom,n),c3=(e,t)=>{const n=w.fromDom(e.getBody()),s=F.fromRangeStart(e.selection.getRng()),o=Sn(e),r=ar(e);return a3(s,n).exists(()=>{if(l3(n,t,s)){const i=i3(n,t,o,r);return e.selection.setRng(i),!0}else return!1})},cx=(e,t)=>e.selection.isCollapsed()?c3(e,t):!1,ux={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},u3=e=>U(e,t=>we(ut(we({},ux),{action:Ie}),t)),f3=e=>U(e,t=>we(ut(we({},ux),{action:()=>b.none()}),t)),fx=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,d3=(e,t)=>Ke(u3(e),n=>fx(n,t)?[n]:[]),m3=(e,t)=>Ke(f3(e),n=>fx(n,t)?[n]:[]),$e=(e,...t)=>()=>e.apply(null,t),Da=(e,t)=>de(d3(e,t),n=>n.action()),dx=(e,t)=>en(m3(e,t),n=>n.action()),mx=(e,t)=>{const n=t?Vt.Forwards:Vt.Backwards,s=e.selection.getRng();return L0(e,n,s,va,Ea,_s).exists(o=>($o(e,o),!0))},px=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return F0(e,n,s,va,Ea,_s).exists(o=>($o(e,o),!0))},gx=(e,t)=>M0(e,t,t?Ea:va),hx=Ns.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),p3=e=>hx.none(e),Ba=ut(we({},hx),{none:p3}),g3=(e,t)=>bx(e,t,it),bx=(e,t,n)=>Ke(Yt(e),s=>Js(s,t)?n(s)?[s]:[]:bx(s,t,n)),h3=(e,t,n=pt)=>{if(n(t))return b.none();if(R(e,Ct(t)))return b.some(t);const s=o=>Js(o,"table")||n(o);return Yi(t,e.join(","),s)},b3=(e,t)=>h3(["td","th"],e,t),C3=e=>g3(e,"th,td"),Cx=(e,t)=>er(e,"table",t),Fm=(e,t,n,s,o=it)=>{const r=s===1;if(!r&&n<=0)return Ba.first(e[0]);if(r&&n>=e.length-1)return Ba.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Ba.middle(t,a):Fm(e,t,i,s,o)}},yx=(e,t)=>Cx(e,t).bind(n=>{const s=C3(n);return Te(s,r=>tt(e,r)).map(r=>({index:r,all:s}))}),y3=(e,t,n)=>yx(e,n).fold(()=>Ba.none(e),o=>Fm(o.all,e,o.index,1,t)),v3=(e,t,n)=>yx(e,n).fold(()=>Ba.none(),o=>Fm(o.all,e,o.index,-1,t)),E3=e=>er(e,"[contenteditable]"),vx=(e,t=!1)=>Vr(e)?e.dom.isContentEditable:E3(e).fold(K(t),n=>x3(n)==="true"),x3=e=>e.dom.contentEditable,S3=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),w3=(e,t)=>Ke(t,n=>{const s=S3(rr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),_3=(e,t,n)=>Q(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(a<i?o:r)}),b.none()),Ex=(e,t,n,s,o)=>{const r=xn(w.fromDom(n),"td,th,caption").map(a=>a.dom),i=H(w3(e,r),a=>t(a,o));return _3(i,s,o).map(a=>a.cell)},k3=e=>e.bottom,N3=e=>e.top,T3=(e,t)=>e.y<t,A3=(e,t)=>e.y>t,R3=re(Ex,k3,T3),P3=re(Ex,N3,A3),O3=(e,t)=>Ut(t.getClientRects()).bind(n=>R3(e,n.left,n.top)).bind(n=>R0(sH(n),t)),D3=(e,t)=>vs(t.getClientRects()).bind(n=>P3(e,n.left,n.top)).bind(n=>R0(nH(n),t)),B3=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),I3=e=>e.breakType===Ms.Wrap&&e.positions.length===0,$3=e=>e.breakType===Ms.Br&&e.positions.length===1,xx=(e,t,n)=>{const s=e(t,n);return I3(s)||!Dt(n.getNode())&&$3(s)?!B3(e,t,s):s.breakAt.isNone()},L3=re(xx,Ra),F3=re(xx,Pa),M3=(e,t,n)=>{const s=F.fromRangeStart(t);return oi(!e,n).exists(o=>o.isEqual(s))},U3=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return cC()&&M3(t,o,n)?(ao(r,e,n,!t,!1).each(i=>{$o(e,i)}),!0):!1},z3=(e,t,n)=>O3(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>Tm(Zz(e,F.before(t)),s.left))).getOr(F.before(t)),H3=(e,t,n)=>D3(t,n).orThunk(()=>Ut(n.getClientRects()).bind(s=>Tm(Jz(e,F.after(t)),s.left))).getOr(F.after(t)),Sx=(e,t)=>{const n=t.getNode(e);return Ee(n)&&n.nodeName==="TABLE"?b.some(n):b.none()},V3=(e,t,n)=>{const s=Sn(t);t.undoManager.transact(()=>{const o=w.fromTag(s);Ss(o,ar(t)),It(o,w.fromTag("br")),e?Eo(w.fromDom(n),o):Xn(w.fromDom(n),o);const r=t.dom.createRng();r.setStart(o.dom,0),r.setEnd(o.dom,0),$o(t,r)})},wx=(e,t,n)=>{const s=Sx(!!t,n),o=t===!1;s.fold(()=>$o(e,n.toRange()),r=>oi(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>$o(e,n.toRange()),i=>V3(t,e,r)))},W3=(e,t,n,s)=>{const o=e.selection.getRng(),r=F.fromRangeStart(o),i=e.getBody();if(!t&&L3(s,r)){const a=z3(i,n,r);return wx(e,t,a),!0}else if(t&&F3(s,r)){const a=H3(i,n,r);return wx(e,t,a),!0}else return!1},_x=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),kx=(e,t)=>_x(e,t,U3),Nx=(e,t)=>_x(e,t,W3),j3=e=>{const t=ci.exact(e,0,e,0);return uO(t)},Tx=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>yD(o).map(r=>j3(r)),s=>(e.execCommand("mceTableInsertRowAfter"),Ax(e,t,s))),Ax=(e,t,n)=>Tx(e,t,y3(n,vx)),q3=(e,t,n)=>Tx(e,t,v3(n,vx)),Rx=(e,t)=>{const n=["table","li","dl"],s=w.fromDom(e.getBody()),o=a=>{const c=Ct(a);return tt(a,s)||R(n,c)},r=e.selection.getRng(),i=w.fromDom(t?r.endContainer:r.startContainer);return b3(i,o).map(a=>(Cx(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?Ax:q3)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},K3=(e,t,n)=>{const s=yo().os;Da([{keyCode:ge.RIGHT,action:$e(ix,e,!0)},{keyCode:ge.LEFT,action:$e(ix,e,!1)},{keyCode:ge.UP,action:$e(ax,e,!1)},{keyCode:ge.DOWN,action:$e(ax,e,!0)},{keyCode:ge.RIGHT,action:$e(kx,e,!0)},{keyCode:ge.LEFT,action:$e(kx,e,!1)},{keyCode:ge.UP,action:$e(Nx,e,!1)},{keyCode:ge.DOWN,action:$e(Nx,e,!0)},{keyCode:ge.RIGHT,action:$e(mx,e,!0)},{keyCode:ge.LEFT,action:$e(mx,e,!1)},{keyCode:ge.UP,action:$e(px,e,!1)},{keyCode:ge.DOWN,action:$e(px,e,!0)},{keyCode:ge.RIGHT,action:$e(H0,e,t,!0)},{keyCode:ge.LEFT,action:$e(H0,e,t,!1)},{keyCode:ge.RIGHT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:$e(CH,e,t)},{keyCode:ge.LEFT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:$e(yH,e,t)},{keyCode:ge.UP,action:$e(cx,e,!1)},{keyCode:ge.DOWN,action:$e(cx,e,!0)}],n).each(o=>{n.preventDefault()})},G3=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&K3(e,t,n)})},as=(e,t)=>({container:e,offset:t}),Rc=ot.DOM,Pc=e=>t=>e===t?-1:0,Y3=e=>t=>e.isBlock(t)||R(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Mm=(e,t,n)=>{if(ne(e)&&t>=0)return b.some(as(e,t));{const s=or(Rc);return b.from(s.backwards(e,t,Pc(e),n)).map(o=>as(o.container,o.container.data.length))}},X3=(e,t,n)=>{if(ne(e)&&t>=e.length)return b.some(as(e,t));{const s=or(Rc);return b.from(s.forwards(e,t,Pc(e),n)).map(o=>as(o.container,0))}},Um=(e,t,n)=>{if(!ne(e))return b.none();const s=e.textContent;if(t>=0&&t<=s.length)return b.some(as(e,t));{const o=or(Rc);return b.from(o.backwards(e,t,Pc(e),n)).bind(r=>{const i=r.container.data;return Um(r.container,t+i.length,n)})}},Px=(e,t,n)=>{if(!ne(e))return b.none();const s=e.textContent;if(t<=s.length)return b.some(as(e,t));{const o=or(Rc);return b.from(o.forwards(e,t,Pc(e),n)).bind(r=>Px(r.container,t-s.length,n))}},zm=(e,t,n,s,o)=>{const r=or(e,Y3(e));return b.from(r.backwards(t,n,s,o))},Q3=e=>e.collapsed&&e.startContainer.nodeType===3,Ox=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),Dx=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,Hm=(e,t)=>e.substring(t.length),Z3=(e,t,n)=>{let s;for(s=t-1;s>=0;s--){const o=e.charAt(s);if(Dx(o))return b.none();if(o===n)break}return b.some(s)},J3=(e,t,n,s=0)=>{if(!Q3(t))return b.none();const o=(i,a,c)=>Z3(c,a,n).getOr(a),r=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return zm(e,t.startContainer,t.startOffset,o,r).bind(i=>{const a=t.cloneRange();if(a.setStart(i.container,i.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return b.none();const c=Ox(a);return c.lastIndexOf(n)!==0||Hm(c,n).length<s?b.none():b.some({text:Hm(c,n),range:a,triggerChar:n})})},Bx=(e,t,n,s=0)=>SD(w.fromDom(t.startContainer)).fold(()=>J3(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=Ox(r);return b.some({range:r,text:Hm(i,n),triggerChar:n})}),e2=e=>e.nodeType===Zg,t2=e=>e.nodeType===zi,Ix=e=>{if(e2(e))return as(e,e.data.length);{const t=e.childNodes;return t.length>0?Ix(t[t.length-1]):as(e,t.length)}},$x=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?$x(n[t],0):n.length>0&&t2(e)&&n.length===t?Ix(n[n.length-1]):as(e,t)},n2=(e,t)=>zm(e,t.container,t.offset,(n,s)=>s===0?-1:s,e.getRoot()).filter(n=>{const s=n.container.data.charAt(n.offset-1);return!Dx(s)}).isSome(),s2=e=>t=>{const n=$x(t.startContainer,t.startOffset);return!n2(e,n)},o2=(e,t,n)=>en(n.triggerChars,s=>Bx(e,t,s)),r2=(e,t)=>{const n=t(),s=e.selection.getRng();return o2(e.dom,s,n).bind(o=>Lx(e,t,o))},Lx=(e,t,n,s={})=>{const o=t(),i=e.selection.getRng().startContainer.nodeValue,a=H(o.lookupByChar(n.triggerChar),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>s2(e.dom))(n.range,i,n.text));if(a.length===0)return b.none();const c=Promise.all(U(a,f=>f.fetch(n.text,f.maxResults,s).then(p=>({matchText:n.text,items:p,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return b.some({lookupData:c,context:n})};var ls;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ls||(ls={}));const Vm=(e,t,n)=>e.stype===ls.Error?t(e.serror):n(e.svalue),i2=e=>{const t=[],n=[];return A(e,s=>{Vm(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},a2=(e,t)=>e.stype===ls.Error?{stype:ls.Error,serror:t(e.serror)}:e,l2=(e,t)=>e.stype===ls.Value?{stype:ls.Value,svalue:t(e.svalue)}:e,c2=(e,t)=>e.stype===ls.Value?t(e.svalue):e,u2=(e,t)=>e.stype===ls.Error?t(e.serror):e,Fx=e=>({stype:ls.Value,svalue:e}),Mx=e=>({stype:ls.Error,serror:e}),jt={fromResult:e=>e.fold(Mx,Fx),toResult:e=>Vm(e,dn.error,dn.value),svalue:Fx,partition:i2,serror:Mx,bind:c2,bindError:u2,map:l2,mapError:a2,fold:Vm},Wm=e=>ft(e)&&es(e).length>100?" removed due to size":JSON.stringify(e,null,2),f2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return U(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Oc=(e,t)=>jt.serror([{path:e,getErrorInfo:t}]),d2=(e,t,n)=>Oc(e,()=>'Could not find valid *required* value for "'+t+'" in '+Wm(n)),m2=(e,t)=>Oc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),p2=(e,t,n)=>Oc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Wm(t)),g2=(e,t)=>Oc(e,K(t)),h2=(e,t,n,s)=>lt(n,s).fold(()=>p2(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),b2=(e,t)=>({extract:(o,r)=>lt(r,e).fold(()=>m2(o,e),a=>h2(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+es(t)}),C2=(e,t)=>t,y2=(e,t)=>Gs(e)&&Gs(t)?Dc(e,t):t,Ux=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Fe(o,r)&&(n[r]=e(n[r],o[r]))}return n},Dc=Ux(y2),v2=Ux(C2),zx=()=>({tag:"required",process:{}}),E2=e=>({tag:"defaultedThunk",process:e}),Hx=e=>E2(K(e)),x2=()=>({tag:"option",process:{}}),S2=(e,t)=>e.length>0?jt.svalue(Dc(t,v2.apply(void 0,e))):jt.svalue(t),Vx=e=>Ot(jt.serror,Ue)(e),w2={consolidateObj:(e,t)=>{const n=jt.partition(e);return n.errors.length>0?Vx(n.errors):S2(n.values,t)},consolidateArr:e=>{const t=jt.partition(e);return t.errors.length>0?Vx(t.errors):jt.svalue(t.values)}},_2=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),k2=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Wx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},jm=e=>{const t=(s,o)=>jt.bindError(e(o),r=>g2(s,r)),n=K("val");return{extract:t,toString:n}},N2=jm(jt.svalue),T2=(e,t,n,s)=>lt(t,n).fold(()=>d2(e,n,t),s),jx=(e,t,n,s)=>{const o=lt(e,t).getOrThunk(()=>n(e));return s(o)},A2=(e,t,n)=>n(lt(e,t)),R2=(e,t,n,s)=>{const o=lt(e,t).map(r=>r===!0?n(e):r);return s(o)},P2=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>jt.svalue(b.none()),c=>{const f=o.extract(t.concat([s]),c);return jt.map(f,b.some)});switch(e.tag){case"required":return T2(t,n,s,r);case"defaultedThunk":return jx(n,s,e.process,r);case"option":return A2(n,s,i);case"defaultedOptionThunk":return R2(n,s,e.process,i);case"mergeWithThunk":return jx(n,s,K({}),a=>{const c=Dc(e.process(n),a);return r(c)})}},O2=(e,t,n)=>{const s={},o=[];for(const r of n)Wx(r,(i,a,c,f)=>{const d=P2(c,e,t,i,f);jt.fold(d,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?jt.serror(o):jt.svalue(s)},qm=e=>({extract:(s,o)=>O2(s,o,e),toString:()=>{const s=U(e,o=>Wx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")"));return`obj{
`+s.join(`
`)+"}"}}),qx=e=>({extract:(s,o)=>{const r=U(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return w2.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),D2=e=>jm(t=>e(t).fold(jt.serror,jt.svalue)),B2=(e,t,n)=>{const s=t.extract([e],n);return jt.mapError(s,o=>({input:n,errors:o}))},I2=(e,t,n)=>jt.toResult(B2(e,t,n)),$2=e=>`Errors: 
`+f2(e.errors).join(`
`)+`

Input object: `+Wm(e.input),Kx=(e,t)=>b2(e,Li(t,qm)),L2=K(N2),Bc=(e,t)=>jm(n=>{const s=typeof n;return e(n)?jt.svalue(n):jt.serror(`Expected type: ${t} but got: ${s}`)}),F2=Bc(yn,"number"),Ic=Bc(be,"string"),M2=Bc(bs,"boolean"),Km=Bc(Ye,"function"),Ia=_2,Gx=k2,U2=e=>D2(t=>R(e,t)?dn.value(t):dn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Yx=(e,t)=>Ia(e,e,zx(),t),Xx=e=>Yx(e,Ic),Qx=e=>Yx(e,Km),z2=(e,t)=>Ia(e,e,zx(),qx(t)),Gm=(e,t)=>Ia(e,e,x2(),t),$c=e=>Gm(e,Ic),H2=e=>Gm(e,Km),V2=(e,t)=>Ia(e,e,Hx(t),L2()),Ci=(e,t,n)=>Ia(e,e,Hx(t),n),Zx=(e,t)=>Ci(e,t,F2),W2=(e,t)=>Ci(e,t,Ic),Jx=(e,t,n)=>Ci(e,t,U2(n)),Ym=(e,t)=>Ci(e,t,M2),Xm=(e,t)=>Ci(e,t,Km),j2=(e,t,n)=>Ci(e,t,qx(n)),q2=Xx("type"),K2=Qx("fetch"),Qm=Qx("onAction"),G2=Xm("onSetup",()=>Ie),Y2=$c("text"),X2=$c("icon"),Q2=$c("tooltip"),Z2=$c("label"),J2=Ym("active",!1),eV=Ym("enabled",!0),eS=Ym("primary",!1),tV=e=>V2("columns",e),$a=e=>W2("type",e),nV=qm([q2,Xx("ch"),Zx("minChars",1),tV(1),Zx("maxResults",10),H2("matches"),K2,Qm,j2("highlightOn",[],Ic)]),sV=e=>I2("Autocompleter",nV,e),Zm=[eV,Q2,X2,Y2,G2],tS=[J2].concat(Zm),oV=[Xm("predicate",pt),Jx("scope","node",["node","editor"]),Jx("position","selection",["node","selection","line"])],rV=Zm.concat([$a("contextformbutton"),eS,Qm,Gx("original",xt)]),iV=tS.concat([$a("contextformbutton"),eS,Qm,Gx("original",xt)]),aV=Zm.concat([$a("contextformbutton")]),lV=tS.concat([$a("contextformtogglebutton")]),cV=Kx("type",{contextformbutton:rV,contextformtogglebutton:iV});qm([$a("contextform"),Xm("initValue",K("")),Z2,z2("commands",cV),Gm("launch",Kx("type",{contextformbutton:aV,contextformtogglebutton:lV}))].concat(oV));const uV=e=>{const t=e.ui.registry.getAll().popups,n=Li(t,i=>sV(i).fold(a=>{throw new Error($2(a))},xt)),s=yg($u(n,i=>i.ch)),o=Cg(n);return{dataset:n,triggerChars:s,lookupByChar:i=>H(o,a=>a.ch===i)}},fV=(e,t)=>{const n=Cf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},dV=e=>{const t=To(),n=$t(!1),s=t.isSet,o=()=>{s()&&(nM(e),FP(e),n.set(!1),t.clear())},r=f=>{s()||(tM(e,f.range),t.set({triggerChar:f.triggerChar,matchLength:f.text.length}))},i=Ko(()=>uV(e)),a=f=>t.get().map(d=>Bx(e.dom,e.selection.getRng(),d.triggerChar).bind(p=>Lx(e,i,p,f))).getOrThunk(()=>r2(e,i)),c=f=>{a(f).fold(o,d=>{r(d.context),d.lookupData.then(p=>{t.get().map(y=>{const C=d.context;y.triggerChar===C.triggerChar&&(C.text.length-y.matchLength>=10?o():(t.set(ut(we({},y),{matchLength:C.text.length})),n.get()?LP(e,{lookupData:p}):(n.set(!0),$P(e,{lookupData:p}))))})})})};e.addCommand("mceAutocompleterReload",(f,d)=>{const p=ft(d)?d.fetchOptions:{};c(p)}),e.addCommand("mceAutocompleterClose",o),fV(e,{cancelIfNecessary:o,load:c})},nS=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Ie,inputType:n},i=eb(new InputEvent(e));return t.dispatch(e,we(we(we({},i),r),s))},Lc=nS("input"),Fc=nS("beforeinput"),mV=(e,t,n)=>{const s=n.keyCode===ge.BACKSPACE?"deleteContentBackward":"deleteContentForward";dx([{keyCode:ge.BACKSPACE,action:$e(Z0,e)},{keyCode:ge.BACKSPACE,action:$e(Sm,e,!1)},{keyCode:ge.DELETE,action:$e(Sm,e,!0)},{keyCode:ge.BACKSPACE,action:$e(xm,e,!1)},{keyCode:ge.DELETE,action:$e(xm,e,!0)},{keyCode:ge.BACKSPACE,action:$e(Om,e,t,!1)},{keyCode:ge.DELETE,action:$e(Om,e,t,!0)},{keyCode:ge.BACKSPACE,action:$e(Dd,e,!1)},{keyCode:ge.DELETE,action:$e(Dd,e,!0)},{keyCode:ge.BACKSPACE,action:$e(wm,e,!1)},{keyCode:ge.DELETE,action:$e(wm,e,!0)},{keyCode:ge.BACKSPACE,action:$e(Im,e,!1)},{keyCode:ge.DELETE,action:$e(Im,e,!0)},{keyCode:ge.BACKSPACE,action:$e(vm,e,!1)},{keyCode:ge.DELETE,action:$e(vm,e,!0)},{keyCode:ge.BACKSPACE,action:$e(ym,e,!1)},{keyCode:ge.DELETE,action:$e(ym,e,!0)},{keyCode:ge.BACKSPACE,action:$e(Dm,e,!1)},{keyCode:ge.DELETE,action:$e(Dm,e,!0)}],n).each(o=>{n.preventDefault(),Fc(e,s).isDefaultPrevented()||(o(),Lc(e,s))})},pV=(e,t)=>{Da([{keyCode:ge.BACKSPACE,action:$e(h0,e)},{keyCode:ge.DELETE,action:$e(h0,e)}],t)},gV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&mV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()===!1&&pV(e,n)})},hV=e=>{for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},La=(e,t)=>{let n,s=t;const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=hV(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Xt),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const a=new zt(t,t);for(;n=a.current();){if(ne(n)){i.setStart(n,0),i.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}s=n,n=a.next()}n||(i.setStart(s,0),i.setEnd(s,0))}else Dt(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),Ca(e,i)},bV=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},Jm=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),CV=e=>Jm(e).fold(K(""),t=>t.nodeName.toUpperCase()),yV=e=>Jm(e).filter(t=>Qi(w.fromDom(t))).isSome(),vV=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,EV=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},sS=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,oS=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),xV=e=>oS(e)&&oS(e.parentNode),Mc=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Uc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Ee(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},SV=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng();if(n===e.getBody())return;xV(n)&&(o="LI");let a=t(o);if(Uc(n,s,!0)&&Uc(n,s,!1))if(sS(n,"LI")){const c=Mc(n);r.insertAfter(a,c),EV(n)?r.remove(c):r.remove(n)}else r.replace(a,n);else if(Uc(n,s,!0))sS(n,"LI")?(r.insertAfter(a,Mc(n)),a.appendChild(r.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),r.remove(s);else if(Uc(n,s,!1))r.insertAfter(a,Mc(n)),r.remove(s);else{n=Mc(n);const c=i.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&vV(f,"LI")?(a=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(a,n)),r.remove(s)}La(e,a)},wV=e=>{A(ob(w.fromDom(e),In),t=>{const n=t.dom;n.nodeValue=wo(n.nodeValue)})},_V=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),kV=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),ep=e=>{e.innerHTML='<br data-mce-bogus="1">'},tp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,rS=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",NV=(e,t,n)=>{let s=n;const o=[];let r;if(!!s){for(;s=s.firstChild;){if(e.isBlock(s))return;Ee(s)&&!t[s.nodeName.toLowerCase()]&&o.push(s)}for(r=o.length;r--;)s=o[r],(!s.hasChildNodes()||s.firstChild===s.lastChild&&s.firstChild.nodeValue===""||_V(e,s))&&e.remove(s)}},np=(e,t,n)=>ne(t)===!1?n:e?n===1&&t.data.charAt(n-1)===Kt?0:n:n===t.data.length-1&&t.data.charAt(n)===Kt?t.data.length:n,TV=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,np(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,np(!1,e.endContainer,e.endOffset)),t},AV=e=>{do ne(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},iS=(e,t)=>{const n=e.getRoot();let s,o;for(s=t;s!==n&&e.getContentEditable(s)!=="false";)e.getContentEditable(s)==="true"&&(o=s),s=s.parentNode;return s!==n?o:n},RV=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(c=>{const f=Eh(w.fromDom(t)),d=we(we({},f),c);s.setStyles(t,d)});const o=b.from(n.class).map(c=>c.split(/\s+/)),r=b.from(t.className).map(c=>H(c.split(/\s+/),f=>f!==""));En(o,r,(c,f)=>{const d=H(f,y=>!R(c,y)),p=[...c,...d];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=Fi(n,(c,f)=>!R(i,f));s.setAttribs(t,a)},Fa=(e,t)=>{if(Sn(e).toLowerCase()===t.tagName.toLowerCase()){const s=ar(e);RV(e,t,s)}},PV=(e,t,n,s,o)=>{let r,i,a,c,f,d;const p=e.dom,y=iS(p,s);if(i=p.getParent(s,p.isBlock),!i||!rS(p,i)){if(i=i||y,i===e.getBody()||kV(i)?d=i.nodeName.toLowerCase():d=i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return r=p.create(t),Fa(e,r),i.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(c=s;c.parentNode!==i;)c=c.parentNode;for(;c&&!p.isBlock(c);)a=c,c=c.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(r=p.create(t),Fa(e,r),a.parentNode.insertBefore(r,a),c=a;c&&!p.isBlock(c);)f=c.nextSibling,r.appendChild(c),c=f;n.setStart(s,o),n.setEnd(s,o)}}return s},OV=(e,t)=>{t.normalize();const n=t.lastChild;(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},DV=(e,t)=>{let n,s,o,r,i,a,c,f,d;const p=e.dom,y=e.schema,C=y.getNonEmptyElements(),S=e.selection.getRng(),v=Sn(e),E=W=>{let q=s,Z,ee,xe;const ae=y.getTextInlineElements();if(W||f==="TABLE"||f==="HR"?Z=p.create(W||v):Z=r.cloneNode(!1),xe=Z,l1(e)===!1)p.setAttrib(Z,"style",null),p.setAttrib(Z,"class",null);else do if(ae[q.nodeName]){if(Ds(q)||Mn(q))continue;ee=q.cloneNode(!1),p.setAttrib(ee,"id",""),Z.hasChildNodes()?(ee.appendChild(Z.firstChild),Z.appendChild(ee)):(xe=ee,Z.appendChild(ee))}while((q=q.parentNode)&&q!==$);return Fa(e,Z),ep(xe),Z},_=W=>{let q,Z;const ee=np(W,s,o);if(ne(s)&&(W?ee>0:ee<s.nodeValue.length))return!1;if(s.parentNode===r&&d&&!W||W&&Ee(s)&&s===r.firstChild)return!0;if(tp(s,"TABLE")||tp(s,"HR"))return d&&!W||!d&&W;const xe=new zt(s,r);for(ne(s)&&(W&&ee===0?xe.prev():!W&&ee===s.nodeValue.length&&xe.next());q=xe.current();){if(Ee(q)){if(!q.getAttribute("data-mce-bogus")&&(Z=q.nodeName.toLowerCase(),C[Z]&&Z!=="br"))return!1}else if(ne(q)&&!tr(q.nodeValue))return!1;W?xe.prev():xe.next()}return!0},P=()=>{/^(H[1-6]|PRE|FIGURE)$/.test(f)&&te!=="HGROUP"?i=E(v):i=E(),c1(e)&&rS(p,c)&&p.isEmpty(r)?i=p.split(c,r):p.insertAfter(i,r),La(e,i)};Kl(p,S).each(W=>{S.setStart(W.startContainer,W.startOffset),S.setEnd(W.endContainer,W.endOffset)}),s=S.startContainer,o=S.startOffset;const z=!!(t&&t.shiftKey),I=!!(t&&t.ctrlKey);Ee(s)&&s.hasChildNodes()&&(d=o>s.childNodes.length-1,s=s.childNodes[Math.min(o,s.childNodes.length-1)]||s,d&&ne(s)?o=s.nodeValue.length:o=0);const $=iS(p,s);if(!$)return;z||(s=PV(e,v,S,s,o)),r=p.getParent(s,p.isBlock),c=r?p.getParent(r.parentNode,p.isBlock):null,f=r?r.nodeName.toUpperCase():"";const te=c?c.nodeName.toUpperCase():"";if(te==="LI"&&!I&&(r=c,c=c.parentNode,f=te),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(r)){SV(e,E,c,r,v);return}r!==e.getBody()&&(Gr(r)?(i=of(r),p.isEmpty(r)&&ep(r),Fa(e,i),La(e,i)):_()?P():_(!0)?(i=r.parentNode.insertBefore(E(),r),La(e,tp(r,"HR")?i:r)):(n=TV(S).cloneRange(),n.setEndAfter(r),a=n.extractContents(),wV(a),AV(a),i=a.firstChild,p.insertAfter(a,r),NV(p,C,i),OV(p,r),p.isEmpty(r)&&ep(r),i.normalize(),p.isEmpty(i)?(p.remove(i),P()):(Fa(e,i),La(e,i))),p.setAttrib(i,"id",""),e.dispatch("NewBlock",{newBlock:i}))},BV=(e,t,n)=>{const s=new zt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||o.length>0)return!0},aS=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Ca(e,s)},IV=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i;Kl(s,o).each(C=>{o.setStart(C.startContainer,C.startOffset),o.setEnd(C.endContainer,C.endOffset)});let a=o.startOffset,c=o.startContainer;if(c.nodeType===1&&c.hasChildNodes()){const C=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,C&&c.nodeType===3?a=c.nodeValue.length:a=0}let f=s.getParent(c,s.isBlock);const d=f?s.getParent(f.parentNode,s.isBlock):null,p=d?d.nodeName.toUpperCase():"",y=!!(t&&t.ctrlKey);p==="LI"&&!y&&(f=d),c&&c.nodeType===3&&a>=c.nodeValue.length&&(BV(e.schema,c,f)||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),_f(s,o,r),aS(e,r,i),e.undoManager.add()},$V=(e,t)=>{const n=w.fromTag("br");Xn(w.fromDom(t),n),e.undoManager.add()},LV=(e,t)=>{MV(e.getBody(),t)||Eo(w.fromDom(t),w.fromTag("br"));const n=w.fromTag("br");Eo(w.fromDom(t),n),aS(e,n.dom,!1),e.undoManager.add()},FV=e=>Dt(e.getNode()),MV=(e,t)=>FV(F.after(t))?!0:os(e,F.after(t)).map(n=>Dt(n.getNode())).getOr(!1),lS=e=>e&&e.nodeName==="A"&&"href"in e,UV=e=>e.fold(pt,lS,lS,pt),zV=e=>{const t=re(Cr,e),n=F.fromRangeStart(e.selection.getRng());return Fs(t,e.getBody(),n).filter(UV)},HV=(e,t)=>{t.fold(Ie,re($V,e),re(LV,e),Ie)},cS=(e,t)=>{const n=zV(e);n.isSome()?n.each(re(HV,e)):IV(e,t)},uS=(e,t)=>Jm(e).filter(n=>t.length>0&&Js(w.fromDom(n),t)).isSome(),VV=e=>uS(e,i1(e)),WV=e=>uS(e,a1(e)),Zn=Ns.generate([{br:[]},{block:[]},{none:[]}]),jV=(e,t)=>WV(e),fS=e=>(t,n)=>yV(t)===e,dS=(e,t)=>(n,s)=>CV(n)===e.toUpperCase()===t,zc=e=>dS("pre",e),qV=()=>dS("summary",!0),Hc=e=>(t,n)=>r1(t)===e,KV=(e,t)=>VV(e),Vc=(e,t)=>t,GV=e=>{const t=Sn(e),n=bV(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},cs=(e,t)=>(n,s)=>Q(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),YV=(e,t)=>x0([cs([jV],Zn.none()),cs([qV()],Zn.br()),cs([zc(!0),Hc(!1),Vc],Zn.br()),cs([zc(!0),Hc(!1)],Zn.block()),cs([zc(!0),Hc(!0),Vc],Zn.block()),cs([zc(!0),Hc(!0)],Zn.br()),cs([fS(!0),Vc],Zn.br()),cs([fS(!0)],Zn.block()),cs([KV],Zn.br()),cs([Vc],Zn.br()),cs([GV],Zn.block())],[e,!!(t&&t.shiftKey)]).getOr(Zn.none()),sp=(e,t)=>{YV(e,t).fold(()=>{Ne(t)&&Fc(e,"insertLineBreak").isDefaultPrevented()||(cS(e,t),Ne(t)&&Lc(e,"insertLineBreak"))},()=>{Ne(t)&&Fc(e,"insertParagraph").isDefaultPrevented()||(DV(e,t),Ne(t)&&Lc(e,"insertParagraph"))},Ie)},XV=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),mF(e.undoManager),e.undoManager.transact(()=>{e.selection.isCollapsed()===!1&&bm(e),sp(e,t)}))},QV=e=>{e.on("keydown",t=>{t.keyCode===ge.ENTER&&XV(e,t)})},ZV=(e,t,n)=>{Da([{keyCode:ge.END,action:$e(lx,e,!0)},{keyCode:ge.HOME,action:$e(lx,e,!1)},{keyCode:ge.END,action:$e(gx,e,!0)},{keyCode:ge.HOME,action:$e(gx,e,!1)},{keyCode:ge.END,action:$e(Ac,e,!0,t)},{keyCode:ge.HOME,action:$e(Ac,e,!1,t)}],n).each(s=>{n.preventDefault()})},JV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()===!1&&ZV(e,t,n)})},eW=e=>{e.on("input",t=>{t.isComposing===!1&&uB(e)})},tW=yo(),nW=(e,t,n)=>{Da([{keyCode:ge.PAGE_UP,action:$e(Ac,e,!1,t)},{keyCode:ge.PAGE_DOWN,action:$e(Ac,e,!0,t)}],n)},mS=e=>e.stopImmediatePropagation(),pS=e=>e.keyCode===ge.PAGE_UP||e.keyCode===ge.PAGE_DOWN,gS=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",mS,!0):!n&&e.get()&&t.off("NodeChange",mS),e.set(n)},sW=(e,t)=>{if(tW.os.isMacOS())return;const n=$t(!1);e.on("keydown",s=>{pS(s)&&gS(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()===!1&&nW(e,t,s),pS(s)&&n.get()&&(gS(n,e,!1),e.nodeChanged())})},hS=(e,t)=>{const n=t.container(),s=t.offset();return ne(n)?(n.insertData(s,e),b.some(F(n,s+e.length))):Bl(t).map(o=>{const r=w.fromText(e);return t.isAtEnd()?Eo(o,r):Xn(o,r),F(r.dom,e.length)})},oW=re(hS,Xt),rW=re(hS," "),iW=e=>t=>t.fold(n=>Ps(e.dom,F.before(n)),n=>mn(n),n=>Os(n),n=>os(e.dom,F.after(n))),aW=(e,t)=>n=>nB(e,n)?oW(t):rW(t),lW=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),cW=e=>{const t=F.fromRangeStart(e.selection.getRng()),n=w.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=re(Cr,e),o=F.fromRangeStart(e.selection.getRng());return Fs(s,e.getBody(),o).bind(iW(n)).map(r=>()=>aW(n,t)(r).each(lW(e)))}else return b.none()},uW=(e,t)=>{dx([{keyCode:ge.SPACEBAR,action:$e(cW,e)}],t).each(n=>{t.preventDefault(),Fc(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Lc(e,"insertText",{data:" "}))})},fW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&uW(e,t)})},dW=e=>fR(e)?[{keyCode:ge.TAB,action:$e(Rx,e,!0)},{keyCode:ge.TAB,shiftKey:!0,action:$e(Rx,e,!1)}]:[],mW=(e,t)=>{Da([...dW(e)],t).each(n=>{t.preventDefault()})},pW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()===!1&&mW(e,t)})},gW=e=>{if(e.addShortcut("Meta+P","","mcePrint"),dV(e),io(e))return $t(null);{const t=bH(e);return QH(e),G3(e,t),gV(e,t),QV(e),fW(e),eW(e),pW(e),JV(e,t),sW(e,t),t}};class hW{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!od(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||Wl(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Wl(t)&&(t.selection.getNode().nodeName==="IMG"?Un.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t){const n=this.editor.selection;let s,o,r;this.editor.initialized&&n&&!L1(this.editor)&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),s=n.getStart(!0)||r,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,r))&&(s=r),o=[],this.editor.dom.getParent(s,i=>{if(i===r)return!0;o.push(i)}),t=t||{},t.element=s,t.parents=o,this.editor.dispatch("NodeChange",t))}isSameElementPath(t){let n;const s=this.editor,o=st(s.dom.getParents(t,it,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const bS="x-tinymce/html",Wc=K(bS),op="<!-- "+bS+" -->",bW=e=>op+e,CW=e=>e.replace(op,""),CS=e=>e.indexOf(op)!==-1,yW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),vW=(e,t)=>{let n="<"+e;const s=$u(t,(o,r)=>r+'="'+_o.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},EW=(e,t,n)=>{const s=e.split(/\n\n/),o=vW(t,n),r="</"+t+">",i=U(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:U(i,a).join("")},yS="%MCEPASTEBIN%",xW=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},yS);et.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},SW=(e,t)=>{const n=e.dom;if(rp(e)){let s;const o=t.get();for(;s=rp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},rp=e=>e.dom.get("mcepastebin"),wW=e=>e&&e.id==="mcepastebin",_W=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=H(e.getBody().childNodes,wW);A(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},vS=e=>e===yS,kW=e=>{const t=$t(null);return{create:()=>xW(e,t),remove:()=>SW(e,t),getEl:()=>rp(e),getHtml:()=>_W(e),getLastRng:t.get}},ES=(e,t)=>(G.each(t,n=>{Bn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),NW=e=>{const t=No(),n=mi({},t);let s="";const o=t.getVoidElements(),r=G.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,d=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())&&(c=c.firstChild))do a(c);while(c=c.next);i[f]&&d.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=ES(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},xS=e=>(e=ES(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Xt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),TW=e=>{let t=0;return()=>e+t++},AW=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(n,t)?"image/"+n[t]:"image/"+t},RW=(e,t)=>{const n=mi({},e.schema);n.addNodeFilter("meta",o=>{G.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Oo({validate:!0},e.schema).serialize(s)},SS=(e,t)=>({content:e,cancelled:t}),PW=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=UP(e,s,n);return SS(o.node.innerHTML,o.isDefaultPrevented())},OW=(e,t,n)=>{const s=MP(e,t,n),o=RW(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?PW(e,o,n):SS(o,s.isDefaultPrevented())},DW=(e,t,n)=>OW(e,t,n),ip=(e,t)=>(e.insertContent(t,{merge:tR(e),paste:!0}),!0),ap=e=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e),BW=(e,t)=>ap(t)&&M(nC(e),n=>_g(t.toLowerCase(),`.${n.toLowerCase()}`)),IW=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),$W=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),LW=(e,t,n)=>!e.selection.isCollapsed()&&ap(t)?$W(e,t,n):!1,FW=(e,t,n)=>BW(e,t)?IW(e,t,n):!1,MW=(e,t)=>{G.each([LW,FW,ip],n=>n(e,t,ip)!==!0)},UW=(e,t,n)=>{n||!nR(e)?ip(e,t):MW(e,t)},zW=TW("mceclip"),wS=(e,t,n,s)=>{const o=DW(e,t,n);o.cancelled===!1&&UW(e,o.content,s)},jc=(e,t,n)=>{const s=n||CS(t);wS(e,CW(t),s,!1)},lp=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=Kh(n,oR(e)),o=EW(s,Sn(e),ar(e));wS(e,o,!1,!0)},_S=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},yi=(e,t)=>t in e&&e[t].length>0,kS=e=>yi(e,"text/html")||yi(e,"text/plain"),HW=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ne(n)?e.dom.encode(n[1]):null},VW=(e,t,n,s)=>{const o=zW(),r=jb(e)&&Ne(n.name),i=r?HW(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},WW=(e,t)=>{const{data:n,type:s}=pc(t.uri),o=t.file,r=e.editorUpload.blobCache,i=r.getByData(n,s),a=i!=null?i:VW(e,r,o,n);jc(e,`<img src="${a.blobUri()}">`,!1)},jW=e=>e.type==="paste",qW=e=>Promise.all(U(e,t=>lE(t).then(n=>({file:t,uri:n})))),KW=e=>{const t=nC(e);return n=>qn(n.type,"image/")&&M(t,s=>AW(s)===n.type)},GW=(e,t)=>{const n=t.items?Ke(gt(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?gt(t.files):[];return H(n.length>0?n:s,KW(e))},NS=(e,t,n)=>{const s=jW(t)?t.clipboardData:t.dataTransfer;if(Ol(e)&&s){const o=GW(e,s);if(o.length>0)return t.preventDefault(),qW(o).then(r=>{n&&e.selection.setRng(n),A(r,i=>{WW(e,i)})}),!0}return!1},YW=e=>{var t,n;return et.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},XW=e=>ge.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,TS=(e,t,n,s)=>{let o=xS(n);const r=yi(t,Wc())||CS(n),i=!r&&yW(o),a=ap(o);(vS(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(yi(t,"text/plain")&&i?o=t["text/plain"]:o=NW(o)),!vS(o)&&(s?lp(e,o):jc(e,o,r))},QW=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{XW(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||YW(r))return;const i=n.get()==="text"||s;s=!1;const a=_S(r.clipboardData);!kS(a)&&NS(e,r,o())||(yi(a,"text/html")?(r.preventDefault(),TS(e,a,a["text/html"],i)):(t.create(),Un.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),TS(e,a,c,i)},0)))})},ZW=e=>{const t=o=>qn(o,"webkit-fake-url"),n=o=>qn(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Ol(e)&&s(i))for(const a of o){const c=a.attr("src");be(c)&&!a.attr("data-mce-object")&&c!==et.transparentSrc&&(t(c)||!rR(e)&&n(c))&&a.remove()}})},JW=(e,t,n)=>{QW(e,t,n),ZW(e)},e6=(e,t)=>{t.get()==="text"?(t.set("html"),ty(e,!1)):(t.set("text"),ty(e,!0)),e.focus()},t6=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{e6(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&jc(e,s.html,s.internal),s.text&&lp(e,s.text)})},n6=(e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Wc(),t),!0}catch{return!1}},AS=(e,t,n,s)=>{n6(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},RS=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Un.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},PS=e=>({html:bW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),s6=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),OS=e=>!e.selection.isCollapsed()||s6(e),o6=e=>t=>{!t.isDefaultPrevented()&&OS(e)&&AS(t,PS(e),RS(e),()=>{if(et.browser.isChromium()||et.browser.isFirefox()){const n=e.selection.getRng();Un.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},r6=e=>t=>{!t.isDefaultPrevented()&&OS(e)&&AS(t,PS(e),RS(e),Ie)},i6=e=>{e.on("cut",o6(e)),e.on("copy",r6(e))},DS=(e,t)=>{var n,s;return ui.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},a6=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},BS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},l6=e=>M(e.files,t=>/^image\//.test(t.type)),c6=(e,t)=>{X1(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Ol(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&l6(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=DS(e,n);if(Mt(s))return;const o=_S(n.dataTransfer),r=yi(o,Wc());if((!kS(o)||a6(o))&&NS(e,n,s))return;const i=o[Wc()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Un.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),BS(e,s);const c=xS(a);o["text/html"]?jc(e,c,r):lp(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Ol(e)&&t.get()===!1&&(n.preventDefault(),BS(e,DS(e,n))),n.type==="dragend"&&t.set(!1)})},u6=e=>{const t=o=>r=>{o(e,r)},n=Q1(e);Ye(n)&&e.on("PastePreProcess",t(n));const s=Z1(e);Ye(s)&&e.on("PastePostProcess",t(s))},f6=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},d6=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,IS=e=>G.trim(e).replace(d6,Ml).toLowerCase(),m6=(e,t,n)=>{const s=J1(e);if(n||s==="all"||!eR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,d)=>{const p=r.parseStyle(r.decode(f)),y={};for(let S=0;S<o.length;S++){const v=p[o[S]];let E=v,_=r.getStyle(i,o[S],!0);/color/.test(o[S])&&(E=IS(E),_=IS(_)),_!==E&&(y[o[S]]=v)}const C=r.serializeStyle(y,"span");return C?c+' style="'+C+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},p6=e=>{(et.browser.isChromium()||et.browser.isSafari())&&f6(e,m6)},g6=e=>{const t=$t(!1),n=$t(sR(e)?"text":"html"),s=kW(e);p6(e),t6(e,n),u6(e),e.on("PreInit",()=>{i6(e),c6(e,t),JW(e,s,n)})},h6=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},b6=e=>{e.parser.addNodeFilter("details",t=>{A(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{A(t,n=>{const s=n.attr("data-mce-open");n.attr("open",be(s)?s:null),n.attr("data-mce-open",null)})})},C6=e=>{h6(e),b6(e)},$S=e=>Ee(e)&&Mh(w.fromDom(e)),y6=e=>{const t=e.selection.getRng(),n=F.fromRangeStart(t),s=F.fromRangeEnd(t);if(F.isElementPosition(n)){const o=n.container();$S(o)&&mn(o).each(r=>t.setStart(r.container(),r.offset()))}if(F.isElementPosition(s)){const o=n.container();$S(o)&&Os(o).each(r=>t.setEnd(r.container(),r.offset()))}e.selection.setRng(Ld(t))},v6=e=>{e.on("click",t=>{t.detail>=3&&y6(e)})};var Ma;(function(e){e.Before="before",e.After="after"})(Ma||(Ma={}));const E6=(e,t)=>Math.abs(e.left-t),x6=(e,t)=>Math.abs(e.right-t),S6=(e,t)=>e>=t.top&&e<=t.bottom,w6=(e,t)=>e.top<t.bottom&&e.bottom>t.top,_6=(e,t)=>{const n=CA(e,t)/Math.min(e.height,t.height);return w6(e,t)&&n>.5},k6=(e,t)=>{const n=H(e,s=>S6(t,s));return bA(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=Ce(e,i=>_6(i,s));return[o,r]})},N6=(e,t)=>({node:e.node,position:E6(e,t)<x6(e,t)?Ma.Before:Ma.After}),T6=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),cp=(e,t,n)=>{const s=d=>ts(d.node)?b.some(d):Ee(d.node)?cp(gt(d.node.childNodes),t,n):b.none(),o=(d,p)=>{if(d.length>=2){const y=s(d[0]).getOr(d[0]),C=s(d[1]).getOr(d[1]);if(Math.abs(p(y,t,n)-p(C,t,n))<2){if(ne(y.node))return b.some(y);if(ne(C.node))return b.some(C)}}return b.none()},r=(d,p)=>{const y=jn(d,(C,S)=>p(C,t,n)-p(S,t,n));return o(y,p).orThunk(()=>en(y,s))},[i,a]=k6(B0(e),n),{pass:c,fail:f}=Ce(a,d=>d.top<n);return r(i,T6).orThunk(()=>r(f,gb)).orThunk(()=>r(c,gb))},A6=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>cp(gt(r.dom.childNodes),n,s),a=>{const c=H(gt(r.dom.childNodes),f=>f!==a.dom);return cp(c,n,s)}).orThunk(()=>(tt(r,e)?b.none():fN(r)).bind(c=>o(c,b.some(r))));return o(t,b.none())},R6=(e,t,n)=>{const s=w.fromDom(e),o=vo(s),i=w.fromPoint(o,t,n).filter(a=>eo(s,a)).getOr(s);return A6(s,i,t,n)},P6=(e,t,n)=>R6(e,t,n).filter(s=>la(s.node)).map(s=>N6(s,t)),LS=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-s.clientTop,left:t.left+o.pageXOffset-s.clientLeft}},O6=e=>e.inline?LS(e.getBody()):{left:0,top:0},D6=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},B6=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},I6=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=LS(e.getContentAreaContainer()),s=B6(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},$6=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),L6=(e,t)=>$6(O6(e),D6(e),I6(e,t)),up=St,F6=to,M6=(e,t)=>up(t)&&t!==e,U6=(e,t,n)=>t===n||e.dom.isChildOf(t,n)?!1:!up(t),z6=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},H6=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},V6=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},W6=(e,t,n,s,o,r)=>{let i=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(i=t.pageX+n-o),t.pageY+s>r&&(a=t.pageY+s-r),e.style.width=n-i+"px",e.style.height=s-a+"px"},FS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},j6=e=>e.button===0,q6=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),K6=(e,t)=>n=>{if(j6(n)){const s=de(t.dom.getParents(n.target),xA(up,F6)).getOr(null);if(M6(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:H6(t,s,s.offsetWidth,s.offsetHeight)})}}},G6=(e,t)=>{const n=_l((s,o)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(s,o)},0);return t.on("remove",n.cancel),s=>e.on(o=>{const r=Math.max(Math.abs(s.screenX-o.screenX),Math.abs(s.screenY-o.screenY));if(!o.dragging&&r>10){if(t.dispatch("dragstart",{target:o.element}).isDefaultPrevented())return;o.dragging=!0,t.focus()}if(o.dragging){const i=q6(o,L6(t,s));V6(o.ghost,t.getBody()),W6(o.ghost,i,o.width,o.height,o.maxX,o.maxY),n.throttle(s.clientX,s.clientY)}})},Y6=e=>{const n=e.getSel().getRangeAt(0).startContainer;return n.nodeType===3?n.parentNode:n},X6=(e,t)=>n=>{e.on(s=>{if(s.dragging){if(U6(t,Y6(t.selection),s.element)){const o=z6(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{FS(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),MS(e)},Q6=(e,t)=>()=>{e.on(n=>{n.dragging&&t.dispatch("dragend")}),MS(e)},MS=e=>{e.on(t=>{FS(t.ghost)}),e.clear()},Z6=e=>{const t=To(),n=ot.DOM,s=document,o=K6(t,e),r=G6(t,e),i=X6(t,e),a=Q6(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===ge.ESC&&a()})},J6=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(R(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Ec(e,"Dropped file type is not supported"))}},n=o=>{Xl(e,o.target)&&t(o)},s=()=>{const o=ot.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];A(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{A(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Un.setEditorTimeout(e,s,0)})},e8=e=>{Z6(e),U1(e)&&J6(e)},t8=e=>{const t=_l(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Em(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},n8=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(_s(n)){const s=Sa(e.getBody(),n),o=St(s)?s:n;e.selection.getNode()!==o&&Aa(e,o).each(r=>e.selection.setRng(r))}})})},vi=St,fp=(e,t)=>Sa(e.getBody(),t),s8=e=>{const t=e.selection,n=e.dom,s=n.isBlock,o=e.getBody(),r=SR(e,o,s,()=>fr(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let c;const f=q=>n.hasClass(q,"mce-offscreen-selection"),d=q=>q!==o&&(vi(q)||_s(q))&&n.isChildOf(q,o),p=q=>{q&&t.setRng(q)},y=(q,Z,ee,xe=!0)=>e.dispatch("ShowCaret",{target:Z,direction:q,before:ee}).isDefaultPrevented()?null:(xe&&t.scrollIntoView(Z,q===-1),r.show(ee,Z)),C=q=>{q.hasAttribute("data-mce-caret")&&(of(q),t.scrollIntoView(q))},S=()=>{e.on("click",Z=>{const ee=fp(e,Z.target);ee&&vi(ee)&&(Z.preventDefault(),e.focus())}),e.on("blur NewBlock",$),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",Z=>{const ee=Z.target,xe=fp(e,ee);vi(xe)?(Z.preventDefault(),Aa(e,xe).each(I)):d(ee)&&Aa(e,ee).each(I)},!0),e.on("mousedown",Z=>{const ee=Z.target;if(ee!==o&&ee.nodeName!=="HTML"&&!n.isChildOf(ee,o)||GM(e,Z.clientX,Z.clientY)===!1)return;$(),W();const xe=fp(e,ee);vi(xe)?(Z.preventDefault(),Aa(e,xe).each(I)):P6(o,Z.clientX,Z.clientY).each(ae=>{Z.preventDefault();const se=y(1,ae.node,ae.position===Ma.Before,!1);p(se),Ee(xe)?xe.focus():e.getBody().focus()})}),e.on("keypress",Z=>{ge.modifierPressed(Z)||vi(t.getNode())&&Z.preventDefault()}),e.on("GetSelectionRange",Z=>{let ee=Z.range;if(c){if(!c.parentNode){c=null;return}ee=ee.cloneRange(),ee.selectNode(c),Z.range=ee}}),e.on("SetSelectionRange",Z=>{Z.range=_(Z.range);const ee=I(Z.range,Z.forward);ee&&(Z.range=ee)});const q=Z=>Z.id==="mcepastebin";e.on("AfterSetSelectionRange",Z=>{const ee=Z.range,xe=ee.startContainer.parentNode;!E(ee)&&!q(xe)&&W(),f(xe)||$()}),e8(e),t8(e),n8(e)},v=q=>Ln(q)||Cl(q)||yl(q),E=q=>v(q.startContainer)||v(q.endContainer),_=q=>{const Z=e.schema.getVoidElements(),ee=n.createRng(),xe=q.startContainer,ae=q.startOffset,se=q.endContainer,Ge=q.endOffset;return Fe(Z,xe.nodeName.toLowerCase())?ae===0?ee.setStartBefore(xe):ee.setStartAfter(xe):ee.setStart(xe,ae),Fe(Z,se.nodeName.toLowerCase())?Ge===0?ee.setEndBefore(se):ee.setEndAfter(se):ee.setEnd(se,Ge),ee},P=(q,Z)=>{const ee=w.fromDom(e.getBody()),xe=e.getDoc(),ae=Xi(ee,"#"+i).getOrThunk(()=>{const je=w.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',xe);return fn(je,"id",i),It(ee,je),je}),se=n.createRng();Ki(ae),Qo(ae,[w.fromText(Xt,xe),w.fromDom(Z),w.fromText(Xt,xe)]),se.setStart(ae.dom.firstChild,1),se.setEnd(ae.dom.lastChild,0),ll(ae,{top:n.getPos(q,e.getBody()).y+"px"}),vy(ae);const Ge=t.getSel();return Ge.removeAllRanges(),Ge.addRange(se),se},z=q=>{const Z=q.cloneNode(!0),ee=e.dispatch("ObjectSelected",{target:q,targetClone:Z});if(ee.isDefaultPrevented())return null;const xe=P(q,ee.targetClone),ae=w.fromDom(q);return A(xn(w.fromDom(e.getBody()),"*[data-mce-selected]"),se=>{tt(ae,se)||Gn(se,a)}),n.getAttrib(q,a)||q.setAttribute(a,"1"),c=q,W(),xe},I=(q,Z)=>{if(!q)return null;if(q.collapsed){if(!E(q)){const se=Z?1:-1,Ge=da(se,o,q),je=Ge.getNode(!Z);if(la(je))return y(se,je,Z?!Ge.isAtEnd():!1,!1);const ct=Ge.getNode(Z);if(la(ct))return y(se,ct,Z?!1:!Ge.isAtEnd(),!1)}return null}let ee=q.startContainer,xe=q.startOffset;const ae=q.endOffset;if(ee.nodeType===3&&xe===0&&vi(ee.parentNode)&&(ee=ee.parentNode,xe=n.nodeIndex(ee),ee=ee.parentNode),ee.nodeType!==1)return null;if(ae===xe+1&&ee===q.endContainer){const se=ee.childNodes[xe];if(d(se))return z(se)}return null},$=()=>{c&&c.removeAttribute(a),Xi(w.fromDom(e.getBody()),"#"+i).each(Tt),c=null},te=()=>{r.destroy(),c=null},W=()=>{r.hide()};return io(e)||S(),{showCaret:y,showBlockCaretContainer:C,hideFakeCaret:W,destroy:te}},US=(e,t,n)=>{if(ne(t)&&(n<0||n>t.data.length))return[];const s=[n];let o=t;for(;o!==e&&o.parentNode;){const r=o.parentNode;for(let i=0;i<r.childNodes.length;i++)if(r.childNodes[i]===o){s.push(i);break}o=r}return o===e?s.reverse():[]},dp=(e,t,n,s,o)=>{const r=US(e,t,n),i=US(e,s,o);return{start:r,end:i}},zS=(e,t)=>{const n=t.slice(),s=n.pop();return Q(n,(r,i)=>r.bind(a=>b.from(a.childNodes[i])),b.some(e)).bind(r=>ne(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s}))},HS=(e,t)=>zS(e,t.start).bind(({node:n,offset:s})=>zS(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),o8=(e,t)=>dp(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset),Ei=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Ei(e,s,n)}},qc=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(ne(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),ne(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ei(e,o,n),o!==r&&Ei(e,r,n))},mp=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),VS=(e,t,n)=>{X3(t,0,t).each(o=>{const r=o.container;Px(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),qc(e,a,c=>c===t)})})},r8=(e,t)=>{const n=e.dom,s=t.pattern,o=HS(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return Nt(c)&&Ut(c).exists(f=>Fe(f,"block"))};return mp(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{VS(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{VS(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},i8=(e,t)=>{const n=t.replace(Xt," ");return de(e,s=>t.indexOf(s.start)===0||n.indexOf(s.start)===0)},a8=(e,t)=>{const n=e.dom,s=e.selection.getRng();return mp(e,s).filter(o=>{const r=Sn(e),i=n.is(o,r);return o!==null&&i}).bind(o=>{const r=o.textContent;return i8(t,r).map(a=>G.trim(r).length===a.start.length?[]:[{pattern:a,range:dp(n.getRoot(),o,0,o,0)}])}).getOr([])},l8=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();A(t,s=>r8(e,s)),e.selection.moveToBookmark(n)},WS=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Kc=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},jS=(e,t,n)=>{const s=HS(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset);return{prefix:t,end:i.parentNode.insertBefore(WS(e,t+"-end"),i),start:a.parentNode.insertBefore(WS(e,t+"-start"),a)}},qS=(e,t,n)=>{Ei(e,e.get(t.prefix+"-end"),n),Ei(e,e.get(t.prefix+"-start"),n)},pp=e=>e.start.length===0,c8=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},KS=(e,t,n,s)=>{const o=t.start;return zm(e,s.container,s.offset,c8(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),b.some(a)}else{const a=i.offset-o.length;return Um(i.container,a,n).map(c=>{const f=e.createRng();return f.setStart(c.container,c.offset),f.setEnd(i.container,i.offset),f}).filter(c=>c.toString()===o).orThunk(()=>KS(e,t,n,as(i.container,0)))}})},u8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return Mm(n,s,o).bind(i=>KS(e,t,o,i).bind(c=>{if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return b.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return b.none()}return b.some(c)}))},f8=(e,t,n)=>{const s=e.dom,o=s.getRoot(),r=n.pattern,i=n.position.container,a=n.position.offset;return Um(i,a-n.pattern.end.length,t).bind(c=>{const f=dp(o,c.container,c.offset,i,a);if(pp(r))return b.some({matches:[{pattern:r,startRng:f,endRng:f}],position:c});{const d=GS(e,n.remainingPatterns,c.container,c.offset,t),p=d.getOr({matches:[],position:c}),y=p.position;return u8(s,r,y.container,y.offset,t,d.isNone()).map(S=>{const v=o8(o,S);return{matches:p.matches.concat([{pattern:r,startRng:v,endRng:f}]),position:as(S.startContainer,S.startOffset)}})}})},GS=(e,t,n,s,o)=>{const r=e.dom;return Mm(n,s,r.getRoot()).bind(i=>{const a=r.createRng();a.setStart(o,0),a.setEnd(n,s);const c=a.toString();for(let f=0;f<t.length;f++){const d=t[f];if(!_g(c,d.end))continue;const p=t.slice();p.splice(f,1);const y=f8(e,o,{pattern:d,remainingPatterns:p,position:i});if(y.isSome())return y}return b.none()})},YS=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?A(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},d8=(e,t,n,s)=>{const o=Kc(e.dom,n);qc(e.dom,o,s),YS(e,t,o)},m8=(e,t,n,s,o)=>{const r=e.dom,i=Kc(r,s),a=Kc(r,n);qc(r,a,o),qc(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=Kc(r,c);YS(e,t,f)},p8=(e,t)=>{const n=cb("mce_textpattern"),s=fe(t,(o,r)=>{const i=jS(e,n+`_end${o.length}`,r.endRng);return o.concat([ut(we({},r),{endMarker:i})])},[]);return fe(s,(o,r)=>{const i=s.length-o.length-1,a=pp(r.pattern)?r.endMarker:jS(e,n+`_start${i}`,r.startRng);return o.concat([ut(we({},r),{startMarker:a})])},[])},XS=(e,t,n)=>{const s=e.selection.getRng();return s.collapsed===!1?[]:mp(e,s).bind(o=>{const r=Math.max(0,s.startOffset-(n?1:0));return GS(e,t,s.startContainer,r,o)}).fold(()=>[],o=>o.matches)},QS=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=p8(n,t);A(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;pp(r.pattern)?d8(e,r.pattern,r.endMarker,a):m8(e,r.pattern,r.startMarker,r.endMarker,a),qS(n,r.endMarker,a),qS(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},g8=e=>e.inlinePatterns.length>0||e.blockPatterns.length>0,h8=(e,t)=>{if(!e.selection.isCollapsed()||!g8(t))return!1;const n=XS(e,t.inlinePatterns,!1),s=a8(e,t.blockPatterns);return s.length>0||n.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Zi),QS(e,n),l8(e,s);const o=e.selection.getRng(),r=Mm(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===Zi&&(a.deleteData(i.offset-1,1),Ei(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0):!1},ZS=(e,t)=>{if(t.length>0){const n=XS(e,t,!0);n.length>0&&e.undoManager.transact(()=>{QS(e,n)})}},JS=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},b8=(e,t)=>JS(e,t,(n,s)=>n===s.keyCode&&ge.modifierPressed(s)===!1),C8=(e,t)=>JS(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),y8=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>YA(eC(e)),o=()=>Mb(eC(e));e.on("keydown",r=>{r.keyCode===13&&!ge.modifierPressed(r)&&h8(e,s())&&r.preventDefault()},!0),e.on("keyup",r=>{b8(n,r)&&ZS(e,o())}),e.on("keypress",r=>{C8(t,r)&&Un.setEditorTimeout(e,()=>{ZS(e,o())})})},v8=e=>{y8(e)},E8=e=>{const t=G.each,n=ge.BACKSPACE,s=ge.DELETE,o=e.dom,r=e.selection,i=e.parser,a=et.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),d=et.deviceType.isiPhone()||et.deviceType.isiPad(),p=et.os.isMacOS()||et.os.isiOS(),y=(me,le)=>{try{e.getDoc().execCommand(me,!1,le)}catch{}},C=me=>me.isDefaultPrevented(),S=()=>{const me=Se=>{const Be=o.create("body"),yt=Se.cloneContents();return Be.appendChild(yt),r.serializer.serialize(Be,{format:"html"})},le=Se=>{const Be=me(Se),yt=o.createRng();yt.selectNode(e.getBody());const Lt=me(yt);return Be===Lt};e.on("keydown",Se=>{const Be=Se.keyCode;let yt,Lt;if(!C(Se)&&(Be===s||Be===n)){if(yt=e.selection.isCollapsed(),Lt=e.getBody(),yt&&!o.isEmpty(Lt)||!yt&&!le(e.selection.getRng()))return;Se.preventDefault(),e.setContent(""),Lt.firstChild&&o.isBlock(Lt.firstChild)?e.selection.setCursorLocation(Lt.firstChild,0):e.selection.setCursorLocation(Lt,0),e.nodeChanged()}})},v=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},E=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",me=>{let le;if(me.target===e.getDoc().documentElement)if(le=r.getRng(),e.getBody().focus(),me.type==="mousedown"){if(Ln(le.startContainer))return;r.placeCaretAt(me.clientX,me.clientY)}else r.setRng(le)})},_=()=>{e.on("keydown",me=>{if(!C(me)&&me.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const le=r.getNode(),Se=le.previousSibling;if(le.nodeName==="HR"){o.remove(le),me.preventDefault();return}Se&&Se.nodeName&&Se.nodeName.toLowerCase()==="hr"&&(o.remove(Se),me.preventDefault())}}})},P=()=>{Range.prototype.getClientRects||e.on("mousedown",me=>{if(!C(me)&&me.target.nodeName==="HTML"){const le=e.getBody();le.blur(),Un.setEditorTimeout(e,()=>{le.focus()})}})},z=()=>{const me=Jb(e);e.on("click",le=>{const Se=le.target;/^(IMG|HR)$/.test(Se.nodeName)&&o.getContentEditableParent(Se)!=="false"&&(le.preventDefault(),e.selection.select(Se),e.nodeChanged()),Se.nodeName==="A"&&o.hasClass(Se,me)&&Se.childNodes.length===0&&(le.preventDefault(),r.select(Se))})},I=()=>{const me=()=>{const Se=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const Be=r.getStart();Be!==e.getBody()&&(o.setAttrib(Be,"style",null),t(Se,yt=>{Be.setAttributeNode(yt.cloneNode(!0))}))}},le=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",Se=>{let Be;if(!C(Se)&&(Se.keyCode===8||Se.keyCode===46)&&le())return Be=me(),e.getDoc().execCommand("delete",!1,null),Be(),Se.preventDefault(),!1}),o.bind(e.getDoc(),"cut",Se=>{let Be;!C(Se)&&le()&&(Be=me(),Un.setEditorTimeout(e,()=>{Be()}))})},$=()=>{e.on("keydown",me=>{if(!C(me)&&me.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const le=r.getNode().previousSibling;if(le&&le.nodeName&&le.nodeName.toLowerCase()==="table")return me.preventDefault(),!1}})},te=()=>{e.on("keydown",me=>{let le,Se;if(C(me)||me.keyCode!==ge.BACKSPACE)return;le=r.getRng();const Be=le.startContainer,yt=le.startOffset,Lt=o.getRoot();if(Se=Be,!(!le.collapsed||yt!==0)){for(;Se&&Se.parentNode&&Se.parentNode.firstChild===Se&&Se.parentNode!==Lt;)Se=Se.parentNode;Se.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,Se),le=o.createRng(),le.setStart(Be,0),le.setEnd(Be,0),r.setRng(le))}})},W=()=>{const me=()=>{y("StyleWithCSS",!1),y("enableInlineTableEditing",!1),Xb(e)||y("enableObjectResizing",!1)};Zb(e)||e.on("BeforeExecCommand mousedown",me)},q=()=>{const me=()=>{t(o.select("a"),le=>{let Se=le.parentNode;const Be=o.getRoot();if(Se.lastChild===le){for(;Se&&!o.isBlock(Se);){if(Se.parentNode.lastChild!==Se||Se===Be)return;Se=Se.parentNode}o.add(Se,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",le=>{(le.type==="setcontent"||le.command==="mceInsertLink")&&me()})},Z=()=>{e.on("init",()=>{y("DefaultParagraphSeparator",Sn(e))})},ee=()=>{e.on("keyup focusin mouseup",me=>{ge.modifierPressed(me)||r.normalize()},!0)},xe=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ae=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},se=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",me=>{let le;me.target.nodeName==="HTML"&&(le=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(le),e.selection.normalize(),e.nodeChanged())}))},Ge=()=>{p&&e.on("keydown",me=>{ge.metaKeyPressed(me)&&!me.shiftKey&&(me.keyCode===37||me.keyCode===39)&&(me.preventDefault(),e.selection.getSel().modify("move",me.keyCode===37?"backward":"forward","lineboundary"))})},je=()=>{e.on("click",me=>{let le=me.target;do if(le.tagName==="A"){me.preventDefault();return}while(le=le.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ct=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",me=>{me.preventDefault()})})},qt=()=>{i.addNodeFilter("br",me=>{let le=me.length;for(;le--;)me[le].attr("class")==="Apple-interchange-newline"&&me[le].remove()})},J=Ie,pe=()=>{if(!c||e.removed)return!1;const me=e.selection.getSel();return!me||!me.rangeCount||me.rangeCount===0},Me=()=>{f&&(E(),z(),ct(),v(),d&&(ae(),se(),je())),c&&(P(),W(),xe(),Ge())},De=()=>{te(),S(),et.windowsPhone||ee(),f&&(E(),z(),Z(),ct(),$(),qt(),d?(ae(),se(),je()):v()),c&&(_(),P(),I(),W(),q(),xe(),Ge(),$())};return io(e)?Me():De(),{refreshContentEditable:J,isHidden:pe}},gp=ot.DOM,x8=(e,t)=>{const n=w.fromDom(e.getBody()),s=Ku(Xo(n)),o=w.fromTag("style");fn(o,"type","text/css"),It(o,w.fromText(t)),It(s,o),e.on("remove",()=>{Tt(o)})},S8=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,hp=e=>Fi(e,t=>Pt(t)===!1),ew=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return hp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:S8(e),validate:!0,blob_cache:n,document:e.getDoc()})},tw=e=>{const t=e.options.get;return hp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html")})},w8=e=>{const t=e.options.get;return we(we(we({},ew(e)),tw(e)),hp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))},_8=e=>{const t=mi(ew(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let o=n.length,r,i;const a=e.dom,c="data-mce-"+s;for(;o--;)if(r=n[o],i=r.attr(s),i&&!r.attr(c)){if(i.indexOf("data:")===0||i.indexOf("blob:")===0)continue;s==="style"?(i=a.serializeStyle(a.parseStyle(i),r.name),i.length||(i=null),r.attr(c,i),r.attr(s,i)):s==="tabindex"?(r.attr(c,i),r.attr(s,null)):r.attr(c,e.convertURL(i,s,r.name))}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const o=n[s];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(o.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new pn("br",1))}}),t},k8=e=>{const t=K1(e);t&&Un.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n.destroyed||n.focus()},100)},N8=e=>{const t=e.dom.getRoot();!e.inline&&(!Wl(e)||e.selection.getStart(!0)===t)&&mn(t).each(n=>{const s=n.getNode(),o=Gi(s)?mn(s).getOr(n):n;e.selection.setRng(o.toRange())})},T8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,OP(e),e.focus(!0),N8(e),e.nodeChanged({initial:!0});const t=j1(e);Ye(t)&&t.call(e,e),k8(e)},nw=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,A8=(e,t,n)=>{const s=[nw(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},sw=e=>{const t=nw(e),n=Yb(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";G.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(A8(e,s,n)).then(r).catch(r),a=v1(e);return a&&x8(e,a),i},R8=e=>{const t=e.getDoc(),n=e.getBody();RP(e),G1(e)||(t.body.spellcheck=!1,gp.setAttrib(n,"spellcheck","false")),e.quirks=E8(e),PP(e);const s=E1(e);s!==void 0&&(n.dir=s);const o=Y1(e);o&&e.on("BeforeSetContent",r=>{G.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},P8=e=>{io(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},bp=e=>{e.removed!==!0&&(P8(e),T8(e))},ow=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(gp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=Zb(e),e.readonly||(e.inline&&gp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=yU(e),e.schema=No(tw(e)),e.dom=ot(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:h1(e),referrerPolicy:Rf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=_8(e),e.serializer=FE(w8(e),e),e.selection=LE(e.dom,e.getWin(),e.serializer,e),e.annotator=YC(e),e.formatter=XE(e),e.undoManager=ZE(e),e._nodeChangeDispatcher=new hW(e),e._selectionOverrides=s8(e),UH(e),C6(e),GH(e),io(e)||(v6(e),v8(e));const o=gW(e);LH(e,o),jH(e),BU(e),g6(e);const r=AF(e);R8(e),r.fold(()=>{sw(e).then(()=>bp(e))},i=>{e.setProgressState(!0),sw(e).then(()=>{i().then(a=>{e.setProgressState(!1),bp(e),OE(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),bp(e),OE(e)})})})},rw=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=fU(w.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,ow(e)});n.srcdoc=e.iframeHTML}else ow(e)},Gc=ot.DOM,O8=(e,t,n,s)=>{const o=w.fromTag("iframe");return s.each(r=>fn(o,"tabindex",r)),Ss(o,n),Ss(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Vi(o,"tox-edit-area__iframe"),o},D8=e=>{let t=n1(e)+"<html><head>";Hb(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=s1(e),s=o1(e),o=e.translate(V1(e));return Vb(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Vb(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},B8=(e,t)=>{const n=e.translate("Rich Text Area"),s=rl(w.fromDom(e.getElement()),"tabindex").bind(Bk),o=O8(e.id,n,t1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=D8(e),Gc.add(t.iframeContainer,o)},I8=(e,t)=>{B8(e,t),t.editorContainer&&(Gc.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Gc.isHidden(t.editorContainer)),e.getElement().style.display="none",Gc.setAttrib(e.id,"aria-hidden","true"),rw(e)},iw=ot.DOM,$8=(e,t,n)=>{const s=gi.get(n),o=gi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=G.trim(n),s&&G.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ye(r.init)&&(r.init(e,o),t.push(n))}catch(r){rU(e,n,r)}}},L8=e=>e.replace(/^\-/,""),F8=e=>{const t=[];A(Pl(e),n=>{$8(e,t,L8(n))})},M8=e=>{const t=G.trim(qb(e)),n=e.ui.registry.getAll().icons,s=we(we({},vc.get("default").icons),vc.get(t).icons);bt(s,(o,r)=>{Fe(n,r)||e.ui.registry.addIcon(r,o)})},U8=e=>{const t=ti(e);if(be(t)){const n=br.get(t);e.theme=n(e,br.urls[t])||{},Ye(e.theme.init)&&e.theme.init(e,br.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},z8=e=>{const t=Pf(e),n=pi.get(t);e.model=n(e,pi.urls[t])},H8=e=>e.theme.renderUI(),V8=e=>{const t=e.getElement(),s=ti(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},aw=e=>({editorContainer:e,iframeContainer:e,api:{}}),W8=e=>{const t=iw.create("div");return iw.insertAfter(t,e),aw(t)},j8=e=>{const t=e.getElement();return e.inline?aw(null):W8(t)},q8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,be(ti(e))?H8(e):Ye(ti(e))?V8(e):j8(e)},K8=(e,t)=>{const n={show:b.from(t.show).getOr(Ie),hide:b.from(t.hide).getOr(Ie),isEnabled:b.from(t.isEnabled).getOr(it),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui=we(we({},e.ui),n)},G8=e=>{e.dispatch("ScriptsLoaded"),M8(e),U8(e),z8(e),F8(e);const t=q8(e);K8(e,b.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,cU(e),e.inline?rw(e):I8(e,n)},yr=ot.DOM,lw=e=>e.charAt(0)==="-",Y8=(e,t)=>{const n=Kb(t),s=b1(t);if(ns.hasCode(n)===!1&&n!=="en"){const o=Qs(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{nU(t,o,n)})}},X8=(e,t)=>{const n=ti(e);if(be(n)&&!lw(n)&&!Fe(br.urls,n)){const s=k1(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;br.load(n,o).catch(()=>{sU(e,o,n)})}},Q8=(e,t)=>{const n=Pf(e);if(n!=="plugin"&&!Fe(pi.urls,n)){const s=N1(e),o=be(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;pi.load(n,o).catch(()=>{oU(e,o,n)})}},Z8=e=>b.from(f1(e)).filter(Qs).map(t=>({url:t,name:b.none()})),cw=(e,t,n)=>b.from(t).filter(s=>Qs(s)&&!vc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),J8=(e,t,n)=>{const s=cw(t,"default",n),o=Z8(t).orThunk(()=>cw(t,qb(t),""));A(Gk([s,o]),r=>{e.add(r.url).catch(()=>{tU(t,r.url,r.name.getOrUndefined())})})},ej=(e,t)=>{const n=(s,o)=>{gi.load(s,o).catch(()=>{eU(e,o,s)})};bt(M1(e),(s,o)=>{n(o,s),e.options.set("plugins",Pl(e).concat(o))}),A(Pl(e),s=>{s=G.trim(s),s&&!gi.urls[s]&&!lw(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},tj=e=>{const t=ti(e);return!be(t)||Ne(br.get(t))},nj=e=>{const t=Pf(e);return Ne(pi.get(t))},sj=(e,t)=>{const n=no.ScriptLoader,s=()=>{!e.removed&&tj(e)&&nj(e)&&G8(e)};X8(e,t),Q8(e,t),Y8(n,e),J8(n,e,t),ej(e,t),n.loadQueue().then(s,s)},oj=(e,t)=>Fh.forElement(e,{contentCssCors:F1(t),referrerPolicy:Rf(t)}),rj=e=>{const t=e.id;ns.setCode(Kb(e));const n=()=>{yr.unbind(window,"ready",n),e.render()};if(!sr.Event.domLoaded){yr.bind(window,"ready",n);return}if(!e.getElement())return;const s=w.fromDom(e.getElement()),o=th(s);e.on("remove",()=>{ce(s.dom.attributes,i=>Gn(s,i.name)),Ss(s,o)}),e.ui.styleSheetLoader=oj(s,e),Of(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||yr.getParent(t,"form");r&&(e.formElement=r,O1(e)&&!Qu(e.getElement())&&(yr.insertAfter(yr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},yr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),D1(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=HE(e),e.notificationManager=zE(e),uR(e)&&e.on("GetContent",i=>{i.save&&(i.content=yr.encode(i.content))}),B1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),I1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),sj(e,e.suffix)},ij=(e,t)=>({sections:K(e),options:K(t)}),uw=yo().deviceType,fw=uw.isPhone(),aj=uw.isTablet(),Ua=e=>{if(Mt(e))return[];{const t=Nt(e)?e:e.split(/[ ,]/),n=U(t,zr);return H(n,Qs)}},lj=(e,t)=>{const n=vk(t,(s,o)=>R(e,o));return ij(n.t,n.f)},cj=(e,t,n={})=>{const s=e.sections(),o=lt(s,t).getOr({});return G.extend({},n,o)},Cp=(e,t)=>Fe(e.sections(),t),uj=(e,t)=>Cp(e,t)?e.sections()[t]:{},fj=(e,t)=>{const n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:lt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},s={menubar:!1};return we(we({},n),t?s:{})},dj=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,s):s},mj=(e,t)=>[].concat(Ua(e)).concat(Ua(t)),pj=(e,t,n,s)=>e&&Cp(t,"mobile")?s:n,gj=(e,t,n,s)=>{const o=Ua(n.forced_plugins),r=Ua(s.plugins),i=uj(t,"mobile"),a=i.plugins?Ua(i.plugins):r,c=pj(e,t,r,a),f=mj(o,c);return G.extend(s,{forced_plugins:o,plugins:f})},hj=(e,t)=>e&&Cp(t,"mobile"),bj=(e,t,n,s,o)=>{var r;const i=e?{mobile:fj((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=lj(["mobile"],Dc(i,o)),c=G.extend(n,s,a.options(),hj(e,a)?cj(a,"mobile"):{},{external_plugins:dj(s,a.options())});return gj(e,a,s,c)},Cj=(e,t)=>bj(fw||aj,fw,t,e,t),yj=(e,t)=>eM(e,t),vj=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{A("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},Ej=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return M(o,r=>Ne(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},xj=e=>{vj(e),Ej(e)},Sj=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(et.os.isMacOS()||et.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},wj=(e,t,n)=>{const s=w.fromDom(e.getRoot());return Jl(s,F.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),ec(s,F.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},_j=e=>{if(typeof e!="string"){const t=G.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},kj=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?wj(s,n.getRng(),t):t},Yc=(e,t)=>{const{content:n,details:s}=_j(t);am(e,{content:kj(e,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(o=>{const r=ZF(e,o.content,s);lm(e,r,o),e.addVisual()})},Nj=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Yc(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Yc(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Yc(e,s)},mceInsertContent:(t,n,s)=>{Yc(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},Tj={"font-size":"size","font-family":"face"},Aj=(e,t,n)=>{const s=r=>cl(r,e).orThunk(()=>Ct(r)==="font"?lt(Tj,e).bind(i=>rl(r,i)):b.none()),o=r=>tt(w.fromDom(t),r);return zd(w.fromDom(n),r=>s(r),o)},Rj=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Pj=(e,t)=>b.from(ot.DOM.getStyle(t,e,!0)),dw=e=>(t,n)=>b.from(n).map(w.fromDom).filter(Kn).bind(s=>Aj(e,t,s.dom).or(Pj(e,s.dom))).getOr(""),Oj=dw("font-size"),Dj=Ot(Rj,dw("font-family")),Bj=e=>mn(e.getBody()).map(t=>{const n=t.container();return ne(n)?n.parentNode:n}),Ij=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),$j=(e,t)=>Ij(e).orThunk(re(Bj,e)).map(w.fromDom).filter(Kn).bind(t),yp=(e,t)=>$j(e,_t(b.some,t)),mw=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=lR(e),o=cR(e);return o?o[n-1]||t:s[n-1]||t}else return t}else return t},Lj=e=>{const t=e.split(/\s*,\s*/);return U(t,n=>n.indexOf(" ")!==-1&&!(qn(n,'"')||qn(n,"'"))?`'${n}'`:n).join(",")},Fj=(e,t)=>{const n=mw(e,t);e.formatter.toggle("fontname",{value:Lj(n)}),e.nodeChanged()},Mj=e=>yp(e,t=>Dj(e.getBody(),t.dom)).getOr(""),Uj=(e,t)=>{e.formatter.toggle("fontsize",{value:mw(e,t)}),e.nodeChanged()},zj=e=>yp(e,t=>Oj(e.getBody(),t.dom)).getOr(""),Hj=e=>yp(e,t=>{const n=w.fromDom(e.getBody()),s=zd(t,r=>cl(r,"line-height"),re(tt,n)),o=()=>{const r=parseFloat(ws(t,"line-height")),i=parseFloat(ws(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),Vj=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},Wj=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{Fj(e,o)},FontSize:(n,s,o)=>{Uj(e,o)},LineHeight:(n,s,o)=>{Vj(e,o)},Lang:(n,s,o)=>{t(n,{value:o.code,customValue:o.customCode})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(be(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},jj=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>Mj(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>zj(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>Hj(e))},qj=e=>{Wj(e),jj(e)},Kj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Gj=e=>{e.editorCommands.addCommands({Indent:()=>{BH(e)},Outdent:()=>{Q0(e)}}),e.editorCommands.addCommands({Outdent:()=>K0(e)},"state")},Yj=e=>{const t=(n,s,o)=>{const r=be(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ft(r)&&be(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},Xj=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},Qj=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},Zj=e=>{Xj(e),Qj(e)},Jj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{sp(e)},mceInsertNewLine:(t,n,s)=>{sp(e,s)},InsertLineBreak:(t,n,s)=>{cS(e,s)}})},e5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>{if(r.nodeType===1&&o++===s)return e.selection.select(r),!1},e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),to);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},t5=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{dD(e,s)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},n5=e=>{xj(e),Sj(e),Kj(e),e5(e),Nj(e),Yj(e),Gj(e),Jj(e),Zj(e),qj(e),t5(e)};class pw{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():VO(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ye(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ye(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ye(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;bt(t,(o,r)=>{A(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const vr="data-mce-contenteditable",s5=(e,t,n)=>{ju(e,t)&&n===!1?ih(e,t):n&&Vi(e,t)},vp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Xc=(e,t)=>{e.dom.contentEditable=t?"true":"false"},o5=e=>{A(xn(e,'*[contenteditable="true"]'),t=>{fn(t,vr,"true"),Xc(t,!1)})},r5=e=>{A(xn(e,`*[${vr}="true"]`),t=>{Gn(t,vr),Xc(t,!0)})},i5=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},a5=e=>{e.selection.setRng(e.selection.getRng())},l5=(e,t)=>{const n=w.fromDom(e.getBody());s5(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),i5(e),e.readonly=!0,Xc(n,!1),o5(n)):(e.readonly=!1,Xc(n,!0),r5(n),vp(e,"StyleWithCSS",!1),vp(e,"enableInlineTableEditing",!1),vp(e,"enableObjectResizing",!1),uD(e)&&e.focus(),a5(e),e.nodeChanged())},Er=e=>e.readonly,gw=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Er(e)&&A(t,n=>{n.attr(vr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(vr,t=>{Er(e)&&A(t,n=>{n.attr("contenteditable",n.attr(vr))})}),e.serializer.addTempAttr(vr)},c5=e=>{e.serializer?gw(e):e.on("PreInit",()=>{gw(e)})},u5=e=>e.type==="click",f5=(e,t)=>er(t,"a",s=>tt(s,w.fromDom(e.getBody()))).bind(s=>rl(s,"href")),d5=(e,t)=>{if(u5(t)&&!ge.metaKeyPressed(t)){const n=w.fromDom(t.target);f5(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${Pk(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},m5=e=>{e.on("ShowCaret",t=>{Er(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Er(e)&&t.preventDefault()})},p5=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ep{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pt}static isNative(t){return!!p5[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=mf(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=pt),n){const r={func:n,removed:!1};o&&G.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return bt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=Ce(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,A(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else bt(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){return t=t.toLowerCase(),!(!this.bindings[t]||this.bindings[t].length===0)}}const za=e=>(e._eventDispatcher||(e._eventDispatcher=new Ep({scope:e,toggleEvent:(t,n)=>{Ep.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),xp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return mf(e.toLowerCase(),t!=null?t:{},s);const o=za(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent()}return o},on(e,t,n){return za(this).on(e,t,n)},off(e,t){return za(this).off(e,t)},once(e,t){return za(this).once(e,t)},hasEventListeners(e){return za(this).has(e)}},Qc=ot.DOM;let xr;const Zc=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=Qb(e);return n?(e.eventRoot||(e.eventRoot=Qc.select(n)[0]),e.eventRoot):e.getBody()},g5=e=>!e.hidden&&!Er(e),hw=(e,t,n)=>{g5(e)?e.dispatch(t,n):Er(e)&&d5(e,n)},bw=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const s=Zc(e,t);if(Qb(e)){if(xr||(xr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||xr&&(bt(xr,(o,r)=>{e.dom.unbind(Zc(e,r))}),xr=null)})),xr[t])return;n=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||Qc.isChildOf(r,c))&&hw(i[a],t,o)}},xr[t]=n,Qc.bind(s,t,n)}else n=o=>{hw(e,t,o)},Qc.bind(s,t,n),e.delegates[t]=n},Cw=ut(we({},xp),{bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{bw(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?bw(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Zc(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(bt(e.delegates,(s,o)=>{e.dom.unbind(Zc(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),h5=e=>be(e)?{value:e.split(/[ ,]/),valid:!0}:Xs(e,be)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},b5=e=>{const t=(()=>{switch(e){case"array":return Nt;case"boolean":return bs;case"function":return Ye;case"number":return yn;case"object":return ft;case"string":return be;case"string[]":return h5;case"object[]":return n=>Xs(n,ft);case"regexp":return n=>Bn(n,RegExp)}})();return n=>Sp(n,t,`The value must be a ${e}.`)},C5=e=>be(e.processor),yw=(e,t)=>{const n=sl(t.message)?"":`. ${t.message}`;return e+n},vw=e=>e.valid,Sp=(e,t,n="")=>{const s=t(e);return bs(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},y5=(e,t,n)=>{if(!Pt(t)){const s=Sp(t,n);if(vw(s))return s.value;console.error(yw(`Invalid default value passed for the "${e}" option`,s))}},v5=(e,t)=>{const n={},s={},o=(p,y,C)=>{const S=Sp(y,C);return vw(S)?(s[p]=S.value,!0):(console.warn(yw(`Invalid value passed for the ${p} option`,S)),!1)},r=(p,y)=>{const C=C5(y)?b5(y.processor):y.processor,S=y5(p,y.default,C);n[p]=ut(we({},y),{default:S,processor:C}),lt(s,p).orThunk(()=>lt(t,p)).each(E=>o(p,E,C))},i=p=>Fe(n,p);return{register:r,isRegistered:i,get:p=>lt(s,p).orThunk(()=>lt(n,p).map(y=>y.default)).getOrUndefined(),set:(p,y)=>{if(i(p)){const C=n[p];return C.immutable?(console.error(`"${p}" is an immutable option and cannot be updated`),!1):o(p,y,C.processor)}else return console.warn(`"${p}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:p=>{const y=i(p);return y&&delete s[p],y},isSet:p=>Fe(s,p)}},E5=["design","readonly"],Ew=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&l5(e,r.editorReadOnly),t.set(s),NP(e,s)},x5=(e,t,n,s)=>{if(s!==n.get()){if(!Fe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Ew(e,n,t,s):e.on("init",()=>Ew(e,n,t,s))}},S5=(e,t,n)=>{if(R(E5,t))throw new Error(`Cannot override default mode ${t}`);return ut(we({},e),{[t]:ut(we({},n),{deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}})})},w5=e=>{const t=$t("design"),n=$t({design:{activate:Ie,deactivate:Ie,editorReadOnly:!1},readonly:{activate:Ie,deactivate:Ie,editorReadOnly:!0}});return c5(e),m5(e),{isReadOnly:()=>Er(e),set:s=>x5(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(S5(n.get(),s,o))}}},wp=G.each,_p=G.explode,_5={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},xw=G.makeMap("alt,ctrl,shift,meta,access"),k5=e=>{let t;const n={},s=et.os.isMacOS()||et.os.isiOS();wp(_p(e.toLowerCase(),"+"),r=>{r in xw?n[r]=!0:/^[0-9]{2,}$/.test(r)?n.keyCode=parseInt(r,10):(n.charCode=r.charCodeAt(0),n.keyCode=_5[r]||r.toUpperCase().charCodeAt(0))});const o=[n.keyCode];for(t in xw)n[t]?o.push(t):n[t]=!1;return n.id=o.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Sw{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(wp(n.shortcuts,o=>{if(n.matchShortcut(s,o))return n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return wp(_p(G.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:G.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=G.map(_p(t,">"),k5);return r[r.length-1]=G.extend(r[r.length-1],{func:s,scope:o||this.editor}),G.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const N5=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(f,d)=>(p,y)=>f[p.toLowerCase()]=ut(we({},y),{type:d}),c=(f,d)=>s[f.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},T5=()=>{const e=N5();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Sr=ot.DOM,ww=G.extend,A5=G.each;class Jc{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,ww(this,Cw);const o=this;this.id=t,this.hidden=!1;const r=Cj(s.defaultOptions,n);this.options=v5(o,r),e1(o);const i=this.options.get;i("deprecation_warnings")&&IM(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=Rf(o);f&&(no.ScriptLoader._setReferrerPolicy(f),ot.DOM.styleSheetLoader._setReferrerPolicy(f)),nn.languageLoad=i("language_load"),nn.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new is(Hb(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Of(o),this.shortcuts=new Sw(this),this.editorCommands=new pw(this),n5(this);const d=i("cache_suffix");d&&(et.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:T5(),styleSheetLoader:void 0,show:Ie,hide:Ie,setEnabled:Ie,isEnabled:it},this.mode=w5(o),s.dispatch("SetupEditor",{editor:this});const p=W1(o);Ye(p)&&p.call(o,o)}render(){rj(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return fr(this)}translate(t){return ns.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(Ne(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:it,default:n})),!o.isSet(t)&&!Pt(n)?n:o.get(t)}hasPlugin(t,n){return R(Pl(this),t)?n?gi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Sr.show(t.getContainer()),Sr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Sr.hide(t.getContainer()),Sr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t){const n=this;let s=n.getElement(),o;if(n.removed)return"";if(s){t=t||{},t.load=!0;const r=Qu(s)?s.value:s.innerHTML;return o=n.setContent(r,t),t.element=s,t.no_events||n.dispatch("LoadContent",t),t.element=s=null,o}}save(t){const n=this;let s=n.getElement(),o,r;if(!(!s||!n.initialized||n.removed))return t=t||{},t.save=!0,t.element=s,o=t.content=n.getContent(t),t.no_events||n.dispatch("SaveContent",t),t.format==="raw"&&n.dispatch("RawSaveContent",t),o=t.content,Qu(s)?s.value=o:((t.is_removing||!n.inline)&&(s.innerHTML=o),(r=Sr.getParent(n.id,"form"))&&A5(r.elements,i=>{if(i.name===n.id)return i.value=o,!1})),t.element=s=null,t.set_dirty!==!1&&n.setDirty(!1),o}setContent(t,n){return hm(this,t,n)}getContent(t){return NM(this,t)}insertContent(t,n){n&&(t=ww({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?hm(this,this.startContent,{format:"raw"}):hm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=Sr.get(t.editorContainer||t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sr.get(this.id)),this.targetElm}getWin(){const t=this;let n;return t.contentWindow||(n=t.iframeElement,n&&(t.contentWindow=n.contentWindow)),t.contentWindow}getDoc(){const t=this;let n;return t.contentDocument||(n=t.getWin(),n&&(t.contentDocument=n.document)),t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement||(t?t.body:null)}convertURL(t,n,s){const o=this,r=o.options.get,i=q1(o);return Ye(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){yj(this,t)}remove(){MM(this)}destroy(t){UM(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const xi=ot.DOM,eu=G.each;let _w=!1,tu,gn=[];const nu=e=>{const t=e.type;eu(Lo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},kw=e=>{if(e!==_w){const t=ot.DOM;e?(t.bind(window,"resize",nu),t.bind(window,"scroll",nu)):(t.unbind(window,"resize",nu),t.unbind(window,"scroll",nu)),_w=e}},Nw=e=>{const t=gn;return gn=H(gn,n=>e!==n),Lo.activeEditor===e&&(Lo.activeEditor=gn.length>0?gn[0]:null),Lo.focusedEditor===e&&(Lo.focusedEditor=null),t.length!==gn.length},R5=e=>(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Nw(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e),P5=document.compatMode!=="CSS1Compat",Lo=ut(we({},xp),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.1",releaseDate:"2022-03-23",i18n:ns,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,s="";n=is.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,s=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(s=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(s=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new is(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new is(e.baseURL),e.suffix=s,nD(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&bt(s,(o,r)=>{nn.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,p)=>d.inline&&p.tagName.toLowerCase()in s,r=d=>{let p=d.id;return p||(p=lt(d,"name").filter(y=>!xi.get(y)).getOrThunk(xi.uniqueId),d.setAttribute("id",p)),p},i=d=>{const p=e[d];if(!!p)return p.apply(t,[])},a=d=>et.browser.isIE()||et.browser.isEdge()?(xc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):P5?(xc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):be(d.selector)?xi.select(d.selector):Ne(d.target)?[d.target]:[];let c=d=>{n=d};const f=()=>{let d=0;const p=[];let y;const C=(S,v,E)=>{const _=new Jc(S,v,t);p.push(_),_.on("init",()=>{++d===y.length&&c(p)}),_.targetElm=_.targetElm||E,_.render()};xi.unbind(window,"ready",f),i("onpageload"),y=tl(a(e)),G.each(y,S=>{R5(t.get(S.id))}),y=G.grep(y,S=>!t.get(S.id)),y.length===0?c([]):eu(y,S=>{o(e,S)?xc("Could not initialize inline editor on invalid inline target element",S):C(r(S),e,S)})};return xi.bind(window,"ready",f),new Promise(d=>{n?d(n):c=p=>{d(p)}})},get(e){return arguments.length===0?gn.slice(0):be(e)?de(gn,t=>t.id===e).getOr(null):yn(e)&&gn[e]?gn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&gn.push(e),kw(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),tu||(tu=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",tu))),e},createEditor(e,t){return this.add(new Jc(e,t,this))},remove(e){const t=this;let n,s;if(!e){for(n=gn.length-1;n>=0;n--)t.remove(gn[n]);return}if(be(e)){eu(xi.select(e),o=>{s=t.get(o.id),s&&t.remove(s)});return}return s=e,Ys(t.get(s.id))?null:(Nw(s)&&t.dispatch("RemoveEditor",{editor:s}),gn.length===0&&window.removeEventListener("beforeunload",tu),s.remove(),kw(gn.length>0),s)},execCommand(e,t,n){var s;const o=this,r=ft(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new Jc(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{eu(gn,e=>{e.save()})},addI18n:(e,t)=>{ns.add(e,t)},translate:e=>ns.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new is(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new is(this.baseURL)}});Lo.setup();const O5=(()=>{const e=To(),t=r=>({items:r,types:es(r),getType:i=>lt(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Tw=Math.min,Si=Math.max,su=Math.round,Aw=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=su(c/2)),f[1]==="c"&&(s+=su(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=su(i/2)),f[4]==="c"&&(s-=su(r/2)),wi(s,o,r,i)},D5=(e,t,n,s)=>{let o,r;for(r=0;r<s.length;r++)if(o=Aw(e,t,s[r]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return s[r];return null},B5=(e,t,n)=>wi(e.x-t,e.y-n,e.w+t*2,e.h+n*2),I5=(e,t)=>{const n=Si(e.x,t.x),s=Si(e.y,t.y),o=Tw(e.x+e.w,t.x+t.w),r=Tw(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:wi(n,s,o-n,r-s)},$5=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Si(0,t.x-s),d=Si(0,t.y-o),p=Si(0,r-a),y=Si(0,i-c);return s+=f,o+=d,n&&(r+=f,i+=d,s-=p,o-=y),r-=p,i-=y,wi(s,o,r-s,i-o)},wi=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),L5={inflate:B5,relativePosition:Aw,findBestRelativePosition:D5,intersect:I5,clamp:$5,create:wi,fromClientRect:e=>wi(e.left,e.top,e.width,e.height)},F5=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,d))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},M5=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((d,p)=>{const y=F5(d,p);t[r]=y.resolve,no.ScriptLoader.loadScript(i).then(()=>y.start(c),()=>y.reject(a))});return e[r]=f,f}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),U5=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Ha;try{const e="__storage_test__";Ha=window.localStorage,Ha.setItem(e,e),Ha.removeItem(e)}catch{Ha=U5()}var z5=Ha;const H5={geom:{Rect:L5},util:{Delay:Un,Tools:G,VK:ge,URI:is,EventDispatcher:Ep,Observable:xp,I18n:ns,LocalStorage:z5,ImageUploader:bU},dom:{EventUtils:sr,TreeWalker:zt,TextSeeker:or,DOMUtils:ot,ScriptLoader:no,RangeUtils:ui,Serializer:FE,StyleSheetLoader:Lh,ControlSelection:ny,BookmarkManager:ha,Selection:LE,Event:sr.Event},html:{Styles:df,Entities:_o,Node:pn,Schema:No,DomParser:mi,Writer:My,Serializer:Oo},Env:et,AddOnManager:nn,Annotator:YC,Formatter:XE,UndoManager:ZE,EditorCommands:pw,WindowManager:HE,NotificationManager:zE,EditorObservable:Cw,Shortcuts:Sw,Editor:Jc,FocusManager:_y,EditorManager:Lo,DOM:ot.DOM,ScriptLoader:no.ScriptLoader,PluginManager:gi,ThemeManager:br,ModelManager:pi,IconManager:vc,Resource:M5,FakeClipboard:O5,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},Rw=G.extend(Lo,H5),V5=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Rw),V5(Rw)})()})(hk);var Ip=hk.exports,Bq=(l,u)=>{const m=l.__vccOpts||l;for(const[g,h]of u)m[g]=h;return m};const Iq=q_({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://cdn.jsdelivr.net/npm/tinymce@%5E6.0.1"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,u){const m=M4(null);let g=null,h={};function x(){if(m.value){h=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},l.config);const oe="zh_CN",ve="en_US";if(h.language===ve)delete h.language,delete h.language_url;else{if(h.language||(h.language=oe),!h.language_url&&h.language===oe){let _e="https://cdn.jsdelivr.net/npm/";/unpkg.com/.test(l.url)&&(_e="https://unpkg.com/"),h.language_url=`${_e}@panhezeng/vue-tinymce@latest/dist/langs/${h.language}.js`}!h.font_formats&&h.language===oe&&(h.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(h.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${h.font_formats||""}`,h.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(h.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${h.font_formats||""}`,h.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(h.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${h.font_formats||""}`,h.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))}if(h.external_plugins||(h.external_plugins={}),!h.external_plugins.textindentoutdent){const _e=Object.keys(h);for(let Ve=_e.length-1;Ve>=0;Ve--){const rt=_e[Ve];if(rt&&typeof rt=="string"&&rt.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(h[rt]))){h.language===oe&&(h.external_plugins.textindentoutdentzhcn="https://cdn.jsdelivr.net/npm/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js"),h.external_plugins.textindentoutdent="https://cdn.jsdelivr.net/npm/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js";break}}}h.target=m.value,h.init_instance_callback=_e=>{m.value&&(g=_e,T(),g.on(l.updateEvent,O),typeof l.config.init_instance_callback=="function"&&l.config.init_instance_callback(g))}}}function T(){gu().then(()=>{m.value&&g&&g.getContent()!==l.modelValue&&g.setContent(l.modelValue)})}function O(){gu().then(()=>{if(m.value&&g){const oe=g.getContent();u.emit("update:modelValue",oe),u.emit("content-change",oe)}})}function L(){try{m.value&&g&&(g.plugins.autosave&&g.plugins.autosave.removeDraft(),Ip.PluginManager.remove("autosave"),g.remove(),g.destroy(),g=null)}catch{return}}function X(){gu().then(()=>{m.value&&(L(),x(),Ip.init(h))})}return hu(()=>l.config,()=>{X()},{deep:!0}),Y_(()=>{Ip.EditorManager.baseURL=l.url,X()}),X_(()=>{L()}),{editorElement:m}}}),$q={class:"vue-tinymce-comp"},Lq={ref:"editorElement"};function Fq(l,u,m,g,h,x){return xu(),ck("div",$q,[Jn("textarea",Lq,null,512)])}var $p=Bq(Iq,[["render",Fq]]);const Mq=Object.assign($p,{install:l=>{l.component($p.name,$p)}}),bk=Eq(Dq);bk.use(Mq);bk.mount("#app");
