(function(t,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue"),require("tinymce")):typeof define=="function"&&define.amd?define(["vue","tinymce"],l):(t=typeof globalThis<"u"?globalThis:t||self,t.VueTinymce=l(t.Vue,t.tinymce))})(this,function(t,l){"use strict";const _={class:"vue-tinymce-comp"},u=t.defineComponent({__name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E7.3.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(f,{emit:h}){const a=f,d=h,o=t.ref(null);let n=null,e={};function b(){if(o.value){e=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,promotion:!0,indentation:"2px",font_size_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl"},a.config);const i=a.baseUrl,r="zh_CN";if(e.language==="en_US"?(delete e.language,delete e.language_url):(e.language||(e.language=r),!e.language_url&&e.language===r&&(e.language_url=`${i}/@panhezeng/vue-tinymce@latest/dist/langs/${e.language}.js`),!e.font_family_formats&&e.language===r&&(e.font_family_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(e.font_family_formats=`微软雅黑="Microsoft YaHei";黑体=SimHei;宋体=SimSun;仿宋=FangSong;楷体=KaiTi;${e.font_family_formats||""}`,e.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(e.font_family_formats=`黑体=STHeiti;宋体=STSong;仿宋=STFangsong;楷体=STKaiti;${e.font_family_formats||""}`,e.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(e.font_family_formats=`黑体="Source Han Sans SC";宋体="Source Han Serif SC";${e.font_family_formats||""}`,e.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),e.external_plugins||(e.external_plugins={}),!e.external_plugins.textindentoutdent){const s=Object.keys(e);for(let m=s.length-1;m>=0;m--){const c=s[m];if(c&&typeof c=="string"&&c.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(e[c]))){e.language===r&&(e.external_plugins.textindentoutdentzhcn=`${i}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),e.external_plugins.textindentoutdent=`${i}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}e.target=o.value,e.init_instance_callback=s=>{o.value&&(n=s,g(),n.on(a.updateEvent,x),typeof a.config.init_instance_callback=="function"&&a.config.init_instance_callback(n)),v()}}}function g(){t.nextTick().then(()=>{o.value&&n&&n.getContent()!==a.modelValue&&n.setContent(a.modelValue)})}function x(){t.nextTick().then(()=>{if(o.value&&n){const i=n.getContent();d("update:modelValue",i),d("content-change",i)}})}function p(){try{o.value&&n&&(n.plugins.autosave&&n.plugins.autosave.removeDraft(),l.PluginManager.remove("autosave"),n.remove(),n.destroy(),n=null)}catch{return}}function y(){t.nextTick().then(()=>{o.value&&(p(),b(),l.init(e))})}t.watch(()=>a.modelValue,g),t.watch(()=>a.config,()=>{y()},{deep:!0});function v(){const i=document.querySelector(".tox-promotion");i&&(i.style.display="none")}return t.onMounted(()=>{l.EditorManager.baseURL=a.url,y()}),t.onBeforeUnmount(()=>{p()}),(i,r)=>(t.openBlock(),t.createElementBlock("div",_,[t.createElementVNode("textarea",{ref_key:"editorElement",ref:o},null,512)]))}});return Object.assign(u,{install:f=>{f.component(u.name||"",u)}})});
