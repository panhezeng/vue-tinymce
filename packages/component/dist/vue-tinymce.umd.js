(function(n,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("vue"),require("tinymce")):typeof define=="function"&&define.amd?define(["vue","tinymce"],r):(n=typeof globalThis!="undefined"?globalThis:n||self,n.VueTinymce=r(n.Vue,n.tinymce))})(this,function(n,r){"use strict";function _(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var c=_(r),h=(t,u)=>{const a=t.__vccOpts||t;for(const[i,e]of u)a[i]=e;return a};const y=n.defineComponent({name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://cdn.jsdelivr.net/npm/tinymce@%5E6.0.1"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(t,u){const a=n.ref(null);let i=null,e={};function m(){if(a.value){e=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,indentation:"2px",fontsize_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar1:"code | undo redo | fontsizeselect fontselect | blockquote hr | removeformat link unlink pastetext | pagebreak | charmap emoticons | fullscreen preview save print | insertfile image media template",toolbar2:"formatselect | bold italic underline strikethrough | forecolor backcolor | textindent textoutdent | indent outdent | alignleft aligncenter alignright alignjustify | bullist numlist | anchor codesample | ltr rtl"},t.config);const o="zh_CN",T="en_US";if(e.language===T)delete e.language,delete e.language_url;else{if(e.language||(e.language=o),!e.language_url&&e.language===o){let l="https://cdn.jsdelivr.net/npm/";/unpkg.com/.test(t.url)&&(l="https://unpkg.com/"),e.language_url=`${l}@panhezeng/vue-tinymce@latest/dist/langs/${e.language}.js`}!e.font_formats&&e.language===o&&(e.font_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(e.font_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${e.font_formats||""}`,e.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(e.font_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${e.font_formats||""}`,e.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(e.font_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${e.font_formats||""}`,e.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))}if(e.external_plugins||(e.external_plugins={}),!e.external_plugins.textindentoutdent){const l=Object.keys(e);for(let d=l.length-1;d>=0;d--){const s=l[d];if(s&&typeof s=="string"&&s.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(e[s]))){e.language===o&&(e.external_plugins.textindentoutdentzhcn="https://cdn.jsdelivr.net/npm/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js"),e.external_plugins.textindentoutdent="https://cdn.jsdelivr.net/npm/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js";break}}}e.target=a.value,e.init_instance_callback=l=>{a.value&&(i=l,k(),i.on(t.updateEvent,S),typeof t.config.init_instance_callback=="function"&&t.config.init_instance_callback(i))}}}function k(){n.nextTick().then(()=>{a.value&&i&&i.getContent()!==t.modelValue&&i.setContent(t.modelValue)})}function S(){n.nextTick().then(()=>{if(a.value&&i){const o=i.getContent();u.emit("update:modelValue",o),u.emit("content-change",o)}})}function g(){try{a.value&&i&&(i.plugins.autosave&&i.plugins.autosave.removeDraft(),c.default.PluginManager.remove("autosave"),i.remove(),i.destroy(),i=null)}catch{return}}function p(){n.nextTick().then(()=>{a.value&&(g(),m(),c.default.init(e))})}return n.watch(()=>t.config,()=>{p()},{deep:!0}),n.onMounted(()=>{c.default.EditorManager.baseURL=t.url,p()}),n.onBeforeUnmount(()=>{g()}),{editorElement:a}}}),v={class:"vue-tinymce-comp"},b={ref:"editorElement"};function x(t,u,a,i,e,m){return n.openBlock(),n.createElementBlock("div",v,[n.createElementVNode("textarea",b,null,512)])}var f=h(y,[["render",x]]);return Object.assign(f,{install:t=>{t.component(f.name,f)}})});
