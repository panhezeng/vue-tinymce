(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))h(v);new MutationObserver(v=>{for(const E of v)if(E.type==="childList")for(const x of E.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&h(x)}).observe(document,{childList:!0,subtree:!0});function d(v){const E={};return v.integrity&&(E.integrity=v.integrity),v.referrerPolicy&&(E.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?E.credentials="include":v.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function h(v){if(v.ep)return;v.ep=!0;const E=d(v);fetch(v.href,E)}})();/**
* @vue/shared v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ih(l){const u=Object.create(null);for(const d of l.split(","))u[d]=1;return d=>d in u}const Pt={},Yi=[],lo=()=>{},jY=()=>!1,wf=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&(l.charCodeAt(2)>122||l.charCodeAt(2)<97),Lh=l=>l.startsWith("onUpdate:"),xn=Object.assign,$h=(l,u)=>{const d=l.indexOf(u);d>-1&&l.splice(d,1)},qY=Object.prototype.hasOwnProperty,ht=(l,u)=>qY.call(l,u),Ye=Array.isArray,Xi=l=>xf(l)==="[object Map]",rT=l=>xf(l)==="[object Set]",Xe=l=>typeof l=="function",an=l=>typeof l=="string",nr=l=>typeof l=="symbol",Kt=l=>l!==null&&typeof l=="object",iT=l=>(Kt(l)||Xe(l))&&Xe(l.then)&&Xe(l.catch),aT=Object.prototype.toString,xf=l=>aT.call(l),KY=l=>xf(l).slice(8,-1),lT=l=>xf(l)==="[object Object]",Fh=l=>an(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,Dl=Ih(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kf=l=>{const u=Object.create(null);return d=>u[d]||(u[d]=l(d))},GY=/-(\w)/g,Yr=kf(l=>l.replace(GY,(u,d)=>d?d.toUpperCase():"")),YY=/\B([A-Z])/g,Qr=kf(l=>l.replace(YY,"-$1").toLowerCase()),cT=kf(l=>l.charAt(0).toUpperCase()+l.slice(1)),uh=kf(l=>l?`on${cT(l)}`:""),tr=(l,u)=>!Object.is(l,u),fh=(l,...u)=>{for(let d=0;d<l.length;d++)l[d](...u)},uT=(l,u,d,h=!1)=>{Object.defineProperty(l,u,{configurable:!0,enumerable:!1,writable:h,value:d})},XY=l=>{const u=parseFloat(l);return isNaN(u)?l:u};let TA;const fT=()=>TA||(TA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mh(l){if(Ye(l)){const u={};for(let d=0;d<l.length;d++){const h=l[d],v=an(h)?eX(h):Mh(h);if(v)for(const E in v)u[E]=v[E]}return u}else if(an(l)||Kt(l))return l}const ZY=/;(?![^(]*\))/g,QY=/:([^]+)/,JY=/\/\*[^]*?\*\//g;function eX(l){const u={};return l.replace(JY,"").split(ZY).forEach(d=>{if(d){const h=d.split(QY);h.length>1&&(u[h[0].trim()]=h[1].trim())}}),u}function Uh(l){let u="";if(an(l))u=l;else if(Ye(l))for(let d=0;d<l.length;d++){const h=Uh(l[d]);h&&(u+=h+" ")}else if(Kt(l))for(const d in l)l[d]&&(u+=d+" ");return u.trim()}const tX="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nX=Ih(tX);function dT(l){return!!l||l===""}const mT=l=>!!(l&&l.__v_isRef===!0),pT=l=>an(l)?l:l==null?"":Ye(l)||Kt(l)&&(l.toString===aT||!Xe(l.toString))?mT(l)?pT(l.value):JSON.stringify(l,gT,2):String(l),gT=(l,u)=>mT(u)?gT(l,u.value):Xi(u)?{[`Map(${u.size})`]:[...u.entries()].reduce((d,[h,v],E)=>(d[dh(h,E)+" =>"]=v,d),{})}:rT(u)?{[`Set(${u.size})`]:[...u.values()].map(d=>dh(d))}:nr(u)?dh(u):Kt(u)&&!Ye(u)&&!lT(u)?String(u):u,dh=(l,u="")=>{var d;return nr(l)?`Symbol(${(d=l.description)!=null?d:u})`:l};/**
* @vue/reactivity v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cs;class sX{constructor(u=!1){this.detached=u,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=cs,!u&&cs&&(this.index=(cs.scopes||(cs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let u,d;if(this.scopes)for(u=0,d=this.scopes.length;u<d;u++)this.scopes[u].pause();for(u=0,d=this.effects.length;u<d;u++)this.effects[u].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let u,d;if(this.scopes)for(u=0,d=this.scopes.length;u<d;u++)this.scopes[u].resume();for(u=0,d=this.effects.length;u<d;u++)this.effects[u].resume()}}run(u){if(this._active){const d=cs;try{return cs=this,u()}finally{cs=d}}}on(){cs=this}off(){cs=this.parent}stop(u){if(this._active){let d,h;for(d=0,h=this.effects.length;d<h;d++)this.effects[d].stop();for(d=0,h=this.cleanups.length;d<h;d++)this.cleanups[d]();if(this.scopes)for(d=0,h=this.scopes.length;d<h;d++)this.scopes[d].stop(!0);if(!this.detached&&this.parent&&!u){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function oX(){return cs}let Nt;const mh=new WeakSet;class hT{constructor(u){this.fn=u,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,cs&&cs.active&&cs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mh.has(this)&&(mh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=Ol,Ol=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,RA(this),CT(this);const u=Nt,d=Ls;Nt=this,Ls=!0;try{return this.fn()}finally{yT(this),Nt=u,Ls=d,this.flags&=-3}}stop(){if(this.flags&1){for(let u=this.deps;u;u=u.nextDep)Vh(u);this.deps=this.depsTail=void 0,RA(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wh(this)&&this.run()}get dirty(){return wh(this)}}let bT=0,Ol;function Hh(){bT++}function zh(){if(--bT>0)return;let l;for(;Ol;){let u=Ol;for(Ol=void 0;u;){const d=u.nextEffect;if(u.nextEffect=void 0,u.flags&=-9,u.flags&1)try{u.trigger()}catch(h){l||(l=h)}u=d}}if(l)throw l}function CT(l){for(let u=l.deps;u;u=u.nextDep)u.version=-1,u.prevActiveLink=u.dep.activeLink,u.dep.activeLink=u}function yT(l){let u,d=l.depsTail;for(let h=d;h;h=h.prevDep)h.version===-1?(h===d&&(d=h.prevDep),Vh(h),rX(h)):u=h,h.dep.activeLink=h.prevActiveLink,h.prevActiveLink=void 0;l.deps=u,l.depsTail=d}function wh(l){for(let u=l.deps;u;u=u.nextDep)if(u.dep.version!==u.version||u.dep.computed&&vT(u.dep.computed)||u.dep.version!==u.version)return!0;return!!l._dirty}function vT(l){if(l.flags&4&&!(l.flags&16)||(l.flags&=-17,l.globalVersion===Ml))return;l.globalVersion=Ml;const u=l.dep;if(l.flags|=2,u.version>0&&!l.isSSR&&!wh(l)){l.flags&=-3;return}const d=Nt,h=Ls;Nt=l,Ls=!0;try{CT(l);const v=l.fn(l._value);(u.version===0||tr(v,l._value))&&(l._value=v,u.version++)}catch(v){throw u.version++,v}finally{Nt=d,Ls=h,yT(l),l.flags&=-3}}function Vh(l){const{dep:u,prevSub:d,nextSub:h}=l;if(d&&(d.nextSub=h,l.prevSub=void 0),h&&(h.prevSub=d,l.nextSub=void 0),u.subs===l&&(u.subs=d),!u.subs&&u.computed){u.computed.flags&=-5;for(let v=u.computed.deps;v;v=v.nextDep)Vh(v)}}function rX(l){const{prevDep:u,nextDep:d}=l;u&&(u.nextDep=d,l.prevDep=void 0),d&&(d.prevDep=u,l.nextDep=void 0)}let Ls=!0;const ET=[];function sr(){ET.push(Ls),Ls=!1}function or(){const l=ET.pop();Ls=l===void 0?!0:l}function RA(l){const{cleanup:u}=l;if(l.cleanup=void 0,u){const d=Nt;Nt=void 0;try{u()}finally{Nt=d}}}let Ml=0;class Wh{constructor(u){this.computed=u,this.version=0,this.activeLink=void 0,this.subs=void 0}track(u){if(!Nt||!Ls||Nt===this.computed)return;let d=this.activeLink;if(d===void 0||d.sub!==Nt)d=this.activeLink={dep:this,sub:Nt,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},Nt.deps?(d.prevDep=Nt.depsTail,Nt.depsTail.nextDep=d,Nt.depsTail=d):Nt.deps=Nt.depsTail=d,Nt.flags&4&&ST(d);else if(d.version===-1&&(d.version=this.version,d.nextDep)){const h=d.nextDep;h.prevDep=d.prevDep,d.prevDep&&(d.prevDep.nextDep=h),d.prevDep=Nt.depsTail,d.nextDep=void 0,Nt.depsTail.nextDep=d,Nt.depsTail=d,Nt.deps===d&&(Nt.deps=h)}return d}trigger(u){this.version++,Ml++,this.notify(u)}notify(u){Hh();try{for(let d=this.subs;d;d=d.prevSub)d.sub.notify()}finally{zh()}}}function ST(l){const u=l.dep.computed;if(u&&!l.dep.subs){u.flags|=20;for(let h=u.deps;h;h=h.nextDep)ST(h)}const d=l.dep.subs;d!==l&&(l.prevSub=d,d&&(d.nextSub=l)),l.dep.subs=l}const xh=new WeakMap,Gr=Symbol(""),kh=Symbol(""),Ul=Symbol("");function Dn(l,u,d){if(Ls&&Nt){let h=xh.get(l);h||xh.set(l,h=new Map);let v=h.get(d);v||h.set(d,v=new Wh),v.track()}}function Ao(l,u,d,h,v,E){const x=xh.get(l);if(!x){Ml++;return}const O=U=>{U&&U.trigger()};if(Hh(),u==="clear")x.forEach(O);else{const U=Ye(l),ie=U&&Fh(d);if(U&&d==="length"){const j=Number(h);x.forEach((oe,Se)=>{(Se==="length"||Se===Ul||!nr(Se)&&Se>=j)&&O(oe)})}else switch(d!==void 0&&O(x.get(d)),ie&&O(x.get(Ul)),u){case"add":U?ie&&O(x.get("length")):(O(x.get(Gr)),Xi(l)&&O(x.get(kh)));break;case"delete":U||(O(x.get(Gr)),Xi(l)&&O(x.get(kh)));break;case"set":Xi(l)&&O(x.get(Gr));break}}zh()}function Ki(l){const u=bt(l);return u===l?u:(Dn(u,"iterate",Ul),$s(l)?u:u.map(Un))}function jh(l){return Dn(l=bt(l),"iterate",Ul),l}const iX={__proto__:null,[Symbol.iterator](){return ph(this,Symbol.iterator,Un)},concat(...l){return Ki(this).concat(...l.map(u=>Ye(u)?Ki(u):u))},entries(){return ph(this,"entries",l=>(l[1]=Un(l[1]),l))},every(l,u){return ko(this,"every",l,u,void 0,arguments)},filter(l,u){return ko(this,"filter",l,u,d=>d.map(Un),arguments)},find(l,u){return ko(this,"find",l,u,Un,arguments)},findIndex(l,u){return ko(this,"findIndex",l,u,void 0,arguments)},findLast(l,u){return ko(this,"findLast",l,u,Un,arguments)},findLastIndex(l,u){return ko(this,"findLastIndex",l,u,void 0,arguments)},forEach(l,u){return ko(this,"forEach",l,u,void 0,arguments)},includes(...l){return gh(this,"includes",l)},indexOf(...l){return gh(this,"indexOf",l)},join(l){return Ki(this).join(l)},lastIndexOf(...l){return gh(this,"lastIndexOf",l)},map(l,u){return ko(this,"map",l,u,void 0,arguments)},pop(){return Tl(this,"pop")},push(...l){return Tl(this,"push",l)},reduce(l,...u){return PA(this,"reduce",l,u)},reduceRight(l,...u){return PA(this,"reduceRight",l,u)},shift(){return Tl(this,"shift")},some(l,u){return ko(this,"some",l,u,void 0,arguments)},splice(...l){return Tl(this,"splice",l)},toReversed(){return Ki(this).toReversed()},toSorted(l){return Ki(this).toSorted(l)},toSpliced(...l){return Ki(this).toSpliced(...l)},unshift(...l){return Tl(this,"unshift",l)},values(){return ph(this,"values",Un)}};function ph(l,u,d){const h=jh(l),v=h[u]();return h!==l&&!$s(l)&&(v._next=v.next,v.next=()=>{const E=v._next();return E.value&&(E.value=d(E.value)),E}),v}const aX=Array.prototype;function ko(l,u,d,h,v,E){const x=jh(l),O=x!==l&&!$s(l),U=x[u];if(U!==aX[u]){const oe=U.apply(l,E);return O?Un(oe):oe}let ie=d;x!==l&&(O?ie=function(oe,Se){return d.call(this,Un(oe),Se,l)}:d.length>2&&(ie=function(oe,Se){return d.call(this,oe,Se,l)}));const j=U.call(x,ie,h);return O&&v?v(j):j}function PA(l,u,d,h){const v=jh(l);let E=d;return v!==l&&($s(l)?d.length>3&&(E=function(x,O,U){return d.call(this,x,O,U,l)}):E=function(x,O,U){return d.call(this,x,Un(O),U,l)}),v[u](E,...h)}function gh(l,u,d){const h=bt(l);Dn(h,"iterate",Ul);const v=h[u](...d);return(v===-1||v===!1)&&Yh(d[0])?(d[0]=bt(d[0]),h[u](...d)):v}function Tl(l,u,d=[]){sr(),Hh();const h=bt(l)[u].apply(l,d);return zh(),or(),h}const lX=Ih("__proto__,__v_isRef,__isVue"),_T=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(nr));function cX(l){nr(l)||(l=String(l));const u=bt(this);return Dn(u,"has",l),u.hasOwnProperty(l)}class wT{constructor(u=!1,d=!1){this._isReadonly=u,this._isShallow=d}get(u,d,h){const v=this._isReadonly,E=this._isShallow;if(d==="__v_isReactive")return!v;if(d==="__v_isReadonly")return v;if(d==="__v_isShallow")return E;if(d==="__v_raw")return h===(v?E?SX:AT:E?NT:kT).get(u)||Object.getPrototypeOf(u)===Object.getPrototypeOf(h)?u:void 0;const x=Ye(u);if(!v){let U;if(x&&(U=iX[d]))return U;if(d==="hasOwnProperty")return cX}const O=Reflect.get(u,d,Pn(u)?u:h);return(nr(d)?_T.has(d):lX(d))||(v||Dn(u,"get",d),E)?O:Pn(O)?x&&Fh(d)?O:O.value:Kt(O)?v?TT(O):Af(O):O}}class xT extends wT{constructor(u=!1){super(!1,u)}set(u,d,h,v){let E=u[d];if(!this._isShallow){const U=Xr(E);if(!$s(h)&&!Xr(h)&&(E=bt(E),h=bt(h)),!Ye(u)&&Pn(E)&&!Pn(h))return U?!1:(E.value=h,!0)}const x=Ye(u)&&Fh(d)?Number(d)<u.length:ht(u,d),O=Reflect.set(u,d,h,Pn(u)?u:v);return u===bt(v)&&(x?tr(h,E)&&Ao(u,"set",d,h):Ao(u,"add",d,h)),O}deleteProperty(u,d){const h=ht(u,d);u[d];const v=Reflect.deleteProperty(u,d);return v&&h&&Ao(u,"delete",d,void 0),v}has(u,d){const h=Reflect.has(u,d);return(!nr(d)||!_T.has(d))&&Dn(u,"has",d),h}ownKeys(u){return Dn(u,"iterate",Ye(u)?"length":Gr),Reflect.ownKeys(u)}}class uX extends wT{constructor(u=!1){super(!0,u)}set(u,d){return!0}deleteProperty(u,d){return!0}}const fX=new xT,dX=new uX,mX=new xT(!0);const qh=l=>l,Nf=l=>Reflect.getPrototypeOf(l);function cf(l,u,d=!1,h=!1){l=l.__v_raw;const v=bt(l),E=bt(u);d||(tr(u,E)&&Dn(v,"get",u),Dn(v,"get",E));const{has:x}=Nf(v),O=h?qh:d?Xh:Un;if(x.call(v,u))return O(l.get(u));if(x.call(v,E))return O(l.get(E));l!==v&&l.get(u)}function uf(l,u=!1){const d=this.__v_raw,h=bt(d),v=bt(l);return u||(tr(l,v)&&Dn(h,"has",l),Dn(h,"has",v)),l===v?d.has(l):d.has(l)||d.has(v)}function ff(l,u=!1){return l=l.__v_raw,!u&&Dn(bt(l),"iterate",Gr),Reflect.get(l,"size",l)}function DA(l,u=!1){!u&&!$s(l)&&!Xr(l)&&(l=bt(l));const d=bt(this);return Nf(d).has.call(d,l)||(d.add(l),Ao(d,"add",l,l)),this}function OA(l,u,d=!1){!d&&!$s(u)&&!Xr(u)&&(u=bt(u));const h=bt(this),{has:v,get:E}=Nf(h);let x=v.call(h,l);x||(l=bt(l),x=v.call(h,l));const O=E.call(h,l);return h.set(l,u),x?tr(u,O)&&Ao(h,"set",l,u):Ao(h,"add",l,u),this}function BA(l){const u=bt(this),{has:d,get:h}=Nf(u);let v=d.call(u,l);v||(l=bt(l),v=d.call(u,l)),h&&h.call(u,l);const E=u.delete(l);return v&&Ao(u,"delete",l,void 0),E}function IA(){const l=bt(this),u=l.size!==0,d=l.clear();return u&&Ao(l,"clear",void 0,void 0),d}function df(l,u){return function(h,v){const E=this,x=E.__v_raw,O=bt(x),U=u?qh:l?Xh:Un;return!l&&Dn(O,"iterate",Gr),x.forEach((ie,j)=>h.call(v,U(ie),U(j),E))}}function mf(l,u,d){return function(...h){const v=this.__v_raw,E=bt(v),x=Xi(E),O=l==="entries"||l===Symbol.iterator&&x,U=l==="keys"&&x,ie=v[l](...h),j=d?qh:u?Xh:Un;return!u&&Dn(E,"iterate",U?kh:Gr),{next(){const{value:oe,done:Se}=ie.next();return Se?{value:oe,done:Se}:{value:O?[j(oe[0]),j(oe[1])]:j(oe),done:Se}},[Symbol.iterator](){return this}}}}function Zo(l){return function(...u){return l==="delete"?!1:l==="clear"?void 0:this}}function pX(){const l={get(E){return cf(this,E)},get size(){return ff(this)},has:uf,add:DA,set:OA,delete:BA,clear:IA,forEach:df(!1,!1)},u={get(E){return cf(this,E,!1,!0)},get size(){return ff(this)},has:uf,add(E){return DA.call(this,E,!0)},set(E,x){return OA.call(this,E,x,!0)},delete:BA,clear:IA,forEach:df(!1,!0)},d={get(E){return cf(this,E,!0)},get size(){return ff(this,!0)},has(E){return uf.call(this,E,!0)},add:Zo("add"),set:Zo("set"),delete:Zo("delete"),clear:Zo("clear"),forEach:df(!0,!1)},h={get(E){return cf(this,E,!0,!0)},get size(){return ff(this,!0)},has(E){return uf.call(this,E,!0)},add:Zo("add"),set:Zo("set"),delete:Zo("delete"),clear:Zo("clear"),forEach:df(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{l[E]=mf(E,!1,!1),d[E]=mf(E,!0,!1),u[E]=mf(E,!1,!0),h[E]=mf(E,!0,!0)}),[l,d,u,h]}const[gX,hX,bX,CX]=pX();function Kh(l,u){const d=u?l?CX:bX:l?hX:gX;return(h,v,E)=>v==="__v_isReactive"?!l:v==="__v_isReadonly"?l:v==="__v_raw"?h:Reflect.get(ht(d,v)&&v in h?d:h,v,E)}const yX={get:Kh(!1,!1)},vX={get:Kh(!1,!0)},EX={get:Kh(!0,!1)};const kT=new WeakMap,NT=new WeakMap,AT=new WeakMap,SX=new WeakMap;function _X(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wX(l){return l.__v_skip||!Object.isExtensible(l)?0:_X(KY(l))}function Af(l){return Xr(l)?l:Gh(l,!1,fX,yX,kT)}function xX(l){return Gh(l,!1,mX,vX,NT)}function TT(l){return Gh(l,!0,dX,EX,AT)}function Gh(l,u,d,h,v){if(!Kt(l)||l.__v_raw&&!(u&&l.__v_isReactive))return l;const E=v.get(l);if(E)return E;const x=wX(l);if(x===0)return l;const O=new Proxy(l,x===2?h:d);return v.set(l,O),O}function Bl(l){return Xr(l)?Bl(l.__v_raw):!!(l&&l.__v_isReactive)}function Xr(l){return!!(l&&l.__v_isReadonly)}function $s(l){return!!(l&&l.__v_isShallow)}function Yh(l){return l?!!l.__v_raw:!1}function bt(l){const u=l&&l.__v_raw;return u?bt(u):l}function kX(l){return!ht(l,"__v_skip")&&Object.isExtensible(l)&&uT(l,"__v_skip",!0),l}const Un=l=>Kt(l)?Af(l):l,Xh=l=>Kt(l)?TT(l):l;function Pn(l){return l?l.__v_isRef===!0:!1}function NX(l){return AX(l,!1)}function AX(l,u){return Pn(l)?l:new TX(l,u)}class TX{constructor(u,d){this.dep=new Wh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=d?u:bt(u),this._value=d?u:Un(u),this.__v_isShallow=d}get value(){return this.dep.track(),this._value}set value(u){const d=this._rawValue,h=this.__v_isShallow||$s(u)||Xr(u);u=h?u:bt(u),tr(u,d)&&(this._rawValue=u,this._value=h?u:Un(u),this.dep.trigger())}}function RT(l){return Pn(l)?l.value:l}const RX={get:(l,u,d)=>u==="__v_raw"?l:RT(Reflect.get(l,u,d)),set:(l,u,d,h)=>{const v=l[u];return Pn(v)&&!Pn(d)?(v.value=d,!0):Reflect.set(l,u,d,h)}};function PT(l){return Bl(l)?l:new Proxy(l,RX)}class PX{constructor(u,d,h){this.fn=u,this.setter=d,this._value=void 0,this.dep=new Wh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ml-1,this.effect=this,this.__v_isReadonly=!d,this.isSSR=h}notify(){this.flags|=16,Nt!==this&&this.dep.notify()}get value(){const u=this.dep.track();return vT(this),u&&(u.version=this.dep.version),this._value}set value(u){this.setter&&this.setter(u)}}function DX(l,u,d=!1){let h,v;return Xe(l)?h=l:(h=l.get,v=l.set),new PX(h,v,d)}const pf={},yf=new WeakMap;let Kr;function OX(l,u=!1,d=Kr){if(d){let h=yf.get(d);h||yf.set(d,h=[]),h.push(l)}}function BX(l,u,d=Pt){const{immediate:h,deep:v,once:E,scheduler:x,augmentJob:O,call:U}=d,ie=ke=>v?ke:$s(ke)||v===!1||v===0?er(ke,1):er(ke);let j,oe,Se,Be,tt=!1,Ze=!1;if(Pn(l)?(oe=()=>l.value,tt=$s(l)):Bl(l)?(oe=()=>ie(l),tt=!0):Ye(l)?(Ze=!0,tt=l.some(ke=>Bl(ke)||$s(ke)),oe=()=>l.map(ke=>{if(Pn(ke))return ke.value;if(Bl(ke))return ie(ke);if(Xe(ke))return U?U(ke,2):ke()})):Xe(l)?u?oe=U?()=>U(l,2):l:oe=()=>{if(Se){sr();try{Se()}finally{or()}}const ke=Kr;Kr=j;try{return U?U(l,3,[Be]):l(Be)}finally{Kr=ke}}:oe=lo,u&&v){const ke=oe,Bt=v===!0?1/0:v;oe=()=>er(ke(),Bt)}const $t=oX(),nt=()=>{j.stop(),$t&&$h($t.effects,j)};if(E)if(u){const ke=u;u=(...Bt)=>{ke(...Bt),nt()}}else{const ke=oe;oe=()=>{ke(),nt()}}let wt=Ze?new Array(l.length).fill(pf):pf;const ae=ke=>{if(!(!(j.flags&1)||!j.dirty&&!ke))if(u){const Bt=j.run();if(v||tt||(Ze?Bt.some((rt,vt)=>tr(rt,wt[vt])):tr(Bt,wt))){Se&&Se();const rt=Kr;Kr=j;try{const vt=[Bt,wt===pf?void 0:Ze&&wt[0]===pf?[]:wt,Be];U?U(u,3,vt):u(...vt),wt=Bt}finally{Kr=rt}}}else j.run()};return O&&O(ae),j=new hT(oe),j.scheduler=x?()=>x(ae,!1):ae,Be=ke=>OX(ke,!1,j),Se=j.onStop=()=>{const ke=yf.get(j);if(ke){if(U)U(ke,4);else for(const Bt of ke)Bt();yf.delete(j)}},u?h?ae(!0):wt=j.run():x?x(ae.bind(null,!0),!0):j.run(),nt.pause=j.pause.bind(j),nt.resume=j.resume.bind(j),nt.stop=nt,nt}function er(l,u=1/0,d){if(u<=0||!Kt(l)||l.__v_skip||(d=d||new Set,d.has(l)))return l;if(d.add(l),u--,Pn(l))er(l.value,u,d);else if(Ye(l))for(let h=0;h<l.length;h++)er(l[h],u,d);else if(rT(l)||Xi(l))l.forEach(h=>{er(h,u,d)});else if(lT(l)){for(const h in l)er(l[h],u,d);for(const h of Object.getOwnPropertySymbols(l))Object.prototype.propertyIsEnumerable.call(l,h)&&er(l[h],u,d)}return l}/**
* @vue/runtime-core v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wl(l,u,d,h){try{return h?l(...h):l()}catch(v){Tf(v,u,d)}}function co(l,u,d,h){if(Xe(l)){const v=Wl(l,u,d,h);return v&&iT(v)&&v.catch(E=>{Tf(E,u,d)}),v}if(Ye(l)){const v=[];for(let E=0;E<l.length;E++)v.push(co(l[E],u,d,h));return v}}function Tf(l,u,d,h=!0){const v=u?u.vnode:null,{errorHandler:E,throwUnhandledErrorInProduction:x}=u&&u.appContext.config||Pt;if(u){let O=u.parent;const U=u.proxy,ie=`https://vuejs.org/error-reference/#runtime-${d}`;for(;O;){const j=O.ec;if(j){for(let oe=0;oe<j.length;oe++)if(j[oe](l,U,ie)===!1)return}O=O.parent}if(E){sr(),Wl(E,null,10,[l,U,ie]),or();return}}IX(l,d,v,h,x)}function IX(l,u,d,h=!0,v=!1){if(v)throw l;console.error(l)}let Hl=!1,Nh=!1;const Hn=[];let oo=0;const Zi=[];let Qo=null,Gi=0;const DT=Promise.resolve();let Zh=null;function gf(l){const u=Zh||DT;return l?u.then(this?l.bind(this):l):u}function LX(l){let u=Hl?oo+1:0,d=Hn.length;for(;u<d;){const h=u+d>>>1,v=Hn[h],E=zl(v);E<l||E===l&&v.flags&2?u=h+1:d=h}return u}function Qh(l){if(!(l.flags&1)){const u=zl(l),d=Hn[Hn.length-1];!d||!(l.flags&2)&&u>=zl(d)?Hn.push(l):Hn.splice(LX(u),0,l),l.flags|=1,OT()}}function OT(){!Hl&&!Nh&&(Nh=!0,Zh=DT.then(IT))}function $X(l){Ye(l)?Zi.push(...l):Qo&&l.id===-1?Qo.splice(Gi+1,0,l):l.flags&1||(Zi.push(l),l.flags|=1),OT()}function LA(l,u,d=Hl?oo+1:0){for(;d<Hn.length;d++){const h=Hn[d];if(h&&h.flags&2){if(l&&h.id!==l.uid)continue;Hn.splice(d,1),d--,h.flags&4&&(h.flags&=-2),h(),h.flags&=-2}}}function BT(l){if(Zi.length){const u=[...new Set(Zi)].sort((d,h)=>zl(d)-zl(h));if(Zi.length=0,Qo){Qo.push(...u);return}for(Qo=u,Gi=0;Gi<Qo.length;Gi++){const d=Qo[Gi];d.flags&4&&(d.flags&=-2),d.flags&8||d(),d.flags&=-2}Qo=null,Gi=0}}const zl=l=>l.id==null?l.flags&2?-1:1/0:l.id;function IT(l){Nh=!1,Hl=!0;try{for(oo=0;oo<Hn.length;oo++){const u=Hn[oo];u&&!(u.flags&8)&&(u.flags&4&&(u.flags&=-2),Wl(u,u.i,u.i?15:14),u.flags&=-2)}}finally{for(;oo<Hn.length;oo++){const u=Hn[oo];u&&(u.flags&=-2)}oo=0,Hn.length=0,BT(),Hl=!1,Zh=null,(Hn.length||Zi.length)&&IT()}}let ao=null,LT=null;function vf(l){const u=ao;return ao=l,LT=l&&l.type.__scopeId||null,u}function FX(l,u=ao,d){if(!u||l._n)return l;const h=(...v)=>{h._d&&WA(-1);const E=vf(u);let x;try{x=l(...v)}finally{vf(E),h._d&&WA(1)}return x};return h._n=!0,h._c=!0,h._d=!0,h}function jr(l,u,d,h){const v=l.dirs,E=u&&u.dirs;for(let x=0;x<v.length;x++){const O=v[x];E&&(O.oldValue=E[x].value);let U=O.dir[h];U&&(sr(),co(U,d,8,[l.el,O,l,u]),or())}}const MX=Symbol("_vte"),UX=l=>l.__isTeleport;function Jh(l,u){l.shapeFlag&6&&l.component?(l.transition=u,Jh(l.component.subTree,u)):l.shapeFlag&128?(l.ssContent.transition=u.clone(l.ssContent),l.ssFallback.transition=u.clone(l.ssFallback)):l.transition=u}/*! #__NO_SIDE_EFFECTS__ */function $T(l,u){return Xe(l)?xn({name:l.name},u,{setup:l}):l}function FT(l){l.ids=[l.ids[0]+l.ids[2]+++"-",0,0]}function Ah(l,u,d,h,v=!1){if(Ye(l)){l.forEach((tt,Ze)=>Ah(tt,u&&(Ye(u)?u[Ze]:u),d,h,v));return}if(Il(h)&&!v)return;const E=h.shapeFlag&4?sb(h.component):h.el,x=v?null:E,{i:O,r:U}=l,ie=u&&u.r,j=O.refs===Pt?O.refs={}:O.refs,oe=O.setupState,Se=bt(oe),Be=oe===Pt?()=>!1:tt=>ht(Se,tt);if(ie!=null&&ie!==U&&(an(ie)?(j[ie]=null,Be(ie)&&(oe[ie]=null)):Pn(ie)&&(ie.value=null)),Xe(U))Wl(U,O,12,[x,j]);else{const tt=an(U),Ze=Pn(U);if(tt||Ze){const $t=()=>{if(l.f){const nt=tt?Be(U)?oe[U]:j[U]:U.value;v?Ye(nt)&&$h(nt,E):Ye(nt)?nt.includes(E)||nt.push(E):tt?(j[U]=[E],Be(U)&&(oe[U]=j[U])):(U.value=[E],l.k&&(j[l.k]=U.value))}else tt?(j[U]=x,Be(U)&&(oe[U]=x)):Ze&&(U.value=x,l.k&&(j[l.k]=x))};x?($t.id=-1,ls($t,d)):$t()}}}const Il=l=>!!l.type.__asyncLoader,MT=l=>l.type.__isKeepAlive;function HX(l,u){UT(l,"a",u)}function zX(l,u){UT(l,"da",u)}function UT(l,u,d=zn){const h=l.__wdc||(l.__wdc=()=>{let v=d;for(;v;){if(v.isDeactivated)return;v=v.parent}return l()});if(Rf(u,h,d),d){let v=d.parent;for(;v&&v.parent;)MT(v.parent.vnode)&&VX(h,u,d,v),v=v.parent}}function VX(l,u,d,h){const v=Rf(u,l,h,!0);VT(()=>{$h(h[u],v)},d)}function Rf(l,u,d=zn,h=!1){if(d){const v=d[l]||(d[l]=[]),E=u.__weh||(u.__weh=(...x)=>{sr();const O=jl(d),U=co(u,d,l,x);return O(),or(),U});return h?v.unshift(E):v.push(E),E}}const Ro=l=>(u,d=zn)=>{(!Of||l==="sp")&&Rf(l,(...h)=>u(...h),d)},WX=Ro("bm"),HT=Ro("m"),jX=Ro("bu"),qX=Ro("u"),zT=Ro("bum"),VT=Ro("um"),KX=Ro("sp"),GX=Ro("rtg"),YX=Ro("rtc");function XX(l,u=zn){Rf("ec",l,u)}const ZX=Symbol.for("v-ndc"),Th=l=>l?fR(l)?sb(l):Th(l.parent):null,Ll=xn(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>Th(l.parent),$root:l=>Th(l.root),$host:l=>l.ce,$emit:l=>l.emit,$options:l=>eb(l),$forceUpdate:l=>l.f||(l.f=()=>{Qh(l.update)}),$nextTick:l=>l.n||(l.n=gf.bind(l.proxy)),$watch:l=>yZ.bind(l)}),hh=(l,u)=>l!==Pt&&!l.__isScriptSetup&&ht(l,u),QX={get({_:l},u){if(u==="__v_skip")return!0;const{ctx:d,setupState:h,data:v,props:E,accessCache:x,type:O,appContext:U}=l;let ie;if(u[0]!=="$"){const Be=x[u];if(Be!==void 0)switch(Be){case 1:return h[u];case 2:return v[u];case 4:return d[u];case 3:return E[u]}else{if(hh(h,u))return x[u]=1,h[u];if(v!==Pt&&ht(v,u))return x[u]=2,v[u];if((ie=l.propsOptions[0])&&ht(ie,u))return x[u]=3,E[u];if(d!==Pt&&ht(d,u))return x[u]=4,d[u];Rh&&(x[u]=0)}}const j=Ll[u];let oe,Se;if(j)return u==="$attrs"&&Dn(l.attrs,"get",""),j(l);if((oe=O.__cssModules)&&(oe=oe[u]))return oe;if(d!==Pt&&ht(d,u))return x[u]=4,d[u];if(Se=U.config.globalProperties,ht(Se,u))return Se[u]},set({_:l},u,d){const{data:h,setupState:v,ctx:E}=l;return hh(v,u)?(v[u]=d,!0):h!==Pt&&ht(h,u)?(h[u]=d,!0):ht(l.props,u)||u[0]==="$"&&u.slice(1)in l?!1:(E[u]=d,!0)},has({_:{data:l,setupState:u,accessCache:d,ctx:h,appContext:v,propsOptions:E}},x){let O;return!!d[x]||l!==Pt&&ht(l,x)||hh(u,x)||(O=E[0])&&ht(O,x)||ht(h,x)||ht(Ll,x)||ht(v.config.globalProperties,x)},defineProperty(l,u,d){return d.get!=null?l._.accessCache[u]=0:ht(d,"value")&&this.set(l,u,d.value,null),Reflect.defineProperty(l,u,d)}};function $A(l){return Ye(l)?l.reduce((u,d)=>(u[d]=null,u),{}):l}let Rh=!0;function JX(l){const u=eb(l),d=l.proxy,h=l.ctx;Rh=!1,u.beforeCreate&&FA(u.beforeCreate,l,"bc");const{data:v,computed:E,methods:x,watch:O,provide:U,inject:ie,created:j,beforeMount:oe,mounted:Se,beforeUpdate:Be,updated:tt,activated:Ze,deactivated:$t,beforeDestroy:nt,beforeUnmount:wt,destroyed:ae,unmounted:ke,render:Bt,renderTracked:rt,renderTriggered:vt,errorCaptured:ln,serverPrefetch:Dt,expose:dt,inheritAttrs:ee,components:Ke,directives:vn,filters:Fs}=u;if(ie&&eZ(ie,h,null),x)for(const Tt in x){const G=x[Tt];Xe(G)&&(h[Tt]=G.bind(d))}if(v){const Tt=v.call(d,d);Kt(Tt)&&(l.data=Af(Tt))}if(Rh=!0,E)for(const Tt in E){const G=E[Tt],It=Xe(G)?G.bind(d,d):Xe(G.get)?G.get.bind(d,d):lo,rr=!Xe(G)&&Xe(G.set)?G.set.bind(d):lo,fe=mR({get:It,set:rr});Object.defineProperty(h,Tt,{enumerable:!0,configurable:!0,get:()=>fe.value,set:kn=>fe.value=kn})}if(O)for(const Tt in O)WT(O[Tt],h,d,Tt);if(U){const Tt=Xe(U)?U.call(d):U;Reflect.ownKeys(Tt).forEach(G=>{iZ(G,Tt[G])})}j&&FA(j,l,"c");function At(Tt,G){Ye(G)?G.forEach(It=>Tt(It.bind(d))):G&&Tt(G.bind(d))}if(At(WX,oe),At(HT,Se),At(jX,Be),At(qX,tt),At(HX,Ze),At(zX,$t),At(XX,ln),At(YX,rt),At(GX,vt),At(zT,wt),At(VT,ke),At(KX,Dt),Ye(dt))if(dt.length){const Tt=l.exposed||(l.exposed={});dt.forEach(G=>{Object.defineProperty(Tt,G,{get:()=>d[G],set:It=>d[G]=It})})}else l.exposed||(l.exposed={});Bt&&l.render===lo&&(l.render=Bt),ee!=null&&(l.inheritAttrs=ee),Ke&&(l.components=Ke),vn&&(l.directives=vn),Dt&&FT(l)}function eZ(l,u,d=lo){Ye(l)&&(l=Ph(l));for(const h in l){const v=l[h];let E;Kt(v)?"default"in v?E=hf(v.from||h,v.default,!0):E=hf(v.from||h):E=hf(v),Pn(E)?Object.defineProperty(u,h,{enumerable:!0,configurable:!0,get:()=>E.value,set:x=>E.value=x}):u[h]=E}}function FA(l,u,d){co(Ye(l)?l.map(h=>h.bind(u.proxy)):l.bind(u.proxy),u,d)}function WT(l,u,d,h){let v=h.includes(".")?oR(d,h):()=>d[h];if(an(l)){const E=u[l];Xe(E)&&$l(v,E)}else if(Xe(l))$l(v,l.bind(d));else if(Kt(l))if(Ye(l))l.forEach(E=>WT(E,u,d,h));else{const E=Xe(l.handler)?l.handler.bind(d):u[l.handler];Xe(E)&&$l(v,E,l)}}function eb(l){const u=l.type,{mixins:d,extends:h}=u,{mixins:v,optionsCache:E,config:{optionMergeStrategies:x}}=l.appContext,O=E.get(u);let U;return O?U=O:!v.length&&!d&&!h?U=u:(U={},v.length&&v.forEach(ie=>Ef(U,ie,x,!0)),Ef(U,u,x)),Kt(u)&&E.set(u,U),U}function Ef(l,u,d,h=!1){const{mixins:v,extends:E}=u;E&&Ef(l,E,d,!0),v&&v.forEach(x=>Ef(l,x,d,!0));for(const x in u)if(!(h&&x==="expose")){const O=tZ[x]||d&&d[x];l[x]=O?O(l[x],u[x]):u[x]}return l}const tZ={data:MA,props:UA,emits:UA,methods:Pl,computed:Pl,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Pl,directives:Pl,watch:sZ,provide:MA,inject:nZ};function MA(l,u){return u?l?function(){return xn(Xe(l)?l.call(this,this):l,Xe(u)?u.call(this,this):u)}:u:l}function nZ(l,u){return Pl(Ph(l),Ph(u))}function Ph(l){if(Ye(l)){const u={};for(let d=0;d<l.length;d++)u[l[d]]=l[d];return u}return l}function Mn(l,u){return l?[...new Set([].concat(l,u))]:u}function Pl(l,u){return l?xn(Object.create(null),l,u):u}function UA(l,u){return l?Ye(l)&&Ye(u)?[...new Set([...l,...u])]:xn(Object.create(null),$A(l),$A(u??{})):u}function sZ(l,u){if(!l)return u;if(!u)return l;const d=xn(Object.create(null),l);for(const h in u)d[h]=Mn(l[h],u[h]);return d}function jT(){return{app:null,config:{isNativeTag:jY,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oZ=0;function rZ(l,u){return function(h,v=null){Xe(h)||(h=xn({},h)),v!=null&&!Kt(v)&&(v=null);const E=jT(),x=new WeakSet,O=[];let U=!1;const ie=E.app={_uid:oZ++,_component:h,_props:v,_container:null,_context:E,_instance:null,version:zZ,get config(){return E.config},set config(j){},use(j,...oe){return x.has(j)||(j&&Xe(j.install)?(x.add(j),j.install(ie,...oe)):Xe(j)&&(x.add(j),j(ie,...oe))),ie},mixin(j){return E.mixins.includes(j)||E.mixins.push(j),ie},component(j,oe){return oe?(E.components[j]=oe,ie):E.components[j]},directive(j,oe){return oe?(E.directives[j]=oe,ie):E.directives[j]},mount(j,oe,Se){if(!U){const Be=ie._ceVNode||To(h,v);return Be.appContext=E,Se===!0?Se="svg":Se===!1&&(Se=void 0),oe&&u?u(Be,j):l(Be,j,Se),U=!0,ie._container=j,j.__vue_app__=ie,sb(Be.component)}},onUnmount(j){O.push(j)},unmount(){U&&(co(O,ie._instance,16),l(null,ie._container),delete ie._container.__vue_app__)},provide(j,oe){return E.provides[j]=oe,ie},runWithContext(j){const oe=Qi;Qi=ie;try{return j()}finally{Qi=oe}}};return ie}}let Qi=null;function iZ(l,u){if(zn){let d=zn.provides;const h=zn.parent&&zn.parent.provides;h===d&&(d=zn.provides=Object.create(h)),d[l]=u}}function hf(l,u,d=!1){const h=zn||ao;if(h||Qi){const v=Qi?Qi._context.provides:h?h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:void 0;if(v&&l in v)return v[l];if(arguments.length>1)return d&&Xe(u)?u.call(h&&h.proxy):u}}const qT={},KT=()=>Object.create(qT),GT=l=>Object.getPrototypeOf(l)===qT;function aZ(l,u,d,h=!1){const v={},E=KT();l.propsDefaults=Object.create(null),YT(l,u,v,E);for(const x in l.propsOptions[0])x in v||(v[x]=void 0);d?l.props=h?v:xX(v):l.type.props?l.props=v:l.props=E,l.attrs=E}function lZ(l,u,d,h){const{props:v,attrs:E,vnode:{patchFlag:x}}=l,O=bt(v),[U]=l.propsOptions;let ie=!1;if((h||x>0)&&!(x&16)){if(x&8){const j=l.vnode.dynamicProps;for(let oe=0;oe<j.length;oe++){let Se=j[oe];if(Pf(l.emitsOptions,Se))continue;const Be=u[Se];if(U)if(ht(E,Se))Be!==E[Se]&&(E[Se]=Be,ie=!0);else{const tt=Yr(Se);v[tt]=Dh(U,O,tt,Be,l,!1)}else Be!==E[Se]&&(E[Se]=Be,ie=!0)}}}else{YT(l,u,v,E)&&(ie=!0);let j;for(const oe in O)(!u||!ht(u,oe)&&((j=Qr(oe))===oe||!ht(u,j)))&&(U?d&&(d[oe]!==void 0||d[j]!==void 0)&&(v[oe]=Dh(U,O,oe,void 0,l,!0)):delete v[oe]);if(E!==O)for(const oe in E)(!u||!ht(u,oe))&&(delete E[oe],ie=!0)}ie&&Ao(l.attrs,"set","")}function YT(l,u,d,h){const[v,E]=l.propsOptions;let x=!1,O;if(u)for(let U in u){if(Dl(U))continue;const ie=u[U];let j;v&&ht(v,j=Yr(U))?!E||!E.includes(j)?d[j]=ie:(O||(O={}))[j]=ie:Pf(l.emitsOptions,U)||(!(U in h)||ie!==h[U])&&(h[U]=ie,x=!0)}if(E){const U=bt(d),ie=O||Pt;for(let j=0;j<E.length;j++){const oe=E[j];d[oe]=Dh(v,U,oe,ie[oe],l,!ht(ie,oe))}}return x}function Dh(l,u,d,h,v,E){const x=l[d];if(x!=null){const O=ht(x,"default");if(O&&h===void 0){const U=x.default;if(x.type!==Function&&!x.skipFactory&&Xe(U)){const{propsDefaults:ie}=v;if(d in ie)h=ie[d];else{const j=jl(v);h=ie[d]=U.call(null,u),j()}}else h=U;v.ce&&v.ce._setProp(d,h)}x[0]&&(E&&!O?h=!1:x[1]&&(h===""||h===Qr(d))&&(h=!0))}return h}const cZ=new WeakMap;function XT(l,u,d=!1){const h=d?cZ:u.propsCache,v=h.get(l);if(v)return v;const E=l.props,x={},O=[];let U=!1;if(!Xe(l)){const j=oe=>{U=!0;const[Se,Be]=XT(oe,u,!0);xn(x,Se),Be&&O.push(...Be)};!d&&u.mixins.length&&u.mixins.forEach(j),l.extends&&j(l.extends),l.mixins&&l.mixins.forEach(j)}if(!E&&!U)return Kt(l)&&h.set(l,Yi),Yi;if(Ye(E))for(let j=0;j<E.length;j++){const oe=Yr(E[j]);HA(oe)&&(x[oe]=Pt)}else if(E)for(const j in E){const oe=Yr(j);if(HA(oe)){const Se=E[j],Be=x[oe]=Ye(Se)||Xe(Se)?{type:Se}:xn({},Se),tt=Be.type;let Ze=!1,$t=!0;if(Ye(tt))for(let nt=0;nt<tt.length;++nt){const wt=tt[nt],ae=Xe(wt)&&wt.name;if(ae==="Boolean"){Ze=!0;break}else ae==="String"&&($t=!1)}else Ze=Xe(tt)&&tt.name==="Boolean";Be[0]=Ze,Be[1]=$t,(Ze||ht(Be,"default"))&&O.push(oe)}}const ie=[x,O];return Kt(l)&&h.set(l,ie),ie}function HA(l){return l[0]!=="$"&&!Dl(l)}const ZT=l=>l[0]==="_"||l==="$stable",tb=l=>Ye(l)?l.map(io):[io(l)],uZ=(l,u,d)=>{if(u._n)return u;const h=FX((...v)=>tb(u(...v)),d);return h._c=!1,h},QT=(l,u,d)=>{const h=l._ctx;for(const v in l){if(ZT(v))continue;const E=l[v];if(Xe(E))u[v]=uZ(v,E,h);else if(E!=null){const x=tb(E);u[v]=()=>x}}},JT=(l,u)=>{const d=tb(u);l.slots.default=()=>d},eR=(l,u,d)=>{for(const h in u)(d||h!=="_")&&(l[h]=u[h])},fZ=(l,u,d)=>{const h=l.slots=KT();if(l.vnode.shapeFlag&32){const v=u._;v?(eR(h,u,d),d&&uT(h,"_",v,!0)):QT(u,h)}else u&&JT(l,u)},dZ=(l,u,d)=>{const{vnode:h,slots:v}=l;let E=!0,x=Pt;if(h.shapeFlag&32){const O=u._;O?d&&O===1?E=!1:eR(v,u,d):(E=!u.$stable,QT(u,v)),x=u}else u&&(JT(l,u),x={default:1});if(E)for(const O in v)!ZT(O)&&x[O]==null&&delete v[O]},ls=kZ;function mZ(l){return pZ(l)}function pZ(l,u){const d=fT();d.__VUE__=!0;const{insert:h,remove:v,patchProp:E,createElement:x,createText:O,createComment:U,setText:ie,setElementText:j,parentNode:oe,nextSibling:Se,setScopeId:Be=lo,insertStaticContent:tt}=l,Ze=(P,R,z,q=null,N=null,de=null,Ee=void 0,W=null,ye=!!R.dynamicChildren)=>{if(P===R)return;P&&!Rl(P,R)&&(q=Ct(P),kn(P,N,de,!0),P=null),R.patchFlag===-2&&(ye=!1,R.dynamicChildren=null);const{type:re,ref:Fe,shapeFlag:me}=R;switch(re){case Df:$t(P,R,z,q);break;case Zr:nt(P,R,z,q);break;case yh:P==null&&wt(R,z,q,Ee);break;case ro:Ke(P,R,z,q,N,de,Ee,W,ye);break;default:me&1?Bt(P,R,z,q,N,de,Ee,W,ye):me&6?vn(P,R,z,q,N,de,Ee,W,ye):(me&64||me&128)&&re.process(P,R,z,q,N,de,Ee,W,ye,ar)}Fe!=null&&N&&Ah(Fe,P&&P.ref,de,R||P,!R)},$t=(P,R,z,q)=>{if(P==null)h(R.el=O(R.children),z,q);else{const N=R.el=P.el;R.children!==P.children&&ie(N,R.children)}},nt=(P,R,z,q)=>{P==null?h(R.el=U(R.children||""),z,q):R.el=P.el},wt=(P,R,z,q)=>{[P.el,P.anchor]=tt(P.children,R,z,q,P.el,P.anchor)},ae=({el:P,anchor:R},z,q)=>{let N;for(;P&&P!==R;)N=Se(P),h(P,z,q),P=N;h(R,z,q)},ke=({el:P,anchor:R})=>{let z;for(;P&&P!==R;)z=Se(P),v(P),P=z;v(R)},Bt=(P,R,z,q,N,de,Ee,W,ye)=>{R.type==="svg"?Ee="svg":R.type==="math"&&(Ee="mathml"),P==null?rt(R,z,q,N,de,Ee,W,ye):Dt(P,R,N,de,Ee,W,ye)},rt=(P,R,z,q,N,de,Ee,W)=>{let ye,re;const{props:Fe,shapeFlag:me,transition:Ae,dirs:He}=P;if(ye=P.el=x(P.type,de,Fe&&Fe.is,Fe),me&8?j(ye,P.children):me&16&&ln(P.children,ye,null,q,N,bh(P,de),Ee,W),He&&jr(P,null,q,"created"),vt(ye,P,P.scopeId,Ee,q),Fe){for(const ot in Fe)ot!=="value"&&!Dl(ot)&&E(ye,ot,null,Fe[ot],de,q);"value"in Fe&&E(ye,"value",null,Fe.value,de),(re=Fe.onVnodeBeforeMount)&&so(re,q,P)}He&&jr(P,null,q,"beforeMount");const ze=gZ(N,Ae);ze&&Ae.beforeEnter(ye),h(ye,R,z),((re=Fe&&Fe.onVnodeMounted)||ze||He)&&ls(()=>{re&&so(re,q,P),ze&&Ae.enter(ye),He&&jr(P,null,q,"mounted")},N)},vt=(P,R,z,q,N)=>{if(z&&Be(P,z),q)for(let de=0;de<q.length;de++)Be(P,q[de]);if(N){let de=N.subTree;if(R===de||iR(de.type)&&(de.ssContent===R||de.ssFallback===R)){const Ee=N.vnode;vt(P,Ee,Ee.scopeId,Ee.slotScopeIds,N.parent)}}},ln=(P,R,z,q,N,de,Ee,W,ye=0)=>{for(let re=ye;re<P.length;re++){const Fe=P[re]=W?Jo(P[re]):io(P[re]);Ze(null,Fe,R,z,q,N,de,Ee,W)}},Dt=(P,R,z,q,N,de,Ee)=>{const W=R.el=P.el;let{patchFlag:ye,dynamicChildren:re,dirs:Fe}=R;ye|=P.patchFlag&16;const me=P.props||Pt,Ae=R.props||Pt;let He;if(z&&qr(z,!1),(He=Ae.onVnodeBeforeUpdate)&&so(He,z,R,P),Fe&&jr(R,P,z,"beforeUpdate"),z&&qr(z,!0),(me.innerHTML&&Ae.innerHTML==null||me.textContent&&Ae.textContent==null)&&j(W,""),re?dt(P.dynamicChildren,re,W,z,q,bh(R,N),de):Ee||G(P,R,W,null,z,q,bh(R,N),de,!1),ye>0){if(ye&16)ee(W,me,Ae,z,N);else if(ye&2&&me.class!==Ae.class&&E(W,"class",null,Ae.class,N),ye&4&&E(W,"style",me.style,Ae.style,N),ye&8){const ze=R.dynamicProps;for(let ot=0;ot<ze.length;ot++){const it=ze[ot],cn=me[it],Qt=Ae[it];(Qt!==cn||it==="value")&&E(W,it,cn,Qt,N,z)}}ye&1&&P.children!==R.children&&j(W,R.children)}else!Ee&&re==null&&ee(W,me,Ae,z,N);((He=Ae.onVnodeUpdated)||Fe)&&ls(()=>{He&&so(He,z,R,P),Fe&&jr(R,P,z,"updated")},q)},dt=(P,R,z,q,N,de,Ee)=>{for(let W=0;W<R.length;W++){const ye=P[W],re=R[W],Fe=ye.el&&(ye.type===ro||!Rl(ye,re)||ye.shapeFlag&70)?oe(ye.el):z;Ze(ye,re,Fe,null,q,N,de,Ee,!0)}},ee=(P,R,z,q,N)=>{if(R!==z){if(R!==Pt)for(const de in R)!Dl(de)&&!(de in z)&&E(P,de,R[de],null,N,q);for(const de in z){if(Dl(de))continue;const Ee=z[de],W=R[de];Ee!==W&&de!=="value"&&E(P,de,W,Ee,N,q)}"value"in z&&E(P,"value",R.value,z.value,N)}},Ke=(P,R,z,q,N,de,Ee,W,ye)=>{const re=R.el=P?P.el:O(""),Fe=R.anchor=P?P.anchor:O("");let{patchFlag:me,dynamicChildren:Ae,slotScopeIds:He}=R;He&&(W=W?W.concat(He):He),P==null?(h(re,z,q),h(Fe,z,q),ln(R.children||[],z,Fe,N,de,Ee,W,ye)):me>0&&me&64&&Ae&&P.dynamicChildren?(dt(P.dynamicChildren,Ae,z,N,de,Ee,W),(R.key!=null||N&&R===N.subTree)&&tR(P,R,!0)):G(P,R,z,Fe,N,de,Ee,W,ye)},vn=(P,R,z,q,N,de,Ee,W,ye)=>{R.slotScopeIds=W,P==null?R.shapeFlag&512?N.ctx.activate(R,z,q,Ee,ye):Fs(R,z,q,N,de,Ee,ye):Te(P,R,ye)},Fs=(P,R,z,q,N,de,Ee)=>{const W=P.component=LZ(P,q,N);if(MT(P)&&(W.ctx.renderer=ar),$Z(W,!1,Ee),W.asyncDep){if(N&&N.registerDep(W,At,Ee),!P.el){const ye=W.subTree=To(Zr);nt(null,ye,R,z)}}else At(W,P,R,z,N,de,Ee)},Te=(P,R,z)=>{const q=R.component=P.component;if(wZ(P,R,z))if(q.asyncDep&&!q.asyncResolved){Tt(q,R,z);return}else q.next=R,q.update();else R.el=P.el,q.vnode=R},At=(P,R,z,q,N,de,Ee)=>{const W=()=>{if(P.isMounted){let{next:me,bu:Ae,u:He,parent:ze,vnode:ot}=P;{const sn=nR(P);if(sn){me&&(me.el=ot.el,Tt(P,me,Ee)),sn.asyncDep.then(()=>{P.isUnmounted||W()});return}}let it=me,cn;qr(P,!1),me?(me.el=ot.el,Tt(P,me,Ee)):me=ot,Ae&&fh(Ae),(cn=me.props&&me.props.onVnodeBeforeUpdate)&&so(cn,ze,me,ot),qr(P,!0);const Qt=Ch(P),nn=P.subTree;P.subTree=Qt,Ze(nn,Qt,oe(nn.el),Ct(nn),P,N,de),me.el=Qt.el,it===null&&xZ(P,Qt.el),He&&ls(He,N),(cn=me.props&&me.props.onVnodeUpdated)&&ls(()=>so(cn,ze,me,ot),N)}else{let me;const{el:Ae,props:He}=R,{bm:ze,m:ot,parent:it,root:cn,type:Qt}=P,nn=Il(R);if(qr(P,!1),ze&&fh(ze),!nn&&(me=He&&He.onVnodeBeforeMount)&&so(me,it,R),qr(P,!0),Ae&&na){const sn=()=>{P.subTree=Ch(P),na(Ae,P.subTree,P,N,null)};nn&&Qt.__asyncHydrate?Qt.__asyncHydrate(Ae,P,sn):sn()}else{cn.ce&&cn.ce._injectChildStyle(Qt);const sn=P.subTree=Ch(P);Ze(null,sn,z,q,P,N,de),R.el=sn.el}if(ot&&ls(ot,N),!nn&&(me=He&&He.onVnodeMounted)){const sn=R;ls(()=>so(me,it,sn),N)}(R.shapeFlag&256||it&&Il(it.vnode)&&it.vnode.shapeFlag&256)&&P.a&&ls(P.a,N),P.isMounted=!0,R=z=q=null}};P.scope.on();const ye=P.effect=new hT(W);P.scope.off();const re=P.update=ye.run.bind(ye),Fe=P.job=ye.runIfDirty.bind(ye);Fe.i=P,Fe.id=P.uid,ye.scheduler=()=>Qh(Fe),qr(P,!0),re()},Tt=(P,R,z)=>{R.component=P;const q=P.vnode.props;P.vnode=R,P.next=null,lZ(P,R.props,q,z),dZ(P,R.children,z),sr(),LA(P),or()},G=(P,R,z,q,N,de,Ee,W,ye=!1)=>{const re=P&&P.children,Fe=P?P.shapeFlag:0,me=R.children,{patchFlag:Ae,shapeFlag:He}=R;if(Ae>0){if(Ae&128){rr(re,me,z,q,N,de,Ee,W,ye);return}else if(Ae&256){It(re,me,z,q,N,de,Ee,W,ye);return}}He&8?(Fe&16&&st(re,N,de),me!==re&&j(z,me)):Fe&16?He&16?rr(re,me,z,q,N,de,Ee,W,ye):st(re,N,de,!0):(Fe&8&&j(z,""),He&16&&ln(me,z,q,N,de,Ee,W,ye))},It=(P,R,z,q,N,de,Ee,W,ye)=>{P=P||Yi,R=R||Yi;const re=P.length,Fe=R.length,me=Math.min(re,Fe);let Ae;for(Ae=0;Ae<me;Ae++){const He=R[Ae]=ye?Jo(R[Ae]):io(R[Ae]);Ze(P[Ae],He,z,null,N,de,Ee,W,ye)}re>Fe?st(P,N,de,!0,!1,me):ln(R,z,q,N,de,Ee,W,ye,me)},rr=(P,R,z,q,N,de,Ee,W,ye)=>{let re=0;const Fe=R.length;let me=P.length-1,Ae=Fe-1;for(;re<=me&&re<=Ae;){const He=P[re],ze=R[re]=ye?Jo(R[re]):io(R[re]);if(Rl(He,ze))Ze(He,ze,z,null,N,de,Ee,W,ye);else break;re++}for(;re<=me&&re<=Ae;){const He=P[me],ze=R[Ae]=ye?Jo(R[Ae]):io(R[Ae]);if(Rl(He,ze))Ze(He,ze,z,null,N,de,Ee,W,ye);else break;me--,Ae--}if(re>me){if(re<=Ae){const He=Ae+1,ze=He<Fe?R[He].el:q;for(;re<=Ae;)Ze(null,R[re]=ye?Jo(R[re]):io(R[re]),z,ze,N,de,Ee,W,ye),re++}}else if(re>Ae)for(;re<=me;)kn(P[re],N,de,!0),re++;else{const He=re,ze=re,ot=new Map;for(re=ze;re<=Ae;re++){const Et=R[re]=ye?Jo(R[re]):io(R[re]);Et.key!=null&&ot.set(Et.key,re)}let it,cn=0;const Qt=Ae-ze+1;let nn=!1,sn=0;const Ht=new Array(Qt);for(re=0;re<Qt;re++)Ht[re]=0;for(re=He;re<=me;re++){const Et=P[re];if(cn>=Qt){kn(Et,N,de,!0);continue}let En;if(Et.key!=null)En=ot.get(Et.key);else for(it=ze;it<=Ae;it++)if(Ht[it-ze]===0&&Rl(Et,R[it])){En=it;break}En===void 0?kn(Et,N,de,!0):(Ht[En-ze]=re+1,En>=sn?sn=En:nn=!0,Ze(Et,R[En],z,null,N,de,Ee,W,ye),cn++)}const Ss=nn?hZ(Ht):Yi;for(it=Ss.length-1,re=Qt-1;re>=0;re--){const Et=ze+re,En=R[Et],sa=Et+1<Fe?R[Et+1].el:q;Ht[re]===0?Ze(null,En,z,sa,N,de,Ee,W,ye):nn&&(it<0||re!==Ss[it]?fe(En,z,sa,2):it--)}}},fe=(P,R,z,q,N=null)=>{const{el:de,type:Ee,transition:W,children:ye,shapeFlag:re}=P;if(re&6){fe(P.component.subTree,R,z,q);return}if(re&128){P.suspense.move(R,z,q);return}if(re&64){Ee.move(P,R,z,ar);return}if(Ee===ro){h(de,R,z);for(let me=0;me<ye.length;me++)fe(ye[me],R,z,q);h(P.anchor,R,z);return}if(Ee===yh){ae(P,R,z);return}if(q!==2&&re&1&&W)if(q===0)W.beforeEnter(de),h(de,R,z),ls(()=>W.enter(de),N);else{const{leave:me,delayLeave:Ae,afterLeave:He}=W,ze=()=>h(de,R,z),ot=()=>{me(de,()=>{ze(),He&&He()})};Ae?Ae(de,ze,ot):ot()}else h(de,R,z)},kn=(P,R,z,q=!1,N=!1)=>{const{type:de,props:Ee,ref:W,children:ye,dynamicChildren:re,shapeFlag:Fe,patchFlag:me,dirs:Ae,cacheIndex:He}=P;if(me===-2&&(N=!1),W!=null&&Ah(W,null,z,P,!0),He!=null&&(R.renderCache[He]=void 0),Fe&256){R.ctx.deactivate(P);return}const ze=Fe&1&&Ae,ot=!Il(P);let it;if(ot&&(it=Ee&&Ee.onVnodeBeforeUnmount)&&so(it,R,P),Fe&6)ir(P.component,z,q);else{if(Fe&128){P.suspense.unmount(z,q);return}ze&&jr(P,null,R,"beforeUnmount"),Fe&64?P.type.remove(P,R,z,ar,q):re&&!re.hasOnce&&(de!==ro||me>0&&me&64)?st(re,R,z,!1,!0):(de===ro&&me&384||!N&&Fe&16)&&st(ye,R,z),q&&ea(P)}(ot&&(it=Ee&&Ee.onVnodeUnmounted)||ze)&&ls(()=>{it&&so(it,R,P),ze&&jr(P,null,R,"unmounted")},z)},ea=P=>{const{type:R,el:z,anchor:q,transition:N}=P;if(R===ro){ta(z,q);return}if(R===yh){ke(P);return}const de=()=>{v(z),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(P.shapeFlag&1&&N&&!N.persisted){const{leave:Ee,delayLeave:W}=N,ye=()=>Ee(z,de);W?W(P.el,de,ye):ye()}else de()},ta=(P,R)=>{let z;for(;P!==R;)z=Se(P),v(P),P=z;v(R)},ir=(P,R,z)=>{const{bum:q,scope:N,job:de,subTree:Ee,um:W,m:ye,a:re}=P;zA(ye),zA(re),q&&fh(q),N.stop(),de&&(de.flags|=8,kn(Ee,P,R,z)),W&&ls(W,R),ls(()=>{P.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},st=(P,R,z,q=!1,N=!1,de=0)=>{for(let Ee=de;Ee<P.length;Ee++)kn(P[Ee],R,z,q,N)},Ct=P=>{if(P.shapeFlag&6)return Ct(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const R=Se(P.anchor||P.el),z=R&&R[MX];return z?Se(z):R};let b=!1;const Jr=(P,R,z)=>{P==null?R._vnode&&kn(R._vnode,null,null,!0):Ze(R._vnode||null,P,R,null,null,null,z),R._vnode=P,b||(b=!0,LA(),BT(),b=!1)},ar={p:Ze,um:kn,m:fe,r:ea,mt:Fs,mc:ln,pc:G,pbc:dt,n:Ct,o:l};let ql,na;return{render:Jr,hydrate:ql,createApp:rZ(Jr,ql)}}function bh({type:l,props:u},d){return d==="svg"&&l==="foreignObject"||d==="mathml"&&l==="annotation-xml"&&u&&u.encoding&&u.encoding.includes("html")?void 0:d}function qr({effect:l,job:u},d){d?(l.flags|=32,u.flags|=4):(l.flags&=-33,u.flags&=-5)}function gZ(l,u){return(!l||l&&!l.pendingBranch)&&u&&!u.persisted}function tR(l,u,d=!1){const h=l.children,v=u.children;if(Ye(h)&&Ye(v))for(let E=0;E<h.length;E++){const x=h[E];let O=v[E];O.shapeFlag&1&&!O.dynamicChildren&&((O.patchFlag<=0||O.patchFlag===32)&&(O=v[E]=Jo(v[E]),O.el=x.el),!d&&O.patchFlag!==-2&&tR(x,O)),O.type===Df&&(O.el=x.el)}}function hZ(l){const u=l.slice(),d=[0];let h,v,E,x,O;const U=l.length;for(h=0;h<U;h++){const ie=l[h];if(ie!==0){if(v=d[d.length-1],l[v]<ie){u[h]=v,d.push(h);continue}for(E=0,x=d.length-1;E<x;)O=E+x>>1,l[d[O]]<ie?E=O+1:x=O;ie<l[d[E]]&&(E>0&&(u[h]=d[E-1]),d[E]=h)}}for(E=d.length,x=d[E-1];E-- >0;)d[E]=x,x=u[x];return d}function nR(l){const u=l.subTree.component;if(u)return u.asyncDep&&!u.asyncResolved?u:nR(u)}function zA(l){if(l)for(let u=0;u<l.length;u++)l[u].flags|=8}const bZ=Symbol.for("v-scx"),CZ=()=>hf(bZ);function $l(l,u,d){return sR(l,u,d)}function sR(l,u,d=Pt){const{immediate:h,deep:v,flush:E,once:x}=d,O=xn({},d);let U;if(Of)if(E==="sync"){const Se=CZ();U=Se.__watcherHandles||(Se.__watcherHandles=[])}else if(!u||h)O.once=!0;else return{stop:lo,resume:lo,pause:lo};const ie=zn;O.call=(Se,Be,tt)=>co(Se,ie,Be,tt);let j=!1;E==="post"?O.scheduler=Se=>{ls(Se,ie&&ie.suspense)}:E!=="sync"&&(j=!0,O.scheduler=(Se,Be)=>{Be?Se():Qh(Se)}),O.augmentJob=Se=>{u&&(Se.flags|=4),j&&(Se.flags|=2,ie&&(Se.id=ie.uid,Se.i=ie))};const oe=BX(l,u,O);return U&&U.push(oe),oe}function yZ(l,u,d){const h=this.proxy,v=an(l)?l.includes(".")?oR(h,l):()=>h[l]:l.bind(h,h);let E;Xe(u)?E=u:(E=u.handler,d=u);const x=jl(this),O=sR(v,E.bind(h),d);return x(),O}function oR(l,u){const d=u.split(".");return()=>{let h=l;for(let v=0;v<d.length&&h;v++)h=h[d[v]];return h}}const vZ=(l,u)=>u==="modelValue"||u==="model-value"?l.modelModifiers:l[`${u}Modifiers`]||l[`${Yr(u)}Modifiers`]||l[`${Qr(u)}Modifiers`];function EZ(l,u,...d){if(l.isUnmounted)return;const h=l.vnode.props||Pt;let v=d;const E=u.startsWith("update:"),x=E&&vZ(h,u.slice(7));x&&(x.trim&&(v=d.map(j=>an(j)?j.trim():j)),x.number&&(v=d.map(XY)));let O,U=h[O=uh(u)]||h[O=uh(Yr(u))];!U&&E&&(U=h[O=uh(Qr(u))]),U&&co(U,l,6,v);const ie=h[O+"Once"];if(ie){if(!l.emitted)l.emitted={};else if(l.emitted[O])return;l.emitted[O]=!0,co(ie,l,6,v)}}function rR(l,u,d=!1){const h=u.emitsCache,v=h.get(l);if(v!==void 0)return v;const E=l.emits;let x={},O=!1;if(!Xe(l)){const U=ie=>{const j=rR(ie,u,!0);j&&(O=!0,xn(x,j))};!d&&u.mixins.length&&u.mixins.forEach(U),l.extends&&U(l.extends),l.mixins&&l.mixins.forEach(U)}return!E&&!O?(Kt(l)&&h.set(l,null),null):(Ye(E)?E.forEach(U=>x[U]=null):xn(x,E),Kt(l)&&h.set(l,x),x)}function Pf(l,u){return!l||!wf(u)?!1:(u=u.slice(2).replace(/Once$/,""),ht(l,u[0].toLowerCase()+u.slice(1))||ht(l,Qr(u))||ht(l,u))}function Ch(l){const{type:u,vnode:d,proxy:h,withProxy:v,propsOptions:[E],slots:x,attrs:O,emit:U,render:ie,renderCache:j,props:oe,data:Se,setupState:Be,ctx:tt,inheritAttrs:Ze}=l,$t=vf(l);let nt,wt;try{if(d.shapeFlag&4){const ke=v||h,Bt=ke;nt=io(ie.call(Bt,ke,j,oe,Be,Se,tt)),wt=O}else{const ke=u;nt=io(ke.length>1?ke(oe,{attrs:O,slots:x,emit:U}):ke(oe,null)),wt=u.props?O:SZ(O)}}catch(ke){Fl.length=0,Tf(ke,l,1),nt=To(Zr)}let ae=nt;if(wt&&Ze!==!1){const ke=Object.keys(wt),{shapeFlag:Bt}=ae;ke.length&&Bt&7&&(E&&ke.some(Lh)&&(wt=_Z(wt,E)),ae=Ji(ae,wt,!1,!0))}return d.dirs&&(ae=Ji(ae,null,!1,!0),ae.dirs=ae.dirs?ae.dirs.concat(d.dirs):d.dirs),d.transition&&Jh(ae,d.transition),nt=ae,vf($t),nt}const SZ=l=>{let u;for(const d in l)(d==="class"||d==="style"||wf(d))&&((u||(u={}))[d]=l[d]);return u},_Z=(l,u)=>{const d={};for(const h in l)(!Lh(h)||!(h.slice(9)in u))&&(d[h]=l[h]);return d};function wZ(l,u,d){const{props:h,children:v,component:E}=l,{props:x,children:O,patchFlag:U}=u,ie=E.emitsOptions;if(u.dirs||u.transition)return!0;if(d&&U>=0){if(U&1024)return!0;if(U&16)return h?VA(h,x,ie):!!x;if(U&8){const j=u.dynamicProps;for(let oe=0;oe<j.length;oe++){const Se=j[oe];if(x[Se]!==h[Se]&&!Pf(ie,Se))return!0}}}else return(v||O)&&(!O||!O.$stable)?!0:h===x?!1:h?x?VA(h,x,ie):!0:!!x;return!1}function VA(l,u,d){const h=Object.keys(u);if(h.length!==Object.keys(l).length)return!0;for(let v=0;v<h.length;v++){const E=h[v];if(u[E]!==l[E]&&!Pf(d,E))return!0}return!1}function xZ({vnode:l,parent:u},d){for(;u;){const h=u.subTree;if(h.suspense&&h.suspense.activeBranch===l&&(h.el=l.el),h===l)(l=u.vnode).el=d,u=u.parent;else break}}const iR=l=>l.__isSuspense;function kZ(l,u){u&&u.pendingBranch?Ye(l)?u.effects.push(...l):u.effects.push(l):$X(l)}const ro=Symbol.for("v-fgt"),Df=Symbol.for("v-txt"),Zr=Symbol.for("v-cmt"),yh=Symbol.for("v-stc"),Fl=[];let us=null;function Sf(l=!1){Fl.push(us=l?null:[])}function NZ(){Fl.pop(),us=Fl[Fl.length-1]||null}let Vl=1;function WA(l){Vl+=l,l<0&&us&&(us.hasOnce=!0)}function aR(l){return l.dynamicChildren=Vl>0?us||Yi:null,NZ(),Vl>0&&us&&us.push(l),l}function lR(l,u,d,h,v,E){return aR(Es(l,u,d,h,v,E,!0))}function cR(l,u,d,h,v){return aR(To(l,u,d,h,v,!0))}function AZ(l){return l?l.__v_isVNode===!0:!1}function Rl(l,u){return l.type===u.type&&l.key===u.key}const uR=({key:l})=>l??null,bf=({ref:l,ref_key:u,ref_for:d})=>(typeof l=="number"&&(l=""+l),l!=null?an(l)||Pn(l)||Xe(l)?{i:ao,r:l,k:u,f:!!d}:l:null);function Es(l,u=null,d=null,h=0,v=null,E=l===ro?0:1,x=!1,O=!1){const U={__v_isVNode:!0,__v_skip:!0,type:l,props:u,key:u&&uR(u),ref:u&&bf(u),scopeId:LT,slotScopeIds:null,children:d,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:h,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:ao};return O?(nb(U,d),E&128&&l.normalize(U)):d&&(U.shapeFlag|=an(d)?8:16),Vl>0&&!x&&us&&(U.patchFlag>0||E&6)&&U.patchFlag!==32&&us.push(U),U}const To=TZ;function TZ(l,u=null,d=null,h=0,v=null,E=!1){if((!l||l===ZX)&&(l=Zr),AZ(l)){const O=Ji(l,u,!0);return d&&nb(O,d),Vl>0&&!E&&us&&(O.shapeFlag&6?us[us.indexOf(l)]=O:us.push(O)),O.patchFlag=-2,O}if(HZ(l)&&(l=l.__vccOpts),u){u=RZ(u);let{class:O,style:U}=u;O&&!an(O)&&(u.class=Uh(O)),Kt(U)&&(Yh(U)&&!Ye(U)&&(U=xn({},U)),u.style=Mh(U))}const x=an(l)?1:iR(l)?128:UX(l)?64:Kt(l)?4:Xe(l)?2:0;return Es(l,u,d,h,v,x,E,!0)}function RZ(l){return l?Yh(l)||GT(l)?xn({},l):l:null}function Ji(l,u,d=!1,h=!1){const{props:v,ref:E,patchFlag:x,children:O,transition:U}=l,ie=u?OZ(v||{},u):v,j={__v_isVNode:!0,__v_skip:!0,type:l.type,props:ie,key:ie&&uR(ie),ref:u&&u.ref?d&&E?Ye(E)?E.concat(bf(u)):[E,bf(u)]:bf(u):E,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:O,target:l.target,targetStart:l.targetStart,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:u&&l.type!==ro?x===-1?16:x|16:x,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:U,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Ji(l.ssContent),ssFallback:l.ssFallback&&Ji(l.ssFallback),el:l.el,anchor:l.anchor,ctx:l.ctx,ce:l.ce};return U&&h&&Jh(j,U.clone(j)),j}function PZ(l=" ",u=0){return To(Df,null,l,u)}function DZ(l="",u=!1){return u?(Sf(),cR(Zr,null,l)):To(Zr,null,l)}function io(l){return l==null||typeof l=="boolean"?To(Zr):Ye(l)?To(ro,null,l.slice()):typeof l=="object"?Jo(l):To(Df,null,String(l))}function Jo(l){return l.el===null&&l.patchFlag!==-1||l.memo?l:Ji(l)}function nb(l,u){let d=0;const{shapeFlag:h}=l;if(u==null)u=null;else if(Ye(u))d=16;else if(typeof u=="object")if(h&65){const v=u.default;v&&(v._c&&(v._d=!1),nb(l,v()),v._c&&(v._d=!0));return}else{d=32;const v=u._;!v&&!GT(u)?u._ctx=ao:v===3&&ao&&(ao.slots._===1?u._=1:(u._=2,l.patchFlag|=1024))}else Xe(u)?(u={default:u,_ctx:ao},d=32):(u=String(u),h&64?(d=16,u=[PZ(u)]):d=8);l.children=u,l.shapeFlag|=d}function OZ(...l){const u={};for(let d=0;d<l.length;d++){const h=l[d];for(const v in h)if(v==="class")u.class!==h.class&&(u.class=Uh([u.class,h.class]));else if(v==="style")u.style=Mh([u.style,h.style]);else if(wf(v)){const E=u[v],x=h[v];x&&E!==x&&!(Ye(E)&&E.includes(x))&&(u[v]=E?[].concat(E,x):x)}else v!==""&&(u[v]=h[v])}return u}function so(l,u,d,h=null){co(l,u,7,[d,h])}const BZ=jT();let IZ=0;function LZ(l,u,d){const h=l.type,v=(u?u.appContext:l.appContext)||BZ,E={uid:IZ++,vnode:l,type:h,parent:u,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new sX(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:u?u.provides:Object.create(v.provides),ids:u?u.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XT(h,v),emitsOptions:rR(h,v),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:h.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:d,suspenseId:d?d.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=u?u.root:E,E.emit=EZ.bind(null,E),l.ce&&l.ce(E),E}let zn=null,_f,Oh;{const l=fT(),u=(d,h)=>{let v;return(v=l[d])||(v=l[d]=[]),v.push(h),E=>{v.length>1?v.forEach(x=>x(E)):v[0](E)}};_f=u("__VUE_INSTANCE_SETTERS__",d=>zn=d),Oh=u("__VUE_SSR_SETTERS__",d=>Of=d)}const jl=l=>{const u=zn;return _f(l),l.scope.on(),()=>{l.scope.off(),_f(u)}},jA=()=>{zn&&zn.scope.off(),_f(null)};function fR(l){return l.vnode.shapeFlag&4}let Of=!1;function $Z(l,u=!1,d=!1){u&&Oh(u);const{props:h,children:v}=l.vnode,E=fR(l);aZ(l,h,E,u),fZ(l,v,d);const x=E?FZ(l,u):void 0;return u&&Oh(!1),x}function FZ(l,u){const d=l.type;l.accessCache=Object.create(null),l.proxy=new Proxy(l.ctx,QX);const{setup:h}=d;if(h){const v=l.setupContext=h.length>1?UZ(l):null,E=jl(l);sr();const x=Wl(h,l,0,[l.props,v]);if(or(),E(),iT(x)){if(Il(l)||FT(l),x.then(jA,jA),u)return x.then(O=>{qA(l,O,u)}).catch(O=>{Tf(O,l,0)});l.asyncDep=x}else qA(l,x,u)}else dR(l,u)}function qA(l,u,d){Xe(u)?l.type.__ssrInlineRender?l.ssrRender=u:l.render=u:Kt(u)&&(l.setupState=PT(u)),dR(l,d)}let KA;function dR(l,u,d){const h=l.type;if(!l.render){if(!u&&KA&&!h.render){const v=h.template||eb(l).template;if(v){const{isCustomElement:E,compilerOptions:x}=l.appContext.config,{delimiters:O,compilerOptions:U}=h,ie=xn(xn({isCustomElement:E,delimiters:O},x),U);h.render=KA(v,ie)}}l.render=h.render||lo}{const v=jl(l);sr();try{JX(l)}finally{or(),v()}}}const MZ={get(l,u){return Dn(l,"get",""),l[u]}};function UZ(l){const u=d=>{l.exposed=d||{}};return{attrs:new Proxy(l.attrs,MZ),slots:l.slots,emit:l.emit,expose:u}}function sb(l){return l.exposed?l.exposeProxy||(l.exposeProxy=new Proxy(PT(kX(l.exposed)),{get(u,d){if(d in u)return u[d];if(d in Ll)return Ll[d](l)},has(u,d){return d in u||d in Ll}})):l.proxy}function HZ(l){return Xe(l)&&"__vccOpts"in l}const mR=(l,u)=>DX(l,u,Of),zZ="3.5.4";/**
* @vue/runtime-dom v3.5.4
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bh;const GA=typeof window<"u"&&window.trustedTypes;if(GA)try{Bh=GA.createPolicy("vue",{createHTML:l=>l})}catch{}const pR=Bh?l=>Bh.createHTML(l):l=>l,VZ="http://www.w3.org/2000/svg",WZ="http://www.w3.org/1998/Math/MathML",No=typeof document<"u"?document:null,YA=No&&No.createElement("template"),jZ={insert:(l,u,d)=>{u.insertBefore(l,d||null)},remove:l=>{const u=l.parentNode;u&&u.removeChild(l)},createElement:(l,u,d,h)=>{const v=u==="svg"?No.createElementNS(VZ,l):u==="mathml"?No.createElementNS(WZ,l):d?No.createElement(l,{is:d}):No.createElement(l);return l==="select"&&h&&h.multiple!=null&&v.setAttribute("multiple",h.multiple),v},createText:l=>No.createTextNode(l),createComment:l=>No.createComment(l),setText:(l,u)=>{l.nodeValue=u},setElementText:(l,u)=>{l.textContent=u},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>No.querySelector(l),setScopeId(l,u){l.setAttribute(u,"")},insertStaticContent(l,u,d,h,v,E){const x=d?d.previousSibling:u.lastChild;if(v&&(v===E||v.nextSibling))for(;u.insertBefore(v.cloneNode(!0),d),!(v===E||!(v=v.nextSibling)););else{YA.innerHTML=pR(h==="svg"?`<svg>${l}</svg>`:h==="mathml"?`<math>${l}</math>`:l);const O=YA.content;if(h==="svg"||h==="mathml"){const U=O.firstChild;for(;U.firstChild;)O.appendChild(U.firstChild);O.removeChild(U)}u.insertBefore(O,d)}return[x?x.nextSibling:u.firstChild,d?d.previousSibling:u.lastChild]}},qZ=Symbol("_vtc");function KZ(l,u,d){const h=l[qZ];h&&(u=(u?[u,...h]:[...h]).join(" ")),u==null?l.removeAttribute("class"):d?l.setAttribute("class",u):l.className=u}const XA=Symbol("_vod"),GZ=Symbol("_vsh"),YZ=Symbol(""),XZ=/(^|;)\s*display\s*:/;function ZZ(l,u,d){const h=l.style,v=an(d);let E=!1;if(d&&!v){if(u)if(an(u))for(const x of u.split(";")){const O=x.slice(0,x.indexOf(":")).trim();d[O]==null&&Cf(h,O,"")}else for(const x in u)d[x]==null&&Cf(h,x,"");for(const x in d)x==="display"&&(E=!0),Cf(h,x,d[x])}else if(v){if(u!==d){const x=h[YZ];x&&(d+=";"+x),h.cssText=d,E=XZ.test(d)}}else u&&l.removeAttribute("style");XA in l&&(l[XA]=E?h.display:"",l[GZ]&&(h.display="none"))}const ZA=/\s*!important$/;function Cf(l,u,d){if(Ye(d))d.forEach(h=>Cf(l,u,h));else if(d==null&&(d=""),u.startsWith("--"))l.setProperty(u,d);else{const h=QZ(l,u);ZA.test(d)?l.setProperty(Qr(h),d.replace(ZA,""),"important"):l[h]=d}}const QA=["Webkit","Moz","ms"],vh={};function QZ(l,u){const d=vh[u];if(d)return d;let h=Yr(u);if(h!=="filter"&&h in l)return vh[u]=h;h=cT(h);for(let v=0;v<QA.length;v++){const E=QA[v]+h;if(E in l)return vh[u]=E}return u}const JA="http://www.w3.org/1999/xlink";function eT(l,u,d,h,v,E=nX(u)){h&&u.startsWith("xlink:")?d==null?l.removeAttributeNS(JA,u.slice(6,u.length)):l.setAttributeNS(JA,u,d):d==null||E&&!dT(d)?l.removeAttribute(u):l.setAttribute(u,E?"":nr(d)?String(d):d)}function JZ(l,u,d,h){if(u==="innerHTML"||u==="textContent"){d!=null&&(l[u]=u==="innerHTML"?pR(d):d);return}const v=l.tagName;if(u==="value"&&v!=="PROGRESS"&&!v.includes("-")){const x=v==="OPTION"?l.getAttribute("value")||"":l.value,O=d==null?l.type==="checkbox"?"on":"":String(d);(x!==O||!("_value"in l))&&(l.value=O),d==null&&l.removeAttribute(u),l._value=d;return}let E=!1;if(d===""||d==null){const x=typeof l[u];x==="boolean"?d=dT(d):d==null&&x==="string"?(d="",E=!0):x==="number"&&(d=0,E=!0)}try{l[u]=d}catch{}E&&l.removeAttribute(u)}function eQ(l,u,d,h){l.addEventListener(u,d,h)}function tQ(l,u,d,h){l.removeEventListener(u,d,h)}const tT=Symbol("_vei");function nQ(l,u,d,h,v=null){const E=l[tT]||(l[tT]={}),x=E[u];if(h&&x)x.value=h;else{const[O,U]=sQ(u);if(h){const ie=E[u]=iQ(h,v);eQ(l,O,ie,U)}else x&&(tQ(l,O,x,U),E[u]=void 0)}}const nT=/(?:Once|Passive|Capture)$/;function sQ(l){let u;if(nT.test(l)){u={};let h;for(;h=l.match(nT);)l=l.slice(0,l.length-h[0].length),u[h[0].toLowerCase()]=!0}return[l[2]===":"?l.slice(3):Qr(l.slice(2)),u]}let Eh=0;const oQ=Promise.resolve(),rQ=()=>Eh||(oQ.then(()=>Eh=0),Eh=Date.now());function iQ(l,u){const d=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=d.attached)return;co(aQ(h,d.value),u,5,[h])};return d.value=l,d.attached=rQ(),d}function aQ(l,u){if(Ye(u)){const d=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{d.call(l),l._stopped=!0},u.map(h=>v=>!v._stopped&&h&&h(v))}else return u}const sT=l=>l.charCodeAt(0)===111&&l.charCodeAt(1)===110&&l.charCodeAt(2)>96&&l.charCodeAt(2)<123,lQ=(l,u,d,h,v,E)=>{const x=v==="svg";u==="class"?KZ(l,h,x):u==="style"?ZZ(l,d,h):wf(u)?Lh(u)||nQ(l,u,d,h,E):(u[0]==="."?(u=u.slice(1),!0):u[0]==="^"?(u=u.slice(1),!1):cQ(l,u,h,x))?(JZ(l,u,h),!l.tagName.includes("-")&&(u==="value"||u==="checked"||u==="selected")&&eT(l,u,h,x,E,u!=="value")):(u==="true-value"?l._trueValue=h:u==="false-value"&&(l._falseValue=h),eT(l,u,h,x))};function cQ(l,u,d,h){if(h)return!!(u==="innerHTML"||u==="textContent"||u in l&&sT(u)&&Xe(d));if(u==="spellcheck"||u==="draggable"||u==="translate"||u==="form"||u==="list"&&l.tagName==="INPUT"||u==="type"&&l.tagName==="TEXTAREA")return!1;if(u==="width"||u==="height"){const v=l.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return sT(u)&&an(d)?!1:!!(u in l||l._isVueCE&&(/[A-Z]/.test(u)||!an(d)))}const uQ=xn({patchProp:lQ},jZ);let oT;function fQ(){return oT||(oT=mZ(uQ))}const dQ=(...l)=>{const u=fQ().createApp(...l),{mount:d}=u;return u.mount=h=>{const v=pQ(h);if(!v)return;const E=u._component;!Xe(E)&&!E.render&&!E.template&&(E.template=v.innerHTML),v.nodeType===1&&(v.textContent="");const x=d(v,!1,mQ(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),x},u};function mQ(l){if(l instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&l instanceof MathMLElement)return"mathml"}function pQ(l){return an(l)?document.querySelector(l):l}function gQ(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var gR={exports:{}};(function(l){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},d=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},h=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},v=function(e,t){return E(function(n,s){return e.eq(t(n),t(s))})},E=function(e){return{eq:e}},x=E(function(e,t){return e===t}),O=x,U=function(e){return E(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},ie=function(e,t){return v(U(e),function(n){return h(n,t)})},j=function(e){return E(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!ie(O).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},oe=E(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:d(n)?e===t:n==="array"?U(oe).eq(e,t):n==="object"?j(oe).eq(e,t):!1});const Se=Object.getPrototypeOf,Be=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},tt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Be(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Ze=e=>t=>tt(t)===e,$t=e=>t=>typeof t===e,nt=e=>t=>e===t,wt=(e,t)=>ke(e)&&Be(e,t,(n,s)=>Se(n)===s),ae=Ze("string"),ke=Ze("object"),Bt=e=>wt(e,Object),rt=Ze("array"),vt=nt(null),ln=$t("boolean"),Dt=nt(void 0),dt=e=>e==null,ee=e=>!dt(e),Ke=$t("function"),vn=$t("number"),Fs=(e,t)=>{if(rt(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Te=()=>{},At=(e,t)=>(...n)=>e(t.apply(null,n)),Tt=(e,t)=>n=>e(t(n)),G=e=>()=>e,It=e=>e,rr=(e,t)=>e===t;function fe(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const kn=e=>t=>!e(t),ea=e=>()=>{throw new Error(e)},ta=e=>e(),ir=e=>{e()},st=G(!1),Ct=G(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ee(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const Jr=Array.prototype.slice,ar=Array.prototype.indexOf,ql=Array.prototype.push,na=(e,t)=>ar.call(e,t),P=(e,t)=>{const n=na(e,t);return n===-1?b.none():b.some(n)},R=(e,t)=>na(e,t)>-1,z=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},q=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},N=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},de=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},Ee=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},W=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},ye=(e,t,n)=>(de(e,(s,o)=>{n=t(n,s,o)}),n),re=(e,t,n)=>(N(e,(s,o)=>{n=t(n,s,o)}),n),Fe=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},me=(e,t)=>Fe(e,t,st),Ae=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},He=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!rt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ql.apply(t,e[n])}return t},ze=(e,t)=>He(q(e,t)),ot=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},it=e=>{const t=Jr.call(e,0);return t.reverse(),t},cn=(e,t)=>W(e,n=>!R(t,n)),Qt=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},nn=(e,t)=>{const n=Jr.call(e,0);return n.sort(t),n},sn=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),Ht=e=>sn(e,0),Ss=e=>sn(e,e.length-1),Et=Ke(Array.from)?Array.from:e=>Jr.call(e),En=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},sa=(e,t)=>{const n=[],s=Ke(t)?o=>z(n,r=>t(r,o)):o=>R(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},On=Object.keys,CR=Object.hasOwnProperty,lt=(e,t)=>{const n=On(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},oa=(e,t)=>yR(e,(n,s)=>({k:s,v:t(n,s)})),yR=(e,t)=>{const n={};return lt(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Bf=e=>(t,n)=>{e[n]=t},ob=(e,t,n,s)=>{lt(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},vR=(e,t)=>{const n={},s={};return ob(e,t,Bf(n),Bf(s)),{t:n,f:s}},ra=(e,t)=>{const n={};return ob(e,t,Bf(n),Te),n},Kl=(e,t)=>{const n=[];return lt(e,(s,o)=>{n.push(t(s,o))}),n},If=e=>Kl(e,It),mt=(e,t)=>Ne(e,t)?b.from(e[t]):b.none(),Ne=(e,t)=>CR.call(e,t),ei=(e,t)=>Ne(e,t)&&e[t]!==void 0&&e[t]!==null,ER=(e,t,n=oe)=>j(n).eq(e,t),rb=e=>{const t={};return N(e,n=>{t[n]={}}),On(t)},ib=e=>e.length!==void 0,Lf=Array.isArray,SR=e=>{if(Lf(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Gl=(e,t,n)=>{if(!e)return!1;if(n=n||e,ib(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(Ne(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},$f=(e,t)=>{const n=[];return Gl(e,(s,o)=>{n.push(t(s,o,e))}),n},ia=(e,t)=>{const n=[];return Gl(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},_R=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},Yl=(e,t,n,s)=>{let o=Dt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},ab=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},lr=e=>e[e.length-1],Ms=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},wR=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),f=r||i&&!c,m=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,p=!f&&!c&&!m;return{isiPad:G(o),isiPhone:G(r),isTablet:G(c),isPhone:G(f),isTouch:G(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:G(m),isDesktop:G(p)}},xR=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},kR=(e,t)=>{const n=xR(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Ff(s(1),s(2))},NR=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?lb():kR(e,n)},lb=()=>Ff(0,0),Ff=(e,t)=>({major:e,minor:t}),aa={nu:Ff,detect:NR,unknown:lb},AR=(e,t)=>En(t.brands,n=>{const s=n.brand.toLowerCase();return me(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:aa.nu(parseInt(n.version,10),0)}))}),cb=(e,t)=>{const n=String(t).toLowerCase();return me(e,s=>s.search(n))},TR=(e,t)=>cb(e,t).map(n=>{const s=aa.detect(n.versionRegexes,t);return{current:n.name,version:s}}),RR=(e,t)=>cb(e,t).map(n=>{const s=aa.detect(n.versionRegexes,t);return{current:n.name,version:s}}),PR=(e,t)=>e.substring(t),ub=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,fb=(e,t)=>zt(e,t)?PR(e,t.length):e,un=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?Dt(s)?!0:o+t.length<=s:!1},zt=(e,t)=>ub(e,t,0),Mf=(e,t)=>ub(e,t,e.length-t.length),Uf=e=>t=>t.replace(e,""),ti=Uf(/^\s+|\s+$/g),DR=Uf(/^\s+/g),db=Uf(/\s+$/g),Us=e=>e.length>0,la=e=>!Us(e),OR=(e,t)=>t<=0?"":new Array(t+1).join(e),Xl=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},Hf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,uo=e=>t=>un(t,e),BR=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>un(e,"edge/")&&un(e,"chrome")&&un(e,"safari")&&un(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Hf],search:e=>un(e,"chrome")&&!un(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>un(e,"msie")||un(e,"trident")},{name:"Opera",versionRegexes:[Hf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:uo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:uo("firefox")},{name:"Safari",versionRegexes:[Hf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(un(e,"safari")||un(e,"mobile/"))&&un(e,"applewebkit")}],IR=[{name:"Windows",search:uo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>un(e,"iphone")||un(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:uo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:uo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:uo("linux"),versionRegexes:[]},{name:"Solaris",search:uo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:uo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:uo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mb={browsers:G(BR),oses:G(IR)},pb="Edge",gb="Chromium",hb="IE",bb="Opera",Cb="Firefox",yb="Safari",LR=()=>vb({current:void 0,version:aa.unknown()}),vb=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(pb),isChromium:s(gb),isIE:s(hb),isOpera:s(bb),isFirefox:s(Cb),isSafari:s(yb)}},Eb={unknown:LR,nu:vb,edge:G(pb),chromium:G(gb),ie:G(hb),opera:G(bb),firefox:G(Cb),safari:G(yb)},Sb="Windows",_b="iOS",wb="Android",xb="Linux",kb="macOS",Nb="Solaris",Ab="FreeBSD",Tb="ChromeOS",$R=()=>Rb({current:void 0,version:aa.unknown()}),Rb=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Sb),isiOS:s(_b),isAndroid:s(wb),isMacOS:s(kb),isLinux:s(xb),isSolaris:s(Nb),isFreeBSD:s(Ab),isChromeOS:s(Tb)}},Pb={unknown:$R,nu:Rb,windows:G(Sb),ios:G(_b),android:G(wb),linux:G(xb),macos:G(kb),solaris:G(Nb),freebsd:G(Ab),chromeos:G(Tb)},FR={detect:(e,t,n)=>{const s=mb.browsers(),o=mb.oses(),r=t.bind(c=>AR(s,c)).orThunk(()=>TR(s,e)).fold(Eb.unknown,Eb.nu),i=RR(o,e).fold(Pb.unknown,Pb.nu),a=wR(i,r,e,n);return{browser:r,os:i,deviceType:a}}},MR=e=>window.matchMedia(e).matches;let UR=Ms(()=>FR.detect(window.navigator.userAgent,b.from(window.navigator.userAgentData),MR));const Hs=()=>UR(),HR=window.navigator.userAgent,zf=Hs(),zs=zf.browser,Vs=zf.os,cr=zf.deviceType,zR=HR.indexOf("Windows Phone")!==-1,je={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zs.isIE(),windowsPhone:zR,browser:{current:zs.current,version:zs.version,isChromium:zs.isChromium,isEdge:zs.isEdge,isFirefox:zs.isFirefox,isIE:zs.isIE,isOpera:zs.isOpera,isSafari:zs.isSafari},os:{current:Vs.current,version:Vs.version,isAndroid:Vs.isAndroid,isChromeOS:Vs.isChromeOS,isFreeBSD:Vs.isFreeBSD,isiOS:Vs.isiOS,isLinux:Vs.isLinux,isMacOS:Vs.isMacOS,isSolaris:Vs.isSolaris,isWindows:Vs.isWindows},deviceType:{isDesktop:cr.isDesktop,isiPad:cr.isiPad,isiPhone:cr.isiPhone,isPhone:cr.isPhone,isTablet:cr.isTablet,isTouch:cr.isTouch,isWebView:cr.isWebView}},VR=/^\s*|\s*$/g,Db=e=>dt(e)?"":(""+e).replace(VR,""),WR=(e,t)=>t?t==="array"&&Lf(e)?!0:typeof e===t:e!==void 0,jR=(e,t,n={})=>{const s=ae(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},qR=Ne,KR=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Ne(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Ob=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Gl(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Ob(o,t,n,s),!0)))},Q={trim:Db,isArray:Lf,is:WR,toArray:SR,makeMap:jR,each:Gl,map:$f,grep:ia,inArray:_R,hasOwn:qR,extend:KR,walk:Ob,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>rt(e)?e:e===""?[]:$f(e.split(t||","),Db),_addCacheSuffix:e=>{const t=je.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},ni=(e,t,n=rr)=>e.exists(s=>n(s,t)),Bb=(e,t,n=rr)=>fn(e,t,n).getOr(e.isNone()&&t.isNone()),GR=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},fn=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),YR=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),si=(e,t)=>e?b.some(t):b.none(),XR=typeof window<"u"?window:Function("return this;")(),ZR=(e,t)=>{let n=t??XR;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Ib=(e,t)=>{const n=e.split(".");return ZR(n,t)},QR=(e,t)=>Ib(e,t),JR=(e,t)=>{const n=QR(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},eP=Object.getPrototypeOf,tP=e=>JR("HTMLElement",e),nP=e=>{const t=Ib("ownerDocument.defaultView",e);return ke(e)&&(tP(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(eP(e).constructor.name))},Zl=8,Lb=9,$b=11,ca=1,Fb=3,Ve=e=>e.dom.nodeName.toLowerCase(),Mb=e=>e.dom.nodeType,Ql=e=>t=>Mb(t)===e,sP=e=>Mb(e)===Zl||Ve(e)==="#comment",Jl=e=>Vn(e)&&nP(e.dom),Vn=Ql(ca),Nn=Ql(Fb),oP=Ql(Lb),rP=Ql($b),ec=e=>t=>Vn(t)&&Ve(t)===e,Ub=(e,t,n)=>{if(ae(n)||ln(n)||vn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Jt=(e,t,n)=>{Ub(e.dom,t,n)},fo=(e,t)=>{const n=e.dom;lt(t,(s,o)=>{Ub(n,o,s)})},Wn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},mo=(e,t)=>b.from(Wn(e,t)),ua=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},en=(e,t)=>{e.dom.removeAttribute(t)},iP=e=>{const t=e.dom.attributes;return t==null||t.length===0},Hb=e=>re(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Vf=(e,t)=>{const n=Wn(e,t);return n===void 0||n===""?[]:n.split(" ")},aP=(e,t,n)=>{const o=Vf(e,t).concat([n]);return Jt(e,t,o.join(" ")),!0},lP=(e,t,n)=>{const s=W(Vf(e,t),o=>o!==n);return s.length>0?Jt(e,t,s.join(" ")):en(e,t),!1},fa=e=>e.dom.classList!==void 0,zb=e=>Vf(e,"class"),Vb=(e,t)=>aP(e,"class",t),Wb=(e,t)=>lP(e,"class",t),cP=(e,t)=>R(zb(e),t)?Wb(e,t):Vb(e,t),oi=(e,t)=>{fa(e)?e.dom.classList.add(t):Vb(e,t)},jb=e=>{(fa(e)?e.dom.classList:zb(e)).length===0&&en(e,"class")},da=(e,t)=>{fa(e)?e.dom.classList.remove(t):Wb(e,t),jb(e)},uP=(e,t)=>{const n=fa(e)?e.dom.classList.toggle(t):cP(e,t);return jb(e),n},Wf=(e,t)=>fa(e)&&e.dom.classList.contains(t),fP=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return ma(s.childNodes[0])},dP=(e,t)=>{const s=(t||document).createElement(e);return ma(s)},mP=(e,t)=>{const s=(t||document).createTextNode(e);return ma(s)},ma=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},w={fromHtml:fP,fromTag:dP,fromText:mP,fromDom:ma,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(ma)},qb=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},_s=(e,t)=>{const n=e.dom;if(n.nodeType!==ca)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Kb=e=>e.nodeType!==ca&&e.nodeType!==Lb&&e.nodeType!==$b||e.childElementCount===0,pP=(e,t)=>{const n=t===void 0?document:t.dom;return Kb(n)?[]:q(n.querySelectorAll(e),w.fromDom)},gP=(e,t)=>{const n=t===void 0?document:t.dom;return Kb(n)?b.none():b.from(n.querySelector(e)).map(w.fromDom)},Qe=(e,t)=>e.dom===t.dom,ws=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Gb=e=>w.fromDom(e.dom.ownerDocument),Po=e=>oP(e)?e:Gb(e),hP=e=>w.fromDom(Po(e).dom.documentElement),pa=e=>w.fromDom(Po(e).dom.defaultView),xs=e=>b.from(e.dom.parentNode).map(w.fromDom),tc=e=>b.from(e.dom.parentElement).map(w.fromDom),Yb=(e,t)=>{const n=Ke(t)?t:st;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=w.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},bP=e=>{const t=n=>W(n,s=>!Qe(e,s));return xs(e).map(dn).map(t).getOr([])},Do=e=>b.from(e.dom.previousSibling).map(w.fromDom),ga=e=>b.from(e.dom.nextSibling).map(w.fromDom),Xb=e=>it(qb(e,Do)),Zb=e=>qb(e,ga),dn=e=>q(e.dom.childNodes,w.fromDom),ri=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(w.fromDom)},jf=e=>ri(e,0),qf=e=>ri(e,e.dom.childNodes.length-1),Kf=e=>e.dom.childNodes.length,CP=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return w.fromDom(t)},Gf=e=>rP(e)&&ee(e.dom.host),Oo=e=>w.fromDom(e.dom.getRootNode()),Yf=e=>Gf(e)?e:CP(Po(e)),yP=e=>Gf(e)?e:w.fromDom(Po(e).dom.body),vP=e=>{const t=Oo(e);return Gf(t)?b.some(t):b.none()},EP=e=>w.fromDom(e.dom.host),Qb=e=>{if(ee(e.target)){const t=w.fromDom(e.target);if(Vn(t)&&SP(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ht(n)}}return b.from(e.target)},SP=e=>ee(e.dom.shadowRoot),ii=e=>{const t=Nn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return vP(w.fromDom(t)).fold(()=>n.body.contains(t),Tt(ii,EP))};var Jb=(e,t,n,s,o)=>e(n,s)?b.some(n):Ke(o)&&o(n)?b.none():t(n,s,o);const po=(e,t,n)=>{let s=e.dom;const o=Ke(n)?n:st;for(;s.parentNode;){s=s.parentNode;const r=w.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},ur=(e,t,n)=>Jb((o,r)=>r(o),po,e,t,n),_P=(e,t)=>{const n=e.dom;return n.parentNode?wP(w.fromDom(n.parentNode),s=>!Qe(e,s)&&t(s)):b.none()},wP=(e,t)=>{const n=o=>t(w.fromDom(o));return me(e.dom.childNodes,n).map(w.fromDom)},Xf=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=w.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},ha=(e,t,n)=>po(e,s=>_s(s,t),n),nc=(e,t)=>gP(t,e),ai=(e,t,n)=>Jb((o,r)=>_s(o,r),ha,e,t,n),xP=e=>ai(e,"[contenteditable]"),fr=(e,t=!1)=>ii(e)?e.dom.isContentEditable:xP(e).fold(G(t),n=>kP(n)==="true"),kP=e=>e.dom.contentEditable,ba=e=>e.style!==void 0&&Ke(e.style.getPropertyValue),eC=(e,t,n)=>{if(!ae(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ba(e)&&e.style.setProperty(t,n)},NP=(e,t)=>{ba(e)&&e.style.removeProperty(t)},tC=(e,t,n)=>{const s=e.dom;eC(s,t,n)},sc=(e,t)=>{const n=e.dom;lt(t,(s,o)=>{eC(n,o,s)})},Ws=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!ii(e)?nC(n,t):o},nC=(e,t)=>ba(e)?e.style.getPropertyValue(t):"",oc=(e,t)=>{const n=e.dom,s=nC(n,t);return b.from(s).filter(o=>o.length>0)},Zf=e=>{const t={},n=e.dom;if(ba(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},sC=(e,t)=>{const n=e.dom;NP(n,t),ni(mo(e,"style").map(ti),"")&&en(e,"style")},AP=e=>e.dom.offsetWidth,Bn=(e,t)=>{xs(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},go=(e,t)=>{ga(e).fold(()=>{xs(e).each(o=>{Ft(o,t)})},s=>{Bn(s,t)})},Qf=(e,t)=>{jf(e).fold(()=>{Ft(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Ft=(e,t)=>{e.dom.appendChild(t.dom)},oC=(e,t)=>{Bn(e,t),Ft(t,e)},TP=(e,t)=>{N(t,(n,s)=>{const o=s===0?e:t[s-1];go(o,n)})},dr=(e,t)=>{N(t,n=>{Ft(e,n)})},li=e=>{e.dom.textContent="",N(dn(e),t=>{pt(t)})},pt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Bo=e=>{const t=dn(e);t.length>0&&TP(e,t),pt(e)},RP=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,dn(w.fromDom(s))},Jf=e=>q(e,w.fromDom),rC=e=>e.dom.innerHTML,rc=(e,t)=>{const s=Gb(e).dom,o=w.fromDom(s.createDocumentFragment()),r=RP(t,s);dr(o,r),li(e),Ft(e,o)},PP=e=>{const t=w.fromTag("div"),n=w.fromDom(e.dom.cloneNode(!0));return Ft(t,n),rC(t)},DP=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),OP=e=>{const t=w.fromDom(Qb(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=At(s,n);return DP(t,e.clientX,e.clientY,n,s,o,e)},BP=(e,t)=>n=>{e(n)&&t(OP(n))},IP=(e,t,n,s,o)=>{const r=BP(n,s);return e.dom.addEventListener(t,r,o),{unbind:fe($P,e,t,r,o)}},LP=(e,t,n,s)=>IP(e,t,n,s,!1),$P=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},iC=(e,t)=>({left:e,top:t,translate:(s,o)=>iC(e+s,t+o)}),ci=iC,FP=e=>{const t=e.getBoundingClientRect();return ci(t.left,t.top)},ic=(e,t)=>e!==void 0?e:t!==void 0?t:0,MP=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return ci(n.offsetLeft,n.offsetTop);const r=ic(s==null?void 0:s.pageYOffset,o.scrollTop),i=ic(s==null?void 0:s.pageXOffset,o.scrollLeft),a=ic(o.clientTop,n.clientTop),c=ic(o.clientLeft,n.clientLeft);return ed(e).translate(i-c,r-a)},ed=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?ci(s.offsetLeft,s.offsetTop):ii(e)?FP(t):ci(0,0)},td=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return ci(n,s)},aC=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},lC=(e,t)=>{Hs().browser.isSafari()&&Ke(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},UP=e=>{const t=e===void 0?window:e;return Hs().browser.isFirefox()?b.none():b.from(t.visualViewport)},cC=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),uC=e=>{const t=e===void 0?window:e,n=t.document,s=td(w.fromDom(n));return UP(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return cC(s.left,s.top,r,i)},o=>cC(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},HP=(e,t)=>W(dn(e),t),fC=(e,t)=>{let n=[];return N(dn(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(fC(s,t))}),n},mn=(e,t)=>pP(t,e),dC=(e,t,n)=>po(e,t,n).isSome(),zP=(e,t)=>_P(e,t).isSome(),mC=(e,t)=>Xf(e,t).isSome();class Gt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Ca="\uFEFF",Vt=" ",nd=e=>e===Ca,VP=e=>e.replace(/\uFEFF/g,""),WP=/^[ \t\r\n]*$/,ui=e=>WP.test(e),jP=e=>{for(const t of e)if(!nd(t))return!1;return!0},qP=e=>" \f	\v".indexOf(e)!==-1,pC=e=>e===`
`||e==="\r",KP=(e,t)=>t<e.length&&t>=0?pC(e[t]):!1,gC=(e,t=4,n=!0,s=!0)=>{const o=OR(" ",t),r=e.replace(/\t/g,o);return re(r,(a,c)=>qP(c)||c===Vt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||KP(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Vt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:pC(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},mr=e=>t=>!!t&&t.nodeType===e,ac=e=>!!e&&!Object.getPrototypeOf(e),he=mr(1),ho=e=>he(e)&&Jl(w.fromDom(e)),GP=e=>he(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",ya=e=>{const t=e.toLowerCase();return n=>ee(n)&&n.nodeName.toLowerCase()===t},ks=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return R(t,s)}return!1}},lc=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(he(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const i=o.getComputedStyle(s,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}}return!1}},YP=e=>t=>he(t)&&t.hasAttribute(e),pr=e=>he(e)&&e.hasAttribute("data-mce-bogus"),XP=e=>he(e)&&e.getAttribute("data-mce-bogus")==="all",js=e=>he(e)&&e.tagName==="TABLE",hC=e=>t=>!!(ho(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),sd=ks(["textarea","input"]),Y=mr(3),ZP=mr(4),QP=mr(7),Io=mr(8),va=mr(9),od=mr(11),St=ya("br"),bC=ya("img"),fs=hC("true"),ct=hC("false"),cc=ks(["td","th"]),JP=ks(["td","th","caption"]),qs=ks(["video","audio","object","embed"]),e1=ya("li"),rd=ya("details"),t1=ya("summary"),CC={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},n1=(e,t,n)=>{const s=w.fromDom(t),o=w.fromDom(e),r=n.getWhitespaceElements();return dC(o,a=>Ne(r,Ve(a)),fe(Qe,s))},s1=e=>he(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),o1=(e,t)=>he(e)&&Ne(t.getNonEmptyElements(),e.nodeName),r1=YP("data-mce-bookmark"),i1=e=>tc(w.fromDom(e)).exists(t=>!fr(t)),a1=(e,t,n)=>ui(e.data)&&!n1(e,t,n),l1=(e,t,n,s)=>Y(e)&&!a1(e,t,n)&&(!s.includeZwsp||!jP(e.data)),id=(e,t,n,s)=>Ke(s.isContent)&&s.isContent(t)||o1(t,e)||r1(t)||s1(t)||l1(t,n,e,s)||ct(t)||fs(t)&&i1(t),bo=(e,t,n)=>{const s={...CC,...n};if(s.checkRootAsContent&&id(e,t,t,s))return!1;let o=t.firstChild,r=0;if(!o)return!0;const i=new Gt(o,t);do{if(s.skipBogus&&he(o)){const a=o.getAttribute("data-mce-bogus");if(a){o=i.next(a==="all");continue}}if(Io(o)){o=i.next(!0);continue}if(St(o)){r++,o=i.next();continue}if(id(e,o,t,s))return!1;o=i.next()}while(o);return r<=1},pn=(e,t,n)=>bo(e,t.dom,{checkRootAsContent:!0,...n}),yC=(e,t,n)=>id(e,t,t,{includeZwsp:CC.includeZwsp,...n}),Yt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},c1=e=>{const t=Yt(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(a))}}},u1=e=>{const t=Yt(b.none()),n=()=>t.get().each(a=>clearInterval(a));return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(setInterval(a,e)))}}},Co=()=>{const e=c1(Te);return{...e,on:n=>e.get().each(n)}},vC=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},gr=e=>vC(e)!=="html",ad=e=>gr(e.nodeName),EC=e=>vC(e.nodeName),f1=["svg","math"],d1=()=>{const e=Co(),t=()=>e.get().map(EC).getOr("html");return{track:o=>(ad(o)?e.set(o):e.get().exists(r=>!r.contains(o))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},uc="data-mce-block",m1=e=>W(On(e),t=>!/[A-Z]/.test(t)),ld=e=>q(m1(e),t=>{const n=CSS.escape(t);return`${n}:`+q(f1,s=>`not(${s} ${n})`).join(":")}).join(","),SC=(e,t)=>ee(t.querySelector(e))?(t.setAttribute(uc,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(uc),!1),_C=(e,t)=>{const n=ld(e.getTransparentElements()),s=ld(e.getBlockElements());return W(t.querySelectorAll(n),o=>SC(s,o))},wC=(e,t,n)=>{var s;const o=n?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(bo(e,r,{checkRootAsContent:!0})){(s=r.parentNode)===null||s===void 0||s.removeChild(r);return}},p1=(e,t,n)=>{const s=document.createRange(),o=t.parentNode;if(o){s.setStartBefore(t),s.setEndBefore(n);const r=s.extractContents();wC(e,r,!0),s.setStartAfter(n),s.setEndAfter(t);const i=s.extractContents();wC(e,i,!1),bo(e,r,{checkRootAsContent:!0})||o.insertBefore(r,t),bo(e,n,{checkRootAsContent:!0})||o.insertBefore(n,t),bo(e,i,{checkRootAsContent:!0})||o.insertBefore(i,t),o.removeChild(t)}},g1=(e,t,n)=>{const s=e.getBlockElements(),o=w.fromDom(t),r=a=>Ve(a)in s,i=a=>Qe(a,o);N(Jf(n),a=>{po(a,r,i).each(c=>{const f=HP(a,m=>r(m)&&!e.isValidChild(Ve(c),Ve(m)));if(f.length>0){const m=tc(c);N(f,p=>{po(p,r,i).each(g=>{p1(e,g.dom,p.dom)})}),m.each(p=>_C(e,p.dom))}})})},h1=(e,t,n)=>{N([...n,...hr(e,t)?[t]:[]],s=>N(mn(w.fromDom(s),s.nodeName.toLowerCase()),o=>{y1(e,o.dom)&&Bo(o)}))},cd=(e,t)=>{const n=_C(e,t);g1(e,t,n),h1(e,t,n)},b1=(e,t)=>{if(dd(e,t)){const n=ld(e.getBlockElements());SC(n,t)}},C1=(e,t,n)=>{const s=r=>Qe(r,w.fromDom(t)),o=Yb(w.fromDom(n),s);sn(o,o.length-2).filter(Vn).fold(()=>cd(e,t),r=>cd(e,r.dom))},ud=e=>e.hasAttribute(uc),fd=(e,t)=>Ne(e.getTransparentElements(),t),dd=(e,t)=>he(t)&&fd(e,t.nodeName),hr=(e,t)=>dd(e,t)&&ud(t),y1=(e,t)=>dd(e,t)&&!ud(t),md=(e,t)=>t.type===1&&fd(e,t.name)&&ae(t.attr(uc)),v1=Hs().browser,xC=e=>me(e,Vn),E1=e=>v1.isFirefox()&&Ve(e)==="table"?xC(dn(e)).filter(t=>Ve(t)==="caption").bind(t=>xC(Zb(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,kC=(e,t)=>e.children&&R(e.children,t),S1=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Ws(w.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!kC(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!kC(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=E1(w.fromDom(t))}return{x:s,y:o}},NC=(e,t={})=>{let n=0;const s={},o=w.fromDom(e),r=Po(o),i=k=>{t.referrerPolicy=k},a=k=>{t.contentCssCors=k},c=k=>{Ft(Yf(o),k)},f=k=>{const T=Yf(o);nc(T,"#"+k).each(pt)},m=k=>mt(s,k).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),p=k=>new Promise((T,A)=>{let D;const V=Q._addCacheSuffix(k),X=m(V);s[V]=X,X.count++;const se=(ue,be)=>{N(ue,ir),X.status=be,X.passed=[],X.failed=[],D&&(D.onload=null,D.onerror=null,D=null)},M=()=>se(X.passed,2),I=()=>se(X.failed,3);if(T&&X.passed.push(T),A&&X.failed.push(A),X.status===1)return;if(X.status===2){M();return}if(X.status===3){I();return}X.status=1;const H=w.fromTag("link",r.dom);fo(H,{rel:"stylesheet",type:"text/css",id:X.id}),t.contentCssCors&&Jt(H,"crossOrigin","anonymous"),t.referrerPolicy&&Jt(H,"referrerpolicy",t.referrerPolicy),D=H.dom,D.onload=M,D.onerror=I,c(H),Jt(H,"href",V)}),g=(k,T)=>{const A=m(k);s[k]=A,A.count++;const D=w.fromTag("style",r.dom);fo(D,{rel:"stylesheet",type:"text/css",id:A.id}),D.dom.innerHTML=T,c(D)},C=k=>Promise.allSettled(q(k,A=>p(A).then(G(A)))).then(A=>{const D=Ee(A,V=>V.status==="fulfilled");return D.fail.length>0?Promise.reject(q(D.fail,V=>V.reason)):q(D.pass,V=>V.value)}),S=k=>{const T=Q._addCacheSuffix(k);mt(s,T).each(A=>{--A.count===0&&(delete s[T],f(A.id))})};return{load:p,loadRawCss:g,loadAll:C,unload:S,unloadRawCss:k=>{mt(s,k).each(T=>{--T.count===0&&(delete s[k],f(T.id))})},unloadAll:k=>{N(k,T=>{S(T)})},_setReferrerPolicy:i,_setContentCssCors:a}},AC=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=Oo(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=NC(r,s);return e.set(r,i),i})}}})(),_1=e=>e.nodeName.toLowerCase()==="span",TC=(e,t)=>ee(e)&&(yC(t,e)||t.isInline(e.nodeName.toLowerCase())),w1=(e,t,n)=>{const s=new Gt(e,t).prev(!1),o=new Gt(e,t).next(!1),r=Dt(s)||TC(s,n),i=Dt(o)||TC(o,n);return r&&i},RC=e=>_1(e)&&e.getAttribute("data-mce-type")==="bookmark",x1=(e,t,n)=>Y(e)&&e.data.length>0&&w1(e,t,n),k1=e=>he(e)?e.childNodes.length>0:!1,N1=e=>od(e)||va(e),pd=(e,t,n,s)=>{var o;const r=s||t;if(he(t)&&RC(t))return t;const i=t.childNodes;for(let a=i.length-1;a>=0;a--)pd(e,i[a],n,r);if(he(t)){const a=t.childNodes;a.length===1&&RC(a[0])&&((o=t.parentNode)===null||o===void 0||o.insertBefore(a[0],t))}return!N1(t)&&!yC(n,t)&&!k1(t)&&!x1(t,r,n)&&e.remove(t),t},A1=Q.makeMap,fc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T1=/[<>&\"\']/g,R1=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,P1={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},br={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},D1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},O1=e=>{const t=w.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},PC=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!br[r]){const i="&"+s[o+1]+";";n[r]=i,n[i]=r}}return n}else return},gd=PC("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),DC=(e,t)=>e.replace(t?fc:dc,n=>br[n]||n),B1=e=>(""+e).replace(T1,t=>br[t]||t),OC=(e,t)=>e.replace(t?fc:dc,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":br[n]||"&#"+n.charCodeAt(0)+";"),hd=(e,t,n)=>{const s=n||gd;return e.replace(t?fc:dc,o=>br[o]||s[o]||o)},Cr={encodeRaw:DC,encodeAllRaw:B1,encodeNumeric:OC,encodeNamed:hd,getEncodeFunc:(e,t)=>{const n=PC(t)||gd,s=(i,a)=>i.replace(a?fc:dc,c=>br[c]!==void 0?br[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>hd(i,a,n),r=A1(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:hd:r.numeric?OC:DC},decode:e=>e.replace(R1,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):P1[n]||String.fromCharCode(n)):D1[t]||gd[t]||O1(t))},on=(e,t)=>(e=Q.trim(e),e?e.split(t||" "):[]),BC=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),I1=e=>ke(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",L1=e=>{const t=n=>rt(n)?q(n,t):I1(n)?new RegExp(n.source,n.flags):ke(n)?oa(n,t):n;return t(e)},$1=e=>{const t=/^(~)?(.+)$/;return ze(on(e,","),n=>{const s=t.exec(n);if(s){const r=s[1]==="~"?"span":"div",i=s[2];return[{cloneName:r,name:i}]}else return[]})},IC=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),LC=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const s=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:s}},bd=e=>{const{blockContent:t,phrasingContent:n,flowContent:s}=LC(e),o=r=>Object.freeze(r.split(" "));return Object.freeze({blockContent:o(t),phrasingContent:o(n),flowContent:o(s)})},F1={html4:Ms(()=>bd("html4")),html5:Ms(()=>bd("html5")),"html5-strict":Ms(()=>bd("html5-strict"))},$C=(e,t)=>{const{blockContent:n,phrasingContent:s,flowContent:o}=F1[e]();return t==="blocks"?b.some(n):t==="phrasing"?b.some(s):t==="flow"?b.some(o):b.none()},M1=e=>{const t=IC(e),{phrasingContent:n,flowContent:s}=LC(e),o={},r=(c,f,m)=>{o[c]={attributes:Qt(f,G({})),attributesOrder:f,children:Qt(m,G({}))}},i=(c,f="",m="")=>{const p=on(m),g=on(c);let C=g.length;const S=[...t,...on(f)];for(;C--;)r(g[C],S.slice(),p)},a=(c,f)=>{const m=on(c),p=on(f);let g=m.length;for(;g--;){const C=o[m[g]];for(let S=0,y=p.length;S<y;S++)C.attributes[p[S]]={},C.attributesOrder.push(p[S])}};return e!=="html5-strict"&&(N(on("acronym applet basefont big font strike tt"),m=>{i(m,"",n)}),N(on("center dir isindex noframes"),m=>{i(m,"",s)})),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),i("dd div","",s),i("address dt caption","",e==="html4"?n:s),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",s),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",s),i("dl","","dt dd"),i("a","href target rel media hreflang type",e==="html4"?n:s),i("q","cite",n),i("ins del","cite datetime",s),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",s),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),i("param","name value"),i("map","name",[s,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",s),i("th","colspan rowspan headers scope abbr",s),i("form","accept-charset action autocomplete enctype method name novalidate target",s),i("fieldset","disabled form name",[s,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[s,"li"].join(" ")),i("noscript","",s),e!=="html4"&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",s),i("mark rt rp bdi","",n),i("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),i("canvas","width height",s),i("data","value",n),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",s),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[s,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",s),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[s,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name"),r("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),e!=="html4"&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&N([o.video,o.audio],c=>{delete c.children.audio,delete c.children.video}),N(on("a form meter progress dfn"),c=>{o[c]&&delete o[c].children[c]}),delete o.caption.children.table,delete o.script,o},U1=e=>e==="-"?"remove":"add",Cd=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return b.from(t.exec(e)).map(n=>({preset:n[1]==="@",name:n[2]}))},H1=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ze(on(e,","),n=>{const s=t.exec(n);if(s){const o=s[1],r=o?U1(o):"replace",i=s[2],a=ze(on(s[3],"|"),c=>Cd(c).toArray());return[{operation:r,name:i,validChildren:a}]}else return[]})},z1=(e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:o,attributesOrder:r}=t;return N(on(e,"|"),i=>{const a=n.exec(i);if(a){const c={},f=a[1],m=a[2].replace(/[\\:]:/g,":"),p=a[3],g=a[4];if(f==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(m),c.required=!0),f==="-"){delete o[m],r.splice(Q.inArray(r,m),1);return}if(p&&(p==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:m,value:g}),c.defaultValue=g):p==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:m,value:g}),c.forcedValue=g):p==="<"&&(c.validValues=Q.makeMap(g,"?"))),s.test(m)){const C=c;t.attributePatterns=t.attributePatterns||[],C.pattern=BC(m),t.attributePatterns.push(C)}else o[m]||r.push(m),o[m]=c}})},V1=(e,t)=>{lt(e.attributes,(n,s)=>{t.attributes[s]=n}),t.attributesOrder.push(...e.attributesOrder)},W1=(e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ze(on(t,","),s=>{const o=n.exec(s);if(o){const r=o[1],i=o[2],a=o[3],c=o[4],f=o[5],m={attributes:{},attributesOrder:[]};if(e.each(p=>V1(p,m)),r==="#"?m.paddEmpty=!0:r==="-"&&(m.removeEmpty=!0),c==="!"&&(m.removeEmptyAttrs=!0),f&&z1(f,m),a&&(m.outputName=i),i==="@")if(e.isNone())e=b.some(m);else return[];return[a?{name:i,element:m,aliasName:a}:{name:i,element:m}]}else return[]})},mc={},Ea=Q.makeMap,Ns=Q.each,FC=Q.extend,MC=Q.explode,UC=(e,t={})=>{const n=Ea(e," ",Ea(e.toUpperCase()," "));return FC(n,t)},HC=e=>UC("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),yd=(e,t)=>{if(e){const n={};return ae(e)&&(e={"*":e}),Ns(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Ea(s,/[, ]/):MC(s,/[, ]/)}),n}else return},Lo=(e={})=>{var t;const n={},s={};let o=[];const r={},i={},a=(Ce,Me,ut)=>{const yt=e[Ce];if(yt)return Ea(yt,/[, ]/,Ea(yt.toUpperCase(),/[, ]/));{let Rt=mc[Ce];return Rt||(Rt=UC(Me,ut),mc[Ce]=Rt),Rt}},c=(t=e.schema)!==null&&t!==void 0?t:"html5",f=M1(c);e.verify_html===!1&&(e.valid_elements="*[*]");const m=yd(e.valid_styles),p=yd(e.invalid_styles,"map"),g=yd(e.valid_classes,"map"),C=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),S=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),_=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),k="td th iframe video audio object script code",T=a("non_empty_elements",k+" pre svg textarea summary",y),A=a("move_caret_before_on_enter_elements",k+" table",y),D="h1 h2 h3 h4 h5 h6",V=a("text_block_elements",D+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),X=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",V),se=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),M=a("transparent_elements","a ins del canvas map"),I=a("wrap_block_elements","pre "+D);Ns("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ce=>{i[Ce]=new RegExp("</"+Ce+"[^>]*>","gi")});const H=Ce=>{const Me=b.from(n["@"]),ut=/[*?+]/;N(W1(Me,Ce??""),({name:yt,element:Rt,aliasName:qt})=>{if(qt&&(n[qt]=Rt),ut.test(yt)){const xt=Rt;xt.pattern=BC(yt),o.push(xt)}else n[yt]=Rt})},ue=Ce=>{o=[],N(On(n),Me=>{delete n[Me]}),H(Ce)},be=(Ce,Me)=>{var ut,yt;delete mc.text_block_elements,delete mc.block_elements;const Rt=Me.extends?!$n(Me.extends):!1,qt=Me.extends;if(s[Ce]=qt?s[qt]:{},r[Ce]=qt??Ce,T[Ce.toUpperCase()]={},T[Ce]={},Rt||(X[Ce.toUpperCase()]={},X[Ce]={}),qt&&!n[Ce]&&n[qt]){const xt=L1(n[qt]);delete xt.removeEmptyAttrs,delete xt.removeEmpty,n[Ce]=xt}else n[Ce]={attributesOrder:[],attributes:{}};if(rt(Me.attributes)){const xt=Cn=>{kt.attributesOrder.push(Cn),kt.attributes[Cn]={}},kt=(ut=n[Ce])!==null&&ut!==void 0?ut:{};delete kt.attributesDefault,delete kt.attributesForced,delete kt.attributePatterns,delete kt.attributesRequired,kt.attributesOrder=[],kt.attributes={},N(Me.attributes,Cn=>{const gs=IC(c);Cd(Cn).each(({preset:hs,name:bs})=>{hs?bs==="global"&&N(gs,xt):xt(bs)})}),n[Ce]=kt}if(ln(Me.padEmpty)){const xt=(yt=n[Ce])!==null&&yt!==void 0?yt:{};xt.paddEmpty=Me.padEmpty,n[Ce]=xt}if(rt(Me.children)){const xt={},kt=gs=>{xt[gs]={}},Cn=gs=>{$C(c,gs).each(hs=>{N(hs,kt)})};N(Me.children,gs=>{Cd(gs).each(({preset:hs,name:bs})=>{hs?Cn(bs):kt(bs)})}),s[Ce]=xt}qt&&lt(s,(xt,kt)=>{xt[qt]&&(s[kt]=xt=FC({},s[kt]),xt[Ce]=xt[qt])})},Re=Ce=>{N($1(Ce??""),({name:Me,cloneName:ut})=>{be(Me,{extends:ut})})},Oe=Ce=>{ke(Ce)?lt(Ce,(Me,ut)=>be(ut,Me)):ae(Ce)&&Re(Ce)},We=Ce=>{N(H1(Ce??""),({operation:Me,name:ut,validChildren:yt})=>{const Rt=Me==="replace"?{"#comment":{}}:s[ut],qt=kt=>{Me==="remove"?delete Rt[kt]:Rt[kt]={}},xt=kt=>{$C(c,kt).each(Cn=>{N(Cn,qt)})};N(yt,({preset:kt,name:Cn})=>{kt?xt(Cn):qt(Cn)}),s[ut]=Rt})},Ge=Ce=>{const Me=n[Ce];if(Me)return Me;let ut=o.length;for(;ut--;){const yt=o[ut];if(yt.pattern.test(Ce))return yt}},gt=()=>{e.valid_elements?(ue(e.valid_elements),Ns(f,(Ce,Me)=>{s[Me]=Ce.children})):(Ns(f,(Ce,Me)=>{n[Me]={attributes:Ce.attributes,attributesOrder:Ce.attributesOrder},s[Me]=Ce.children}),Ns(on("strong/b em/i"),Ce=>{const Me=on(Ce,"/");n[Me[1]].outputName=Me[0]}),Ns(se,(Ce,Me)=>{n[Me]&&(e.padd_empty_block_inline_children&&(n[Me].paddInEmptyBlock=!0),n[Me].removeEmpty=!0)}),Ns(on("ol ul blockquote a table tbody"),Ce=>{n[Ce]&&(n[Ce].removeEmpty=!0)}),Ns(on("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ce=>{n[Ce]&&(n[Ce].paddEmpty=!0)}),Ns(on("span"),Ce=>{n[Ce].removeEmptyAttrs=!0})),delete n.svg,Oe(e.custom_elements),We(e.valid_children),H(e.extended_valid_elements),We("+ol[ul|ol],+ul[ul|ol]"),Ns({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ce,Me)=>{n[Me]&&(n[Me].parentsRequired=on(Ce))}),e.invalid_elements&&Ns(MC(e.invalid_elements),Ce=>{n[Ce]&&delete n[Ce]}),Ge("span")||H("span[!data-mce-type|*]")},Zt=G(m),et=G(p),J=G(g),ge=G(_),Ue=G(X),te=G(V),ve=G(se),De=G(Object.seal(y)),ne=G(S),Pe=G(T),Ie=G(A),Lt=G(C),qe=G(M),Ot=G(I),os=G(Object.seal(i)),Is=(Ce,Me)=>{const ut=s[Ce.toLowerCase()];return!!(ut&&ut[Me.toLowerCase()])},bn=(Ce,Me)=>{const ut=Ge(Ce);if(ut)if(Me){if(ut.attributes[Me])return!0;const yt=ut.attributePatterns;if(yt){let Rt=yt.length;for(;Rt--;)if(yt[Rt].pattern.test(Me))return!0}}else return!0;return!1},$n=Ce=>Ne(Ue(),Ce),rs=Ce=>!zt(Ce,"#")&&bn(Ce)&&!$n(Ce),Fn=Ce=>Ne(Ot(),Ce)||rs(Ce),is=G(r);return gt(),{type:c,children:s,elements:n,getValidStyles:Zt,getValidClasses:J,getBlockElements:Ue,getInvalidStyles:et,getVoidElements:De,getTextBlockElements:te,getTextInlineElements:ve,getBoolAttrs:ge,getElementRule:Ge,getSelfClosingElements:ne,getNonEmptyElements:Pe,getMoveCaretBeforeOnEnterElements:Ie,getWhitespaceElements:Lt,getTransparentElements:qe,getSpecialElements:os,isValidChild:Is,isValid:bn,isBlock:$n,isInline:rs,isWrapper:Fn,getCustomElements:is,addValidElements:H,setValidElements:ue,addCustomElements:Oe,addValidChildren:We}},j1=e=>({value:q1(e)}),q1=e=>fb(e,"#").toUpperCase(),vd=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},K1=e=>{const t=vd(e.red)+vd(e.green)+vd(e.blue);return j1(t)},zC=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,VC=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,G1=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),WC=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return G1(o,r,i,a)},Y1=e=>zC.test(e)?"rgb":VC.test(e)?"rgba":"other",jC=e=>{const t=zC.exec(e);if(t!==null)return b.some(WC(t[1],t[2],t[3],"1"));const n=VC.exec(e);return n!==null?b.some(WC(n[1],n[2],n[3],n[4])):b.none()},X1=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Sa=e=>jC(e).map(K1).map(t=>"#"+t.value).getOr(e),Ed=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let i,a;const c=Ca;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const f=(`\\" \\' \\; \\: ; : `+c).split(" ");for(let p=0;p<f.length;p++)r[f[p]]=c+p,r[c+p]=f[p];const m={parse:p=>{const g={};let C=!1;const S=e.url_converter,y=e.url_converter_scope||m,_=(M,I,H)=>{const ue=g[M+"-top"+I];if(!ue)return;const be=g[M+"-right"+I];if(!be)return;const Re=g[M+"-bottom"+I];if(!Re)return;const Oe=g[M+"-left"+I];if(!Oe)return;const We=[ue,be,Re,Oe];let Ge=We.length-1;for(;Ge--&&We[Ge]===We[Ge+1];);Ge>-1&&H||(g[M+I]=Ge===-1?We[0]:We.join(" "),delete g[M+"-top"+I],delete g[M+"-right"+I],delete g[M+"-bottom"+I],delete g[M+"-left"+I])},k=M=>{const I=g[M];if(!I)return;const H=I.indexOf(",")>-1?[I]:I.split(" ");let ue=H.length;for(;ue--;)if(H[ue]!==H[0])return!1;return g[M]=H[0],!0},T=(M,I,H,ue)=>{k(I)&&k(H)&&k(ue)&&(g[M]=g[I]+" "+g[H]+" "+g[ue],delete g[I],delete g[H],delete g[ue])},A=M=>(C=!0,r[M]),D=(M,I)=>(C&&(M=M.replace(/\uFEFF[0-9]/g,H=>r[H])),I||(M=M.replace(/\\([\'\";:])/g,"$1")),M),V=M=>String.fromCharCode(parseInt(M.slice(1),16)),X=M=>M.replace(/\\[0-9a-f]+/gi,V),se=(M,I,H,ue,be,Re)=>{if(be=be||Re,be)return be=D(be),"'"+be.replace(/\'/g,"\\'")+"'";if(I=D(I||H||ue||""),!e.allow_script_urls){const Oe=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Oe)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Oe))return""}return S&&(I=S.call(y,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(p){p=p.replace(/[\u0000-\u001F]/g,""),p=p.replace(/\\[\"\';:\uFEFF]/g,A).replace(/\"[^\"]+\"|\'[^\']+\'/g,I=>I.replace(/[;:]/g,A));let M;for(;M=s.exec(p);){s.lastIndex=M.index+M[0].length;let I=M[1].replace(o,"").toLowerCase(),H=M[2].replace(o,"");if(I&&H){if(I=X(I),H=X(H),I.indexOf(c)!==-1||I.indexOf('"')!==-1||!e.allow_script_urls&&(I==="behavior"||/expression\s*\(|\/\*|\*\//.test(H)))continue;I==="font-weight"&&H==="700"?H="bold":(I==="color"||I==="background-color")&&(H=H.toLowerCase()),Y1(H)==="rgb"&&jC(H).each(ue=>{H=Sa(X1(ue)).toLowerCase()}),H=H.replace(n,se),g[I]=C?D(H,!0):H}}_("border","",!0),_("border","-width"),_("border","-color"),_("border","-style"),_("padding",""),_("margin",""),T("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border,g["border-image"]==="none"&&delete g["border-image"]}return g},serialize:(p,g)=>{let C="";const S=(_,k)=>{const T=k[_];if(T)for(let A=0,D=T.length;A<D;A++){const V=T[A],X=p[V];X&&(C+=(C.length>0?" ":"")+V+": "+X+";")}},y=(_,k)=>{if(!a||!k)return!0;let T=a["*"];return T&&T[_]?!1:(T=a[k],!(T&&T[_]))};return g&&i?(S("*",i),S(g,i)):lt(p,(_,k)=>{_&&y(k,g)&&(C+=(C.length>0?" ":"")+k+": "+_+";")}),C}};return m},Z1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Q1=e=>e instanceof Event||Ke(e.initEvent),J1=e=>e.isDefaultPrevented===Ct||e.isDefaultPrevented===st,eD=e=>dt(e.preventDefault)||Q1(e),qC=(e,t)=>{const n=t??{};for(const s in e)Ne(Z1,s)||(n[s]=e[s]);return ee(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ee(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),ee(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Sd=(e,t,n,s)=>{var o;const r=qC(t,s);return r.type=e,dt(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),eD(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=Ct,Ke(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=Ct,Ke(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=Ct,r.stopPropagation()},J1(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?Ct:st,r.isPropagationStopped=r.cancelBubble===!0?Ct:st,r.isImmediatePropagationStopped=st)),r},tD="mce-data-",nD=/^(?:mouse|contextmenu)|click/,_d=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},pc=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},sD=e=>ee(e)&&nD.test(e.type),_a=(e,t)=>{const n=Sd(e.type,e,document,t);if(sD(e)&&Dt(e.pageX)&&!Dt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},oD=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{pc(e,"DOMContentLoaded",i),pc(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():_d(e,"DOMContentLoaded",i),n.domLoaded||_d(e,"load",i)};class yr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=tD+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i;const a=window,c=g=>{r.executeHandlers(_a(g||a.event),f)};if(!t||Y(t)||Io(t))return s;let f;t[r.expando]?f=t[r.expando]:(f=r.count++,t[r.expando]=f,r.events[f]={}),o=o||t;const m=n.split(" ");let p=m.length;for(;p--;){let g=m[p],C=c,S=!1,y=!1;if(g==="DOMContentLoaded"&&(g="ready"),r.domLoaded&&g==="ready"&&t.readyState==="complete"){s.call(o,_a({type:g}));continue}!r.hasFocusIn&&(g==="focusin"||g==="focusout")&&(S=!0,y=g==="focusin"?"focus":"blur",C=_=>{const k=_a(_||a.event);k.type=k.type==="focus"?"focusin":"focusout",r.executeHandlers(k,f)}),i=r.events[f][g],i?g==="ready"&&r.domLoaded?s(_a({type:g})):i.push({func:s,scope:o}):(r.events[f][g]=i=[{func:s,scope:o}],i.fakeName=y,i.capture=S,i.nativeHandler=C,g==="ready"?oD(t,C,r):_d(t,y||g,C,S))}return t=i=null,s}unbind(t,n,s){if(!t||Y(t)||Io(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const c=i[a],f=r[c];if(f){if(s){let m=f.length;for(;m--;)if(f[m].func===s){const p=f.nativeHandler,g=f.fakeName,C=f.capture,S=f.slice(0,m).concat(f.slice(m+1));S.nativeHandler=p,S.fakeName=g,S.capture=C,r[c]=S}}(!s||f.length===0)&&(delete r[c],pc(t,f.fakeName||c,f.nativeHandler,f.capture))}}}else lt(r,(i,a)=>{pc(t,i.fakeName||a,i.nativeHandler,i.capture)}),r={};for(const i in r)if(Ne(r,i))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||Y(t)||Io(t))return this;const o=_a({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||Y(t)||Io(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}yr.Event=new yr;const wd=Q.each,rD=Q.grep,xd="data-mce-style",iD=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),wa=(e,t,n)=>{dt(n)||n===""?en(e,t):Jt(e,t,n)},KC=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),fi=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&Y(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},GC=(e,t)=>{const n=Wn(t,"style"),s=e.serialize(e.parse(n),Ve(t));wa(t,xd,s)},aD=(e,t)=>vn(e)?Ne(iD,t)?e+"":e+"px":e,YC=(e,t,n)=>{const s=KC(t);dt(n)||n===""?sC(e,s):tC(e,s,aD(n,s))},lD=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const f=w.fromDom(i);Ke(t.url_converter)&&ee(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),String(a),c,i));const m="data-mce-"+c;wa(f,m,a),wa(f,c,a)},get:(i,a)=>{const c=w.fromDom(i);return Wn(c,"data-mce-"+a)||Wn(c,a)}},r={style:{set:(i,a)=>{const c=w.fromDom(i);s&&wa(c,xd,a),en(c,"style"),ae(a)&&sc(c,e.parse(a))},get:i=>{const a=w.fromDom(i),c=Wn(a,xd)||Wn(a,"style");return e.serialize(e.parse(c),Ve(a))}}};return s&&(r.href=r.src=o),r},at=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=AC.forElement(w.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],m=t.schema?t.schema:Lo({}),p=Ed({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),g=t.ownEvents?new yr:yr.Event,C=m.getBlockElements(),S=B=>ae(B)?Ne(C,B):he(B)&&(Ne(C,B.nodeName)||hr(m,B)),y=B=>B&&e&&ae(B)?e.getElementById(B):B,_=B=>{const L=y(B);return ee(L)?w.fromDom(L):null},k=(B,L,Z="")=>{let K;const _e=_(B);if(ee(_e)&&Vn(_e)){const $e=Al[L];$e&&$e.get?K=$e.get(_e.dom,L):K=Wn(_e,L)}return ee(K)?K:Z},T=B=>{const L=y(B);return dt(L)?[]:L.attributes},A=(B,L,Z)=>{ge(B,K=>{if(he(K)){const _e=w.fromDom(K),$e=Z===""?null:Z,ft=Wn(_e,L),Cs=Al[L];Cs&&Cs.set?Cs.set(_e.dom,$e,L):wa(_e,L,$e),ft!==$e&&t.onSetAttrib&&t.onSetAttrib({attrElm:_e.dom,attrName:L,attrValue:$e})}})},D=(B,L)=>B.cloneNode(L),V=()=>t.root_element||e.body,X=B=>{const L=uC(B);return{x:L.x,y:L.y,w:L.width,h:L.height}},se=(B,L)=>S1(e.body,y(B),L),M=(B,L,Z)=>{ge(B,K=>{const _e=w.fromDom(K);YC(_e,L,Z),t.update_styles&&GC(p,_e)})},I=(B,L)=>{ge(B,Z=>{const K=w.fromDom(Z);lt(L,(_e,$e)=>{YC(K,$e,_e)}),t.update_styles&&GC(p,K)})},H=(B,L,Z)=>{const K=y(B);if(!(dt(K)||!ho(K)&&!GP(K)))return Z?Ws(w.fromDom(K),KC(L)):(L=L.replace(/-(\D)/g,(_e,$e)=>$e.toUpperCase()),L==="float"&&(L="cssFloat"),K.style?K.style[L]:void 0)},ue=B=>{const L=y(B);if(!L)return{w:0,h:0};let Z=H(L,"width"),K=H(L,"height");return(!Z||Z.indexOf("px")===-1)&&(Z="0"),(!K||K.indexOf("px")===-1)&&(K="0"),{w:parseInt(Z,10)||L.offsetWidth||L.clientWidth,h:parseInt(K,10)||L.offsetHeight||L.clientHeight}},be=B=>{const L=y(B),Z=se(L),K=ue(L);return{x:Z.x,y:Z.y,w:K.w,h:K.h}},Re=(B,L)=>{if(!B)return!1;const Z=rt(B)?B:[B];return z(Z,K=>_s(w.fromDom(K),L))},Oe=(B,L,Z,K)=>{const _e=[];let $e=y(B);K=K===void 0;const ft=Z||(V().nodeName!=="BODY"?V().parentNode:null);if(ae(L))if(L==="*")L=he;else{const Cs=L;L=af=>Re(af,Cs)}for(;$e&&!($e===ft||dt($e.nodeType)||va($e)||od($e));){if(!L||L($e))if(K)_e.push($e);else return[$e];$e=$e.parentNode}return K?_e:null},We=(B,L,Z)=>{const K=Oe(B,L,Z,!1);return K&&K.length>0?K[0]:null},Ge=(B,L,Z)=>{let K=L;if(B){ae(L)&&(K=_e=>Re(_e,L));for(let _e=B[Z];_e;_e=_e[Z])if(Ke(K)&&K(_e))return _e}return null},gt=(B,L)=>Ge(B,L,"nextSibling"),Zt=(B,L)=>Ge(B,L,"previousSibling"),et=B=>Ke(B.querySelectorAll),J=(B,L)=>{var Z,K;const _e=(K=(Z=y(L))!==null&&Z!==void 0?Z:t.root_element)!==null&&K!==void 0?K:e;return et(_e)?Et(_e.querySelectorAll(B)):[]},ge=function(B,L,Z){const K=Z??this;if(rt(B)){const _e=[];return wd(B,($e,ft)=>{const Cs=y($e);Cs&&_e.push(L.call(K,Cs,ft))}),_e}else{const _e=y(B);return _e?L.call(K,_e):!1}},Ue=(B,L)=>{ge(B,Z=>{lt(L,(K,_e)=>{A(Z,_e,K)})})},te=(B,L)=>{ge(B,Z=>{const K=w.fromDom(Z);rc(K,L)})},ve=(B,L,Z,K,_e)=>ge(B,$e=>{const ft=ae(L)?e.createElement(L):L;return ee(Z)&&Ue(ft,Z),K&&(!ae(K)&&K.nodeType?ft.appendChild(K):ae(K)&&te(ft,K)),_e?ft:$e.appendChild(ft)}),De=(B,L,Z)=>ve(e.createElement(B),B,L,Z,!0),ne=Cr.decode,Pe=Cr.encodeAllRaw,Ie=(B,L,Z="")=>{let K="<"+B;for(const _e in L)ei(L,_e)&&(K+=" "+_e+'="'+Pe(L[_e])+'"');return la(Z)&&Ne(m.getVoidElements(),B)?K+" />":K+">"+Z+"</"+B+">"},Lt=B=>{const L=e.createElement("div"),Z=e.createDocumentFragment();Z.appendChild(L),B&&(L.innerHTML=B);let K;for(;K=L.firstChild;)Z.appendChild(K);return Z.removeChild(L),Z},qe=(B,L)=>ge(B,Z=>{const K=w.fromDom(Z);return L&&N(dn(K),_e=>{Nn(_e)&&_e.dom.length===0?pt(_e):Bn(K,_e)}),pt(K),K.dom}),Ot=B=>ge(B,L=>{const Z=L.attributes;for(let K=Z.length-1;K>=0;K--)L.removeAttributeNode(Z.item(K))}),os=B=>p.parse(B),Is=(B,L)=>p.serialize(B,L),bn=B=>{if(no!==at.DOM&&e===document){if(n[B])return;n[B]=!0}let L=e.getElementById("mceDefaultStyles");if(!L){L=e.createElement("style"),L.id="mceDefaultStyles",L.type="text/css";const Z=e.head;Z.firstChild?Z.insertBefore(L,Z.firstChild):Z.appendChild(L)}L.styleSheet?L.styleSheet.cssText+=B:L.appendChild(e.createTextNode(B))},$n=B=>{B||(B=""),N(B.split(","),L=>{o[L]=!0,c.load(L).catch(Te)})},rs=(B,L,Z)=>{ge(B,K=>{if(he(K)){const _e=w.fromDom(K),$e=L.split(" ");N($e,ft=>{ee(Z)?(Z?oi:da)(_e,ft):uP(_e,ft)})}})},Fn=(B,L)=>{rs(B,L,!0)},is=(B,L)=>{rs(B,L,!1)},Ce=(B,L)=>{const Z=_(B),K=L.split(" ");return ee(Z)&&ot(K,_e=>Wf(Z,_e))},Me=B=>{ge(B,L=>sC(w.fromDom(L),"display"))},ut=B=>{ge(B,L=>tC(w.fromDom(L),"display","none"))},yt=B=>{const L=_(B);return ee(L)&&ni(oc(L,"display"),"none")},Rt=B=>(B||"mce_")+r++,qt=B=>{const L=_(B);return ee(L)?he(L.dom)?L.dom.outerHTML:PP(L):""},xt=(B,L)=>{ge(B,Z=>{he(Z)&&(Z.outerHTML=L)})},kt=(B,L)=>{const Z=y(L);return ge(B,K=>{const _e=Z==null?void 0:Z.parentNode,$e=Z==null?void 0:Z.nextSibling;return _e&&($e?_e.insertBefore(K,$e):_e.appendChild(K)),K})},Cn=(B,L,Z)=>ge(L,K=>{var _e;const $e=rt(L)?B.cloneNode(!0):B;return Z&&wd(rD(K.childNodes),ft=>{$e.appendChild(ft)}),(_e=K.parentNode)===null||_e===void 0||_e.replaceChild($e,K),K}),gs=(B,L)=>{if(B.nodeName!==L.toUpperCase()){const Z=De(L);return wd(T(B),K=>{A(Z,K.nodeName,k(B,K.nodeName))}),Cn(Z,B,!0),Z}else return B},hs=(B,L)=>{let Z=B;for(;Z;){let K=L;for(;K&&Z!==K;)K=K.parentNode;if(Z===K)break;Z=Z.parentNode}return!Z&&B.ownerDocument?B.ownerDocument.documentElement:Z},bs=(B,L,Z)=>Bt(L)?bo(m,B,{...Z,isContent:_e=>{const $e=_e.nodeName.toLowerCase();return!!L[$e]}}):bo(m,B,Z),as=()=>e.createRange(),Xo=(B,L,Z)=>{let K=as(),_e,$e;if(B&&L&&B.parentNode&&L.parentNode){const ft=B.parentNode;return K.setStart(ft,fi(B)),K.setEnd(L.parentNode,fi(L)),_e=K.extractContents(),K=as(),K.setStart(L.parentNode,fi(L)+1),K.setEnd(ft,fi(B)+1),$e=K.extractContents(),ft.insertBefore(pd(no,_e,m),B),Z?ft.insertBefore(Z,B):ft.insertBefore(L,B),ft.insertBefore(pd(no,$e,m),B),qe(B),Z||L}else return},ji=(B,L,Z,K)=>{if(rt(B)){let _e=B.length;const $e=[];for(;_e--;)$e[_e]=ji(B[_e],L,Z,K);return $e}else return t.collect&&(B===e||B===s)&&f.push([B,L,Z,K]),g.bind(B,L,Z,K||no)},qi=(B,L,Z)=>{if(rt(B)){let K=B.length;const _e=[];for(;K--;)_e[K]=qi(B[K],L,Z);return _e}else{if(f.length>0&&(B===e||B===s)){let K=f.length;for(;K--;){const[_e,$e,ft]=f[K];B===_e&&(!L||L===$e)&&(!Z||Z===ft)&&g.unbind(_e,$e,ft)}}return g.unbind(B,L,Z)}},ah=(B,L,Z)=>g.dispatch(B,L,Z),wo=(B,L,Z)=>g.dispatch(B,L,Z),rf=B=>{if(B&&ho(B)){const L=B.getAttribute("data-mce-contenteditable");return L&&L!=="inherit"?L:B.contentEditable!=="inherit"?B.contentEditable:null}else return null},no={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:f,styles:p,schema:m,events:g,isBlock:S,root:null,clone:D,getRoot:V,getViewPort:X,getRect:be,getSize:ue,getParent:We,getParents:Oe,get:y,getNext:gt,getPrev:Zt,select:J,is:Re,add:ve,create:De,createHTML:Ie,createFragment:Lt,remove:qe,setStyle:M,getStyle:H,setStyles:I,removeAllAttribs:Ot,setAttrib:A,setAttribs:Ue,getAttrib:k,getPos:se,parseStyle:os,serializeStyle:Is,addStyle:bn,loadCSS:$n,addClass:Fn,removeClass:is,hasClass:Ce,toggleClass:rs,show:Me,hide:ut,isHidden:yt,uniqueId:Rt,setHTML:te,getOuterHTML:qt,setOuterHTML:xt,decode:ne,encode:Pe,insertAfter:kt,replace:Cn,rename:gs,findCommonAncestor:hs,run:ge,getAttribs:T,isEmpty:bs,createRng:as,nodeIndex:fi,split:Xo,bind:ji,unbind:qi,fire:wo,dispatch:ah,getContentEditable:rf,getContentEditableParent:B=>{const L=V();let Z=null;for(let K=B;K&&K!==L&&(Z=rf(K),Z===null);K=K.parentNode);return Z},isEditable:B=>{if(ee(B)){const L=he(B)?B:B.parentElement;return ee(L)&&ho(L)&&fr(w.fromDom(L))}else return!1},destroy:()=>{if(f.length>0){let B=f.length;for(;B--;){const[L,Z,K]=f[B];g.unbind(L,Z,K)}}lt(o,(B,L)=>{c.unload(L),delete o[L]})},isChildOf:(B,L)=>B===L||L.contains(B),dumpRng:B=>"startContainer: "+B.startContainer.nodeName+", startOffset: "+B.startOffset+", endContainer: "+B.endContainer.nodeName+", endOffset: "+B.endOffset},Al=lD(p,t,G(no));return no};at.DOM=at(document),at.nodeIndex=fi;const cD=at.DOM,uD=0,fD=1,gc=2,XC=3;class yo{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=cD;let r;const i=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=Q._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===gc}markDone(t){this.states[t]=gc}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=uD),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,f)=>{mt(n.scriptLoadedCallbacks,f).each(m=>{N(m,p=>p[c](f))}),delete n.scriptLoadedCallbacks[f]},o=c=>{const f=W(c,m=>m.status==="rejected");return f.length>0?Promise.reject(ze(f,({reason:m})=>rt(m)?m:[m])):Promise.resolve()},r=c=>Promise.allSettled(q(c,f=>n.states[f]===gc?(s("resolve",f),Promise.resolve()):n.states[f]===XC?(s("reject",f),Promise.reject(f)):(n.states[f]=fD,n.loadScript(f).then(()=>{n.states[f]=gc,s("resolve",f);const m=n.queue;return m.length>0?(n.queue=[],r(m).then(o)):Promise.resolve()},()=>(n.states[f]=XC,s("reject",f),Promise.reject(f)))))),i=c=>(n.loading=!0,r(c).then(f=>{n.loading=!1;const m=n.queueLoadedCallbacks.shift();return b.from(m).each(ir),o(f)})),a=rb(t);return n.loading?new Promise((c,f)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(c,f)})}):i(a)}}yo.ScriptLoader=new yo;const dD=(e,t)=>{const n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},mD=e=>ke(e)&&Ne(e,"raw"),pD=e=>rt(e)&&e.length>1,xa={},kd=Yt("en"),ZC=()=>mt(xa,kd.get()),As={getData:()=>oa(xa,e=>({...e})),setCode:e=>{e&&kd.set(e)},getCode:()=>kd.get(),add:(e,t)=>{let n=xa[e];n||(xa[e]=n={});const s=q(On(t),o=>o.toLowerCase());lt(t,(o,r)=>{const i=r.toLowerCase();i!==r&&dD(s,i)?(Ne(t,i)||(n[i]=o),n[r]=o):n[i]=o})},translate:e=>{const t=ZC().getOr({}),n=i=>Ke(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return Ne(t,a)?n(t[a]):mt(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(mD(e))return n(e.raw);if(pD(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,f)=>Ne(i,f)?n(i[f]):c);return r(a)}return r(o(e))},isRtl:()=>ZC().bind(e=>mt(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ne(xa,e)},Sn=()=>{const e=[],t={},n={},s=[],o=(y,_)=>{const k=W(s,T=>T.name===y&&T.state===_);N(k,T=>T.resolve())},r=y=>Ne(t,y),i=y=>Ne(n,y),a=y=>{if(n[y])return n[y].instance},c=(y,_)=>{const k=As.getCode(),T=","+(_||"")+",";!k||_&&T.indexOf(","+k+",")===-1||yo.ScriptLoader.add(t[y]+"/langs/"+k+".js")},f=(y,_)=>{Sn.languageLoad!==!1&&(r(y)?c(y,_):S(y,"loaded").then(()=>c(y,_)))},m=(y,_)=>(e.push(_),n[y]={instance:_},o(y,"added"),_),p=y=>{delete t[y],delete n[y]},g=(y,_)=>ae(_)?ae(y)?{prefix:"",resource:_,suffix:""}:{prefix:y.prefix,resource:_,suffix:y.suffix}:_,C=(y,_)=>{if(t[y])return Promise.resolve();let k=ae(_)?_:_.prefix+_.resource+_.suffix;k.indexOf("/")!==0&&k.indexOf("://")===-1&&(k=Sn.baseURL+"/"+k),t[y]=k.substring(0,k.lastIndexOf("/"));const T=()=>(o(y,"loaded"),Promise.resolve());return n[y]?T():yo.ScriptLoader.add(k).then(T)},S=(y,_="added")=>_==="added"&&i(y)||_==="loaded"&&r(y)?Promise.resolve():new Promise(k=>{s.push({name:y,state:_,resolve:k})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:f,add:m,remove:p,createUrl:g,load:C,waitFor:S}};Sn.languageLoad=!0,Sn.baseURL="",Sn.PluginManager=Sn(),Sn.ThemeManager=Sn(),Sn.ModelManager=Sn();const hc=(e,t)=>{let n=null;return{cancel:()=>{vt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{vt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Nd=(e,t)=>{let n=null;const s=()=>{vt(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},gD=(e,t,n)=>ha(e,t,n).isSome(),ka=G("mce-annotation"),vr=G("data-mce-annotation"),di=G("data-mce-annotation-uid"),Na=G("data-mce-annotation-active"),Aa=G("data-mce-annotation-classes"),Ta=G("data-mce-annotation-attrs"),QC=e=>t=>Qe(t,e),JC=(e,t)=>{const n=e.selection.getRng(),s=w.fromDom(n.startContainer),o=w.fromDom(e.getBody()),r=t.fold(()=>"."+ka(),c=>`[${vr()}="${c}"]`),i=ri(s,n.startOffset).getOr(s);return ai(i,r,QC(o)).bind(c=>mo(c,`${di()}`).bind(f=>mo(c,`${vr()}`).map(m=>{const p=ty(e,f);return{uid:f,name:m,elements:p}})))},hD=e=>Vn(e)&&Wf(e,ka()),ey=(e,t)=>ua(e,"data-mce-bogus")||gD(e,'[data-mce-bogus="all"]',QC(t)),ty=(e,t)=>{const n=w.fromDom(e.getBody()),s=mn(n,`[${di()}="${t}"]`);return W(s,o=>!ey(o,n))},ny=(e,t)=>{const n=w.fromDom(e.getBody()),s=mn(n,`[${vr()}="${t}"]`),o={};return N(s,r=>{if(!ey(r,n)){const i=Wn(r,di()),a=mt(o,i).getOr([]);o[i]=a.concat([r])}}),o},bD=(e,t)=>{const n=Yt({}),s=()=>({listeners:[],previous:Co()}),o=(p,g)=>{r(p,C=>(g(C),C))},r=(p,g)=>{const C=n.get(),S=mt(C,p).getOrThunk(s),y=g(S);C[p]=y,n.set(C)},i=(p,g,C)=>{o(p,S=>{N(S.listeners,y=>y(!0,p,{uid:g,nodes:q(C,_=>_.dom)}))})},a=p=>{o(p,g=>{N(g.listeners,C=>C(!1,p))})},c=(p,g)=>{N(ty(e,p),C=>{g?Jt(C,Na(),"true"):en(C,Na())})},f=Nd(()=>{const p=nn(t.getNames());N(p,g=>{r(g,C=>{const S=C.previous.get();return JC(e,b.some(g)).fold(()=>{S.each(y=>{a(g),C.previous.clear(),c(y,!1)})},({uid:y,name:_,elements:k})=>{ni(S,y)||(S.each(T=>c(T,!1)),i(_,y,k),C.previous.set(y),c(y,!0))}),{previous:C.previous,listeners:C.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(p,g)=>{r(p,C=>({previous:C.previous,listeners:C.listeners.concat([g])}))}}},CD=(e,t)=>{const n=vr(),s=r=>b.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(di(),null),r.attr(vr(),null),r.attr(Na(),null);const c=b.from(r.attr(Ta())).map(g=>g.split(",")).getOr([]),f=b.from(r.attr(Aa())).map(g=>g.split(",")).getOr([]);N(c,g=>r.attr(g,null));const m=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],p=cn(m,[ka()].concat(f));r.attr("class",p.length>0?p.join(" "):null),r.attr(Aa(),null),r.attr(Ta(),null)};e.serializer.addTempAttr(Na()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},yD=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>mt(e,o).map(r=>r.settings),getNames:()=>On(e)}},vD=(e,t,n)=>Math.min(Math.max(e,t),n),sy=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let oy=0;const Ra=e=>{const n=new Date().getTime(),s=Math.floor(sy()*1e9);return oy++,e+"_"+s+oy+String(n)},ED=(e,t)=>{N(t,n=>{oi(e,n)})},SD=(e,t)=>{N(t,n=>{da(e,n)})},ry=(e,t)=>w.fromDom(e.dom.cloneNode(t)),Er=e=>ry(e,!1),iy=e=>ry(e,!0),_D=(e,t)=>{const n=w.fromTag(t),s=Hb(e);return fo(n,s),n},wD=(e,t)=>{const n=_D(e,t);go(e,n);const s=dn(e);return dr(n,s),pt(e),n},ay=(e,t,n=st)=>{const s=new Gt(e,t),o=r=>{let i;do i=s[r]();while(i&&!Y(i)&&!n(i));return b.from(i).filter(Y)};return{current:()=>b.from(s.current()).filter(Y),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Sr=(e,t)=>{const n=t||(i=>e.isBlock(i)||St(i)||ct(i)),s=(i,a,c,f)=>{if(Y(i)){const m=f(i,a,i.data);if(m!==-1)return b.some({container:i,offset:m})}return c().bind(m=>s(m.container,m.offset,c,f))};return{backwards:(i,a,c,f)=>{const m=ay(i,f??e.getRoot(),n);return s(i,a,()=>m.prev().map(p=>({container:p,offset:p.length})),c).getOrNull()},forwards:(i,a,c,f)=>{const m=ay(i,f??e.getRoot(),n);return s(i,a,()=>m.next().map(p=>({container:p,offset:0})),c).getOrNull()}}},Ad=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(Nn,"text"),Pa=e=>Ad.get(e),xD=e=>Ad.getOption(e),ly=(e,t)=>Ad.set(e,t),kD=["td","th"],ND=["thead","tbody","tfoot"],AD=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],TD=["li","dd","dt"],RD=["ul","ol","dl"],PD=["pre","script","textarea","style"],mi=e=>{let t;return n=>(t=t||Qt(e,Ct),Ne(t,Ve(n)))},DD=e=>Ve(e)==="table",_r=e=>Vn(e)&&Ve(e)==="br",cy=mi(AD),Td=mi(RD),pi=mi(TD),OD=mi(ND),Da=mi(kD),bc=mi(PD),BD=e=>{const t=[];let n=e.dom;for(;n;)t.push(w.fromDom(n)),n=n.lastChild;return t},ID=e=>{const t=mn(e,"br"),n=W(BD(e).slice(-1),_r);t.length===n.length&&N(n,pt)},gi=()=>{const e=w.fromTag("br");return Jt(e,"data-mce-bogus","1"),e},$o=e=>{li(e),Ft(e,gi())},LD=(e,t)=>{qf(e).each(n=>{Do(n).each(s=>{t.isBlock(Ve(e))&&_r(n)&&t.isBlock(Ve(s))&&pt(n)})})},Wt=Ca,Cc=nd,jn=VP,$D=e=>e.insertContent(Wt,{preserve_zwsp:!0}),FD=he,hi=Y,bi=e=>(hi(e)&&(e=e.parentNode),FD(e)&&e.hasAttribute("data-mce-caret")),Fo=e=>hi(e)&&Cc(e.data),Gn=e=>bi(e)||Fo(e),uy=e=>e.firstChild!==e.lastChild||!St(e.firstChild),MD=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Wt),r=e.parentNode;if(t){const i=e.previousSibling;if(hi(i)){if(Gn(i))return i;if(vc(i))return i.splitText(i.data.length-1)}r==null||r.insertBefore(o,e)}else{const i=e.nextSibling;if(hi(i)){if(Gn(i))return i;if(yc(i))return i.splitText(1),i}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},Rd=e=>{const t=e.container();return Y(t)?t.data.charAt(e.offset())===Wt||e.isAtStart()&&Fo(t.previousSibling):!1},Pd=e=>{const t=e.container();return Y(t)?t.data.charAt(e.offset()-1)===Wt||e.isAtEnd()&&Fo(t.nextSibling):!1},UD=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(gi().dom);const i=t.parentNode;return n?i==null||i.insertBefore(r,t):t.nextSibling?i==null||i.insertBefore(r,t.nextSibling):i==null||i.appendChild(r),r},yc=e=>hi(e)&&e.data[0]===Wt,vc=e=>hi(e)&&e.data[e.data.length-1]===Wt,HD=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];pr(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},Dd=e=>e&&e.hasAttribute("data-mce-caret")?(HD(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,fy=e=>bi(e.startContainer),Ci=Math.round,wr=e=>e?{left:Ci(e.left),top:Ci(e.top),bottom:Ci(e.bottom),right:Ci(e.right),width:Ci(e.width),height:Ci(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},dy=(e,t)=>(e=wr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),zD=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,my=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Oa=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:my(t.top-e.bottom,e,t)},Ba=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:my(t.bottom-e.top,e,t),VD=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,WD=e=>re(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),b.none()),py=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},jD=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Ec=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Mo=(e,t)=>{if(he(e)&&e.hasChildNodes()){const n=e.childNodes,s=vD(t,0,n.length-1);return n[s]}else return e},qD=(e,t)=>{if(!(t<0&&he(e)&&e.hasChildNodes()))return Mo(e,t)},KD=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),gy=e=>ae(e)&&e.charCodeAt(0)>=768&&KD.test(e),GD=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},YD=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},hy=fs,XD=ct,ZD=St,QD=Y,JD=ks(["script","style","textarea"]),by=ks(["img","input","textarea","hr","iframe","video","audio","object","embed"]),eO=ks(["table"]),tO=Gn,Ts=e=>tO(e)?!1:QD(e)?!JD(e.parentNode):by(e)||ZD(e)||eO(e)||Od(e),nO=e=>he(e)&&e.getAttribute("unselectable")==="true",Od=e=>!nO(e)&&XD(e),sO=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Od(n))return!1;if(hy(n))return!0}return!0},oO=e=>Od(e)?!re(Et(e.getElementsByTagName("*")),(t,n)=>t||hy(n),!1):!1,rO=e=>by(e)||oO(e),Cy=(e,t)=>Ts(e)&&sO(e,t),yy=he,iO=Ts,vy=lc("display","block table"),aO=lc("float","left right"),Ia=YD(yy,iO,kn(aO)),lO=kn(lc("white-space","pre pre-line pre-wrap")),La=Y,Bd=St,Ey=at.nodeIndex,Sc=qD,Id=e=>e?e.createRange():at.DOM.createRng(),Ld=e=>ae(e)&&/[\r\n\t ]/.test(e),Sy=e=>!!e.setStart&&!!e.setEnd,$d=e=>{const t=e.startContainer,n=e.startOffset;if(Ld(e.toString())&&lO(t.parentNode)&&Y(t)){const s=t.data;if(Ld(s[n-1])||Ld(s[n+1]))return!0}return!1},cO=e=>{const t=e.ownerDocument,n=Id(t),s=t.createTextNode(Vt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=wr(n.getBoundingClientRect());return o.removeChild(s),r},uO=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&Y(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Uo(r)}else return null},_y=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Uo=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=wr(s[0]):n=wr(e.getBoundingClientRect()),!Sy(e)&&Bd(e)&&_y(n)?cO(e):_y(n)&&Sy(e)&&(t=uO(e))!==null&&t!==void 0?t:n},xr=(e,t)=>{const n=dy(e,t);return n.width=1,n.right=n.left+1,n},fO=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&zD(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=Id(i.ownerDocument);if(a<i.data.length){if(gy(i.data[a]))return;if(gy(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!$d(c))){n(xr(Uo(c),!1));return}}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),$d(c)||n(xr(Uo(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),$d(c)||n(xr(Uo(c),!0)))},o=e.container(),r=e.offset();if(La(o))return s(o,r),t;if(yy(o))if(e.isAtEnd()){const i=Sc(o,r);La(i)&&s(i,i.data.length),Ia(i)&&!Bd(i)&&n(xr(Uo(i),!1))}else{const i=Sc(o,r);if(La(i)&&s(i,0),Ia(i)&&e.isAtEnd())return n(xr(Uo(i),!1)),t;const a=Sc(e.container(),e.offset()-1);Ia(a)&&!Bd(a)&&(vy(a)||vy(i)||!Ia(i))&&n(xr(Uo(a),!1)),Ia(i)&&n(xr(Uo(i),!0))}return t},F=(e,t,n)=>{const s=()=>(La(e),t===0),o=()=>La(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const m=Id(e.ownerDocument);return m.setStart(e,t),m.setEnd(e,t),m},i=()=>(n||(n=fO(F(e,t))),n),a=()=>i().length>0,c=m=>m&&e===m.container()&&t===m.offset(),f=m=>Sc(e,m?t-1:t);return{container:G(e),offset:G(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:f}};F.fromRangeStart=e=>F(e.startContainer,e.startOffset),F.fromRangeEnd=e=>F(e.endContainer,e.endOffset),F.after=e=>F(e.parentNode,Ey(e)+1),F.before=e=>F(e.parentNode,Ey(e)),F.isAbove=(e,t)=>fn(Ht(t.getClientRects()),Ss(e.getClientRects()),Oa).getOr(!1),F.isBelow=(e,t)=>fn(Ss(t.getClientRects()),Ht(e.getClientRects()),Ba).getOr(!1),F.isAtStart=e=>e?e.isAtStart():!1,F.isAtEnd=e=>e?e.isAtEnd():!1,F.isTextPosition=e=>e?Y(e.container()):!1,F.isElementPosition=e=>!F.isTextPosition(e);const _c=(e,t)=>{Y(t)&&t.data.length===0&&e.remove(t)},dO=(e,t,n)=>{t.insertNode(n),_c(e,n.previousSibling),_c(e,n.nextSibling)},mO=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>_c(e,r.previousSibling)),o.each(r=>_c(e,r.nextSibling))},Fd=(e,t,n)=>{od(n)?mO(e,t,n):dO(e,t,n)},Rs=Y,wy=pr,xy=at.nodeIndex,ky=e=>{const t=e.parentNode;return wy(t)?ky(t):t},Md=e=>e?Yl(e.childNodes,(t,n)=>(wy(n)&&n.nodeName!=="BR"?t=t.concat(Md(n)):t.push(n),t),[]):[],pO=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&Rs(n);)t+=n.data.length;return t},Ny=e=>t=>e===t,gO=e=>{let t,n;t=Md(ky(e)),n=ab(t,Ny(e),e),t=t.slice(0,n+1);const s=Yl(t,(o,r,i)=>(Rs(r)&&Rs(t[i-1])&&o++,o),0);return t=ia(t,ks([e.nodeName])),n=ab(t,Ny(e),e),n-s},Ay=e=>(Rs(e)?"text()":e.nodeName.toLowerCase())+"["+gO(e)+"]",hO=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e;o=o.parentNode)s.push(o);return s},Ty=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(Rs(s))r=pO(s,o);else{const a=s.childNodes;o>=a.length?(r="after",o=a.length-1):r="before",s=a[o]}n.push(Ay(s));let i=hO(e,s);return i=ia(i,kn(pr)),n=n.concat($f(i,a=>Ay(a))),n.reverse().join("/")+","+r},bO=(e,t,n)=>{let s=Md(e);return s=ia(s,(o,r)=>!Rs(o)||!Rs(s[r-1])),s=ia(s,ks([t])),s[n]},CO=(e,t)=>{let n=e,s=0;for(;Rs(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!Rs(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return Rs(e)&&t>e.data.length&&(t=e.data.length),F(e,t)},Ry=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=Yl(s,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),bO(i,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!Rs(r)&&r.parentNode){let i;return o==="after"?i=xy(r)+1:i=xy(r),F(r.parentNode,i)}return CO(r,parseInt(o,10))},wc=ct,yO=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&Y(o);o=o.previousSibling)s+=e(o.data).length;return s},Py=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let i=o?s.startOffset:s.endOffset;const a=[],c=e.getRoot();if(Y(r))a.push(n?yO(t,r,i):i);else{let f=0;const m=r.childNodes;i>=m.length&&m.length&&(f=1,i=Math.max(0,m.length-1)),a.push(e.nodeIndex(m[i],n)+f)}for(let f=r;f&&f!==c;f=f.parentNode)a.push(e.nodeIndex(f,n));return a},vO=(e,t,n,s)=>{const o=t.dom,r=Py(o,e,n,s,!0),i=t.isForward(),a=fy(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...a};{const c=Py(o,e,n,s,!1);return{start:r,end:c,forward:i,...a}}},Ud=(e,t,n)=>{let s=0;return Q.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},Dy=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(he(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Oy=e=>(Dy(e,!0),Dy(e,!1),e),By=(e,t)=>{if(he(e)&&(e=Mo(e,t),wc(e)))return e;if(Gn(e)){Y(e)&&bi(e)&&(e=e.parentNode);let n=e.previousSibling;if(wc(n)||(n=e.nextSibling,wc(n)))return n}},EO=e=>By(e.startContainer,e.startOffset)||By(e.endContainer,e.endOffset),Iy=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||wc(s)){const i=s.nodeName;return{name:i,index:Ud(n.dom,i,s)}}const r=EO(o);if(r){const i=r.tagName;return{name:i,index:Ud(n.dom,i,r)}}return vO(e,n,t,o)},SO=e=>{const t=e.getRng();return{start:Ty(e.dom.getRoot(),F.fromRangeStart(t)),end:Ty(e.dom.getRoot(),F.fromRangeEnd(t)),forward:e.isForward()}},_O=e=>({rng:e.getRng(),forward:e.isForward()}),Ly=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},$y=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:Ud(n,a,i)};const f=Oy(s.cloneRange());if(!r){f.collapse(!1);const p=Ly(n,o+"_end",t);Fd(n,f,p)}s=Oy(s),s.collapse(!0);const m=Ly(n,o+"_start",t);return Fd(n,s,m),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},wO=(e,t,n=!1)=>t===2?Iy(jn,n,e):t===3?SO(e):t?_O(e):$y(e,!1),Hd=fe(Iy,It,!0),Fy=e=>{const t=r=>r(e),n=G(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:Ct,isError:st,map:r=>An.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},My=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:st,isError:Ct,map:t,mapError:s=>An.error(s(e)),bind:t,exists:st,forall:Ct,getOr:It,or:It,getOrThunk:ta,orThunk:ta,getOrDie:ea(String(e)),each:Te,toOptional:b.none};return n},An={value:Fy,error:My,fromOption:(e,t)=>e.fold(()=>My(t),Fy)},Ks={generate:e=>{if(!rt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return N(e,(s,o)=>{const r=On(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!rt(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const f=c.length;if(f!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+f);return{fold:(...p)=>{if(p.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+p.length);return p[o].apply(null,c)},match:p=>{const g=On(p);if(t.length!==g.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+g.join(","));if(!ot(t,S=>R(g,S)))throw new Error("Not all branches were specified when using match. Specified: "+g.join(", ")+`
Required: `+t.join(", "));return p[i].apply(null,c)},log:p=>{console.log(p,{constructors:t,constructor:i,params:c})}}}}),n}};Ks.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const xO=e=>{const t=[],n=[];return N(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},kO=e=>e.type==="inline-command"||e.type==="inline-format",NO=e=>e.type==="block-command"||e.type==="block-format",AO=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,TO=e=>{var t;const n=o=>An.error({message:o,pattern:e}),s=(o,r,i)=>{if(e.format!==void 0){let a;if(rt(e.format)){if(!ot(e.format,ae))return n(o+" pattern has non-string items in the `format` array");a=e.format}else if(ae(e.format))a=[e.format];else return n(o+" pattern has non-string `format` parameter");return An.value(r(a))}else return e.cmd!==void 0?ae(e.cmd)?An.value(i(e.cmd,e.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!ke(e))return n("Raw pattern is not an object");if(!ae(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ae(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return r.length===0&&(r=o,o=""),s("Inline",i=>({type:"inline-format",start:o,end:r,format:i}),(i,a)=>({type:"inline-command",start:o,end:r,cmd:i,value:a}))}else{if(e.replacement!==void 0)return ae(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):An.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):s("Block",r=>({type:"block-format",start:e.start,format:r[0],trigger:o}),(r,i)=>({type:"block-command",start:e.start,cmd:r,value:i,trigger:o}))}}},Uy=e=>W(e,NO),Hy=e=>W(e,kO),RO=(e,t)=>({inlinePatterns:Hy(e),blockPatterns:Uy(e),dynamicPatternsLookup:t}),zd=(e,t)=>({...e,blockPatterns:W(e.blockPatterns,n=>AO(n,t))}),zy=e=>{const t=xO(q(e,TO));return N(t.errors,n=>console.error(n.message,n.pattern)),t.values},PO=e=>t=>{const n=e(t);return zy(n)},Vd=Hs().deviceType,DO=Vd.isTouch(),OO=at.DOM,BO=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return re(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[ti(r)]=ti(i),n},{})},Vy=e=>wt(e,RegExp),ce=e=>t=>t.options.get(e),xc=e=>ae(e)||ke(e),Wy=(e,t="")=>n=>{const s=ae(n);if(s)if(n.indexOf("=")!==-1){const o=BO(n);return{value:mt(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},IO=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Wy(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Wy(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=ae(n)&&Us(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=R(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>ln(n)?{valid:!0,value:n}:ae(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||ae(n)||Fs(n,ae);return s?ae(n)?{value:q(n.split(","),ti),valid:s}:rt(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:qd(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=ae(n)||Fs(n,ae);return s?{value:rt(n)?n:q(n.split(","),ti),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=ln(n)||ae(n);return s?n===!1||Vd.isiPhone()||Vd.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!DO}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||ae(n)||Ke(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||ae(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:xc}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:xc}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:xc}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:xc}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>ae(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Fs(n,ke)||n===!1?{value:zy(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:n=>Ke(n)?{value:PO(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Fs(n,Vy)?{value:n,valid:!0}:Vy(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const s=R(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const s=R(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:As.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:OO.getAttrib(e.getElement(),"placeholder")})})},LO=ce("iframe_attrs"),$O=ce("doctype"),jy=ce("document_base_url"),FO=ce("body_id"),MO=ce("body_class"),qy=ce("content_security_policy"),UO=ce("br_in_pre"),gn=ce("forced_root_block"),$a=ce("forced_root_block_attrs"),HO=ce("newline_behavior"),zO=ce("br_newline_selector"),VO=ce("no_newline_selector"),WO=ce("keep_styles"),jO=ce("end_container_on_empty_block"),Ky=ce("automatic_uploads"),Gy=ce("images_reuse_filename"),qO=ce("images_replace_blob_uris"),Yy=ce("icons"),KO=ce("icons_url"),GO=ce("images_upload_url"),YO=ce("images_upload_base_path"),XO=ce("images_upload_credentials"),ZO=ce("images_upload_handler"),QO=ce("content_css_cors"),Wd=ce("referrer_policy"),Xy=ce("language"),JO=ce("language_url"),Zy=ce("indent_use_margin"),eB=ce("indentation"),tB=ce("content_css"),nB=ce("content_style"),Qy=ce("font_css"),sB=ce("directionality"),oB=ce("inline_boundaries_selector"),Jy=ce("object_resizing"),rB=ce("resize_img_proportional"),iB=ce("placeholder"),ev=ce("event_root"),aB=ce("service_message"),yi=ce("theme"),lB=ce("theme_url"),jd=ce("model"),cB=ce("model_url"),Fa=ce("inline_boundaries"),uB=ce("formats"),fB=ce("preview_styles"),dB=ce("format_empty_lines"),mB=ce("format_noneditable_selector"),pB=ce("custom_ui_selector"),qd=ce("inline"),gB=ce("hidden_input"),hB=ce("submit_patch"),bB=ce("add_form_submit_trigger"),CB=ce("add_unload_trigger"),yB=ce("custom_undo_redo_levels"),vB=ce("disable_nodechange"),tv=ce("readonly"),EB=ce("editable_root"),nv=ce("content_css_cors"),kc=ce("plugins"),SB=ce("external_plugins"),_B=ce("block_unsupported_drop"),wB=ce("visual"),xB=ce("visual_table_class"),sv=ce("visual_anchor_class"),ov=ce("iframe_aria_text"),kB=ce("setup"),NB=ce("init_instance_callback"),AB=ce("urlconverter_callback"),TB=ce("auto_focus"),RB=ce("browser_spellcheck"),PB=ce("protect"),DB=ce("paste_block_drop"),Nc=ce("paste_data_images"),OB=ce("paste_preprocess"),BB=ce("paste_postprocess"),IB=ce("newdocument_content"),LB=ce("paste_webkit_styles"),$B=ce("paste_remove_styles_if_webkit"),FB=ce("paste_merge_formats"),MB=ce("smart_paste"),UB=ce("paste_as_text"),HB=ce("paste_tab_spaces"),zB=ce("allow_html_data_urls"),VB=ce("text_patterns"),WB=ce("text_patterns_lookup"),rv=ce("noneditable_class"),jB=ce("editable_class"),qB=ce("noneditable_regexp"),KB=ce("preserve_cdata"),GB=ce("highlight_on_focus"),iv=ce("xss_sanitization"),YB=ce("init_content_sync"),XB=e=>e.options.isSet("text_patterns_lookup"),ZB=e=>Q.explode(e.options.get("font_size_style_values")),QB=e=>Q.explode(e.options.get("font_size_classes")),JB=e=>e.options.get("encoding")==="xml",av=e=>Q.explode(e.options.get("images_file_types")),eI=ce("table_tab_navigation"),tI=ce("details_initial_state"),nI=ce("details_serialized_state"),lv=ce("sandbox_iframes"),Kd=e=>e.options.get("sandbox_iframes_exclusions"),sI=ce("convert_unsafe_embeds"),oI=ce("license_key"),rI=ce("api_key"),iI=he,cv=Y,uv=e=>{const t=e.parentNode;t&&t.removeChild(e)},fv=e=>{const t=jn(e);return{count:e.length-t.length,text:t}},dv=e=>{let t;for(;(t=e.data.lastIndexOf(Wt))!==-1;)e.deleteData(t,1)},mv=(e,t)=>(kr(e),t),aI=(e,t)=>{const n=fv(e.data.substr(0,t.offset())),s=fv(e.data.substr(t.offset()));return(n.text+s.text).length>0?(dv(e),F(e,t.offset()-n.count)):t},lI=(e,t)=>{const n=t.container(),s=P(Et(n.childNodes),e).map(o=>o<t.offset()?F(n,t.offset()-1):t).getOr(t);return kr(e),s},cI=(e,t)=>cv(e)&&t.container()===e?aI(e,t):mv(e,t),uI=(e,t)=>t.container()===e.parentNode?lI(e,t):mv(e,t),fI=(e,t)=>F.isTextPosition(t)?cI(e,t):uI(e,t),kr=e=>{iI(e)&&Gn(e)&&(uy(e)?e.removeAttribute("data-mce-caret"):uv(e)),cv(e)&&(dv(e),e.data.length===0&&uv(e))},dI=ct,mI=qs,pI=cc,gI="*[contentEditable=false],video,audio,embed,object",pv=(e,t,n)=>{const s=dy(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},hI=e=>{var t,n;const s=mn(w.fromDom(e),gI);for(let o=0;o<s.length;o++){const r=s[o].dom;let i=r.previousSibling;if(vc(i)){const a=i.data;a.length===1?(t=i.parentNode)===null||t===void 0||t.removeChild(i):i.deleteData(a.length-1,1)}i=r.nextSibling,yc(i)&&(i.data.length===1?(n=i.parentNode)===null||n===void 0||n.removeChild(i):i.deleteData(0,1))}},bI=(e,t,n,s)=>{const o=Co();let r,i;const a=gn(e),c=e.dom,f=(y,_)=>{let k;if(m(),pI(_))return null;if(n(_)){const T=UD(a,_,y),A=pv(t,_,y);c.setStyle(T,"top",A.top),c.setStyle(T,"caret-color","transparent"),i=T;const D=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(D,{...A}),c.add(t,D),o.set({caret:D,element:_,before:y}),y&&c.addClass(D,"mce-visual-caret-before"),p(),k=_.ownerDocument.createRange(),k.setStart(T,0),k.setEnd(T,0)}else return i=MD(_,y),k=_.ownerDocument.createRange(),Ma(i.nextSibling)?(k.setStart(i,0),k.setEnd(i,0)):(k.setStart(i,1),k.setEnd(i,1)),k;return k},m=()=>{hI(t),i&&(kr(i),i=null),o.on(y=>{c.remove(y.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},p=()=>{r=setInterval(()=>{o.on(y=>{s()?c.toggleClass(y.caret,"mce-visual-caret-hidden"):c.addClass(y.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:m,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(y=>{const _=pv(t,y.element,y.before);c.setStyles(y.caret,{..._})})},destroy:()=>clearInterval(r)}},gv=()=>je.browser.isFirefox(),Ma=e=>dI(e)||mI(e),Ua=e=>(Ma(e)||js(e)&&gv())&&tc(w.fromDom(e)).exists(fr),CI=fs,Gd=ct,yI=qs,hv=lc("display","block table table-cell table-caption list-item"),bv=Gn,Cv=bi,vI=he,EI=Y,SI=Ts,vi=e=>e>0,Nr=e=>e<0,Ac=(e,t)=>{let n;for(;n=e(t);)if(!Cv(n))return n;return null},Ha=(e,t,n,s,o)=>{const r=new Gt(e,s),i=Gd(e)||Cv(e);let a;if(Nr(t)){if(i&&(a=Ac(r.prev.bind(r),!0),n(a)))return a;for(;a=Ac(r.prev.bind(r),o);)if(n(a))return a}if(vi(t)){if(i&&(a=Ac(r.next.bind(r),!0),n(a)))return a;for(;a=Ac(r.next.bind(r),o);)if(n(a))return a}return null},_I=(e,t)=>{const n=o=>CI(o.dom),s=o=>o.dom===t;return po(w.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Ho=(e,t)=>{for(;e&&e!==t;){if(hv(e))return e;e=e.parentNode}return null},Gs=(e,t,n)=>Ho(e.container(),n)===Ho(t.container(),n),Yd=(e,t)=>{if(!t)return b.none();const n=t.container(),s=t.offset();return vI(n)?b.from(n.childNodes[s+e]):b.none()},yv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},wI=(e,t,n)=>Ho(t,e)===Ho(n,e),vv=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&bv(r)&&(r=r[s]),Gd(r)||yI(r)){if(wI(t,r,o))return r;break}if(SI(r))break;o=o.parentNode}return null},za=fe(yv,!0),Va=fe(yv,!1),Xd=(e,t,n)=>{let s;const o=fe(vv,!0,t),r=fe(vv,!1,t),i=n.startContainer,a=n.startOffset;if(bi(i)){const c=EI(i)?i.parentNode:i,f=c.getAttribute("data-mce-caret");if(f==="before"&&(s=c.nextSibling,Ua(s)))return za(s);if(f==="after"&&(s=c.previousSibling,Ua(s)))return Va(s)}if(!n.collapsed)return n;if(Y(i)){if(bv(i)){if(e===1){if(s=r(i),s)return za(s);if(s=o(i),s)return Va(s)}if(e===-1){if(s=o(i),s)return Va(s);if(s=r(i),s)return za(s)}return n}if(vc(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?za(s):n;if(yc(i)&&a<=1)return e===-1&&(s=o(i),s)?Va(s):n;if(a===i.data.length)return s=r(i),s?za(s):n;if(a===0)return s=o(i),s?Va(s):n}return n},Ev=(e,t)=>Yd(e?0:-1,t).filter(Gd),Wa=(e,t,n)=>{const s=Xd(e,t,n);return e===-1?F.fromRangeStart(s):F.fromRangeEnd(s)},Tc=e=>b.from(e.getNode()).map(w.fromDom),xI=e=>b.from(e.getNode(!0)).map(w.fromDom),Zd=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Rc=(e,t)=>{const n=Gs(e,t);return!n&&St(e.getNode())?!0:n};var Xt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Xt||(Xt={}));const kI=ct,Ys=Y,Sv=he,Qd=St,Ei=Ts,_v=rO,Pc=Cy,NI=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},wv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,xv=(e,t)=>{if(vi(e)){if(Ei(t.previousSibling)&&!Ys(t.previousSibling))return F.before(t);if(Ys(t))return F(t,0)}if(Nr(e)){if(Ei(t.nextSibling)&&!Ys(t.nextSibling))return F.after(t);if(Ys(t))return F(t,t.data.length)}return Nr(e)?Qd(t)?F.before(t):F.after(t):F.before(t)},AI=(e,t)=>{const n=t.nextSibling;return n&&Ei(n)?Ys(n)?F(n,0):F.before(n):Jd(Xt.Forwards,F.after(t),e)},Jd=(e,t,n)=>{let s,o,r,i;if(!Sv(n)||!t)return null;if(t.isEqual(F.after(n))&&n.lastChild){if(i=F.after(n.lastChild),Nr(e)&&Ei(n.lastChild)&&Sv(n.lastChild))return Qd(n.lastChild)?F.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(Ys(a)){if(Nr(e)&&c>0)return F(a,--c);if(vi(e)&&c<a.length)return F(a,++c);s=a}else{if(Nr(e)&&c>0&&(o=wv(a,c-1),Ei(o)))return!_v(o)&&(r=Ha(o,e,Pc,o),r)?Ys(r)?F(r,r.data.length):F.after(r):Ys(o)?F(o,o.data.length):F.before(o);if(vi(e)&&c<a.childNodes.length&&(o=wv(a,c),Ei(o)))return Qd(o)?AI(n,o):!_v(o)&&(r=Ha(o,e,Pc,o),r)?Ys(r)?F(r,0):F.before(r):Ys(o)?F(o,0):F.after(o);s=o||i.getNode()}if(s&&(vi(e)&&i.isAtEnd()||Nr(e)&&i.isAtStart())&&(s=Ha(s,e,Ct,n,!0),Pc(s,n)))return xv(e,s);o=s&&Ha(s,e,Pc,n);const f=lr(W(NI(a,n),kI));return f&&(!o||!f.contains(o))?(vi(e)?i=F.after(f):i=F.before(f),i):o?xv(e,o):null},Xs=e=>({next:t=>Jd(Xt.Forwards,t,e),prev:t=>Jd(Xt.Backwards,t,e)}),TI=(e,t,n)=>{const s=e?F.before(n):F.after(n);return Yn(e,t,s)},RI=e=>St(e)?F.before(e):F.after(e),kv=e=>F.isTextPosition(e)?e.offset()===0:Ts(e.getNode()),Nv=e=>{if(F.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Ts(e.getNode(!0))},Av=(e,t)=>!F.isTextPosition(e)&&!F.isTextPosition(t)&&e.getNode()===t.getNode(!0),PI=e=>!F.isTextPosition(e)&&St(e.getNode()),DI=(e,t,n)=>e?!Av(t,n)&&!PI(t)&&Nv(t)&&kv(n):!Av(n,t)&&kv(t)&&Nv(n),Yn=(e,t,n)=>{const s=Xs(t);return b.from(e?s.next(n):s.prev(n))},Si=(e,t,n)=>Yn(e,t,n).bind(s=>Gs(n,s,t)&&DI(e,n,s)?Yn(e,t,s):b.some(s)),Tv=(e,t,n,s)=>Si(e,t,n).bind(o=>s(o)?Tv(e,t,o,s):b.some(o)),_i=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Y(n)?b.some(F(n,e?0:n.data.length)):n?Ts(n)?b.some(e?F.before(n):RI(n)):TI(e,t,n):b.none()},Tn=fe(Yn,!0),In=fe(Yn,!1),hn=fe(_i,!0),ds=fe(_i,!1),em="_mce_caret",Xn=e=>he(e)&&e.id===em,Ar=(e,t)=>{let n=t;for(;n&&n!==e;){if(Xn(n))return n;n=n.parentNode}return null},OI=e=>ae(e.start),BI=e=>Ne(e,"rng"),II=e=>Ne(e,"id"),Rv=e=>Ne(e,"name"),Pv=e=>Q.isArray(e.start),Dc=e=>!Rv(e)&&ln(e.forward)?e.forward:!0,Dv=(e,t)=>(he(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),LI=(e,t)=>{const n=b.from(Ry(e.getRoot(),t.start)),s=b.from(Ry(e.getRoot(),t.end));return fn(n,s,(o,r)=>{const i=e.createRng();return i.setStart(o.container(),o.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:Dc(t)}})},$I=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Wt);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},FI=e=>!e.hasChildNodes(),MI=(e,t)=>ds(e).fold(st,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),Ov=(e,t,n)=>FI(t)&&Ar(e,t)?($I(t,n),!0):!1,Bv=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let i=r,a=o[0];for(let c=o.length-1;i&&c>=1;c--){const f=i.childNodes;if(Ov(r,i,s))return!0;if(o[c]>f.length-1)return Ov(r,i,s)?!0:MI(i,s);i=f[o[c]]}Y(i)&&(a=Math.min(o[0],i.data.length)),he(i)&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},tm=e=>Y(e)&&e.data.length>0,Iv=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let i,a;if(t==="start"?r?s.hasChildNodes()?(i=s.firstChild,a=1):tm(s.nextSibling)?(i=s.nextSibling,a=0):tm(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)+1):(i=o,a=e.nodeIndex(s)):r?s.hasChildNodes()?(i=s.firstChild,a=1):tm(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)):(i=o,a=e.nodeIndex(s)),!r){const c=s.previousSibling,f=s.nextSibling;Q.each(Q.grep(s.childNodes),p=>{Y(p)&&(p.data=p.data.replace(/\uFEFF/g,""))});let m;for(;m=e.get(n.id+"_"+t);)e.remove(m,!0);if(Y(f)&&Y(c)&&!je.browser.isOpera()){const p=c.data.length;c.appendData(f.data),e.remove(f),i=c,a=p}}return b.some(F(i,a))}else return b.none()},UI=(e,t)=>{const n=e.createRng();return Bv(e,!0,t,n)&&Bv(e,!1,t,n)?b.some({range:n,forward:Dc(t)}):b.none()},HI=(e,t)=>{const n=Iv(e,"start",t),s=Iv(e,"end",t);return fn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(Dv(e,o.container()),o.offset()),i.setEnd(Dv(e,r.container()),r.offset()),{range:i,forward:Dc(t)}})},zI=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),VI=(e,t)=>{const n=e.dom;if(t){if(Pv(t))return UI(n,t);if(OI(t))return LI(n,t);if(II(t))return HI(n,t);if(Rv(t))return zI(n,t);if(BI(t))return b.some({range:t.rng,forward:Dc(t)})}return b.none()},WI=(e,t,n)=>wO(e,t,n),jI=(e,t)=>{VI(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Zn=e=>he(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Oc=(e=>t=>e===t)(Vt),Tr=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,nm=e=>!Tr(e)&&!Oc(e)&&!nd(e),sm=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},qI=e=>ze(e,t=>{const n=Ec(t);return n?[w.fromDom(n)]:[]}),KI=e=>sm(e).length>1,GI=e=>W(qI(e),Da),YI=e=>mn(e,"td[data-mce-selected],th[data-mce-selected]"),Lv=(e,t)=>{const n=YI(t);return n.length>0?n:GI(e)},wi=e=>Lv(sm(e.selection.getSel()),w.fromDom(e.getBody())),ja=(e,t)=>ha(e,"table",t),XI=e=>{const t=e.startContainer,n=e.startOffset;return Y(t)?n===0?b.some(w.fromDom(t)):b.none():b.from(t.childNodes[n]).map(w.fromDom)},ZI=e=>{const t=e.endContainer,n=e.endOffset;return Y(t)?n===t.data.length?b.some(w.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(w.fromDom)},$v=e=>jf(e).fold(G([e]),t=>[e].concat($v(t))),om=e=>qf(e).fold(G([e]),t=>Ve(t)==="br"?Do(t).map(n=>[e].concat(om(n))).getOr([]):[e].concat(om(t))),rm=(e,t)=>fn(XI(t),ZI(t),(n,s)=>{const o=me($v(e),fe(Qe,n)),r=me(om(e),fe(Qe,s));return o.isSome()&&r.isSome()}).getOr(!1),im=(e,t,n,s)=>{const o=n,r=new Gt(n,o),i=ra(e.schema.getMoveCaretBeforeOnEnterElements(),(c,f)=>!R(["td","th","table"],f.toLowerCase()));let a=n;do{if(Y(a)&&Q.trim(a.data).length!==0){s?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(i[a.nodeName]){s?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Bc=e=>{const t=e.selection.getSel();return ee(t)&&t.rangeCount>0},am=(e,t)=>{const n=wi(e);n.length>0?N(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},Fv=(e,t,n)=>{const s=$y(e,t);n(s),e.moveToBookmark(s)},qa=e=>vn(e==null?void 0:e.nodeType),lm=e=>he(e)&&!Zn(e)&&!Xn(e)&&!pr(e),QI=(e,t)=>{if(lm(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},Mv=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),i=ct(r);Fv(s,!0,()=>{t()}),i&&ct(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&JI(o,s)},JI=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:i}=o,a=t.getNode();if(!QI(e,a)&&he(r)){const c=r.childNodes,f=e.getRoot();let m;if(i<c.length){const p=c[i];m=new Gt(p,(n=e.getParent(p,e.isBlock))!==null&&n!==void 0?n:f)}else{const p=c[c.length-1];m=new Gt(p,(s=e.getParent(p,e.isBlock))!==null&&s!==void 0?s:f),m.next(!0)}for(let p=m.current();p;p=m.next()){if(e.getContentEditable(p)==="false")return;if(Y(p)&&!um(p)){o.setStart(p,0),t.setRng(o);return}}}},Uv=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=e[s];e;e=e[s])if(he(e)||!um(e))return e}},cm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||hr(e,t),xi=(e,t,n)=>e.schema.isValidChild(t,n),um=(e,t=!1)=>{if(ee(e)&&Y(e)){const n=t?e.data.replace(/ /g," "):e.data;return ui(n)}else return!1},eL=e=>ee(e)&&Y(e)&&e.length===0,tL=(e,t)=>{const n="[data-mce-cef-wrappable]",s=mB(e),o=la(s)?n:`${n},${s}`;return _s(w.fromDom(t),o)},Hv=(e,t)=>{const n=e.dom;return lm(t)&&n.getContentEditable(t)==="false"&&tL(e,t)&&n.select('[contenteditable="true"]',t).length===0},zo=(e,t)=>Ke(e)?e(t):(ee(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),fm=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),dm=(e,t)=>{if(dt(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=Sa(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Ic=(e,t,n)=>{const s=e.getStyle(t,n);return dm(s,n)},zv=(e,t)=>{let n;return e.getParent(t,s=>he(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Lc=(e,t,n)=>e.getParents(t,n,e.getRoot()),mm=(e,t,n)=>{const s=e.formatter.get(t);return ee(s)&&z(s,n)},nL=(e,t)=>mm(e,t,s=>{const o=r=>Ke(r)||r.length>1&&r.charAt(0)==="%";return z(["styles","attributes"],r=>mt(s,r).exists(i=>{const a=rt(i)?i:If(i);return z(a,o)}))}),sL=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>ra(r,(i,a)=>z(s,c=>c===a));return mm(e,t,r=>{const i=o(r);return mm(e,n,a=>{const c=o(a);return ER(i,c)})})},Zs=e=>ei(e,"block"),oL=e=>Zs(e)&&e.wrapper===!0,rL=e=>Zs(e)&&e.wrapper!==!0,Qn=e=>ei(e,"selector"),jt=e=>ei(e,"inline"),iL=e=>Qn(e)&&jt(e)&&ni(mt(e,"mixed"),!0),pm=e=>Qn(e)&&e.expand!==!1&&!jt(e),aL=e=>{const t=[];let n=e;for(;n;){if(Y(n)&&n.data!==Wt||n.childNodes.length>1)return[];he(n)&&t.push(n),n=n.firstChild}return t},Vv=e=>aL(e).length>0,gm=e=>Xn(e.dom)&&Vv(e.dom),ki=Zn,Wv=Lc,jv=um,lL=cm,cL=e=>St(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,qv=(e,t)=>{let n=t;for(;n;){if(he(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Kv=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},uL=(e,t,n)=>Kv(e,t,n,s=>Oc(s)||Tr(s)),fL=(e,t,n)=>Kv(e,t,n,nm),Gv=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(m,p,g)=>{const C=Sr(e),S=o?C.backwards:C.forwards;return b.from(S(m,p,(y,_)=>ki(y.parentNode)?-1:(i=y,g(o,y,_)),a))};return c(n,s,uL).bind(m=>r?c(m.container,m.offset+(o?-1:0),fL):b.some(m)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},Yv=(e,t,n,s,o)=>{const r=s[o];Y(s)&&la(s.data)&&r&&(s=r);const i=Wv(e,s);for(let a=0;a<i.length;a++)for(let c=0;c<t.length;c++){const f=t[c];if(!(ee(f.collapsed)&&f.collapsed!==n.collapsed)&&Qn(f)&&e.is(i[a],f.selector))return i[a]}return s},Xv=(e,t,n,s)=>{var o;let r=n;const i=e.getRoot(),a=t[0];if(Zs(a)&&(r=a.wrapper?null:e.getParent(n,a.block,i)),!r){const c=(o=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&o!==void 0?o:i;r=e.getParent(Y(n)?n.parentNode:n,f=>f!==i&&lL(e.schema,f),c)}if(r&&Zs(a)&&a.wrapper&&(r=Wv(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!fm(r,"br")););return r||n},Zv=(e,t,n,s)=>{const o=n.parentNode;return ee(n[s])?!1:o===t||dt(o)||e.isBlock(o)?!0:Zv(e,t,o,s)},$c=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(Y(n)&&!jv(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const f=Y(c)&&!Zv(e,a,c,i);if(!ki(c)&&!cL(c)&&!jv(c,f))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},Qv=e=>ki(e.parentNode)||ki(e),Rr=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=n[0];return he(o)&&o.hasChildNodes()&&(o=Mo(o,r),Y(o)&&(r=0)),he(i)&&i.hasChildNodes()&&(i=Mo(i,t.collapsed?a:a-1),Y(i)&&(a=i.data.length)),o=qv(e,o),i=qv(e,i),Qv(o)&&(o=ki(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,Y(o)&&(r=t.collapsed?o.length:0)),Qv(i)&&(i=ki(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,Y(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(Gv(e,e.getRoot(),o,r,!0,s).each(({container:p,offset:g})=>{o=p,r=g}),Gv(e,e.getRoot(),i,a,!1,s).each(({container:p,offset:g})=>{i=p,a=g})),(jt(c)||c.block_expand)&&((!jt(c)||!Y(o)||r===0)&&(o=$c(e,n,o,r,!0)),(!jt(c)||!Y(i)||a===i.data.length)&&(i=$c(e,n,i,a,!1))),pm(c)&&(o=Yv(e,n,t,o,"previousSibling"),i=Yv(e,n,t,i,"nextSibling")),(Zs(c)||Qn(c))&&(o=Xv(e,n,o,"previousSibling"),i=Xv(e,n,i,"nextSibling"),Zs(c)&&(e.isBlock(o)||(o=$c(e,n,o,r,!0),Y(o)&&(r=0)),e.isBlock(i)||(i=$c(e,n,i,a,!1),Y(i)&&(a=i.data.length)))),he(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),he(i)&&i.parentNode&&(a=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},Ka=(e,t,n)=>{var s;const o=t.startOffset,r=Mo(t.startContainer,o),i=t.endOffset,a=Mo(t.endContainer,i-1),c=_=>{const k=_[0];Y(k)&&k===r&&o>=k.data.length&&_.splice(0,1);const T=_[_.length-1];return i===0&&_.length>0&&T===a&&Y(T)&&_.splice(_.length-1,1),_},f=(_,k,T)=>{const A=[];for(;_&&_!==T;_=_[k])A.push(_);return A},m=(_,k)=>e.getParent(_,T=>T.parentNode===k,k),p=(_,k,T)=>{const A=T?"nextSibling":"previousSibling";for(let D=_,V=D.parentNode;D&&D!==k;D=V){V=D.parentNode;const X=f(D===_?D:D[A],A);X.length&&(T||X.reverse(),n(c(X)))}};if(r===a)return n(c([r]));const g=(s=e.findCommonAncestor(r,a))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,a))return p(r,g,!0);if(e.isChildOf(a,r))return p(a,g);const C=m(r,g)||r,S=m(a,g)||a;p(r,C,!0);const y=f(C===r?C:C.nextSibling,"nextSibling",S===a?S.nextSibling:S);y.length&&n(c(y)),p(a,S)},dL=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],mL=e=>Nn(e)&&Pa(e)===Wt,pL=(e,t,n,s)=>xs(t).fold(()=>"skipping",o=>s==="br"||mL(t)?"valid":hD(t)?"existing":Xn(t.dom)?"caret":z(dL,r=>_s(t,r))?"valid-block":!xi(e,n,s)||!xi(e,Ve(o),n)?"invalid-child":"valid"),gL=(e,t)=>{const n=Rr(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Jv=(e,t,n,s,o,r)=>{const{uid:i=t,...a}=n;oi(e,ka()),Jt(e,`${di()}`,i),Jt(e,`${vr()}`,s);const{attributes:c={},classes:f=[]}=o(i,a);if(fo(e,c),ED(e,f),r){f.length>0&&Jt(e,`${Aa()}`,f.join(","));const m=On(c);m.length>0&&Jt(e,`${Ta()}`,m.join(","))}},hL=e=>{da(e,ka()),en(e,`${di()}`),en(e,`${vr()}`),en(e,`${Na()}`);const t=mo(e,`${Ta()}`).map(s=>s.split(",")).getOr([]),n=mo(e,`${Aa()}`).map(s=>s.split(",")).getOr([]);N(t,s=>en(e,s)),SD(e,n),en(e,`${Aa()}`),en(e,`${Ta()}`)},eE=(e,t,n,s,o)=>{const r=w.fromTag("span",e);return Jv(r,t,n,s,o,!1),r},bL=(e,t,n,s,o,r)=>{const i=[],a=eE(e.getDoc(),n,r,s,o),c=Co(),f=()=>{c.clear()},m=()=>c.get().getOrThunk(()=>{const S=Er(a);return i.push(S),c.set(S),S}),p=S=>{N(S,g)},g=S=>{switch(pL(e,S,"span",Ve(S))){case"invalid-child":{f();const _=dn(S);p(_),f();break}case"valid-block":{f(),Jv(S,n,r,s,o,!0);break}case"valid":{const _=m();oC(S,_);break}}},C=S=>{const y=q(S,w.fromDom);p(y)};return Ka(e.dom,t,S=>{f(),C(S)}),i},CL=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=wi(e).length>0,a=Ra("mce-annotation");if(r.collapsed&&!i&&gL(e,r),o.getRng().collapsed&&!i){const c=eE(e.getDoc(),a,s,t,n.decorate);rc(c,Vt),o.getRng().insertNode(c.dom),o.select(c.dom)}else Fv(o,!1,()=>{am(e,c=>{bL(e,c,a,t,n.decorate,s)})})})},tE=e=>{const t=yD();CD(e,t);const n=bD(e,t),s=ec("span"),o=r=>{N(r,i=>{s(i)?Bo(i):hL(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{CL(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{JC(e,b.some(r)).each(({elements:i})=>{const a=e.selection.getBookmark();o(i),e.selection.moveToBookmark(a)})},removeAll:r=>{const i=e.selection.getBookmark();lt(ny(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=ny(e,r);return oa(i,a=>q(a,c=>c.dom))}}},Ga=e=>({getBookmark:fe(WI,e),moveToBookmark:fe(jI,e)});Ga.isBookmarkNode=Zn;const nE=(e,t,n)=>n.collapsed?!1:z(n.getClientRects(),s=>VD(s,e,t)),yL=(e,t)=>e.dispatch("PreProcess",t),vL=(e,t)=>e.dispatch("PostProcess",t),EL=e=>{e.dispatch("remove")},SL=e=>{e.dispatch("detach")},_L=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},wL=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},xL=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},kL=e=>{e.dispatch("PreInit")},NL=e=>{e.dispatch("PostRender")},AL=e=>{e.dispatch("Init")},TL=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},sE=(e,t,n)=>{e.dispatch(t,n)},oE=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},rE=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},RL=(e,t)=>e.dispatch("BeforeSetContent",t),iE=(e,t)=>e.dispatch("SetContent",t),PL=(e,t)=>e.dispatch("BeforeGetContent",t),aE=(e,t)=>e.dispatch("GetContent",t),DL=(e,t)=>{e.dispatch("AutocompleterStart",t)},OL=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},hm=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},BL=e=>{e.dispatch("AutocompleterEnd")},IL=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),LL=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),lE=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),$L=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),le={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||le.metaKeyPressed(e),metaKeyPressed:e=>je.os.isMacOS()||je.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Pr="data-mce-selected",FL="table,img,figure.image,hr,video,span.mce-preview-object,details",cE=Math.abs,Fc=Math.round,bm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ML=e=>e.type==="longpress"||e.type.indexOf("touch")===0,uE=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,f,m,p,g,C,S,y,_,k,T,A,D,V,X;const se=ne=>ee(ne)&&(bC(ne)||n.is(ne,"figure.image")),M=ne=>qs(ne)||n.hasClass(ne,"mce-preview-object"),I=(ne,Pe)=>{if(ML(ne)){const Ie=ne.touches[0];return se(ne.target)&&!nE(Ie.clientX,Ie.clientY,Pe)}else return se(ne.target)&&!nE(ne.clientX,ne.clientY,Pe)},H=ne=>{const Pe=ne.target;I(ne,t.selection.getRng())&&!ne.isDefaultPrevented()&&t.selection.select(Pe)},ue=ne=>n.hasClass(ne,"mce-preview-object")&&ee(ne.firstElementChild)?[ne,ne.firstElementChild]:n.is(ne,"figure.image")?[ne.querySelector("img")]:[ne],be=ne=>{const Pe=Jy(t);return!Pe||ne.getAttribute("data-mce-resize")==="false"||ne===t.getBody()?!1:n.hasClass(ne,"mce-preview-object")&&ee(ne.firstElementChild)?_s(w.fromDom(ne.firstElementChild),Pe):_s(w.fromDom(ne),Pe)},Re=(ne,Pe)=>{if(M(Pe))return ne.create("img",{src:je.transparentSrc});if(js(Pe)){const Lt=zt(f.name,"n")?Ht:Ss,qe=Pe.cloneNode(!0);return Lt(ne.select("tr",qe)).each(Ot=>{const os=ne.select("td,th",Ot);ne.setStyle(Ot,"height",null),N(os,Is=>ne.setStyle(Is,"height",null))}),qe}else return Pe.cloneNode(!0)},Oe=(ne,Pe,Ie)=>{if(ee(Ie)){const Lt=ue(ne);N(Lt,qe=>{qe.style[Pe]||!t.schema.isValid(qe.nodeName.toLowerCase(),Pe)?n.setStyle(qe,Pe,Ie):n.setAttrib(qe,Pe,""+Ie)})}},We=(ne,Pe,Ie)=>{Oe(ne,"width",Pe),Oe(ne,"height",Ie)},Ge=ne=>{let Pe,Ie,Lt,qe,Ot;Pe=ne.screenX-p,Ie=ne.screenY-g,A=Pe*f[2]+y,D=Ie*f[3]+_,A=A<5?5:A,D=D<5?5:D,(se(i)||M(i))&&rB(t)!==!1?Lt=!le.modifierPressed(ne):Lt=le.modifierPressed(ne),Lt&&(cE(Pe)>cE(Ie)?(D=Fc(A*k),A=Fc(D/k)):(A=Fc(D/k),D=Fc(A*k))),We(a,A,D),qe=f.startPos.x+Pe,Ot=f.startPos.y+Ie,qe=qe>0?qe:0,Ot=Ot>0?Ot:0,n.setStyles(c,{left:qe,top:Ot,display:"block"}),c.innerHTML=A+" &times; "+D,f[2]<0&&a.clientWidth<=A&&n.setStyle(a,"left",C+(y-A)),f[3]<0&&a.clientHeight<=D&&n.setStyle(a,"top",S+(_-D)),Pe=r.scrollWidth-V,Ie=r.scrollHeight-X,Pe+Ie!==0&&n.setStyles(c,{left:qe-Pe,top:Ot-Ie}),T||(wL(t,i,y,_,"corner-"+f.name),T=!0)},gt=()=>{const ne=T;T=!1,ne&&(Oe(i,"width",A),Oe(i,"height",D)),n.unbind(s,"mousemove",Ge),n.unbind(s,"mouseup",gt),o!==s&&(n.unbind(o,"mousemove",Ge),n.unbind(o,"mouseup",gt)),n.remove(a),n.remove(c),n.remove(m),Zt(i),ne&&(xL(t,i,A,D,"corner-"+f.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Zt=ne=>{te();const Pe=n.getPos(ne,r),Ie=Pe.x,Lt=Pe.y,qe=ne.getBoundingClientRect(),Ot=qe.width||qe.right-qe.left,os=qe.height||qe.bottom-qe.top;i!==ne&&(J(),i=ne,A=D=0);const Is=t.dispatch("ObjectSelected",{target:ne});be(ne)&&!Is.isDefaultPrevented()?lt(bm,(bn,$n)=>{const rs=is=>{const Ce=ue(i)[0];p=is.screenX,g=is.screenY,y=Ce.clientWidth,_=Ce.clientHeight,k=_/y,f=bn,f.name=$n,f.startPos={x:Ot*bn[0]+Ie,y:os*bn[1]+Lt},V=r.scrollWidth,X=r.scrollHeight,m=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(m,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=Re(n,i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Ie,top:Lt,margin:0}),We(a,Ot,os),a.removeAttribute(Pr),r.appendChild(a),n.bind(s,"mousemove",Ge),n.bind(s,"mouseup",gt),o!==s&&(n.bind(o,"mousemove",Ge),n.bind(o,"mouseup",gt)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+_)};let Fn=n.get("mceResizeHandle"+$n);Fn&&n.remove(Fn),Fn=n.add(r,"div",{id:"mceResizeHandle"+$n,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+$n+"-resize; margin:0; padding:0"}),n.bind(Fn,"mousedown",is=>{is.stopImmediatePropagation(),is.preventDefault(),rs(is)}),bn.elm=Fn,n.setStyles(Fn,{left:Ot*bn[0]+Ie-Fn.offsetWidth/2,top:os*bn[1]+Lt-Fn.offsetHeight/2})}):J(!1)},et=hc(Zt,0),J=(ne=!0)=>{et.cancel(),te(),i&&ne&&i.removeAttribute(Pr),lt(bm,(Pe,Ie)=>{const Lt=n.get("mceResizeHandle"+Ie);Lt&&(n.unbind(Lt),n.remove(Lt))})},ge=(ne,Pe)=>n.isChildOf(ne,Pe),Ue=ne=>{if(T||t.removed||t.composing)return;const Pe=ne.type==="mousedown"?ne.target:e.getNode(),Ie=ai(w.fromDom(Pe),FL).map(qe=>qe.dom).filter(qe=>n.isEditable(qe.parentElement)||qe.nodeName==="IMG"&&n.isEditable(qe)).getOrUndefined(),Lt=ee(Ie)?n.getAttrib(Ie,Pr,"1"):"1";if(N(n.select(`img[${Pr}],hr[${Pr}]`),qe=>{qe.removeAttribute(Pr)}),ee(Ie)&&ge(Ie,r)&&t.hasFocus()){ve();const qe=e.getStart(!0);if(ge(qe,Ie)&&ge(e.getEnd(!0),Ie)){n.setAttrib(Ie,Pr,Lt),et.throttle(Ie);return}}J()},te=()=>{lt(bm,ne=>{ne.elm&&(n.unbind(ne.elm),delete ne.elm)})},ve=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{ve(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ue),t.on("keyup compositionend",ne=>{i&&i.nodeName==="TABLE"&&Ue(ne)}),t.on("hide blur",J),t.on("contextmenu longpress",H,!0)}),t.on("remove",te),{isResizable:be,showResizeRect:Zt,hideResizeRect:J,updateResizeRect:Ue,destroy:()=>{et.cancel(),i=a=m=null}}},UL=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},HL=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},fE=(e,t,n)=>{const s=e.document.createRange();return UL(s,t),HL(s,n),s},Cm=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Ya=Ks.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dE=(e,t,n)=>t(w.fromDom(n.startContainer),n.startOffset,w.fromDom(n.endContainer),n.endOffset),zL=(e,t)=>t.match({domRange:n=>({ltr:G(n),rtl:b.none}),relative:(n,s)=>({ltr:Ms(()=>fE(e,n,s)),rtl:Ms(()=>b.some(fE(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Ms(()=>Cm(e,n,s,o,r)),rtl:Ms(()=>b.some(Cm(e,o,r,n,s)))})}),VL=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Ya.rtl(w.fromDom(o.endContainer),o.endOffset,w.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>dE(e,Ya.ltr,n)):dE(e,Ya.ltr,n)},WL=(e,t)=>{const n=zL(e,t);return VL(e,n)};Ya.ltr,Ya.rtl;const mE={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},jL=(e,t,n)=>{var s;return b.from((s=e.caretPositionFromPoint)===null||s===void 0?void 0:s.call(e,t,n)).bind(o=>{if(o.offsetNode===null)return b.none();const r=e.createRange();return r.setStart(o.offsetNode,o.offset),r.collapse(),b.some(r)})},qL=(e,t,n)=>{var s;return b.from((s=e.caretRangeFromPoint)===null||s===void 0?void 0:s.call(e,t,n))},KL=(e,t,n)=>e.caretPositionFromPoint?jL(e,t,n):e.caretRangeFromPoint?qL(e,t,n):b.none(),GL=(e,t,n)=>{const s=e.document;return KL(s,t,n).map(o=>mE.create(w.fromDom(o.startContainer),o.startOffset,w.fromDom(o.endContainer),o.endOffset))},ym=Ks.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),YL=(e,t,n,s)=>e.fold(t,n,s),XL=e=>e.fold(It,It,It),ZL=ym.before,QL=ym.on,JL=ym.after,vo={before:ZL,on:QL,after:JL,cata:YL,getStart:XL},Mc=Ks.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),e$=e=>Mc.exact(e.start,e.soffset,e.finish,e.foffset),t$=e=>e.match({domRange:t=>w.fromDom(t.startContainer),relative:(t,n)=>vo.getStart(t),exact:(t,n,s,o)=>t}),n$=Mc.domRange,s$=Mc.relative,o$=Mc.exact,r$=e=>{const t=t$(e);return pa(t)},i$=mE.create,Ni={domRange:n$,relative:s$,exact:o$,exactFromRange:e$,getWin:r$,range:i$},Uc=(e,t)=>{const n=Ve(e);return n==="input"?vo.after(e):R(["br","img"],n)?t===0?vo.before(e):vo.after(e):vo.on(e,t)},a$=(e,t)=>{const n=e.fold(vo.before,Uc,vo.after),s=t.fold(vo.before,Uc,vo.after);return Ni.relative(n,s)},pE=(e,t,n,s)=>{const o=Uc(e,t),r=Uc(n,s);return Ni.relative(o,r)},l$=e=>e.match({domRange:t=>{const n=w.fromDom(t.startContainer),s=w.fromDom(t.endContainer);return pE(n,t.startOffset,s,t.endOffset)},relative:a$,exact:pE}),vm=(e,t)=>{const s=document.createDocumentFragment();return N(e,o=>{s.appendChild(o.dom)}),w.fromDom(s)},c$=e=>{const t=Ni.getWin(e).dom,n=(o,r,i,a)=>Cm(t,o,r,i,a),s=l$(e);return WL(t,s).match({ltr:n,rtl:n})},u$=(e,t,n)=>GL(e,t,n),gE=(e,t,n)=>{const s=pa(w.fromDom(n));return u$(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},Em=(e,t)=>ee(e)&&ee(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,f$=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},hE=(e,t,n)=>f$(e,t,n)!==null,d$=(e,t,n)=>hE(e,t,s=>s.nodeName===n),m$=(e,t)=>Gn(e)&&!hE(e,t,Xn),bE=(e,t,n)=>{const s=t.parentNode;if(s){const o=new Gt(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(St(r))return!0}return!1},p$=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},g$=(e,t)=>{let n=t;for(;n&&n!==e;){if(ct(n))return!0;n=n.parentNode}return!1},Sm=(e,t,n,s,o)=>{const r=e.getRoot(),i=e.schema.getNonEmptyElements(),a=o.parentNode;let c,f;if(!a)return b.none();const m=e.getParent(a,e.isBlock)||r;if(s&&St(o)&&t&&e.isEmpty(m))return b.some(F(a,e.nodeIndex(o)));const p=new Gt(o,m);for(;f=p[s?"prev":"next"]();){if(e.getContentEditableParent(f)==="false"||m$(f,r))return b.none();if(Y(f)&&f.data.length>0)return d$(f,r,"A")?b.none():b.some(F(f,s?f.data.length:0));if(e.isBlock(f)||i[f.nodeName.toLowerCase()])return b.none();c=f}return Io(c)?b.none():n&&c?b.some(F(c,0)):b.none()},CE=(e,t,n,s)=>{const o=e.getRoot();let r,i=!1,a=n?s.startContainer:s.endContainer,c=n?s.startOffset:s.endOffset;const f=he(a)&&c===a.childNodes.length,m=e.schema.getNonEmptyElements();let p=n;if(Gn(a))return b.none();if(he(a)&&c>a.childNodes.length-1&&(p=!1),va(a)&&(a=o,c=0),a===o){if(p&&(r=a.childNodes[c>0?c-1:0],r&&(Gn(r)||m[r.nodeName]||js(r))))return b.none();if(a.hasChildNodes()){if(c=Math.min(!p&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=Y(a)&&f?a.data.length:0,!t&&a===o.lastChild&&js(a)||g$(o,a)||Gn(a)||rd(a))return b.none();if(a.hasChildNodes()&&!js(a)){r=a;const g=new Gt(a,o);do{if(ct(r)||Gn(r)){i=!1;break}if(Y(r)&&r.data.length>0){c=p?0:r.data.length,a=r,i=!0;break}if(m[r.nodeName.toLowerCase()]&&!JP(r)){c=e.nodeIndex(r),a=r.parentNode,p||c++,i=!0;break}}while(r=p?g.next():g.prev())}}}return t&&(Y(a)&&c===0&&Sm(e,f,t,!0,a).each(g=>{a=g.container(),c=g.offset(),i=!0}),he(a)&&(r=a.childNodes[c],r||(r=a.childNodes[c-1]),r&&St(r)&&!p$(r,"A")&&!bE(e,r,!1)&&!bE(e,r,!0)&&Sm(e,f,t,!0,r).each(g=>{a=g.container(),c=g.offset(),i=!0}))),p&&!t&&Y(a)&&c===a.data.length&&Sm(e,f,t,!1,a).each(g=>{a=g.container(),c=g.offset(),i=!0}),i&&a?b.some(F(a,c)):b.none()},Hc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=F.fromRangeStart(t);return CE(e,n,!0,s).each(r=>{(!n||!F.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||CE(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),Em(t,s)?b.none():b.some(s)},zc=(e,t)=>e.splitText(t),Vc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&Y(t)){if(n>0&&n<t.data.length)if(s=zc(t,n),t=s.previousSibling,o>n){o=o-n;const r=zc(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(Y(t)&&n>0&&n<t.data.length&&(t=zc(t,n),n=0),Y(s)&&o>0&&o<s.data.length){const r=zc(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},Dr=e=>({walk:(r,i)=>Ka(e,r,i),split:Vc,expand:(r,i={type:"word"})=>{if(i.type==="word"){const a=Rr(e,r,[{inline:"span"}]),c=e.createRng();return c.setStart(a.startContainer,a.startOffset),c.setEnd(a.endContainer,a.endOffset),c}return r},normalize:r=>Hc(e,r).fold(st,i=>(r.setStart(i.startContainer,i.startOffset),r.setEnd(i.endContainer,i.endOffset),!0))});Dr.compareRanges=Em,Dr.getCaretRangeFromPoint=gE,Dr.getSelectedNode=Ec,Dr.getNode=Mo;const h$=((e,t)=>{const n=(a,c)=>{if(!vn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const f=a.dom;ba(f)&&(f.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const f=Ws(a,e);return parseFloat(f)||0}return c},o=s,r=(a,c)=>re(c,(f,m)=>{const p=Ws(a,m),g=p===void 0?0:parseInt(p,10);return isNaN(g)?f:f+g},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,f)=>{const m=r(a,f);return c>m?c-m:0}}})("height",e=>{const t=e.dom;return ii(e)?t.getBoundingClientRect().height:t.offsetHeight}),b$=e=>h$.get(e),yE=()=>w.fromDom(document),vE=(e,t)=>e.view(t).fold(G([]),s=>{const o=e.owner(s),r=vE(e,o);return[s].concat(r)}),C$=(e,t)=>{const n=t.owner(e);return vE(t,n)};var y$=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(w.fromDom)},owner:e=>Po(e)});const v$=e=>{const t=yE(),n=td(t),s=C$(e,y$),o=ed(e),r=ye(s,(i,a)=>{const c=ed(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return ci(r.left+o.left+n.left,r.top+o.top+n.top)},_m=e=>Ve(e)==="textarea",E$=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),S$=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},_$=(e,t)=>{const n=dn(e);if(n.length===0||_m(e))return{element:e,offset:t};if(t<n.length&&!_m(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return _m(s)?{element:e,offset:t}:Ve(s)==="img"?{element:s,offset:1}:Nn(s)?{element:s,offset:Pa(s).length}:{element:s,offset:dn(s).length}}},EE=(e,t)=>{const n=MP(e),s=b$(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},w$=(e,t)=>{const n=_$(e,t),s=w.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Wt+"</span>");return Bn(n.element,s),EE(s,()=>pt(s))},x$=e=>EE(w.fromDom(e),Te),SE=(e,t,n,s)=>{N$(e,(o,r)=>k$(e,t,n,s),n)},_E=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(E$(e,r))return;const i=td(t).top;n(e,t,i,s,o),S$(e,r)},k$=(e,t,n,s)=>{const o=w.fromDom(e.getBody()),r=w.fromDom(e.getDoc());AP(o);const i=w$(w.fromDom(n.startContainer),n.startOffset);_E(e,r,t,i,s),i.cleanup()},wE=(e,t,n,s)=>{const o=w.fromDom(e.getDoc());_E(e,o,n,x$(t),s)},N$=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(w.fromDom(s),w.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},wm=(e,t,n,s,o)=>{const r=t.pos;if(s)aC(r.left,r.top,o);else{const i=r.top-n+t.height;aC(-e.getBody().getBoundingClientRect().left,i,o)}},xE=(e,t,n,s,o,r)=>{const i=s+n,a=o.pos.top,c=o.bottom,f=c-a>=s;a<n?wm(e,o,s,r!==!1,t):a>i?wm(e,o,s,f?r!==!1:r===!0,t):c>i&&!f&&wm(e,o,s,r===!0,t)},kE=(e,t,n,s,o)=>{const r=pa(t).dom.innerHeight;xE(e,t,n,r,s,o)},NE=(e,t,n,s,o)=>{const r=pa(t).dom.innerHeight;xE(e,t,n,r,s,o);const i=v$(s.element),a=uC(window);i.top<a.y?lC(s.element,o!==!1):i.top>a.bottom&&lC(s.element,o===!0)},A$=(e,t,n)=>SE(e,kE,t,n),T$=(e,t,n)=>wE(e,t,kE,n),R$=(e,t,n)=>SE(e,NE,t,n),P$=(e,t,n)=>wE(e,t,NE,n),D$=(e,t,n)=>{(e.inline?T$:P$)(e,t,n)},Xa=(e,t,n)=>{(e.inline?A$:R$)(e,t,n)},AE=(e,t=!1)=>e.dom.focus({preventScroll:t}),TE=e=>{const t=Oo(e).dom;return e.dom===t.activeElement},xm=(e=yE())=>b.from(e.dom.activeElement).map(w.fromDom),O$=e=>xm(Oo(e)).filter(t=>e.dom.contains(t.dom)),RE=(e,t)=>{const n=Nn(t)?Pa(t).length:dn(t).length+1;return e>n?n:e<0?0:e},B$=e=>Ni.range(e.start,RE(e.soffset,e.start),e.finish,RE(e.foffset,e.finish)),PE=(e,t)=>!ac(t.dom)&&(ws(e,t)||Qe(e,t)),DE=e=>t=>PE(e,t.start)&&PE(e,t.finish),I$=e=>e.inline||je.browser.isFirefox(),L$=e=>Ni.range(w.fromDom(e.startContainer),e.startOffset,w.fromDom(e.endContainer),e.endOffset),$$=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(L$)},F$=e=>{const t=pa(e);return $$(t.dom).filter(DE(e))},M$=(e,t)=>b.from(t).filter(DE(e)).map(B$),U$=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},Wc=e=>{const t=I$(e)?F$(w.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},km=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>M$(w.fromDom(e.getBody()),n)).bind(U$),H$=e=>{km(e).each(t=>e.selection.setRng(t))},OE={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},z$=(e,t)=>(vn(t)||(t=0),setTimeout(e,t)),V$=(e,t)=>(vn(t)||(t=0),setInterval(e,t)),Jn={setEditorTimeout:(e,t,n)=>z$(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=V$(()=>{e.removed?clearInterval(s):t()},n);return s}},W$=e=>e.type==="nodechange"&&e.selectionChange,j$=(e,t)=>{const n=()=>{t.throttle()};at.DOM.bind(document,"mouseup",n),e.on("remove",()=>{at.DOM.unbind(document,"mouseup",n)})},q$=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},K$=(e,t)=>{q$(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{W$(n)||Wc(e)})},G$=e=>{const t=hc(()=>{Wc(e)},0);e.on("init",()=>{e.inline&&j$(e,t),K$(e,t)}),e.on("remove",()=>{t.cancel()})};let Ai;const Nm=at.DOM,Y$=e=>he(e)&&OE.isEditorUIElement(e),Am=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},jc=(e,t)=>{const n=pB(e);return Nm.getParent(t,o=>Y$(o)||(n?e.dom.is(o,n):!1))!==null},Tm=e=>{try{const t=Oo(w.fromDom(e.getElement()));return xm(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},X$=(e,t)=>{const n=t.editor;G$(n);const s=(o,r)=>{if(GB(o)&&o.inline!==!0){const i=w.fromDom(o.getContainer());r(i,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;Am(Tm(n))&&s(n,oi),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Jn.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!Am(Tm(n))||o!==n)&&s(n,da),!jc(n,Tm(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ai||(Ai=o=>{const r=e.activeEditor;r&&Qb(o).each(i=>{const a=i;a.ownerDocument===document&&a!==document.body&&!jc(r,a)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Nm.bind(document,"focusin",Ai))},Z$=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ai&&(Nm.unbind(document,"focusin",Ai),Ai=null)},Q$=e=>{e.on("AddEditor",fe(X$,e)),e.on("RemoveEditor",fe(Z$,e))},J$=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),eF=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="false")!==null,tF=e=>e.collapsed?b.from(Mo(e.startContainer,e.startOffset)).map(w.fromDom):b.none(),nF=(e,t)=>tF(t).bind(n=>OD(n)?b.some(n):ws(e,n)?b.none():b.some(e)),BE=(e,t)=>{nF(w.fromDom(e.getBody()),t).bind(n=>hn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},qc=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},sF=e=>TE(e)||O$(e).isSome(),oF=e=>ee(e.iframeElement)&&TE(w.fromDom(e.iframeElement)),rF=e=>{const t=e.getBody();return t&&sF(w.fromDom(t))},iF=e=>{const t=Oo(w.fromDom(e.getElement()));return xm(t).filter(n=>!Am(n.dom)&&jc(e,n.dom)).isSome()},Ti=e=>e.inline?rF(e):oF(e),IE=e=>Ti(e)||iF(e),aF=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable();const o=i=>{km(i).each(a=>{i.selection.setRng(a),s=a})};!Ti(e)&&e.hasEditableRoot()&&o(e);const r=J$(e,t.getNode());if(r&&e.dom.isChildOf(r,n)){eF(e,r)||qc(n),qc(r),e.hasEditableRoot()||o(e),BE(e,s),Rm(e);return}e.inline||(je.browser.isOpera()||qc(n),e.getWin().focus()),(je.browser.isFirefox()||e.inline)&&(qc(n),BE(e,s)),Rm(e)},Rm=e=>e.editorManager.setActive(e),lF=(e,t)=>{e.removed||(t?Rm(e):aF(e))},LE=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),$E=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(w.fromDom).map(a=>!s||!t.collapsed?ri(a,o(a,i)).getOr(a):a).bind(a=>Vn(a)?b.some(a):xs(a).filter(Vn)).map(a=>a.dom).getOr(e)},FE=(e,t,n=!1)=>$E(e,t,!0,n,(s,o)=>Math.min(Kf(s),o)),ME=(e,t,n=!1)=>$E(e,t,!1,n,(s,o)=>o>0?o-1:o),UE=(e,t)=>{const n=e;for(;e&&Y(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},cF=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(i=n.childNodes[o]),Y(n)&&Y(s)&&(n.length===o?n=UE(n.nextSibling,!0):n=n.parentNode,r===0?s=UE(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(i=n)));const a=Y(i)?i.parentNode:i;return ho(a)?a:e},uF=(e,t,n,s)=>{const o=[],r=e.getRoot(),i=e.getParent(n||FE(r,t,t.collapsed),e.isBlock),a=e.getParent(s||ME(r,t,t.collapsed),e.isBlock);if(i&&i!==r&&o.push(i),i&&a&&i!==a){let c;const f=new Gt(i,r);for(;(c=f.next())&&c!==a;)e.isBlock(c)&&o.push(c)}return a&&i!==a&&a!==r&&o.push(a),o},fF=(e,t,n)=>b.from(t).bind(s=>b.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),i=e.createRng();return i.setStart(o,r),i.setEnd(o,r+1),n&&(im(e,i,s,!0),im(e,i,s,!1)),i})),Pm=(e,t)=>q(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),dF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Kc=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},mF=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!ui(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},HE=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class _n{static create(t,n){const s=new _n(t,dF[t]||1);return n&&lt(n,(o,r)=>{s.attr(r,o)}),s}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!ae(t))return ee(t)&&lt(t,(r,i)=>{s.attr(i,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new _n(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Kc(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Kc(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let i=r.firstChild;if(HE(r))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||HE(i))return!1}if(i.type===8||i.type===3&&!mF(i)||i.type===3&&i.parent&&n[i.parent.name]&&ui((o=i.value)!==null&&o!==void 0?o:"")||s&&s(i))return!1}while(i=Kc(i,r));return!0}walk(t){return Kc(this,null,t)}}const pF=Q.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zE=e=>ae(e.nodeValue)&&e.nodeValue.includes(Wt),VE=e=>`${e.length===0?"":`${q(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,gF=(e,t)=>t.querySelectorAll(VE(e)),WE=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>zE(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),jE=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(zE(t)){const n=t.parentNode;return n&&Ne(pF,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),hF=e=>WE(e).nextNode()!==null,bF=e=>jE(e).nextNode()!==null,CF=(e,t)=>t.querySelector(VE(e))!==null,yF=(e,t)=>{N(gF(e,t),n=>{const s=w.fromDom(n);Wn(s,"data-mce-bogus")==="all"?pt(s):N(e,o=>{ua(s,o)&&en(s,o)})})},qE=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},vF=At(qE,WE),EF=At(qE,jE),KE=(e,t)=>{const n=[{condition:fe(CF,t),action:fe(yF,t)},{condition:hF,action:vF},{condition:bF,action:EF}];let s=e,o=!1;return N(n,({condition:r,action:i})=>{r(s)&&(o||(s=e.cloneNode(!0),o=!0),i(s))}),s},GE=e=>{const t=mn(e,"[data-mce-bogus]");N(t,n=>{Wn(n,"data-mce-bogus")==="all"?pt(n):_r(n)?(Bn(n,w.fromText(Ca)),pt(n)):Bo(n)})},YE=e=>{const t=mn(e,"input");N(t,n=>{en(n,"name")})},SF=(e,t)=>{const n=gn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},_F=(e,t)=>{const n=e.getDoc(),s=Oo(w.fromDom(e.getBody())),o=w.fromTag("div",n);Jt(o,"data-mce-bogus","all"),sc(o,{position:"fixed",left:"-9999999px",top:"0"}),rc(o,t.innerHTML),GE(o),YE(o);const r=yP(s);Ft(r,o);const i=jn(o.dom.innerText);return pt(o),i},wF=(e,t,n)=>{let s;return t.format==="raw"?s=Q.trim(jn(KE(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=_F(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=SF(e,e.serializer.serialize(n,t)),t.format!=="text"&&!bc(w.fromDom(n))&&ae(s)?Q.trim(s):s},xF=(e,t)=>b.from(e.getBody()).fold(G(t.format==="tree"?new _n("body",11):""),n=>wF(e,t,n)),XE=Q.makeMap,ZE=e=>{const t=[];e=e||{};const n=e.indent,s=XE(e.indent_before||""),o=XE(e.indent_after||""),r=Cr.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,f)=>{if(n&&s[a]&&t.length>0){const m=t[t.length-1];m.length>0&&m!==`
`&&t.push(`
`)}if(t.push("<",a),c)for(let m=0,p=c.length;m<p;m++){const g=c[m];t.push(" ",g.name,'="',r(g.value,!0),'"')}if(!f||i?t[t.length]=">":t[t.length]=" />",f&&n&&o[a]&&t.length>0){const m=t[t.length-1];m.length>0&&m!==`
`&&t.push(`
`)}},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Vo=(e={},t=Lo())=>{const n=ZE(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{var f;n.text((f=c.value)!==null&&f!==void 0?f:"",c.raw)},8:c=>{var f;n.comment((f=c.value)!==null&&f!==void 0?f:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var f;n.doctype((f=c.value)!==null&&f!==void 0?f:"")},4:c=>{var f;n.cdata((f=c.value)!==null&&f!==void 0?f:"")},11:c=>{let f=c;if(f=f.firstChild)do a(f);while(f=f.next)}};n.reset();const a=c=>{var f;const m=i[c.type];if(m)m(c);else{const p=c.name,g=p in t.getVoidElements();let C=c.attributes;if(r&&C&&C.length>1){const S=[];S.map={};const y=t.getElementRule(c.name);if(y){for(let _=0,k=y.attributesOrder.length;_<k;_++){const T=y.attributesOrder[_];if(T in C.map){const A=C.map[T];S.map[T]=A,S.push({name:T,value:A})}}for(let _=0,k=C.length;_<k;_++){const T=C[_].name;if(!(T in S.map)){const A=C.map[T];S.map[T]=A,S.push({name:T,value:A})}}C=S}}if(n.start(p,C,g),gr(p))ae(c.value)&&n.text(c.value,!0),n.end(p);else if(!g){let S=c.firstChild;if(S){(p==="pre"||p==="textarea")&&S.type===3&&((f=S.value)===null||f===void 0?void 0:f[0])===`
`&&n.text(`
`,!0);do a(S);while(S=S.next)}n.end(p)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},QE=new Set;N(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{QE.add(t)});const JE=new Set;N(["background-color"],t=>{JE.add(t)});const e0=["font","text-decoration","text-emphasis"],kF=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Ri=(e,t)=>On(kF(e,t)),NF=e=>QE.has(e),AF=e=>JE.has(e),t0=(e,t)=>z(Ri(e,t),n=>NF(n)),TF=(e,t)=>t0(e,t)&&z(Ri(e,t),n=>AF(n)),RF=e=>W(e,t=>z(e0,n=>zt(t,n))),PF=(e,t,n)=>{const s=Ri(e,t),o=Ri(e,n),r=i=>{var a,c;const f=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",m=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Us(f)&&Us(m)&&f!==m};return z(s,i=>{const a=c=>z(c,f=>f===i);if(!a(o)&&a(e0)){const c=RF(o);return z(c,r)}else return r(i)})},n0=(e,t,n)=>b.from(n.container()).filter(Y).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),Dm=fe(n0,!0,Tr),Om=fe(n0,!1,Tr),DF=e=>{const t=e.container();return Y(t)&&(t.data.length===0||Cc(t.data)&&Ga.isBookmarkNode(t.parentNode))},Wo=(e,t)=>n=>Yd(e?0:-1,n).filter(t).isSome(),s0=e=>bC(e)&&Ws(w.fromDom(e),"display")==="block",o0=e=>ct(e)&&!XP(e),OF=Wo(!0,s0),BF=Wo(!1,s0),Za=Wo(!0,qs),Qa=Wo(!1,qs),r0=Wo(!0,js),Bm=Wo(!1,js),jo=Wo(!0,o0),qo=Wo(!1,o0),IF=e=>e.slice(0,-1),LF=(e,t,n)=>ws(t,e)?IF(Yb(e,s=>n(s)||Qe(s,t))):[],i0=(e,t)=>LF(e,t,st),Eo=(e,t)=>[e].concat(i0(e,t)),Im=(e,t,n)=>Tv(e,t,n,DF),$F=e=>t=>e.isBlock(Ve(t)),a0=(e,t,n)=>me(Eo(w.fromDom(t.container()),e),$F(n)),l0=(e,t,n,s)=>Im(e,t.dom,n).forall(o=>a0(t,n,s).fold(()=>!Gs(o,n,t.dom),r=>!Gs(o,n,t.dom)&&ws(r,w.fromDom(o.container())))),c0=(e,t,n,s)=>a0(t,n,s).fold(()=>Im(e,t.dom,n).forall(o=>!Gs(o,n,t.dom)),o=>Im(e,o.dom,n).isNone()),Lm=fe(c0,!1),u0=fe(c0,!0),FF=fe(l0,!1),MF=fe(l0,!0),UF=e=>Tc(e).exists(_r),Gc=(e,t,n,s)=>{const o=W(Eo(w.fromDom(n.container()),t),i=>s.isBlock(Ve(i))),r=Ht(o).getOr(t);return Yn(e,r.dom,n).filter(UF)},$m=(e,t,n)=>Tc(t).exists(_r)||Gc(!0,e,t,n).isSome(),Yc=(e,t,n)=>xI(t).exists(_r)||Gc(!1,e,t,n).isSome(),f0=fe(Gc,!1),HF=fe(Gc,!0),d0=e=>F.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),m0=(e,t,n)=>{const s=W(Eo(w.fromDom(t.container()),e),o=>n.isBlock(Ve(o)));return Ht(s).getOr(e)},p0=(e,t,n)=>d0(t)?Om(t):Om(t)||In(m0(e,t,n).dom,t).exists(Om),g0=(e,t,n)=>d0(t)?Dm(t):Dm(t)||Tn(m0(e,t,n).dom,t).exists(Dm),zF=e=>R(["pre","pre-wrap"],e),Fm=e=>Tc(e).bind(t=>ur(t,Vn)).exists(t=>zF(Ws(t,"white-space"))),VF=(e,t)=>In(e.dom,t).isNone(),WF=(e,t)=>Tn(e.dom,t).isNone(),jF=(e,t,n)=>VF(e,t)||WF(e,t)||Lm(e,t,n)||u0(e,t,n)||Yc(e,t,n)||$m(e,t,n),qF=e=>ee(e)&&ct(e)&&hv(e),h0=(e,t)=>n=>qF(new Gt(n,e)[t]()),KF=(e,t)=>{const n=Tn(e.dom,t).getOr(t),s=h0(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},GF=(e,t)=>{const n=In(e.dom,t).getOr(t),s=h0(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},b0=(e,t,n)=>Fm(t)?!1:jF(e,t,n)||p0(e,t,n)||g0(e,t,n),Ja=(e,t,n)=>Fm(t)?!1:Lm(e,t,n)||FF(e,t,n)||Yc(e,t,n)||p0(e,t,n)||GF(e,t),YF=e=>{const t=e.container(),n=e.offset();return Y(t)&&n<t.data.length?F(t,n+1):e},el=(e,t,n)=>Fm(t)?!1:u0(e,t,n)||MF(e,t,n)||$m(e,t,n)||g0(e,t,n)||KF(e,t),Mm=(e,t,n)=>Ja(e,t,n)||el(e,YF(t),n),C0=(e,t)=>Oc(e.charAt(t)),y0=(e,t)=>Tr(e.charAt(t)),XF=e=>{const t=e.container();return Y(t)&&un(t.data,Vt)},ZF=e=>{const t=e.split("");return q(t,(n,s)=>Oc(n)&&s>0&&s<t.length-1&&nm(t[s-1])&&nm(t[s+1])?" ":n).join("")},v0=(e,t,n,s)=>{const o=t.data,r=F(t,0);return!n&&C0(o,0)&&!Mm(e,r,s)?(t.data=" "+o.slice(1),!0):n&&y0(o,0)&&Ja(e,r,s)?(t.data=Vt+o.slice(1),!0):!1},QF=e=>{const t=e.data,n=ZF(t);return n!==t?(e.data=n,!0):!1},E0=(e,t,n,s)=>{const o=t.data,r=F(t,o.length-1);return!n&&C0(o,o.length-1)&&!Mm(e,r,s)?(t.data=o.slice(0,-1)+" ",!0):n&&y0(o,o.length-1)&&el(e,r,s)?(t.data=o.slice(0,-1)+Vt,!0):!1},JF=(e,t,n)=>{const s=t.container();if(!Y(s))return b.none();if(XF(t)){const o=v0(e,s,!1,n)||QF(s)||E0(e,s,!1,n);return si(o,t)}else if(Mm(e,t,n)){const o=v0(e,s,!0,n)||E0(e,s,!0,n);return si(o,t)}else return b.none()},eM=e=>{const t=w.fromDom(e.getBody());e.selection.isCollapsed()&&JF(t,F.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},S0=(e,t,n,s)=>{if(n===0)return;const o=w.fromDom(e),r=po(o,f=>s.isBlock(Ve(f))).getOr(o),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&el(r,F(e,e.data.length),s),c=t===0&&Ja(r,F(e,0),s);e.replaceData(t,n,gC(i,4,c,a))},Xc=(e,t,n)=>{const s=e.data.slice(t),o=s.length-DR(s).length;S0(e,t,o,n)},Um=(e,t,n)=>{const s=e.data.slice(0,t),o=s.length-db(s).length;S0(e,t-o,o,n)},Hm=(e,t,n,s,o=!0)=>{const r=db(e.data).length,i=o?e:t,a=o?t:e;return o?i.appendData(a.data):i.insertData(0,a.data),pt(w.fromDom(a)),s&&Xc(i,r,n),i},tM=(e,t)=>{const n=e.container(),s=e.offset();return!F.isTextPosition(e)&&n===t.parentNode&&s>F.before(t).offset()},nM=(e,t)=>tM(t,e)?F(t.container(),t.offset()-1):t,sM=e=>Y(e)?F(e,0):F.before(e),oM=e=>Y(e)?F(e,e.data.length):F.after(e),_0=e=>Ts(e.previousSibling)?b.some(oM(e.previousSibling)):e.previousSibling?ds(e.previousSibling):b.none(),w0=e=>Ts(e.nextSibling)?b.some(sM(e.nextSibling)):e.nextSibling?hn(e.nextSibling):b.none(),rM=(e,t)=>b.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>In(e,F.before(n))).orThunk(()=>Tn(e,F.after(t))),iM=(e,t)=>Tn(e,F.after(t)).orThunk(()=>In(e,F.before(t))),aM=(e,t)=>_0(t).orThunk(()=>w0(t)).orThunk(()=>rM(e,t)),lM=(e,t)=>w0(t).orThunk(()=>_0(t)).orThunk(()=>iM(e,t)),cM=(e,t,n)=>e?lM(t,n):aM(t,n),uM=(e,t,n)=>cM(e,t,n).map(fe(nM,n)),x0=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},fM=e=>t=>t.dom===e,dM=(e,t)=>t&&Ne(e.schema.getBlockElements(),Ve(t)),mM=(e,t,n)=>{if(pn(e,t)){const s=w.fromHtml('<br data-mce-bogus="1">');return n?N(dn(t),o=>{gm(o)||pt(o)}):li(t),Ft(t,s),b.some(F.before(s.dom))}else return b.none()},pM=(e,t,n,s)=>{const o=Do(e).filter(Nn),r=ga(e).filter(Nn);return pt(e),YR(o,r,t,(i,a,c)=>{const f=i.dom,m=a.dom,p=f.data.length;return Hm(f,m,n,s),c.container()===m?F(f,p):c}).orThunk(()=>(s&&(o.each(i=>Um(i.dom,i.dom.length,n)),r.each(i=>Xc(i.dom,0,n))),t))},gM=(e,t)=>Ne(e.schema.getTextInlineElements(),Ve(t)),Or=(e,t,n,s=!0,o=!1)=>{const r=uM(t,e.getBody(),n.dom),i=po(n,fe(dM,e),fM(e.getBody())),a=pM(n,r,e.schema,gM(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(c=>mM(e.schema,c,o)).fold(()=>{s&&x0(e,t,a)},c=>{s&&x0(e,t,b.some(c))})},hM=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,bM=e=>hM.test(e),Br=(e,t)=>_s(w.fromDom(t),oB(e))&&!hr(e.schema,t)&&e.dom.isEditable(t),k0=e=>{var t;return at.DOM.getStyle(e,"direction",!0)==="rtl"||bM((t=e.textContent)!==null&&t!==void 0?t:"")},CM=(e,t,n)=>W(at.DOM.getParents(n.container(),"*",t),e),Ko=(e,t,n)=>{const s=CM(e,t,n);return b.from(s[s.length-1])},yM=(e,t,n)=>{const s=Ho(t,e),o=Ho(n,e);return ee(s)&&s===o},vM=e=>Rd(e)||Pd(e),es=(e,t)=>{const n=t.container(),s=t.offset();return e?Fo(n)?Y(n.nextSibling)?F(n.nextSibling,0):F.after(n):Rd(t)?F(n,s+1):t:Fo(n)?Y(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):Pd(t)?F(n,s-1):t},N0=fe(es,!0),A0=fe(es,!1),T0=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},EM=e=>{e.execCommand("delete")},Zc=e=>T0(e,"Delete"),R0=e=>T0(e,"ForwardDelete"),SM=e=>t=>ni(xs(t),e,Qe),_M=e=>cy(e)||pi(e),Qc=(e,t)=>ws(e,t)?ur(t,_M,SM(e)):b.none(),zm=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},P0=(e,t,n)=>fn(hn(n),ds(n),(s,o)=>{const r=es(!0,s),i=es(!1,o),a=es(!1,t);return e?Tn(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):In(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),D0=e=>(sP(e)?Do(e):qf(e)).bind(D0).orThunk(()=>b.some(e)),O0=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=D0(n).getOr(n),i=w.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?zm(e,s):pn(e.schema,i,{checkRootAsContent:!1})&&($o(i),s&&e.selection.setCursorLocation(i.dom,0)),!Qe(n,i)){const a=ni(xs(i),n)?[]:bP(i);N(a.concat(dn(n)),c=>{!Qe(c,i)&&!ws(c,i)&&pn(e.schema,c)&&pt(c)})}},wM=e=>t=>Qe(e,t),Vm=e=>mn(e,"td,th"),B0=(e,t)=>ja(w.fromDom(e),t),xM=e=>fn(e.startTable,e.endTable,(t,n)=>{const s=mC(t,r=>Qe(r,n)),o=mC(n,r=>Qe(r,t));return!s&&!o?e:{...e,startTable:s?b.none():e.startTable,endTable:o?b.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),kM=e=>xM(e),NM=(e,t)=>{const n=B0(e.startContainer,t),s=B0(e.endContainer,t),o=n.isSome(),r=s.isSome(),i=fn(n,s,Qe).getOr(!1);return kM({startTable:n,endTable:s,isStartInTable:o,isEndInTable:r,isSameTable:i,isMultiTable:!i&&o&&r})},Wm=(e,t)=>({start:e,end:t}),AM=(e,t,n)=>({rng:e,table:t,cells:n}),tl=Ks.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Jc=(e,t)=>ai(w.fromDom(e),"td,th",t),I0=e=>!Qe(e.start,e.end),L0=(e,t)=>ja(e.start,t).bind(n=>ja(e.end,t).bind(s=>si(Qe(n,s),n))),TM=(e,t)=>!I0(e)&&L0(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),RM=(e,t)=>{const n=Jc(e.startContainer,t),s=Jc(e.endContainer,t);return fn(n,s,Wm)},PM=e=>t=>ja(t,e).bind(n=>Ss(Vm(n)).map(s=>Wm(t,s))),DM=e=>t=>ja(t,e).bind(n=>Ht(Vm(n)).map(s=>Wm(s,t))),jm=e=>t=>L0(t,e).map(n=>AM(t,n,Vm(n))),$0=(e,t,n,s)=>{if(n.collapsed||!e.forall(I0))return b.none();if(t.isSameTable){const o=e.bind(jm(s));return b.some({start:o,end:o})}else{const o=Jc(n.startContainer,s),r=Jc(n.endContainer,s),i=o.bind(PM(s)).bind(jm(s)),a=r.bind(DM(s)).bind(jm(s));return b.some({start:i,end:a})}},F0=(e,t)=>Ae(e,n=>Qe(n,t)),qm=e=>fn(F0(e.cells,e.rng.start),F0(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),OM=(e,t,n)=>e.exists(s=>TM(s,n)&&rm(s.start,t)),M0=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},BM=(e,t,n,s)=>$0(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=qm(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(tl.fullTable(o.table));if(i.length>0){if(r)return b.some(tl.partialTable(i,b.none()));{const a=M0(n,t);return b.some(tl.partialTable(i,b.some({...t,rng:a})))}}else return b.none()}),IM=(e,t,n,s)=>$0(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(qm).getOr([]),a=r.bind(qm).getOr([]);if(i.length>0&&a.length>0){const c=M0(n,t);return b.some(tl.multiTable(i,a,c))}else return b.none()}),LM=(e,t)=>{const n=wM(e),s=RM(t,n),o=NM(t,n);return OM(s,t,n)?s.map(r=>tl.singleCellTable(t,r.start)):o.isMultiTable?IM(s,o,t,n):BM(s,o,t,n)},U0=e=>N(e,t=>{en(t,"contenteditable"),$o(t)}),$M=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(w.fromDom),FM=(e,t,n)=>{n.each(s=>{t?pt(s):($o(s),e.selection.setCursorLocation(s.dom,0))})},Km=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Gm(e,o,t,!1).each(r=>r())},H0=e=>{const t=wi(e),n=w.fromDom(e.selection.getNode());cc(n.dom)&&pn(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&z(t,s=>Qe(s,n))&&Jt(n,"data-mce-selected","1")},z0=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=$M(e,i?r.endContainer:r.startContainer);r.deleteContents(),FM(e,i,a.filter(fe(pn,e.schema)));const c=i?t[0]:t[t.length-1];return Km(e,c,s,i),pn(e.schema,c)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);U0(o),H0(e)}),MM=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];Km(e,r,o,!0),Km(e,i,o,!1);const a=pn(e.schema,r)?t:t.slice(1),c=pn(e.schema,i)?n:n.slice(0,-1);U0(a.concat(c)),s.deleteContents(),H0(e)}),Gm=(e,t,n,s=!0)=>b.some(()=>{O0(e,t,n,s)}),UM=(e,t)=>b.some(()=>Or(e,!1,t)),HM=(e,t,n)=>LM(t,n).bind(s=>s.fold(fe(Gm,e),fe(UM,e),fe(z0,e),fe(MM,e))),zM=(e,t)=>eu(e,t),VM=(e,t,n,s)=>Ym(t,s).fold(()=>HM(e,t,n),o=>zM(e,o)),WM=(e,t,n)=>{const s=w.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?z0(e,n,b.none()):VM(e,s,o,t)},V0=(e,t)=>me(Eo(t,e),Da),Ym=(e,t)=>me(Eo(t,e),ec("caption")),jM=(e,t,n,s,o)=>Si(n,e.getBody(),o).bind(r=>V0(t,w.fromDom(r.getNode())).bind(i=>Qe(i,s)?b.none():b.some(Te))),eu=(e,t)=>b.some(()=>{$o(t),e.selection.setCursorLocation(t.dom,0)}),qM=(e,t,n,s)=>hn(e.dom).bind(o=>ds(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),KM=(e,t)=>eu(e,t),GM=(e,t,n)=>Ym(e,w.fromDom(n.getNode())).fold(()=>b.some(Te),s=>si(!Qe(s,t),Te)),YM=(e,t,n,s,o)=>Si(n,e.getBody(),o).fold(()=>b.some(Te),r=>qM(s,n,o,r)?KM(e,s):GM(t,s,r)),XM=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return V0(n,s).bind(r=>pn(e.schema,r,{checkRootAsContent:!1})?eu(e,r):jM(e,n,t,r,o))},ZM=(e,t,n,s)=>{const o=F.fromRangeStart(e.selection.getRng());return pn(e.schema,s)?eu(e,s):YM(e,n,t,s,o)},W0=(e,t)=>e?r0(t):Bm(t),QM=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return W0(t,n)||Yn(t,e.getBody(),n).exists(s=>W0(t,s))},JM=(e,t,n)=>{const s=w.fromDom(e.getBody());return Ym(s,n).fold(()=>XM(e,t,s,n).orThunk(()=>si(QM(e,t),Te)),o=>ZM(e,t,s,o))},Xm=(e,t)=>{const n=w.fromDom(e.selection.getStart(!0)),s=wi(e);return e.selection.isCollapsed()&&s.length===0?JM(e,t,n):WM(e,n,s)},Ir=(e,t)=>{let n=t;for(;n&&n!==e;){if(fs(n)||ct(n))return n;n=n.parentNode}return null},eU=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],tU=Q.each,Zm=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,i)=>{if(r.nodeName!==i.nodeName||r.nodeType!==i.nodeType)return!1;const a=f=>{const m={};return tU(t.getAttribs(f),p=>{const g=p.nodeName.toLowerCase();g!=="style"&&!o(g)&&(m[g]=t.getAttrib(f,g))}),m},c=(f,m)=>{for(const p in f)if(Ne(f,p)){const g=m[p];if(Dt(g)||f[p]!==g)return!1;delete m[p]}for(const p in m)if(Ne(m,p))return!1;return!0};return he(r)&&he(i)&&(!c(a(r),a(i))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style"))))?!1:!Zn(r)&&!Zn(i)},o=r=>z(eU,i=>zt(r,i))||n.has(r);return{compare:s,isAttributeInternal:o}},j0=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),nU=e=>e.name==="summary",sU=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},q0=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const f=s.attributes[c];f?f.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},oU=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&sU(n,o=>{q0(e,t,o,s)}),s},K0=(e,t)=>{const n=(s,o)=>{lt(s,r=>{const i=Et(r.nodes);N(r.filter.callbacks,a=>{for(let c=i.length-1;c>=0;c--){const f=i[c];(!(o?f.attr(r.filter.name)!==void 0:f.name===r.filter.name)||dt(f.parent))&&i.splice(c,1)}i.length>0&&a(i,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},G0=(e,t,n,s={})=>{const o=oU(e,t,n);K0(o,s)},Qm=(e,t,n,s)=>{if((e.pad_empty_with_br||t.insert)&&n(s)){const r=new _n("br",1);t.insert&&r.attr("data-mce-bogus","1"),s.empty().append(r)}else s.empty().append(new _n("#text",3)).value=Vt},rU=e=>{var t;return Y0(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===Vt},Y0=(e,t)=>{const n=e==null?void 0:e.firstChild;return ee(n)&&n===e.lastChild&&n.name===t},iU=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},nl=(e,t,n,s)=>s.isEmpty(t,n,o=>iU(e,o)),aU=(e,t)=>ee(e)&&(t(e)||e.name==="br"),lU=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return b.from(t)},Jm=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&Jm(o,t,n);e.unwrap()}},ep=(e,t,n,s=Te)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=Q.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,f=m=>m!==n&&!a[m.name];for(let m=0;m<e.length;m++){const p=e[m];let g,C,S;if(!p.parent||c.has(p))continue;if(o[p.name]&&p.parent.name==="li"){let _=p.next;for(;_&&o[_.name];){_.name="li",c.add(_),p.parent.insert(_,p.parent);_=_.next}p.unwrap();continue}const y=[p];for(g=p.parent;g&&!t.isValidChild(g.name,p.name)&&f(g);g=g.parent)y.push(g);if(g&&y.length>1)if(tp(t,p,g))Jm(p,t);else{y.reverse(),C=y[0].clone(),s(C);let _=C;for(let k=0;k<y.length-1;k++){t.isValidChild(_.name,y[k].name)&&k>0?(S=y[k].clone(),s(S),_.append(S)):S=_;for(let T=y[k].firstChild;T&&T!==y[k+1];){const A=T.next;S.append(T),T=A}_=S}nl(t,r,i,C)?g.insert(p,y[0],!0):(g.insert(C,y[0],!0),g.insert(p,C)),g=y[0],(nl(t,r,i,g)||Y0(g,"br"))&&g.empty().remove()}else if(p.parent){if(p.name==="li"){let _=p.prev;if(_&&(_.name==="ul"||_.name==="ol")){_.append(p);continue}if(_=p.next,_&&(_.name==="ul"||_.name==="ol")&&_.firstChild){_.insert(p,_.firstChild,!0);continue}const k=new _n("ul",1);s(k),p.wrap(k);continue}if(t.isValidChild(p.parent.name,"div")&&t.isValidChild("div",p.name)){const _=new _n("div",1);s(_),p.wrap(_)}else Jm(p,t)}}},cU=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},tp=(e,t,n=t.parent)=>n?e.children[t.name]&&!e.isValidChild(n.name,t.name)||t.name==="a"&&cU(n,"a")?!0:nU(n)&&j0(t)?!((n==null?void 0:n.firstChild)===t&&(n==null?void 0:n.lastChild)===t):!1:!1,uU=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},fU=e=>{const t=F.fromRangeStart(e),n=F.fromRangeEnd(e),s=e.commonAncestorContainer;return Yn(!1,s,n).map(o=>!Gs(t,n,s)&&Gs(t,o,s)?uU(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},np=e=>e.collapsed?e:fU(e),dU=e=>ee(e.firstChild)&&e.firstChild===e.lastChild,mU=e=>e.name==="br"||e.value===Vt,pU=(e,t)=>e.getBlockElements()[t.name]&&dU(t)&&mU(t.firstChild),gU=(e,t)=>{const n=e.getNonEmptyElements();return ee(t)&&(t.isEmpty(n)||pU(e,t))},hU=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),gU(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},bU=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},CU=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return bU(o)},yU=e=>{var t;return W((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},vU=e=>e.data===Vt||St(e),EU=e=>ee(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&vU(e.firstChild),SU=e=>!e.firstChild||EU(e),_U=e=>e.length>0&&SU(e[e.length-1])?e.slice(0,-1):e,sp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},wU=(e,t)=>!!sp(e,t),xU=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},kU=(e,t)=>{const n=F.before(e),o=Xs(t).next(n);return o?o.toRange():null},X0=(e,t)=>{const n=F.after(e),o=Xs(t).prev(n);return o?o.toRange():null},NU=(e,t,n,s)=>{const o=xU(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),Q.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e)),X0(t[t.length-1],n)},AU=(e,t,n)=>{const s=e.parentNode;return s&&Q.each(t,o=>{s.insertBefore(o,e)}),kU(e,n)},TU=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),X0(t[0],n)),RU=(e,t,n,s)=>{const o=CU(t,e,s),r=sp(t,n.startContainer),i=_U(yU(o.firstChild)),a=1,c=2,f=t.getRoot(),m=p=>{const g=F.fromRangeStart(n),C=Xs(t.getRoot()),S=p===a?C.prev(g):C.next(g),y=S==null?void 0:S.getNode();return y?sp(t,y)!==r:!0};return r?m(a)?AU(r,i,f):m(c)?TU(r,i,f,t):NU(r,i,f,n):null},PU=["pre"],DU=(e,t,n,s)=>{var o;const r=t.firstChild,i=t.lastChild,a=i.attr("data-mce-type")==="bookmark"?i.prev:i,c=r===a,f=R(PU,r.name);if(c&&f){const m=r.attr("contenteditable")!=="false",p=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,g=b.from(Ir(s,n)).forall(fs);return m&&p&&g}else return!1},op=cc,OU=(e,t,n)=>{if(ee(n)){const s=e.getParent(t.endContainer,op);return n===s&&rm(w.fromDom(n),t)}else return!1},BU=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},IU=(e,t,n)=>{b.from(e.getParent(t,"td,th")).map(w.fromDom).each(s=>LD(s,n))},LU=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=Zm(e),i="*[data-mce-fragment]",a=s.select(i);Q.each(a,c=>{const f=g=>ee(n[g.nodeName.toLowerCase()]),m=g=>g.childNodes.length===1;if((g=>!(t0(s,g)||TF(s,g)))(c)&&f(c)&&m(c)){const g=Ri(s,c),C=(k,T)=>ot(k,A=>R(T,A)),S=k=>m(c)&&s.is(k,i)&&f(k)&&(k.nodeName===c.nodeName&&C(g,Ri(s,k))||S(k.children[0])),y=k=>ee(k)&&k!==o&&(r.compare(c,k)||y(k.parentElement)),_=k=>ee(k)&&k!==o&&s.is(k,i)&&(PF(s,c,k)||_(k.parentElement));(S(c.children[0])||y(c.parentElement)&&!_(c.parentElement))&&s.remove(c,!0)}})}},$U=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},FU=e=>{Q.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},MU=e=>!!e.getAttribute("data-mce-fragment"),UU=(e,t)=>ee(t)&&!e.schema.getVoidElements()[t.nodeName],HU=(e,t)=>{var n,s,o;let r;const i=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);const c=Ir(e.getBody(),t);if(c&&i.getContentEditable(c)==="false"){i.remove(t),a.select(c);return}let f=i.createRng();const m=t.previousSibling;if(Y(m)){f.setStart(m,(s=(n=m.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const C=t.nextSibling;Y(C)&&(m.appendData(C.data),(o=C.parentNode)===null||o===void 0||o.removeChild(C))}else f.setStartBefore(t),f.setEndBefore(t);const p=C=>{let S=F.fromRangeStart(C);return S=Xs(e.getBody()).next(S),S==null?void 0:S.toRange()},g=i.getParent(t,i.isBlock);if(i.remove(t),g&&i.isEmpty(g)){const C=op(g);li(w.fromDom(g)),f.setStart(g,0),f.setEnd(g,0),!C&&!MU(g)&&(r=p(f))?(f=r,i.remove(g)):i.add(g,i.create("br",C?{}:{"data-mce-bogus":"1"}))}a.setRng(f)},zU=e=>{const t=e.dom,n=np(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,op);OU(t,n,s)?Gm(e,n,w.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&Y(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},VU=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return b.some(t);return b.none()},WU=(e,t,n)=>{var s;return z(n.children(),j0)&&((s=e.getParent(t,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},jU=(e,t,n)=>{var s,o;const r=e.selection,i=e.dom,a=e.parser,c=n.merge,f=Vo({validate:!0},e.schema),m='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=jn(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,m);let p=r.getRng();const g=p.startContainer,C=e.getBody();g===C&&r.isCollapsed()&&i.isBlock(C.firstChild)&&UU(e,C.firstChild)&&i.isEmpty(C.firstChild)&&(p=i.createRng(),p.setStart(C.firstChild,0),p.setEnd(C.firstChild,0),r.setRng(p)),r.isCollapsed()||zU(e);const S=r.getNode(),y={context:S.nodeName.toLowerCase(),data:n.data,insert:!0},_=a.parse(t,y);if(n.paste===!0&&hU(e.schema,_)&&wU(i,S))return p=RU(f,i,r.getRng(),_),p&&r.setRng(p),t;n.paste===!0&&DU(i,_,S,e.getBody())&&((s=_.firstChild)===null||s===void 0||s.unwrap()),$U(_);let k=_.lastChild;if(k&&k.attr("id")==="mce_marker"){const T=k;for(k=k.prev;k;k=k.walk(!0))if(k.type===3||!i.isBlock(k.name)){k.parent&&e.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(T,k,k.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(S),!y.invalid&&!WU(i,S,_))t=f.serialize(_),BU(e,t,S);else{e.selection.setContent(m);let T=r.getNode(),A;const D=e.getBody();for(va(T)?T=A=D:A=T;A&&A!==D;)T=A,A=A.parentNode;t=T===D?D.innerHTML:i.getOuterHTML(T);const V=a.parse(t),X=VU(V),se=X.bind(lU).getOr(V);X.each(ue=>ue.replace(_));const M=_.children(),I=(o=_.parent)!==null&&o!==void 0?o:V;_.unwrap();const H=W(M,ue=>tp(e.schema,ue,I));ep(H,e.schema,se),G0(a.getNodeFilters(),a.getAttributeFilters(),V),t=f.serialize(V),T===D?i.setHTML(D,t):i.setOuterHTML(T,t)}return LU(e,c),HU(e,i.get("mce_marker")),FU(e.getBody()),IU(i,r.getStart(),e.schema),C1(e.schema,e.getBody(),r.getStart()),t},tu=e=>e instanceof _n,qU=e=>{Ti(e)&&hn(e.getBody()).each(t=>{const n=t.getNode(),s=js(n)?hn(n).getOr(t):t;e.selection.setRng(s.toRange())})},rp=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&qU(e)},KU=(e,t,n,s)=>{if(n=jn(n),n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=gn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,$a(e),n)):n||(n=o),rp(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Vo({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=bc(w.fromDom(t))?n:Q.trim(n);return rp(e,o,s.no_selection),{content:o,html:o}}},GU=(e,t,n,s)=>{G0(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Vo({validate:!1},e.schema).serialize(n),r=jn(bc(w.fromDom(t))?o:Q.trim(o));return rp(e,r,s.no_selection),{content:n,html:r}},YU=(e,t,n)=>b.from(e.getBody()).map(s=>tu(t)?GU(e,s,t,n):KU(e,s,t,n)).getOr({content:t,html:tu(n.content)?"":n.content}),Z0=e=>Ke(e)?e:st,XU=(e,t,n)=>{let s=e.dom;const o=Z0(n);for(;s.parentNode;){s=s.parentNode;const r=w.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},ip=(e,t,n)=>{const s=t(e),o=Z0(n);return s.orThunk(()=>o(e)?b.none():XU(e,t,o))},ap=fm,Q0=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Qn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},lp=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const i=e.dom.getParent(t,a=>Q0(e,a,n)?!0:a.parentNode===r||!!Qs(e,a,n,s,!0));return!!Qs(e,i,n,s,o)},nu=(e,t,n)=>jt(n)&&ap(t,n.inline)||Zs(n)&&ap(t,n.block)?!0:Qn(n)?he(t)&&e.is(t,n.selector):!1,J0=(e,t,n,s,o,r)=>{const i=n[s],a=s==="attributes";if(Ke(n.onmatch))return n.onmatch(t,n,s);if(i){if(ib(i)){for(let c=0;c<i.length;c++)if(a?e.getAttrib(t,i[c]):Ic(e,t,i[c]))return!0}else for(const c in i)if(Ne(i,c)){const f=a?e.getAttrib(t,c):Ic(e,t,c),m=zo(i[c],r),p=dt(f)||la(f);if(p&&dt(m))continue;if(o&&p&&!n.exact||(!o||n.exact)&&!ap(f,dm(m,c)))return!1}}return!0},Qs=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&he(t))for(let a=0;a<r.length;a++){const c=r[a];if(nu(e.dom,t,c)&&J0(i,t,c,"attributes",o,s)&&J0(i,t,c,"styles",o,s)){const f=c.classes;if(f){for(let m=0;m<f.length;m++)if(!e.dom.hasClass(t,zo(f[m],s)))return}return c}}},cp=(e,t,n,s,o)=>{if(s)return lp(e,s,t,n,o);if(s=e.selection.getNode(),lp(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&lp(e,r,t,n,o))},ZU=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Qs(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},QU=(e,t)=>{const n=o=>Qe(o,w.fromDom(e.getBody())),s=(o,r)=>Qs(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>ip(w.fromDom(o),r=>En(t,i=>s(r,i)),n)).getOrNull()},JU=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){const o=e.selection.getStart(),r=Lc(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Qn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},eH=(e,t,n)=>re(n,(s,o)=>{const r=nL(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),sl=Wt,tH=(e,t)=>e.importNode(t,!0),eS=e=>{if(e){const t=new Gt(e,e);for(let n=t.current();n;n=t.next())if(Y(n))return n}return null},up=e=>{const t=w.fromTag("span");return fo(t,{id:em,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ft(t,w.fromText(sl)),t},nH=e=>{const t=eS(e);return t&&t.data.charAt(0)===sl&&t.deleteData(0,1),t},fp=(e,t,n)=>{const s=e.dom,o=e.selection;if(Vv(t))Or(e,!1,w.fromDom(t),n,!0);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,f=r.endContainer,m=r.endOffset,p=nH(t);s.remove(t,!0),a===p&&c>0&&r.setStart(p,c-1),f===p&&m>0&&r.setEnd(p,m-1),i&&s.isEmpty(i)&&$o(w.fromDom(i)),o.setRng(r)}},dp=(e,t,n)=>{const s=e.dom,o=e.selection;if(t)fp(e,t,n);else if(t=Ar(e.getBody(),o.getStart()),!t)for(;t=s.get(em);)fp(e,t,n)},sH=(e,t,n)=>{var s,o;const r=e.dom,i=r.getParent(n,fe(cm,e.schema));i&&r.isEmpty(i)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(ID(w.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},tS=(e,t)=>(e.appendChild(t),t),nS=(e,t)=>{var n;const s=ye(e,(r,i)=>tS(r,i.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return tS(s,o.createTextNode(sl))},oH=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=W(On(i.get()),p=>p!==s&&!un(p,"removeformat")),f=eH(e,n,c);if(W(f,p=>!sL(e,p,s)).length>0){const p=n.cloneNode(!1);return a.add(t,p),i.remove(s,o,p,r),a.remove(p),b.some(p)}else return b.none()},sS=e=>ly(e,Pa(e).replace(new RegExp(`${Vt}$`)," ")),oS=(e,t)=>{const n=()=>{t!==null&&!e.dom.isEmpty(t)&&Do(w.fromDom(t)).each(s=>{Nn(s)?sS(s):Xf(s,o=>Nn(o)).each(o=>{Nn(o)&&sS(o)})})};e.once("input",s=>{s.data&&!Tr(s.data)&&(s.isComposing?e.once("compositionend",()=>{n()}):n())})},rH=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const i=o.getRng();let a=i.startOffset;const f=i.startContainer.nodeValue;s=Ar(e.getBody(),o.getStart());const m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&a>0&&a<f.length&&m.test(f.charAt(a))&&m.test(f.charAt(a-1))){const p=o.getBookmark();i.collapse(!0);let g=Rr(e.dom,i,r);g=Vc(g),e.formatter.apply(t,n,g),o.moveToBookmark(p)}else{let p=s?eS(s):null;(!s||(p==null?void 0:p.data)!==sl)&&(s=tH(e.getDoc(),up(!0).dom),p=s.firstChild,i.insertNode(s),a=1,oS(e,s)),e.formatter.apply(t,n,s),o.setCursorLocation(p,a)}},iH=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const c=r.getRng(),f=c.startContainer,m=c.startOffset;let p=f;Y(f)&&(m!==f.data.length&&(i=!0),p=p.parentNode);const g=[];let C;for(;p;){if(Qs(e,p,t,n,s)){C=p;break}p.nextSibling&&(i=!0),g.push(p),p=p.parentNode}if(C)if(i){const S=r.getBookmark();c.collapse(!0);let y=Rr(o,c,a,!0);y=Vc(y),e.formatter.remove(t,n,y,s),r.moveToBookmark(S)}else{const S=Ar(e.getBody(),C),y=ee(S)?o.getParents(C.parentNode,Ct,S):[],_=up(!1).dom;sH(e,_,S??C);const k=oH(e,_,C,t,n,s),T=nS([...g,...k.toArray(),...y],_);S&&fp(e,S,ee(S)),r.setCursorLocation(T,1),oS(e,_),o.isEmpty(C)&&o.remove(C)}},aH=(e,t,n)=>{const s=e.selection,o=e.getBody();dp(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===sl&&dp(e,Ar(o,s.getStart()),!0),(t===37||t===39)&&dp(e,Ar(o,s.getStart()),!0)},lH=e=>Y(e)&&Mf(e.data,Vt),cH=e=>{e.on("mouseup keydown",t=>{aH(e,t.keyCode,lH(e.selection.getRng().endContainer))})},rS=e=>{const t=up(!1),n=nS(e,t.dom);return{caretContainer:t,caretPosition:F(n,0)}},iS=(e,t)=>{const{caretContainer:n,caretPosition:s}=rS(t);return Bn(w.fromDom(e),n),pt(w.fromDom(e)),s},uH=(e,t)=>{const{caretContainer:n,caretPosition:s}=rS(t);return e.insertNode(n.dom),s},aS=(e,t)=>{if(Xn(t.dom))return!1;const n=e.schema.getTextInlineElements();return Ne(n,Ve(t))&&!Xn(t.dom)&&!pr(t.dom)},ol={},lS=ks(["pre"]),fH=(e,t)=>{ol[e]||(ol[e]=[]),ol[e].push(t)},dH=(e,t)=>{Ne(ol,e)&&N(ol[e],n=>{n(t)})};fH("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const i=r.previousSibling;return lS(i)&&R(o,i)},s=(o,r)=>{const i=w.fromDom(r),a=Po(i).dom;pt(i),dr(w.fromDom(o),[w.fromTag("br",a),w.fromTag("br",a),...dn(i)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=W(W(o,lS),n(o));N(r,i=>{s(i.previousSibling,i)})}});const cS=["fontWeight","fontStyle","color","fontSize","fontFamily"],mH=e=>ke(e.styles)&&z(On(e.styles),t=>R(cS,t)),pH=e=>me(e,t=>jt(t)&&t.inline==="span"&&mH(t)),uS=(e,t)=>{const n=e.get(t);return rt(n)?pH(n):b.none()},fS=(e,t)=>In(t,F.fromRangeStart(e)).isNone(),dS=(e,t)=>Tn(t,F.fromRangeEnd(e)).exists(n=>!St(n.getNode())||Tn(t,n).isSome())===!1,mS=e=>t=>e1(t)&&e.isEditable(t),gH=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return fS(n,t[0])&&dS(n,t[0])?t:[];{const s=Ht(t).filter(i=>fS(n,i)).toArray(),o=Ss(t).filter(i=>dS(n,i)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},hH=e=>W(gH(e),mS(e.dom)),pS=e=>W(e.getSelectedBlocks(),mS(e.dom)),mp=Q.each,pp=e=>he(e)&&!Zn(e)&&!Xn(e)&&!pr(e),gS=(e,t)=>{for(let n=e;n;n=n[t]){if(Y(n)&&Us(n.data))return e;if(he(n)&&!Zn(n))return n}return e},hS=(e,t,n)=>{const s=Zm(e),o=ho(t)&&e.dom.isEditable(t),r=ho(n)&&e.dom.isEditable(n);if(o&&r){const i=gS(t,"previousSibling"),a=gS(n,"nextSibling");if(s.compare(i,a)){for(let c=i.nextSibling;c&&c!==a;){const f=c;c=c.nextSibling,i.appendChild(f)}return e.dom.remove(a),Q.each(Q.grep(a.childNodes),c=>{i.appendChild(c)}),i}}return n},bS=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=hS(e,Uv(s),s))!==null&&o!==void 0?o:s;hS(e,r,Uv(r,!0))}},bH=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";mp(e.select(s,n),o=>{pp(o)&&e.isEditable(o)&&mp(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},gp=(e,t,n)=>{mp(e.childNodes,s=>{pp(s)&&(t(s)&&n(s),s.hasChildNodes()&&gp(s,t,n))})},CH=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},CS=(e,t)=>n=>!!(n&&Ic(e,n,t)),yS=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),CH(e,s)},Lr=Ks.generate([{keep:[]},{rename:["name"]},{removed:[]}]),yH=/^(src|href|style)$/,hp=Q.each,su=fm,vH=e=>/^(TR|TH|TD)$/.test(e.nodeName),vS=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),ES=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(he(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return Y(s)&&n&&o>=s.data.length&&(s=new Gt(s,e.getBody()).next()||s),Y(s)&&!n&&o===0&&(s=new Gt(s,e.getBody()).prev()||s),s},SS=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return vH(e)&&s?e.nodeName==="TR"&&s[n]||s:e},bp=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},_S=(e,t,n,s,o)=>{const r=w.fromDom(t),i=w.fromDom(e.create(s,o)),a=n?Zb(r):Xb(r);return dr(i,a),n?(Bn(r,i),Qf(i,r)):(go(r,i),Ft(i,r)),i.dom},EH=(e,t)=>t.links&&e.nodeName==="A",wS=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=gn(e);Zs(n)&&s===r.getRoot()&&(!n.list_block||!su(t,n.list_block))&&N(Et(t.childNodes),a=>{xi(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=bp(r,a,i),r.setAttribs(o,$a(e))):o=null}),!(iL(n)&&!su(n.inline,t))&&r.remove(t,!0)},xS=(e,t,n)=>vn(e)?{name:t,value:null}:{name:e,value:zo(t,n)},kS=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},NS=(e,t,n,s,o)=>{let r=!1;hp(n.styles,(i,a)=>{const{name:c,value:f}=xS(a,i,s),m=dm(f,c);(n.remove_similar||vt(f)||!he(o)||su(Ic(e,o,c),m))&&e.setStyle(t,c,""),r=!0}),r&&kS(e,t)},SH=(e,t,n)=>{t==="removeformat"?N(pS(e.selection),s=>{N(cS,o=>e.dom.setStyle(s,o,"")),kS(e.dom,s)}):uS(e.formatter,t).each(s=>{N(pS(e.selection),o=>NS(e.dom,o,s,n,null))})},AS=(e,t,n,s,o)=>{const r=e.dom,i=Zm(e),a=e.schema;if(jt(t)&&fd(a,t.inline)&&hr(a,s)&&s.parentElement===e.getBody())return wS(e,s,t),Lr.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!nu(r,s,t)&&!EH(s,t))return Lr.keep();const c=s,f=t.preserve_attributes;if(jt(t)&&t.remove==="all"&&rt(f)){const m=W(r.getAttribs(c),p=>R(f,p.name.toLowerCase()));if(r.removeAllAttribs(c),N(m,p=>r.setAttrib(c,p.name,p.value)),m.length>0)return Lr.rename("span")}if(t.remove!=="all"){NS(r,c,t,n,o),hp(t.attributes,(p,g)=>{const{name:C,value:S}=xS(g,p,n);if(t.remove_similar||vt(S)||!he(o)||su(r.getAttrib(o,C),S)){if(C==="class"){const y=r.getAttrib(c,C);if(y){let _="";if(N(y.split(/\s+/),k=>{/mce\-\w+/.test(k)&&(_+=(_?" ":"")+k)}),_){r.setAttrib(c,C,_);return}}}if(yH.test(C)&&c.removeAttribute("data-mce-"+C),C==="style"&&ks(["li"])(c)&&r.getStyle(c,"list-style-type")==="none"){c.removeAttribute(C),r.setStyle(c,"list-style-type","none");return}C==="class"&&c.removeAttribute("className"),c.removeAttribute(C)}}),hp(t.classes,p=>{p=zo(p,n),(!he(o)||r.hasClass(o,p))&&r.removeClass(c,p)});const m=r.getAttribs(c);for(let p=0;p<m.length;p++){const g=m[p].nodeName;if(!i.isAttributeInternal(g))return Lr.keep()}}return t.remove!=="none"?(wS(e,c,t),Lr.removed()):Lr.keep()},_H=(e,t,n,s,o)=>{let r;return t.parentNode&&N(Lc(e.dom,t.parentNode).reverse(),i=>{if(!r&&he(i)&&i.id!=="_start"&&i.id!=="_end"){const a=Qs(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},wH=(e,t,n,s)=>AS(e,t,n,s,s).fold(G(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),G(null)),xH=(e,t,n,s,o,r,i,a)=>{var c,f;let m,p;const g=e.dom;if(n){const C=n.parentNode;for(let S=s.parentNode;S&&S!==C;S=S.parentNode){let y=g.clone(S,!1);for(let _=0;_<t.length&&(y=wH(e,t[_],a,y),y!==null);_++);y&&(m&&y.appendChild(m),p||(p=y),m=y)}(!i.mixed||!g.isBlock(n))&&(s=(c=g.split(n,s))!==null&&c!==void 0?c:s),m&&p&&((f=o.parentNode)===null||f===void 0||f.insertBefore(m,o),p.appendChild(o),jt(i)&&bS(e,i,a,m))}return s},kH=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0],a=e.dom,c=e.selection,f=y=>{const _=_H(e,y,t,n,o);return xH(e,r,_,y,y,!0,i,n)},m=y=>Zn(y)&&he(y)&&(y.id==="_start"||y.id==="_end"),p=y=>z(r,_=>rl(e,_,n,y,y)),g=y=>{const _=Et(y.childNodes),T=p(y)||z(r,V=>nu(a,y,V)),A=y.parentNode;if(!T&&ee(A)&&pm(i)&&p(A),i.deep&&_.length)for(let V=0;V<_.length;V++)g(_[V]);N(["underline","line-through","overline"],V=>{he(y)&&e.dom.getStyle(y,"text-decoration")===V&&y.parentNode&&zv(a,y.parentNode)===V&&rl(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:V}},void 0,y)})},C=y=>{const _=a.get(y?"_start":"_end");if(_){let k=_[y?"firstChild":"lastChild"];return m(k)&&(k=k[y?"firstChild":"lastChild"]),Y(k)&&k.data.length===0&&(k=y?_.previousSibling||_.nextSibling:_.nextSibling||_.previousSibling),a.remove(_,!0),k}else return null},S=y=>{let _,k,T=Rr(a,y,r,y.collapsed);if(i.split){if(T=Vc(T),_=ES(e,T,!0),k=ES(e,T),_!==k){if(_=SS(_,!0),k=SS(k,!1),vS(a,_,k)){const D=b.from(_.firstChild).getOr(_);f(_S(a,D,!0,"span",{id:"_start","data-mce-type":"bookmark"})),C(!0);return}if(vS(a,k,_)){const D=b.from(k.lastChild).getOr(k);f(_S(a,D,!1,"span",{id:"_end","data-mce-type":"bookmark"})),C(!1);return}_=bp(a,_,"span",{id:"_start","data-mce-type":"bookmark"}),k=bp(a,k,"span",{id:"_end","data-mce-type":"bookmark"});const A=a.createRng();A.setStartAfter(_),A.setEndBefore(k),Ka(a,A,D=>{N(D,V=>{!Zn(V)&&!Zn(V.parentNode)&&f(V)})}),f(_),f(k),_=C(!0),k=C()}else _=k=f(_);T.startContainer=_.parentNode?_.parentNode:_,T.startOffset=a.nodeIndex(_),T.endContainer=k.parentNode?k.parentNode:k,T.endOffset=a.nodeIndex(k)+1}Ka(a,T,A=>{N(A,g)})};if(s){if(qa(s)){const y=a.createRng();y.setStartBefore(s),y.setEndAfter(s),S(y)}else S(s);rE(e,t,s,n);return}!c.isCollapsed()||!jt(i)||wi(e).length?(Mv(e,()=>am(e,S),y=>jt(i)&&cp(e,t,n,y)),e.nodeChanged()):iH(e,t,n,o),SH(e,t,n),rE(e,t,s,n)},TS=(e,t,n,s,o)=>{(s||e.selection.isEditable())&&kH(e,t,n,s,o)},rl=(e,t,n,s,o)=>AS(e,t,n,s,o).fold(st,r=>(e.dom.rename(s,r),!0),Ct),RS=Q.each,NH=(e,t,n,s)=>{const o=r=>{if(ho(r)&&he(r.parentNode)&&e.isEditable(r)){const i=zv(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Q.walk(s,o,"childNodes"),o(s))},AH=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=CS(e,"fontSize");gp(s,r=>o(r)&&e.isEditable(r),yS(e,"backgroundColor",zo(t.styles.backgroundColor,n)))}},TH=(e,t,n,s)=>{if(jt(t)&&(t.inline==="sub"||t.inline==="sup")){const o=CS(e,"fontSize");gp(s,i=>o(i)&&e.isEditable(i),yS(e,"fontSize",""));const r=W(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(r,!0)}},RH=(e,t,n,s)=>{RS(t,o=>{jt(o)&&RS(e.dom.select(o.inline,s),r=>{pp(r)&&rl(e,o,n,r,o.exact?r:null)}),bH(e.dom,o,s)})},PH=(e,t,n,s,o)=>{const r=o.parentNode;Qs(e,r,n,s)&&rl(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,i=>Qs(e,i,n,s)?(rl(e,t,s,o),!0):!1)},ou=Q.each,DH=(e,t,n,s)=>{if(dB(e)&&jt(t)&&n.parentNode){const o=HC(e.schema),r=zP(w.fromDom(n),i=>Xn(i.dom));return ei(o,s)&&bo(e.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!r}else return!1},PS=(e,t,n,s)=>{if(ou(n.styles,(o,r)=>{e.setStyle(t,r,zo(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},OH=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,f=(S,y=r)=>{Ke(y.onformat)&&y.onformat(S,y,n,s),PS(a,S,y,n),ou(y.attributes,(_,k)=>{a.setAttrib(S,k,zo(_,n))}),ou(y.classes,_=>{const k=zo(_,n);a.hasClass(S,k)||a.addClass(S,k)})},m=(S,y)=>{let _=!1;return ou(S,k=>Qn(k)?a.getContentEditable(y)==="false"&&!k.ceFalseOverride||ee(k.collapsed)&&k.collapsed!==i?!0:a.is(y,k.selector)&&!Xn(y)?(f(y,k),_=!0,!1):!0:!1),_},p=S=>{if(ae(S)){const y=a.create(S);return f(y),y}else return null},g=(S,y,_)=>{const k=[];let T=!0;const A=r.inline||r.block,D=p(A),V=M=>oL(r)&&Qs(e,M,t,n),X=(M,I,H)=>{const ue=rL(r)&&cm(e.schema,M)&&xi(e,I,A);return H&&ue},se=(M,I,H,ue)=>{const be=M.nodeName.toLowerCase(),Re=xi(e,A,be)&&xi(e,I,A),Oe=!_&&Y(M)&&Cc(M.data),We=Xn(M),Ge=!jt(r)||!S.isBlock(M);return(H||ue)&&Re&&!Oe&&!We&&Ge};Ka(S,y,M=>{let I;const H=ue=>{let be=!1,Re=T,Oe=!1;const We=ue.parentNode,Ge=We.nodeName.toLowerCase(),gt=S.getContentEditable(ue);ee(gt)&&(Re=T,T=gt==="true",be=!0,Oe=Hv(e,ue));const Zt=T&&!be;if(St(ue)&&!DH(e,r,ue,Ge)){I=null,Zs(r)&&S.remove(ue);return}if(V(ue)){I=null;return}if(X(ue,Ge,Zt)){const et=S.rename(ue,A);f(et),k.push(et),I=null;return}if(Qn(r)){let et=m(o,ue);if(!et&&ee(We)&&pm(r)&&(et=m(o,We)),!jt(r)||et){I=null;return}}ee(D)&&se(ue,Ge,Zt,Oe)?(I||(I=S.clone(D,!1),We.insertBefore(I,ue),k.push(I)),Oe&&be&&(T=Re),I.appendChild(ue)):(I=null,N(Et(ue.childNodes),H),be&&(T=Re),I=null)};N(M,H)}),r.links===!0&&N(k,M=>{const I=H=>{H.nodeName==="A"&&f(H,r),N(Et(H.childNodes),I)};I(M)}),N(k,M=>{const I=be=>{let Re=0;return N(be.childNodes,Oe=>{!eL(Oe)&&!Zn(Oe)&&Re++}),Re},H=be=>me(be.childNodes,lm).filter(Oe=>S.getContentEditable(Oe)!=="false"&&nu(S,Oe,r)).map(Oe=>{const We=S.clone(Oe,!1);return f(We),S.replace(We,be,!0),S.remove(Oe,!0),We}).getOr(be),ue=I(M);if((k.length>1||!S.isBlock(M))&&ue===0){S.remove(M,!0);return}(jt(r)||Zs(r)&&r.wrapper)&&(!r.exact&&ue===1&&(M=H(M)),RH(e,o,n,M),PH(e,r,t,n,M),AH(S,r,n,M),NH(S,r,n,M),TH(S,r,n,M),bS(e,r,n,M))})},C=qa(s)?s:c.getNode();if(a.getContentEditable(C)==="false"&&!Hv(e,C)){s=C,m(o,s),oE(e,t,s,n);return}if(r){if(s)if(qa(s)){if(!m(o,s)){const S=a.createRng();S.setStartBefore(s),S.setEndAfter(s),g(a,Rr(a,S,o),!0)}}else g(a,s,!0);else!i||!jt(r)||wi(e).length?(c.setRng(np(c.getRng())),Mv(e,()=>{am(e,(S,y)=>{const _=y?S:Rr(a,S,o);g(a,_,!1)})},Ct),e.nodeChanged()):rH(e,t,n),uS(e.formatter,t).each(S=>{N(hH(e.selection),y=>PS(a,y,S,n))});dH(t,e)}oE(e,t,s,n)},DS=(e,t,n,s)=>{(s||e.selection.isEditable())&&OH(e,t,n,s)},OS=e=>Ne(e,"vars"),BH=(e,t)=>{e.set({}),t.on("NodeChange",n=>{$S(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>qa(o)?o:o.startContainer).bind(o=>he(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>BS(t));$S(t,s,e.get())})},BS=e=>e.selection.getStart(),IS=(e,t,n,s,o)=>Fe(t,a=>{const c=e.formatter.matchNode(a,n,o??{},s);return!Dt(c)},a=>Q0(e,a,n)?!0:s?!1:ee(e.formatter.matchNode(a,n,o,!0))),LS=(e,t)=>{const n=t??BS(e);return W(Lc(e.dom,n),s=>he(s)&&!pr(s))},$S=(e,t,n)=>{const s=LS(e,t);lt(n,(o,r)=>{const i=a=>{const c=IS(e,s,r,a.similar,OS(a)?a.vars:void 0),f=c.isSome();if(a.state.get()!==f){a.state.set(f);const m=c.getOr(t);OS(a)?a.callback(f,{node:m,format:r,parents:s}):N(a.callbacks,p=>p(f,{node:m,format:r,parents:s}))}};N([o.withSimilar,o.withoutSimilar],i),N(o.withVars,i)})},IH=(e,t,n,s,o,r)=>{const i=t.get();N(n.split(","),a=>{const c=mt(i,a).getOrThunk(()=>{const m={withSimilar:{state:Yt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Yt(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=m,m}),f=()=>{const m=LS(e);return IS(e,m,a,o,r).isSome()};if(Dt(r)){const m=o?c.withSimilar:c.withoutSimilar;m.callbacks.push(s),m.callbacks.length===1&&m.state.set(f())}else c.withVars.push({state:Yt(f()),similar:o,vars:r,callback:s})}),t.set(i)},LH=(e,t,n)=>{const s=e.get();N(t.split(","),o=>mt(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:W(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:W(r.withoutSimilar.callbacks,i=>i!==n)},withVars:W(r.withVars,i=>i.callback!==n)}})),e.set(s)},$H=(e,t,n,s,o,r)=>(IH(e,t,n,s,o,r),{unbind:()=>LH(t,n,s)}),FH=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(cp(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?TS(e,t,n,s):DS(e,t,n,s))},FS=Q.explode,MS=()=>{const e={};return{addFilter:(o,r)=>{N(FS(o),i=>{Ne(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>If(e),removeFilter:(o,r)=>{N(FS(o),i=>{if(Ne(e,i))if(ee(r)){const a=e[i],c=W(a.callbacks,f=>f!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},MH=(e,t)=>{N(t,n=>{e.attr(n,null)})},UH=(e,t,n)=>{e.addNodeFilter("font",s=>{N(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&Xl(c).each(f=>{r["font-size"]=n[f-1]}),o.name="span",o.attr("style",t.serialize(r)),MH(o,["color","face","size"])})})},HH=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";N(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},zH=(e,t,n)=>{var s;const o=Ed();t.convert_fonts_to_spans&&UH(e,o,Q.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),HH(e,n,o)},VH=(e,t,n)=>{t.inline_styles&&zH(e,t,n)},WH=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),jH=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Cp=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?jH(s):decodeURIComponent(s);return b.some({type:o[1],data:i,base64Encoded:r})}else return b.none()},US=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return b.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return b.some(new Blob([o],{type:e}))},qH=e=>new Promise((t,n)=>{Cp(e).bind(({type:s,data:o,base64Encoded:r})=>US(s,o,r)).fold(()=>n("Invalid data URI"),t)}),KH=e=>zt(e,"blob:")?WH(e):zt(e,"data:")?qH(e):Promise.reject("Unknown URI format"),HS=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let GH=0;const YH=e=>"blobid"+GH++,zS=(e,t,n)=>Cp(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return b.none();{const i=r?s:btoa(s);return n(i,o)}}),VS=(e,t,n)=>{const s=e.create(YH(),t,n);return e.add(s),s},WS=(e,t,n=!1)=>zS(t,n,(s,o)=>b.from(e.getByData(s,o)).orThunk(()=>US(o,s).map(r=>VS(e,r,s)))),XH=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(zt(t,"blob:")){const s=e.getByUri(t);return ee(s)?Promise.resolve(s):KH(t).then(o=>HS(o).then(r=>zS(r,!1,i=>b.some(VS(e,o,i))).getOrThunk(n)))}else return zt(t,"data:")?WS(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},ZH=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,QH=e=>b.from(e.match(ZH)).bind(t=>sn(t,1)).map(t=>zt(t,"www.")?t.substring(4):t),jS=(e,t)=>{b.from(e.attr("src")).bind(QH).forall(n=>!R(t,n))&&e.attr("sandbox","")},yp=(e,t)=>zt(e,`${t}/`),JH=e=>Dt(e)?"iframe":yp(e,"image")?"img":yp(e,"video")?"video":yp(e,"audio")?"audio":"iframe",ez=({type:e,src:t,width:n,height:s}={},o,r)=>{const i=JH(e),a=new _n(i,1);return a.attr(i==="audio"?{src:t}:{src:t,width:n,height:s}),(i==="audio"||i==="video")&&a.attr("controls",""),i==="iframe"&&o&&jS(a,r),a},tz=e=>ee(e.attr("data-mce-bogus")),nz=e=>e.attr("src")===je.transparentSrc||ee(e.attr("data-mce-placeholder")),sz=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");nz(o)||tz(o)||dt(r)||WS(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};e.addAttributeFilter("src",o=>N(o,s))}},oz=(e,t)=>{var n,s;const o=e.schema;e.addAttributeFilter("href",c=>{let f=c.length;const m=g=>g.split(" ").filter(S=>S.length>0).concat(["noopener"]).sort().join(" "),p=g=>{const C=g?Q.trim(g):"";return/\b(noopener)\b/g.test(C)?C:m(C)};if(!t.allow_unsafe_link_target)for(;f--;){const g=c[f];g.name==="a"&&g.attr("target")==="_blank"&&g.attr("rel",p(g.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let f=c.length,m,p,g,C;for(;f--;)if(C=c[f],C.name==="a"&&C.firstChild&&!C.attr("href"))for(g=C.parent,m=C.lastChild;m&&g;)p=m.prev,g.insert(m,C),m=p}),t.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let f=c.length,m,p;for(;f--;)if(m=c[f],p=m.parent,p&&(p.name==="ul"||p.name==="ol"))if(m.prev&&m.prev.name==="li")m.prev.append(m);else{const g=new _n("li",1);g.attr("style","list-style-type: none"),m.wrap(g)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",c=>{var f;let m=c.length;for(;m--;){const p=c[m],g=(f=p.attr("class"))!==null&&f!==void 0?f:"",C=Q.explode(g," ");let S="";for(let y=0;y<C.length;y++){const _=C[y];let k=!1,T=r["*"];T&&T[_]&&(k=!0),T=r[p.name],!k&&T&&T[_]&&(k=!0),k&&(S&&(S+=" "),S+=_)}S.length||(S=null),p.attr("class",S)}}),sz(e,t);const i=(n=t.sandbox_iframes)!==null&&n!==void 0?n:!1,a=sa((s=t.sandbox_iframes_exclusions)!==null&&s!==void 0?s:[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",c=>N(c,f=>{f.replace(ez({type:f.attr("type"),src:f.name==="object"?f.attr("data"):f.attr("src"),width:f.attr("width"),height:f.attr("height")},i,a))})),i&&e.addNodeFilter("iframe",c=>N(c,f=>jS(f,a)))},{entries:qS,setPrototypeOf:KS,isFrozen:rz,getPrototypeOf:iz,getOwnPropertyDescriptor:az}=Object;let{freeze:Ln,seal:Ps,create:lz}=Object,{apply:vp,construct:Ep}=typeof Reflect<"u"&&Reflect;vp||(vp=function(t,n,s){return t.apply(n,s)}),Ln||(Ln=function(t){return t}),Ps||(Ps=function(t){return t}),Ep||(Ep=function(t,n){return new t(...n)});const cz=ms(Array.prototype.forEach),uz=ms(Array.prototype.pop),il=ms(Array.prototype.push),ru=ms(String.prototype.toLowerCase),Sp=ms(String.prototype.toString),fz=ms(String.prototype.match),Ds=ms(String.prototype.replace),dz=ms(String.prototype.indexOf),mz=ms(String.prototype.trim),ts=ms(RegExp.prototype.test),al=pz(TypeError);function ms(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return vp(e,t,s)}}function pz(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Ep(e,n)}}function Je(e,t,n){var s;n=(s=n)!==null&&s!==void 0?s:ru,KS&&KS(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const i=n(r);i!==r&&(rz(t)||(t[o]=i),r=i)}e[r]=!0}return e}function Pi(e){const t=lz(null);for(const[n,s]of qS(e))t[n]=s;return t}function iu(e,t){for(;e!==null;){const s=az(e,t);if(s){if(s.get)return ms(s.get);if(typeof s.value=="function")return ms(s.value)}e=iz(e)}function n(s){return console.warn("fallback value for",s),null}return n}const GS=Ln(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_p=Ln(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wp=Ln(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gz=Ln(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xp=Ln(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hz=Ln(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),YS=Ln(["#text"]),XS=Ln(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),kp=Ln(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ZS=Ln(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),au=Ln(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bz=Ps(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cz=Ps(/<%[\w\W]*|[\w\W]*%>/gm),yz=Ps(/\${[\w\W]*}/gm),vz=Ps(/^data-[\-\w.\u00B7-\uFFFF]/),Ez=Ps(/^aria-[\-\w]+$/),QS=Ps(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sz=Ps(/^(?:\w+script|data):/i),_z=Ps(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),JS=Ps(/^html$/i);var e_=Object.freeze({__proto__:null,MUSTACHE_EXPR:bz,ERB_EXPR:Cz,TMPLIT_EXPR:yz,DATA_ATTR:vz,ARIA_ATTR:Ez,IS_ALLOWED_URI:QS,IS_SCRIPT_OR_DATA:Sz,ATTR_WHITESPACE:_z,DOCTYPE_NAME:JS});const wz=()=>typeof window>"u"?null:window,xz=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function t_(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wz();const t=Le=>t_(Le);if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const n=e.document,s=n.currentScript;let{document:o}=e;const{DocumentFragment:r,HTMLTemplateElement:i,Node:a,Element:c,NodeFilter:f,NamedNodeMap:m=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:C}=e,S=c.prototype,y=iu(S,"cloneNode"),_=iu(S,"nextSibling"),k=iu(S,"childNodes"),T=iu(S,"parentNode");if(typeof i=="function"){const Le=o.createElement("template");Le.content&&Le.content.ownerDocument&&(o=Le.content.ownerDocument)}let A,D="";const{implementation:V,createNodeIterator:X,createDocumentFragment:se,getElementsByTagName:M}=o,{importNode:I}=n;let H={};t.isSupported=typeof qS=="function"&&typeof T=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ue,ERB_EXPR:be,TMPLIT_EXPR:Re,DATA_ATTR:Oe,ARIA_ATTR:We,IS_SCRIPT_OR_DATA:Ge,ATTR_WHITESPACE:gt}=e_;let{IS_ALLOWED_URI:Zt}=e_,et=null;const J=Je({},[...GS,..._p,...wp,...xp,...YS]);let ge=null;const Ue=Je({},[...XS,...kp,...ZS,...au]);let te=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,De=null,ne=!0,Pe=!0,Ie=!1,Lt=!0,qe=!1,Ot=!1,os=!1,Is=!1,bn=!1,$n=!1,rs=!1,Fn=!0,is=!1;const Ce="user-content-";let Me=!0,ut=!1,yt={},Rt=null;const qt=Je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let xt=null;const kt=Je({},["audio","video","img","source","image","track"]);let Cn=null;const gs=Je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hs="http://www.w3.org/1998/Math/MathML",bs="http://www.w3.org/2000/svg",as="http://www.w3.org/1999/xhtml";let Xo=as,ji=!1,qi=null;const ah=Je({},[hs,bs,as],Sp);let wo;const rf=["application/xhtml+xml","text/html"],SA="text/html";let rn,Wr=null;const _A=o.createElement("form"),lh=function($){return $ instanceof RegExp||$ instanceof Function},no=function($){if(!(Wr&&Wr===$)){if((!$||typeof $!="object")&&($={}),$=Pi($),wo=rf.indexOf($.PARSER_MEDIA_TYPE)===-1?wo=SA:wo=$.PARSER_MEDIA_TYPE,rn=wo==="application/xhtml+xml"?Sp:ru,et="ALLOWED_TAGS"in $?Je({},$.ALLOWED_TAGS,rn):J,ge="ALLOWED_ATTR"in $?Je({},$.ALLOWED_ATTR,rn):Ue,qi="ALLOWED_NAMESPACES"in $?Je({},$.ALLOWED_NAMESPACES,Sp):ah,Cn="ADD_URI_SAFE_ATTR"in $?Je(Pi(gs),$.ADD_URI_SAFE_ATTR,rn):gs,xt="ADD_DATA_URI_TAGS"in $?Je(Pi(kt),$.ADD_DATA_URI_TAGS,rn):kt,Rt="FORBID_CONTENTS"in $?Je({},$.FORBID_CONTENTS,rn):qt,ve="FORBID_TAGS"in $?Je({},$.FORBID_TAGS,rn):{},De="FORBID_ATTR"in $?Je({},$.FORBID_ATTR,rn):{},yt="USE_PROFILES"in $?$.USE_PROFILES:!1,ne=$.ALLOW_ARIA_ATTR!==!1,Pe=$.ALLOW_DATA_ATTR!==!1,Ie=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=$.SAFE_FOR_TEMPLATES||!1,Ot=$.WHOLE_DOCUMENT||!1,bn=$.RETURN_DOM||!1,$n=$.RETURN_DOM_FRAGMENT||!1,rs=$.RETURN_TRUSTED_TYPE||!1,Is=$.FORCE_BODY||!1,Fn=$.SANITIZE_DOM!==!1,is=$.SANITIZE_NAMED_PROPS||!1,Me=$.KEEP_CONTENT!==!1,ut=$.IN_PLACE||!1,Zt=$.ALLOWED_URI_REGEXP||QS,Xo=$.NAMESPACE||as,te=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&lh($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&lh($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(Pe=!1),$n&&(bn=!0),yt&&(et=Je({},[...YS]),ge=[],yt.html===!0&&(Je(et,GS),Je(ge,XS)),yt.svg===!0&&(Je(et,_p),Je(ge,kp),Je(ge,au)),yt.svgFilters===!0&&(Je(et,wp),Je(ge,kp),Je(ge,au)),yt.mathMl===!0&&(Je(et,xp),Je(ge,ZS),Je(ge,au))),$.ADD_TAGS&&(et===J&&(et=Pi(et)),Je(et,$.ADD_TAGS,rn)),$.ADD_ATTR&&(ge===Ue&&(ge=Pi(ge)),Je(ge,$.ADD_ATTR,rn)),$.ADD_URI_SAFE_ATTR&&Je(Cn,$.ADD_URI_SAFE_ATTR,rn),$.FORBID_CONTENTS&&(Rt===qt&&(Rt=Pi(Rt)),Je(Rt,$.FORBID_CONTENTS,rn)),Me&&(et["#text"]=!0),Ot&&Je(et,["html","head","body"]),et.table&&(Je(et,["tbody"]),delete ve.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw al('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw al('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=$.TRUSTED_TYPES_POLICY,D=A.createHTML("")}else A===void 0&&(A=xz(C,s)),A!==null&&typeof D=="string"&&(D=A.createHTML(""));Ln&&Ln($),Wr=$}},Al=Je({},["mi","mo","mn","ms","mtext"]),B=Je({},["foreignobject","desc","title","annotation-xml"]),L=Je({},["title","style","font","a","script"]),Z=Je({},_p);Je(Z,wp),Je(Z,gz);const K=Je({},xp);Je(K,hz);const _e=function($){let pe=T($);(!pe||!pe.tagName)&&(pe={namespaceURI:Xo,tagName:"template"});const we=ru($.tagName),_t=ru(pe.tagName);return qi[$.namespaceURI]?$.namespaceURI===bs?pe.namespaceURI===as?we==="svg":pe.namespaceURI===hs?we==="svg"&&(_t==="annotation-xml"||Al[_t]):!!Z[we]:$.namespaceURI===hs?pe.namespaceURI===as?we==="math":pe.namespaceURI===bs?we==="math"&&B[_t]:!!K[we]:$.namespaceURI===as?pe.namespaceURI===bs&&!B[_t]||pe.namespaceURI===hs&&!Al[_t]?!1:!K[we]&&(L[we]||!Z[we]):!!(wo==="application/xhtml+xml"&&qi[$.namespaceURI]):!1},$e=function($){il(t.removed,{element:$});try{$.parentNode.removeChild($)}catch{$.remove()}},ft=function($,pe){try{il(t.removed,{attribute:pe.getAttributeNode($),from:pe})}catch{il(t.removed,{attribute:null,from:pe})}if(pe.removeAttribute($),$==="is"&&!ge[$])if(bn||$n)try{$e(pe)}catch{}else try{pe.setAttribute($,"")}catch{}},Cs=function($){let pe,we;if(Is)$="<remove></remove>"+$;else{const ys=fz($,/^[\r\n\t ]+/);we=ys&&ys[0]}wo==="application/xhtml+xml"&&Xo===as&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const _t=A?A.createHTML($):$;if(Xo===as)try{pe=new g().parseFromString(_t,wo)}catch{}if(!pe||!pe.documentElement){pe=V.createDocument(Xo,"template",null);try{pe.documentElement.innerHTML=ji?D:_t}catch{}}const yn=pe.body||pe.documentElement;return $&&we&&yn.insertBefore(o.createTextNode(we),yn.childNodes[0]||null),Xo===as?M.call(pe,Ot?"html":"body")[0]:Ot?pe.documentElement:yn},af=function($){return X.call($.ownerDocument||$,$,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},zY=function($){return $ instanceof p&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof m)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},lf=function($){return typeof a=="object"?$ instanceof a:$&&typeof $=="object"&&typeof $.nodeType=="number"&&typeof $.nodeName=="string"},xo=function($,pe,we){H[$]&&cz(H[$],_t=>{_t.call(t,pe,we,Wr)})},wA=function($){let pe;if(xo("beforeSanitizeElements",$,null),zY($))return $e($),!0;const we=rn($.nodeName);if(xo("uponSanitizeElement",$,{tagName:we,allowedTags:et}),$.hasChildNodes()&&!lf($.firstElementChild)&&(!lf($.content)||!lf($.content.firstElementChild))&&ts(/<[/\w]/g,$.innerHTML)&&ts(/<[/\w]/g,$.textContent))return $e($),!0;if(!et[we]||ve[we]){if(!ve[we]&&kA(we)&&(te.tagNameCheck instanceof RegExp&&ts(te.tagNameCheck,we)||te.tagNameCheck instanceof Function&&te.tagNameCheck(we)))return!1;if(Me&&!Rt[we]){const _t=T($)||$.parentNode,yn=k($)||$.childNodes;if(yn&&_t){const ys=yn.length;for(let Ut=ys-1;Ut>=0;--Ut)_t.insertBefore(y(yn[Ut],!0),_($))}}return $e($),!0}return $ instanceof c&&!_e($)||(we==="noscript"||we==="noembed"||we==="noframes")&&ts(/<\/no(script|embed|frames)/i,$.innerHTML)?($e($),!0):(qe&&$.nodeType===3&&(pe=$.textContent,pe=Ds(pe,ue," "),pe=Ds(pe,be," "),pe=Ds(pe,Re," "),$.textContent!==pe&&(il(t.removed,{element:$.cloneNode()}),$.textContent=pe)),xo("afterSanitizeElements",$,null),!1)},xA=function($,pe,we){if(Fn&&(pe==="id"||pe==="name")&&(we in o||we in _A))return!1;if(!(Pe&&!De[pe]&&ts(Oe,pe))){if(!(ne&&ts(We,pe))){if(!ge[pe]||De[pe]){if(!(kA($)&&(te.tagNameCheck instanceof RegExp&&ts(te.tagNameCheck,$)||te.tagNameCheck instanceof Function&&te.tagNameCheck($))&&(te.attributeNameCheck instanceof RegExp&&ts(te.attributeNameCheck,pe)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(pe))||pe==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&ts(te.tagNameCheck,we)||te.tagNameCheck instanceof Function&&te.tagNameCheck(we))))return!1}else if(!Cn[pe]){if(!ts(Zt,Ds(we,gt,""))){if(!((pe==="src"||pe==="xlink:href"||pe==="href")&&$!=="script"&&dz(we,"data:")===0&&xt[$])){if(!(Ie&&!ts(Ge,Ds(we,gt,"")))){if(we)return!1}}}}}}return!0},kA=function($){return $.indexOf("-")>0},NA=function($){let pe,we,_t,yn;xo("beforeSanitizeAttributes",$,null);const{attributes:ys}=$;if(!ys)return;const Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ge};for(yn=ys.length;yn--;){pe=ys[yn];const{name:vs,namespaceURI:ch}=pe;we=vs==="value"?pe.value:mz(pe.value);const WY=we;if(_t=rn(vs),Ut.attrName=_t,Ut.attrValue=we,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,xo("uponSanitizeAttribute",$,Ut),we=Ut.attrValue,Ut.forceKeepAttr)continue;if(!Ut.keepAttr){ft(vs,$);continue}if(!Lt&&ts(/\/>/i,we)){ft(vs,$);continue}qe&&(we=Ds(we,ue," "),we=Ds(we,be," "),we=Ds(we,Re," "));const AA=rn($.nodeName);if(!xA(AA,_t,we)){ft(vs,$);continue}if(is&&(_t==="id"||_t==="name")&&(ft(vs,$),we=Ce+we),A&&typeof C=="object"&&typeof C.getAttributeType=="function"&&!ch)switch(C.getAttributeType(AA,_t)){case"TrustedHTML":{we=A.createHTML(we);break}case"TrustedScriptURL":{we=A.createScriptURL(we);break}}if(we!==WY)try{ch?$.setAttributeNS(ch,vs,we):$.setAttribute(vs,we)}catch{ft(vs,$)}}xo("afterSanitizeAttributes",$,null)},VY=function Le($){let pe;const we=af($);for(xo("beforeSanitizeShadowDOM",$,null);pe=we.nextNode();)xo("uponSanitizeShadowNode",pe,null),!wA(pe)&&(pe.content instanceof r&&Le(pe.content),NA(pe));xo("afterSanitizeShadowDOM",$,null)};return t.sanitize=function(Le){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe,we,_t,yn;if(ji=!Le,ji&&(Le="<!-->"),typeof Le!="string"&&!lf(Le))if(typeof Le.toString=="function"){if(Le=Le.toString(),typeof Le!="string")throw al("dirty is not a string, aborting")}else throw al("toString is not a function");if(!t.isSupported)return Le;if(os||no($),t.removed=[],typeof Le=="string"&&(ut=!1),ut){if(Le.nodeName){const vs=rn(Le.nodeName);if(!et[vs]||ve[vs])throw al("root node is forbidden and cannot be sanitized in-place")}}else if(Le instanceof a)pe=Cs("<!---->"),we=pe.ownerDocument.importNode(Le,!0),we.nodeType===1&&we.nodeName==="BODY"||we.nodeName==="HTML"?pe=we:pe.appendChild(we);else{if(!bn&&!qe&&!Ot&&Le.indexOf("<")===-1)return A&&rs?A.createHTML(Le):Le;if(pe=Cs(Le),!pe)return bn?null:rs?D:""}pe&&Is&&$e(pe.firstChild);const ys=af(ut?Le:pe);for(;_t=ys.nextNode();)wA(_t)||(_t.content instanceof r&&VY(_t.content),NA(_t));if(ut)return Le;if(bn){if($n)for(yn=se.call(pe.ownerDocument);pe.firstChild;)yn.appendChild(pe.firstChild);else yn=pe;return(ge.shadowroot||ge.shadowrootmode)&&(yn=I.call(n,yn,!0)),yn}let Ut=Ot?pe.outerHTML:pe.innerHTML;return Ot&&et["!doctype"]&&pe.ownerDocument&&pe.ownerDocument.doctype&&pe.ownerDocument.doctype.name&&ts(JS,pe.ownerDocument.doctype.name)&&(Ut="<!DOCTYPE "+pe.ownerDocument.doctype.name+`>
`+Ut),qe&&(Ut=Ds(Ut,ue," "),Ut=Ds(Ut,be," "),Ut=Ds(Ut,Re," ")),A&&rs?A.createHTML(Ut):Ut},t.setConfig=function(Le){no(Le),os=!0},t.clearConfig=function(){Wr=null,os=!1},t.isValidAttribute=function(Le,$,pe){Wr||no({});const we=rn(Le),_t=rn($);return xA(we,_t,pe)},t.addHook=function(Le,$){typeof $=="function"&&(H[Le]=H[Le]||[],il(H[Le],$))},t.removeHook=function(Le){if(H[Le])return uz(H[Le])},t.removeHooks=function(Le){H[Le]&&(H[Le]=[])},t.removeAllHooks=function(){H={}},t}var Np=t_();const n_=Q.each,kz=Q.trim,Nz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Az={ftp:21,http:80,https:443,mailto:25},Tz=["img","video"],Rz=(e,t)=>ee(e)?!e:ee(t)?!R(Tz,t):!0,Pz=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},s_=(e,t,n)=>{const s=Pz(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?Rz(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class ps{static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=Cr.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!s_(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,n={}){this.path="",this.directory="",t=kz(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=s?s.path:new ps(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&n_(Nz,(a,c)=>{let f=i[c];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[a]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new ps(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new ps(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?Az[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),i=n.split("/"),a=[];n_(r,p=>{p&&a.push(p)});const c=[];for(let p=i.length-1;p>=0;p--)if(!(i[p].length===0||i[p]===".")){if(i[p]===".."){s++;continue}if(s>0){s--;continue}c.push(i[p])}const f=a.length-s;let m;return f<=0?m=it(c).join("/"):m=a.slice(0,f).join("/")+"/"+it(c).join("/"),m.indexOf("/")!==0&&(m="/"+m),o&&m.lastIndexOf("/")!==m.length-1&&(m+=o),m}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const Dz=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ap="data-mce-type";let o_=0;const r_=(e,t,n,s,o)=>{var r,i,a,c;const f=t.validate,m=n.getSpecialElements();e.nodeType===Zl&&!t.allow_conditional_comments&&/^\[if/i.test((r=e.nodeValue)!==null&&r!==void 0?r:"")&&(e.nodeValue=" "+e.nodeValue);const p=(i=o==null?void 0:o.tagName)!==null&&i!==void 0?i:e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){ee(o)&&(o.allowedTags[p]=!0);return}if(e.nodeType!==ca||p==="body")return;const g=w.fromDom(e),C=ua(g,Ap),S=Wn(g,"data-mce-bogus");if(!C&&ae(S)){S==="all"?pt(g):Bo(g);return}const y=n.getElementRule(p);if(f&&!y){Ne(m,p)?pt(g):Bo(g);return}else ee(o)&&(o.allowedTags[p]=!0);if(f&&y&&!C){if(N((a=y.attributesForced)!==null&&a!==void 0?a:[],_=>{Jt(g,_.name,_.value==="{$uid}"?`mce_${o_++}`:_.value)}),N((c=y.attributesDefault)!==null&&c!==void 0?c:[],_=>{ua(g,_.name)||Jt(g,_.name,_.value==="{$uid}"?`mce_${o_++}`:_.value)}),y.attributesRequired&&!z(y.attributesRequired,_=>ua(g,_))){Bo(g);return}if(y.removeEmptyAttrs&&iP(g)){Bo(g);return}y.outputName&&y.outputName!==p&&wD(g,y.outputName)}},Oz=(e,t,n,s,o)=>{const r=e.tagName.toLowerCase(),{attrName:i,attrValue:a}=o;o.keepAttr=i_(t,n,s,r,i,a),o.keepAttr?(o.allowedAttributes[i]=!0,l_(i,n)&&(o.attrValue=i),t.allow_svg_data_urls&&zt(a,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):a_(e,i)&&(o.forceKeepAttr=!0)},i_=(e,t,n,s,o,r)=>n!=="html"&&!gr(s)?!0:!(o in Dz&&s_(e,r,s))&&(!e.validate||t.isValid(s,o)||zt(o,"data-")||zt(o,"aria-")),a_=(e,t)=>e.hasAttribute(Ap)&&(t==="id"||t==="class"||t==="style"),l_=(e,t)=>e in t.getBoolAttrs(),Bz=(e,t,n,s)=>{const{attributes:o}=e;for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.name,c=i.value;!i_(t,n,s,e.tagName.toLowerCase(),a,c)&&!a_(e,a)?e.removeAttribute(a):l_(a,n)&&e.setAttribute(a,a)}},Iz=(e,t,n)=>{const s=Np();return s.addHook("uponSanitizeElement",(o,r)=>{r_(o,e,t,n.track(o),r)}),s.addHook("uponSanitizeAttribute",(o,r)=>{Oz(o,e,t,n.current(),r)}),s},Lz=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},$z=e=>{const t=EC(e);if(t==="svg"){const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};Np().sanitize(e,s)}else if(t==="math"){const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};Np().sanitize(e,n)}else throw new Error("Not a namespace element")},Fz=(e,t)=>{const n=d1();if(e.sanitize){const s=Iz(e,t,n);return{sanitizeHtmlElement:(r,i)=>{s.sanitize(r,Lz(e,i)),s.removed=[],n.reset()},sanitizeNamespaceElement:$z}}else return{sanitizeHtmlElement:(r,i)=>{const a=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let c;for(;c=a.nextNode();){const f=n.track(c);r_(c,e,t,f),he(c)&&Bz(c,e,t,f)}n.reset()},sanitizeNamespaceElement:Te}},c_=Q.makeMap,u_=Q.extend,f_=(e,t,n,s)=>{const o=e.name,r=o in n&&o!=="title"&&o!=="textarea"&&o!=="noscript",i=t.childNodes;for(let a=0,c=i.length;a<c;a++){const f=i[a],m=new _n(f.nodeName.toLowerCase(),f.nodeType);if(he(f)){const p=f.attributes;for(let g=0,C=p.length;g<C;g++){const S=p[g];m.attr(S.name,S.value)}gr(m.name)&&(s(f),m.value=f.innerHTML)}else Y(f)?(m.value=f.data,r&&(m.raw=!0)):(Io(f)||ZP(f)||QP(f))&&(m.value=f.data);gr(m.name)||f_(m,f,n,s),e.append(m)}},Mz=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const i=o;N(t,a=>a(i)),dt(i.parent)&&i!==e?o=r:s.push(i)}for(let o=s.length-1;o>=0;o--){const r=s[o];N(n,i=>i(r))}},Uz=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=u_(c_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=HC(t),f=/[ \t\r\n]+/g,m=/^[ \t\r\n]+/,p=/[ \t\r\n]+$/,g=T=>{let A=T.parent;for(;ee(A);){if(A.name in i)return!0;A=A.parent}return!1},C=T=>{let A=T;for(;ee(A);){if(A.name in c)return nl(t,r,i,A);A=A.parent}return!1},S=T=>T.name in a||md(t,T)||gr(T.name)&&T.parent===e,y=(T,A)=>{const D=A?T.prev:T.next;return ee(D)||dt(T.parent)?!1:S(T.parent)&&(T.parent!==e||s.isRootContent===!0)};return[T=>{var A;if(T.type===3&&!g(T)){let D=(A=T.value)!==null&&A!==void 0?A:"";D=D.replace(f," "),(aU(T.prev,S)||y(T,!0))&&(D=D.replace(m,"")),D.length===0||D===" "&&T.prev&&T.prev.type===Zl&&T.next&&T.next.type===Zl?T.remove():T.value=D}},T=>{var A;if(T.type===1){const D=t.getElementRule(T.name);if(o&&D){const V=nl(t,r,i,T);D.paddInEmptyBlock&&V&&C(T)?Qm(n,s,S,T):D.removeEmpty&&V?S(T)?T.remove():T.unwrap():D.paddEmpty&&(V||rU(T))&&Qm(n,s,S,T)}}else if(T.type===3&&!g(T)){let D=(A=T.value)!==null&&A!==void 0?A:"";(T.next&&S(T.next)||y(T,!1))&&(D=D.replace(p,"")),D.length===0?T.remove():T.value=D}}]},Hz=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Di=(e={},t=Lo())=>{const n=MS(),s=MS(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,i=Fz(o,t),a=(A,D,V="html")=>{const X=V==="xhtml"?"application/xhtml+xml":"text/html",se=Ne(t.getSpecialElements(),D.toLowerCase()),M=se?`<${D}>${A}</${D}>`:A,I=()=>V==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${M}</body></html>`:/^[\s]*<head/i.test(A)||/^[\s]*<html/i.test(A)||/^[\s]*<!DOCTYPE/i.test(A)?`<html>${M}</html>`:`<body>${M}</body>`,H=r.parseFromString(I(),X).body;return i.sanitizeHtmlElement(H,X),se?H.firstChild:H},c=n.addFilter,f=n.getFilters,m=n.removeFilter,p=s.addFilter,g=s.getFilters,C=s.removeFilter,S=(A,D)=>{tp(t,A)&&D.push(A)},y=(A,D)=>{const V=ae(D.attr(Ap)),X=D.type===1&&!Ne(A,D.name)&&!md(t,D)&&!gr(D.name);return D.type===3||X&&!V},_=(A,D)=>{const V=u_(c_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),X=/^[ \t\r\n]+/,se=/[ \t\r\n]+$/;let M=A.firstChild,I=null;const H=ue=>{var be,Re;ue&&(M=ue.firstChild,M&&M.type===3&&(M.value=(be=M.value)===null||be===void 0?void 0:be.replace(X,"")),M=ue.lastChild,M&&M.type===3&&(M.value=(Re=M.value)===null||Re===void 0?void 0:Re.replace(se,"")))};if(t.isValidChild(A.name,D.toLowerCase())){for(;M;){const ue=M.next;y(V,M)?(I||(I=new _n(D,1),I.attr(o.forced_root_block_attrs),A.insert(I,M)),I.append(M)):(H(I),I=null),M=ue}H(I)}},T={schema:t,addAttributeFilter:p,getAttributeFilters:g,removeAttributeFilter:C,addNodeFilter:c,getNodeFilters:f,removeNodeFilter:m,parse:(A,D={})=>{var V;const X=o.validate,se=(V=D.context)!==null&&V!==void 0?V:o.root_name,M=a(A,se,D.format);cd(t,M);const I=new _n(se,11);f_(I,M,t.getSpecialElements(),i.sanitizeNamespaceElement),M.innerHTML="";const[H,ue]=Uz(I,t,o,D),be=[],Re=X?gt=>S(gt,be):Te,Oe={nodes:{},attributes:{}},We=gt=>q0(f(),g(),gt,Oe);if(Mz(I,[H,We],[ue,Re]),be.reverse(),X&&be.length>0)if(D.context){const{pass:gt,fail:Zt}=Ee(be,et=>et.parent===I);ep(Zt,t,I,We),D.invalid=gt.length>0}else ep(be,t,I,We);const Ge=Hz(o,D);return Ge&&(I.name==="body"||D.isRootContent)&&_(I,Ge),D.invalid||K0(Oe,D),I}};return oz(T,o),VH(T,o,t),T},zz=e=>tu(e)?Vo({validate:!1}).serialize(e):e,d_=(e,t,n)=>{const s=zz(e),o=t(s);if(o.isDefaultPrevented())return o;if(tu(e))if(o.content!==s){const r=Di({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},m_=e=>({sanitize:iv(e),sandbox_iframes:lv(e),sandbox_iframes_exclusions:Kd(e)}),p_=(e,t)=>{if(t.no_events)return An.value(t);{const n=PL(e,t);return n.isDefaultPrevented()?An.error(aE(e,{content:"",...n}).content):An.value(n)}},g_=(e,t,n)=>n.no_events?t:d_(t,o=>aE(e,{...n,content:o}),m_(e)).content,Tp=(e,t)=>{if(t.no_events)return An.value(t);{const n=d_(t.content,s=>RL(e,{...t,content:s}),m_(e));return n.isDefaultPrevented()?(iE(e,n),An.error(void 0)):An.value(n)}},Rp=(e,t,n)=>{n.no_events||iE(e,{...n,content:t})},Pp=(e,t,n)=>({element:e,width:t,rows:n}),h_=(e,t)=>({element:e,cells:t}),Vz=(e,t)=>({x:e,y:t}),b_=(e,t)=>mo(e,t).bind(Xl).getOr(1),Wz=(e,t,n,s,o)=>{const r=b_(o,"rowspan"),i=b_(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=h_(iy(s),[]));for(let f=t;f<t+i;f++){const m=a[c].cells;m[f]=c===n&&f===t?o:Er(o)}}},jz=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},qz=(e,t,n)=>{for(;jz(e,t,n);)t++;return t},C_=e=>re(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),y_=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(Qe(o[r],t))return b.some(Vz(r,s))}return b.none()},v_=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,f=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(h_(i[a].element,f))}return r},Kz=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?v_(e,s,o,r,i):v_(e,s,i,r,o);return Pp(e.element,C_(a),a)},Gz=(e,t)=>{const n=Er(e.element),s=w.fromTag("tbody");return dr(s,t),Ft(n,s),n},Yz=e=>q(e.rows,t=>{const n=q(t.cells,o=>{const r=iy(o);return en(r,"colspan"),en(r,"rowspan"),r}),s=Er(t.element);return dr(s,n),s}),Xz=e=>{const t=Pp(Er(e),0,[]);return N(mn(e,"tr"),(n,s)=>{N(mn(n,"td,th"),(o,r)=>{Wz(t,qz(t,r,s),s,n,o)})}),Pp(t.element,C_(t.rows),t.rows)},Zz=e=>Gz(e,Yz(e)),Qz=(e,t,n)=>y_(e,t).bind(s=>y_(e,n).map(o=>Kz(e,s,o))),Jz=e=>me(e,t=>Ve(t)==="ul"||Ve(t)==="ol"),eV=(e,t)=>me(e,n=>Ve(n)==="li"&&rm(n,t)).fold(G([]),n=>Jz(e).map(s=>{const o=w.fromTag(Ve(s)),r=ra(Zf(s),(i,a)=>zt(a,"list-style"));return sc(o,r),[w.fromTag("li"),o]}).getOr([])),tV=(e,t)=>{const n=re(t,(s,o)=>(Ft(o,s),o),e);return t.length>0?vm([n]):n},nV=e=>pi(e)?xs(e).filter(Td).fold(G([]),t=>[e,t]):Td(e)?[e]:[],sV=(e,t,n)=>{const s=w.fromDom(t.commonAncestorContainer),o=Eo(s,e),r=W(o,c=>n.isWrapper(Ve(c))),i=eV(o,t),a=r.concat(i.length?i:nV(s));return q(a,Er)},E_=()=>vm([]),oV=(e,t,n)=>tV(w.fromDom(t.cloneContents()),sV(e,t,n)),rV=(e,t)=>ha(t,"table",fe(Qe,e)),iV=(e,t)=>rV(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=Xz(n);return Qz(r,s,o).map(i=>vm([Zz(i)]))}).getOrThunk(E_),aV=(e,t,n)=>t.length>0&&t[0].collapsed?E_():oV(e,t[0],n),lV=(e,t,n)=>{const s=Lv(t,e);return s.length>0?iV(e,s):aV(e,t,n)},lu=(e,t)=>t>=0&&t<e.length&&Tr(e.charAt(t)),S_=e=>jn(e.innerText),cV=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),uV=e=>b.from(e.selection.getRng()).map(t=>{var n;const s=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=cV(s),i=w.fromDom(t.cloneContents());GE(i),YE(i);const a=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),c=S_(a),f=jn((n=a.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(a),lu(f,0)||lu(f,f.length-1)){const m=s.getOr(o),p=S_(m),g=p.indexOf(c);if(g===-1)return c;{const C=lu(p,g-1),S=lu(p,g+c.length);return(C?" ":"")+c+(S?" ":"")}}else return c}).getOr(""),fV=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Pm(e,sm(o)),i=t.contextual?lV(w.fromDom(e.getBody()),r,e.schema).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},dV=(e,t)=>{if(t.format==="text")return uV(e);{const n=fV(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},mV=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),pV=(e,t,n={})=>{const s=mV(n,t);return p_(e,s).fold(It,o=>{const r=dV(e,o);return g_(e,r,o)})},Dp=0,__=1,w_=2,gV=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(m,p,g)=>({start:m,end:p,diag:g}),i=(m,p,g,C,S)=>{const y=c(m,p,g,C);if(y===null||y.start===p&&y.diag===p-C||y.end===m&&y.diag===m-g){let _=m,k=g;for(;_<p||k<C;)_<p&&k<C&&e[_]===t[k]?(S.push([Dp,e[_]]),++_,++k):p-m>C-g?(S.push([w_,e[_]]),++_):(S.push([__,t[k]]),++k)}else{i(m,y.start,g,y.start-y.diag,S);for(let _=y.start;_<y.end;++_)S.push([Dp,e[_]]);i(y.end,p,y.end-y.diag,C,S)}},a=(m,p,g,C)=>{let S=m;for(;S-p<C&&S<g&&e[S]===t[S-p];)++S;return r(m,S,p)},c=(m,p,g,C)=>{const S=p-m,y=C-g;if(S===0||y===0)return null;const _=S-y,k=y+S,T=(k%2===0?k:k+1)/2;s[1+T]=m,o[1+T]=p+1;let A,D,V,X,se;for(A=0;A<=T;++A){for(D=-A;D<=A;D+=2){for(V=D+T,D===-A||D!==A&&s[V-1]<s[V+1]?s[V]=s[V+1]:s[V]=s[V-1]+1,X=s[V],se=X-m+g-D;X<p&&se<C&&e[X]===t[se];)s[V]=++X,++se;if(_%2!==0&&_-A<=D&&D<=_+A&&o[V-_]<=s[V])return a(o[V-_],D+m-g,p,C)}for(D=_-A;D<=_+A;D+=2){for(V=D+T-_,D===_-A||D!==_+A&&o[V+1]<=o[V-1]?o[V]=o[V+1]-1:o[V]=o[V-1],X=o[V]-1,se=X-m+g-D;X>=m&&se>=g&&e[X]===t[se];)o[V]=X--,se--;if(_%2===0&&-A<=D&&D<=A&&o[V]<=s[V+_])return a(o[V],D+m-g,p,C)}}return null},f=[];return i(0,e.length,0,t.length,f),f},x_=e=>he(e)?e.outerHTML:Y(e)?Cr.encodeRaw(e.data,!1):Io(e)?"<!--"+e.data+"-->":"",hV=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},bV=(e,t,n)=>{const s=hV(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},CV=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},yV=(e,t)=>{let n=0;N(e,s=>{s[0]===Dp?n++:s[0]===__?(bV(t,s[1],n),n++):s[0]===w_&&CV(t,n)})},vV=(e,t)=>W(q(Et(e.childNodes),At(jn,x_)),n=>n.length>0),EV=(e,t)=>{const n=q(Et(t.childNodes),x_);return yV(gV(n,e),t),t},SV=Ms(()=>document.implementation.createHTMLDocument("undo")),_V=e=>e.querySelector("iframe")!==null,wV=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),xV=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),cu=e=>{const t=e.serializer.getTempAttrs(),n=KE(e.getBody(),t);return _V(n)?wV(vV(n)):xV(jn(n.innerHTML))},Op=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?EV(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ee(s)&&Pv(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},Bp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,k_=e=>{const t=w.fromTag("body",SV());return rc(t,Bp(e)),N(mn(t,"*[data-mce-bogus]"),Bo),rC(t)},kV=(e,t)=>Bp(e)===Bp(t),NV=(e,t)=>k_(e)===k_(t),Ip=(e,t)=>!e||!t?!1:kV(e,t)?!0:NV(e,t),Lp=e=>e.get()===0,uu=(e,t,n)=>{Lp(n)&&(e.typing=t)},N_=(e,t)=>{e.typing&&(uu(e,!1,t),e.add())},AV=e=>{e.typing&&(e.typing=!1,e.add())},TV=(e,t,n)=>{Lp(t)&&n.set(Hd(e.selection))},RV=(e,t,n,s,o,r,i)=>{const a=cu(e),c=Q.extend(r||{},a);if(!Lp(s)||e.removed)return null;const f=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:f,originalEvent:i}).isDefaultPrevented()||f&&Ip(f,c))return null;t.data[n.get()]&&o.get().each(g=>{t.data[n.get()].beforeBookmark=g});const m=yB(e);if(m&&t.data.length>m){for(let g=0;g<t.data.length-1;g++)t.data[g]=t.data[g+1];t.data.length--,n.set(t.data.length)}c.bookmark=Hd(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const p={level:c,lastLevel:f,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",p),e.dispatch("change",p)):e.dispatch("AddUndo",p),c},PV=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},DV=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Op(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},OV=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Op(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},BV=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,uu(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Op(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},IV=e=>{e.clear(),e.add()},LV=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Ip(cu(e),t.data[0]),$V=(e,t)=>t.get()<e.data.length-1&&!e.typing,FV=(e,t,n)=>(N_(e,t),e.beforeChange(),e.ignore(n),e.add()),MV=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},UV=(e,t)=>{const n=e.dom,s=ee(t)?t:e.getBody();N(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=xB(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=sv(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},A_=e=>({init:{bindEvents:Te},undoManager:{beforeChange:(t,n)=>TV(e,t,n),add:(t,n,s,o,r,i)=>RV(e,t,n,s,o,r,i),undo:(t,n,s)=>BV(e,t,n,s),redo:(t,n)=>OV(e,t,n),clear:(t,n)=>PV(e,t,n),reset:t=>IV(t),hasUndo:(t,n)=>LV(e,t,n),hasRedo:(t,n)=>$V(t,n),transact:(t,n,s)=>FV(t,n,s),ignore:(t,n)=>MV(t,n),extra:(t,n,s,o)=>DV(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>cp(e,t,n,s,o),matchAll:(t,n)=>ZU(e,t,n),matchNode:(t,n,s,o)=>Qs(e,t,n,s,o),canApply:t=>JU(e,t),closest:t=>QU(e,t),apply:(t,n,s)=>DS(e,t,n,s),remove:(t,n,s,o)=>TS(e,t,n,s,o),toggle:(t,n,s)=>FH(e,t,n,s),formatChanged:(t,n,s,o,r)=>$H(e,t,n,s,o,r)},editor:{getContent:t=>xF(e,t),setContent:(t,n)=>YU(e,t,n),insertContent:(t,n)=>jU(e,t,n),addVisual:t=>UV(e,t)},selection:{getContent:(t,n)=>pV(e,t,n)},autocompleter:{addDecoration:Te,removeDecoration:Te},raw:{getModel:()=>b.none()}}),HV=e=>{const t=f=>ke(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,m,p)=>s.transact(p),ignore:(f,m)=>s.ignore(m),extra:(f,m,p,g)=>s.extra(p,g)},formatter:{match:(f,m,p,g)=>o.match(f,t(m),g),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,m,p)=>o.apply(f,t(m)),remove:(f,m,p,g)=>o.remove(f,t(m)),toggle:(f,m,p)=>o.toggle(f,t(m)),formatChanged:(f,m,p,g,C)=>o.formatChanged(m,p,g,C)},editor:{getContent:f=>r.getContent(f),setContent:(f,m)=>({content:r.setContent(f,m),html:""}),insertContent:(f,m)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,m)=>i.getContent(m)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>b.some(c.getRawModel())}}},zV=()=>{const e=G(null),t=G("");return{init:{bindEvents:Te},undoManager:{beforeChange:Te,add:e,undo:e,redo:e,clear:Te,reset:Te,hasUndo:st,hasRedo:st,transact:e,ignore:Te,extra:Te},formatter:{match:st,matchAll:G([]),matchNode:G(void 0),canApply:st,closest:t,apply:Te,remove:Te,toggle:Te,formatChanged:G({unbind:Te})},editor:{getContent:t,setContent:G({content:"",html:""}),insertContent:G(""),addVisual:Te},selection:{getContent:t},autocompleter:{addDecoration:Te,removeDecoration:Te},raw:{getModel:G(b.none())}}},Js=e=>Ne(e.plugins,"rtc"),VV=e=>mt(e.plugins,"rtc").bind(t=>b.from(t.setup)),WV=e=>{const t=e;return VV(e).fold(()=>(t.rtcInstance=A_(e),b.none()),n=>(t.rtcInstance=zV(),b.some(()=>n().then(s=>(t.rtcInstance=HV(s),s.rtc.isRemote)))))},$p=e=>e.rtcInstance?e.rtcInstance:A_(e),Mt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},jV=(e,t,n)=>{Mt(e).undoManager.beforeChange(t,n)},qV=(e,t,n,s,o,r,i)=>Mt(e).undoManager.add(t,n,s,o,r,i),KV=(e,t,n,s)=>Mt(e).undoManager.undo(t,n,s),GV=(e,t,n)=>Mt(e).undoManager.redo(t,n),YV=(e,t,n)=>{Mt(e).undoManager.clear(t,n)},XV=(e,t)=>{Mt(e).undoManager.reset(t)},ZV=(e,t,n)=>Mt(e).undoManager.hasUndo(t,n),QV=(e,t,n)=>Mt(e).undoManager.hasRedo(t,n),JV=(e,t,n,s)=>Mt(e).undoManager.transact(t,n,s),e2=(e,t,n)=>{Mt(e).undoManager.ignore(t,n)},t2=(e,t,n,s,o)=>{Mt(e).undoManager.extra(t,n,s,o)},n2=(e,t,n,s,o)=>Mt(e).formatter.match(t,n,s,o),s2=(e,t,n)=>Mt(e).formatter.matchAll(t,n),o2=(e,t,n,s,o)=>Mt(e).formatter.matchNode(t,n,s,o),r2=(e,t)=>Mt(e).formatter.canApply(t),i2=(e,t)=>Mt(e).formatter.closest(t),a2=(e,t,n,s)=>{Mt(e).formatter.apply(t,n,s)},l2=(e,t,n,s,o)=>{Mt(e).formatter.remove(t,n,s,o)},c2=(e,t,n,s)=>{Mt(e).formatter.toggle(t,n,s)},u2=(e,t,n,s,o,r)=>Mt(e).formatter.formatChanged(t,n,s,o,r),f2=(e,t)=>$p(e).editor.getContent(t),d2=(e,t,n)=>$p(e).editor.setContent(t,n),m2=(e,t,n)=>$p(e).editor.insertContent(t,n),p2=(e,t,n)=>Mt(e).selection.getContent(t,n),g2=(e,t)=>Mt(e).editor.addVisual(t),T_=e=>Mt(e).init.bindEvents(),h2=(e,t={})=>{const n=t.format?t.format:"html";return p2(e,n,t)},R_=e=>e.dom.length===0?(pt(e),b.none()):b.some(e),b2=(e,t)=>e.filter(n=>Ga.isBookmarkNode(n.dom)).bind(t?ga:Do),C2=(e,t,n,s,o)=>{const r=e.dom,i=t.dom,a=s?r.length:i.length;s?(Hm(r,i,o,!1,!s),n.setStart(i,a)):(Hm(i,r,o,!1,!s),n.setEnd(i,a))},y2=(e,t,n)=>{xs(e).each(s=>{const o=e.dom;t&&Ja(s,F(o,0),n)?Xc(o,0,n):!t&&el(s,F(o,o.length),n)&&Um(o,o.length,n)})},P_=(e,t,n,s,o)=>{e.bind(r=>((s?Um:Xc)(r.dom,s?r.dom.length:0,o),t.filter(Nn).map(a=>C2(r,a,n,s,o)))).orThunk(()=>b2(t,s).or(t).filter(Nn).map(i=>y2(i,s,o)))},v2=(e,t,n)=>{const s=b.from(t.firstChild).map(w.fromDom),o=b.from(t.lastChild).map(w.fromDom);e.deleteContents(),e.insertNode(t);const r=s.bind(Do).filter(Nn).bind(R_),i=o.bind(ga).filter(Nn).bind(R_);P_(r,s,e,!0,n),P_(i,o,e,!1,n),e.collapse(!1)},E2=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),S2=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Vo({validate:!1},e.schema).serialize(r)}else return t.content},_2=(e,t,n={})=>{const s=E2(n,t);Tp(e,s).each(o=>{const r=S2(e,o),i=e.selection.getRng();v2(i,i.createContextualFragment(r),e.schema),e.selection.setRng(i),Xa(e,i),Rp(e,r,o)})},D_=(e,t,n)=>{if(Ne(e,t)){const s=W(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var w2=(e,t)=>{let n,s;const o=(a,c)=>me(c,f=>e.is(f,a)),r=a=>e.getParents(a,void 0,e.getRoot()),i=()=>{n={},s={},t.on("NodeChange",a=>{const c=a.element,f=r(c),m={};lt(n,(p,g)=>{o(g,f).each(C=>{s[g]||(N(p,S=>{S(!0,{node:C,selector:g,parents:f})}),s[g]=p),m[g]=p})}),lt(s,(p,g)=>{m[g]||(delete s[g],N(p,C=>{C(!1,{node:c,selector:g,parents:f})}))})})};return{selectorChangedWithUnbind:(a,c)=>(n||i(),n[a]||(n[a]=[]),n[a].push(c),o(a,r(t.selection.getStart())).each(()=>{s[a]=n[a]}),{unbind:()=>{D_(n,a,c),D_(s,a,c)}})}};const O_=e=>!!(e&&e.ownerDocument)&&ws(w.fromDom(e.ownerDocument),w.fromDom(e)),x2=e=>e?O_(e.startContainer)&&O_(e.endContainer):!1,B_=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=w2(e,s),a=(J,ge)=>{const Ue=e.createRng();ee(J)&&ee(ge)?(Ue.setStart(J,ge),Ue.setEnd(J,ge),D(Ue),k(!1)):(im(e,Ue,s.getBody(),!0),D(Ue))},c=J=>h2(s,J),f=(J,ge)=>_2(s,J,ge),m=J=>FE(s.getBody(),A(),J),p=J=>ME(s.getBody(),A(),J),g=(J,ge)=>Zt.getBookmark(J,ge),C=J=>Zt.moveToBookmark(J),S=(J,ge)=>(fF(e,J,ge).each(D),J),y=()=>{const J=A(),ge=T();return!J||J.item?!1:J.compareEndPoints?J.compareEndPoints("StartToEnd",J)===0:!ge||J.collapsed},_=()=>{const J=A(),ge=s.getBody().querySelectorAll('[data-mce-selected="1"]');return ge.length>0?ot(ge,Ue=>e.isEditable(Ue.parentElement)):LE(e,J)},k=J=>{const ge=A();ge.collapse(!!J),D(ge)},T=()=>t.getSelection?t.getSelection():t.document.selection,A=()=>{let J;const ge=(te,ve,De)=>{try{return ve.compareBoundaryPoints(te,De)}catch{return-1}},Ue=t.document;if(ee(s.bookmark)&&!Ti(s)){const te=km(s);if(te.isSome())return te.map(ve=>Pm(s,[ve])[0]).getOr(Ue.createRange())}try{const te=T();te&&!ac(te.anchorNode)&&(te.rangeCount>0?J=te.getRangeAt(0):J=Ue.createRange(),J=Pm(s,[J])[0])}catch{}if(J||(J=Ue.createRange()),va(J.startContainer)&&J.collapsed){const te=e.getRoot();J.setStart(te,0),J.setEnd(te,0)}return o&&r&&(ge(J.START_TO_START,J,o)===0&&ge(J.END_TO_END,J,o)===0?J=r:(o=null,r=null)),J},D=(J,ge)=>{if(!x2(J))return;const Ue=T();if(J=s.dispatch("SetSelectionRange",{range:J,forward:ge}).range,Ue){r=J;try{Ue.removeAllRanges(),Ue.addRange(J)}catch{}ge===!1&&Ue.extend&&(Ue.collapse(J.endContainer,J.endOffset),Ue.extend(J.startContainer,J.startOffset)),o=Ue.rangeCount>0?Ue.getRangeAt(0):null}if(!J.collapsed&&J.startContainer===J.endContainer&&(Ue!=null&&Ue.setBaseAndExtent)&&J.endOffset-J.startOffset<2&&J.startContainer.hasChildNodes()){const ve=J.startContainer.childNodes[J.startOffset];ve&&ve.nodeName==="IMG"&&(Ue.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),(Ue.anchorNode!==J.startContainer||Ue.focusNode!==J.endContainer)&&Ue.setBaseAndExtent(ve,0,ve,1))}s.dispatch("AfterSetSelectionRange",{range:J,forward:ge})},V=J=>(f(e.getOuterHTML(J)),J),X=()=>cF(s.getBody(),A()),se=(J,ge)=>uF(e,A(),J,ge),M=()=>{const J=T(),ge=J==null?void 0:J.anchorNode,Ue=J==null?void 0:J.focusNode;if(!J||!ge||!Ue||ac(ge)||ac(Ue))return!0;const te=e.createRng(),ve=e.createRng();try{te.setStart(ge,J.anchorOffset),te.collapse(!0),ve.setStart(Ue,J.focusOffset),ve.collapse(!0)}catch{return!0}return te.compareBoundaryPoints(te.START_TO_START,ve)<=0},gt={dom:e,win:t,serializer:n,editor:s,expand:(J={type:"word"})=>D(Dr(e).expand(A(),J)),collapse:k,setCursorLocation:a,getContent:c,setContent:f,getBookmark:g,moveToBookmark:C,select:S,isCollapsed:y,isEditable:_,isForward:M,setNode:V,getNode:X,getSel:T,setRng:D,getRng:A,getStart:m,getEnd:p,getSelectedBlocks:se,normalize:()=>{const J=A(),ge=T();if(!KI(ge)&&Bc(s)){const Ue=Hc(e,J);return Ue.each(te=>{D(te,M())}),Ue.getOr(J)}return J},selectorChanged:(J,ge)=>(i(J,ge),gt),selectorChangedWithUnbind:i,getScrollContainer:()=>{let J,ge=e.getRoot();for(;ge&&ge.nodeName!=="BODY";){if(ge.scrollHeight>ge.clientHeight){J=ge;break}ge=ge.parentNode}return J},scrollIntoView:(J,ge)=>{ee(J)?D$(s,J,ge):Xa(s,A(),ge)},placeCaretAt:(J,ge)=>D(gE(J,ge,s.getDoc())),getBoundingClientRect:()=>{const J=A();return J.collapsed?F.fromRangeStart(J).getClientRects()[0]:J.getBoundingClientRect()},destroy:()=>{t=o=r=null,et.destroy()}},Zt=Ga(gt),et=uE(gt,s);return gt.bookmarkManager=Zt,gt.controlSelection=et,gt},k2=(e,t,n)=>{t.addNodeFilter("br",(s,o,r)=>{const i=Q.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();i.body=1;const f=m=>m.name in i||md(n,m);for(let m=0,p=s.length;m<p;m++){let g=s[m],C=g.parent;if(C&&f(C)&&g===C.lastChild){let S=g.prev;for(;S;){const y=S.name;if(y!=="span"||S.attr("data-mce-type")!=="bookmark"){y==="br"&&(g=null);break}S=S.prev}if(g&&(g.remove(),nl(n,a,c,C))){const y=n.getElementRule(C.name);y&&(y.removeEmpty?C.remove():y.paddEmpty&&Qm(e,r,f,C))}}else{let S=g;for(;C&&C.firstChild===S&&C.lastChild===S&&(S=C,!i[C.name]);)C=C.parent;if(S===C){const y=new _n("#text",3);y.value=Vt,g.replace(y)}}}})},N2=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const f=s[c];let m=f.attr(r);m!==void 0?(f.attr(o,m.length>0?m:null),f.attr(r,null)):(m=f.attr(o),o==="style"?m=n.serializeStyle(n.parseStyle(m),f.name):i&&(m=i.call(a,m,o,f.name)),f.attr(o,m.length>0?m:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(a.firstChild).exists(f=>{var m;return!Cc((m=f.value)!==null&&m!==void 0?m:"")})?a.unwrap():a.remove())}}),e.addNodeFilter("script,style",(s,o)=>{var r;const i=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let a=s.length;for(;a--;){const c=s[a],f=c.firstChild,m=(r=f==null?void 0:f.value)!==null&&r!==void 0?r:"";if(o==="script"){const p=c.attr("type");p&&c.attr("type",p==="mce-no/type"?null:p.replace(/^mce\-/,"")),t.element_format==="xhtml"&&f&&m.length>0&&(f.value=`// <![CDATA[
`+i(m)+`
// ]]>`)}else t.element_format==="xhtml"&&f&&m.length>0&&(f.value=`<!--
`+i(m)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],i=r.value;t.preserve_cdata&&(i==null?void 0:i.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):(i==null?void 0:i.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{N(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.remove_trailing_brs&&k2(t,e,e.schema)},A2=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},T2=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");Q.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return yL(e,{...n,node:r}),s&&(o.doc=s),r},R2=(e,t)=>ee(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,P2=(e,t,n)=>R2(e,n)?T2(e,t,n):t,D2=(e,t,n)=>{Q.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},O2=(e,t,n)=>!t.no_events&&e?vL(e,{...t,content:n}).content:n,B2=(e,t,n)=>{const s=jn(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||bc(w.fromDom(t))?s:Q.trim(s)},I2=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return A2(o),o},L2=(e,t,n)=>Vo(e,t).serialize(n),$2=(e,t,n,s,o)=>{const r=L2(t,n,s);return O2(e,o,r)},F2=(e,t)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:at.DOM,r=t&&t.schema?t.schema:Lo(s),i=Di(s,r);N2(i,s,o);const a=(c,f={})=>{const m={format:"html",...f},p=P2(t,c,m),g=B2(o,p,m),C=I2(i,g,m);return m.format==="tree"?C:$2(t,s,r,C,m)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:a,addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:fe(D2,i,n),getTempAttrs:G(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},I_=(e,t)=>{const n=F2(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},M2="html",U2=(e,t)=>({...e,format:t,get:!0,getInner:!0}),H2=(e,t={})=>{const n=t.format?t.format:M2,s=U2(t,n);return p_(e,s).fold(It,o=>{const r=f2(e,o);return g_(e,r,o)})},z2="html",V2=(e,t)=>({format:z2,...e,set:!0,content:t}),Fp=(e,t,n={})=>{const s=V2(n,t);return Tp(e,s).map(o=>{const r=d2(e,o.content,o);return Rp(e,r.html,o),r.content}).getOr(t)},W2="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),j2=[],q2="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),L_=[],$_=(e,t)=>{const n=W(t,s=>Ne(e,s));return nn(n)},K2=e=>{const t=$_(e,W2),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),nn(t)},G2=e=>$_(e,j2),F_=(e,t)=>{const n=Q.makeMap(e.plugins," "),o=W(t,r=>Ne(n,r));return nn(o)},Y2=e=>F_(e,q2),X2=e=>F_(e,L_.map(t=>t.name)),Z2=(e,t)=>{const n=K2(e),s=Y2(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",f=o?`

Plugins:${a}${s.join(a)}`:"",m=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+c+f+m)}},Q2=e=>me(L_,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),J2=(e,t)=>{const n=G2(e),s=X2(t),o=s.length>0,r=n.length>0;if(o||r){const i=`
- `,a=o?`

Plugins:${i}${s.map(Q2).join(i)}`:"",c=r?`

Options:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+a+c)}},eW=(e,t)=>{Z2(e,t),J2(e,t)},fu=at.DOM,tW=e=>{fu.setStyle(e.id,"display",e.orgDisplay)},du=e=>b.from(e).each(t=>t.destroy()),nW=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},sW=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),fu.unbind(t,"submit reset",e.formEventDelegate))},oW=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ee(o==null?void 0:o.nextSibling)&&fu.remove(o.nextSibling),EL(e),e.editorManager.remove(e),!e.inline&&s&&tW(e),SL(e),fu.remove(e.getContainer()),du(t),du(n),e.destroy()}},rW=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),du(n),du(s)),sW(e),nW(e),e.destroyed=!0}},mu=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Ne(e,o)}})(),Oi=Sn.ModelManager,M_=(e,t)=>t.dom[e],U_=(e,t)=>parseInt(Ws(t,e),10),iW=fe(M_,"clientWidth"),aW=fe(M_,"clientHeight"),lW=fe(U_,"margin-top"),cW=fe(U_,"margin-left"),uW=e=>e.dom.getBoundingClientRect(),fW=(e,t,n)=>{const s=iW(e),o=aW(e);return t>=0&&n>=0&&t<=s&&n<=o},dW=(e,t,n,s)=>{const o=uW(t),r=e?o.left+t.dom.clientLeft+cW(t):0,i=e?o.top+t.dom.clientTop+lW(t):0,a=n-r,c=s-i;return{x:a,y:c}},mW=(e,t,n)=>{const s=w.fromDom(e.getBody()),o=e.inline?s:hP(s),r=dW(e.inline,o,t,n);return fW(o,r.x,r.y)},pW=e=>b.from(e).map(w.fromDom),gW=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return pW(t).map(ii).getOr(!1)};var hW=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const H_=e=>{const t=[],n=()=>{const g=e.theme;return g&&g.getNotificationManagerImpl?g.getNotificationManagerImpl():hW()},s=()=>b.from(t[0]),o=(g,C)=>g.type===C.type&&g.text===C.text&&!g.progressBar&&!g.timeout&&!C.progressBar&&!C.timeout,r=()=>{s().each(g=>{g.reposition()})},i=g=>{t.push(g)},a=g=>{Ae(t,C=>C===g).each(C=>{t.splice(C,1)})},c=(g,C=!0)=>e.removed||!gW(e)?{}:(C&&e.dispatch("BeforeOpenNotification",{notification:g}),me(t,S=>o(n().getArgs(S),g)).getOrThunk(()=>{e.editorManager.setActive(e);const S=n().open(g,()=>{a(S)},()=>IE(e));return i(S),r(),e.dispatch("OpenNotification",{notification:{...S}}),S})),f=()=>{s().each(g=>{n().close(g),a(g),r()})},m=G(t);return(g=>{g.on("SkinLoaded",()=>{const C=aB(g);C&&c({text:C,type:"warning",timeout:0},!1),r()}),g.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),g.on("remove",()=>{N(t.slice(),C=>{n().close(C)})}),g.addShortcut("alt+F12","Focus to notification",()=>s().map(C=>w.fromDom(C.getEl())).each(C=>AE(C)))})(e),{open:c,close:f,getNotifications:m}},Bi=Sn.PluginManager,$r=Sn.ThemeManager;var bW=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const z_=e=>{let t=[];const n=()=>{const y=e.theme;return y&&y.getWindowManagerImpl?y.getWindowManagerImpl():bW()},s=(y,_)=>(...k)=>_?_.apply(y,k):void 0,o=y=>{e.dispatch("OpenWindow",{dialog:y})},r=y=>{e.dispatch("CloseWindow",{dialog:y})},i=y=>{t.push(y),o(y)},a=y=>{r(y),t=W(t,_=>_!==y),t.length===0&&e.focus()},c=()=>b.from(t[t.length-1]),f=y=>{e.editorManager.setActive(e),Wc(e),e.ui.show();const _=y();return i(_),_},m=(y,_)=>f(()=>n().open(y,_,a)),p=y=>f(()=>n().openUrl(y,a)),g=(y,_,k)=>{const T=n();T.alert(y,s(k||T,_))},C=(y,_,k)=>{const T=n();T.confirm(y,s(k||T,_))},S=()=>{c().each(y=>{n().close(y),a(y)})};return e.on("remove",()=>{N(t,y=>{n().close(y)})}),{open:m,openUrl:p,alert:g,confirm:C,close:S}},V_=(e,t)=>{e.notificationManager.open({type:"error",text:t})},pu=(e,t)=>{e._skinLoaded?V_(e,t):e.on("SkinLoaded",()=>{V_(e,t)})},CW=(e,t)=>{pu(e,As.translate(["Failed to upload image: {0}",t]))},ll=(e,t,n)=>{sE(e,t,{message:n}),console.error(n)},cl=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,yW=(e,t,n)=>{ll(e,"PluginLoadError",cl("plugin",t,n))},vW=(e,t,n)=>{ll(e,"IconsLoadError",cl("icons",t,n))},EW=(e,t,n)=>{ll(e,"LanguageLoadError",cl("language",t,n))},SW=(e,t,n)=>{ll(e,"ThemeLoadError",cl("theme",t,n))},_W=(e,t,n)=>{ll(e,"ModelLoadError",cl("model",t,n))},wW=(e,t,n)=>{const s=As.translate(["Failed to initialize plugin: {0}",t]);sE(e,"PluginLoadError",{message:s}),gu(s,n),pu(e,s)},gu=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},xW=e=>/^[a-z0-9\-]+$/i.test(e),Mp=e=>"content/"+e+"/content.css",kW=e=>tinymce.Resource.has(Mp(e)),NW=e=>W_(e,tB(e)),AW=e=>W_(e,Qy(e)),W_=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return q(t,r=>kW(r)?r:xW(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},TW=e=>{e.contentCSS=e.contentCSS.concat(NW(e),AW(e))},RW=e=>e?Et(e.getElementsByTagName("img")):[],PW=(e,t)=>{const n={};return{findAll:(o,r=Ct)=>{const i=W(RW(o),c=>{const f=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!f||f===je.transparentSrc?!1:zt(f,"blob:")?!e.isUploaded(f)&&r(c):zt(f,"data:")?r(c):!1}),a=q(i,c=>{const f=c.src;if(Ne(n,f))return n[f].then(m=>ae(m)?m:{image:c,blobInfo:m.blobInfo});{const m=XH(t,f).then(p=>(delete n[f],{image:c,blobInfo:p})).catch(p=>(delete n[f],p));return n[f]=m,m}});return Promise.all(a)}}},j_=()=>{let n={};const s=(g,C)=>({status:g,resultUri:C}),o=g=>g in n;return{hasBlobUri:o,getResultUri:g=>{const C=n[g];return C?C.resultUri:null},isPending:g=>o(g)?n[g].status===1:!1,isUploaded:g=>o(g)?n[g].status===2:!1,markPending:g=>{n[g]=s(1,null)},markUploaded:(g,C)=>{n[g]=s(2,C)},removeFailed:g=>{delete n[g]},destroy:()=>{n={}}}};let DW=0;const OW=()=>{const e=()=>Math.round(sy()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},BW=e=>e+DW+++OW(),IW=()=>{let e=[];const t=p=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[p.toLowerCase()]||"dat",n=(p,g,C,S,y)=>{if(ae(p))return s({id:p,name:S,filename:y,blob:g,base64:C});if(ke(p))return s(p);throw new Error("Unknown input type")},s=p=>{if(!p.blob||!p.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const g=p.id||BW("blobid"),C=p.name||g,S=p.blob;return{id:G(g),name:G(C),filename:G(p.filename||C+"."+t(S.type)),blob:G(S),base64:G(p.base64),blobUri:G(p.blobUri||URL.createObjectURL(S)),uri:G(p.uri)}},o=p=>{i(p.id())||e.push(p)},r=p=>me(e,p).getOrUndefined(),i=p=>r(g=>g.id()===p);return{create:n,add:o,get:i,getByUri:p=>r(g=>g.blobUri()===p),getByData:(p,g)=>r(C=>C.base64()===p&&C.blob().type===g),findFirst:r,removeByUri:p=>{e=W(e,g=>g.blobUri()===p?(URL.revokeObjectURL(g.blobUri()),!1):!0)},destroy:()=>{N(e,p=>{URL.revokeObjectURL(p.blobUri())}),e=[]}}},LW=(e,t)=>{const n={},s=(y,_)=>y?y.replace(/\/$/,"")+"/"+_.replace(/^\//,""):_,o=(y,_)=>new Promise((k,T)=>{const A=new XMLHttpRequest;A.open("POST",t.url),A.withCredentials=t.credentials,A.upload.onprogress=V=>{_(V.loaded/V.total*100)},A.onerror=()=>{T("Image upload failed due to a XHR Transport error. Code: "+A.status)},A.onload=()=>{if(A.status<200||A.status>=300){T("HTTP Error: "+A.status);return}const V=JSON.parse(A.responseText);if(!V||!ae(V.location)){T("Invalid JSON: "+A.responseText);return}k(s(t.basePath,V.location))};const D=new FormData;D.append("file",y.blob(),y.filename()),A.send(D)}),r=Ke(t.handler)?t.handler:o,i=()=>new Promise(y=>{y([])}),a=(y,_)=>({url:_,blobInfo:y,status:!0}),c=(y,_)=>({url:"",blobInfo:y,status:!1,error:_}),f=(y,_)=>{Q.each(n[y],k=>{k(_)}),delete n[y]},m=(y,_,k)=>(e.markPending(y.blobUri()),new Promise(T=>{let A,D;try{const V=()=>{A&&(A.close(),D=Te)},X=M=>{V(),e.markUploaded(y.blobUri(),M),f(y.blobUri(),a(y,M)),T(a(y,M))},se=M=>{V(),e.removeFailed(y.blobUri()),f(y.blobUri(),c(y,M)),T(c(y,M))};D=M=>{M<0||M>100||b.from(A).orThunk(()=>b.from(k).map(ta)).each(I=>{A=I,I.progressBar.value(M)})},_(y,D).then(X,M=>{se(ae(M)?{message:M}:M)})}catch(V){T(c(y,V))}})),p=y=>y===o,g=y=>{const _=y.blobUri();return new Promise(k=>{n[_]=n[_]||[],n[_].push(k)})},C=(y,_)=>(y=Q.grep(y,k=>!e.isUploaded(k.blobUri())),Promise.all(Q.map(y,k=>e.isPending(k.blobUri())?g(k):m(k,r,_))));return{upload:(y,_)=>!t.url&&p(r)?i():C(y,_)}},q_=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),K_=(e,t)=>LW(t,{url:GO(e),basePath:YO(e),credentials:XO(e),handler:ZO(e)}),$W=e=>{const t=j_(),n=K_(e,t);return{upload:(s,o=!0)=>n.upload(s,o?q_(e):void 0)}},FW=(e,t)=>e.dom.isEmpty(t.dom)&&ee(e.schema.getTextBlockElements()[Ve(t)]),MW=e=>t=>{FW(e,t)&&Ft(t,w.fromHtml('<br data-mce-bogus="1" />'))},UW=e=>{const t=IW();let n,s;const o=j_(),r=[],i=A=>D=>e.selection?A(D):[],a=A=>A+(A.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(A,D,V)=>{let X=0;do X=A.indexOf(D,X),X!==-1&&(A=A.substring(0,X)+V+A.substr(X+D.length),X+=V.length-D.length+1);while(X!==-1);return A},f=(A,D,V)=>{const X=`src="${V}"${V===je.transparentSrc?' data-mce-placeholder="1"':""}`;return A=c(A,`src="${D}"`,X),A=c(A,'data-mce-src="'+D+'"','data-mce-src="'+V+'"'),A},m=(A,D)=>{N(e.undoManager.data,V=>{V.type==="fragmented"?V.fragments=q(V.fragments,X=>f(X,A,D)):V.content=f(V.content,A,D)})},p=(A,D)=>{const V=e.convertURL(D,"src");m(A.src,D),fo(w.fromDom(A),{src:Gy(e)?a(D):D,"data-mce-src":V})},g=()=>(n||(n=K_(e,o)),_().then(i(A=>{const D=q(A,V=>V.blobInfo);return n.upload(D,q_(e)).then(i(V=>{const X=[];let se=!1;const M=q(V,(I,H)=>{const{blobInfo:ue,image:be}=A[H];let Re=!1;return I.status&&qO(e)?(I.url&&!un(be.src,I.url)&&(se=!0),t.removeByUri(be.src),Js(e)||p(be,I.url)):I.error&&(I.error.remove&&(m(be.src,je.transparentSrc),X.push(be),Re=!0),CW(e,I.error.message)),{element:be,status:I.status,uploadUri:I.url,blobInfo:ue,removed:Re}});return X.length>0&&!Js(e)?e.undoManager.transact(()=>{N(Jf(X),I=>{const H=xs(I);pt(I),H.each(MW(e)),t.removeByUri(I.dom.src)})}):se&&e.undoManager.dispatchChange(),M}))}))),C=()=>Ky(e)?g():Promise.resolve([]),S=A=>ot(r,D=>D(A)),y=A=>{r.push(A)},_=()=>(s||(s=PW(o,t)),s.findAll(e.getBody(),S).then(i(A=>{const D=W(A,V=>ae(V)?(pu(e,V),!1):V.uriType!=="blob");return Js(e)||N(D,V=>{m(V.image.src,V.blobInfo.blobUri()),V.image.src=V.blobInfo.blobUri(),V.image.removeAttribute("data-mce-src")}),D}))),k=()=>{t.destroy(),o.destroy(),s=n=null},T=A=>A.replace(/src="(blob:[^"]+)"/g,(D,V)=>{const X=o.getResultUri(V);if(X)return'src="'+X+'"';let se=t.getByUri(V);return se||(se=re(e.editorManager.get(),(M,I)=>M||I.editorUpload&&I.editorUpload.blobCache.getByUri(V),void 0)),se?'src="data:'+se.blob().type+";base64,"+se.base64()+'"':D});return e.on("SetContent",()=>{Ky(e)?C():_()}),e.on("RawSaveContent",A=>{A.content=T(A.content)}),e.on("GetContent",A=>{A.source_view||A.format==="raw"||A.format==="tree"||(A.content=T(A.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",A=>{N(A,D=>{const V=D.attr("src");if(!V||t.getByUri(V))return;const X=o.getResultUri(V);X&&D.attr("src",X)})})}),{blobCache:t,addFilter:y,uploadImages:g,uploadImagesAuto:C,scanForImages:_,destroy:k}},HW=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>he(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{Q.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},G_={remove_similar:!0,inherit:!1},Ii={selector:"td,th",...G_},zW={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ii},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ii},tablecellbordercolor:{styles:{borderColor:"%value"},...Ii},tablecellclass:{classes:["%value"],...Ii},tableclass:{selector:"table",classes:["%value"],...G_},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ii},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ii}},VW=G(zW),WW=e=>{const t={},n=i=>ee(i)?t[i]:t,s=i=>Ne(t,i),o=(i,a)=>{i&&(ae(i)?(rt(a)||(a=[a]),N(a,c=>{Dt(c.deep)&&(c.deep=!Qn(c)),Dt(c.split)&&(c.split=!Qn(c)||jt(c)),Dt(c.remove)&&Qn(c)&&!jt(c)&&(c.remove="none"),Qn(c)&&jt(c)&&(c.mixed=!0,c.block_expand=!0),ae(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):lt(i,(c,f)=>{o(f,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(HW(e)),o(VW()),o(uB(e)),{get:n,has:s,register:o,unregister:r}},hu=Q.each,ns=at.DOM,Up=e=>ee(e)&&ke(e),Y_=(e,t)=>{const n=t&&t.schema||Lo({}),s=(c,f)=>{f.classes.length>0&&ns.addClass(c,f.classes.join(" ")),ns.setAttribs(c,f.attrs)},o=c=>{const f=ae(c)?{name:c,classes:[],attrs:{}}:c,m=ns.create(f.name);return s(m,f),m},r=(c,f)=>{const m=n.getElementRule(c.nodeName.toLowerCase()),p=m==null?void 0:m.parentsRequired;return p&&p.length?f&&R(p,f)?f:p[0]:!1},i=(c,f,m)=>{let p;const g=f[0],C=Up(g)?g.name:void 0,S=r(c,C);if(S)C===S?(p=g,f=f.slice(1)):p=S;else if(g)p=g,f=f.slice(1);else if(!m)return c;const y=p?o(p):ns.create("div");y.appendChild(c),m&&Q.each(m,k=>{const T=o(k);y.insertBefore(T,c)});const _=Up(p)?p.siblings:void 0;return i(y,f,_)},a=ns.create("div");if(e.length>0){const c=e[0],f=o(c),m=Up(c)?c.siblings:void 0;a.appendChild(i(f,e.slice(1),m))}return a},jW=e=>{e=Q.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":Q.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},qW=e=>ae(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=Q.map(t.split(/(?:~\+|~|\+)/),jW),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],KW=(e,t)=>{let n="",s=fB(e);if(s==="")return"";const o=g=>ae(g)?g.replace(/%(\w+)/g,""):"",r=(g,C)=>ns.getStyle(C??e.getBody(),g,!0);if(ae(t)){const g=e.formatter.get(t);if(!g)return"";t=g[0]}if("preview"in t){const g=t.preview;if(g===!1)return"";s=g||s}let i=t.block||t.inline||"span",a;const c=qW(t.selector);c.length>0?(c[0].name||(c[0].name=i),i=t.selector,a=Y_(c,e)):a=Y_([i],e);const f=ns.select(i,a)[0]||a.firstChild;hu(t.styles,(g,C)=>{const S=o(g);S&&ns.setStyle(f,C,S)}),hu(t.attributes,(g,C)=>{const S=o(g);S&&ns.setAttrib(f,C,S)}),hu(t.classes,g=>{const C=o(g);ns.hasClass(f,C)||ns.addClass(f,C)}),e.dispatch("PreviewFormats"),ns.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const m=r("fontSize"),p=/px$/.test(m)?parseInt(m,10):0;return hu(s.split(" "),g=>{let C=r(g,f);if(!(g==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(C)&&(C=r(g),Sa(C).toLowerCase()==="#ffffff"))&&!(g==="color"&&Sa(C).toLowerCase()==="#000000")){if(g==="font-size"&&/em|%$/.test(C)){if(p===0)return;C=parseFloat(C)/(/%$/.test(C)?100:1)*p+"px"}g==="border"&&C&&(n+="padding:0 2px;"),n+=g+":"+C+";"}}),e.dispatch("AfterPreviewFormats"),ns.remove(a),n},GW=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},X_=e=>{const t=WW(e),n=Yt({});return GW(e),cH(e),Js(e)||BH(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{a2(e,s,o,r)},remove:(s,o,r,i)=>{l2(e,s,o,r,i)},toggle:(s,o,r)=>{c2(e,s,o,r)},match:(s,o,r,i)=>n2(e,s,o,r,i),closest:s=>i2(e,s),matchAll:(s,o)=>s2(e,s,o),matchNode:(s,o,r,i)=>o2(e,s,o,r,i),canApply:s=>r2(e,s),formatChanged:(s,o,r,i)=>u2(e,n,s,o,r,i),getCssText:fe(KW,e)}},Z_=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},YW=(e,t,n)=>{const s=Yt(!1),o=c=>{uu(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const f=c.command;Z_(f)||(N_(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const f=c.command;Z_(f)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;const m=je.os.isMacOS()&&c.key==="Meta";(f>=33&&f<=36||f>=37&&f<=40||f===45||c.ctrlKey||m)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&!Ip(cu(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",c=>{const f=c.keyCode;if(c.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(c);return}const m=c.ctrlKey&&!c.altKey||c.metaKey;if((f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!m){t.beforeChange(),uu(t,!0,n),t.add({},c),s.set(!0);return}(je.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&t.beforeChange()}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},XW=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},Q_=e=>{const t=Co(),n=Yt(0),s=Yt(0),o={data:[],typing:!1,beforeChange:()=>{jV(e,n,t)},add:(r,i)=>qV(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0);const r=cu(e);r.bookmark=Hd(e.selection),e.dispatch("change",{level:r,lastLevel:sn(o.data,s.get()).getOrUndefined()})},undo:()=>KV(e,o,n,s),redo:()=>GV(e,s,o.data),clear:()=>{YV(e,o,s)},reset:()=>{XV(e,o)},hasUndo:()=>ZV(e,o,s),hasRedo:()=>QV(e,o,s),transact:r=>JV(e,o,n,r),ignore:r=>{e2(e,n,r)},extra:(r,i)=>{t2(e,o,s,r,i)}};return Js(e)||YW(e,o,n),XW(e),o},ZW=[9,27,le.HOME,le.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,le.DOWN,le.UP,le.LEFT,le.RIGHT].concat(je.browser.isFirefox()?[224]:[]),J_="data-mce-placeholder",ew=e=>e.type==="keydown"||e.type==="keyup",tw=e=>{const t=e.keyCode;return t===le.BACKSPACE||t===le.DELETE},QW=e=>{if(ew(e)){const t=e.keyCode;return!tw(e)&&(le.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||R(ZW,t))}else return!1},JW=e=>ew(e)&&!(tw(e)||e.type==="keyup"&&e.keyCode===229),e3=(e,t,n)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},t3=e=>{var t;const n=e.dom,s=gn(e),o=(t=iB(e))!==null&&t!==void 0?t:"",r=(i,a)=>{if(QW(i))return;const c=e.getBody(),f=JW(i)?!1:e3(n,c,s);(n.getAttrib(c,J_)!==""!==f||a)&&(n.setAttrib(c,J_,f?o:null),TL(e,f),e.on(f?"keydown":"keyup",r),e.off(f?"keyup":"keydown",r))};Us(o)&&e.on("init",i=>{r(i,!0),e.on("change SetContent ExecCommand",r),e.on("paste",a=>Jn.setEditorTimeout(e,()=>r(a)))})},n3=(e,t)=>({block:e,position:t}),s3=(e,t)=>({from:e,to:t}),Hp=(e,t)=>{const n=w.fromDom(e),s=w.fromDom(t.container());return Qc(n,s).map(o=>n3(o,t))},o3=e=>!(ws(e.to.block,e.from.block)||ws(e.from.block,e.to.block)),r3=e=>!Qe(e.from.block,e.to.block),nw=(e,t)=>ur(t,o=>Da(o)||fs(o.dom),o=>Qe(o,e)).filter(Vn).getOr(e),i3=(e,t)=>{const n=w.fromDom(e);return Qe(nw(n,t.from.block),nw(n,t.to.block))},a3=e=>ct(e.from.block.dom)===!1&&ct(e.to.block.dom)===!1,l3=e=>{const t=n=>cy(n)||ud(n.dom)||pi(n);return t(e.from.block)&&t(e.to.block)},c3=(e,t,n,s)=>St(s.position.getNode())&&!pn(e,s.block)?_i(!1,s.block.dom).bind(o=>o.isEqual(s.position)?Yn(n,t,o).bind(r=>Hp(t,r)):b.some(s)).getOr(s):s,u3=(e,t,n,s)=>{const o=Hp(t,F.fromRangeStart(s)),r=o.bind(i=>Yn(n,t,i.position).bind(a=>Hp(t,a).map(c=>c3(e,t,n,c))));return fn(o,r,s3).filter(i=>r3(i)&&i3(t,i)&&a3(i)&&l3(i)&&o3(i))},f3=(e,t,n,s)=>s.collapsed?u3(e,t,n,s):b.none(),d3=(e,t)=>{const n=dn(e);return Ae(n,s=>t.isBlock(Ve(s))).fold(G(n),s=>n.slice(0,s))},sw=(e,t)=>{const n=d3(e,t);return N(n,pt),n},ow=(e,t,n)=>{const s=Eo(n,t);return me(s.reverse(),o=>pn(e,o)).each(pt)},m3=(e,t)=>W(Xb(t),n=>!pn(e,n)).length===0,p3=(e,t,n,s,o)=>{if(pn(s,n))return $o(n),hn(n.dom);m3(s,o)&&pn(s,t)&&Bn(o,w.fromTag("br"));const r=In(n.dom,F.before(o.dom));return N(sw(t,s),i=>{Bn(o,i)}),ow(s,e,t),r},g3=(e,t)=>e.isInline(Ve(t)),h3=(e,t,n,s)=>{if(pn(s,n)){if(pn(s,t)){const i=ye((a=>{const c=(f,m)=>jf(f).fold(()=>m,p=>g3(s,p)?c(p,m.concat(Er(p))):m);return c(a,[])})(n),(a,c)=>(oC(a,c),c),gi());li(t),Ft(t,i)}return pt(n),hn(t.dom)}const o=ds(n.dom);return N(sw(t,s),r=>{Ft(n,r)}),ow(s,e,t),o},b3=(e,t)=>{const n=Eo(t,e);return b.from(n[n.length-1])},C3=(e,t)=>ws(t,e)?b3(t,e):b.none(),rw=(e,t)=>{_i(e,t.dom).bind(n=>b.from(n.getNode())).map(w.fromDom).filter(_r).each(pt)},iw=(e,t,n,s)=>(rw(!0,t),rw(!1,n),C3(t,n).fold(fe(h3,e,t,n,s),fe(p3,e,t,n,s))),aw=(e,t,n,s,o)=>t?iw(e,s,n,o):iw(e,n,s,o),zp=(e,t)=>{const n=w.fromDom(e.getBody());return f3(e.schema,n.dom,t,e.selection.getRng()).map(o=>()=>{aw(n,t,o.from.block,o.to.block,e.schema).each(r=>{e.selection.setRng(r.toRange())})})},y3=(e,t,n)=>{const s=t.getRng();return fn(Qc(e,w.fromDom(s.startContainer)),Qc(e,w.fromDom(s.endContainer)),(o,r)=>Qe(o,r)?b.none():b.some(()=>{s.deleteContents(),aw(e,!0,o,r,n).each(i=>{t.setRng(i.toRange())})})).getOr(b.none())},lw=(e,t)=>{const n=w.fromDom(t),s=fe(Qe,e);return po(n,Da,s).isSome()},v3=(e,t)=>lw(e,t.startContainer)||lw(e,t.endContainer),E3=(e,t)=>{const n=In(e.dom,F.fromRangeStart(t)).isNone(),s=Tn(e.dom,F.fromRangeEnd(t)).isNone();return!v3(e,t)&&n&&s},S3=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),_3=e=>{const t=w.fromDom(e.getBody()),n=e.selection.getRng();return E3(t,n)?S3(e):y3(t,e.selection,e.schema)},Vp=(e,t)=>e.selection.isCollapsed()?b.none():_3(e),So=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),w3=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},ul=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(w3(t)),x3=(e,t,n)=>{const s=Xd(1,e.getBody(),t),o=F.fromRangeStart(s),r=o.getNode();if(Ma(r))return So(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(Ma(i))return So(1,e,i,!1,!1);const a=Ir(e.dom.getRoot(),o.getNode());return Ma(a)?So(1,e,a,!1,n):b.none()},Wp=(e,t,n)=>t.collapsed?x3(e,t,n).getOr(t):t,k3=e=>jo(e)||Za(e),N3=e=>qo(e)||Qa(e),A3=(e,t)=>{Y(t)&&t.data.length===0&&e.remove(t)},cw=(e,t,n,s,o,r)=>{So(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),A3(e.dom,n)},T3=(e,t)=>{const n=e.selection.getRng();if(!Y(n.commonAncestorContainer))return b.none();const s=t?Xt.Forwards:Xt.Backwards,o=Xs(e.getBody()),r=fe(Zd,t?o.next:o.prev),i=t?k3:N3,a=Wa(s,e.getBody(),n),c=r(a),f=c&&es(t,c);if(!f||!Rc(a,f))return b.none();if(i(f))return b.some(()=>cw(e,n,a.getNode(),s,t,f));const m=r(f);return m&&i(m)&&Rc(f,m)?b.some(()=>cw(e,n,a.getNode(),s,t,m)):b.none()},jp=(e,t)=>T3(e,t),qp=(e,t)=>{const n=e.getBody();return t?hn(n).filter(jo):ds(n).filter(qo)},Kp=e=>{const t=e.selection.getRng();return!t.collapsed&&(qp(e,!0).exists(n=>n.isEqual(F.fromRangeStart(t)))||qp(e,!1).exists(n=>n.isEqual(F.fromRangeEnd(t))))},R3=e=>ee(e)&&(Da(w.fromDom(e))||pi(w.fromDom(e))),qn=Ks.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),P3=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return he(n)&&n.getAttribute("data-mce-caret")===s},D3=(e,t,n,s,o)=>{const r=i=>o.isInline(i.nodeName.toLowerCase())&&!Gs(n,s,e);return Ev(!t,n).fold(()=>Ev(t,s).fold(st,r),r)},uw=(e,t,n,s,o)=>{const r=o.getNode(!n);return Qc(w.fromDom(t),w.fromDom(s.getNode())).map(i=>pn(e,i)?qn.remove(i.dom):qn.moveToElement(r)).orThunk(()=>b.some(qn.moveToElement(r)))},fw=(e,t,n,s)=>Yn(t,e,n).bind(o=>R3(o.getNode())||D3(e,t,n,o,s)?b.none():t&&ct(o.getNode())||!t&&ct(o.getNode(!0))?uw(s,e,t,n,o):t&&qo(n)||!t&&jo(n)?b.some(qn.moveToPosition(o)):b.none()),O3=(e,t)=>dt(t)?b.none():e&&ct(t.nextSibling)?b.some(qn.moveToElement(t.nextSibling)):!e&&ct(t.previousSibling)?b.some(qn.moveToElement(t.previousSibling)):b.none(),B3=(e,t,n)=>n.fold(s=>b.some(qn.remove(s)),s=>b.some(qn.moveToElement(s)),s=>Gs(t,s,e)?b.none():b.some(qn.moveToPosition(s))),I3=(e,t,n,s)=>P3(t,n)?O3(t,n.getNode(!t)).orThunk(()=>fw(e,t,n,s)):fw(e,t,n,s).bind(o=>B3(e,n,o)),L3=(e,t,n,s)=>{const o=Xd(t?1:-1,e,n),r=F.fromRangeStart(o),i=w.fromDom(e);return!t&&qo(r)?b.some(qn.remove(r.getNode(!0))):t&&jo(r)?b.some(qn.remove(r.getNode())):!t&&jo(r)&&Yc(i,r,s)?f0(i,r,s).map(a=>qn.remove(a.getNode())):t&&qo(r)&&$m(i,r,s)?HF(i,r,s).map(a=>qn.remove(a.getNode())):I3(e,t,r,s)},$3=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Or(e,t,w.fromDom(n)),!0),F3=(e,t)=>n=>{const s=t?F.before(n):F.after(n);return e.selection.setRng(s.toRange()),!0},M3=e=>t=>(e.selection.setRng(t.toRange()),!0),dw=(e,t)=>b.from(Ir(e.getBody(),t)),U3=(e,t)=>{const n=e.selection.getNode();return dw(e,n).filter(ct).fold(()=>L3(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold($3(e,t),F3(e,t),M3(e))),()=>b.some(Te))},H3=e=>{N(mn(e,".mce-offscreen-selection"),pt)},z3=(e,t)=>{const n=e.selection.getNode();return ct(n)&&!cc(n)?dw(e,n.parentNode).filter(ct).fold(()=>b.some(()=>{H3(w.fromDom(e.getBody())),Or(e,t,w.fromDom(e.selection.getNode())),zm(e)}),()=>b.some(Te)):Kp(e)?b.some(()=>{O0(e,e.selection.getRng(),w.fromDom(e.getBody()))}):b.none()},mw=e=>{const t=e.dom,n=e.selection,s=Ir(e.getBody(),n.getNode());if(fs(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(F.before(o).toRange())}return!0},Gp=(e,t)=>e.selection.isCollapsed()?U3(e,t):z3(e,t),pw=e=>e.hasOwnProperty("text"),gw=e=>e.hasOwnProperty("marker"),hw=(e,t)=>{const n=(r,i)=>{if(Y(r))return{text:r,offset:i};{const a=t(),c=r.childNodes;return i<c.length?(r.insertBefore(a,c[i]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},s=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:s}},bw=e=>{var t,n;const{start:s,end:o}=e,r=new window.Range;return pw(s)?r.setStart(s.text,s.offset):gw(s)&&(s.before?r.setStartBefore(s.marker):r.setStartAfter(s.marker),(t=s.marker.parentNode)===null||t===void 0||t.removeChild(s.marker)),pw(o)?r.setEnd(o.text,o.offset):gw(o)&&(o.before?r.setEndBefore(o.marker):r.setEndAfter(o.marker),(n=o.marker.parentNode)===null||n===void 0||n.removeChild(o.marker)),r},Yp=(e,t)=>{var n;const s=e.dom,o=s.getParent(e.selection.getStart(),s.isBlock),r=s.getParent(e.selection.getEnd(),s.isBlock),i=e.getBody();if(((n=o==null?void 0:o.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&o&&r&&o===i.firstChild&&r===i.lastChild&&!s.isEmpty(i)){const c=o.cloneNode(!1),f=()=>{if(t?R0(e):Zc(e),i.firstChild!==o){const m=hw(e.selection.getRng(),()=>document.createElement("span"));Array.from(i.childNodes).forEach(p=>c.appendChild(p)),i.appendChild(c),e.selection.setRng(bw(m))}};return b.some(f)}return b.none()},V3=(e,t)=>{const n=F.fromRangeStart(e.selection.getRng());return Yn(t,e.getBody(),n).filter(s=>t?OF(s):BF(s)).bind(s=>Yd(t?0:-1,s)).map(s=>()=>e.selection.select(s))},Xp=(e,t)=>e.selection.isCollapsed()?V3(e,t):b.none(),Li=Y,Cw=e=>Li(e)&&e.data[0]===Wt,yw=e=>Li(e)&&e.data[e.data.length-1]===Wt,vw=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Wt)},W3=e=>{var t;if(Li(e.previousSibling))return yw(e.previousSibling)||e.previousSibling.appendData(Wt),e.previousSibling;if(Li(e))return Cw(e)||e.insertData(0,Wt),e;{const n=vw(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},j3=e=>{var t,n;if(Li(e.nextSibling))return Cw(e.nextSibling)||e.nextSibling.insertData(0,Wt),e.nextSibling;if(Li(e))return yw(e)||e.appendData(Wt),e;{const s=vw(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},bu=(e,t)=>e?W3(t):j3(t),q3=fe(bu,!0),K3=fe(bu,!1),Ew=(e,t)=>Y(e.container())?bu(t,e.container()):bu(t,e.getNode()),Sw=(e,t)=>{const n=t.get();return n&&e.container()===n&&Fo(n)},Zp=(e,t)=>t.fold(n=>{kr(e.get());const s=q3(n);return e.set(s),b.some(F(s,s.length-1))},n=>hn(n).map(s=>{if(Sw(s,e)){const o=e.get();return F(o,1)}else{kr(e.get());const o=Ew(s,!0);return e.set(o),F(o,1)}}),n=>ds(n).map(s=>{if(Sw(s,e)){const o=e.get();return F(o,o.length-1)}else{kr(e.get());const o=Ew(s,!1);return e.set(o),F(o,o.length-1)}}),n=>{kr(e.get());const s=K3(n);return e.set(s),b.some(F(s,1))}),_w=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},wn=Ks.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ww=(e,t)=>{const n=Ho(t,e);return n||e},G3=(e,t,n)=>{const s=N0(n),o=ww(t,s.container());return Ko(e,o,s).fold(()=>Tn(o,s).bind(fe(Ko,e,o)).map(r=>wn.before(r)),b.none)},Y3=(e,t)=>Ar(e,t)===null,xw=(e,t,n)=>Ko(e,t,n).filter(fe(Y3,t)),X3=(e,t,n)=>{const s=A0(n);return xw(e,t,s).bind(o=>In(o,s).isNone()?b.some(wn.start(o)):b.none())},Z3=(e,t,n)=>{const s=N0(n);return xw(e,t,s).bind(o=>Tn(o,s).isNone()?b.some(wn.end(o)):b.none())},Q3=(e,t,n)=>{const s=A0(n),o=ww(t,s.container());return Ko(e,o,s).fold(()=>In(o,s).bind(fe(Ko,e,o)).map(r=>wn.after(r)),b.none)},kw=e=>!k0(Qp(e)),eo=(e,t,n)=>_w([G3,X3,Z3,Q3],[e,t,n]).filter(kw),Qp=e=>e.fold(It,It,It,It),Nw=e=>e.fold(G("before"),G("start"),G("end"),G("after")),Cu=e=>e.fold(wn.before,wn.before,wn.after,wn.after),Jp=e=>e.fold(wn.start,wn.start,wn.end,wn.end),J3=(e,t)=>Nw(e)===Nw(t)&&Qp(e)===Qp(t),ej=(e,t,n,s,o,r)=>fn(Ko(t,n,s),Ko(t,n,o),(i,a)=>i!==a&&yM(n,i,a)?wn.after(e?i:a):r).getOr(r),tj=(e,t)=>e.fold(Ct,n=>!J3(n,t)),nj=(e,t,n,s,o)=>{const r=es(e,o);return Yn(e,n,r).map(fe(es,e)).fold(()=>s.map(Cu),c=>eo(t,n,c).map(fe(ej,e,t,n,r,c)).filter(fe(tj,s))).filter(kw)},sj=(e,t)=>e?t.fold(At(b.some,wn.start),b.none,At(b.some,wn.after),b.none):t.fold(b.none,At(b.some,wn.before),b.none,At(b.some,wn.end)),oj=(e,t,n,s)=>{const o=es(e,s),r=eo(t,n,o);return eo(t,n,o).bind(fe(sj,e)).orThunk(()=>nj(e,t,n,r,s))},rj=e=>Ke(e.selection.getSel().modify),Aw=(e,t,n)=>{const s=e?1:-1;return t.setRng(F(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},ij=(e,t)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n);return rj(t)?e&&Rd(s)?Aw(!0,t.selection,s):!e&&Pd(s)?Aw(!1,t.selection,s):!1:!1};var to;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(to||(to={}));const yu=(e,t)=>e===Xt.Backwards?it(t):t,aj=(e,t,n)=>e===Xt.Forwards?t.next(n):t.prev(n),lj=(e,t,n,s)=>St(s.getNode(t===Xt.Forwards))?to.Br:Gs(n,s)===!1?to.Block:to.Wrap,Tw=(e,t,n,s)=>{const o=Xs(n);let r=s;const i=[];for(;r;){const a=aj(t,o,r);if(!a)break;if(St(a.getNode(!1)))return t===Xt.Forwards?{positions:yu(t,i).concat([a]),breakType:to.Br,breakAt:b.some(a)}:{positions:yu(t,i),breakType:to.Br,breakAt:b.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=lj(n,t,r,a);return{positions:yu(t,i),breakType:c,breakAt:b.some(a)}}i.push(a),r=a}return{positions:yu(t,i),breakType:to.Eol,breakAt:b.none()}},Rw=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Xt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),eg=(e,t)=>re(e,(n,s)=>n.fold(()=>b.some(s),o=>fn(Ht(o.getClientRects()),Ht(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),b.none()),vu=(e,t)=>Ht(t.getClientRects()).bind(n=>eg(e,n.left)),fl=fe(Tw,F.isAbove,-1),dl=fe(Tw,F.isBelow,1),Pw=fe(Rw,-1,fl),Dw=fe(Rw,1,dl),Ow=(e,t)=>fl(e,t).breakAt.isNone(),Bw=(e,t)=>dl(e,t).breakAt.isNone(),cj=e=>hn(e).map(t=>[t].concat(dl(e,t).positions)).getOr([]),uj=e=>ds(e).map(t=>fl(e,t).positions.concat(t)).getOr([]),fj=(e,t)=>vu(Pw(e,t),t),dj=(e,t)=>vu(Dw(e,t),t),mj=ct,Iw=(e,t)=>Math.abs(e.left-t),Lw=(e,t)=>Math.abs(e.right-t),pj=e=>ei(e,"node"),$w=(e,t)=>Yl(e,(n,s)=>{const o=Math.min(Iw(n,t),Lw(n,t)),r=Math.min(Iw(s,t),Lw(s,t));return r===o&&pj(s)&&mj(s.node)||r<o?s:n}),gj=e=>{const t=n=>q(n,s=>{const o=wr(s);return o.node=e,o});if(he(e))return t(e.getClientRects());if(Y(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},Fw=e=>ze(e,gj);var ml;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(ml||(ml={}));const hj=(e,t,n,s)=>{let o=s;for(;o=Ha(o,e,Cy,t);)if(n(o))return},Mw=(e,t,n,s,o,r)=>{let i=0;const a=[],c=p=>{let g=Fw([p]);e===-1&&(g=g.reverse());for(let C=0;C<g.length;C++){const S=g[C];if(!n(S,f)){if(a.length>0&&t(S,lr(a))&&i++,S.line=i,o(S))return!0;a.push(S)}}return!1},f=lr(r.getClientRects());if(!f)return a;const m=r.getNode();return m&&(c(m),hj(e,s,c,m)),a},bj=(e,t)=>t.line>e,Cj=(e,t)=>t.line===e,yj=fe(Mw,ml.Up,Oa,Ba),vj=fe(Mw,ml.Down,Ba,Oa),Uw=e=>lr(e.getClientRects()),Ej=(e,t,n,s)=>{const o=Xs(t);let r,i,a,c;const f=[];let m=0;e===1?(r=o.next,i=Ba,a=Oa,c=F.after(s)):(r=o.prev,i=Oa,a=Ba,c=F.before(s));const p=Uw(c);do{if(!c.isVisible())continue;const g=Uw(c);if(a(g,p))continue;f.length>0&&i(g,lr(f))&&m++;const C=wr(g);if(C.position=c,C.line=m,n(C))return f;f.push(C)}while(c=r(c));return f},Hw=e=>t=>bj(e,t),tg=e=>t=>Cj(e,t),_o=(e,t)=>{e.selection.setRng(t),Xa(e,e.selection.getRng())},ng=(e,t,n)=>b.some(Wp(e,t,n)),zw=(e,t,n,s,o,r)=>{const i=t===Xt.Forwards,a=Xs(e.getBody()),c=fe(Zd,i?a.next:a.prev),f=i?s:o;if(!n.collapsed){const S=Ec(n);if(r(S))return So(t,e,S,t===Xt.Backwards,!1);if(Kp(e)){const y=n.cloneRange();return y.collapse(t===Xt.Backwards),b.from(y)}}const m=Wa(t,e.getBody(),n);if(f(m))return ul(e,m.getNode(!i));let p=c(m);const g=fy(n);if(p)p=es(i,p);else return g?b.some(n):b.none();if(f(p))return So(t,e,p.getNode(!i),i,!1);const C=c(p);return C&&f(C)&&Rc(p,C)?So(t,e,C.getNode(!i),i,!1):g?ng(e,p.toRange(),!1):b.none()},Vw=(e,t,n,s,o,r)=>{const i=Wa(t,e.getBody(),n),a=lr(i.getClientRects()),c=t===ml.Down,f=e.getBody();if(!a)return b.none();if(Kp(e)){const _=c?F.fromRangeEnd(n):F.fromRangeStart(n);return(c?dj:fj)(f,_).orThunk(()=>b.from(_)).map(T=>T.toRange())}const p=(c?vj:yj)(f,Hw(1),i),g=W(p,tg(1)),C=a.left,S=$w(g,C);if(S&&r(S.node)){const _=Math.abs(C-S.left),k=Math.abs(C-S.right);return So(t,e,S.node,_<k,!1)}let y;if(s(i)?y=i.getNode():o(i)?y=i.getNode(!0):y=Ec(n),y){const _=Ej(t,f,Hw(1),y);let k=$w(W(_,tg(1)),C);if(k||(k=lr(W(_,tg(0))),k))return ng(e,k.position.toRange(),!1)}return g.length===0?sg(e,c).filter(c?o:s).map(_=>Wp(e,_.toRange(),!1)):b.none()},sg=(e,t)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n),o=_I(s.container(),e.getBody());if(t){const r=dl(o,s);return Ss(r.positions)}else{const r=fl(o,s);return Ht(r.positions)}},Ww=(e,t,n)=>sg(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Eu=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},jw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},qw=(e,t,n)=>Zp(t,n).map(s=>(Eu(e,s),n)),Sj=(e,t,n)=>{const s=F.fromRangeStart(e);if(e.collapsed)return s;{const o=F.fromRangeEnd(e);return n?In(t,o).getOr(o):Tn(t,s).getOr(s)}},_j=(e,t,n)=>{const s=e.getBody(),o=Sj(e.selection.getRng(),s,n),r=fe(Br,e);return oj(n,r,s,o).bind(a=>qw(e,t,a))},wj=(e,t,n)=>{const s=q(mn(w.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=W(s,e),r=W(n,e);N(cn(o,r),fe(jw,!1)),N(cn(r,o),fe(jw,!0))},xj=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=F.fromRangeStart(e.selection.getRng());F.isTextPosition(s)&&!vM(s)&&(Eu(e,fI(n,s)),t.set(null))}},kj=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=W(s,e);N(o,r=>{const i=F.fromRangeStart(t.selection.getRng());eo(e,t.getBody(),i).bind(a=>qw(t,n,a))})}},Kw=(e,t,n)=>Fa(e)?_j(e,t,n).isSome():!1,Gw=(e,t,n)=>Fa(t)?ij(e,t):!1,Nj=e=>{const t=Yt(null),n=fe(Br,e);return e.on("NodeChange",s=>{Fa(e)&&(wj(n,e.dom,s.parents),xj(e,t),kj(n,e,t,s.parents))}),t},Aj=fe(Gw,!0),Tj=fe(Gw,!1),Su=(e,t,n)=>{if(Fa(e)){const s=sg(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?F.fromRangeEnd(o):F.fromRangeStart(o)});return eo(fe(Br,e),e.getBody(),s).exists(o=>{const r=Cu(o);return Zp(n,r).exists(i=>(Eu(e,i),!0))})}else return!1},Rj=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Pj=e=>fn(hn(e),ds(e),(t,n)=>{const s=es(!0,t),o=es(!1,n);return Tn(e,s).forall(r=>r.isEqual(o))}).getOr(!0),Yw=(e,t)=>n=>Zp(t,n).map(s=>()=>Eu(e,s)),Xw=(e,t,n,s)=>{const o=e.getBody(),r=fe(Br,e);e.undoManager.ignore(()=>{e.selection.setRng(Rj(n,s)),Zc(e),eo(r,o,F.fromRangeStart(e.selection.getRng())).map(Jp).bind(Yw(e,t)).each(ir)}),e.nodeChanged()},Dj=(e,t)=>{const n=Ho(t,e);return n||e},Oj=(e,t,n,s)=>{const o=Dj(e.getBody(),s.container()),r=fe(Br,e),i=eo(r,o,s);return i.bind(c=>n?c.fold(G(b.some(Jp(c))),b.none,G(b.some(Cu(c))),b.none):c.fold(b.none,G(b.some(Cu(c))),b.none,G(b.some(Jp(c))))).map(Yw(e,t)).getOrThunk(()=>{const c=Si(n,o,s),f=c.bind(m=>eo(r,o,m));return fn(i,f,()=>Ko(r,o,s).bind(m=>Pj(m)?b.some(()=>{Or(e,n,w.fromDom(m))}):b.none())).getOrThunk(()=>f.bind(()=>c.map(m=>()=>{n?Xw(e,t,s,m):Xw(e,t,m,s)})))})},og=(e,t,n)=>{if(e.selection.isCollapsed()&&Fa(e)){const s=F.fromRangeStart(e.selection.getRng());return Oj(e,t,n,s)}return b.none()},Bj=e=>Kf(e)>1,Zw=(e,t)=>{const n=w.fromDom(e.getBody()),s=w.fromDom(e.selection.getStart()),o=Eo(s,n);return Ae(o,t).fold(G(o),r=>o.slice(0,r))},Ij=e=>Kf(e)===1,Lj=e=>Zw(e,t=>e.schema.isBlock(Ve(t))||Bj(t)),$j=e=>Zw(e,t=>e.schema.isBlock(Ve(t))),Qw=(e,t)=>{const n=fe(aS,e);return ze(t,s=>n(s)?[s.dom]:[])},Jw=e=>{const t=$j(e);return Qw(e,t)},Fj=(e,t,n,s)=>{const o=Qw(t,s);if(o.length===0)Or(t,e,n);else{const r=iS(n.dom,o);t.selection.setRng(r.toRange())}},Mj=(e,t)=>{const n=W(Lj(e),Ij);return Ss(n).bind(s=>{const o=F.fromRangeStart(e.selection.getRng());return P0(t,o,s.dom)&&!gm(s)?b.some(()=>Fj(t,e,s,n)):b.none()})},Uj=(e,t)=>{const n=t.parentElement;return St(t)&&!vt(n)&&e.dom.isEmpty(n)},Hj=e=>gm(w.fromDom(e)),ex=(e,t)=>{const n=e.selection.getStart(),s=Uj(e,n)||Hj(n)?iS(n,t):uH(e.selection.getRng(),t);e.selection.setRng(s.toRange())},zj=(e,t)=>{const n=cn(t,Jw(e));n.length>0&&ex(e,n)},tx=e=>Y(e.startContainer),Vj=e=>e.startOffset===0&&tx(e),Wj=(e,t)=>{const n=t.startContainer.parentElement;return!vt(n)&&aS(e,w.fromDom(n))},jj=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!vt(t)&&!vt(n)&&t.isEqualNode(n)},qj=e=>{const t=e.endContainer;return e.endOffset===(Y(t)?t.length:t.childNodes.length)},Kj=e=>jj(e)&&qj(e),Gj=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),Yj=e=>Kj(e)||Gj(e),Xj=e=>{const t=e.selection.getRng();return Vj(t)&&Wj(e,t)&&Yj(t)},Zj=e=>{if(Xj(e)){const t=Jw(e);return b.some(()=>{Zc(e),zj(e,t)})}else return b.none()},rg=(e,t)=>e.selection.isCollapsed()?Mj(e,t):Zj(e),Qj=(e,t)=>dC(e,n=>Xn(n.dom),n=>t.isBlock(Ve(n))),Jj=e=>Qj(w.fromDom(e.selection.getStart()),e.schema),e6=e=>{const t=e.selection.getRng();return t.collapsed&&(tx(t)||e.dom.isEmpty(t.startContainer))&&!Jj(e)},pl=e=>(e6(e)&&ex(e,[]),!0),ig=(e,t,n)=>ee(n)?b.some(()=>{e._selectionOverrides.hideFakeCaret(),Or(e,t,w.fromDom(n))}):b.none(),t6=(e,t)=>{const n=t?Za:Qa,s=t?Xt.Forwards:Xt.Backwards,o=Wa(s,e.getBody(),e.selection.getRng());return n(o)?ig(e,t,o.getNode(!t)):b.from(es(t,o)).filter(r=>n(r)&&Rc(o,r)).bind(r=>ig(e,t,r.getNode(!t)))},n6=(e,t)=>{const n=e.selection.getNode();return qs(n)?ig(e,t,n):b.none()},ag=(e,t)=>e.selection.isCollapsed()?t6(e,t):n6(e,t),s6=e=>ur(e,t=>fs(t.dom)||ct(t.dom)).exists(t=>fs(t.dom)),lg=e=>Xl(e??"").getOr(0),nx=(e,t)=>{const n=e||DD(t)?"margin":"padding",s=Ws(t,"direction")==="rtl"?"-right":"-left";return n+s},o6=(e,t,n,s,o,r)=>{const i=nx(n,w.fromDom(r)),a=lg(e.getStyle(r,i));if(t==="outdent"){const c=Math.max(0,a-s);e.setStyle(r,i,c?c+o:"")}else{const c=a+s+o;e.setStyle(r,i,c)}},r6=(e,t)=>ot(t,n=>{const s=nx(Zy(e),n),o=oc(n,s).map(lg).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),sx=e=>{const t=rx(e);return!e.mode.isReadOnly()&&(t.length>1||r6(e,t))},ox=e=>Td(e)||pi(e),i6=e=>xs(e).exists(ox),rx=e=>W(Jf(e.selection.getSelectedBlocks()),t=>!ox(t)&&!i6(t)&&s6(t)),ix=(e,t)=>{var n,s;const{dom:o}=e,r=eB(e),i=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",a=lg(r),c=Zy(e);N(rx(e),f=>{o6(o,t,c,a,i,f.dom)})},a6=e=>ix(e,"indent"),ax=e=>ix(e,"outdent"),lx=e=>{if(e.selection.isCollapsed()&&sx(e)){const t=e.dom,n=e.selection.getRng(),s=F.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Lm(w.fromDom(o),s,e.schema))return b.some(()=>ax(e))}return b.none()},cx=(e,t,n)=>En([lx,Gp,jp,(s,o)=>og(s,t,o),zp,Xm,Xp,ag,Vp,rg,Yp],s=>s(e,n)).filter(s=>e.selection.isEditable()),l6=(e,t)=>{cx(e,t,!1).fold(()=>{e.selection.isEditable()&&(Zc(e),zm(e))},ir)},c6=(e,t)=>{cx(e,t,!0).fold(()=>{e.selection.isEditable()&&R0(e)},ir)},u6=(e,t)=>{e.addCommand("delete",()=>{l6(e,t)}),e.addCommand("forwardDelete",()=>{c6(e,t)})},ux=5,f6=400,fx=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),d6=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>ux||s>ux},m6=e=>{const t=Co(),n=Yt(!1),s=Nd(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},f6);e.on("touchstart",o=>{fx(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),fx(o).each(r=>{t.on(i=>{d6(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},cg=(e,t)=>Ne(e,t.nodeName),p6=(e,t)=>Y(t)?!0:he(t)?!cg(e.getBlockElements(),t)&&!Zn(t)&&!hr(e,t)&&!ad(t):!1,g6=(e,t,n)=>z(i0(w.fromDom(n),w.fromDom(t)),s=>cg(e,s.dom)),h6=(e,t)=>{if(Y(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||cg(e,t.nextSibling)||ad(t.nextSibling)}return!1},ug=e=>e.dom.create(gn(e),$a(e)),b6=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),i=e.getBody();let a,c,f=null;const m=gn(e);if(!r||!he(r))return;const p=i.nodeName.toLowerCase();if(!s.isValidChild(p,m.toLowerCase())||g6(o,i,r))return;if(i.firstChild===i.lastChild&&St(i.firstChild)){a=ug(e),a.appendChild(gi().dom),i.replaceChild(a,i.firstChild),e.selection.setCursorLocation(a,0),e.nodeChanged();return}let g=i.firstChild;for(;g;)if(he(g)&&b1(s,g),p6(s,g)){if(h6(o,g)){c=g,g=g.nextSibling,t.remove(c);continue}if(!a){if(!f&&e.hasFocus()&&(f=hw(e.selection.getRng(),()=>document.createElement("span"))),!g.parentNode){g=null;break}a=ug(e),i.insertBefore(a,g)}c=g,g=g.nextSibling,a.appendChild(c)}else a=null,g=g.nextSibling;f&&(e.selection.setRng(bw(f)),e.nodeChanged())},dx=(e,t,n)=>{const s=w.fromDom(ug(e)),o=gi();Ft(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},C6=e=>{e.on("NodeChange",()=>b6(e))},mx=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,y6=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},v6=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],y6(e,o,rv(e)));n.content=o}},E6=(e,t)=>ot(e,n=>{const s=t.match(n);return s!==null&&s[0].length===t.length}),S6=e=>{const t="contenteditable",n=" "+Q.trim(jB(e))+" ",s=" "+Q.trim(rv(e))+" ",o=mx(n),r=mx(s),i=qB(e);i.length>0&&e.on("BeforeSetContent",a=>{v6(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const f=a[c];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const f=a[c];if(!o(f)&&!r(f))continue;const m=f.attr("data-mce-content");i.length>0&&m?E6(i,m)?(f.name="#text",f.type=3,f.raw=!0,f.value=m):f.remove():f.attr(t,null)}})},_6=e=>nc(w.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),px=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Dd(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},w6=(e,t)=>{const n=_6(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),px(e,n);return}uy(n)&&(px(e,n),e.undoManager.add())}},x6=e=>{e.on("keyup compositionstart",fe(w6,e))},gx=ct,k6=(e,t,n)=>zw(t,e,n,jo,qo,gx),N6=(e,t,n)=>Vw(t,e,n,r=>jo(r)||r0(r),r=>qo(r)||Bm(r),gx),A6=e=>{const t=e.dom.create(gn(e));return t.innerHTML='<br data-mce-bogus="1">',t},hx=(e,t,n)=>{const s=Xs(e.getBody()),o=fe(Zd,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(F.fromRangeStart(n))){const a=w.fromDom(A6(e));t===1?go(w.fromDom(r),a):Bn(w.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},T6=(e,t)=>{const n=t?Xt.Forwards:Xt.Backwards,s=e.selection.getRng();return k6(n,e,s).orThunk(()=>(hx(e,n,s),b.none()))},R6=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return N6(n,e,s).orThunk(()=>(hx(e,n,s),b.none()))},P6=(e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return k0(n)?!t:t},bx=(e,t)=>T6(e,P6(e.selection,t)).exists(n=>(_o(e,n),!0)),Cx=(e,t)=>R6(e,t).exists(n=>(_o(e,n),!0)),yx=(e,t)=>Ww(e,t,t?qo:jo),_u=(e,t)=>qp(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(_o(e,n),!0)),D6=e=>R(["figcaption"],Ve(e)),O6=(e,t,n)=>{const s=fe(Qe,t);return ur(w.fromDom(e.container()),o=>n.isBlock(Ve(o)),s).filter(D6)},B6=(e,t,n)=>t?Bw(e.dom,n):Ow(e.dom,n),I6=(e,t)=>{const n=w.fromDom(e.getBody()),s=F.fromRangeStart(e.selection.getRng());return O6(s,n,e.schema).exists(()=>{if(B6(n,t,s)){const r=dx(e,n,t?Ft:Qf);return e.selection.setRng(r),!0}else return!1})},vx=(e,t)=>e.selection.isCollapsed()?I6(e,t):!1,L6=(e,t,n)=>{const s=e.selection.getRng(),o=F.fromRangeStart(s);return e.getBody().firstChild===t&&Ow(n,o)?(e.execCommand("InsertNewBlockBefore"),!0):!1},$6=(e,t)=>{const n=e.selection.getRng(),s=F.fromRangeStart(n);return e.getBody().lastChild===t&&Bw(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},F6=(e,t)=>t?b.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>$6(e,n)).getOr(!1):b.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>b.from(e.dom.getParent(n,"details")).map(s=>L6(e,s,n))).getOr(!1),Ex=(e,t)=>F6(e,t),Sx={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},M6=e=>q(e,t=>({...Sx,...t})),U6=e=>q(e,t=>({...Sx,...t})),_x=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,H6=(e,t)=>ze(M6(e),n=>_x(n,t)?[n]:[]),z6=(e,t)=>ze(U6(e),n=>_x(n,t)?[n]:[]),xe=(e,...t)=>()=>e.apply(null,t),gl=(e,t)=>me(H6(e,t),n=>n.action()),wx=(e,t)=>En(z6(e,t),n=>n.action()),xx=(e,t)=>{const n=t?Xt.Forwards:Xt.Backwards,s=e.selection.getRng();return zw(e,n,s,Za,Qa,qs).exists(o=>(_o(e,o),!0))},kx=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return Vw(e,n,s,Za,Qa,qs).exists(o=>(_o(e,o),!0))},Nx=(e,t)=>Ww(e,t,t?Qa:Za),Ax=Ks.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),hl={...Ax,none:e=>Ax.none(e)},V6=(e,t)=>Tx(e,t,Ct),Tx=(e,t,n)=>ze(dn(e),s=>_s(s,t)?n(s)?[s]:[]:Tx(s,t,n)),W6=(e,t,n=st)=>{if(n(t))return b.none();if(R(e,Ve(t)))return b.some(t);const s=o=>_s(o,"table")||n(o);return ha(t,e.join(","),s)},j6=(e,t)=>W6(["td","th"],e,t),q6=e=>V6(e,"th,td"),Rx=(e,t)=>ai(e,"table",t),fg=(e,t,n,s,o=Ct)=>{const r=s===1;if(!r&&n<=0)return hl.first(e[0]);if(r&&n>=e.length-1)return hl.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?hl.middle(t,a):fg(e,t,i,s,o)}},Px=(e,t)=>Rx(e,t).bind(n=>{const s=q6(n);return Ae(s,r=>Qe(e,r)).map(r=>({index:r,all:s}))}),K6=(e,t,n)=>Px(e,n).fold(()=>hl.none(e),o=>fg(o.all,e,o.index,1,t)),G6=(e,t,n)=>Px(e,n).fold(()=>hl.none(),o=>fg(o.all,e,o.index,-1,t)),Y6=e=>xD(e).filter(t=>t.trim().length!==0||t.indexOf(Vt)>-1).isSome(),X6=e=>Jl(e)&&Wn(e,"contenteditable")==="false",Z6=["img","br"],Q6=e=>Y6(e)||R(Z6,Ve(e))||X6(e),J6=e=>Xf(e,Q6),e4=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),t4=(e,t)=>ze(t,n=>{const s=e4(wr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),n4=(e,t,n)=>re(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(a<i?o:r)}),b.none()),Dx=(e,t,n,s,o)=>{const r=mn(w.fromDom(n),"td,th,caption").map(a=>a.dom),i=W(t4(e,r),a=>t(a,o));return n4(i,s,o).map(a=>a.cell)},s4=e=>e.bottom,o4=e=>e.top,r4=(e,t)=>e.y<t,i4=(e,t)=>e.y>t,a4=fe(Dx,s4,r4),l4=fe(Dx,o4,i4),c4=(e,t)=>Ht(t.getClientRects()).bind(n=>a4(e,n.left,n.top)).bind(n=>vu(uj(n),t)),u4=(e,t)=>Ss(t.getClientRects()).bind(n=>l4(e,n.left,n.top)).bind(n=>vu(cj(n),t)),f4=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),d4=e=>e.breakType===to.Wrap&&e.positions.length===0,m4=e=>e.breakType===to.Br&&e.positions.length===1,Ox=(e,t,n)=>{const s=e(t,n);return d4(s)||!St(n.getNode())&&m4(s)?!f4(e,t,s):s.breakAt.isNone()},p4=fe(Ox,fl),g4=fe(Ox,dl),h4=(e,t,n)=>{const s=F.fromRangeStart(t);return _i(!e,n).exists(o=>o.isEqual(s))},b4=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return gv()&&h4(t,o,n)?(So(r,e,n,!t,!1).each(i=>{_o(e,i)}),!0):!1},C4=(e,t,n)=>c4(t,n).orThunk(()=>Ht(n.getClientRects()).bind(s=>eg(Pw(e,F.before(t)),s.left))).getOr(F.before(t)),y4=(e,t,n)=>u4(t,n).orThunk(()=>Ht(n.getClientRects()).bind(s=>eg(Dw(e,F.after(t)),s.left))).getOr(F.after(t)),Bx=(e,t)=>{const n=t.getNode(e);return js(n)?b.some(n):b.none()},v4=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?go:Bn,o=dx(t,w.fromDom(n),s);_o(t,o)})},Ix=(e,t,n)=>{const s=Bx(!!t,n),o=t===!1;s.fold(()=>_o(e,n.toRange()),r=>_i(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>_o(e,n.toRange()),i=>v4(t,e,r)))},E4=(e,t,n,s)=>{const o=e.selection.getRng(),r=F.fromRangeStart(o),i=e.getBody();if(!t&&p4(s,r)){const a=C4(i,n,r);return Ix(e,t,a),!0}else if(t&&g4(s,r)){const a=y4(i,n,r);return Ix(e,t,a),!0}else return!1},Lx=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),$x=(e,t)=>Lx(e,t,b4),dg=(e,t)=>Lx(e,t,E4),S4=e=>{const t=Ni.exact(e,0,e,0);return c$(t)},Fx=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>J6(o).map(r=>S4(r)),s=>(e.execCommand("mceTableInsertRowAfter"),Mx(e,t,s))),Mx=(e,t,n)=>Fx(e,t,K6(n,fr)),_4=(e,t,n)=>Fx(e,t,G6(n,fr)),Ux=(e,t)=>{const n=["table","li","dl"],s=w.fromDom(e.getBody()),o=a=>{const c=Ve(a);return Qe(a,s)||R(n,c)},r=e.selection.getRng(),i=w.fromDom(t?r.endContainer:r.startContainer);return j6(i,o).map(a=>(Rx(a,o).each(m=>{e.model.table.clearSelectedCells(m.dom)}),e.selection.collapse(!t),(t?Mx:_4)(e,o,a).each(m=>{e.selection.setRng(m)}),!0)).getOr(!1)},w4=(e,t,n)=>{const s=je.os.isMacOS()||je.os.isiOS();gl([{keyCode:le.RIGHT,action:xe(bx,e,!0)},{keyCode:le.LEFT,action:xe(bx,e,!1)},{keyCode:le.UP,action:xe(Cx,e,!1)},{keyCode:le.DOWN,action:xe(Cx,e,!0)},...s?[{keyCode:le.UP,action:xe(_u,e,!1),metaKey:!0,shiftKey:!0},{keyCode:le.DOWN,action:xe(_u,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:le.RIGHT,action:xe($x,e,!0)},{keyCode:le.LEFT,action:xe($x,e,!1)},{keyCode:le.UP,action:xe(dg,e,!1)},{keyCode:le.DOWN,action:xe(dg,e,!0)},{keyCode:le.UP,action:xe(dg,e,!1)},{keyCode:le.UP,action:xe(Ex,e,!1)},{keyCode:le.DOWN,action:xe(Ex,e,!0)},{keyCode:le.RIGHT,action:xe(xx,e,!0)},{keyCode:le.LEFT,action:xe(xx,e,!1)},{keyCode:le.UP,action:xe(kx,e,!1)},{keyCode:le.DOWN,action:xe(kx,e,!0)},{keyCode:le.RIGHT,action:xe(Kw,e,t,!0)},{keyCode:le.LEFT,action:xe(Kw,e,t,!1)},{keyCode:le.RIGHT,ctrlKey:!s,altKey:s,action:xe(Aj,e,t)},{keyCode:le.LEFT,ctrlKey:!s,altKey:s,action:xe(Tj,e,t)},{keyCode:le.UP,action:xe(vx,e,!1)},{keyCode:le.DOWN,action:xe(vx,e,!0)}],n).each(o=>{n.preventDefault()})},x4=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||w4(e,t,n)})},Os=(e,t)=>({container:e,offset:t}),wu=at.DOM,xu=e=>t=>e===t?-1:0,k4=e=>t=>e.isBlock(t)||R(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",mg=(e,t,n)=>{if(Y(e)&&t>=0)return b.some(Os(e,t));{const s=Sr(wu);return b.from(s.backwards(e,t,xu(e),n)).map(o=>Os(o.container,o.container.data.length))}},N4=(e,t,n)=>{if(Y(e)&&t>=e.length)return b.some(Os(e,t));{const s=Sr(wu);return b.from(s.forwards(e,t,xu(e),n)).map(o=>Os(o.container,0))}},pg=(e,t,n)=>{if(!Y(e))return b.none();const s=e.data;if(t>=0&&t<=s.length)return b.some(Os(e,t));{const o=Sr(wu);return b.from(o.backwards(e,t,xu(e),n)).bind(r=>{const i=r.container.data;return pg(r.container,t+i.length,n)})}},Hx=(e,t,n)=>{if(!Y(e))return b.none();const s=e.data;if(t<=s.length)return b.some(Os(e,t));{const o=Sr(wu);return b.from(o.forwards(e,t,xu(e),n)).bind(r=>Hx(r.container,t-s.length,n))}},gg=(e,t,n,s,o)=>{const r=Sr(e,k4(e));return b.from(r.backwards(t,n,s,o))},A4=e=>e.collapsed&&Y(e.startContainer),T4=e=>jn(e.toString().replace(/\u00A0/g," ")),zx=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,R4=(e,t)=>e.substring(t.length),P4=(e,t,n,s=!1)=>{let o;const r=n.charAt(0);for(o=t-1;o>=0;o--){const i=e.charAt(o);if(!s&&zx(i))return b.none();if(r===i&&un(e,n,o,t))break}return b.some(o)},hg=(e,t,n,s=!1)=>{if(!A4(t))return b.none();const o={text:"",offset:0},r=(a,c,f)=>(o.text=f+o.text,o.offset+=c,P4(o.text,o.offset,n,s).getOr(c)),i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return gg(e,t.startContainer,t.startOffset,r,i).bind(a=>{const c=t.cloneRange();if(c.setStart(a.container,a.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return b.none();const f=T4(c);return f.lastIndexOf(n)!==0?b.none():b.some({text:R4(f,n),range:c,trigger:n})})},D4=e=>e.nodeType===Fb,O4=e=>e.nodeType===ca,Vx=e=>{if(D4(e))return Os(e,e.data.length);{const t=e.childNodes;return t.length>0?Vx(t[t.length-1]):Os(e,t.length)}},Wx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Wx(n[t],0):n.length>0&&O4(e)&&n.length===t?Vx(n[n.length-1]):Os(e,t)},B4=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return gg(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!zx(r)}).isSome()},I4=e=>t=>{const n=Wx(t.startContainer,t.startOffset);return!B4(e,n)},L4=(e,t,n)=>En(n.triggers,s=>hg(e,t,s)),$4=(e,t)=>{const n=t(),s=e.selection.getRng();return L4(e.dom,s,n).bind(o=>jx(e,t,o))},jx=(e,t,n,s={})=>{var o;const r=t(),a=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",c=W(r.lookupByTrigger(n.trigger),m=>n.text.length>=m.minChars&&m.matches.getOrThunk(()=>I4(e.dom))(n.range,a,n.text));if(c.length===0)return b.none();const f=Promise.all(q(c,m=>m.fetch(n.text,m.maxResults,s).then(g=>({matchText:n.text,items:g,columns:m.columns,onAction:m.onAction,highlightOn:m.highlightOn}))));return b.some({lookupData:f,context:n})};var Bs;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Bs||(Bs={}));const bg=(e,t,n)=>e.stype===Bs.Error?t(e.serror):n(e.svalue),F4=e=>{const t=[],n=[];return N(e,s=>{bg(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},M4=(e,t)=>e.stype===Bs.Error?{stype:Bs.Error,serror:t(e.serror)}:e,U4=(e,t)=>e.stype===Bs.Value?{stype:Bs.Value,svalue:t(e.svalue)}:e,H4=(e,t)=>e.stype===Bs.Value?t(e.svalue):e,z4=(e,t)=>e.stype===Bs.Error?t(e.serror):e,qx=e=>({stype:Bs.Value,svalue:e}),Kx=e=>({stype:Bs.Error,serror:e}),tn={fromResult:e=>e.fold(Kx,qx),toResult:e=>bg(e,An.error,An.value),svalue:qx,partition:F4,serror:Kx,bind:H4,bindError:z4,map:U4,mapError:M4,fold:bg},Cg=e=>ke(e)&&On(e).length>100?" removed due to size":JSON.stringify(e,null,2),V4=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):e;return q(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},ku=(e,t)=>tn.serror([{path:e,getErrorInfo:t}]),W4=(e,t,n)=>ku(e,()=>'Could not find valid *required* value for "'+t+'" in '+Cg(n)),j4=(e,t)=>ku(e,()=>'Choice schema did not contain choice key: "'+t+'"'),q4=(e,t,n)=>ku(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Cg(t)),K4=(e,t)=>ku(e,G(t)),G4=(e,t,n,s)=>mt(n,s).fold(()=>q4(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),Y4=(e,t)=>({extract:(o,r)=>mt(r,e).fold(()=>j4(o,e),a=>G4(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+On(t)}),X4=(e,t)=>t,Z4=(e,t)=>Bt(e)&&Bt(t)?Nu(e,t):t,Gx=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Ne(o,r)&&(n[r]=e(n[r],o[r]))}return n},Nu=Gx(Z4),Yx=Gx(X4),Xx=()=>({tag:"required",process:{}}),Q4=e=>({tag:"defaultedThunk",process:e}),Zx=e=>Q4(G(e)),J4=()=>({tag:"option",process:{}}),e8=(e,t)=>e.length>0?tn.svalue(Nu(t,Yx.apply(void 0,e))):tn.svalue(t),Qx=e=>At(tn.serror,He)(e),t8={consolidateObj:(e,t)=>{const n=tn.partition(e);return n.errors.length>0?Qx(n.errors):e8(n.values,t)},consolidateArr:e=>{const t=tn.partition(e);return t.errors.length>0?Qx(t.errors):tn.svalue(t.values)}},n8=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),s8=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Jx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},yg=e=>{const t=(s,o)=>tn.bindError(e(o),r=>K4(s,r)),n=G("val");return{extract:t,toString:n}},o8=yg(tn.svalue),r8=(e,t,n,s)=>mt(t,n).fold(()=>W4(e,n,t),s),ek=(e,t,n,s)=>{const o=mt(e,t).getOrThunk(()=>n(e));return s(o)},i8=(e,t,n)=>n(mt(e,t)),a8=(e,t,n,s)=>{const o=mt(e,t).map(r=>r===!0?n(e):r);return s(o)},l8=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>tn.svalue(b.none()),c=>{const f=o.extract(t.concat([s]),c);return tn.map(f,b.some)});switch(e.tag){case"required":return r8(t,n,s,r);case"defaultedThunk":return ek(n,s,e.process,r);case"option":return i8(n,s,i);case"defaultedOptionThunk":return a8(n,s,e.process,i);case"mergeWithThunk":return ek(n,s,G({}),a=>{const c=Nu(e.process(n),a);return r(c)})}},c8=(e,t,n)=>{const s={},o=[];for(const r of n)Jx(r,(i,a,c,f)=>{const m=l8(c,e,t,i,f);tn.fold(m,p=>{o.push(...p)},p=>{s[a]=p})},(i,a)=>{s[i]=a(t)});return o.length>0?tn.serror(o):tn.svalue(s)},vg=e=>({extract:(s,o)=>c8(s,o,e),toString:()=>`obj{
`+q(e,o=>Jx(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")")).join(`
`)+"}"}),tk=e=>({extract:(s,o)=>{const r=q(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return t8.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),u8=e=>yg(t=>e(t).fold(tn.serror,tn.svalue)),f8=(e,t,n)=>{const s=t.extract([e],n);return tn.mapError(s,o=>({input:n,errors:o}))},d8=(e,t,n)=>tn.toResult(f8(e,t,n)),m8=e=>`Errors: 
`+V4(e.errors).join(`
`)+`

Input object: `+Cg(e.input),nk=(e,t)=>Y4(e,oa(t,vg)),p8=G(o8),Au=(e,t)=>yg(n=>{const s=typeof n;return e(n)?tn.svalue(n):tn.serror(`Expected type: ${t} but got: ${s}`)}),g8=Au(vn,"number"),Tu=Au(ae,"string"),h8=Au(ln,"boolean"),Eg=Au(Ke,"function"),bl=n8,sk=s8,b8=e=>u8(t=>R(e,t)?An.value(t):An.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),ok=(e,t)=>bl(e,e,Xx(),t),rk=e=>ok(e,Tu),ik=e=>ok(e,Eg),C8=(e,t)=>bl(e,e,Xx(),tk(t)),Sg=(e,t)=>bl(e,e,J4(),t),Ru=e=>Sg(e,Tu),y8=e=>Sg(e,Eg),v8=(e,t)=>bl(e,e,Zx(t),p8()),$i=(e,t,n)=>bl(e,e,Zx(t),n),ak=(e,t)=>$i(e,t,g8),E8=(e,t)=>$i(e,t,Tu),lk=(e,t,n)=>$i(e,t,b8(n)),_g=(e,t)=>$i(e,t,h8),wg=(e,t)=>$i(e,t,Eg),S8=(e,t,n)=>$i(e,t,tk(n)),_8=rk("type"),w8=ik("fetch"),xg=ik("onAction"),x8=wg("onSetup",()=>Te),k8=Ru("text"),N8=Ru("icon"),A8=Ru("tooltip"),T8=Ru("label"),R8=_g("active",!1),P8=_g("enabled",!0),ck=_g("primary",!1),D8=e=>v8("columns",e),Cl=e=>E8("type",e),O8=vg([_8,rk("trigger"),ak("minChars",1),D8(1),ak("maxResults",10),y8("matches"),w8,xg,S8("highlightOn",[],Tu)]),B8=e=>d8("Autocompleter",O8,e),kg=[P8,A8,N8,k8,x8],uk=[R8].concat(kg),I8=[wg("predicate",st),lk("scope","node",["node","editor"]),lk("position","selection",["node","selection","line"])],L8=kg.concat([Cl("contextformbutton"),ck,xg,sk("original",It)]),$8=uk.concat([Cl("contextformbutton"),ck,xg,sk("original",It)]),F8=kg.concat([Cl("contextformbutton")]),M8=uk.concat([Cl("contextformtogglebutton")]),U8=nk("type",{contextformbutton:L8,contextformtogglebutton:$8});vg([Cl("contextform"),wg("initValue",G("")),T8,C8("commands",U8),Sg("launch",nk("type",{contextformbutton:F8,contextformtogglebutton:M8}))].concat(I8));const H8=e=>{const t=e.ui.registry.getAll().popups,n=oa(t,i=>B8(i).fold(a=>{throw new Error(m8(a))},It)),s=rb(Kl(n,i=>i.trigger)),o=If(n);return{dataset:n,triggers:s,lookupByTrigger:i=>W(o,a=>a.trigger===i)}},z8=(e,t)=>{const n=Nd(t.load,50);e.on("input",s=>{s.inputType==="insertCompositionText"&&!e.composing||n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27?(n.cancel(),t.cancelIfNecessary()):(o===38||o===40)&&n.cancel()},!0),e.on("remove",n.cancel)},V8=e=>{const t=Co(),n=Yt(!1),s=t.isSet,o=()=>{s()&&(BL(e),n.set(!1),t.clear())},r=p=>{s()||t.set({trigger:p.trigger,matchLength:p.text.length})},i=Ms(()=>H8(e)),a=p=>t.get().map(g=>hg(e.dom,e.selection.getRng(),g.trigger,!0).bind(C=>jx(e,i,C,p))).getOrThunk(()=>$4(e,i)),c=p=>{a(p).fold(o,g=>{r(g.context),g.lookupData.then(C=>{t.get().map(S=>{const y=g.context;S.trigger===y.trigger&&(t.set({...S,matchLength:y.text.length}),n.get()?(hm(e,{range:y.range}),OL(e,{lookupData:C})):(n.set(!0),hm(e,{range:y.range}),DL(e,{lookupData:C})))})})})},f=(p,g)=>{const C=p.compareBoundaryPoints(window.Range.START_TO_START,g),S=p.compareBoundaryPoints(window.Range.END_TO_END,g);return C>=0&&S<=0},m=()=>t.get().bind(({trigger:p})=>{const g=e.selection.getRng();return hg(e.dom,g,p,n.get()).filter(({range:C})=>f(g,C)).map(({range:C})=>C)});e.addCommand("mceAutocompleterReload",(p,g)=>{const C=ke(g)?g.fetchOptions:{};c(C)}),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{m().each(p=>{hm(e,{range:p})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>m().isSome()),z8(e,{cancelIfNecessary:o,load:c})},W8=Hs().browser.isSafari(),fk=e=>$o(w.fromDom(e)),dk=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Pu=(e,t)=>b.from(e.getParent(t.container(),"details")),mk=(e,t)=>Pu(e,t).isSome(),j8=(e,t)=>{const n=b.from(e.getParent(t.startContainer,"details")),s=b.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){const o=n.bind(r=>b.from(e.select("summary",r)[0]));return b.some({startSummary:o,startDetails:n,endDetails:s})}else return b.none()},q8=(e,t)=>hn(t).exists(n=>n.isEqual(e)),K8=(e,t)=>ds(t).exists(n=>St(n.getNode())&&In(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),G8=(e,t)=>t.startSummary.exists(n=>q8(e,n)),Y8=(e,t)=>t.startSummary.exists(n=>K8(e,n)),X8=(e,t)=>t.startDetails.exists(n=>In(n,e).forall(s=>t.startSummary.exists(o=>!o.contains(e.container())&&o.contains(s.container())))),Z8=(e,t,n)=>n.startDetails.exists(s=>Tn(e,t).forall(o=>!s.contains(o.container()))),pk=(e,t)=>{const n=t.getNode();Dt(n)||e.selection.setCursorLocation(n,t.offset())},gk=(e,t,n)=>{const s=e.dom.getParent(t.container(),"details");if(s&&!s.open){const o=e.dom.select("summary",s)[0];o&&(n?hn(o):ds(o)).each(i=>pk(e,i))}else pk(e,t)},Q8=(e,t)=>{const n=c=>c.contains(e.startContainer),s=c=>c.contains(e.endContainer),o=t.startSummary.exists(n),r=t.startSummary.exists(s),i=t.startDetails.forall(c=>t.endDetails.forall(f=>c!==f));return(o||r)&&!(o&&r)||i},hk=(e,t,n)=>{const{dom:s,selection:o}=e,r=e.getBody();if(n==="character"){const i=F.fromRangeStart(o.getRng()),a=s.getParent(i.container(),s.isBlock),c=Pu(s,i),f=a&&s.isEmpty(a),m=vt(a==null?void 0:a.previousSibling),p=vt(a==null?void 0:a.nextSibling);return f&&(t?p:m)&&Si(!t,r,i).exists(S=>mk(s,S)&&!Bb(c,Pu(s,S)))?!0:Si(t,r,i).fold(st,g=>{const C=Pu(s,g);if(mk(s,g)&&!Bb(c,C)){if(t||gk(e,g,!1),a&&f){if(t&&m)return!0;if(!t&&p)return!0;gk(e,g,t),e.dom.remove(a)}return!0}else return!1})}else return!1},J8=(e,t,n,s)=>{const r=e.selection.getRng(),i=F.fromRangeStart(r),a=e.getBody();return s==="selection"?Q8(r,t):n?Y8(i,t)||Z8(a,i,t):G8(i,t)||X8(i,t)},eq=(e,t,n)=>j8(e.dom,e.selection.getRng()).fold(()=>hk(e,t,n),s=>J8(e,s,t,n)||hk(e,t,n)),tq=(e,t,n)=>{const s=e.selection,o=s.getNode(),r=s.getRng(),i=F.fromRangeStart(r);return t1(o)?(n==="selection"&&dk(r,o)||P0(t,i,o)?fk(o):e.undoManager.transact(()=>{const a=s.getSel();let{anchorNode:c,anchorOffset:f,focusNode:m,focusOffset:p}=a??{};const g=()=>{ee(c)&&ee(f)&&ee(m)&&ee(p)&&(a==null||a.setBaseAndExtent(c,f,m,p))},C=()=>{c=a==null?void 0:a.anchorNode,f=a==null?void 0:a.anchorOffset,m=a==null?void 0:a.focusNode,p=a==null?void 0:a.focusOffset},S=(_,k)=>{N(_.childNodes,T=>{qa(T)&&k.appendChild(T)})},y=e.dom.create("span",{"data-mce-bogus":"1"});S(o,y),o.appendChild(y),g(),(n==="word"||n==="line")&&(a==null||a.modify("extend",t?"right":"left",n)),!s.isCollapsed()&&dk(s.getRng(),y)?fk(o):(e.execCommand(t?"ForwardDelete":"Delete"),C(),S(y,o),g()),e.dom.remove(y)}),!0):!1},Fr=(e,t,n)=>eq(e,t,n)||W8&&tq(e,t,n)?b.some(Te):b.none(),bk=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Te,inputType:n},i=qC(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},yl=bk("input"),Du=bk("beforeinput"),Ck=Hs(),yk=Ck.os,vk=yk.isMacOS()||yk.isiOS(),nq=Ck.browser.isFirefox(),sq=(e,t,n)=>{const s=n.keyCode===le.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),r=o?"character":"selection",i=a=>o?a?"word":"line":"selection";wx([{keyCode:le.BACKSPACE,action:xe(lx,e)},{keyCode:le.BACKSPACE,action:xe(Gp,e,!1)},{keyCode:le.DELETE,action:xe(Gp,e,!0)},{keyCode:le.BACKSPACE,action:xe(jp,e,!1)},{keyCode:le.DELETE,action:xe(jp,e,!0)},{keyCode:le.BACKSPACE,action:xe(og,e,t,!1)},{keyCode:le.DELETE,action:xe(og,e,t,!0)},{keyCode:le.BACKSPACE,action:xe(Xm,e,!1)},{keyCode:le.DELETE,action:xe(Xm,e,!0)},{keyCode:le.BACKSPACE,action:xe(Fr,e,!1,r)},{keyCode:le.DELETE,action:xe(Fr,e,!0,r)},...vk?[{keyCode:le.BACKSPACE,altKey:!0,action:xe(Fr,e,!1,i(!0))},{keyCode:le.DELETE,altKey:!0,action:xe(Fr,e,!0,i(!0))},{keyCode:le.BACKSPACE,metaKey:!0,action:xe(Fr,e,!1,i(!1))}]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:xe(Fr,e,!1,i(!0))},{keyCode:le.DELETE,ctrlKey:!0,action:xe(Fr,e,!0,i(!0))}],{keyCode:le.BACKSPACE,action:xe(Xp,e,!1)},{keyCode:le.DELETE,action:xe(Xp,e,!0)},{keyCode:le.BACKSPACE,action:xe(ag,e,!1)},{keyCode:le.DELETE,action:xe(ag,e,!0)},{keyCode:le.BACKSPACE,action:xe(Vp,e,!1)},{keyCode:le.DELETE,action:xe(Vp,e,!0)},{keyCode:le.BACKSPACE,action:xe(zp,e,!1)},{keyCode:le.DELETE,action:xe(zp,e,!0)},{keyCode:le.BACKSPACE,action:xe(rg,e,!1)},{keyCode:le.DELETE,action:xe(rg,e,!0)},{keyCode:le.BACKSPACE,action:xe(Yp,e,!1)},{keyCode:le.DELETE,action:xe(Yp,e,!0)}],n).filter(a=>e.selection.isEditable()).each(a=>{n.preventDefault(),Du(e,s).isDefaultPrevented()||(a(),yl(e,s))})},oq=(e,t,n)=>gl([{keyCode:le.BACKSPACE,action:xe(mw,e)},{keyCode:le.DELETE,action:xe(mw,e)},...vk?[{keyCode:le.BACKSPACE,altKey:!0,action:xe(pl,e)},{keyCode:le.DELETE,altKey:!0,action:xe(pl,e)},...n?[{keyCode:nq?224:91,action:xe(pl,e)}]:[]]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:xe(pl,e)},{keyCode:le.DELETE,ctrlKey:!0,action:xe(pl,e)}]],t),rq=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===le.BACKSPACE,s.isDefaultPrevented()||sq(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||oq(e,s,n),n=!1})},iq=e=>{for(;e;){if(he(e)||Y(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Fi=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=iq(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Vt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new Gt(t,t);let i=t,a;for(;a=r.current();){if(Y(a)){o.setStart(a,0),o.setEnd(a,0);break}if(s[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=r.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else St(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Xa(e,o)},vl=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";){if(e.getContentEditable(o)==="true"){s=o;break}o=o.parentNode}return o!==n?s:n},Ng=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),aq=e=>Ng(e).fold(G(""),t=>t.nodeName.toUpperCase()),lq=e=>Ng(e).filter(t=>pi(w.fromDom(t))).isSome(),Ag=e=>{e.innerHTML='<br data-mce-bogus="1">'},cq=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(c=>{const m={...Zf(w.fromDom(t)),...c};s.setStyles(t,m)});const o=b.from(n.class).map(c=>c.split(/\s+/)),r=b.from(t.className).map(c=>W(c.split(/\s+/),f=>f!==""));fn(o,r,(c,f)=>{const m=W(f,g=>!R(c,g)),p=[...c,...m];s.setAttrib(t,"class",p.join(" "))});const i=["style","class"],a=ra(n,(c,f)=>!R(i,f));s.setAttribs(t,a)},El=(e,t)=>{if(gn(e).toLowerCase()===t.tagName.toLowerCase()){const s=$a(e);cq(e,t,s)}},Ek=(e,t,n,s,o=!0,r,i)=>{const a=e.dom,c=e.schema,f=gn(e),m=n?n.nodeName.toUpperCase():"";let p=t;const g=c.getTextInlineElements();let C;r||m==="TABLE"||m==="HR"?C=a.create(r||f,i||{}):C=n.cloneNode(!1);let S=C;if(!o)a.setAttrib(C,"style",null),a.setAttrib(C,"class",null);else do if(g[p.nodeName]){if(Xn(p)||Zn(p))continue;const y=p.cloneNode(!1);a.setAttrib(y,"id",""),C.hasChildNodes()?(y.appendChild(C.firstChild),C.appendChild(y)):(S=y,C.appendChild(y))}while((p=p.parentNode)&&p!==s);return El(e,C),Ag(S),C},uq=(e,t)=>e.dom.getParent(t,rd),fq=(e,t,n)=>{let s=t;for(;s&&s!==e&&vt(s.nextSibling);){const o=s.parentElement;if(!o||!n(o))return rd(o);s=o}return!1},dq=(e,t,n)=>!t&&n.nodeName.toLowerCase()===gn(e)&&e.dom.isEmpty(n)&&fq(e.getBody(),n,s=>Ne(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),mq=(e,t,n)=>{var s,o,r;const i=t(gn(e)),a=uq(e,n);a&&(e.dom.insertAfter(i,a),Fi(e,i),((r=(o=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0)>1&&e.dom.remove(n))},pq=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,gq=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Sk=(e,t)=>{const n=e==null?void 0:e.parentNode;return ee(n)&&n.nodeName===t},_k=e=>ee(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Tg=e=>ee(e)&&/^(LI|DT|DD)$/.test(e.nodeName),hq=e=>_k(e)&&_k(e.parentNode),Ou=e=>{const t=e.parentNode;return Tg(t)?t:e},Bu=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!he(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},wk=e=>re(Kl(Zf(w.fromDom(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),bq=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng(),a=n.parentNode;if(n===e.getBody()||!a)return;hq(n)&&(o="LI");const c=Tg(s)?wk(s):void 0;let f=Tg(s)&&c?t(o,{style:wk(s)}):t(o);if(Bu(n,s,!0)&&Bu(n,s,!1))if(Sk(n,"LI")){const m=Ou(n);r.insertAfter(f,m),gq(n)?r.remove(m):r.remove(n)}else r.replace(f,n);else if(Bu(n,s,!0))Sk(n,"LI")?(r.insertAfter(f,Ou(n)),f.appendChild(r.doc.createTextNode(" ")),f.appendChild(n)):a.insertBefore(f,n),r.remove(s);else if(Bu(n,s,!1))r.insertAfter(f,Ou(n)),r.remove(s);else{n=Ou(n);const m=i.cloneRange();m.setStartAfter(s),m.setEndAfter(n);const p=m.extractContents();if(o==="LI"&&pq(p,"LI")){const g=W(q(f.children,w.fromDom),kn(ec("br")));f=p.firstChild,r.insertAfter(p,n),N(g,C=>Qf(w.fromDom(f),C)),c&&f.setAttribute("style",c)}else r.insertAfter(p,n),r.insertAfter(f,n);r.remove(s)}Fi(e,f)},Cq=e=>{N(fC(w.fromDom(e),Nn),t=>{const n=t.dom;n.nodeValue=jn(n.data)})},yq=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},vq=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),Rg=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Pg=(e,t)=>ee(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",Eq=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;he(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let i=o.length;for(;i--;)r=o[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||vq(e,r))&&e.remove(r)},Dg=(e,t,n)=>Y(t)?e?n===1&&t.data.charAt(n-1)===Wt?0:n:n===t.data.length-1&&t.data.charAt(n)===Wt?t.data.length:n:n,Sq=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Dg(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Dg(!1,e.endContainer,e.endOffset)),t},_q=e=>{let t=e;do Y(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},wq=(e,t,n,s,o)=>{var r,i;const a=e.dom,c=(r=vl(a,s))!==null&&r!==void 0?r:a.getRoot();let f=a.getParent(s,a.isBlock);if(!f||!Pg(a,f)){if(f=f||c,!f.hasChildNodes()){const C=a.create(t);return El(e,C),f.appendChild(C),n.setStart(C,0),n.setEnd(C,0),C}let m=s;for(;m&&m.parentNode!==f;)m=m.parentNode;let p;for(;m&&!a.isBlock(m);)p=m,m=m.previousSibling;const g=(i=p==null?void 0:p.parentElement)===null||i===void 0?void 0:i.nodeName;if(p&&g&&e.schema.isValidChild(g,t.toLowerCase())){const C=p.parentNode,S=a.create(t);for(El(e,S),C.insertBefore(S,p),m=p;m&&!a.isBlock(m);){const y=m.nextSibling;S.appendChild(m),m=y}n.setStart(s,o),n.setEnd(s,o)}}return s},xq=(e,t)=>{t.normalize();const n=t.lastChild;(!n||he(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},kq=(e,t)=>{const n=jO(e);return dt(t)?!1:ae(n)?R(Q.explode(n),t.nodeName.toLowerCase()):n},xk={insert:(e,t)=>{let n,s,o,r,i=!1;const a=e.dom,c=e.schema,f=c.getNonEmptyElements(),m=e.selection.getRng(),p=gn(e),g=w.fromDom(m.startContainer),C=ri(g,m.startOffset),S=C.exists(H=>Jl(H)&&!fr(H)),y=m.collapsed&&S,_=(H,ue)=>Ek(e,n,X,V,WO(e),H,ue),k=H=>{const ue=Dg(H,n,s);if(Y(n)&&(H?ue>0:ue<n.data.length))return!1;if((n.parentNode===X||n===X)&&i&&!H||H&&he(n)&&n===X.firstChild)return!0;if(Rg(n,"TABLE")||Rg(n,"HR"))return i&&!H||!i&&H;const be=new Gt(n,X);Y(n)&&(H&&ue===0?be.prev():!H&&ue===n.data.length&&be.next());let Re;for(;Re=be.current();){if(he(Re)){if(!Re.getAttribute("data-mce-bogus")){const Oe=Re.nodeName.toLowerCase();if(f[Oe]&&Oe!=="br")return!1}}else if(Y(Re)&&!ui(Re.data))return!1;H?be.prev():be.next()}return!0},T=()=>{let H;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&se!=="HGROUP"?H=_(p):H=_(),kq(e,r)&&Pg(a,r)&&a.isEmpty(X,void 0,{includeZwsp:!0})?H=a.split(r,X):a.insertAfter(H,X),Fi(e,H),H};Hc(a,m).each(H=>{m.setStart(H.startContainer,H.startOffset),m.setEnd(H.endContainer,H.endOffset)}),n=m.startContainer,s=m.startOffset;const A=!!(t&&t.shiftKey),D=!!(t&&t.ctrlKey);he(n)&&n.hasChildNodes()&&!y&&(i=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,i&&Y(n)?s=n.data.length:s=0);const V=vl(a,n);if(!V||yq(e,n))return;A||(n=wq(e,p,m,n,s));let X=a.getParent(n,a.isBlock)||a.getRoot();r=ee(X==null?void 0:X.parentNode)?a.getParent(X.parentNode,a.isBlock):null,o=X?X.nodeName.toUpperCase():"";const se=r?r.nodeName.toUpperCase():"";if(se==="LI"&&!D){const H=r;X=H,r=H.parentNode,o=se}if(he(r)&&dq(e,A,X))return mq(e,_,X);if(/^(LI|DT|DD)$/.test(o)&&he(r)&&a.isEmpty(X)){bq(e,_,r,X,p);return}if(!y&&(X===e.getBody()||!Pg(a,X)))return;const M=X.parentNode;let I;if(y)I=_(p),C.fold(()=>{Ft(g,w.fromDom(I))},H=>{Bn(H,w.fromDom(I))}),e.selection.setCursorLocation(I,0);else if(bi(X))I=Dd(X),a.isEmpty(X)&&Ag(X),El(e,I),Fi(e,I);else if(k(!1))I=T();else if(k(!0)&&M){const H=F.fromRangeStart(m),ue=Bm(H),be=w.fromDom(X),Oe=Yc(be,H,e.schema)?f0(be,H,e.schema).bind(Ge=>b.from(Ge.getNode())):b.none();I=M.insertBefore(_(),X);const We=Rg(X,"HR")||ue?I:Oe.getOr(X);Fi(e,We)}else{const H=Sq(m).cloneRange();H.setEndAfter(X);const ue=H.extractContents();Cq(ue),_q(ue),I=ue.firstChild,a.insertAfter(ue,X),Eq(a,f,I),xq(a,X),a.isEmpty(X)&&Ag(X),I.normalize(),a.isEmpty(I)?(a.remove(I),T()):(El(e,I),Fi(e,I))}a.setAttrib(I,"id",""),e.dispatch("NewBlock",{newBlock:I})},fakeEventName:"insertParagraph"},Nq=(e,t,n)=>{const s=new Gt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||Y(o)&&o.length>0)return!0;return!1},kk=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Xa(e,s)},Aq=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i=!1;Hc(s,o).each(C=>{o.setStart(C.startContainer,C.startOffset),o.setEnd(C.endContainer,C.endOffset)});let a=o.startOffset,c=o.startContainer;if(he(c)&&c.hasChildNodes()){const C=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,C&&Y(c)?a=c.data.length:a=0}let f=s.getParent(c,s.isBlock);const m=f&&f.parentNode?s.getParent(f.parentNode,s.isBlock):null,p=m?m.nodeName.toUpperCase():"",g=!!(t&&t.ctrlKey);p==="LI"&&!g&&(f=m),Y(c)&&a>=c.data.length&&(Nq(e.schema,c,f||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Fd(s,o,r),kk(e,r,i),e.undoManager.add()},Tq=(e,t)=>{const n=w.fromTag("br");Bn(w.fromDom(t),n),e.undoManager.add()},Rq=(e,t)=>{Dq(e.getBody(),t)||go(w.fromDom(t),w.fromTag("br"));const n=w.fromTag("br");go(w.fromDom(t),n),kk(e,n.dom,!1),e.undoManager.add()},Pq=e=>St(e.getNode()),Dq=(e,t)=>Pq(F.after(t))?!0:Tn(e,F.after(t)).map(n=>St(n.getNode())).getOr(!1),Nk=e=>e&&e.nodeName==="A"&&"href"in e,Oq=e=>e.fold(st,Nk,Nk,st),Bq=e=>{const t=fe(Br,e),n=F.fromRangeStart(e.selection.getRng());return eo(t,e.getBody(),n).filter(Oq)},Iq=(e,t)=>{t.fold(Te,fe(Tq,e),fe(Rq,e),Te)},Ak={insert:(e,t)=>{const n=Bq(e);n.isSome()?n.each(fe(Iq,e)):Aq(e,t)},fakeEventName:"insertLineBreak"},Tk=(e,t)=>Ng(e).filter(n=>t.length>0&&_s(w.fromDom(n),t)).isSome(),Lq=e=>Tk(e,zO(e)),$q=e=>Tk(e,VO(e)),Kn=Ks.generate([{br:[]},{block:[]},{none:[]}]),Fq=(e,t)=>$q(e),Rk=e=>(t,n)=>lq(t)===e,Pk=(e,t)=>(n,s)=>aq(n)===e.toUpperCase()===t,Mq=e=>{const t=vl(e.dom,e.selection.getStart());return dt(t)},Sl=e=>Pk("pre",e),Uq=()=>Pk("summary",!0),Iu=e=>(t,n)=>UO(t)===e,Hq=(e,t)=>Lq(e),Lu=(e,t)=>t,zq=e=>{const t=gn(e),n=vl(e.dom,e.selection.getStart());return ee(n)&&e.schema.isValidChild(n.nodeName,t)},Vq=e=>{const t=e.selection.getRng(),n=w.fromDom(t.startContainer),o=ri(n,t.startOffset).map(r=>Jl(r)&&!fr(r));return t.collapsed&&o.getOr(!0)},ss=(e,t)=>(n,s)=>re(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),Wq=(e,t)=>_w([ss([Fq],Kn.none()),ss([Sl(!0),Mq],Kn.none()),ss([Uq()],Kn.br()),ss([Sl(!0),Iu(!1),Lu],Kn.br()),ss([Sl(!0),Iu(!1)],Kn.block()),ss([Sl(!0),Iu(!0),Lu],Kn.block()),ss([Sl(!0),Iu(!0)],Kn.br()),ss([Rk(!0),Lu],Kn.br()),ss([Rk(!0)],Kn.block()),ss([Hq],Kn.br()),ss([Lu],Kn.br()),ss([zq],Kn.block()),ss([Vq],Kn.block())],[e,!!(t&&t.shiftKey)]).getOr(Kn.none()),$u=(e,t,n)=>{t.selection.isCollapsed()||EM(t),!(ee(n)&&Du(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),ee(n)&&yl(t,e.fakeEventName))},Dk=(e,t)=>{const n=()=>$u(Ak,e,t),s=()=>$u(xk,e,t),o=Wq(e,t);switch(HO(e)){case"linebreak":o.fold(n,n,Te);break;case"block":o.fold(s,s,Te);break;case"invert":o.fold(s,n,Te);break;default:o.fold(n,s,Te);break}},Ok=Hs(),jq=Ok.os.isiOS()&&Ok.browser.isSafari(),Bk=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),AV(e.undoManager),e.undoManager.transact(()=>{Dk(e,t)}))},qq=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(Y(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},Kq=e=>{let t=b.none();const n=o=>{t=b.some(o.selection.getBookmark()),o.undoManager.add()},s=(o,r)=>{o.undoManager.undo(),t.fold(Te,i=>o.selection.moveToBookmark(i)),Bk(o,r),t=b.none()};e.on("keydown",o=>{o.keyCode===le.ENTER&&(jq&&qq(e.selection.getRng())?n(e):Bk(e,o))}),e.on("keyup",o=>{o.keyCode===le.ENTER&&t.each(()=>s(e,o))})},Gq=(e,t,n)=>{const s=je.os.isMacOS()||je.os.isiOS();gl([{keyCode:le.END,action:xe(yx,e,!0)},{keyCode:le.HOME,action:xe(yx,e,!1)},...s?[]:[{keyCode:le.HOME,action:xe(_u,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:le.END,action:xe(_u,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:le.END,action:xe(Nx,e,!0)},{keyCode:le.HOME,action:xe(Nx,e,!1)},{keyCode:le.END,action:xe(Su,e,!0,t)},{keyCode:le.HOME,action:xe(Su,e,!1,t)}],n).each(o=>{n.preventDefault()})},Yq=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||Gq(e,t,n)})},Xq=e=>{e.on("input",t=>{t.isComposing||eM(e)})},Zq=Hs(),Qq=(e,t,n)=>{gl([{keyCode:le.PAGE_UP,action:xe(Su,e,!1,t)},{keyCode:le.PAGE_DOWN,action:xe(Su,e,!0,t)}],n)},Ik=e=>e.stopImmediatePropagation(),Lk=e=>e.keyCode===le.PAGE_UP||e.keyCode===le.PAGE_DOWN,$k=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",Ik,!0):!n&&e.get()&&t.off("NodeChange",Ik),e.set(n)},Jq=(e,t)=>{if(Zq.os.isMacOS())return;const n=Yt(!1);e.on("keydown",s=>{Lk(s)&&$k(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||Qq(e,t,s),Lk(s)&&n.get()&&($k(n,e,!1),e.nodeChanged())})},e5=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||z(t.getTargetRanges(),n=>!LE(e.dom,n)))&&t.preventDefault()})},Fk=(e,t)=>{const n=t.container(),s=t.offset();return Y(n)?(n.insertData(s,e),b.some(F(n,s+e.length))):Tc(t).map(o=>{const r=w.fromText(e);return t.isAtEnd()?go(o,r):Bn(o,r),F(r.dom,e.length)})},Mk=fe(Fk,Vt),Uk=fe(Fk," "),t5=(e,t,n)=>b0(e,t,n)?Mk(t):Uk(t),n5=e=>t=>t.fold(n=>In(e.dom,F.before(n)),n=>hn(n),n=>ds(n),n=>Tn(e.dom,F.after(n))),s5=(e,t,n)=>s=>b0(e,s,n)?Mk(t):Uk(t),Hk=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},o5=(e,t)=>e.isEditable(e.getParent(t,"summary")),r5=e=>{const t=F.fromRangeStart(e.selection.getRng()),n=w.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=fe(Br,e),o=F.fromRangeStart(e.selection.getRng());return eo(s,e.getBody(),o).bind(n5(n)).map(r=>()=>s5(n,t,e.schema)(r).each(Hk(e)))}else return b.none()},i5=e=>{const t=()=>{const n=w.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=F.fromRangeStart(e.selection.getRng());t5(n,s,e.schema).each(Hk(e))};return si(je.browser.isFirefox()&&e.selection.isEditable()&&o5(e.dom,e.selection.getRng().startContainer),t)},a5=(e,t)=>{wx([{keyCode:le.SPACEBAR,action:xe(r5,e)},{keyCode:le.SPACEBAR,action:xe(i5,e)}],t).each(n=>{t.preventDefault(),Du(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),yl(e,"insertText",{data:" "}))})},l5=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||a5(e,t)})},c5=e=>eI(e)?[{keyCode:le.TAB,action:xe(Ux,e,!0)},{keyCode:le.TAB,shiftKey:!0,action:xe(Ux,e,!1)}]:[],u5=(e,t)=>{gl([...c5(e)],t).each(n=>{t.preventDefault()})},f5=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||u5(e,t)})},d5=e=>{if(e.addShortcut("Meta+P","","mcePrint"),V8(e),Js(e))return Yt(null);{const t=Nj(e);return e5(e),x6(e),x4(e,t),rq(e,t),Kq(e),l5(e),Xq(e),f5(e),Yq(e,t),Jq(e,t),t}};class m5{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!Em(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{Wc(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Bc(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Bc(t)&&(t.selection.getNode().nodeName==="IMG"?Jn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!vB(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,i=>i===o?!0:(r.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=it(s.dom.getParents(t,Ct,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const zk=Ra("image"),p5=e=>{const t=e;return b.from(t[zk])},g5=(e,t)=>{const n=e;n[zk]=t},Og=Ra("event"),h5=e=>{const t=e;return b.from(t[Og])},Fu=e=>t=>{const n=t;n[Og]=e},b5=(e,t)=>Fu(t)(e),Vk=Fu(0),C5=Fu(2),y5=Fu(1),v5=(e=>t=>{const n=t;return b.from(n[Og]).exists(s=>s===e)})(0),E5=()=>Object.freeze({length:0,item:e=>null}),Bg=Ra("mode"),S5=e=>{const t=e;return b.from(t[Bg])},Mu=e=>t=>{const n=t;n[Bg]=e},Wk=(e,t)=>Mu(t)(e),jk=Mu(0),Ig=Mu(2),_5=Mu(1),qk=e=>t=>{const n=t;return b.from(n[Bg]).exists(s=>s===e)},Mi=qk(0),Kk=qk(1),w5=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(Mi(e))if(ae(n)){if(!Dt(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{Mi(e)&&t.remove(n)},clear:()=>{Mi(e)&&t.clear()}}),x5=["none","copy","link","move"],k5=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Lg=()=>{const e=new window.DataTransfer;let t="move",n="all";const s={get dropEffect(){return t},set dropEffect(o){R(x5,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){v5(s)&&R(k5,o)&&(n=o)},get items(){return w5(s,e.items)},get files(){return Kk(s)?E5():e.files},get types(){return e.types},setDragImage:(o,r,i)=>{Mi(s)&&(g5(s,{image:o,x:r,y:i}),e.setDragImage(o,r,i))},getData:o=>Kk(s)?"":e.getData(o),setData:(o,r)=>{Mi(s)&&e.setData(o,r)},clearData:o=>{Mi(s)&&e.clearData(o)}};return jk(s),s},N5=e=>{const t=Lg(),n=S5(e);return Ig(e),Vk(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,p5(e).each(s=>t.setDragImage(s.image,s.x,s.y)),N(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),N(e.files,s=>t.items.add(s)),h5(e).each(s=>{b5(t,s)}),n.each(s=>{Wk(e,s),Wk(t,s)}),t},A5=e=>{const t=e.getData("text/html");return t===""?b.none():b.some(t)},Gk=(e,t)=>e.setData("text/html",t),Yk="x-tinymce/html",Uu=G(Yk),$g="<!-- "+Yk+" -->",T5=e=>$g+e,R5=e=>e.replace($g,""),Xk=e=>e.indexOf($g)!==-1,P5=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),D5=(e,t)=>{let n="<"+e;const s=Kl(t,(o,r)=>r+'="'+Cr.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},O5=(e,t,n)=>{const s=e.split(/\n\n/),o=D5(t,n),r="</"+t+">",i=q(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:q(i,a).join("")},Zk="%MCEPASTEBIN%",B5=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Zk);je.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},I5=(e,t)=>{const n=e.dom;if(Fg(e)){let s;const o=t.get();for(;s=Fg(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Fg=e=>e.dom.get("mcepastebin"),L5=e=>ee(e)&&e.id==="mcepastebin",$5=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=W(e.getBody().childNodes,L5);N(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},Qk=e=>e===Zk,F5=e=>{const t=Yt(null);return{create:()=>B5(e,t),remove:()=>I5(e,t),getEl:()=>Fg(e),getHtml:()=>$5(e),getLastRng:t.get}},Jk=(e,t)=>(Q.each(t,n=>{wt(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),M5=e=>{const t=Lo(),n=Di({},t);let s="";const o=t.getVoidElements(),r=Q.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const f=c.name,m=c;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())){let p=c.firstChild;if(p)do a(p);while(p=p.next)}i[f]&&m.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=Jk(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},eN=e=>(e=Jk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Vt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),U5=e=>{let t=0;return()=>e+t++},H5=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(n,t)?"image/"+n[t]:"image/"+t},z5=(e,t)=>{const n=Di({sanitize:iv(e),sandbox_iframes:lv(e),sandbox_iframes_exclusions:Kd(e),convert_unsafe_embeds:sI(e)},e.schema);n.addNodeFilter("meta",o=>{Q.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Vo({validate:!0},e.schema).serialize(s)},tN=(e,t)=>({content:e,cancelled:t}),V5=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=LL(e,s,n);return tN(o.node.innerHTML,o.isDefaultPrevented())},W5=(e,t,n)=>{const s=IL(e,t,n),o=z5(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?V5(e,o,n):tN(o,s.isDefaultPrevented())},j5=(e,t,n)=>W5(e,t,n),Mg=(e,t)=>(e.insertContent(t,{merge:FB(e),paste:!0}),!0),Ug=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),q5=(e,t)=>Ug(t)&&z(av(e),n=>Mf(t.toLowerCase(),`.${n.toLowerCase()}`)),K5=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),G5=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),Y5=(e,t,n)=>!e.selection.isCollapsed()&&Ug(t)?G5(e,t,n):!1,X5=(e,t,n)=>q5(e,t)?K5(e,t,n):!1,Z5=(e,t)=>{Q.each([Y5,X5,Mg],n=>!n(e,t,Mg))},Q5=(e,t,n)=>{n||!MB(e)?Mg(e,t):Z5(e,t)},J5=U5("mceclip"),eK=e=>{const t=Lg();return Gk(t,e),Ig(t),t},nN=(e,t,n,s,o)=>{const r=j5(e,t,n);if(!r.cancelled){const i=r.content,a=()=>Q5(e,i,s);o?Du(e,"insertFromPaste",{dataTransfer:eK(i)}).isDefaultPrevented()||(a(),yl(e,"insertFromPaste")):a()}},Hu=(e,t,n,s)=>{const o=n||Xk(t);nN(e,R5(t),o,!1,s)},Hg=(e,t,n)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),o=gC(s,HB(e)),r=O5(o,gn(e),$a(e));nN(e,r,!1,!0,n)},sN=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Go=(e,t)=>t in e&&e[t].length>0,oN=e=>Go(e,"text/html")||Go(e,"text/plain"),tK=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ee(n)?e.dom.encode(n[1]):void 0},nK=(e,t,n,s)=>{const o=J5(),r=Gy(e)&&ee(n.name),i=r?tK(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},sK=(e,t)=>{Cp(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),f=c??nK(e,a,i,r);Hu(e,`<img src="${f.blobUri()}">`,!1,!0)})},oK=e=>e.type==="paste",rK=e=>Promise.all(q(e,t=>HS(t).then(n=>({file:t,uri:n})))),iK=e=>{const t=av(e);return n=>zt(n.type,"image/")&&z(t,s=>H5(s)===n.type)},aK=(e,t)=>{const n=t.items?ze(Et(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?Et(t.files):[];return W(n.length>0?n:s,iK(e))},rN=(e,t,n)=>{const s=oK(t)?t.clipboardData:t.dataTransfer;if(Nc(e)&&s){const o=aK(e,s);if(o.length>0)return t.preventDefault(),rK(o).then(r=>{n&&e.selection.setRng(n),N(r,i=>{sK(e,i)})}),!0}return!1},lK=e=>{var t,n;return je.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},cK=e=>le.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,zg=(e,t,n,s,o)=>{let r=eN(n);const i=Go(t,Uu())||Xk(n),a=!i&&P5(r),c=Ug(r);(Qk(r)||!r.length||a&&!c)&&(s=!0),(s||c)&&(Go(t,"text/plain")&&a?r=t["text/plain"]:r=M5(r)),!Qk(r)&&(s?Hg(e,r,o):Hu(e,r,i,o))},uK=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{cK(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||lK(r))return;const i=n.get()==="text"||s;s=!1;const a=sN(r.clipboardData);!oN(a)&&rN(e,r,o())||(Go(a,"text/html")?(r.preventDefault(),zg(e,a,a["text/html"],i,!0)):Go(a,"text/plain")&&Go(a,"text/uri-list")?(r.preventDefault(),zg(e,a,a["text/plain"],i,!0)):(t.create(),Jn.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),zg(e,a,c,i,!1)},0)))})},fK=e=>{const t=o=>zt(o,"webkit-fake-url"),n=o=>zt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Nc(e)&&s(i))for(const a of o){const c=a.attr("src");ae(c)&&!a.attr("data-mce-object")&&c!==je.transparentSrc&&(t(c)||!zB(e)&&n(c))&&a.remove()}})},dK=(e,t,n)=>{uK(e,t,n),fK(e)},mK=(e,t)=>{t.get()==="text"?(t.set("html"),lE(e,!1)):(t.set("text"),lE(e,!0)),e.focus()},pK=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{mK(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&Hu(e,s.html,s.internal,!1),s.text&&Hg(e,s.text,!1)})},gK=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Uu(),t),!0}catch{return!1}else return!1},iN=(e,t,n,s)=>{gK(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},aN=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Jn.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},lN=e=>({html:T5(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),hK=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),cN=e=>!e.selection.isCollapsed()||hK(e),bK=e=>t=>{!t.isDefaultPrevented()&&cN(e)&&e.selection.isEditable()&&iN(t,lN(e),aN(e),()=>{if(je.browser.isChromium()||je.browser.isFirefox()){const n=e.selection.getRng();Jn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},CK=e=>t=>{!t.isDefaultPrevented()&&cN(e)&&iN(t,lN(e),aN(e),Te)},yK=e=>{e.on("cut",bK(e)),e.on("copy",CK(e))},uN=(e,t)=>{var n,s;return Dr.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},vK=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},fN=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},EK=e=>z(e.files,t=>/^image\//.test(t.type)),SK=(e,t,n,s)=>{const o=e.getParent(n,i=>hr(t,i));if(!vt(e.getParent(n,"summary")))return!0;if(o&&Ne(s,"text/html")){const i=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!vt(i.querySelector(o.nodeName.toLowerCase()))}else return!1},_K=e=>{e.on("input",t=>{const n=s=>vt(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){const s=W(e.dom.select("details"),n);N(s,o=>{St(o.firstChild)&&o.firstChild.remove();const r=e.dom.create("summary");r.appendChild(gi().dom),o.prepend(r)})}})},wK=(e,t)=>{DB(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Nc(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&EK(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=uN(e,n);if(dt(s))return;const o=sN(n.dataTransfer),r=Go(o,Uu());if((!oN(o)||vK(o))&&rN(e,n,s))return;const i=o[Uu()],a=i||o["text/html"]||o["text/plain"],c=SK(e.dom,e.schema,s.startContainer,o),f=t.get();f&&!c||a&&(n.preventDefault(),Jn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(i||f&&c)&&e.execCommand("Delete"),fN(e,s);const m=eN(a);o["text/html"]?Hu(e,m,r,!0):Hg(e,m,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Nc(e)&&!t.get()&&(n.preventDefault(),fN(e,uN(e,n))),n.type==="dragend"&&t.set(!1)}),_K(e)},xK=e=>{const t=o=>r=>{o(e,r)},n=OB(e);Ke(n)&&e.on("PastePreProcess",t(n));const s=BB(e);Ke(s)&&e.on("PastePostProcess",t(s))},kK=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},NK=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,dN=e=>Q.trim(e).replace(NK,Sa).toLowerCase(),AK=(e,t,n)=>{const s=LB(e);if(n||s==="all"||!$B(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,f,m)=>{const p=r.parseStyle(r.decode(f)),g={};for(let S=0;S<o.length;S++){const y=p[o[S]];let _=y,k=r.getStyle(i,o[S],!0);/color/.test(o[S])&&(_=dN(_),k=dN(k)),k!==_&&(g[o[S]]=y)}const C=r.serializeStyle(g,"span");return C?c+' style="'+C+'"'+m:c+m})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},TK=e=>{(je.browser.isChromium()||je.browser.isSafari())&&kK(e,AK)},RK=e=>{const t=Yt(!1),n=Yt(UB(e)?"text":"html"),s=F5(e);TK(e),pK(e,n),xK(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{yK(e),wK(e,t),dK(e,s,n)})},PK=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},DK=e=>{e.parser.addNodeFilter("details",t=>{const n=tI(e);N(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=nI(e);N(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},OK=e=>{PK(e),DK(e)},BK=St,mN=Y,IK=e=>ct(e.dom),LK=e=>fs(e.dom),pN=e=>t=>Qe(w.fromDom(e),t),$K=(e,t,n)=>ur(w.fromDom(e),s=>LK(s)||n.isBlock(Ve(s)),pN(t)).getOr(w.fromDom(t)).dom,gN=(e,t)=>ur(w.fromDom(e),IK,pN(t)),hN=(e,t,n)=>{const s=new Gt(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!BK(i);i=o())Ts(i)&&(r=i);return r},FK=(e,t,n)=>{const o=F.fromRangeStart(e).getNode(),r=$K(o,t,n),i=hN(o,r,!1),a=hN(o,r,!0),c=document.createRange();return gN(i,r).fold(()=>{mN(i)?c.setStart(i,0):c.setStartBefore(i)},f=>c.setStartBefore(f.dom)),gN(a,r).fold(()=>{mN(a)?c.setEnd(a,a.data.length):c.setEndAfter(a)},f=>c.setEndAfter(f.dom)),c},MK=e=>{const t=FK(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(np(t))},UK=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),MK(e))})};var Ui;(function(e){e.Before="before",e.After="after"})(Ui||(Ui={}));const HK=(e,t)=>Math.abs(e.left-t),zK=(e,t)=>Math.abs(e.right-t),VK=(e,t)=>e>=t.top&&e<=t.bottom,WK=(e,t)=>e.top<t.bottom&&e.bottom>t.top,jK=(e,t)=>{const n=jD(e,t)/Math.min(e.height,t.height);return WK(e,t)&&n>.5},qK=(e,t)=>{const n=W(e,s=>VK(t,s));return WD(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=Ee(e,i=>jK(i,s));return[o,r]})},KK=(e,t)=>({node:e.node,position:HK(e,t)<zK(e,t)?Ui.Before:Ui.After}),GK=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Vg=(e,t,n,s)=>{const o=p=>Ts(p.node)?b.some(p):he(p.node)?Vg(Et(p.node.childNodes),t,n,!1):b.none(),r=(p,g,C)=>o(g).filter(S=>Math.abs(C(p,t,n)-C(S,t,n))<2&&Y(S.node)),i=(p,g)=>{const C=nn(p,(S,y)=>g(S,t,n)-g(y,t,n));return En(C,o).map(S=>s&&!Y(S.node)&&C.length>1?r(S,C[1],g).getOr(S):S)},[a,c]=qK(Fw(e),n),{pass:f,fail:m}=Ee(c,p=>p.top<n);return i(a,GK).orThunk(()=>i(m,py)).orThunk(()=>i(f,py))},YK=(e,t,n,s)=>{const o=(r,i)=>{const a=f=>he(f)&&f.classList.contains("mce-drag-container"),c=W(r.dom.childNodes,kn(a));return i.fold(()=>Vg(c,n,s,!0),f=>{const m=W(c,p=>p!==f.dom);return Vg(m,n,s,!0)}).orThunk(()=>(Qe(r,e)?b.none():tc(r)).bind(m=>o(m,b.some(r))))};return o(t,b.none())},XK=(e,t,n)=>{const s=w.fromDom(e),o=Po(s),i=w.fromPoint(o,t,n).filter(a=>ws(s,a)).getOr(s);return YK(s,i,t,n)},bN=(e,t,n)=>XK(e,t,n).filter(s=>Ua(s.node)).map(s=>KK(s,t)),CN=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,i=o.defaultView;return{top:s.top+((t=i==null?void 0:i.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=i==null?void 0:i.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},ZK=e=>e.inline?CN(e.getBody()):{left:0,top:0},QK=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},JK=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},e9=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=CN(e.getContentAreaContainer()),s=JK(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},t9=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),n9=(e,t)=>t9(ZK(e),QK(e),e9(e,t)),yN=e=>({target:e,srcElement:e}),s9=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...yN(n)}),o9=(e,t,n)=>{const s=ea("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:Te,stopImmediatePropagation:Te,stopPropagation:Te,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...yN(t)}},r9=(e,t)=>{const n=N5(e);return t==="dragstart"?(Vk(n),jk(n)):t==="drop"?(C5(n),Ig(n)):(y5(n),_5(n)),n},i9=(e,t,n,s)=>{const o=r9(n,e);return Dt(s)?o9(e,t,o):s9(e,s,t,o)},zu=32,a9=100,Vu=8,Wu=16,vN=ct,l9=GD(vN,fs),c9=(e,t,n)=>vN(n)&&n!==t&&e.isEditable(n.parentElement),u9=(e,t,n)=>dt(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),f9=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},d9=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},ju=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},EN=ju("left",-zu),SN=ju("left",zu),_N=ju("top",-zu),wN=ju("top",zu),m9=(e,t,n,s,o,r,i,a,c,f,m,p)=>{let g=0,C=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(g=t.pageX+n-o),t.pageY+s>r&&(C=t.pageY+s-r),e.style.width=n-g+"px",e.style.height=s-C+"px";const S=c.clientHeight,y=c.clientWidth,_=i+c.getBoundingClientRect().top,k=a+c.getBoundingClientRect().left;m.on(T=>{T.intervalId.clear(),T.dragging&&p&&(i+Vu>=S?T.intervalId.set(wN(f)):i-Vu<=0?T.intervalId.set(_N(f)):a+Vu>=y?T.intervalId.set(SN(f)):a-Vu<=0?T.intervalId.set(EN(f)):_+Wu>=window.innerHeight?T.intervalId.set(wN(window)):_-Wu<=0?T.intervalId.set(_N(window)):k+Wu>=window.innerWidth?T.intervalId.set(SN(window)):k-Wu<=0&&T.intervalId.set(EN(window)))})},xN=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},p9=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);xN(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&$o(w.fromDom(n))},g9=e=>e.button===0,h9=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),b9=(e,t)=>n=>{if(g9(n)){const s=me(t.dom.getParents(n.target),l9).getOr(null);if(ee(s)&&c9(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dataTransfer:Lg(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:f9(t,s,s.offsetWidth,s.offsetHeight),intervalId:u1(a9)})}}},C9=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),bN(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===Ui.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},_l=(e,t,n,s,o)=>{t==="dragstart"&&Gk(s,e.dom.getOuterHTML(n));const r=i9(t,n,s,o);return e.dispatch(t,r)},y9=(e,t)=>{const n=hc((o,r)=>C9(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const i=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&i>10){const a=_l(t,"dragstart",r.element,r.dataTransfer,o);if(ee(a.dataTransfer)&&(r.dataTransfer=a.dataTransfer),a.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const a=o.currentTarget===t.getDoc().documentElement,c=h9(r,n9(t,o));d9(r.ghost,t.getBody()),m9(r.ghost,c,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,a),n.throttle(o.clientX,o.clientY)}})},v9=e=>{const t=e.getSel();if(ee(t)){const s=t.getRangeAt(0).startContainer;return Y(s)?s.parentNode:s}else return null},E9=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(u9(t,v9(t.selection),s.element)){const r=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();_l(t,"drop",r,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{p9(t.dom,s.element),A5(s.dataTransfer).each(a=>t.insertContent(a)),t._selectionOverrides.hideFakeCaret()})}_l(t,"dragend",t.getBody(),s.dataTransfer,n)}}),NN(e)},kN=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>_l(t,"dragend",s.element,s.dataTransfer),o=>_l(t,"dragend",s.element,s.dataTransfer,o))}),NN(e)},S9=(e,t)=>n=>kN(e,t,b.some(n)),NN=e=>{e.on(t=>{t.intervalId.clear(),xN(t.ghost)}),e.clear()},_9=e=>{const t=Co(),n=at.DOM,s=document,o=b9(t,e),r=y9(t,e),i=E9(t,e),a=S9(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===le.ESC&&kN(t,e,b.none())})},w9=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(R(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&pu(e,"Dropped file type is not supported"))}},n=o=>{jc(e,o.target)&&t(o)},s=()=>{const o=at.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];N(c,f=>{o.bind(i,f,n),r.bind(a,f,t)}),e.on("remove",()=>{N(c,f=>{o.unbind(i,f,n),r.unbind(a,f,t)})})};e.on("init",()=>{Jn.setEditorTimeout(e,s,0)})},x9=e=>{_9(e),_B(e)&&w9(e)},k9=e=>{const t=hc(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Wp(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},N9=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(qs(n)){const s=Ir(e.getBody(),n),o=ct(s)?s:n;e.selection.getNode()!==o&&ul(e,o).each(r=>e.selection.setRng(r))}})})},wl=ct,AN=(e,t)=>Ir(e.getBody(),t),A9=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=bI(e,s,n.isBlock,()=>Ti(e)),r="sel-"+n.uniqueId(),i="data-mce-selected";let a;const c=se=>ee(se)&&n.hasClass(se,"mce-offscreen-selection"),f=se=>se!==s&&(wl(se)||qs(se))&&n.isChildOf(se,s)&&n.isEditable(se.parentNode),m=se=>{se&&t.setRng(se)},p=(se,M,I,H=!0)=>e.dispatch("ShowCaret",{target:M,direction:se,before:I}).isDefaultPrevented()?null:(H&&t.scrollIntoView(M,se===-1),o.show(I,M)),g=se=>{se.hasAttribute("data-mce-caret")&&(Dd(se),t.scrollIntoView(se))},C=()=>{e.on("click",M=>{n.isEditable(M.target)||(M.preventDefault(),e.focus())}),e.on("blur NewBlock",D),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",M=>{const I=M.target,H=AN(e,I);wl(H)?(M.preventDefault(),ul(e,H).each(A)):f(I)&&ul(e,I).each(A)},!0),e.on("mousedown",M=>{const I=M.target;if(I!==s&&I.nodeName!=="HTML"&&!n.isChildOf(I,s)||!mW(e,M.clientX,M.clientY))return;D(),X();const H=AN(e,I);wl(H)?(M.preventDefault(),ul(e,H).each(A)):bN(s,M.clientX,M.clientY).each(ue=>{M.preventDefault();const be=p(1,ue.node,ue.position===Ui.Before,!1);m(be),ho(H)?H.focus():e.getBody().focus()})}),e.on("keypress",M=>{le.modifierPressed(M)||wl(t.getNode())&&M.preventDefault()}),e.on("GetSelectionRange",M=>{let I=M.range;if(a){if(!a.parentNode){a=null;return}I=I.cloneRange(),I.selectNode(a),M.range=I}}),e.on("SetSelectionRange",M=>{M.range=_(M.range);const I=A(M.range,M.forward);I&&(M.range=I)});const se=M=>he(M)&&M.id==="mcepastebin";e.on("AfterSetSelectionRange",M=>{const I=M.range,H=I.startContainer.parentElement;!y(I)&&!se(H)&&X(),c(H)||D()}),x9(e),k9(e),N9(e)},S=se=>Gn(se)||yc(se)||vc(se),y=se=>S(se.startContainer)||S(se.endContainer),_=se=>{const M=e.schema.getVoidElements(),I=n.createRng(),H=se.startContainer,ue=se.startOffset,be=se.endContainer,Re=se.endOffset;return Ne(M,H.nodeName.toLowerCase())?ue===0?I.setStartBefore(H):I.setStartAfter(H):I.setStart(H,ue),Ne(M,be.nodeName.toLowerCase())?Re===0?I.setEndBefore(be):I.setEndAfter(be):I.setEnd(be,Re),I},k=(se,M)=>{const I=w.fromDom(e.getBody()),H=e.getDoc(),ue=nc(I,"#"+r).getOrThunk(()=>{const Oe=w.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',H);return Jt(Oe,"id",r),Ft(I,Oe),Oe}),be=n.createRng();li(ue),dr(ue,[w.fromText(Vt,H),w.fromDom(M),w.fromText(Vt,H)]),be.setStart(ue.dom.firstChild,1),be.setEnd(ue.dom.lastChild,0),sc(ue,{top:n.getPos(se,e.getBody()).y+"px"}),AE(ue);const Re=t.getSel();return Re&&(Re.removeAllRanges(),Re.addRange(be)),be},T=se=>{const M=se.cloneNode(!0),I=e.dispatch("ObjectSelected",{target:se,targetClone:M});if(I.isDefaultPrevented())return null;const H=k(se,I.targetClone),ue=w.fromDom(se);return N(mn(w.fromDom(e.getBody()),`*[${i}]`),be=>{Qe(ue,be)||en(be,i)}),n.getAttrib(se,i)||se.setAttribute(i,"1"),a=se,X(),H},A=(se,M)=>{if(!se)return null;if(se.collapsed){if(!y(se)){const be=M?1:-1,Re=Wa(be,s,se),Oe=Re.getNode(!M);if(ee(Oe)){if(Ua(Oe))return p(be,Oe,M?!Re.isAtEnd():!1,!1);if(Fo(Oe)&&ct(Oe.nextSibling)){const Ge=n.createRng();return Ge.setStart(Oe,0),Ge.setEnd(Oe,0),Ge}}const We=Re.getNode(M);if(ee(We)){if(Ua(We))return p(be,We,M?!1:!Re.isAtEnd(),!1);if(Fo(We)&&ct(We.previousSibling)){const Ge=n.createRng();return Ge.setStart(We,1),Ge.setEnd(We,1),Ge}}}return null}let I=se.startContainer,H=se.startOffset;const ue=se.endOffset;if(Y(I)&&H===0&&wl(I.parentNode)&&(I=I.parentNode,H=n.nodeIndex(I),I=I.parentNode),!he(I))return null;if(ue===H+1&&I===se.endContainer){const be=I.childNodes[H];if(f(be))return T(be)}return null},D=()=>{a&&a.removeAttribute(i),nc(w.fromDom(e.getBody()),"#"+r).each(pt),a=null},V=()=>{o.destroy(),a=null},X=()=>{o.hide()};return Js(e)||C(),{showCaret:p,showBlockCaretContainer:g,hideFakeCaret:X,destroy:V}},T9=(e,t)=>{let n=t;for(let s=e.previousSibling;Y(s);s=s.previousSibling)n+=s.data.length;return n},TN=(e,t,n,s,o)=>{if(Y(n)&&(s<0||s>n.data.length))return[];const r=o&&Y(n)?[T9(n,s)]:[s];let i=n;for(;i!==t&&i.parentNode;)r.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?r.reverse():[]},Wg=(e,t,n,s,o,r,i=!1)=>{const a=TN(e,t,n,s,i),c=TN(e,t,o,r,i);return{start:a,end:c}},RN=(e,t)=>{const n=t.slice(),s=n.pop();return vn(s)?re(n,(r,i)=>r.bind(a=>b.from(a.childNodes[i])),b.some(e)).bind(r=>Y(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s})):b.none()},PN=(e,t)=>RN(e,t.start).bind(({node:n,offset:s})=>RN(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),R9=(e,t,n,s=!1)=>Wg(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Hi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t,Y(t.firstChild)&&ui(t.firstChild.data)),Hi(e,s,n)}},qu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(Y(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),Y(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Hi(e,o,n),o!==r&&Hi(e,r,n))},Ku=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),jg=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Uy(s).concat(e.blockPatterns),inlinePatterns:Hy(s).concat(e.inlinePatterns)}},qg=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},DN=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Gu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},ON=(e,t,n)=>{const s=PN(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset),c=a.parentNode,f=i.parentNode;return{prefix:t,end:f.insertBefore(DN(e,t+"-end"),i),start:c.insertBefore(DN(e,t+"-start"),a)}},BN=(e,t,n)=>{Hi(e,e.get(t.prefix+"-end"),n),Hi(e,e.get(t.prefix+"-start"),n)},Kg=e=>e.start.length===0,P9=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},IN=(e,t,n,s)=>{const o=t.start;return gg(e,s.container,s.offset,P9(o),n).bind(i=>{var a,c;const f=(c=(a=n.textContent)===null||a===void 0?void 0:a.indexOf(o))!==null&&c!==void 0?c:-1;if(f!==-1&&i.offset>=f+o.length){const p=e.createRng();return p.setStart(i.container,i.offset-o.length),p.setEnd(i.container,i.offset),b.some(p)}else{const p=i.offset-o.length;return pg(i.container,p,n).map(g=>{const C=e.createRng();return C.setStart(g.container,g.offset),C.setEnd(i.container,i.offset),C}).filter(g=>g.toString()===o).orThunk(()=>IN(e,t,n,Os(i.container,0)))}})},D9=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return mg(n,s,o).bind(i=>IN(e,t,o,i).bind(c=>{var f;if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return b.none();if(i.offset===0&&((f=c.endContainer.textContent)===null||f===void 0?void 0:f.length)===c.endOffset)return b.none()}return b.some(c)}))},O9=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),i=n.pattern,a=n.position.container,c=n.position.offset;return pg(a,c-n.pattern.end.length,t).bind(f=>{const m=Wg(o,r,f.container,f.offset,a,c,s);if(Kg(i))return b.some({matches:[{pattern:i,startRng:m,endRng:m}],position:f});{const p=Yu(e,n.remainingPatterns,f.container,f.offset,t,s),g=p.getOr({matches:[],position:f}),C=g.position;return D9(o,i,C.container,C.offset,t,p.isNone()).map(y=>{const _=R9(o,r,y,s);return{matches:g.matches.concat([{pattern:i,startRng:_,endRng:m}]),position:Os(y.startContainer,y.startOffset)}})}})},Yu=(e,t,n,s,o,r)=>{const i=e.dom;return mg(n,s,i.getRoot()).bind(a=>{const c=qg(i,o,n,s);for(let f=0;f<t.length;f++){const m=t[f];if(!Mf(c,m.end))continue;const p=t.slice();p.splice(f,1);const g=O9(e,o,{pattern:m,remainingPatterns:p,position:a},r);if(g.isNone()&&s>0)return Yu(e,t,n,s-1,o,r);if(g.isSome())return g}return b.none()})},LN=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?N(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},B9=(e,t,n,s)=>{const o=Gu(e.dom,n);qu(e.dom,o,s),LN(e,t,o)},I9=(e,t,n,s,o)=>{const r=e.dom,i=Gu(r,s),a=Gu(r,n);qu(r,a,o),qu(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},f=Gu(r,c);LN(e,t,f)},L9=(e,t)=>{const n=Ra("mce_textpattern"),s=ye(t,(o,r)=>{const i=ON(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return ye(s,(o,r)=>{const i=s.length-o.length-1,a=Kg(r.pattern)?r.endMarker:ON(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:a}])},[])},$9=e=>nn(e,(t,n)=>n.end.length-t.end.length),F9=(e,t)=>{const n=ot(e,s=>z(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},$N=(e,t,n,s,o,r)=>{const i=Yu(e,o.inlinePatterns,n,s,t,r).fold(()=>[],c=>c.matches),a=Yu(e,$9(o.inlinePatterns),n,s,t,r).fold(()=>[],c=>c.matches);return F9(i,a)},FN=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=L9(n,t);N(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;Kg(r.pattern)?B9(e,r.pattern,r.endMarker,a):I9(e,r.pattern,r.startMarker,r.endMarker,a),BN(n,r.endMarker,a),BN(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},MN=(e,t,n)=>N4(t,0,t).map(s=>{const o=s.container;return Hx(o,n.start.length,t).each(r=>{const i=e.createRng();i.setStart(o,0),i.setEnd(r.container,r.offset),qu(e,i,a=>a===t)}),o}),UN=e=>(t,n)=>{const s=t.dom,o=n.pattern,r=PN(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),i=(a,c)=>{const f=c.get(a);return rt(f)&&Ht(f).exists(m=>Ne(m,"block"))};return Ku(t,r).each(a=>{o.type==="block-format"?i(o.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,a,o),t.formatter.apply(o.format)}):o.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,a,o),t.execCommand(o.cmd,!1,o.value)})}),!0},M9=e=>nn(e,(t,n)=>n.start.length-t.start.length),HN=e=>(t,n)=>{const s=M9(t),o=n.replace(Vt," ");return me(s,r=>e(r,n,o))},zN=(e,t)=>(n,s,o,r,i)=>{var a;i===void 0&&(i=(a=s.textContent)!==null&&a!==void 0?a:"");const c=n.dom,f=gn(n);return c.is(s,f)?e(o.blockPatterns,i).map(m=>t&&Q.trim(i).length===m.start.length?[]:[{pattern:m,range:Wg(c,c.getRoot(),s,0,s,0,r)}]).getOr([]):[]},U9=e=>/^\s[^\s]/.test(e),H9=UN((e,t,n)=>{MN(e,t,n).each(s=>{const o=w.fromDom(s),r=Pa(o);U9(r)&&ly(o,r.slice(1))})}),z9=HN((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),V9=zN(z9,!0),W9=(e,t)=>{const n=e.selection.getRng();return Ku(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),i=jg(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),a=$N(e,s,n.startContainer,r,i,!0),c=V9(e,s,i,!0);return{inlineMatches:a,blockMatches:c}}).filter(({inlineMatches:s,blockMatches:o})=>o.length>0||s.length>0)},j9=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();N(t,s=>H9(e,s)),e.selection.moveToBookmark(n)},q9=UN(MN),K9=HN((e,t,n)=>t===e.start||n===e.start),G9=zN(K9,!1),Y9=(e,t)=>{const n=e.selection.getRng();return Ku(e,n).map(s=>{const o=Math.max(0,n.startOffset),r=qg(e.dom,s,n.startContainer,o),i=jg(t,s,r);return G9(e,s,i,!1,r)}).filter(s=>s.length>0)},X9=(e,t)=>{N(t,n=>q9(e,n))},Z9=(e,t)=>W9(e,t).fold(st,({inlineMatches:n,blockMatches:s})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{$D(e),FN(e,n),j9(e,s);const o=e.selection.getRng(),r=mg(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const a=i.container;a.data.charAt(i.offset-1)===Ca&&(a.deleteData(i.offset-1,1),Hi(e.dom,a.parentNode,c=>c===e.dom.getRoot()))})}),!0)),Q9=(e,t)=>{const n=e.selection.getRng();Ku(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=qg(e.dom,s,n.startContainer,o),i=jg(t,s,r),a=$N(e,s,n.startContainer,o,i,!1);a.length>0&&e.undoManager.transact(()=>{FN(e,a)})})},J9=(e,t)=>Y9(e,t).fold(st,n=>(e.undoManager.transact(()=>{X9(e,n)}),!0)),VN=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},e7=(e,t)=>VN(e,t,(n,s)=>n===s.keyCode&&!le.modifierPressed(s)),t7=(e,t)=>VN(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),n7=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>RO(VB(e).filter(i=>i.type==="inline-command"||i.type==="block-command"?e.queryCommandSupported(i.cmd):!0),WB(e)),o=()=>XB(e);e.on("keydown",i=>{if(i.keyCode===13&&!le.modifierPressed(i)&&e.selection.isCollapsed()){const a=zd(s(),"enter");(a.inlinePatterns.length>0||a.blockPatterns.length>0||o())&&Z9(e,a)&&i.preventDefault()}},!0),e.on("keydown",i=>{if(i.keyCode===32&&e.selection.isCollapsed()){const a=zd(s(),"space");(a.blockPatterns.length>0||o())&&J9(e,a)&&i.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const i=zd(s(),"space");(i.inlinePatterns.length>0||o())&&Q9(e,i)}};e.on("keyup",i=>{e7(n,i)&&r()}),e.on("keypress",i=>{t7(t,i)&&Jn.setEditorTimeout(e,r)})},s7=e=>{n7(e)},o7=e=>{const t=Q.each,n=le.BACKSPACE,s=le.DELETE,o=e.dom,r=e.selection,i=e.parser,a=je.browser,c=a.isFirefox(),f=a.isChromium()||a.isSafari(),m=je.deviceType.isiPhone()||je.deviceType.isiPad(),p=je.os.isMacOS()||je.os.isiOS(),g=(te,ve)=>{try{e.getDoc().execCommand(te,!1,String(ve))}catch{}},C=te=>te.isDefaultPrevented(),S=()=>{const te=De=>{const ne=o.create("body"),Pe=De.cloneContents();return ne.appendChild(Pe),r.serializer.serialize(ne,{format:"html"})},ve=De=>{const ne=te(De),Pe=o.createRng();Pe.selectNode(e.getBody());const Ie=te(Pe);return ne===Ie};e.on("keydown",De=>{const ne=De.keyCode;if(!C(De)&&(ne===s||ne===n)&&e.selection.isEditable()){const Pe=e.selection.isCollapsed(),Ie=e.getBody();if(Pe&&!bo(e.schema,Ie)||!Pe&&!ve(e.selection.getRng()))return;De.preventDefault(),e.setContent(""),Ie.firstChild&&o.isBlock(Ie.firstChild)?e.selection.setCursorLocation(Ie.firstChild,0):e.selection.setCursorLocation(Ie,0),e.nodeChanged()}})},y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},_=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",te=>{let ve;if(te.target===e.getDoc().documentElement)if(ve=r.getRng(),e.getBody().focus(),te.type==="mousedown"){if(Gn(ve.startContainer))return;r.placeCaretAt(te.clientX,te.clientY)}else r.setRng(ve)})},k=()=>{e.on("keydown",te=>{if(!C(te)&&te.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const ve=r.getNode(),De=ve.previousSibling;if(ve.nodeName==="HR"){o.remove(ve),te.preventDefault();return}De&&De.nodeName&&De.nodeName.toLowerCase()==="hr"&&(o.remove(De),te.preventDefault())}}})},T=()=>{Range.prototype.getClientRects||e.on("mousedown",te=>{if(!C(te)&&te.target.nodeName==="HTML"){const ve=e.getBody();ve.blur(),Jn.setEditorTimeout(e,()=>{ve.focus()})}})},A=()=>{const te=sv(e);e.on("click",ve=>{const De=ve.target;/^(IMG|HR)$/.test(De.nodeName)&&o.isEditable(De)&&(ve.preventDefault(),e.selection.select(De),e.nodeChanged()),De.nodeName==="A"&&o.hasClass(De,te)&&De.childNodes.length===0&&o.isEditable(De.parentNode)&&(ve.preventDefault(),r.select(De))})},D=()=>{const te=()=>{const De=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const ne=r.getStart();ne!==e.getBody()&&(o.setAttrib(ne,"style",null),t(De,Pe=>{ne.setAttributeNode(Pe.cloneNode(!0))}))}},ve=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",De=>{let ne;return!C(De)&&(De.keyCode===8||De.keyCode===46)&&ve()?(ne=te(),e.getDoc().execCommand("delete",!1),ne(),De.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",De=>{if(!C(De)&&ve()){const ne=te();Jn.setEditorTimeout(e,()=>{ne()})}})},V=()=>{e.on("keydown",te=>{if(!C(te)&&te.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const ve=r.getNode().previousSibling;if(ve&&ve.nodeName&&ve.nodeName.toLowerCase()==="table")return te.preventDefault(),!1}return!0})},X=()=>{e.on("keydown",te=>{if(C(te)||te.keyCode!==le.BACKSPACE)return;let ve=r.getRng();const De=ve.startContainer,ne=ve.startOffset,Pe=o.getRoot();let Ie=De;if(!(!ve.collapsed||ne!==0)){for(;Ie.parentNode&&Ie.parentNode.firstChild===Ie&&Ie.parentNode!==Pe;)Ie=Ie.parentNode;Ie.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Ie),ve=o.createRng(),ve.setStart(De,0),ve.setEnd(De,0),r.setRng(ve))}})},se=()=>{const te=()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),Jy(e)||g("enableObjectResizing",!1)};tv(e)||e.on("BeforeExecCommand mousedown",te)},M=()=>{const te=()=>{t(o.select("a:not([data-mce-block])"),ve=>{var De;let ne=ve.parentNode;const Pe=o.getRoot();if((ne==null?void 0:ne.lastChild)===ve){for(;ne&&!o.isBlock(ne);){if(((De=ne.parentNode)===null||De===void 0?void 0:De.lastChild)!==ne||ne===Pe)return;ne=ne.parentNode}o.add(ne,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",ve=>{(ve.type==="setcontent"||ve.command==="mceInsertLink")&&te()})},I=()=>{e.on("init",()=>{g("DefaultParagraphSeparator",gn(e))})},H=te=>{const ve=te.getBody(),De=te.selection.getRng();return De.startContainer===De.endContainer&&De.startContainer===ve&&De.startOffset===0&&De.endOffset===ve.childNodes.length},ue=()=>{e.on("keyup focusin mouseup",te=>{!le.modifierPressed(te)&&!H(e)&&r.normalize()},!0)},be=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Re=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Oe=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",te=>{let ve;te.target.nodeName==="HTML"&&(ve=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ve),e.selection.normalize(),e.nodeChanged())}))},We=()=>{p&&e.on("keydown",te=>{le.metaKeyPressed(te)&&!te.shiftKey&&(te.keyCode===37||te.keyCode===39)&&(te.preventDefault(),e.selection.getSel().modify("move",te.keyCode===37?"backward":"forward","lineboundary"))})},Ge=()=>{e.on("click",te=>{let ve=te.target;do if(ve.tagName==="A"){te.preventDefault();return}while(ve=ve.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},gt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",te=>{te.preventDefault()})})},Zt=()=>{i.addNodeFilter("br",te=>{let ve=te.length;for(;ve--;)te[ve].attr("class")==="Apple-interchange-newline"&&te[ve].remove()})},et=Te,J=()=>{if(!c||e.removed)return!1;const te=e.selection.getSel();return!te||!te.rangeCount||te.rangeCount===0},ge=()=>{f&&(_(),A(),gt(),y(),m&&(Re(),Oe(),Ge())),c&&(T(),se(),be(),We())},Ue=()=>{X(),S(),je.windowsPhone||ue(),f&&(_(),A(),I(),gt(),V(),Zt(),m?(Re(),Oe(),Ge()):y()),c&&(k(),T(),D(),se(),M(),be(),We(),V())};return Js(e)?ge():Ue(),{refreshContentEditable:et,isHidden:J}},r7=e=>e.toLowerCase()==="gpl",i7=e=>e.length>=64&&e.length<=255,a7=e=>r7(e)||i7(e)?"VALID":"INVALID",l7=e=>{const t=oI(e);!ae(rI(e))&&(Dt(t)||a7(t)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},Gg=at.DOM,c7=(e,t)=>{const n=w.fromDom(e.getBody()),s=Yf(Oo(n)),o=w.fromTag("style");Jt(o,"type","text/css"),Ft(o,w.fromText(t)),Ft(s,o),e.on("remove",()=>{pt(o)})},u7=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Yg=e=>ra(e,t=>Dt(t)===!1),WN=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Yg({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:u7(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Kd(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},jN=e=>{const t=e.options.get;return Yg({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},f7=e=>{const t=e.options.get;return{...WN(e),...jN(e),...Yg({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},d7=e=>{const t=Di(WN(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let i=n.length;for(;i--;){const a=n[i];let c=a.attr(s);if(c&&!a.attr(r)){if(c.indexOf("data:")===0||c.indexOf("blob:")===0)continue;s==="style"?(c=o.serializeStyle(o.parseStyle(c),a.name),c.length||(c=null),a.attr(r,c),a.attr(s,c)):s==="tabindex"?(a.attr(r,c),a.attr(s,null)):a.attr(r,e.convertURL(c,s,a.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),KB(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new _n("br",1))}}),t},m7=e=>{const t=TB(e);t&&Jn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},p7=e=>{const t=e.dom.getRoot();!e.inline&&(!Bc(e)||e.selection.getStart(!0)===t)&&hn(t).each(n=>{const s=n.getNode(),o=js(s)?hn(s).getOr(n):n;e.selection.setRng(o.toRange())})},g7=e=>{e.bindPendingEventDelegates(),e.initialized=!0,AL(e),e.focus(!0),p7(e),e.nodeChanged({initial:!0});const t=NB(e);Ke(t)&&t.call(e,e),m7(e)},Xg=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,h7=(e,t,n)=>{const{pass:s,fail:o}=Ee(t,a=>tinymce.Resource.has(Mp(a))),i=[...s.map(a=>{const c=tinymce.Resource.get(Mp(a));return ae(c)?Promise.resolve(Xg(e).loadRawCss(a,c)):Promise.resolve()}),Xg(e).loadAll(o)];return e.inline?i:i.concat([e.ui.styleSheetLoader.loadAll(n)])},qN=e=>{const t=Xg(e),n=Qy(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";Q.each(e.contentStyles,f=>{c+=f+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(h7(e,s,n)).then(r).catch(r),a=nB(e);return a&&c7(e,a),i},b7=e=>{const t=e.getDoc(),n=e.getBody();kL(e),RB(e)||(t.body.spellcheck=!1,Gg.setAttrib(n,"spellcheck","false")),e.quirks=o7(e),NL(e);const s=sB(e);s!==void 0&&(n.dir=s);const o=PB(e);o&&e.on("BeforeSetContent",r=>{Q.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},C7=e=>{Js(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Zg=e=>{e.removed!==!0&&(C7(e),g7(e))},y7=e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},KN=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Gg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=tv(e),e._editableRoot=EB(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&Gg.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=UW(e),e.schema=Lo(jN(e)),e.dom=at(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:QO(e),referrerPolicy:Wd(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=d7(e),e.serializer=I_(f7(e),e),e.selection=B_(e.dom,e.getWin(),e.serializer,e),e.annotator=tE(e),e.formatter=X_(e),e.undoManager=Q_(e),e._nodeChangeDispatcher=new m5(e),e._selectionOverrides=A9(e),m6(e),OK(e),S6(e),Js(e)||(UK(e),s7(e));const o=d5(e);u6(e,o),C6(e),t3(e),RK(e);const r=WV(e);b7(e),l7(e),r.fold(()=>{const i=y7(e);qN(e).then(()=>{Zg(e),i()})},i=>{e.setProgressState(!0),qN(e).then(()=>{i().then(a=>{e.setProgressState(!1),Zg(e),T_(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Zg(e),T_(e)})})})},v7=Ct,E7=(e,t,n)=>LP(e,t,v7,n),Qg=at.DOM,S7=(e,t,n,s)=>{const o=w.fromTag("iframe");return s.each(r=>Jt(o,"tabindex",r)),fo(o,n),fo(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),oi(o,"tox-edit-area__iframe"),o},_7=e=>{let t=$O(e)+"<html><head>";jy(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=FO(e),s=MO(e),o=e.translate(ov(e));return qy(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+qy(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},w7=(e,t)=>{const n=je.browser.isFirefox()?ov(e):"Rich Text Area",s=e.translate(n),o=mo(w.fromDom(e.getElement()),"tabindex").bind(Xl),r=S7(e.id,s,LO(e),o).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=_7(e),Qg.add(t.iframeContainer,r)},x7=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,KN(e)};if(YB(e)||je.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=E7(w.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},k7=(e,t)=>{w7(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Qg.isHidden(t.editorContainer)),e.getElement().style.display="none",Qg.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,x7(e)},GN=at.DOM,N7=(e,t,n)=>{const s=Bi.get(n),o=Bi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Q.trim(n),s&&Q.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ke(r.init)&&(r.init(e,o),t.push(n))}catch(r){wW(e,n,r)}}},A7=e=>e.replace(/^\-/,""),T7=e=>{const t=[];N(kc(e),n=>{N7(e,t,A7(n))})},R7=e=>{const t=Q.trim(Yy(e)),n=e.ui.registry.getAll().icons,s={...mu.get("default").icons,...mu.get(t).icons};lt(s,(o,r)=>{Ne(n,r)||e.ui.registry.addIcon(r,o)})},P7=e=>{const t=yi(e);if(ae(t)){const n=$r.get(t);e.theme=n(e,$r.urls[t])||{},Ke(e.theme.init)&&e.theme.init(e,$r.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},D7=e=>{const t=jd(e),n=Oi.get(t);e.model=n(e,Oi.urls[t])},O7=e=>{const t=e.theme.renderUI;return t?t():XN(e)},B7=e=>{const t=e.getElement(),s=yi(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},YN=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),I7=e=>{const t=GN.create("div");return GN.insertAfter(t,e),YN(t,t)},XN=e=>{const t=e.getElement();return e.inline?YN(null):I7(t)},L7=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,ae(yi(e))?O7(e):Ke(yi(e))?B7(e):XN(e)},$7=(e,t)=>{const n={show:b.from(t.show).getOr(Te),hide:b.from(t.hide).getOr(Te),isEnabled:b.from(t.isEnabled).getOr(Ct),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},F7=async e=>{e.dispatch("ScriptsLoaded"),R7(e),P7(e),D7(e),T7(e);const t=await L7(e);$7(e,b.from(t.api).getOr({})),e.editorContainer=t.editorContainer,TW(e),e.inline?KN(e):k7(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Mr=at.DOM,ZN=e=>e.charAt(0)==="-",M7=(e,t)=>{const n=Xy(t),s=JO(t);if(!As.hasCode(n)&&n!=="en"){const o=Us(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{EW(t,o,n)})}},U7=(e,t)=>{const n=yi(e);if(ae(n)&&!ZN(n)&&!Ne($r.urls,n)){const s=lB(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;$r.load(n,o).catch(()=>{SW(e,o,n)})}},H7=(e,t)=>{const n=jd(e);if(n!=="plugin"&&!Ne(Oi.urls,n)){const s=cB(e),o=ae(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;Oi.load(n,o).catch(()=>{_W(e,o,n)})}},z7=e=>b.from(KO(e)).filter(Us).map(t=>({url:t,name:b.none()})),QN=(e,t,n)=>b.from(t).filter(s=>Us(s)&&!mu.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),V7=(e,t,n)=>{const s=QN(t,"default",n),o=z7(t).orThunk(()=>QN(t,Yy(t),""));N(GR([s,o]),r=>{e.add(r.url).catch(()=>{vW(t,r.url,r.name.getOrUndefined())})})},W7=(e,t)=>{const n=(s,o)=>{Bi.load(s,o).catch(()=>{yW(e,o,s)})};lt(SB(e),(s,o)=>{n(o,s),e.options.set("plugins",kc(e).concat(o))}),N(kc(e),s=>{s=Q.trim(s),s&&!Bi.urls[s]&&!ZN(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},j7=e=>{const t=yi(e);return!ae(t)||ee($r.get(t))},q7=e=>{const t=jd(e);return ee(Oi.get(t))},K7=(e,t)=>{const n=yo.ScriptLoader,s=()=>{!e.removed&&j7(e)&&q7(e)&&F7(e)};U7(e,t),H7(e,t),M7(n,e),V7(n,e,t),W7(e,t),n.loadQueue().then(s,s)},G7=(e,t)=>AC.forElement(e,{contentCssCors:nv(t),referrerPolicy:Wd(t)}),Y7=e=>{const t=e.id;As.setCode(Xy(e));const n=()=>{Mr.unbind(window,"ready",n),e.render()};if(!yr.Event.domLoaded){Mr.bind(window,"ready",n);return}if(!e.getElement())return;const s=w.fromDom(e.getElement()),o=Hb(s);e.on("remove",()=>{de(s.dom.attributes,i=>en(s,i.name)),fo(s,o)}),e.ui.styleSheetLoader=G7(s,e),qd(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Mr.getParent(t,"form");r&&(e.formElement=r,gB(e)&&!sd(e.getElement())&&(Mr.insertAfter(Mr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Mr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),hB(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=z_(e),e.notificationManager=H_(e),JB(e)&&e.on("GetContent",i=>{i.save&&(i.content=Mr.encode(i.content))}),bB(e)&&e.on("submit",()=>{e.initialized&&e.save()}),CB(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),K7(e,e.suffix)},X7=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),$L(e,t))},Z7=e=>e._editableRoot,Q7=(e,t)=>({sections:G(e),options:G(t)}),JN=Hs().deviceType,eA=JN.isPhone(),J7=JN.isTablet(),xl=e=>{if(dt(e))return[];{const t=rt(e)?e:e.split(/[ ,]/),n=q(t,ti);return W(n,Us)}},eG=(e,t)=>{const n=vR(t,(s,o)=>R(e,o));return Q7(n.t,n.f)},tG=(e,t,n={})=>{const s=e.sections(),o=mt(s,t).getOr({});return Q.extend({},n,o)},Jg=(e,t)=>Ne(e.sections(),t),nG=(e,t)=>Jg(e,t)?e.sections()[t]:{},sG=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:mt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),oG=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?Q.extend({},e.external_plugins,s):s},rG=(e,t)=>[...xl(e),...xl(t)],iG=(e,t,n,s)=>e&&Jg(t,"mobile")?s:n,aG=(e,t,n,s)=>{const o=xl(n.forced_plugins),r=xl(s.plugins),i=nG(t,"mobile"),a=i.plugins?xl(i.plugins):r,c=iG(e,t,r,a),f=rG(o,c);return Q.extend(s,{forced_plugins:o,plugins:f})},lG=(e,t)=>e&&Jg(t,"mobile"),cG=(e,t,n,s,o)=>{var r;const i=e?{mobile:sG((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=eG(["mobile"],Nu(i,o)),c=Q.extend(n,s,a.options(),lG(e,a)?tG(a,"mobile"):{},{external_plugins:oG(s,a.options())});return aG(e,a,s,c)},uG=(e,t)=>{const n=Yx(t);return cG(eA||J7,eA,n,e,n)},fG=(e,t)=>g2(e,t),dG=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{N("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},mG=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return z(o,r=>ee(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},pG=e=>{dG(e),mG(e)},gG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(je.os.isMacOS()||je.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}}})},hG=(e,t,n,s)=>{const o=w.fromDom(e.getRoot());return Ja(o,F.fromRangeStart(t),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),el(o,F.fromRangeEnd(t),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},bG=e=>{if(typeof e!="string"){const t=Q.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},CG=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?hG(s,n.getRng(),t,e.schema):t},Xu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=bG(t);Tp(e,{...s,content:CG(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=m2(e,o.content,s);Rp(e,r,o),e.addVisual()})}},yG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Xu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Xu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Xu(e,s)},mceInsertContent:(t,n,s)=>{Xu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(IB(e))}})},vG={"font-size":"size","font-family":"face"},EG=ec("font"),SG=(e,t,n)=>{const s=r=>oc(r,e).orThunk(()=>EG(r)?mt(vG,e).bind(i=>mo(r,i)):b.none()),o=r=>Qe(w.fromDom(t),r);return ip(w.fromDom(n),r=>s(r),o)},_G=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),wG=(e,t)=>b.from(at.DOM.getStyle(t,e,!0)),tA=e=>(t,n)=>b.from(n).map(w.fromDom).filter(Vn).bind(s=>SG(e,t,s.dom).or(wG(e,s.dom))).getOr(""),xG=tA("font-size"),kG=At(_G,tA("font-family")),NG=e=>hn(e.getBody()).bind(t=>{const n=t.container();return b.from(Y(n)?n.parentNode:n)}),AG=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),TG=(e,t)=>AG(e).orThunk(fe(NG,e)).map(w.fromDom).filter(Vn).bind(t),eh=(e,t)=>TG(e,Tt(b.some,t)),nA=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=ZB(e),o=QB(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},RG=e=>{const t=e.split(/\s*,\s*/);return q(t,n=>n.indexOf(" ")!==-1&&!(zt(n,'"')||zt(n,"'"))?`'${n}'`:n).join(",")},PG=(e,t)=>{const n=nA(e,t);e.formatter.toggle("fontname",{value:RG(n)}),e.nodeChanged()},DG=e=>eh(e,t=>kG(e.getBody(),t.dom)).getOr(""),OG=(e,t)=>{e.formatter.toggle("fontsize",{value:nA(e,t)}),e.nodeChanged()},BG=e=>eh(e,t=>xG(e.getBody(),t.dom)).getOr(""),IG=e=>eh(e,t=>{const n=w.fromDom(e.getBody()),s=ip(t,r=>oc(r,"line-height"),fe(Qe,n)),o=()=>{const r=parseFloat(Ws(t,"line-height")),i=parseFloat(Ws(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),LG=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},$G=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{PG(e,o)},FontSize:(n,s,o)=>{OG(e,o)},LineHeight:(n,s,o)=>{LG(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(ae(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},FG=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>DG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>BG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>IG(e))},MG=e=>{$G(e),FG(e)},UG=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},HG=e=>{e.editorCommands.addCommands({Indent:()=>{a6(e)},Outdent:()=>{ax(e)}}),e.editorCommands.addCommands({Outdent:()=>sx(e)},"state")},zG=e=>{const t=(n,s,o)=>{const r=ae(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ke(r)&&ae(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},VG=(e,t,n,s)=>{const o=e.dom,r=a=>o.isBlock(a)&&a.parentElement===n,i=r(t)?t:o.getParent(s,r,n);return b.from(i).map(w.fromDom)},sA=(e,t)=>{const n=e.dom,s=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),r=t?s.startContainer:s.endContainer,i=vl(n,r);if(!i||!i.isContentEditable)return;const a=t?Bn:go,c=gn(e);VG(e,o,i,r).each(f=>{const m=Ek(e,r,f.dom,i,!1,c);a(f,w.fromDom(m)),e.selection.setCursorLocation(m,0),e.dispatch("NewBlock",{newBlock:m}),yl(e,"insertParagraph")})},WG=e=>sA(e,!0),jG=e=>sA(e,!1),qG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{WG(e)},InsertNewBlockAfter:()=>{jG(e)}})},KG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{$u(xk,e)},mceInsertNewLine:(t,n,s)=>{Dk(e,s)},InsertLineBreak:(t,n,s)=>{$u(Ak,e)}})},GG=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>he(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),fs);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},YG=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{lF(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},XG=e=>{pG(e),gG(e),UG(e),GG(e),yG(e),zG(e),HG(e),qG(e),KG(e),MG(e),YG(e)},ZG=["toggleview"],oA=e=>R(ZG,e.toLowerCase());class rA{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():H$(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[i];return Ke(f)?(f(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!oA(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ke(s)?s(n):!1}queryCommandValue(t){if(!oA(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ke(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;lt(t,(o,r)=>{N(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s??this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const Ur="data-mce-contenteditable",QG=(e,t,n)=>{Wf(e,t)&&!n?da(e,t):n&&oi(e,t)},th=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Zu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},JG=e=>{N(mn(e,'*[contenteditable="true"]'),t=>{Jt(t,Ur,"true"),Zu(t,!1)})},eY=e=>{N(mn(e,`*[${Ur}="true"]`),t=>{en(t,Ur),Zu(t,!0)})},tY=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},nY=e=>{e.selection.setRng(e.selection.getRng())},sY=(e,t)=>{const n=w.fromDom(e.getBody());QG(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),tY(e),e.readonly=!0,Zu(n,!1),JG(n)):(e.readonly=!1,e.hasEditableRoot()&&Zu(n,!0),eY(n),th(e,"StyleWithCSS",!1),th(e,"enableInlineTableEditing",!1),th(e,"enableObjectResizing",!1),IE(e)&&e.focus(),nY(e),e.nodeChanged())},Hr=e=>e.readonly,iA=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Hr(e)&&N(t,n=>{n.attr(Ur,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Ur,t=>{Hr(e)&&N(t,n=>{n.attr("contenteditable",n.attr(Ur))})}),e.serializer.addTempAttr(Ur)},oY=e=>{e.serializer?iA(e):e.on("PreInit",()=>{iA(e)})},rY=e=>e.type==="click",iY=["copy"],aY=e=>R(iY,e.type),lY=(e,t)=>ai(t,"a",s=>Qe(s,w.fromDom(e.getBody()))).bind(s=>mo(s,"href")),cY=(e,t)=>{if(rY(t)&&!le.metaKeyPressed(t)){const n=w.fromDom(t.target);lY(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${fb(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else aY(t)&&e.dispatch(t.type,t)},uY=e=>{e.on("ShowCaret",t=>{Hr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Hr(e)&&t.preventDefault()})},fY=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class nh{static isNative(t){return!!fY[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||st}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=Sd(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=st),n){const r={func:n,removed:!1};o&&Q.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let f=this.bindings[c];f||(f=[],this.toggleEvent(c,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[c]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return lt(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=Ee(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,N(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else lt(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const kl=e=>(e._eventDispatcher||(e._eventDispatcher=new nh({scope:e,toggleEvent:(t,n)=>{nh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),sh={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Sd(e.toLowerCase(),t??{},s);const o=kl(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return kl(this).on(e,t,n)},off(e,t){return kl(this).off(e,t)},once(e,t){return kl(this).once(e,t)},hasEventListeners(e){return kl(this).has(e)}},Qu=at.DOM;let zr;const Ju=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=ev(e);return n?(e.eventRoot||(e.eventRoot=Qu.select(n)[0]),e.eventRoot):e.getBody()},dY=e=>!e.hidden&&!Hr(e),aA=(e,t,n)=>{dY(e)?e.dispatch(t,n):Hr(e)&&cY(e,n)},lA=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Ju(e,t);if(ev(e)){if(zr||(zr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||zr&&(lt(zr,(o,r)=>{e.dom.unbind(Ju(e,r))}),zr=null)})),zr[t])return;const s=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||Qu.isChildOf(r,c))&&aA(i[a],t,o)}};zr[t]=s,Qu.bind(n,t,s)}else{const s=o=>{aA(e,t,o)};Qu.bind(n,t,s),e.delegates[t]=s}},cA={...sh,bindPendingEventDelegates(){const e=this;Q.each(e._pendingNativeEvents,t=>{lA(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?lA(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Ju(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(lt(e.delegates,(s,o)=>{e.dom.unbind(Ju(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},mY=e=>ae(e)?{value:e.split(/[ ,]/),valid:!0}:Fs(e,ae)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},pY=e=>{const t=(()=>{switch(e){case"array":return rt;case"boolean":return ln;case"function":return Ke;case"number":return vn;case"object":return ke;case"string":return ae;case"string[]":return mY;case"object[]":return n=>Fs(n,ke);case"regexp":return n=>wt(n,RegExp);default:return Ct}})();return n=>oh(n,t,`The value must be a ${e}.`)},gY=e=>ae(e.processor),uA=(e,t)=>{const n=la(t.message)?"":`. ${t.message}`;return e+n},fA=e=>e.valid,oh=(e,t,n="")=>{const s=t(e);return ln(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},hY=(e,t,n)=>{if(!Dt(t)){const s=oh(t,n);if(fA(s))return s.value;console.error(uA(`Invalid default value passed for the "${e}" option`,s))}},bY=(e,t,n=t)=>{const s={},o={},r=(C,S,y)=>{const _=oh(S,y);return fA(_)?(o[C]=_.value,!0):(console.warn(uA(`Invalid value passed for the ${C} option`,_)),!1)},i=(C,S)=>{const y=gY(S)?pY(S.processor):S.processor,_=hY(C,S.default,y);s[C]={...S,default:_,processor:y},mt(o,C).orThunk(()=>mt(t,C)).each(T=>r(C,T,y))},a=C=>Ne(s,C);return{register:i,isRegistered:a,get:C=>mt(o,C).orThunk(()=>mt(s,C).map(S=>S.default)).getOrUndefined(),set:(C,S)=>{if(a(C)){const y=s[C];return y.immutable?(console.error(`"${C}" is an immutable option and cannot be updated`),!1):r(C,S,y.processor)}else return console.warn(`"${C}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:C=>{const S=a(C);return S&&delete o[C],S},isSet:C=>Ne(o,C),debug:()=>{try{console.log(JSON.parse(JSON.stringify(n,(C,S)=>ln(S)||vn(S)||ae(S)||vt(S)||rt(S)||Bt(S)?S:Object.prototype.toString.call(S))))}catch(C){console.error(C)}}}},CY=["design","readonly"],dA=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&sY(e,r.editorReadOnly),t.set(s),_L(e,s)},yY=(e,t,n,s)=>{if(s!==n.get()){if(!Ne(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?dA(e,n,t,s):e.on("init",()=>dA(e,n,t,s))}},vY=(e,t,n)=>{if(R(CY,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},EY=e=>{const t=Yt("design"),n=Yt({design:{activate:Te,deactivate:Te,editorReadOnly:!1},readonly:{activate:Te,deactivate:Te,editorReadOnly:!0}});return oY(e),uY(e),{isReadOnly:()=>Hr(e),set:s=>yY(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(vY(n.get(),s,o))}}},rh=Q.each,ih=Q.explode,SY={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},mA=Q.makeMap("alt,ctrl,shift,meta,access"),_Y=e=>e in mA,wY=e=>{const t={},n=je.os.isMacOS()||je.os.isiOS();rh(ih(e.toLowerCase(),"+"),r=>{_Y(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=SY[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in mA)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class pA{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(rh(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return rh(ih(Q.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:Q.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=Q.map(ih(t,">"),wY);return r[r.length-1]=Q.extend(r[r.length-1],{func:s,scope:o||this.editor}),Q.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const xY=()=>{const e={},t={},n={},s={},o={},r={},i={},a={},c=(m,p)=>(g,C)=>{m[g.toLowerCase()]={...C,type:p}},f=(m,p)=>s[m.toLowerCase()]=p;return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(t,"menuitem"),addNestedMenuItem:c(t,"nestedmenuitem"),addToggleMenuItem:c(t,"togglemenuitem"),addAutocompleter:c(n,"autocompleter"),addContextMenu:c(o,"contextmenu"),addContextToolbar:c(r,"contexttoolbar"),addContextForm:c(r,"contextform"),addSidebar:c(i,"sidebar"),addView:c(a,"views"),addIcon:f,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i,views:a})}},kY=()=>{const e=xY();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Vr=at.DOM,gA=Q.extend,NY=Q.each;class ef{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,gA(this,cA);const o=this;this.id=t,this.hidden=!1;const r=uG(s.defaultOptions,n);this.options=bY(o,r,n),IO(o);const i=this.options.get;i("deprecation_warnings")&&eW(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const f=Wd(o);f&&(yo.ScriptLoader._setReferrerPolicy(f),at.DOM.styleSheetLoader._setReferrerPolicy(f));const m=nv(o);ee(m)&&at.DOM.styleSheetLoader._setContentCssCors(m),Sn.languageLoad=i("language_load"),Sn.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new ps(jy(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=qd(o),this.hasVisual=wB(o),this.shortcuts=new pA(this),this.editorCommands=new rA(this),XG(this);const p=i("cache_suffix");p&&(je.cacheSuffix=p.replace(/^[\?\&]+/,"")),this.ui={registry:kY(),styleSheetLoader:void 0,show:Te,hide:Te,setEnabled:Te,isEnabled:Ct},this.mode=EY(o),s.dispatch("SetupEditor",{editor:this});const g=kB(o);Ke(g)&&g.call(o,o)}render(){Y7(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Ti(this)}translate(t){return As.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(ee(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:Ct,default:n})),!o.isSet(t)&&!Dt(n)?n:o.get(t)}hasPlugin(t,n){return R(kc(this),t)?n?Bi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Vr.show(t.getContainer()),Vr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Vr.hide(t.getContainer()),Vr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=sd(s)?s.value:s.innerHTML,i=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),i}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const i={...o,content:r};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),r=i.content,sd(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const a=Vr.getParent(n.id,"form");a&&NY(a.elements,c=>c.name===n.id?(c.value=r,!1):!0)}return i.element=o.element=s=null,i.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return Fp(this,t,n)}getContent(t){return H2(this,t)}insertContent(t,n){n&&(t=gA({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Fp(this,this.startContent,{format:"raw"}):Fp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Vr.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Vr.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,i=AB(o);if(Ke(i))return i.call(o,t,s,!0,n);if(!r("convert_urls")||s==="link"||ke(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const a=new ps(t);return a.protocol!=="http"&&a.protocol!=="https"&&a.protocol!==""?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){fG(this,t)}setEditableRoot(t){X7(this,t)}hasEditableRoot(){return Z7(this)}remove(){oW(this)}destroy(t){rW(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const zi=at.DOM,tf=Q.each;let hA=!1,nf,Rn=[];const sf=e=>{const t=e.type;tf(Yo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},bA=e=>{if(e!==hA){const t=at.DOM;e?(t.bind(window,"resize",sf),t.bind(window,"scroll",sf)):(t.unbind(window,"resize",sf),t.unbind(window,"scroll",sf)),hA=e}},CA=e=>{const t=Rn;return Rn=W(Rn,n=>e!==n),Yo.activeEditor===e&&(Yo.activeEditor=Rn.length>0?Rn[0]:null),Yo.focusedEditor===e&&(Yo.focusedEditor=null),t.length!==Rn.length},AY=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(CA(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},TY=document.compatMode!=="CSS1Compat",Yo={...sh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:As,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=ps.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new ps(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new ps(e.baseURL),e.suffix=n,Q$(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&lt(s,(o,r)=>{Sn.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(m,p)=>m.inline&&p.tagName.toLowerCase()in s,r=m=>{let p=m.id;return p||(p=mt(m,"name").filter(g=>!zi.get(g)).getOrThunk(zi.uniqueId),m.setAttribute("id",p)),p},i=m=>{const p=e[m];if(p)return p.apply(t,[])},a=m=>je.browser.isIE()||je.browser.isEdge()?(gu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):TY?(gu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ae(m.selector)?zi.select(m.selector):ee(m.target)?[m.target]:[];let c=m=>{n=m};const f=()=>{let m=0;const p=[];let g;const C=(S,y,_)=>{const k=new ef(S,y,t);p.push(k),k.on("init",()=>{++m===g.length&&c(p)}),k.targetElm=k.targetElm||_,k.render()};zi.unbind(window,"ready",f),i("onpageload"),g=sa(a(e)),Q.each(g,S=>{AY(t.get(S.id))}),g=Q.grep(g,S=>!t.get(S.id)),g.length===0?c([]):tf(g,S=>{o(e,S)?gu("Could not initialize inline editor on invalid inline target element",S):C(r(S),e,S)})};return zi.bind(window,"ready",f),new Promise(m=>{n?m(n):c=p=>{m(p)}})},get(e){return arguments.length===0?Rn.slice(0):ae(e)?me(Rn,t=>t.id===e).getOr(null):vn(e)&&Rn[e]?Rn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&Rn.push(e),bA(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),nf||(nf=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",nf))),e},createEditor(e,t){return this.add(new ef(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=Rn.length-1;s>=0;s--)t.remove(Rn[s]);return}if(ae(e)){tf(zi.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,vt(t.get(n.id))?null:(CA(n)&&t.dispatch("RemoveEditor",{editor:n}),Rn.length===0&&window.removeEventListener("beforeunload",nf),n.remove(),bA(Rn.length>0),n)},execCommand(e,t,n){var s;const o=this,r=ke(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new ef(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{tf(Rn,e=>{e.save()})},addI18n:(e,t)=>{As.add(e,t)},translate:e=>As.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ps(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ps(this.baseURL)}};Yo.setup();const RY=(()=>{const e=Co(),t=r=>({items:r,types:On(r),getType:i=>mt(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),yA=Math.min,Vi=Math.max,of=Math.round,vA=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=c),f[1]==="r"&&(s+=a),f[0]==="c"&&(o+=of(c/2)),f[1]==="c"&&(s+=of(a/2)),f[3]==="b"&&(o-=i),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=of(i/2)),f[4]==="c"&&(s-=of(r/2)),Wi(s,o,r,i)},PY=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=vA(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},DY=(e,t,n)=>Wi(e.x-t,e.y-n,e.w+t*2,e.h+n*2),OY=(e,t)=>{const n=Vi(e.x,t.x),s=Vi(e.y,t.y),o=yA(e.x+e.w,t.x+t.w),r=yA(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Wi(n,s,o-n,r-s)},BY=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,f=Vi(0,t.x-s),m=Vi(0,t.y-o),p=Vi(0,r-a),g=Vi(0,i-c);return s+=f,o+=m,n&&(r+=f,i+=m,s-=p,o-=g),r-=p,i-=g,Wi(s,o,r-s,i-o)},Wi=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),IY={inflate:DY,relativePosition:vA,findBestRelativePosition:PY,intersect:OY,clamp:BY,create:Wi,fromClientRect:e=>Wi(e.left,e.top,e.width,e.height)},LY=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...m)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,m))},i=r(e),a=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,f),n))},resolve:i,reject:a}},$Y=(()=>{const e={},t={},n={};return{load:(c,f)=>{const m=`Script at URL "${f}" failed to load`,p=`Script at URL "${f}" did not call \`tinymce.Resource.add('${c}', data)\` within 1 second`;if(e[c]!==void 0)return e[c];{const g=new Promise((C,S)=>{const y=LY(C,S);t[c]=y.resolve,yo.ScriptLoader.loadScript(f).then(()=>y.start(p),()=>y.reject(m))});return e[c]=g,g}},add:(c,f)=>{t[c]!==void 0&&(t[c](f),delete t[c]),e[c]=Promise.resolve(f),n[c]=f},has:c=>c in n,get:c=>n[c],unload:c=>{delete e[c],delete n[c]}}})(),FY=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Nl;try{const e="__storage_test__";Nl=window.localStorage,Nl.setItem(e,e),Nl.removeItem(e)}catch{Nl=FY()}var MY=Nl;const UY={geom:{Rect:IY},util:{Delay:Jn,Tools:Q,VK:le,URI:ps,EventDispatcher:nh,Observable:sh,I18n:As,LocalStorage:MY,ImageUploader:$W},dom:{EventUtils:yr,TreeWalker:Gt,TextSeeker:Sr,DOMUtils:at,ScriptLoader:yo,RangeUtils:Dr,Serializer:I_,StyleSheetLoader:NC,ControlSelection:uE,BookmarkManager:Ga,Selection:B_,Event:yr.Event},html:{Styles:Ed,Entities:Cr,Node:_n,Schema:Lo,DomParser:Di,Writer:ZE,Serializer:Vo},Env:je,AddOnManager:Sn,Annotator:tE,Formatter:X_,UndoManager:Q_,EditorCommands:rA,WindowManager:z_,NotificationManager:H_,EditorObservable:cA,Shortcuts:pA,Editor:ef,FocusManager:OE,EditorManager:Yo,DOM:at.DOM,ScriptLoader:yo.ScriptLoader,PluginManager:Bi,ThemeManager:$r,ModelManager:Oi,IconManager:mu,Resource:$Y,FakeClipboard:RY,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},EA=Q.extend(Yo,UY),HY=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(EA),HY(EA)})()})(gR);var hQ=gR.exports;const Sh=gQ(hQ),bQ={class:"vue-tinymce-comp"},_h=$T({__name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E7.3.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,{emit:u}){const d=l,h=u,v=NX(null);let E=null,x={};function O(){if(v.value){x=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,promotion:!0,indentation:"2px",font_size_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl"},d.config);const Be=d.baseUrl,tt="zh_CN";if(x.language==="en_US"?(delete x.language,delete x.language_url):(x.language||(x.language=tt),!x.language_url&&x.language===tt&&(x.language_url=`${Be}/@panhezeng/vue-tinymce@latest/dist/langs/${x.language}.js`),!x.font_family_formats&&x.language===tt&&(x.font_family_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(x.font_family_formats=`微软雅黑="Microsoft YaHei";黑体=SimHei;宋体=SimSun;仿宋=FangSong;楷体=KaiTi;${x.font_family_formats||""}`,x.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(x.font_family_formats=`黑体=STHeiti;宋体=STSong;仿宋=STFangsong;楷体=STKaiti;${x.font_family_formats||""}`,x.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(x.font_family_formats=`黑体="Source Han Sans SC";宋体="Source Han Serif SC";${x.font_family_formats||""}`,x.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),x.external_plugins||(x.external_plugins={}),!x.external_plugins.textindentoutdent){const Ze=Object.keys(x);for(let $t=Ze.length-1;$t>=0;$t--){const nt=Ze[$t];if(nt&&typeof nt=="string"&&nt.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(x[nt]))){x.language===tt&&(x.external_plugins.textindentoutdentzhcn=`${Be}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),x.external_plugins.textindentoutdent=`${Be}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}x.target=v.value,x.init_instance_callback=Ze=>{v.value&&(E=Ze,U(),E.on(d.updateEvent,ie),typeof d.config.init_instance_callback=="function"&&d.config.init_instance_callback(E)),Se()}}}function U(){gf().then(()=>{v.value&&E&&E.getContent()!==d.modelValue&&E.setContent(d.modelValue)})}function ie(){gf().then(()=>{if(v.value&&E){const Be=E.getContent();h("update:modelValue",Be),h("content-change",Be)}})}function j(){try{v.value&&E&&(E.plugins.autosave&&E.plugins.autosave.removeDraft(),Sh.PluginManager.remove("autosave"),E.remove(),E.destroy(),E=null)}catch{return}}function oe(){gf().then(()=>{v.value&&(j(),O(),Sh.init(x))})}$l(()=>d.modelValue,U),$l(()=>d.config,()=>{oe()},{deep:!0});function Se(){const Be=document.querySelector(".tox-promotion");Be&&(Be.style.display="none")}return HT(()=>{Sh.EditorManager.baseURL=d.url,oe()}),zT(()=>{j()}),(Be,tt)=>(Sf(),lR("div",bQ,[Es("textarea",{ref_key:"editorElement",ref:v},null,512)]))}}),hR=Object.assign(_h,{install:l=>{l.component(_h.name||"",_h)}}),CQ=["innerHTML"],yQ=$T({__name:"App",setup(l){const u=Af({content:"init content",show:!0,locale:""}),d=mR(()=>{let v={};return u.locale==="en"&&(v={language:"en_US"}),v});function h(){u.locale?u.locale="":u.locale="en"}return(v,E)=>(Sf(),lR(ro,null,[E[2]||(E[2]=Es("h1",null,"VueTinymce example",-1)),Es("button",{onClick:E[0]||(E[0]=x=>u.show=!u.show)}," 点击加载移除编辑器，测试初始化和销毁：：："+pT(u.show?"销毁":"加载"),1),E[3]||(E[3]=Es("br",null,null,-1)),E[4]||(E[4]=Es("br",null,null,-1)),Es("button",{onClick:h},"点击切换语言，测试更新config"),E[5]||(E[5]=Es("br",null,null,-1)),E[6]||(E[6]=Es("br",null,null,-1)),u.show?(Sf(),cR(RT(hR),{key:0,modelValue:u.content,"onUpdate:modelValue":E[1]||(E[1]=x=>u.content=x),config:d.value},null,8,["modelValue","config"])):DZ("",!0),E[7]||(E[7]=Es("h2",null,"output",-1)),Es("div",{innerHTML:u.content},null,8,CQ)],64))}}),bR=dQ(yQ);bR.use(hR);bR.mount("#app");
