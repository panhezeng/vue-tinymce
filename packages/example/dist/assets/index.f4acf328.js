(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))h(C);new MutationObserver(C=>{for(const v of C)if(v.type==="childList")for(const k of v.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&h(k)}).observe(document,{childList:!0,subtree:!0});function m(C){const v={};return C.integrity&&(v.integrity=C.integrity),C.referrerpolicy&&(v.referrerPolicy=C.referrerpolicy),C.crossorigin==="use-credentials"?v.credentials="include":C.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(C){if(C.ep)return;C.ep=!0;const v=m(C);fetch(C.href,v)}})();function Og(l,f){const m=Object.create(null),h=l.split(",");for(let C=0;C<h.length;C++)m[h[C]]=!0;return f?C=>!!m[C.toLowerCase()]:C=>!!m[C]}function Dg(l){if(Ke(l)){const f={};for(let m=0;m<l.length;m++){const h=l[m],C=ln(h)?H9(h):Dg(h);if(C)for(const v in C)f[v]=C[v]}return f}else{if(ln(l))return l;if(Ut(l))return l}}const M9=/;(?![^(]*\))/g,U9=/:([^]+)/,z9=/\/\*.*?\*\//gs;function H9(l){const f={};return l.replace(z9,"").split(M9).forEach(m=>{if(m){const h=m.split(U9);h.length>1&&(f[h[0].trim()]=h[1].trim())}}),f}function Bg(l){let f="";if(ln(l))f=l;else if(Ke(l))for(let m=0;m<l.length;m++){const h=Bg(l[m]);h&&(f+=h+" ")}else if(Ut(l))for(const m in l)l[m]&&(f+=m+" ");return f.trim()}const W9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",V9=Og(W9);function Sk(l){return!!l||l===""}const j9=l=>ln(l)?l:l==null?"":Ke(l)||Ut(l)&&(l.toString===Nk||!Ze(l.toString))?JSON.stringify(l,wk,2):String(l),wk=(l,f)=>f&&f.__v_isRef?wk(l,f.value):Fi(f)?{[`Map(${f.size})`]:[...f.entries()].reduce((m,[h,C])=>(m[`${h} =>`]=C,m),{})}:xk(f)?{[`Set(${f.size})`]:[...f.values()]}:Ut(f)&&!Ke(f)&&!Ak(f)?String(f):f,Ft={},Ii=[],Ds=()=>{},q9=()=>!1,K9=/^on[^a-z]/,qu=l=>K9.test(l),Ig=l=>l.startsWith("onUpdate:"),kn=Object.assign,Fg=(l,f)=>{const m=l.indexOf(f);m>-1&&l.splice(m,1)},G9=Object.prototype.hasOwnProperty,ut=(l,f)=>G9.call(l,f),Ke=Array.isArray,Fi=l=>Ku(l)==="[object Map]",xk=l=>Ku(l)==="[object Set]",Ze=l=>typeof l=="function",ln=l=>typeof l=="string",Lg=l=>typeof l=="symbol",Ut=l=>l!==null&&typeof l=="object",kk=l=>Ut(l)&&Ze(l.then)&&Ze(l.catch),Nk=Object.prototype.toString,Ku=l=>Nk.call(l),Y9=l=>Ku(l).slice(8,-1),Ak=l=>Ku(l)==="[object Object]",$g=l=>ln(l)&&l!=="NaN"&&l[0]!=="-"&&""+parseInt(l,10)===l,Fu=Og(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gu=l=>{const f=Object.create(null);return m=>f[m]||(f[m]=l(m))},X9=/-(\w)/g,Mi=Gu(l=>l.replace(X9,(f,m)=>m?m.toUpperCase():"")),Q9=/\B([A-Z])/g,Hi=Gu(l=>l.replace(Q9,"-$1").toLowerCase()),Tk=Gu(l=>l.charAt(0).toUpperCase()+l.slice(1)),lg=Gu(l=>l?`on${Tk(l)}`:""),ml=(l,f)=>!Object.is(l,f),cg=(l,f)=>{for(let m=0;m<l.length;m++)l[m](f)},zu=(l,f,m)=>{Object.defineProperty(l,f,{configurable:!0,enumerable:!1,value:m})},Rk=l=>{const f=parseFloat(l);return isNaN(f)?l:f};let Xx;const Z9=()=>Xx||(Xx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let to;class J9{constructor(f=!1){this.detached=f,this.active=!0,this.effects=[],this.cleanups=[],this.parent=to,!f&&to&&(this.index=(to.scopes||(to.scopes=[])).push(this)-1)}run(f){if(this.active){const m=to;try{return to=this,f()}finally{to=m}}}on(){to=this}off(){to=this.parent}stop(f){if(this.active){let m,h;for(m=0,h=this.effects.length;m<h;m++)this.effects[m].stop();for(m=0,h=this.cleanups.length;m<h;m++)this.cleanups[m]();if(this.scopes)for(m=0,h=this.scopes.length;m<h;m++)this.scopes[m].stop(!0);if(!this.detached&&this.parent&&!f){const C=this.parent.scopes.pop();C&&C!==this&&(this.parent.scopes[this.index]=C,C.index=this.index)}this.parent=void 0,this.active=!1}}}function eq(l,f=to){f&&f.active&&f.effects.push(l)}const Mg=l=>{const f=new Set(l);return f.w=0,f.n=0,f},Pk=l=>(l.w&Xo)>0,Ok=l=>(l.n&Xo)>0,tq=({deps:l})=>{if(l.length)for(let f=0;f<l.length;f++)l[f].w|=Xo},nq=l=>{const{deps:f}=l;if(f.length){let m=0;for(let h=0;h<f.length;h++){const C=f[h];Pk(C)&&!Ok(C)?C.delete(l):f[m++]=C,C.w&=~Xo,C.n&=~Xo}f.length=m}},Cg=new WeakMap;let cl=0,Xo=1;const vg=30;let Rs;const Wr=Symbol(""),yg=Symbol("");class Ug{constructor(f,m=null,h){this.fn=f,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,eq(this,h)}run(){if(!this.active)return this.fn();let f=Rs,m=Go;for(;f;){if(f===this)return;f=f.parent}try{return this.parent=Rs,Rs=this,Go=!0,Xo=1<<++cl,cl<=vg?tq(this):Qx(this),this.fn()}finally{cl<=vg&&nq(this),Xo=1<<--cl,Rs=this.parent,Go=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Rs===this?this.deferStop=!0:this.active&&(Qx(this),this.onStop&&this.onStop(),this.active=!1)}}function Qx(l){const{deps:f}=l;if(f.length){for(let m=0;m<f.length;m++)f[m].delete(l);f.length=0}}let Go=!0;const Dk=[];function Wi(){Dk.push(Go),Go=!1}function Vi(){const l=Dk.pop();Go=l===void 0?!0:l}function ts(l,f,m){if(Go&&Rs){let h=Cg.get(l);h||Cg.set(l,h=new Map);let C=h.get(m);C||h.set(m,C=Mg()),Bk(C)}}function Bk(l,f){let m=!1;cl<=vg?Ok(l)||(l.n|=Xo,m=!Pk(l)):m=!l.has(Rs),m&&(l.add(Rs),Rs.deps.push(l))}function Eo(l,f,m,h,C,v){const k=Cg.get(l);if(!k)return;let P=[];if(f==="clear")P=[...k.values()];else if(m==="length"&&Ke(l)){const $=Rk(h);k.forEach((J,re)=>{(re==="length"||re>=$)&&P.push(J)})}else switch(m!==void 0&&P.push(k.get(m)),f){case"add":Ke(l)?$g(m)&&P.push(k.get("length")):(P.push(k.get(Wr)),Fi(l)&&P.push(k.get(yg)));break;case"delete":Ke(l)||(P.push(k.get(Wr)),Fi(l)&&P.push(k.get(yg)));break;case"set":Fi(l)&&P.push(k.get(Wr));break}if(P.length===1)P[0]&&Eg(P[0]);else{const $=[];for(const J of P)J&&$.push(...J);Eg(Mg($))}}function Eg(l,f){const m=Ke(l)?l:[...l];for(const h of m)h.computed&&Zx(h);for(const h of m)h.computed||Zx(h)}function Zx(l,f){(l!==Rs||l.allowRecurse)&&(l.scheduler?l.scheduler():l.run())}const sq=Og("__proto__,__v_isRef,__isVue"),Ik=new Set(Object.getOwnPropertyNames(Symbol).filter(l=>l!=="arguments"&&l!=="caller").map(l=>Symbol[l]).filter(Lg)),oq=zg(),rq=zg(!1,!0),iq=zg(!0),Jx=aq();function aq(){const l={};return["includes","indexOf","lastIndexOf"].forEach(f=>{l[f]=function(...m){const h=gt(this);for(let v=0,k=this.length;v<k;v++)ts(h,"get",v+"");const C=h[f](...m);return C===-1||C===!1?h[f](...m.map(gt)):C}}),["push","pop","shift","unshift","splice"].forEach(f=>{l[f]=function(...m){Wi();const h=gt(this)[f].apply(this,m);return Vi(),h}}),l}function zg(l=!1,f=!1){return function(h,C,v){if(C==="__v_isReactive")return!l;if(C==="__v_isReadonly")return l;if(C==="__v_isShallow")return f;if(C==="__v_raw"&&v===(l?f?Sq:Uk:f?Mk:$k).get(h))return h;const k=Ke(h);if(!l&&k&&ut(Jx,C))return Reflect.get(Jx,C,v);const P=Reflect.get(h,C,v);return(Lg(C)?Ik.has(C):sq(C))||(l||ts(h,"get",C),f)?P:xn(P)?k&&$g(C)?P:P.value:Ut(P)?l?zk(P):Xu(P):P}}const lq=Fk(),cq=Fk(!0);function Fk(l=!1){return function(m,h,C,v){let k=m[h];if(Ui(k)&&xn(k)&&!xn(C))return!1;if(!l&&(!Hu(C)&&!Ui(C)&&(k=gt(k),C=gt(C)),!Ke(m)&&xn(k)&&!xn(C)))return k.value=C,!0;const P=Ke(m)&&$g(h)?Number(h)<m.length:ut(m,h),$=Reflect.set(m,h,C,v);return m===gt(v)&&(P?ml(C,k)&&Eo(m,"set",h,C):Eo(m,"add",h,C)),$}}function uq(l,f){const m=ut(l,f);l[f];const h=Reflect.deleteProperty(l,f);return h&&m&&Eo(l,"delete",f,void 0),h}function fq(l,f){const m=Reflect.has(l,f);return(!Lg(f)||!Ik.has(f))&&ts(l,"has",f),m}function dq(l){return ts(l,"iterate",Ke(l)?"length":Wr),Reflect.ownKeys(l)}const Lk={get:oq,set:lq,deleteProperty:uq,has:fq,ownKeys:dq},mq={get:iq,set(l,f){return!0},deleteProperty(l,f){return!0}},pq=kn({},Lk,{get:rq,set:cq}),Hg=l=>l,Yu=l=>Reflect.getPrototypeOf(l);function Ru(l,f,m=!1,h=!1){l=l.__v_raw;const C=gt(l),v=gt(f);m||(f!==v&&ts(C,"get",f),ts(C,"get",v));const{has:k}=Yu(C),P=h?Hg:m?jg:pl;if(k.call(C,f))return P(l.get(f));if(k.call(C,v))return P(l.get(v));l!==C&&l.get(f)}function Pu(l,f=!1){const m=this.__v_raw,h=gt(m),C=gt(l);return f||(l!==C&&ts(h,"has",l),ts(h,"has",C)),l===C?m.has(l):m.has(l)||m.has(C)}function Ou(l,f=!1){return l=l.__v_raw,!f&&ts(gt(l),"iterate",Wr),Reflect.get(l,"size",l)}function ek(l){l=gt(l);const f=gt(this);return Yu(f).has.call(f,l)||(f.add(l),Eo(f,"add",l,l)),this}function tk(l,f){f=gt(f);const m=gt(this),{has:h,get:C}=Yu(m);let v=h.call(m,l);v||(l=gt(l),v=h.call(m,l));const k=C.call(m,l);return m.set(l,f),v?ml(f,k)&&Eo(m,"set",l,f):Eo(m,"add",l,f),this}function nk(l){const f=gt(this),{has:m,get:h}=Yu(f);let C=m.call(f,l);C||(l=gt(l),C=m.call(f,l)),h&&h.call(f,l);const v=f.delete(l);return C&&Eo(f,"delete",l,void 0),v}function sk(){const l=gt(this),f=l.size!==0,m=l.clear();return f&&Eo(l,"clear",void 0,void 0),m}function Du(l,f){return function(h,C){const v=this,k=v.__v_raw,P=gt(k),$=f?Hg:l?jg:pl;return!l&&ts(P,"iterate",Wr),k.forEach((J,re)=>h.call(C,$(J),$(re),v))}}function Bu(l,f,m){return function(...h){const C=this.__v_raw,v=gt(C),k=Fi(v),P=l==="entries"||l===Symbol.iterator&&k,$=l==="keys"&&k,J=C[l](...h),re=m?Hg:f?jg:pl;return!f&&ts(v,"iterate",$?yg:Wr),{next(){const{value:Ce,done:ge}=J.next();return ge?{value:Ce,done:ge}:{value:P?[re(Ce[0]),re(Ce[1])]:re(Ce),done:ge}},[Symbol.iterator](){return this}}}}function qo(l){return function(...f){return l==="delete"?!1:this}}function gq(){const l={get(v){return Ru(this,v)},get size(){return Ou(this)},has:Pu,add:ek,set:tk,delete:nk,clear:sk,forEach:Du(!1,!1)},f={get(v){return Ru(this,v,!1,!0)},get size(){return Ou(this)},has:Pu,add:ek,set:tk,delete:nk,clear:sk,forEach:Du(!1,!0)},m={get(v){return Ru(this,v,!0)},get size(){return Ou(this,!0)},has(v){return Pu.call(this,v,!0)},add:qo("add"),set:qo("set"),delete:qo("delete"),clear:qo("clear"),forEach:Du(!0,!1)},h={get(v){return Ru(this,v,!0,!0)},get size(){return Ou(this,!0)},has(v){return Pu.call(this,v,!0)},add:qo("add"),set:qo("set"),delete:qo("delete"),clear:qo("clear"),forEach:Du(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{l[v]=Bu(v,!1,!1),m[v]=Bu(v,!0,!1),f[v]=Bu(v,!1,!0),h[v]=Bu(v,!0,!0)}),[l,m,f,h]}const[hq,bq,Cq,vq]=gq();function Wg(l,f){const m=f?l?vq:Cq:l?bq:hq;return(h,C,v)=>C==="__v_isReactive"?!l:C==="__v_isReadonly"?l:C==="__v_raw"?h:Reflect.get(ut(m,C)&&C in h?m:h,C,v)}const yq={get:Wg(!1,!1)},Eq={get:Wg(!1,!0)},_q={get:Wg(!0,!1)},$k=new WeakMap,Mk=new WeakMap,Uk=new WeakMap,Sq=new WeakMap;function wq(l){switch(l){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xq(l){return l.__v_skip||!Object.isExtensible(l)?0:wq(Y9(l))}function Xu(l){return Ui(l)?l:Vg(l,!1,Lk,yq,$k)}function kq(l){return Vg(l,!1,pq,Eq,Mk)}function zk(l){return Vg(l,!0,mq,_q,Uk)}function Vg(l,f,m,h,C){if(!Ut(l)||l.__v_raw&&!(f&&l.__v_isReactive))return l;const v=C.get(l);if(v)return v;const k=xq(l);if(k===0)return l;const P=new Proxy(l,k===2?h:m);return C.set(l,P),P}function Li(l){return Ui(l)?Li(l.__v_raw):!!(l&&l.__v_isReactive)}function Ui(l){return!!(l&&l.__v_isReadonly)}function Hu(l){return!!(l&&l.__v_isShallow)}function Hk(l){return Li(l)||Ui(l)}function gt(l){const f=l&&l.__v_raw;return f?gt(f):l}function Wk(l){return zu(l,"__v_skip",!0),l}const pl=l=>Ut(l)?Xu(l):l,jg=l=>Ut(l)?zk(l):l;function Vk(l){Go&&Rs&&(l=gt(l),Bk(l.dep||(l.dep=Mg())))}function jk(l,f){l=gt(l),l.dep&&Eg(l.dep)}function xn(l){return!!(l&&l.__v_isRef===!0)}function Nq(l){return Aq(l,!1)}function Aq(l,f){return xn(l)?l:new Tq(l,f)}class Tq{constructor(f,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?f:gt(f),this._value=m?f:pl(f)}get value(){return Vk(this),this._value}set value(f){const m=this.__v_isShallow||Hu(f)||Ui(f);f=m?f:gt(f),ml(f,this._rawValue)&&(this._rawValue=f,this._value=m?f:pl(f),jk(this))}}function _g(l){return xn(l)?l.value:l}const Rq={get:(l,f,m)=>_g(Reflect.get(l,f,m)),set:(l,f,m,h)=>{const C=l[f];return xn(C)&&!xn(m)?(C.value=m,!0):Reflect.set(l,f,m,h)}};function qk(l){return Li(l)?l:new Proxy(l,Rq)}var Kk;class Pq{constructor(f,m,h,C){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this[Kk]=!1,this._dirty=!0,this.effect=new Ug(f,()=>{this._dirty||(this._dirty=!0,jk(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!C,this.__v_isReadonly=h}get value(){const f=gt(this);return Vk(f),(f._dirty||!f._cacheable)&&(f._dirty=!1,f._value=f.effect.run()),f._value}set value(f){this._setter(f)}}Kk="__v_isReadonly";function Oq(l,f,m=!1){let h,C;const v=Ze(l);return v?(h=l,C=Ds):(h=l.get,C=l.set),new Pq(h,C,v||!C,m)}function Yo(l,f,m,h){let C;try{C=h?l(...h):l()}catch(v){Qu(v,f,m)}return C}function us(l,f,m,h){if(Ze(l)){const v=Yo(l,f,m,h);return v&&kk(v)&&v.catch(k=>{Qu(k,f,m)}),v}const C=[];for(let v=0;v<l.length;v++)C.push(us(l[v],f,m,h));return C}function Qu(l,f,m,h=!0){const C=f?f.vnode:null;if(f){let v=f.parent;const k=f.proxy,P=m;for(;v;){const J=v.ec;if(J){for(let re=0;re<J.length;re++)if(J[re](l,k,P)===!1)return}v=v.parent}const $=f.appContext.config.errorHandler;if($){Yo($,null,10,[l,k,P]);return}}Dq(l,m,C,h)}function Dq(l,f,m,h=!0){console.error(l)}let gl=!1,Sg=!1;const wn=[];let so=0;const $i=[];let vo=null,Ur=0;const Gk=Promise.resolve();let qg=null;function Lu(l){const f=qg||Gk;return l?f.then(this?l.bind(this):l):f}function Bq(l){let f=so+1,m=wn.length;for(;f<m;){const h=f+m>>>1;hl(wn[h])<l?f=h+1:m=h}return f}function Kg(l){(!wn.length||!wn.includes(l,gl&&l.allowRecurse?so+1:so))&&(l.id==null?wn.push(l):wn.splice(Bq(l.id),0,l),Yk())}function Yk(){!gl&&!Sg&&(Sg=!0,qg=Gk.then(Qk))}function Iq(l){const f=wn.indexOf(l);f>so&&wn.splice(f,1)}function Fq(l){Ke(l)?$i.push(...l):(!vo||!vo.includes(l,l.allowRecurse?Ur+1:Ur))&&$i.push(l),Yk()}function ok(l,f=gl?so+1:0){for(;f<wn.length;f++){const m=wn[f];m&&m.pre&&(wn.splice(f,1),f--,m())}}function Xk(l){if($i.length){const f=[...new Set($i)];if($i.length=0,vo){vo.push(...f);return}for(vo=f,vo.sort((m,h)=>hl(m)-hl(h)),Ur=0;Ur<vo.length;Ur++)vo[Ur]();vo=null,Ur=0}}const hl=l=>l.id==null?1/0:l.id,Lq=(l,f)=>{const m=hl(l)-hl(f);if(m===0){if(l.pre&&!f.pre)return-1;if(f.pre&&!l.pre)return 1}return m};function Qk(l){Sg=!1,gl=!0,wn.sort(Lq);const f=Ds;try{for(so=0;so<wn.length;so++){const m=wn[so];m&&m.active!==!1&&Yo(m,null,14)}}finally{so=0,wn.length=0,Xk(),gl=!1,qg=null,(wn.length||$i.length)&&Qk()}}function $q(l,f,...m){if(l.isUnmounted)return;const h=l.vnode.props||Ft;let C=m;const v=f.startsWith("update:"),k=v&&f.slice(7);if(k&&k in h){const re=`${k==="modelValue"?"model":k}Modifiers`,{number:Ce,trim:ge}=h[re]||Ft;ge&&(C=m.map(Le=>ln(Le)?Le.trim():Le)),Ce&&(C=m.map(Rk))}let P,$=h[P=lg(f)]||h[P=lg(Mi(f))];!$&&v&&($=h[P=lg(Hi(f))]),$&&us($,l,6,C);const J=h[P+"Once"];if(J){if(!l.emitted)l.emitted={};else if(l.emitted[P])return;l.emitted[P]=!0,us(J,l,6,C)}}function Zk(l,f,m=!1){const h=f.emitsCache,C=h.get(l);if(C!==void 0)return C;const v=l.emits;let k={},P=!1;if(!Ze(l)){const $=J=>{const re=Zk(J,f,!0);re&&(P=!0,kn(k,re))};!m&&f.mixins.length&&f.mixins.forEach($),l.extends&&$(l.extends),l.mixins&&l.mixins.forEach($)}return!v&&!P?(Ut(l)&&h.set(l,null),null):(Ke(v)?v.forEach($=>k[$]=null):kn(k,v),Ut(l)&&h.set(l,k),k)}function Zu(l,f){return!l||!qu(f)?!1:(f=f.slice(2).replace(/Once$/,""),ut(l,f[0].toLowerCase()+f.slice(1))||ut(l,Hi(f))||ut(l,f))}let Ps=null,Jk=null;function Wu(l){const f=Ps;return Ps=l,Jk=l&&l.type.__scopeId||null,f}function Mq(l,f=Ps,m){if(!f||l._n)return l;const h=(...C)=>{h._d&&mk(-1);const v=Wu(f);let k;try{k=l(...C)}finally{Wu(v),h._d&&mk(1)}return k};return h._n=!0,h._c=!0,h._d=!0,h}function ug(l){const{type:f,vnode:m,proxy:h,withProxy:C,props:v,propsOptions:[k],slots:P,attrs:$,emit:J,render:re,renderCache:Ce,data:ge,setupState:Le,ctx:lt,inheritAttrs:Oe}=l;let yt,it;const cn=Wu(l);try{if(m.shapeFlag&4){const Ge=C||h;yt=no(re.call(Ge,Ge,Ce,v,Le,ge,lt)),it=$}else{const Ge=f;yt=no(Ge.length>1?Ge(v,{attrs:$,slots:P,emit:J}):Ge(v,null)),it=f.props?$:Uq($)}}catch(Ge){dl.length=0,Qu(Ge,l,1),yt=yo(Bs)}let ne=yt;if(it&&Oe!==!1){const Ge=Object.keys(it),{shapeFlag:Zt}=ne;Ge.length&&Zt&7&&(k&&Ge.some(Ig)&&(it=zq(it,k)),ne=Qo(ne,it))}return m.dirs&&(ne=Qo(ne),ne.dirs=ne.dirs?ne.dirs.concat(m.dirs):m.dirs),m.transition&&(ne.transition=m.transition),yt=ne,Wu(cn),yt}const Uq=l=>{let f;for(const m in l)(m==="class"||m==="style"||qu(m))&&((f||(f={}))[m]=l[m]);return f},zq=(l,f)=>{const m={};for(const h in l)(!Ig(h)||!(h.slice(9)in f))&&(m[h]=l[h]);return m};function Hq(l,f,m){const{props:h,children:C,component:v}=l,{props:k,children:P,patchFlag:$}=f,J=v.emitsOptions;if(f.dirs||f.transition)return!0;if(m&&$>=0){if($&1024)return!0;if($&16)return h?rk(h,k,J):!!k;if($&8){const re=f.dynamicProps;for(let Ce=0;Ce<re.length;Ce++){const ge=re[Ce];if(k[ge]!==h[ge]&&!Zu(J,ge))return!0}}}else return(C||P)&&(!P||!P.$stable)?!0:h===k?!1:h?k?rk(h,k,J):!0:!!k;return!1}function rk(l,f,m){const h=Object.keys(f);if(h.length!==Object.keys(l).length)return!0;for(let C=0;C<h.length;C++){const v=h[C];if(f[v]!==l[v]&&!Zu(m,v))return!0}return!1}function Wq({vnode:l,parent:f},m){for(;f&&f.subTree===l;)(l=f.vnode).el=m,f=f.parent}const Vq=l=>l.__isSuspense;function jq(l,f){f&&f.pendingBranch?Ke(l)?f.effects.push(...l):f.effects.push(l):Fq(l)}function qq(l,f){if(gn){let m=gn.provides;const h=gn.parent&&gn.parent.provides;h===m&&(m=gn.provides=Object.create(h)),m[l]=f}}function $u(l,f,m=!1){const h=gn||Ps;if(h){const C=h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides;if(C&&l in C)return C[l];if(arguments.length>1)return m&&Ze(f)?f.call(h.proxy):f}}const Iu={};function ul(l,f,m){return eN(l,f,m)}function eN(l,f,{immediate:m,deep:h,flush:C,onTrack:v,onTrigger:k}=Ft){const P=gn;let $,J=!1,re=!1;if(xn(l)?($=()=>l.value,J=Hu(l)):Li(l)?($=()=>l,h=!0):Ke(l)?(re=!0,J=l.some(ne=>Li(ne)||Hu(ne)),$=()=>l.map(ne=>{if(xn(ne))return ne.value;if(Li(ne))return Bi(ne);if(Ze(ne))return Yo(ne,P,2)})):Ze(l)?f?$=()=>Yo(l,P,2):$=()=>{if(!(P&&P.isUnmounted))return Ce&&Ce(),us(l,P,3,[ge])}:$=Ds,f&&h){const ne=$;$=()=>Bi(ne())}let Ce,ge=ne=>{Ce=it.onStop=()=>{Yo(ne,P,4)}},Le;if(Cl)if(ge=Ds,f?m&&us(f,P,3,[$(),re?[]:void 0,ge]):$(),C==="sync"){const ne=HK();Le=ne.__watcherHandles||(ne.__watcherHandles=[])}else return Ds;let lt=re?new Array(l.length).fill(Iu):Iu;const Oe=()=>{if(!!it.active)if(f){const ne=it.run();(h||J||(re?ne.some((Ge,Zt)=>ml(Ge,lt[Zt])):ml(ne,lt)))&&(Ce&&Ce(),us(f,P,3,[ne,lt===Iu?void 0:re&&lt[0]===Iu?[]:lt,ge]),lt=ne)}else it.run()};Oe.allowRecurse=!!f;let yt;C==="sync"?yt=Oe:C==="post"?yt=()=>Mn(Oe,P&&P.suspense):(Oe.pre=!0,P&&(Oe.id=P.uid),yt=()=>Kg(Oe));const it=new Ug($,yt);f?m?Oe():lt=it.run():C==="post"?Mn(it.run.bind(it),P&&P.suspense):it.run();const cn=()=>{it.stop(),P&&P.scope&&Fg(P.scope.effects,it)};return Le&&Le.push(cn),cn}function Kq(l,f,m){const h=this.proxy,C=ln(l)?l.includes(".")?tN(h,l):()=>h[l]:l.bind(h,h);let v;Ze(f)?v=f:(v=f.handler,m=f);const k=gn;zi(this);const P=eN(C,v.bind(h),m);return k?zi(k):Vr(),P}function tN(l,f){const m=f.split(".");return()=>{let h=l;for(let C=0;C<m.length&&h;C++)h=h[m[C]];return h}}function Bi(l,f){if(!Ut(l)||l.__v_skip||(f=f||new Set,f.has(l)))return l;if(f.add(l),xn(l))Bi(l.value,f);else if(Ke(l))for(let m=0;m<l.length;m++)Bi(l[m],f);else if(xk(l)||Fi(l))l.forEach(m=>{Bi(m,f)});else if(Ak(l))for(const m in l)Bi(l[m],f);return l}function Gq(){const l={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gg(()=>{l.isMounted=!0}),Yg(()=>{l.isUnmounting=!0}),l}const cs=[Function,Array],Yq={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cs,onEnter:cs,onAfterEnter:cs,onEnterCancelled:cs,onBeforeLeave:cs,onLeave:cs,onAfterLeave:cs,onLeaveCancelled:cs,onBeforeAppear:cs,onAppear:cs,onAfterAppear:cs,onAppearCancelled:cs},setup(l,{slots:f}){const m=IK(),h=Gq();let C;return()=>{const v=f.default&&sN(f.default(),!0);if(!v||!v.length)return;let k=v[0];if(v.length>1){for(const Oe of v)if(Oe.type!==Bs){k=Oe;break}}const P=gt(l),{mode:$}=P;if(h.isLeaving)return fg(k);const J=ik(k);if(!J)return fg(k);const re=wg(J,P,h,m);xg(J,re);const Ce=m.subTree,ge=Ce&&ik(Ce);let Le=!1;const{getTransitionKey:lt}=J.type;if(lt){const Oe=lt();C===void 0?C=Oe:Oe!==C&&(C=Oe,Le=!0)}if(ge&&ge.type!==Bs&&(!zr(J,ge)||Le)){const Oe=wg(ge,P,h,m);if(xg(ge,Oe),$==="out-in")return h.isLeaving=!0,Oe.afterLeave=()=>{h.isLeaving=!1,m.update.active!==!1&&m.update()},fg(k);$==="in-out"&&J.type!==Bs&&(Oe.delayLeave=(yt,it,cn)=>{const ne=nN(h,ge);ne[String(ge.key)]=ge,yt._leaveCb=()=>{it(),yt._leaveCb=void 0,delete re.delayedLeave},re.delayedLeave=cn})}return k}}},Xq=Yq;function nN(l,f){const{leavingVNodes:m}=l;let h=m.get(f.type);return h||(h=Object.create(null),m.set(f.type,h)),h}function wg(l,f,m,h){const{appear:C,mode:v,persisted:k=!1,onBeforeEnter:P,onEnter:$,onAfterEnter:J,onEnterCancelled:re,onBeforeLeave:Ce,onLeave:ge,onAfterLeave:Le,onLeaveCancelled:lt,onBeforeAppear:Oe,onAppear:yt,onAfterAppear:it,onAppearCancelled:cn}=f,ne=String(l.key),Ge=nN(m,l),Zt=(je,at)=>{je&&us(je,h,9,at)},Ct=(je,at)=>{const Ve=at[1];Zt(je,at),Ke(je)?je.every(oe=>oe.length<=1)&&Ve():je.length<=1&&Ve()},hn={mode:v,persisted:k,beforeEnter(je){let at=P;if(!m.isMounted)if(C)at=Oe||P;else return;je._leaveCb&&je._leaveCb(!0);const Ve=Ge[ne];Ve&&zr(l,Ve)&&Ve.el._leaveCb&&Ve.el._leaveCb(),Zt(at,[je])},enter(je){let at=$,Ve=J,oe=re;if(!m.isMounted)if(C)at=yt||$,Ve=it||J,oe=cn||re;else return;let He=!1;const zt=je._enterCb=ns=>{He||(He=!0,ns?Zt(oe,[je]):Zt(Ve,[je]),hn.delayedLeave&&hn.delayedLeave(),je._enterCb=void 0)};at?Ct(at,[je,zt]):zt()},leave(je,at){const Ve=String(l.key);if(je._enterCb&&je._enterCb(!0),m.isUnmounting)return at();Zt(Ce,[je]);let oe=!1;const He=je._leaveCb=zt=>{oe||(oe=!0,at(),zt?Zt(lt,[je]):Zt(Le,[je]),je._leaveCb=void 0,Ge[Ve]===l&&delete Ge[Ve])};Ge[Ve]=l,ge?Ct(ge,[je,He]):He()},clone(je){return wg(je,f,m,h)}};return hn}function fg(l){if(Ju(l))return l=Qo(l),l.children=null,l}function ik(l){return Ju(l)?l.children?l.children[0]:void 0:l}function xg(l,f){l.shapeFlag&6&&l.component?xg(l.component.subTree,f):l.shapeFlag&128?(l.ssContent.transition=f.clone(l.ssContent),l.ssFallback.transition=f.clone(l.ssFallback)):l.transition=f}function sN(l,f=!1,m){let h=[],C=0;for(let v=0;v<l.length;v++){let k=l[v];const P=m==null?k.key:String(m)+String(k.key!=null?k.key:v);k.type===Ts?(k.patchFlag&128&&C++,h=h.concat(sN(k.children,f,P))):(f||k.type!==Bs)&&h.push(P!=null?Qo(k,{key:P}):k)}if(C>1)for(let v=0;v<h.length;v++)h[v].patchFlag=-2;return h}function oN(l){return Ze(l)?{setup:l,name:l.name}:l}const Mu=l=>!!l.type.__asyncLoader,Ju=l=>l.type.__isKeepAlive;function Qq(l,f){rN(l,"a",f)}function Zq(l,f){rN(l,"da",f)}function rN(l,f,m=gn){const h=l.__wdc||(l.__wdc=()=>{let C=m;for(;C;){if(C.isDeactivated)return;C=C.parent}return l()});if(ef(f,h,m),m){let C=m.parent;for(;C&&C.parent;)Ju(C.parent.vnode)&&Jq(h,f,m,C),C=C.parent}}function Jq(l,f,m,h){const C=ef(f,l,h,!0);iN(()=>{Fg(h[f],C)},m)}function ef(l,f,m=gn,h=!1){if(m){const C=m[l]||(m[l]=[]),v=f.__weh||(f.__weh=(...k)=>{if(m.isUnmounted)return;Wi(),zi(m);const P=us(f,m,l,k);return Vr(),Vi(),P});return h?C.unshift(v):C.push(v),v}}const _o=l=>(f,m=gn)=>(!Cl||l==="sp")&&ef(l,(...h)=>f(...h),m),eK=_o("bm"),Gg=_o("m"),tK=_o("bu"),nK=_o("u"),Yg=_o("bum"),iN=_o("um"),sK=_o("sp"),oK=_o("rtg"),rK=_o("rtc");function iK(l,f=gn){ef("ec",l,f)}function Lr(l,f,m,h){const C=l.dirs,v=f&&f.dirs;for(let k=0;k<C.length;k++){const P=C[k];v&&(P.oldValue=v[k].value);let $=P.dir[h];$&&(Wi(),us($,m,8,[l.el,P,l,f]),Vi())}}const aK=Symbol(),kg=l=>l?vN(l)?Jg(l)||l.proxy:kg(l.parent):null,fl=kn(Object.create(null),{$:l=>l,$el:l=>l.vnode.el,$data:l=>l.data,$props:l=>l.props,$attrs:l=>l.attrs,$slots:l=>l.slots,$refs:l=>l.refs,$parent:l=>kg(l.parent),$root:l=>kg(l.root),$emit:l=>l.emit,$options:l=>Xg(l),$forceUpdate:l=>l.f||(l.f=()=>Kg(l.update)),$nextTick:l=>l.n||(l.n=Lu.bind(l.proxy)),$watch:l=>Kq.bind(l)}),dg=(l,f)=>l!==Ft&&!l.__isScriptSetup&&ut(l,f),lK={get({_:l},f){const{ctx:m,setupState:h,data:C,props:v,accessCache:k,type:P,appContext:$}=l;let J;if(f[0]!=="$"){const Le=k[f];if(Le!==void 0)switch(Le){case 1:return h[f];case 2:return C[f];case 4:return m[f];case 3:return v[f]}else{if(dg(h,f))return k[f]=1,h[f];if(C!==Ft&&ut(C,f))return k[f]=2,C[f];if((J=l.propsOptions[0])&&ut(J,f))return k[f]=3,v[f];if(m!==Ft&&ut(m,f))return k[f]=4,m[f];Ng&&(k[f]=0)}}const re=fl[f];let Ce,ge;if(re)return f==="$attrs"&&ts(l,"get",f),re(l);if((Ce=P.__cssModules)&&(Ce=Ce[f]))return Ce;if(m!==Ft&&ut(m,f))return k[f]=4,m[f];if(ge=$.config.globalProperties,ut(ge,f))return ge[f]},set({_:l},f,m){const{data:h,setupState:C,ctx:v}=l;return dg(C,f)?(C[f]=m,!0):h!==Ft&&ut(h,f)?(h[f]=m,!0):ut(l.props,f)||f[0]==="$"&&f.slice(1)in l?!1:(v[f]=m,!0)},has({_:{data:l,setupState:f,accessCache:m,ctx:h,appContext:C,propsOptions:v}},k){let P;return!!m[k]||l!==Ft&&ut(l,k)||dg(f,k)||(P=v[0])&&ut(P,k)||ut(h,k)||ut(fl,k)||ut(C.config.globalProperties,k)},defineProperty(l,f,m){return m.get!=null?l._.accessCache[f]=0:ut(m,"value")&&this.set(l,f,m.value,null),Reflect.defineProperty(l,f,m)}};let Ng=!0;function cK(l){const f=Xg(l),m=l.proxy,h=l.ctx;Ng=!1,f.beforeCreate&&ak(f.beforeCreate,l,"bc");const{data:C,computed:v,methods:k,watch:P,provide:$,inject:J,created:re,beforeMount:Ce,mounted:ge,beforeUpdate:Le,updated:lt,activated:Oe,deactivated:yt,beforeDestroy:it,beforeUnmount:cn,destroyed:ne,unmounted:Ge,render:Zt,renderTracked:Ct,renderTriggered:hn,errorCaptured:je,serverPrefetch:at,expose:Ve,inheritAttrs:oe,components:He,directives:zt,filters:ns}=f;if(J&&uK(J,h,null,l.appContext.config.unwrapInjectedRef),k)for(const At in k){const K=k[At];Ze(K)&&(h[At]=K.bind(m))}if(C){const At=C.call(m,m);Ut(At)&&(l.data=Xu(At))}if(Ng=!0,v)for(const At in v){const K=v[At],Pt=Ze(K)?K.bind(m,m):Ze(K.get)?K.get.bind(m,m):Ds,jr=!Ze(K)&&Ze(K.set)?K.set.bind(m):Ds,ae=EN({get:Pt,set:jr});Object.defineProperty(h,At,{enumerable:!0,configurable:!0,get:()=>ae.value,set:On=>ae.value=On})}if(P)for(const At in P)aN(P[At],h,m,At);if($){const At=Ze($)?$.call(m):$;Reflect.ownKeys(At).forEach(K=>{qq(K,At[K])})}re&&ak(re,l,"c");function Lt(At,K){Ke(K)?K.forEach(Pt=>At(Pt.bind(m))):K&&At(K.bind(m))}if(Lt(eK,Ce),Lt(Gg,ge),Lt(tK,Le),Lt(nK,lt),Lt(Qq,Oe),Lt(Zq,yt),Lt(iK,je),Lt(rK,Ct),Lt(oK,hn),Lt(Yg,cn),Lt(iN,Ge),Lt(sK,at),Ke(Ve))if(Ve.length){const At=l.exposed||(l.exposed={});Ve.forEach(K=>{Object.defineProperty(At,K,{get:()=>m[K],set:Pt=>m[K]=Pt})})}else l.exposed||(l.exposed={});Zt&&l.render===Ds&&(l.render=Zt),oe!=null&&(l.inheritAttrs=oe),He&&(l.components=He),zt&&(l.directives=zt)}function uK(l,f,m=Ds,h=!1){Ke(l)&&(l=Ag(l));for(const C in l){const v=l[C];let k;Ut(v)?"default"in v?k=$u(v.from||C,v.default,!0):k=$u(v.from||C):k=$u(v),xn(k)&&h?Object.defineProperty(f,C,{enumerable:!0,configurable:!0,get:()=>k.value,set:P=>k.value=P}):f[C]=k}}function ak(l,f,m){us(Ke(l)?l.map(h=>h.bind(f.proxy)):l.bind(f.proxy),f,m)}function aN(l,f,m,h){const C=h.includes(".")?tN(m,h):()=>m[h];if(ln(l)){const v=f[l];Ze(v)&&ul(C,v)}else if(Ze(l))ul(C,l.bind(m));else if(Ut(l))if(Ke(l))l.forEach(v=>aN(v,f,m,h));else{const v=Ze(l.handler)?l.handler.bind(m):f[l.handler];Ze(v)&&ul(C,v,l)}}function Xg(l){const f=l.type,{mixins:m,extends:h}=f,{mixins:C,optionsCache:v,config:{optionMergeStrategies:k}}=l.appContext,P=v.get(f);let $;return P?$=P:!C.length&&!m&&!h?$=f:($={},C.length&&C.forEach(J=>Vu($,J,k,!0)),Vu($,f,k)),Ut(f)&&v.set(f,$),$}function Vu(l,f,m,h=!1){const{mixins:C,extends:v}=f;v&&Vu(l,v,m,!0),C&&C.forEach(k=>Vu(l,k,m,!0));for(const k in f)if(!(h&&k==="expose")){const P=fK[k]||m&&m[k];l[k]=P?P(l[k],f[k]):f[k]}return l}const fK={data:lk,props:Mr,emits:Mr,methods:Mr,computed:Mr,beforeCreate:Pn,created:Pn,beforeMount:Pn,mounted:Pn,beforeUpdate:Pn,updated:Pn,beforeDestroy:Pn,beforeUnmount:Pn,destroyed:Pn,unmounted:Pn,activated:Pn,deactivated:Pn,errorCaptured:Pn,serverPrefetch:Pn,components:Mr,directives:Mr,watch:mK,provide:lk,inject:dK};function lk(l,f){return f?l?function(){return kn(Ze(l)?l.call(this,this):l,Ze(f)?f.call(this,this):f)}:f:l}function dK(l,f){return Mr(Ag(l),Ag(f))}function Ag(l){if(Ke(l)){const f={};for(let m=0;m<l.length;m++)f[l[m]]=l[m];return f}return l}function Pn(l,f){return l?[...new Set([].concat(l,f))]:f}function Mr(l,f){return l?kn(kn(Object.create(null),l),f):f}function mK(l,f){if(!l)return f;if(!f)return l;const m=kn(Object.create(null),l);for(const h in f)m[h]=Pn(l[h],f[h]);return m}function pK(l,f,m,h=!1){const C={},v={};zu(v,nf,1),l.propsDefaults=Object.create(null),lN(l,f,C,v);for(const k in l.propsOptions[0])k in C||(C[k]=void 0);m?l.props=h?C:kq(C):l.type.props?l.props=C:l.props=v,l.attrs=v}function gK(l,f,m,h){const{props:C,attrs:v,vnode:{patchFlag:k}}=l,P=gt(C),[$]=l.propsOptions;let J=!1;if((h||k>0)&&!(k&16)){if(k&8){const re=l.vnode.dynamicProps;for(let Ce=0;Ce<re.length;Ce++){let ge=re[Ce];if(Zu(l.emitsOptions,ge))continue;const Le=f[ge];if($)if(ut(v,ge))Le!==v[ge]&&(v[ge]=Le,J=!0);else{const lt=Mi(ge);C[lt]=Tg($,P,lt,Le,l,!1)}else Le!==v[ge]&&(v[ge]=Le,J=!0)}}}else{lN(l,f,C,v)&&(J=!0);let re;for(const Ce in P)(!f||!ut(f,Ce)&&((re=Hi(Ce))===Ce||!ut(f,re)))&&($?m&&(m[Ce]!==void 0||m[re]!==void 0)&&(C[Ce]=Tg($,P,Ce,void 0,l,!0)):delete C[Ce]);if(v!==P)for(const Ce in v)(!f||!ut(f,Ce)&&!0)&&(delete v[Ce],J=!0)}J&&Eo(l,"set","$attrs")}function lN(l,f,m,h){const[C,v]=l.propsOptions;let k=!1,P;if(f)for(let $ in f){if(Fu($))continue;const J=f[$];let re;C&&ut(C,re=Mi($))?!v||!v.includes(re)?m[re]=J:(P||(P={}))[re]=J:Zu(l.emitsOptions,$)||(!($ in h)||J!==h[$])&&(h[$]=J,k=!0)}if(v){const $=gt(m),J=P||Ft;for(let re=0;re<v.length;re++){const Ce=v[re];m[Ce]=Tg(C,$,Ce,J[Ce],l,!ut(J,Ce))}}return k}function Tg(l,f,m,h,C,v){const k=l[m];if(k!=null){const P=ut(k,"default");if(P&&h===void 0){const $=k.default;if(k.type!==Function&&Ze($)){const{propsDefaults:J}=C;m in J?h=J[m]:(zi(C),h=J[m]=$.call(null,f),Vr())}else h=$}k[0]&&(v&&!P?h=!1:k[1]&&(h===""||h===Hi(m))&&(h=!0))}return h}function cN(l,f,m=!1){const h=f.propsCache,C=h.get(l);if(C)return C;const v=l.props,k={},P=[];let $=!1;if(!Ze(l)){const re=Ce=>{$=!0;const[ge,Le]=cN(Ce,f,!0);kn(k,ge),Le&&P.push(...Le)};!m&&f.mixins.length&&f.mixins.forEach(re),l.extends&&re(l.extends),l.mixins&&l.mixins.forEach(re)}if(!v&&!$)return Ut(l)&&h.set(l,Ii),Ii;if(Ke(v))for(let re=0;re<v.length;re++){const Ce=Mi(v[re]);ck(Ce)&&(k[Ce]=Ft)}else if(v)for(const re in v){const Ce=Mi(re);if(ck(Ce)){const ge=v[re],Le=k[Ce]=Ke(ge)||Ze(ge)?{type:ge}:Object.assign({},ge);if(Le){const lt=dk(Boolean,Le.type),Oe=dk(String,Le.type);Le[0]=lt>-1,Le[1]=Oe<0||lt<Oe,(lt>-1||ut(Le,"default"))&&P.push(Ce)}}}const J=[k,P];return Ut(l)&&h.set(l,J),J}function ck(l){return l[0]!=="$"}function uk(l){const f=l&&l.toString().match(/^\s*function (\w+)/);return f?f[1]:l===null?"null":""}function fk(l,f){return uk(l)===uk(f)}function dk(l,f){return Ke(f)?f.findIndex(m=>fk(m,l)):Ze(f)&&fk(f,l)?0:-1}const uN=l=>l[0]==="_"||l==="$stable",Qg=l=>Ke(l)?l.map(no):[no(l)],hK=(l,f,m)=>{if(f._n)return f;const h=Mq((...C)=>Qg(f(...C)),m);return h._c=!1,h},fN=(l,f,m)=>{const h=l._ctx;for(const C in l){if(uN(C))continue;const v=l[C];if(Ze(v))f[C]=hK(C,v,h);else if(v!=null){const k=Qg(v);f[C]=()=>k}}},dN=(l,f)=>{const m=Qg(f);l.slots.default=()=>m},bK=(l,f)=>{if(l.vnode.shapeFlag&32){const m=f._;m?(l.slots=gt(f),zu(f,"_",m)):fN(f,l.slots={})}else l.slots={},f&&dN(l,f);zu(l.slots,nf,1)},CK=(l,f,m)=>{const{vnode:h,slots:C}=l;let v=!0,k=Ft;if(h.shapeFlag&32){const P=f._;P?m&&P===1?v=!1:(kn(C,f),!m&&P===1&&delete C._):(v=!f.$stable,fN(f,C)),k=f}else f&&(dN(l,f),k={default:1});if(v)for(const P in C)!uN(P)&&!(P in k)&&delete C[P]};function mN(){return{app:null,config:{isNativeTag:q9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vK=0;function yK(l,f){return function(h,C=null){Ze(h)||(h=Object.assign({},h)),C!=null&&!Ut(C)&&(C=null);const v=mN(),k=new Set;let P=!1;const $=v.app={_uid:vK++,_component:h,_props:C,_container:null,_context:v,_instance:null,version:WK,get config(){return v.config},set config(J){},use(J,...re){return k.has(J)||(J&&Ze(J.install)?(k.add(J),J.install($,...re)):Ze(J)&&(k.add(J),J($,...re))),$},mixin(J){return v.mixins.includes(J)||v.mixins.push(J),$},component(J,re){return re?(v.components[J]=re,$):v.components[J]},directive(J,re){return re?(v.directives[J]=re,$):v.directives[J]},mount(J,re,Ce){if(!P){const ge=yo(h,C);return ge.appContext=v,re&&f?f(ge,J):l(ge,J,Ce),P=!0,$._container=J,J.__vue_app__=$,Jg(ge.component)||ge.component.proxy}},unmount(){P&&(l(null,$._container),delete $._container.__vue_app__)},provide(J,re){return v.provides[J]=re,$}};return $}}function Rg(l,f,m,h,C=!1){if(Ke(l)){l.forEach((ge,Le)=>Rg(ge,f&&(Ke(f)?f[Le]:f),m,h,C));return}if(Mu(h)&&!C)return;const v=h.shapeFlag&4?Jg(h.component)||h.component.proxy:h.el,k=C?null:v,{i:P,r:$}=l,J=f&&f.r,re=P.refs===Ft?P.refs={}:P.refs,Ce=P.setupState;if(J!=null&&J!==$&&(ln(J)?(re[J]=null,ut(Ce,J)&&(Ce[J]=null)):xn(J)&&(J.value=null)),Ze($))Yo($,P,12,[k,re]);else{const ge=ln($),Le=xn($);if(ge||Le){const lt=()=>{if(l.f){const Oe=ge?ut(Ce,$)?Ce[$]:re[$]:$.value;C?Ke(Oe)&&Fg(Oe,v):Ke(Oe)?Oe.includes(v)||Oe.push(v):ge?(re[$]=[v],ut(Ce,$)&&(Ce[$]=re[$])):($.value=[v],l.k&&(re[l.k]=$.value))}else ge?(re[$]=k,ut(Ce,$)&&(Ce[$]=k)):Le&&($.value=k,l.k&&(re[l.k]=k))};k?(lt.id=-1,Mn(lt,m)):lt()}}}const Mn=jq;function EK(l){return _K(l)}function _K(l,f){const m=Z9();m.__VUE__=!0;const{insert:h,remove:C,patchProp:v,createElement:k,createText:P,createComment:$,setText:J,setElementText:re,parentNode:Ce,nextSibling:ge,setScopeId:Le=Ds,insertStaticContent:lt}=l,Oe=(T,B,z,Y=null,V=null,R=null,ye=!1,ue=null,j=!!B.dynamicChildren)=>{if(T===B)return;T&&!zr(T,B)&&(Y=Et(T),On(T,V,R,!0),T=null),B.patchFlag===-2&&(j=!1,B.dynamicChildren=null);const{type:ie,ref:_e,shapeFlag:Ae}=B;switch(ie){case tf:yt(T,B,z,Y);break;case Bs:it(T,B,z,Y);break;case mg:T==null&&cn(B,z,Y,ye);break;case Ts:He(T,B,z,Y,V,R,ye,ue,j);break;default:Ae&1?Zt(T,B,z,Y,V,R,ye,ue,j):Ae&6?zt(T,B,z,Y,V,R,ye,ue,j):(Ae&64||Ae&128)&&ie.process(T,B,z,Y,V,R,ye,ue,j,Is)}_e!=null&&V&&Rg(_e,T&&T.ref,R,B||T,!B)},yt=(T,B,z,Y)=>{if(T==null)h(B.el=P(B.children),z,Y);else{const V=B.el=T.el;B.children!==T.children&&J(V,B.children)}},it=(T,B,z,Y)=>{T==null?h(B.el=$(B.children||""),z,Y):B.el=T.el},cn=(T,B,z,Y)=>{[T.el,T.anchor]=lt(T.children,B,z,Y,T.el,T.anchor)},ne=({el:T,anchor:B},z,Y)=>{let V;for(;T&&T!==B;)V=ge(T),h(T,z,Y),T=V;h(B,z,Y)},Ge=({el:T,anchor:B})=>{let z;for(;T&&T!==B;)z=ge(T),C(T),T=z;C(B)},Zt=(T,B,z,Y,V,R,ye,ue,j)=>{ye=ye||B.type==="svg",T==null?Ct(B,z,Y,V,R,ye,ue,j):at(T,B,V,R,ye,ue,j)},Ct=(T,B,z,Y,V,R,ye,ue)=>{let j,ie;const{type:_e,props:Ae,shapeFlag:ve,transition:Ue,dirs:Ye}=T;if(j=T.el=k(T.type,R,Ae&&Ae.is,Ae),ve&8?re(j,T.children):ve&16&&je(T.children,j,null,Y,V,R&&_e!=="foreignObject",ye,ue),Ye&&Lr(T,null,Y,"created"),Ae){for(const ot in Ae)ot!=="value"&&!Fu(ot)&&v(j,ot,null,Ae[ot],R,T.children,Y,V,tt);"value"in Ae&&v(j,"value",null,Ae.value),(ie=Ae.onVnodeBeforeMount)&&eo(ie,Y,T)}hn(j,T,T.scopeId,ye,Y),Ye&&Lr(T,null,Y,"beforeMount");const st=(!V||V&&!V.pendingBranch)&&Ue&&!Ue.persisted;st&&Ue.beforeEnter(j),h(j,B,z),((ie=Ae&&Ae.onVnodeMounted)||st||Ye)&&Mn(()=>{ie&&eo(ie,Y,T),st&&Ue.enter(j),Ye&&Lr(T,null,Y,"mounted")},V)},hn=(T,B,z,Y,V)=>{if(z&&Le(T,z),Y)for(let R=0;R<Y.length;R++)Le(T,Y[R]);if(V){let R=V.subTree;if(B===R){const ye=V.vnode;hn(T,ye,ye.scopeId,ye.slotScopeIds,V.parent)}}},je=(T,B,z,Y,V,R,ye,ue,j=0)=>{for(let ie=j;ie<T.length;ie++){const _e=T[ie]=ue?Ko(T[ie]):no(T[ie]);Oe(null,_e,B,z,Y,V,R,ye,ue)}},at=(T,B,z,Y,V,R,ye)=>{const ue=B.el=T.el;let{patchFlag:j,dynamicChildren:ie,dirs:_e}=B;j|=T.patchFlag&16;const Ae=T.props||Ft,ve=B.props||Ft;let Ue;z&&$r(z,!1),(Ue=ve.onVnodeBeforeUpdate)&&eo(Ue,z,B,T),_e&&Lr(B,T,z,"beforeUpdate"),z&&$r(z,!0);const Ye=V&&B.type!=="foreignObject";if(ie?Ve(T.dynamicChildren,ie,ue,z,Y,Ye,R):ye||K(T,B,ue,null,z,Y,Ye,R,!1),j>0){if(j&16)oe(ue,B,Ae,ve,z,Y,V);else if(j&2&&Ae.class!==ve.class&&v(ue,"class",null,ve.class,V),j&4&&v(ue,"style",Ae.style,ve.style,V),j&8){const st=B.dynamicProps;for(let ot=0;ot<st.length;ot++){const Nt=st[ot],Nn=Ae[Nt],Fs=ve[Nt];(Fs!==Nn||Nt==="value")&&v(ue,Nt,Nn,Fs,V,T.children,z,Y,tt)}}j&1&&T.children!==B.children&&re(ue,B.children)}else!ye&&ie==null&&oe(ue,B,Ae,ve,z,Y,V);((Ue=ve.onVnodeUpdated)||_e)&&Mn(()=>{Ue&&eo(Ue,z,B,T),_e&&Lr(B,T,z,"updated")},Y)},Ve=(T,B,z,Y,V,R,ye)=>{for(let ue=0;ue<B.length;ue++){const j=T[ue],ie=B[ue],_e=j.el&&(j.type===Ts||!zr(j,ie)||j.shapeFlag&70)?Ce(j.el):z;Oe(j,ie,_e,null,Y,V,R,ye,!0)}},oe=(T,B,z,Y,V,R,ye)=>{if(z!==Y){if(z!==Ft)for(const ue in z)!Fu(ue)&&!(ue in Y)&&v(T,ue,z[ue],null,ye,B.children,V,R,tt);for(const ue in Y){if(Fu(ue))continue;const j=Y[ue],ie=z[ue];j!==ie&&ue!=="value"&&v(T,ue,ie,j,ye,B.children,V,R,tt)}"value"in Y&&v(T,"value",z.value,Y.value)}},He=(T,B,z,Y,V,R,ye,ue,j)=>{const ie=B.el=T?T.el:P(""),_e=B.anchor=T?T.anchor:P("");let{patchFlag:Ae,dynamicChildren:ve,slotScopeIds:Ue}=B;Ue&&(ue=ue?ue.concat(Ue):Ue),T==null?(h(ie,z,Y),h(_e,z,Y),je(B.children,z,_e,V,R,ye,ue,j)):Ae>0&&Ae&64&&ve&&T.dynamicChildren?(Ve(T.dynamicChildren,ve,z,V,R,ye,ue),(B.key!=null||V&&B===V.subTree)&&pN(T,B,!0)):K(T,B,z,_e,V,R,ye,ue,j)},zt=(T,B,z,Y,V,R,ye,ue,j)=>{B.slotScopeIds=ue,T==null?B.shapeFlag&512?V.ctx.activate(B,z,Y,ye,j):ns(B,z,Y,V,R,ye,j):Me(T,B,j)},ns=(T,B,z,Y,V,R,ye)=>{const ue=T.component=BK(T,Y,V);if(Ju(T)&&(ue.ctx.renderer=Is),FK(ue),ue.asyncDep){if(V&&V.registerDep(ue,Lt),!T.el){const j=ue.subTree=yo(Bs);it(null,j,B,z)}return}Lt(ue,T,B,z,V,R,ye)},Me=(T,B,z)=>{const Y=B.component=T.component;if(Hq(T,B,z))if(Y.asyncDep&&!Y.asyncResolved){At(Y,B,z);return}else Y.next=B,Iq(Y.update),Y.update();else B.el=T.el,Y.vnode=B},Lt=(T,B,z,Y,V,R,ye)=>{const ue=()=>{if(T.isMounted){let{next:_e,bu:Ae,u:ve,parent:Ue,vnode:Ye}=T,st=_e,ot;$r(T,!1),_e?(_e.el=Ye.el,At(T,_e,ye)):_e=Ye,Ae&&cg(Ae),(ot=_e.props&&_e.props.onVnodeBeforeUpdate)&&eo(ot,Ue,_e,Ye),$r(T,!0);const Nt=ug(T),Nn=T.subTree;T.subTree=Nt,Oe(Nn,Nt,Ce(Nn.el),Et(Nn),T,V,R),_e.el=Nt.el,st===null&&Wq(T,Nt.el),ve&&Mn(ve,V),(ot=_e.props&&_e.props.onVnodeUpdated)&&Mn(()=>eo(ot,Ue,_e,Ye),V)}else{let _e;const{el:Ae,props:ve}=B,{bm:Ue,m:Ye,parent:st}=T,ot=Mu(B);if($r(T,!1),Ue&&cg(Ue),!ot&&(_e=ve&&ve.onVnodeBeforeMount)&&eo(_e,st,B),$r(T,!0),Ae&&Ki){const Nt=()=>{T.subTree=ug(T),Ki(Ae,T.subTree,T,V,null)};ot?B.type.__asyncLoader().then(()=>!T.isUnmounted&&Nt()):Nt()}else{const Nt=T.subTree=ug(T);Oe(null,Nt,z,Y,T,V,R),B.el=Nt.el}if(Ye&&Mn(Ye,V),!ot&&(_e=ve&&ve.onVnodeMounted)){const Nt=B;Mn(()=>eo(_e,st,Nt),V)}(B.shapeFlag&256||st&&Mu(st.vnode)&&st.vnode.shapeFlag&256)&&T.a&&Mn(T.a,V),T.isMounted=!0,B=z=Y=null}},j=T.effect=new Ug(ue,()=>Kg(ie),T.scope),ie=T.update=()=>j.run();ie.id=T.uid,$r(T,!0),ie()},At=(T,B,z)=>{B.component=T;const Y=T.vnode.props;T.vnode=B,T.next=null,gK(T,B.props,Y,z),CK(T,B.children,z),Wi(),ok(),Vi()},K=(T,B,z,Y,V,R,ye,ue,j=!1)=>{const ie=T&&T.children,_e=T?T.shapeFlag:0,Ae=B.children,{patchFlag:ve,shapeFlag:Ue}=B;if(ve>0){if(ve&128){jr(ie,Ae,z,Y,V,R,ye,ue,j);return}else if(ve&256){Pt(ie,Ae,z,Y,V,R,ye,ue,j);return}}Ue&8?(_e&16&&tt(ie,V,R),Ae!==ie&&re(z,Ae)):_e&16?Ue&16?jr(ie,Ae,z,Y,V,R,ye,ue,j):tt(ie,V,R,!0):(_e&8&&re(z,""),Ue&16&&je(Ae,z,Y,V,R,ye,ue,j))},Pt=(T,B,z,Y,V,R,ye,ue,j)=>{T=T||Ii,B=B||Ii;const ie=T.length,_e=B.length,Ae=Math.min(ie,_e);let ve;for(ve=0;ve<Ae;ve++){const Ue=B[ve]=j?Ko(B[ve]):no(B[ve]);Oe(T[ve],Ue,z,null,V,R,ye,ue,j)}ie>_e?tt(T,V,R,!0,!1,Ae):je(B,z,Y,V,R,ye,ue,j,Ae)},jr=(T,B,z,Y,V,R,ye,ue,j)=>{let ie=0;const _e=B.length;let Ae=T.length-1,ve=_e-1;for(;ie<=Ae&&ie<=ve;){const Ue=T[ie],Ye=B[ie]=j?Ko(B[ie]):no(B[ie]);if(zr(Ue,Ye))Oe(Ue,Ye,z,null,V,R,ye,ue,j);else break;ie++}for(;ie<=Ae&&ie<=ve;){const Ue=T[Ae],Ye=B[ve]=j?Ko(B[ve]):no(B[ve]);if(zr(Ue,Ye))Oe(Ue,Ye,z,null,V,R,ye,ue,j);else break;Ae--,ve--}if(ie>Ae){if(ie<=ve){const Ue=ve+1,Ye=Ue<_e?B[Ue].el:Y;for(;ie<=ve;)Oe(null,B[ie]=j?Ko(B[ie]):no(B[ie]),z,Ye,V,R,ye,ue,j),ie++}}else if(ie>ve)for(;ie<=Ae;)On(T[ie],V,R,!0),ie++;else{const Ue=ie,Ye=ie,st=new Map;for(ie=Ye;ie<=ve;ie++){const Ht=B[ie]=j?Ko(B[ie]):no(B[ie]);Ht.key!=null&&st.set(Ht.key,ie)}let ot,Nt=0;const Nn=ve-Ye+1;let Fs=!1,So=0;const oo=new Array(Nn);for(ie=0;ie<Nn;ie++)oo[ie]=0;for(ie=Ue;ie<=Ae;ie++){const Ht=T[ie];if(Nt>=Nn){On(Ht,V,R,!0);continue}let wt;if(Ht.key!=null)wt=st.get(Ht.key);else for(ot=Ye;ot<=ve;ot++)if(oo[ot-Ye]===0&&zr(Ht,B[ot])){wt=ot;break}wt===void 0?On(Ht,V,R,!0):(oo[wt-Ye]=ie+1,wt>=So?So=wt:Fs=!0,Oe(Ht,B[wt],z,null,V,R,ye,ue,j),Nt++)}const nn=Fs?SK(oo):Ii;for(ot=nn.length-1,ie=Nn-1;ie>=0;ie--){const Ht=Ye+ie,wt=B[Ht],ro=Ht+1<_e?B[Ht+1].el:Y;oo[ie]===0?Oe(null,wt,z,ro,V,R,ye,ue,j):Fs&&(ot<0||ie!==nn[ot]?ae(wt,z,ro,2):ot--)}}},ae=(T,B,z,Y,V=null)=>{const{el:R,type:ye,transition:ue,children:j,shapeFlag:ie}=T;if(ie&6){ae(T.component.subTree,B,z,Y);return}if(ie&128){T.suspense.move(B,z,Y);return}if(ie&64){ye.move(T,B,z,Is);return}if(ye===Ts){h(R,B,z);for(let Ae=0;Ae<j.length;Ae++)ae(j[Ae],B,z,Y);h(T.anchor,B,z);return}if(ye===mg){ne(T,B,z);return}if(Y!==2&&ie&1&&ue)if(Y===0)ue.beforeEnter(R),h(R,B,z),Mn(()=>ue.enter(R),V);else{const{leave:Ae,delayLeave:ve,afterLeave:Ue}=ue,Ye=()=>h(R,B,z),st=()=>{Ae(R,()=>{Ye(),Ue&&Ue()})};ve?ve(R,Ye,st):st()}else h(R,B,z)},On=(T,B,z,Y=!1,V=!1)=>{const{type:R,props:ye,ref:ue,children:j,dynamicChildren:ie,shapeFlag:_e,patchFlag:Ae,dirs:ve}=T;if(ue!=null&&Rg(ue,null,z,T,!0),_e&256){B.ctx.deactivate(T);return}const Ue=_e&1&&ve,Ye=!Mu(T);let st;if(Ye&&(st=ye&&ye.onVnodeBeforeUnmount)&&eo(st,B,T),_e&6)Zo(T.component,z,Y);else{if(_e&128){T.suspense.unmount(z,Y);return}Ue&&Lr(T,null,B,"beforeUnmount"),_e&64?T.type.remove(T,B,z,V,Is,Y):ie&&(R!==Ts||Ae>0&&Ae&64)?tt(ie,B,z,!1,!0):(R===Ts&&Ae&384||!V&&_e&16)&&tt(j,B,z),Y&&vl(T)}(Ye&&(st=ye&&ye.onVnodeUnmounted)||Ue)&&Mn(()=>{st&&eo(st,B,T),Ue&&Lr(T,null,B,"unmounted")},z)},vl=T=>{const{type:B,el:z,anchor:Y,transition:V}=T;if(B===Ts){ji(z,Y);return}if(B===mg){Ge(T);return}const R=()=>{C(z),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(T.shapeFlag&1&&V&&!V.persisted){const{leave:ye,delayLeave:ue}=V,j=()=>ye(z,R);ue?ue(T.el,R,j):j()}else R()},ji=(T,B)=>{let z;for(;T!==B;)z=ge(T),C(T),T=z;C(B)},Zo=(T,B,z)=>{const{bum:Y,scope:V,update:R,subTree:ye,um:ue}=T;Y&&cg(Y),V.stop(),R&&(R.active=!1,On(ye,T,B,z)),ue&&Mn(ue,B),Mn(()=>{T.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},tt=(T,B,z,Y=!1,V=!1,R=0)=>{for(let ye=R;ye<T.length;ye++)On(T[ye],B,z,Y,V)},Et=T=>T.shapeFlag&6?Et(T.component.subTree):T.shapeFlag&128?T.suspense.next():ge(T.anchor||T.el),b=(T,B,z)=>{T==null?B._vnode&&On(B._vnode,null,null,!0):Oe(B._vnode||null,T,B,null,null,null,z),ok(),Xk(),B._vnode=T},Is={p:Oe,um:On,m:ae,r:vl,mt:ns,mc:je,pc:K,pbc:Ve,n:Et,o:l};let qi,Ki;return f&&([qi,Ki]=f(Is)),{render:b,hydrate:qi,createApp:yK(b,qi)}}function $r({effect:l,update:f},m){l.allowRecurse=f.allowRecurse=m}function pN(l,f,m=!1){const h=l.children,C=f.children;if(Ke(h)&&Ke(C))for(let v=0;v<h.length;v++){const k=h[v];let P=C[v];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=C[v]=Ko(C[v]),P.el=k.el),m||pN(k,P)),P.type===tf&&(P.el=k.el)}}function SK(l){const f=l.slice(),m=[0];let h,C,v,k,P;const $=l.length;for(h=0;h<$;h++){const J=l[h];if(J!==0){if(C=m[m.length-1],l[C]<J){f[h]=C,m.push(h);continue}for(v=0,k=m.length-1;v<k;)P=v+k>>1,l[m[P]]<J?v=P+1:k=P;J<l[m[v]]&&(v>0&&(f[h]=m[v-1]),m[v]=h)}}for(v=m.length,k=m[v-1];v-- >0;)m[v]=k,k=f[k];return m}const wK=l=>l.__isTeleport,Ts=Symbol(void 0),tf=Symbol(void 0),Bs=Symbol(void 0),mg=Symbol(void 0),dl=[];let Os=null;function ju(l=!1){dl.push(Os=l?null:[])}function xK(){dl.pop(),Os=dl[dl.length-1]||null}let bl=1;function mk(l){bl+=l}function gN(l){return l.dynamicChildren=bl>0?Os||Ii:null,xK(),bl>0&&Os&&Os.push(l),l}function hN(l,f,m,h,C,v){return gN(fs(l,f,m,h,C,v,!0))}function bN(l,f,m,h,C){return gN(yo(l,f,m,h,C,!0))}function kK(l){return l?l.__v_isVNode===!0:!1}function zr(l,f){return l.type===f.type&&l.key===f.key}const nf="__vInternal",CN=({key:l})=>l!=null?l:null,Uu=({ref:l,ref_key:f,ref_for:m})=>l!=null?ln(l)||xn(l)||Ze(l)?{i:Ps,r:l,k:f,f:!!m}:l:null;function fs(l,f=null,m=null,h=0,C=null,v=l===Ts?0:1,k=!1,P=!1){const $={__v_isVNode:!0,__v_skip:!0,type:l,props:f,key:f&&CN(f),ref:f&&Uu(f),scopeId:Jk,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:v,patchFlag:h,dynamicProps:C,dynamicChildren:null,appContext:null,ctx:Ps};return P?(Zg($,m),v&128&&l.normalize($)):m&&($.shapeFlag|=ln(m)?8:16),bl>0&&!k&&Os&&($.patchFlag>0||v&6)&&$.patchFlag!==32&&Os.push($),$}const yo=NK;function NK(l,f=null,m=null,h=0,C=null,v=!1){if((!l||l===aK)&&(l=Bs),kK(l)){const P=Qo(l,f,!0);return m&&Zg(P,m),bl>0&&!v&&Os&&(P.shapeFlag&6?Os[Os.indexOf(l)]=P:Os.push(P)),P.patchFlag|=-2,P}if(UK(l)&&(l=l.__vccOpts),f){f=AK(f);let{class:P,style:$}=f;P&&!ln(P)&&(f.class=Bg(P)),Ut($)&&(Hk($)&&!Ke($)&&($=kn({},$)),f.style=Dg($))}const k=ln(l)?1:Vq(l)?128:wK(l)?64:Ut(l)?4:Ze(l)?2:0;return fs(l,f,m,h,C,k,v,!0)}function AK(l){return l?Hk(l)||nf in l?kn({},l):l:null}function Qo(l,f,m=!1){const{props:h,ref:C,patchFlag:v,children:k}=l,P=f?PK(h||{},f):h;return{__v_isVNode:!0,__v_skip:!0,type:l.type,props:P,key:P&&CN(P),ref:f&&f.ref?m&&C?Ke(C)?C.concat(Uu(f)):[C,Uu(f)]:Uu(f):C,scopeId:l.scopeId,slotScopeIds:l.slotScopeIds,children:k,target:l.target,targetAnchor:l.targetAnchor,staticCount:l.staticCount,shapeFlag:l.shapeFlag,patchFlag:f&&l.type!==Ts?v===-1?16:v|16:v,dynamicProps:l.dynamicProps,dynamicChildren:l.dynamicChildren,appContext:l.appContext,dirs:l.dirs,transition:l.transition,component:l.component,suspense:l.suspense,ssContent:l.ssContent&&Qo(l.ssContent),ssFallback:l.ssFallback&&Qo(l.ssFallback),el:l.el,anchor:l.anchor,ctx:l.ctx}}function TK(l=" ",f=0){return yo(tf,null,l,f)}function RK(l="",f=!1){return f?(ju(),bN(Bs,null,l)):yo(Bs,null,l)}function no(l){return l==null||typeof l=="boolean"?yo(Bs):Ke(l)?yo(Ts,null,l.slice()):typeof l=="object"?Ko(l):yo(tf,null,String(l))}function Ko(l){return l.el===null&&l.patchFlag!==-1||l.memo?l:Qo(l)}function Zg(l,f){let m=0;const{shapeFlag:h}=l;if(f==null)f=null;else if(Ke(f))m=16;else if(typeof f=="object")if(h&65){const C=f.default;C&&(C._c&&(C._d=!1),Zg(l,C()),C._c&&(C._d=!0));return}else{m=32;const C=f._;!C&&!(nf in f)?f._ctx=Ps:C===3&&Ps&&(Ps.slots._===1?f._=1:(f._=2,l.patchFlag|=1024))}else Ze(f)?(f={default:f,_ctx:Ps},m=32):(f=String(f),h&64?(m=16,f=[TK(f)]):m=8);l.children=f,l.shapeFlag|=m}function PK(...l){const f={};for(let m=0;m<l.length;m++){const h=l[m];for(const C in h)if(C==="class")f.class!==h.class&&(f.class=Bg([f.class,h.class]));else if(C==="style")f.style=Dg([f.style,h.style]);else if(qu(C)){const v=f[C],k=h[C];k&&v!==k&&!(Ke(v)&&v.includes(k))&&(f[C]=v?[].concat(v,k):k)}else C!==""&&(f[C]=h[C])}return f}function eo(l,f,m,h=null){us(l,f,7,[m,h])}const OK=mN();let DK=0;function BK(l,f,m){const h=l.type,C=(f?f.appContext:l.appContext)||OK,v={uid:DK++,vnode:l,type:h,parent:f,appContext:C,root:null,next:null,subTree:null,effect:null,update:null,scope:new J9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:f?f.provides:Object.create(C.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cN(h,C),emitsOptions:Zk(h,C),emit:null,emitted:null,propsDefaults:Ft,inheritAttrs:h.inheritAttrs,ctx:Ft,data:Ft,props:Ft,attrs:Ft,slots:Ft,refs:Ft,setupState:Ft,setupContext:null,suspense:m,suspenseId:m?m.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return v.ctx={_:v},v.root=f?f.root:v,v.emit=$q.bind(null,v),l.ce&&l.ce(v),v}let gn=null;const IK=()=>gn||Ps,zi=l=>{gn=l,l.scope.on()},Vr=()=>{gn&&gn.scope.off(),gn=null};function vN(l){return l.vnode.shapeFlag&4}let Cl=!1;function FK(l,f=!1){Cl=f;const{props:m,children:h}=l.vnode,C=vN(l);pK(l,m,C,f),bK(l,h);const v=C?LK(l,f):void 0;return Cl=!1,v}function LK(l,f){const m=l.type;l.accessCache=Object.create(null),l.proxy=Wk(new Proxy(l.ctx,lK));const{setup:h}=m;if(h){const C=l.setupContext=h.length>1?MK(l):null;zi(l),Wi();const v=Yo(h,l,0,[l.props,C]);if(Vi(),Vr(),kk(v)){if(v.then(Vr,Vr),f)return v.then(k=>{pk(l,k,f)}).catch(k=>{Qu(k,l,0)});l.asyncDep=v}else pk(l,v,f)}else yN(l,f)}function pk(l,f,m){Ze(f)?l.type.__ssrInlineRender?l.ssrRender=f:l.render=f:Ut(f)&&(l.setupState=qk(f)),yN(l,m)}let gk;function yN(l,f,m){const h=l.type;if(!l.render){if(!f&&gk&&!h.render){const C=h.template||Xg(l).template;if(C){const{isCustomElement:v,compilerOptions:k}=l.appContext.config,{delimiters:P,compilerOptions:$}=h,J=kn(kn({isCustomElement:v,delimiters:P},k),$);h.render=gk(C,J)}}l.render=h.render||Ds}zi(l),Wi(),cK(l),Vi(),Vr()}function $K(l){return new Proxy(l.attrs,{get(f,m){return ts(l,"get","$attrs"),f[m]}})}function MK(l){const f=h=>{l.exposed=h||{}};let m;return{get attrs(){return m||(m=$K(l))},slots:l.slots,emit:l.emit,expose:f}}function Jg(l){if(l.exposed)return l.exposeProxy||(l.exposeProxy=new Proxy(qk(Wk(l.exposed)),{get(f,m){if(m in f)return f[m];if(m in fl)return fl[m](l)},has(f,m){return m in f||m in fl}}))}function UK(l){return Ze(l)&&"__vccOpts"in l}const EN=(l,f)=>Oq(l,f,Cl),zK=Symbol(""),HK=()=>$u(zK),WK="3.2.45",VK="http://www.w3.org/2000/svg",Hr=typeof document<"u"?document:null,hk=Hr&&Hr.createElement("template"),jK={insert:(l,f,m)=>{f.insertBefore(l,m||null)},remove:l=>{const f=l.parentNode;f&&f.removeChild(l)},createElement:(l,f,m,h)=>{const C=f?Hr.createElementNS(VK,l):Hr.createElement(l,m?{is:m}:void 0);return l==="select"&&h&&h.multiple!=null&&C.setAttribute("multiple",h.multiple),C},createText:l=>Hr.createTextNode(l),createComment:l=>Hr.createComment(l),setText:(l,f)=>{l.nodeValue=f},setElementText:(l,f)=>{l.textContent=f},parentNode:l=>l.parentNode,nextSibling:l=>l.nextSibling,querySelector:l=>Hr.querySelector(l),setScopeId(l,f){l.setAttribute(f,"")},insertStaticContent(l,f,m,h,C,v){const k=m?m.previousSibling:f.lastChild;if(C&&(C===v||C.nextSibling))for(;f.insertBefore(C.cloneNode(!0),m),!(C===v||!(C=C.nextSibling)););else{hk.innerHTML=h?`<svg>${l}</svg>`:l;const P=hk.content;if(h){const $=P.firstChild;for(;$.firstChild;)P.appendChild($.firstChild);P.removeChild($)}f.insertBefore(P,m)}return[k?k.nextSibling:f.firstChild,m?m.previousSibling:f.lastChild]}};function qK(l,f,m){const h=l._vtc;h&&(f=(f?[f,...h]:[...h]).join(" ")),f==null?l.removeAttribute("class"):m?l.setAttribute("class",f):l.className=f}function KK(l,f,m){const h=l.style,C=ln(m);if(m&&!C){for(const v in m)Pg(h,v,m[v]);if(f&&!ln(f))for(const v in f)m[v]==null&&Pg(h,v,"")}else{const v=h.display;C?f!==m&&(h.cssText=m):f&&l.removeAttribute("style"),"_vod"in l&&(h.display=v)}}const bk=/\s*!important$/;function Pg(l,f,m){if(Ke(m))m.forEach(h=>Pg(l,f,h));else if(m==null&&(m=""),f.startsWith("--"))l.setProperty(f,m);else{const h=GK(l,f);bk.test(m)?l.setProperty(Hi(h),m.replace(bk,""),"important"):l[h]=m}}const Ck=["Webkit","Moz","ms"],pg={};function GK(l,f){const m=pg[f];if(m)return m;let h=Mi(f);if(h!=="filter"&&h in l)return pg[f]=h;h=Tk(h);for(let C=0;C<Ck.length;C++){const v=Ck[C]+h;if(v in l)return pg[f]=v}return f}const vk="http://www.w3.org/1999/xlink";function YK(l,f,m,h,C){if(h&&f.startsWith("xlink:"))m==null?l.removeAttributeNS(vk,f.slice(6,f.length)):l.setAttributeNS(vk,f,m);else{const v=V9(f);m==null||v&&!Sk(m)?l.removeAttribute(f):l.setAttribute(f,v?"":m)}}function XK(l,f,m,h,C,v,k){if(f==="innerHTML"||f==="textContent"){h&&k(h,C,v),l[f]=m==null?"":m;return}if(f==="value"&&l.tagName!=="PROGRESS"&&!l.tagName.includes("-")){l._value=m;const $=m==null?"":m;(l.value!==$||l.tagName==="OPTION")&&(l.value=$),m==null&&l.removeAttribute(f);return}let P=!1;if(m===""||m==null){const $=typeof l[f];$==="boolean"?m=Sk(m):m==null&&$==="string"?(m="",P=!0):$==="number"&&(m=0,P=!0)}try{l[f]=m}catch{}P&&l.removeAttribute(f)}function QK(l,f,m,h){l.addEventListener(f,m,h)}function ZK(l,f,m,h){l.removeEventListener(f,m,h)}function JK(l,f,m,h,C=null){const v=l._vei||(l._vei={}),k=v[f];if(h&&k)k.value=h;else{const[P,$]=e7(f);if(h){const J=v[f]=s7(h,C);QK(l,P,J,$)}else k&&(ZK(l,P,k,$),v[f]=void 0)}}const yk=/(?:Once|Passive|Capture)$/;function e7(l){let f;if(yk.test(l)){f={};let h;for(;h=l.match(yk);)l=l.slice(0,l.length-h[0].length),f[h[0].toLowerCase()]=!0}return[l[2]===":"?l.slice(3):Hi(l.slice(2)),f]}let gg=0;const t7=Promise.resolve(),n7=()=>gg||(t7.then(()=>gg=0),gg=Date.now());function s7(l,f){const m=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=m.attached)return;us(o7(h,m.value),f,5,[h])};return m.value=l,m.attached=n7(),m}function o7(l,f){if(Ke(f)){const m=l.stopImmediatePropagation;return l.stopImmediatePropagation=()=>{m.call(l),l._stopped=!0},f.map(h=>C=>!C._stopped&&h&&h(C))}else return f}const Ek=/^on[a-z]/,r7=(l,f,m,h,C=!1,v,k,P,$)=>{f==="class"?qK(l,h,C):f==="style"?KK(l,m,h):qu(f)?Ig(f)||JK(l,f,m,h,k):(f[0]==="."?(f=f.slice(1),!0):f[0]==="^"?(f=f.slice(1),!1):i7(l,f,h,C))?XK(l,f,h,v,k,P,$):(f==="true-value"?l._trueValue=h:f==="false-value"&&(l._falseValue=h),YK(l,f,h,C))};function i7(l,f,m,h){return h?!!(f==="innerHTML"||f==="textContent"||f in l&&Ek.test(f)&&Ze(m)):f==="spellcheck"||f==="draggable"||f==="translate"||f==="form"||f==="list"&&l.tagName==="INPUT"||f==="type"&&l.tagName==="TEXTAREA"||Ek.test(f)&&ln(m)?!1:f in l}const a7={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Xq.props;const l7=kn({patchProp:r7},jK);let _k;function c7(){return _k||(_k=EK(l7))}const u7=(...l)=>{const f=c7().createApp(...l),{mount:m}=f;return f.mount=h=>{const C=f7(h);if(!C)return;const v=f._component;!Ze(v)&&!v.render&&!v.template&&(v.template=C.innerHTML),C.innerHTML="";const k=m(C,!1,C instanceof SVGElement);return C instanceof Element&&(C.removeAttribute("v-cloak"),C.setAttribute("data-v-app","")),k},f};function f7(l){return ln(l)?document.querySelector(l):l}var _N={exports:{}};(function(l){(function(){var f=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},m=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},h=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},C=function(e,t){return v(function(n,s){return e.eq(t(n),t(s))})},v=function(e){return{eq:e}},k=v(function(e,t){return e===t}),P=k,$=function(e){return v(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},J=function(e,t){return C($(e),function(n){return h(n,t)})},re=function(e){return v(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!J(P).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var a=s[i];if(!e.eq(t[a],n[a]))return!1}return!0})},Ce=v(function(e,t){if(e===t)return!0;var n=f(e),s=f(t);return n!==s?!1:m(n)?e===t:n==="array"?$(Ce).eq(e,t):n==="object"?re(Ce).eq(e,t):!1});const ge=Object.getPrototypeOf,Le=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},lt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Le(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Oe=e=>t=>lt(t)===e,yt=e=>t=>typeof t===e,it=e=>t=>e===t,cn=(e,t)=>Ge(e)&&Le(e,t,(n,s)=>ge(n)===s),ne=Oe("string"),Ge=Oe("object"),Zt=e=>cn(e,Object),Ct=Oe("array"),hn=it(null),je=yt("boolean"),at=it(void 0),Ve=e=>e==null,oe=e=>!Ve(e),He=yt("function"),zt=yt("number"),ns=(e,t)=>{if(Ct(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Me=()=>{},Lt=(e,t)=>(...n)=>e(t.apply(null,n)),At=(e,t)=>n=>e(t(n)),K=e=>()=>e,Pt=e=>e,jr=(e,t)=>e===t;function ae(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const On=e=>t=>!e(t),vl=e=>()=>{throw new Error(e)},ji=e=>e(),Zo=e=>{e()},tt=K(!1),Et=K(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t!=null?t:"Called getOrDie on None")}static from(t){return oe(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const Is=Array.prototype.slice,qi=Array.prototype.indexOf,Ki=Array.prototype.push,T=(e,t)=>qi.call(e,t),B=(e,t)=>{const n=T(e,t);return n===-1?b.none():b.some(n)},z=(e,t)=>T(e,t)>-1,Y=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},V=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},R=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},ye=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},ue=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},j=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},ie=(e,t,n)=>(ye(e,(s,o)=>{n=t(n,s,o)}),n),_e=(e,t,n)=>(R(e,(s,o)=>{n=t(n,s,o)}),n),Ae=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},ve=(e,t)=>Ae(e,t,tt),Ue=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},Ye=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Ct(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Ki.apply(t,e[n])}return t},st=(e,t)=>Ye(V(e,t)),ot=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},Nt=e=>{const t=Is.call(e,0);return t.reverse(),t},Nn=(e,t)=>j(e,n=>!z(t,n)),Fs=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},So=(e,t)=>{const n=Is.call(e,0);return n.sort(t),n},oo=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),nn=e=>oo(e,0),Ht=e=>oo(e,e.length-1),wt=He(Array.from)?Array.from:e=>Is.call(e),ro=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},xN=(e,t)=>{const n=[],s=He(t)?o=>Y(n,r=>t(r,o)):o=>z(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},Un=Object.keys,kN=Object.hasOwnProperty,ft=(e,t)=>{const n=Un(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},yl=(e,t)=>NN(e,(n,s)=>({k:s,v:t(n,s)})),NN=(e,t)=>{const n={};return ft(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},sf=e=>(t,n)=>{e[n]=t},eh=(e,t,n,s)=>{ft(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},AN=(e,t)=>{const n={},s={};return eh(e,t,sf(n),sf(s)),{t:n,f:s}},Gi=(e,t)=>{const n={};return eh(e,t,sf(n),Me),n},of=(e,t)=>{const n=[];return ft(e,(s,o)=>{n.push(t(s,o))}),n},rf=e=>of(e,Pt),ht=(e,t)=>$e(e,t)?b.from(e[t]):b.none(),$e=(e,t)=>kN.call(e,t),qr=(e,t)=>$e(e,t)&&e[t]!==void 0&&e[t]!==null,TN=(e,t,n=Ce)=>re(n).eq(e,t),th=e=>{const t={};return R(e,n=>{t[n]={}}),Un(t)},nh=e=>e.length!==void 0,af=Array.isArray,RN=e=>{if(af(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},El=(e,t,n)=>{if(!e)return!1;if(n=n||e,nh(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if($e(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},lf=(e,t)=>{const n=[];return El(e,(s,o)=>{n.push(t(s,o,e))}),n},Yi=(e,t)=>{const n=[];return El(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},PN=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},_l=(e,t,n,s)=>{let o=at(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},sh=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Jo=e=>e[e.length-1],er=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},ON=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),a=i||s("(pointer:coarse)"),c=o||!r&&i&&s("(min-device-width:768px)"),u=r||i&&!c,d=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,g=!u&&!c&&!d;return{isiPad:K(o),isiPhone:K(r),isTablet:K(c),isPhone:K(u),isTouch:K(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:K(d),isDesktop:K(g)}},DN=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},BN=(e,t)=>{const n=DN(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return cf(s(1),s(2))},IN=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?oh():BN(e,n)},oh=()=>cf(0,0),cf=(e,t)=>({major:e,minor:t}),Xi={nu:cf,detect:IN,unknown:oh},FN=(e,t)=>ro(t.brands,n=>{const s=n.brand.toLowerCase();return ve(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Xi.nu(parseInt(n.version,10),0)}))}),rh=(e,t)=>{const n=String(t).toLowerCase();return ve(e,s=>s.search(n))},LN=(e,t)=>rh(e,t).map(n=>{const s=Xi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),$N=(e,t)=>rh(e,t).map(n=>{const s=Xi.detect(n.versionRegexes,t);return{current:n.name,version:s}}),MN=(e,t)=>e.substring(t),ih=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,UN=(e,t)=>Jt(e,t)?MN(e,t.length):e,sn=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?at(s)?!0:o+t.length<=s:!1},Jt=(e,t)=>ih(e,t,0),ah=(e,t)=>ih(e,t,e.length-t.length),uf=e=>t=>t.replace(e,""),Kr=uf(/^\s+|\s+$/g),zN=uf(/^\s+/g),lh=uf(/\s+$/g),Ls=e=>e.length>0,Qi=e=>!Ls(e),HN=(e,t)=>t<=0?"":new Array(t+1).join(e),Sl=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},ff=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,io=e=>t=>sn(t,e),WN=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>sn(e,"edge/")&&sn(e,"chrome")&&sn(e,"safari")&&sn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ff],search:e=>sn(e,"chrome")&&!sn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>sn(e,"msie")||sn(e,"trident")},{name:"Opera",versionRegexes:[ff,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:io("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:io("firefox")},{name:"Safari",versionRegexes:[ff,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(sn(e,"safari")||sn(e,"mobile/"))&&sn(e,"applewebkit")}],VN=[{name:"Windows",search:io("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>sn(e,"iphone")||sn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:io("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:io("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:io("linux"),versionRegexes:[]},{name:"Solaris",search:io("sunos"),versionRegexes:[]},{name:"FreeBSD",search:io("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:io("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ch={browsers:K(WN),oses:K(VN)},uh="Edge",fh="Chromium",dh="IE",mh="Opera",ph="Firefox",gh="Safari",jN=()=>hh({current:void 0,version:Xi.unknown()}),hh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(uh),isChromium:s(fh),isIE:s(dh),isOpera:s(mh),isFirefox:s(ph),isSafari:s(gh)}},bh={unknown:jN,nu:hh,edge:K(uh),chromium:K(fh),ie:K(dh),opera:K(mh),firefox:K(ph),safari:K(gh)},Ch="Windows",vh="iOS",yh="Android",Eh="Linux",_h="macOS",Sh="Solaris",wh="FreeBSD",xh="ChromeOS",qN=()=>kh({current:void 0,version:Xi.unknown()}),kh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Ch),isiOS:s(vh),isAndroid:s(yh),isMacOS:s(_h),isLinux:s(Eh),isSolaris:s(Sh),isFreeBSD:s(wh),isChromeOS:s(xh)}},Nh={unknown:qN,nu:kh,windows:K(Ch),ios:K(vh),android:K(yh),linux:K(Eh),macos:K(_h),solaris:K(Sh),freebsd:K(wh),chromeos:K(xh)},KN={detect:(e,t,n)=>{const s=ch.browsers(),o=ch.oses(),r=t.bind(c=>FN(s,c)).orThunk(()=>LN(s,e)).fold(bh.unknown,bh.nu),i=$N(o,e).fold(Nh.unknown,Nh.nu),a=ON(i,r,e,n);return{browser:r,os:i,deviceType:a}}},GN=e=>window.matchMedia(e).matches;let YN=er(()=>KN.detect(navigator.userAgent,b.from(navigator.userAgentData),GN));const tr=()=>YN(),XN=navigator.userAgent,df=tr(),$s=df.browser,Ms=df.os,nr=df.deviceType,QN=XN.indexOf("Windows Phone")!==-1,Xe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:$s.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!$s.isIE(),windowsPhone:QN,browser:{current:$s.current,version:$s.version,isChromium:$s.isChromium,isEdge:$s.isEdge,isFirefox:$s.isFirefox,isIE:$s.isIE,isOpera:$s.isOpera,isSafari:$s.isSafari},os:{current:Ms.current,version:Ms.version,isAndroid:Ms.isAndroid,isChromeOS:Ms.isChromeOS,isFreeBSD:Ms.isFreeBSD,isiOS:Ms.isiOS,isLinux:Ms.isLinux,isMacOS:Ms.isMacOS,isSolaris:Ms.isSolaris,isWindows:Ms.isWindows},deviceType:{isDesktop:nr.isDesktop,isiPad:nr.isiPad,isiPhone:nr.isiPhone,isPhone:nr.isPhone,isTablet:nr.isTablet,isTouch:nr.isTouch,isWebView:nr.isWebView}},ZN=/^\s*|\s*$/g,Ah=e=>Ve(e)?"":(""+e).replace(ZN,""),JN=(e,t)=>t?t==="array"&&af(e)?!0:typeof e===t:e!==void 0,eA=(e,t,n={})=>{const s=ne(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},tA=$e,nA=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if($e(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Th=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),El(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Th(o,t,n,s),!0)))},Q={trim:Ah,isArray:af,is:JN,toArray:RN,makeMap:eA,each:El,map:lf,grep:Yi,inArray:PN,hasOwn:tA,extend:nA,walk:Th,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>Ct(e)?e:e===""?[]:lf(e.split(t||","),Ah),_addCacheSuffix:e=>{const t=Xe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Gr=(e,t,n=jr)=>e.exists(s=>n(s,t)),sA=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},bn=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),oA=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),Zi=(e,t)=>e?b.some(t):b.none();typeof window<"u"||Function("return this;")();const Rh=8,Ph=9,Oh=11,Ji=1,Dh=3,xt=e=>e.dom.nodeName.toLowerCase(),Bh=e=>e.dom.nodeType,wl=e=>t=>Bh(t)===e,rA=e=>Bh(e)===Rh||xt(e)==="#comment",ss=wl(Ji),zn=wl(Dh),iA=wl(Ph),aA=wl(Oh),mf=e=>t=>ss(t)&&xt(t)===e,Ih=(e,t,n)=>{if(ne(n)||je(n)||zt(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Kt=(e,t,n)=>{Ih(e.dom,t,n)},wo=(e,t)=>{const n=e.dom;ft(t,(s,o)=>{Ih(n,o,s)})},os=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},ao=(e,t)=>b.from(os(e,t)),xl=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},on=(e,t)=>{e.dom.removeAttribute(t)},lA=e=>{const t=e.dom.attributes;return t==null||t.length===0},Fh=e=>_e(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),pf=(e,t)=>{const n=os(e,t);return n===void 0||n===""?[]:n.split(" ")},cA=(e,t,n)=>{const o=pf(e,t).concat([n]);return Kt(e,t,o.join(" ")),!0},uA=(e,t,n)=>{const s=j(pf(e,t),o=>o!==n);return s.length>0?Kt(e,t,s.join(" ")):on(e,t),!1},ea=e=>e.dom.classList!==void 0,Lh=e=>pf(e,"class"),$h=(e,t)=>cA(e,"class",t),Mh=(e,t)=>uA(e,"class",t),fA=(e,t)=>z(Lh(e),t)?Mh(e,t):$h(e,t),ta=(e,t)=>{ea(e)?e.dom.classList.add(t):$h(e,t)},Uh=e=>{(ea(e)?e.dom.classList:Lh(e)).length===0&&on(e,"class")},kl=(e,t)=>{ea(e)?e.dom.classList.remove(t):Mh(e,t),Uh(e)},dA=(e,t)=>{const n=ea(e)?e.dom.classList.toggle(t):fA(e,t);return Uh(e),n},gf=(e,t)=>ea(e)&&e.dom.classList.contains(t),na=e=>e.style!==void 0&&He(e.style.getPropertyValue),mA=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return sa(s.childNodes[0])},pA=(e,t)=>{const s=(t||document).createElement(e);return sa(s)},gA=(e,t)=>{const s=(t||document).createTextNode(e);return sa(s)},sa=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},x={fromHtml:mA,fromTag:pA,fromText:gA,fromDom:sa,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(sa)},zh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},ds=(e,t)=>{const n=e.dom;if(n.nodeType!==Ji)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Hh=e=>e.nodeType!==Ji&&e.nodeType!==Ph&&e.nodeType!==Oh||e.childElementCount===0,hA=(e,t)=>{const n=t===void 0?document:t.dom;return Hh(n)?[]:V(n.querySelectorAll(e),x.fromDom)},bA=(e,t)=>{const n=t===void 0?document:t.dom;return Hh(n)?b.none():b.from(n.querySelector(e)).map(x.fromDom)},rt=(e,t)=>e.dom===t.dom,lo=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Wh=e=>x.fromDom(e.dom.ownerDocument),co=e=>iA(e)?e:Wh(e),CA=e=>x.fromDom(co(e).dom.documentElement),oa=e=>x.fromDom(co(e).dom.defaultView),Hn=e=>b.from(e.dom.parentNode).map(x.fromDom),vA=e=>b.from(e.dom.parentElement).map(x.fromDom),yA=(e,t)=>{const n=He(t)?t:tt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=x.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},EA=e=>{const t=n=>j(n,s=>!rt(e,s));return Hn(e).map(rn).map(t).getOr([])},sr=e=>b.from(e.dom.previousSibling).map(x.fromDom),ra=e=>b.from(e.dom.nextSibling).map(x.fromDom),Vh=e=>Nt(zh(e,sr)),jh=e=>zh(e,ra),rn=e=>V(e.dom.childNodes,x.fromDom),Nl=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(x.fromDom)},qh=e=>Nl(e,0),hf=e=>Nl(e,e.dom.childNodes.length-1),Kh=e=>e.dom.childNodes.length,_A=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return x.fromDom(t)},bf=e=>aA(e)&&oe(e.dom.host),Gh=He(Element.prototype.attachShadow)&&He(Node.prototype.getRootNode),SA=K(Gh),xo=Gh?e=>x.fromDom(e.dom.getRootNode()):co,Cf=e=>bf(e)?e:_A(co(e)),wA=e=>bf(e)?e:x.fromDom(co(e).dom.body),xA=e=>{const t=xo(e);return bf(t)?b.some(t):b.none()},kA=e=>x.fromDom(e.dom.host),Yh=e=>{if(SA()&&oe(e.target)){const t=x.fromDom(e.target);if(ss(t)&&NA(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return nn(n)}}return b.from(e.target)},NA=e=>oe(e.dom.shadowRoot),Yr=e=>{const t=zn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return xA(x.fromDom(t)).fold(()=>n.body.contains(t),At(Yr,kA))},Xh=(e,t,n)=>{if(!ne(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);na(e)&&e.style.setProperty(t,n)},AA=(e,t)=>{na(e)&&e.style.removeProperty(t)},Qh=(e,t,n)=>{const s=e.dom;Xh(s,t,n)},Al=(e,t)=>{const n=e.dom;ft(t,(s,o)=>{Xh(n,o,s)})},Us=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Yr(e)?Zh(n,t):o},Zh=(e,t)=>na(e)?e.style.getPropertyValue(t):"",Tl=(e,t)=>{const n=e.dom,s=Zh(n,t);return b.from(s).filter(o=>o.length>0)},Jh=e=>{const t={},n=e.dom;if(na(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},eb=(e,t)=>{const n=e.dom;AA(n,t),Gr(ao(e,"style").map(Kr),"")&&on(e,"style")},TA=e=>e.dom.offsetWidth,Wn=(e,t)=>{Hn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},ko=(e,t)=>{ra(e).fold(()=>{Hn(e).each(o=>{Wt(o,t)})},s=>{Wn(s,t)})},tb=(e,t)=>{qh(e).fold(()=>{Wt(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Wt=(e,t)=>{e.dom.appendChild(t.dom)},RA=(e,t)=>{Wn(e,t),Wt(t,e)},PA=(e,t)=>{R(t,(n,s)=>{const o=s===0?e:t[s-1];ko(o,n)})},or=(e,t)=>{R(t,n=>{Wt(e,n)})},ia=e=>{e.dom.textContent="",R(rn(e),t=>{_t(t)})},_t=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},No=e=>{const t=rn(e);t.length>0&&PA(e,t),_t(e)},OA=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,rn(x.fromDom(s))},DA=e=>V(e,x.fromDom),nb=e=>e.dom.innerHTML,Rl=(e,t)=>{const s=Wh(e).dom,o=x.fromDom(s.createDocumentFragment()),r=OA(t,s);or(o,r),ia(e),Wt(e,o)},BA=e=>{const t=x.fromTag("div"),n=x.fromDom(e.dom.cloneNode(!0));return Wt(t,n),nb(t)},IA=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),FA=e=>{const t=x.fromDom(Yh(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Lt(s,n);return IA(t,e.clientX,e.clientY,n,s,o,e)},LA=(e,t)=>n=>{e(n)&&t(FA(n))},$A=(e,t,n,s,o)=>{const r=LA(n,s);return e.dom.addEventListener(t,r,o),{unbind:ae(UA,e,t,r,o)}},MA=(e,t,n,s)=>$A(e,t,n,s,!1),UA=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},sb=(e,t)=>({left:e,top:t,translate:(s,o)=>sb(e+s,t+o)}),Xr=sb,zA=e=>{const t=e.getBoundingClientRect();return Xr(t.left,t.top)},Pl=(e,t)=>e!==void 0?e:t!==void 0?t:0,HA=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Xr(n.offsetLeft,n.offsetTop);const r=Pl(s==null?void 0:s.pageYOffset,o.scrollTop),i=Pl(s==null?void 0:s.pageXOffset,o.scrollLeft),a=Pl(o.clientTop,n.clientTop),c=Pl(o.clientLeft,n.clientLeft);return vf(e).translate(i-c,r-a)},vf=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Xr(s.offsetLeft,s.offsetTop):Yr(e)?zA(t):Xr(0,0)},yf=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Xr(n,s)},ob=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},rb=(e,t)=>{tr().browser.isSafari()&&He(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},WA=e=>{const t=e===void 0?window:e;return tr().browser.isFirefox()?b.none():b.from(t.visualViewport)},ib=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),ab=e=>{const t=e===void 0?window:e,n=t.document,s=yf(x.fromDom(n));return WA(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return ib(s.left,s.top,r,i)},o=>ib(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},rr=e=>t=>!!t&&t.nodeType===e,Ol=e=>!!e&&!Object.getPrototypeOf(e),fe=rr(1),Ef=e=>{const t=e.toLowerCase();return n=>oe(n)&&n.nodeName.toLowerCase()===t},ms=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return z(t,s)}return!1}},Dl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(fe(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const i=o.getComputedStyle(s,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}}return!1}},lb=e=>t=>fe(t)&&t.hasAttribute(e),VA=(e,t)=>n=>fe(n)&&n.getAttribute(e)===t,ir=e=>fe(e)&&e.hasAttribute("data-mce-bogus"),jA=e=>fe(e)&&e.getAttribute("data-mce-bogus")==="all",uo=e=>fe(e)&&e.tagName==="TABLE",cb=e=>t=>!!(fe(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),_f=ms(["textarea","input"]),X=rr(3),qA=rr(4),KA=rr(7),Ao=rr(8),aa=rr(9),Sf=rr(11),Ot=Ef("br"),ub=Ef("img"),zs=cb("true"),vt=cb("false"),Bl=ms(["td","th"]),fb=ms(["td","th","caption"]),Hs=ms(["video","audio","object","embed"]),GA=Ef("li"),YA=tr().browser,db=e=>ve(e,ss),XA=e=>YA.isFirefox()&&xt(e)==="table"?db(rn(e)).filter(t=>xt(t)==="caption").bind(t=>db(jh(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,mb=(e,t)=>e.children&&z(e.children,t),QA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Us(x.fromDom(e),"position")==="static"){const a=t.getBoundingClientRect();return s=a.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=a.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!mb(i,n);){const a=i;s+=a.offsetLeft||0,o+=a.offsetTop||0,i=a.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!mb(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=XA(x.fromDom(t))}return{x:s,y:o}};var pb=(e,t,n,s,o)=>e(n,s)?b.some(n):He(o)&&o(n)?b.none():t(n,s,o);const Qr=(e,t,n)=>{let s=e.dom;const o=He(n)?n:tt;for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},Zr=(e,t,n)=>pb((o,r)=>r(o),Qr,e,t,n),ZA=(e,t)=>{const n=e.dom;return n.parentNode?JA(x.fromDom(n.parentNode),s=>!rt(e,s)&&t(s)):b.none()},JA=(e,t)=>{const n=o=>t(x.fromDom(o));return ve(e.dom.childNodes,n).map(x.fromDom)},eT=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=x.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},la=(e,t,n)=>Qr(e,s=>ds(s,t),n),ca=(e,t)=>bA(t,e),ar=(e,t,n)=>pb((o,r)=>ds(o,r),la,e,t,n),gb=(e,t={})=>{let n=0;const s={},o=x.fromDom(e),r=co(o),i=t.maxLoadTime||5e3,a=y=>{t.referrerPolicy=y},c=y=>{Wt(Cf(o),y)},u=y=>{const S=Cf(o);ca(S,"#"+y).each(_t)},d=y=>ht(s,y).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),g=y=>new Promise((S,w)=>{let N;const A=Q._addCacheSuffix(y),U=d(A);s[A]=U,U.count++;const H=(be,Te)=>{R(be,Zo),U.status=Te,U.passed=[],U.failed=[],N&&(N.onload=null,N.onerror=null,N=null)},ee=()=>H(U.passed,2),W=()=>H(U.failed,3),F=(be,Te)=>{be()||(Date.now()-me<i?setTimeout(Te):W())},L=()=>{F(()=>{const be=e.styleSheets;let Te=be.length;for(;Te--;){const qe=be[Te].ownerNode;if(qe&&N&&qe.id===N.id)return ee(),!0}return!1},L)};if(S&&U.passed.push(S),w&&U.failed.push(w),U.status===1)return;if(U.status===2){ee();return}if(U.status===3){W();return}U.status=1;const te=x.fromTag("link",r.dom);wo(te,{rel:"stylesheet",type:"text/css",id:U.id});const me=Date.now();t.contentCssCors&&Kt(te,"crossOrigin","anonymous"),t.referrerPolicy&&Kt(te,"referrerpolicy",t.referrerPolicy),N=te.dom,N.onload=L,N.onerror=W,c(te),Kt(te,"href",A)}),p=y=>Promise.allSettled(V(y,w=>g(w).then(K(w)))).then(w=>{const N=ue(w,A=>A.status==="fulfilled");return N.fail.length>0?Promise.reject(V(N.fail,A=>A.reason)):V(N.pass,A=>A.value)}),E=y=>{const S=Q._addCacheSuffix(y);ht(s,S).each(w=>{--w.count===0&&(delete s[S],u(w.id))})};return{load:g,loadAll:p,unload:E,unloadAll:y=>{R(y,S=>{E(S)})},_setReferrerPolicy:a}},hb=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=xo(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=gb(r,s);return e.set(r,i),i})}}})();class $t{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const tT=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],nT=["td","th"],sT=["thead","tbody","tfoot"],oT=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],rT=["h1","h2","h3","h4","h5","h6"],iT=["li","dd","dt"],aT=["ul","ol","dl"],lT=["pre","script","textarea","style"],cT=["pre"].concat(rT),To=e=>{let t;return n=>(t=t||Fs(e,Et),$e(t,xt(n)))},ps=To(tT),uT=e=>xt(e)==="table",wf=e=>ss(e)&&!ps(e),lr=e=>ss(e)&&xt(e)==="br",fT=To(oT),xf=To(aT),ua=To(iT),dT=To(sT),Il=To(nT),Fl=To(lT),mT=To(cT),pT=e=>mT(e)||wf(e),bb=(e,t,n)=>la(e,t,n).isSome(),Jr="\uFEFF",Gt="\xA0",Cb=e=>e===Jr,gT=e=>e.replace(/\uFEFF/g,""),vb=(e,t)=>{let n=[];return R(rn(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(vb(s,t))}),n},Cn=(e,t)=>hA(t,e),yb=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(zn,"text"),kf=e=>yb.get(e),Eb=e=>yb.getOption(e),hT=e=>{const t=[];let n=e.dom;for(;n;)t.push(x.fromDom(n)),n=n.lastChild;return t},bT=e=>{const t=Cn(e,"br"),n=j(hT(e).slice(-1),lr);t.length===n.length&&R(n,_t)},Nf=()=>{const e=x.fromTag("br");return Kt(e,"data-mce-bogus","1"),e},cr=e=>{ia(e),Wt(e,Nf())},CT=e=>{hf(e).each(t=>{sr(t).each(n=>{ps(e)&&lr(t)&&ps(n)&&_t(t)})})},en=Jr,Ll=Cb,fo=gT,vT=fe,ei=X,ti=e=>(ei(e)&&(e=e.parentNode),vT(e)&&e.hasAttribute("data-mce-caret")),ni=e=>ei(e)&&Ll(e.data),Vn=e=>ti(e)||ni(e),_b=e=>e.firstChild!==e.lastChild||!Ot(e.firstChild),yT=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(en),r=e.parentNode;if(t){const i=e.previousSibling;if(ei(i)){if(Vn(i))return i;if(Ml(i))return i.splitText(i.data.length-1)}r==null||r.insertBefore(o,e)}else{const i=e.nextSibling;if(ei(i)){if(Vn(i))return i;if($l(i))return i.splitText(1),i}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},Af=e=>{const t=e.container();return X(t)?t.data.charAt(e.offset())===en||e.isAtStart()&&ni(t.previousSibling):!1},Tf=e=>{const t=e.container();return X(t)?t.data.charAt(e.offset()-1)===en||e.isAtEnd()&&ni(t.nextSibling):!1},ET=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Nf().dom);const i=t.parentNode;return n?i==null||i.insertBefore(r,t):t.nextSibling?i==null||i.insertBefore(r,t.nextSibling):i==null||i.appendChild(r),r},$l=e=>ei(e)&&e.data[0]===en,Ml=e=>ei(e)&&e.data[e.data.length-1]===en,_T=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];ir(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},Rf=e=>e&&e.hasAttribute("data-mce-caret")?(_T(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Sb=e=>ti(e.startContainer),wb=zs,ST=vt,wT=Ot,xT=X,kT=ms(["script","style","textarea"]),xb=ms(["img","input","textarea","hr","iframe","video","audio","object","embed"]),NT=ms(["table"]),AT=Vn,rs=e=>AT(e)?!1:xT(e)?!kT(e.parentNode):xb(e)||wT(e)||NT(e)||Pf(e),TT=e=>fe(e)&&e.getAttribute("unselectable")==="true",Pf=e=>!TT(e)&&ST(e),RT=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Pf(n))return!1;if(wb(n))return!0}return!0},PT=e=>Pf(e)?!_e(wt(e.getElementsByTagName("*")),(t,n)=>t||wb(n),!1):!1,OT=e=>xb(e)||PT(e),kb=(e,t)=>rs(e)&&RT(e,t),DT=/^[ \t\r\n]*$/,ur=e=>DT.test(e),BT=e=>" \f	\v".indexOf(e)!==-1,Nb=e=>e===`
`||e==="\r",IT=(e,t)=>t<e.length&&t>=0?Nb(e[t]):!1,Ab=(e,t=4,n=!0,s=!0)=>{const o=HN(" ",t),r=e.replace(/\t/g,o);return _e(r,(a,c)=>BT(c)||c===Gt?a.pcIsSpace||a.str===""&&n||a.str.length===r.length-1&&s||IT(r,a.str.length+1)?{pcIsSpace:!1,str:a.str+Gt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Nb(c),str:a.str+c},{pcIsSpace:!1,str:""}).str},FT=(e,t)=>{const n=x.fromDom(t),s=x.fromDom(e);return bb(s,"pre,code",ae(rt,n))},LT=(e,t)=>X(e)&&ur(e.data)&&!FT(e,t),$T=e=>fe(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Ul=(e,t)=>rs(e)&&!LT(e,t)||$T(e)||MT(e),MT=lb("data-mce-bookmark"),UT=lb("data-mce-bogus"),zT=VA("data-mce-bogus","all"),HT=(e,t)=>{let n=0;if(Ul(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new $t(s,e);do{if(t){if(zT(s)){s=o.next(!0);continue}if(UT(s)){s=o.next();continue}}if(Ot(s)){n++,s=o.next();continue}if(Ul(s,e))return!1;s=o.next()}while(s);return n<=1}},Yt=(e,t=!0)=>HT(e.dom,t),WT=e=>e.nodeName.toLowerCase()==="span",Tb=(e,t)=>oe(e)&&(Ul(e,t)||wf(x.fromDom(e))),VT=(e,t)=>{const n=new $t(e,t).prev(!1),s=new $t(e,t).next(!1),o=at(n)||Tb(n,t),r=at(s)||Tb(s,t);return o&&r},Rb=e=>WT(e)&&e.getAttribute("data-mce-type")==="bookmark",jT=(e,t)=>X(e)&&e.data.length>0&&VT(e,t),qT=e=>fe(e)?e.childNodes.length>0:!1,KT=e=>Sf(e)||aa(e),Of=(e,t,n)=>{var s;const o=n||t;if(fe(t)&&Rb(t))return t;const r=t.childNodes;for(let i=r.length-1;i>=0;i--)Of(e,r[i],o);if(fe(t)){const i=t.childNodes;i.length===1&&Rb(i[0])&&((s=t.parentNode)===null||s===void 0||s.insertBefore(i[0],t))}return!KT(t)&&!Ul(t,o)&&!qT(t)&&!jT(t,o)&&e.remove(t),t},GT=Q.makeMap,zl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,YT=/[<>&\"\']/g,XT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,QT={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},fr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ZT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},JT=e=>{const t=x.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Pb=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!fr[r]){const i="&"+s[o+1]+";";n[r]=i,n[i]=r}}return n}else return},Df=Pb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ob=(e,t)=>e.replace(t?zl:Hl,n=>fr[n]||n),eR=e=>(""+e).replace(YT,t=>fr[t]||t),Db=(e,t)=>e.replace(t?zl:Hl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":fr[n]||"&#"+n.charCodeAt(0)+";"),Bf=(e,t,n)=>{const s=n||Df;return e.replace(t?zl:Hl,o=>fr[o]||s[o]||o)},Ro={encodeRaw:Ob,encodeAllRaw:eR,encodeNumeric:Db,encodeNamed:Bf,getEncodeFunc:(e,t)=>{const n=Pb(t)||Df,s=(i,a)=>i.replace(a?zl:Hl,c=>fr[c]!==void 0?fr[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(i,a)=>Bf(i,a,n),r=GT(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:Bf:r.numeric?Db:Ob},decode:e=>e.replace(XT,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):QT[n]||String.fromCharCode(n)):ZT[t]||Df[t]||JT(t))},Wl={},Vl={},tR={},si=Q.makeMap,an=Q.each,If=Q.extend,Bb=Q.explode,nR=Q.inArray,tn=(e,t)=>(e=Q.trim(e),e?e.split(t||" "):[]),Ib=(e,t={})=>{const n=si(e," ",si(e.toUpperCase()," "));return If(n,t)},Fb=e=>Ib("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),sR=e=>{const t={};let n,s,o,r;const i=(c,u="",d="")=>{const g=tn(d),p=tn(c);let E=p.length;for(;E--;){const _=tn([n,u].join(" "));t[p[E]]={attributes:Fs(_,()=>({})),attributesOrder:_,children:Fs(g,K(tR))}}},a=(c,u)=>{const d=tn(c),g=tn(u);let p=d.length;for(;p--;){const E=t[d[p]];for(let _=0,y=g.length;_<y;_++)E.attributes[g[_]]={},E.attributesOrder.push(g[_])}};if(Wl[e])return Wl[e];if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"){n+=" xml:lang";const c="acronym applet basefont big font strike tt";o=[o,c].join(" "),an(tn(c),d=>{i(d,"",o)});const u="center dir isindex noframes";s=[s,u].join(" "),r=[s,o].join(" "),an(tn(u),d=>{i(d,"",r)})}return r=r||[s,o].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),i("address dt dd div caption","",r),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),i("blockquote","cite",r),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",r),i("dl","","dt dd"),i("a","href target rel media hreflang type",o),i("q","cite",o),i("ins del","cite datetime",r),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",r),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),i("param","name value"),i("map","name",[r,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",r),i("th","colspan rowspan headers scope abbr",r),i("form","accept-charset action autocomplete enctype method name novalidate target",r),i("fieldset","disabled form name",[r,"legend"].join(" ")),i("label","form for",o),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[r,"li"].join(" ")),i("noscript","",r),e!=="html4"&&(i("wbr"),i("ruby","",[o,"rt rp"].join(" ")),i("figcaption","",r),i("mark rt rp summary bdi","",o),i("canvas","width height",r),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[o,"option"].join(" ")),i("article section nav aside main header footer","",r),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[r,"figcaption"].join(" ")),i("time","datetime",o),i("dialog","open",r),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",o),i("progress","value max",o),i("meter","value min max low high optimum",o),i("details","open",[r,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),e!=="html4"&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&R([t.video,t.audio],c=>{delete c.children.audio,delete c.children.video}),an(tn("a form meter progress dfn"),c=>{t[c]&&delete t[c].children[c]}),delete t.caption.children.table,delete t.script,Wl[e]=t,t},Ff=(e,t)=>{if(e){const n={};return ne(e)&&(e={"*":e}),an(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?si(s,/[, ]/):Bb(s,/[, ]/)}),n}else return},Po=(e={})=>{var t;const n={},s={};let o=[];const r={},i={},a=(Se,Ne,Qe)=>{const et=e[Se];if(et)return si(et,/[, ]/,si(et.toUpperCase(),/[, ]/));{let Dt=Vl[Se];return Dt||(Dt=Ib(Ne,Qe),Vl[Se]=Dt),Dt}},c=(t=e.schema)!==null&&t!==void 0?t:"html5",u=sR(c);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Ff(e.valid_styles),g=Ff(e.invalid_styles,"map"),p=Ff(e.valid_classes,"map"),E=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),_=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),w="td th iframe video audio object script code",N=a("non_empty_elements",w+" pre",y),A=a("move_caret_before_on_enter_elements",w+" table",y),U=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),H=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",U),ee=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");an("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Se=>{i[Se]=new RegExp("</"+Se+"[^>]*>","gi")});const W=Se=>new RegExp("^"+Se.replace(/([?+*])/g,".$1")+"$"),F=Se=>{const Ne=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Qe=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,et=/[*?+]/;if(Se){const Dt=tn(Se,",");let bt,dt;n["@"]&&(bt=n["@"].attributes,dt=n["@"].attributesOrder);for(let Rt=0,Qt=Dt.length;Rt<Qt;Rt++){let Bt=Ne.exec(Dt[Rt]);if(Bt){const Ss=Bt[1],Jn=Bt[2],ws=Bt[3],xs=Bt[5],ks={},Ns=[],It={attributes:ks,attributesOrder:Ns};if(Ss==="#"&&(It.paddEmpty=!0),Ss==="-"&&(It.removeEmpty=!0),Bt[4]==="!"&&(It.removeEmptyAttrs=!0),bt&&(ft(bt,(es,As)=>{ks[As]=es}),dt&&Ns.push(...dt)),xs){const es=tn(xs,"|");for(let As=0,Br=es.length;As<Br;As++)if(Bt=Qe.exec(es[As]),Bt){const as={},In=Bt[1],dn=Bt[2].replace(/[\\:]:/g,":"),ls=Bt[3],Fn=Bt[4];if(In==="!"&&(It.attributesRequired=It.attributesRequired||[],It.attributesRequired.push(dn),as.required=!0),In==="-"){delete ks[dn],Ns.splice(nR(Ns,dn),1);continue}if(ls&&(ls==="="&&(It.attributesDefault=It.attributesDefault||[],It.attributesDefault.push({name:dn,value:Fn}),as.defaultValue=Fn),ls==="~"&&(It.attributesForced=It.attributesForced||[],It.attributesForced.push({name:dn,value:Fn}),as.forcedValue=Fn),ls==="<"&&(as.validValues=si(Fn,"?"))),et.test(dn)){const Ir=as;It.attributePatterns=It.attributePatterns||[],Ir.pattern=W(dn),It.attributePatterns.push(Ir)}else ks[dn]||Ns.push(dn),ks[dn]=as}}if(!bt&&Jn==="@"&&(bt=ks,dt=Ns),ws&&(It.outputName=Jn,n[ws]=It),et.test(Jn)){const es=It;es.pattern=W(Jn),o.push(es)}else n[Jn]=It}}}},L=Se=>{o=[],R(Un(n),Ne=>{delete n[Ne]}),F(Se),an(u,(Ne,Qe)=>{s[Qe]=Ne.children})},te=Se=>{const Ne=/^(~)?(.+)$/;Se&&(delete Vl.text_block_elements,delete Vl.block_elements,an(tn(Se,","),Qe=>{const et=Ne.exec(Qe);if(et){const Dt=et[1]==="~",bt=Dt?"span":"div",dt=et[2];if(s[dt]=s[bt],r[dt]=bt,N[dt.toUpperCase()]={},N[dt]={},Dt||(H[dt.toUpperCase()]={},H[dt]={}),!n[dt]){let Rt=n[bt];Rt=If({},Rt),delete Rt.removeEmptyAttrs,delete Rt.removeEmpty,n[dt]=Rt}an(s,(Rt,Qt)=>{Rt[bt]&&(s[Qt]=Rt=If({},s[Qt]),Rt[dt]=Rt[bt])})}}))},me=Se=>{const Ne=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Wl[c],Se&&an(tn(Se,","),Qe=>{const et=Ne.exec(Qe);if(et){const Dt=et[1];let bt;Dt?bt=s[et[2]]:bt=s[et[2]]={"#comment":{}},bt=s[et[2]],an(tn(et[3],"|"),dt=>{Dt==="-"?delete bt[dt]:bt[dt]={}})}})},be=Se=>{const Ne=n[Se];if(Ne)return Ne;let Qe=o.length;for(;Qe--;){const et=o[Qe];if(et.pattern.test(Se))return et}};e.valid_elements?L(e.valid_elements):(an(u,(Se,Ne)=>{n[Ne]={attributes:Se.attributes,attributesOrder:Se.attributesOrder},s[Ne]=Se.children}),an(tn("strong/b em/i"),Se=>{const Ne=tn(Se,"/");n[Ne[1]].outputName=Ne[0]}),an(ee,(Se,Ne)=>{n[Ne]&&(e.padd_empty_block_inline_children&&(n[Ne].paddInEmptyBlock=!0),n[Ne].removeEmpty=!0)}),an(tn("ol ul blockquote a table tbody"),Se=>{n[Se]&&(n[Se].removeEmpty=!0)}),an(tn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Se=>{n[Se].paddEmpty=!0}),an(tn("span"),Se=>{n[Se].removeEmptyAttrs=!0})),te(e.custom_elements),me(e.valid_children),F(e.extended_valid_elements),me("+ol[ul|ol],+ul[ul|ol]"),an({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Se,Ne)=>{n[Ne]&&(n[Ne].parentsRequired=tn(Se))}),e.invalid_elements&&an(Bb(e.invalid_elements),Se=>{n[Se]&&delete n[Se]}),be("span")||F("span[!data-mce-type|*]");const Te=K(d),ze=K(g),qe=K(p),nt=K(S),Mt=K(H),Z=K(U),Re=K(ee),De=K(Object.seal(y)),ke=K(_),kt=K(N),le=K(A),we=K(E),Ee=K(Object.seal(i)),se=(Se,Ne)=>{const Qe=s[Se.toLowerCase()];return!!(Qe&&Qe[Ne.toLowerCase()])},Fe=(Se,Ne)=>{const Qe=be(Se);if(Qe)if(Ne){if(Qe.attributes[Ne])return!0;const et=Qe.attributePatterns;if(et){let Dt=et.length;for(;Dt--;)if(et[Dt].pattern.test(Ne))return!0}}else return!0;return!1},Be=K(r);return{type:c,children:s,elements:n,getValidStyles:Te,getValidClasses:qe,getBlockElements:Mt,getInvalidStyles:ze,getVoidElements:De,getTextBlockElements:Z,getTextInlineElements:Re,getBoolAttrs:nt,getElementRule:be,getSelfClosingElements:ke,getNonEmptyElements:kt,getMoveCaretBeforeOnEnterElements:le,getWhitespaceElements:we,getSpecialElements:Ee,isValidChild:se,isValid:Fe,getCustomElements:Be,addValidElements:F,setValidElements:L,addCustomElements:te,addValidChildren:me}},Lf=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let i,a;const c=Jr;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const u=(`\\" \\' \\; \\: ; : `+c).split(" ");for(let g=0;g<u.length;g++)r[u[g]]=c+g,r[c+g]=u[g];const d={parse:g=>{const p={};let E=!1;const _=e.url_converter,y=e.url_converter_scope||d,S=(F,L,te)=>{const me=p[F+"-top"+L];if(!me)return;const be=p[F+"-right"+L];if(!be)return;const Te=p[F+"-bottom"+L];if(!Te)return;const ze=p[F+"-left"+L];if(!ze)return;const qe=[me,be,Te,ze];let nt=qe.length-1;for(;nt--&&qe[nt]===qe[nt+1];);nt>-1&&te||(p[F+L]=nt===-1?qe[0]:qe.join(" "),delete p[F+"-top"+L],delete p[F+"-right"+L],delete p[F+"-bottom"+L],delete p[F+"-left"+L])},w=F=>{const L=p[F];if(!L)return;const te=L.split(" ");let me=te.length;for(;me--;)if(te[me]!==te[0])return!1;return p[F]=te[0],!0},N=(F,L,te,me)=>{!w(L)||!w(te)||!w(me)||(p[F]=p[L]+" "+p[te]+" "+p[me],delete p[L],delete p[te],delete p[me])},A=F=>(E=!0,r[F]),U=(F,L)=>(E&&(F=F.replace(/\uFEFF[0-9]/g,te=>r[te])),L||(F=F.replace(/\\([\'\";:])/g,"$1")),F),H=F=>String.fromCharCode(parseInt(F.slice(1),16)),ee=F=>F.replace(/\\[0-9a-f]+/gi,H),W=(F,L,te,me,be,Te)=>{if(be=be||Te,be)return be=U(be),"'"+be.replace(/\'/g,"\\'")+"'";if(L=U(L||te||me||""),!e.allow_script_urls){const ze=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ze)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ze))return""}return _&&(L=_.call(y,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(g){g=g.replace(/[\u0000-\u001F]/g,""),g=g.replace(/\\[\"\';:\uFEFF]/g,A).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,A));let F;for(;F=s.exec(g);){s.lastIndex=F.index+F[0].length;let L=F[1].replace(o,"").toLowerCase(),te=F[2].replace(o,"");if(L&&te){if(L=ee(L),te=ee(te),L.indexOf(c)!==-1||L.indexOf('"')!==-1||!e.allow_script_urls&&(L==="behavior"||/expression\s*\(|\/\*|\*\//.test(te)))continue;L==="font-weight"&&te==="700"?te="bold":(L==="color"||L==="background-color")&&(te=te.toLowerCase()),te=te.replace(n,W),p[L]=E?U(te,!0):te}}S("border","",!0),S("border","-width"),S("border","-color"),S("border","-style"),S("padding",""),S("margin",""),N("border","border-width","border-style","border-color"),p.border==="medium none"&&delete p.border,p["border-image"]==="none"&&delete p["border-image"]}return p},serialize:(g,p)=>{let E="";const _=(S,w)=>{const N=w[S];if(N)for(let A=0,U=N.length;A<U;A++){const H=N[A],ee=g[H];ee&&(E+=(E.length>0?" ":"")+H+": "+ee+";")}},y=(S,w)=>{if(!a||!w)return!0;let N=a["*"];return N&&N[S]?!1:(N=a[w],!(N&&N[S]))};return p&&i?(_("*",i),_(p,i)):ft(g,(S,w)=>{S&&y(w,p)&&(E+=(E.length>0?" ":"")+w+": "+S+";")}),E}};return d},oR={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},rR=e=>e instanceof Event||He(e.initEvent),iR=e=>e.isDefaultPrevented===Et||e.isDefaultPrevented===tt,aR=e=>Ve(e.preventDefault)||rR(e),Lb=(e,t)=>{const n=t!=null?t:{};for(const s in e)$e(oR,s)||(n[s]=e[s]);return oe(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},$f=(e,t,n,s)=>{var o;const r=Lb(t,s);return r.type=e,Ve(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),aR(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=Et,He(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=Et,He(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=Et,r.stopPropagation()},iR(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?Et:tt,r.isPropagationStopped=r.cancelBubble===!0?Et:tt,r.isImmediatePropagationStopped=tt)),r},lR="mce-data-",cR=/^(?:mouse|contextmenu)|click/,Mf=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},jl=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},uR=e=>oe(e)&&cR.test(e.type),fa=(e,t)=>{const n=$f(e.type,e,document,t);if(uR(e)&&at(e.pageX)&&!at(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},fR=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{jl(e,"DOMContentLoaded",i),jl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():Mf(e,"DOMContentLoaded",i),n.domLoaded||Mf(e,"load",i)};class dr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=lR+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i;const a=window,c=p=>{r.executeHandlers(fa(p||a.event),u)};if(!t||X(t)||Ao(t))return s;let u;t[r.expando]?u=t[r.expando]:(u=r.count++,t[r.expando]=u,r.events[u]={}),o=o||t;const d=n.split(" ");let g=d.length;for(;g--;){let p=d[g],E=c,_=!1,y=!1;if(p==="DOMContentLoaded"&&(p="ready"),r.domLoaded&&p==="ready"&&t.readyState==="complete"){s.call(o,fa({type:p}));continue}!r.hasFocusIn&&(p==="focusin"||p==="focusout")&&(_=!0,y=p==="focusin"?"focus":"blur",E=S=>{const w=fa(S||a.event);w.type=w.type==="focus"?"focusin":"focusout",r.executeHandlers(w,u)}),i=r.events[u][p],i?p==="ready"&&r.domLoaded?s(fa({type:p})):i.push({func:s,scope:o}):(r.events[u][p]=i=[{func:s,scope:o}],i.fakeName=y,i.capture=_,i.nativeHandler=E,p==="ready"?fR(t,E,r):Mf(t,y||p,E,_))}return t=i=null,s}unbind(t,n,s){if(!t||X(t)||Ao(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const c=i[a],u=r[c];if(u){if(s){let d=u.length;for(;d--;)if(u[d].func===s){const g=u.nativeHandler,p=u.fakeName,E=u.capture,_=u.slice(0,d).concat(u.slice(d+1));_.nativeHandler=g,_.fakeName=p,_.capture=E,r[c]=_}}(!s||u.length===0)&&(delete r[c],jl(t,u.fakeName||c,u.nativeHandler,u.capture))}}}else ft(r,(i,a)=>{jl(t,i.fakeName||a,i.nativeHandler,i.capture)}),r={};for(const i in r)if($e(r,i))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||X(t)||Ao(t))return this;const o=fa({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||X(t)||Ao(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const a=o[r];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}dr.Event=new dr;const Uf=Q.each,dR=Q.grep,zf="data-mce-style",mR=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),da=(e,t,n)=>{Ve(n)||n===""?on(e,t):Kt(e,t,n)},$b=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),oi=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&X(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},Mb=(e,t)=>{const n=os(t,"style"),s=e.serialize(e.parse(n),xt(t));da(t,zf,s)},pR=(e,t)=>zt(e)?$e(mR,t)?e+"":e+"px":e,Ub=(e,t,n)=>{const s=$b(t);Ve(n)||n===""?eb(e,s):Qh(e,s,pR(n,s))},gR=(e,t,n)=>{const s=t.keep_values,o={set:(i,a,c)=>{const u=x.fromDom(i);He(t.url_converter)&&oe(a)&&(a=t.url_converter.call(t.url_converter_scope||n(),String(a),c,i));const d="data-mce-"+c;da(u,d,a),da(u,c,a)},get:(i,a)=>{const c=x.fromDom(i);return os(c,"data-mce-"+a)||os(c,a)}},r={style:{set:(i,a)=>{const c=x.fromDom(i);s&&da(c,zf,a),on(c,"style"),ne(a)&&Al(c,e.parse(a))},get:i=>{const a=x.fromDom(i),c=os(a,zf)||os(a,"style");return e.serialize(e.parse(c),xt(a))}}};return s&&(r.href=r.src=o),r},ct=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,a=!0,c=hb.forElement(x.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),u=[],d=t.schema?t.schema:Po({}),g=Lf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),p=t.ownEvents?new dr:dr.Event,E=d.getBlockElements(),_=O=>ne(O)?$e(E,O):fe(O)&&$e(E,O.nodeName),y=O=>O&&e&&ne(O)?e.getElementById(O):O,S=O=>{const D=y(O);return oe(D)?x.fromDom(D):null},w=(O,D,G="")=>{let q;const he=S(O);if(oe(he)&&ss(he)){const We=Fr[D];We&&We.get?q=We.get(he.dom,D):q=os(he,D)}return oe(q)?q:G},N=O=>{const D=y(O);return Ve(D)?[]:D.attributes},A=(O,D,G)=>{ke(O,q=>{if(fe(q)){const he=x.fromDom(q),We=G===""?null:G,mt=os(he,D),pt=Fr[D];pt&&pt.set?pt.set(he.dom,We,D):da(he,D,We),mt!==We&&t.onSetAttrib&&t.onSetAttrib({attrElm:he.dom,attrName:D,attrValue:We})}})},U=(O,D)=>O.cloneNode(D),H=()=>t.root_element||e.body,ee=O=>{const D=ab(O);return{x:D.x,y:D.y,w:D.width,h:D.height}},W=(O,D)=>QA(e.body,y(O),D),F=(O,D,G)=>{ke(O,q=>{const he=x.fromDom(q);Ub(he,D,G),t.update_styles&&Mb(g,he)})},L=(O,D)=>{ke(O,G=>{const q=x.fromDom(G);ft(D,(he,We)=>{Ub(q,We,he)}),t.update_styles&&Mb(g,q)})},te=(O,D,G)=>{const q=y(O);if(!(Ve(q)||!fe(q)))return G?Us(x.fromDom(q),$b(D)):(D=D.replace(/-(\D)/g,(he,We)=>We.toUpperCase()),D==="float"&&(D="cssFloat"),q.style?q.style[D]:void 0)},me=O=>{const D=y(O);if(!D)return{w:0,h:0};let G=te(D,"width"),q=te(D,"height");return(!G||G.indexOf("px")===-1)&&(G="0"),(!q||q.indexOf("px")===-1)&&(q="0"),{w:parseInt(G,10)||D.offsetWidth||D.clientWidth,h:parseInt(q,10)||D.offsetHeight||D.clientHeight}},be=O=>{const D=y(O),G=W(D),q=me(D);return{x:G.x,y:G.y,w:q.w,h:q.h}},Te=(O,D)=>{if(!O)return!1;const G=Ct(O)?O:[O];return Y(G,q=>ds(x.fromDom(q),D))},ze=(O,D,G,q)=>{const he=[];let We=y(O);q=q===void 0;const mt=G||(H().nodeName!=="BODY"?H().parentNode:null);if(ne(D))if(D==="*")D=fe;else{const pt=D;D=Ln=>Te(Ln,pt)}for(;We&&!(We===mt||Ve(We.nodeType)||aa(We)||Sf(We));){if(!D||D(We))if(q)he.push(We);else return[We];We=We.parentNode}return q?he:null},qe=(O,D,G)=>{const q=ze(O,D,G,!1);return q&&q.length>0?q[0]:null},nt=(O,D,G)=>{let q=D;if(O){ne(D)&&(q=he=>Te(he,D));for(let he=O[G];he;he=he[G])if(He(q)&&q(he))return he}return null},Mt=(O,D)=>nt(O,D,"nextSibling"),Z=(O,D)=>nt(O,D,"previousSibling"),Re=O=>He(O.querySelectorAll),De=(O,D)=>{var G,q;const he=(q=(G=y(D))!==null&&G!==void 0?G:t.root_element)!==null&&q!==void 0?q:e;return Re(he)?wt(he.querySelectorAll(O)):[]},ke=function(O,D,G){const q=G!=null?G:this;if(Ct(O)){const he=[];return Uf(O,(We,mt)=>{const pt=y(We);pt&&he.push(D.call(q,pt,mt))}),he}else{const he=y(O);return he?D.call(q,he):!1}},kt=(O,D)=>{ke(O,G=>{ft(D,(q,he)=>{A(G,he,q)})})},le=(O,D)=>{ke(O,G=>{const q=x.fromDom(G);Rl(q,D)})},we=(O,D,G,q,he)=>ke(O,We=>{const mt=ne(D)?e.createElement(D):D;return oe(G)&&kt(mt,G),q&&(!ne(q)&&q.nodeType?mt.appendChild(q):ne(q)&&le(mt,q)),he?mt:We.appendChild(mt)}),Ee=(O,D,G)=>we(e.createElement(O),O,D,G,!0),se=Ro.decode,Fe=Ro.encodeAllRaw,Be=(O,D,G="")=>{let q="<"+O;for(const he in D)qr(D,he)&&(q+=" "+he+'="'+Fe(D[he])+'"');return Qi(G)&&$e(d.getVoidElements(),O)?q+" />":q+">"+G+"</"+O+">"},Se=O=>{const D=e.createElement("div"),G=e.createDocumentFragment();G.appendChild(D),O&&(D.innerHTML=O);let q;for(;q=D.firstChild;)G.appendChild(q);return G.removeChild(D),G},Ne=(O,D)=>ke(O,G=>{const q=x.fromDom(G);return D&&R(rn(q),he=>{zn(he)&&he.dom.length===0?_t(he):Wn(q,he)}),_t(q),q.dom}),Qe=O=>ke(O,D=>{const G=D.attributes;for(let q=G.length-1;q>=0;q--)D.removeAttributeNode(G.item(q))}),et=O=>g.parse(O),Dt=(O,D)=>g.serialize(O,D),bt=O=>{if(jo!==ct.DOM&&e===document){if(n[O])return;n[O]=!0}let D=e.getElementById("mceDefaultStyles");if(!D){D=e.createElement("style"),D.id="mceDefaultStyles",D.type="text/css";const G=e.head;G.firstChild?G.insertBefore(D,G.firstChild):G.appendChild(D)}D.styleSheet?D.styleSheet.cssText+=O:D.appendChild(e.createTextNode(O))},dt=O=>{O||(O=""),R(O.split(","),D=>{o[D]=!0,c.load(D).catch(Me)})},Rt=(O,D,G)=>{ke(O,q=>{if(fe(q)){const he=x.fromDom(q),We=D.split(" ");R(We,mt=>{oe(G)?(G?ta:kl)(he,mt):dA(he,mt)})}})},Qt=(O,D)=>{Rt(O,D,!0)},Bt=(O,D)=>{Rt(O,D,!1)},Ss=(O,D)=>{const G=S(O),q=D.split(" ");return oe(G)&&ot(q,he=>gf(G,he))},Jn=O=>{ke(O,D=>eb(x.fromDom(D),"display"))},ws=O=>{ke(O,D=>Qh(x.fromDom(D),"display","none"))},xs=O=>{const D=S(O);return oe(D)&&Gr(Tl(D,"display"),"none")},ks=O=>(O||"mce_")+r++,Ns=O=>{const D=S(O);return oe(D)?fe(D.dom)?D.dom.outerHTML:BA(D):""},It=(O,D)=>{ke(O,G=>{fe(G)&&(G.outerHTML=D)})},es=(O,D)=>{const G=y(D);return ke(O,q=>{const he=G==null?void 0:G.parentNode,We=G==null?void 0:G.nextSibling;return he&&(We?he.insertBefore(q,We):he.appendChild(q)),q})},As=(O,D,G)=>ke(D,q=>{var he;const We=Ct(D)?O.cloneNode(!0):O;return G&&Uf(dR(q.childNodes),mt=>{We.appendChild(mt)}),(he=q.parentNode)===null||he===void 0||he.replaceChild(We,q),q}),Br=(O,D)=>{if(O.nodeName!==D.toUpperCase()){const G=Ee(D);return Uf(N(O),q=>{A(G,q.nodeName,w(O,q.nodeName))}),As(G,O,!0),G}else return O},as=(O,D)=>{let G=O;for(;G;){let q=D;for(;q&&G!==q;)q=q.parentNode;if(G===q)break;G=G.parentNode}return!G&&O.ownerDocument?O.ownerDocument.documentElement:G},In=O=>{if(fe(O)){const D=O.nodeName.toLowerCase()==="a"&&!w(O,"href")&&w(O,"id");if(w(O,"name")||w(O,"data-mce-bookmark")||D)return!0}return!1},dn=(O,D)=>{let G=0;if(In(O))return!1;const q=O.firstChild;if(q){const he=new $t(q,O),We=d?d.getWhitespaceElements():{},mt=D||(d?d.getNonEmptyElements():null);let pt=q;do{if(fe(pt)){const Ln=pt.getAttribute("data-mce-bogus");if(Ln){pt=he.next(Ln==="all");continue}const ll=pt.nodeName.toLowerCase();if(mt&&mt[ll]){if(ll==="br"){G++,pt=he.next();continue}return!1}if(In(pt))return!1}if(Ao(pt)||X(pt)&&!ur(pt.data)||X(pt)&&pt.parentNode&&We[pt.parentNode.nodeName]&&ur(pt.data))return!1;pt=he.next()}while(pt)}return G<=1},ls=()=>e.createRange(),Fn=(O,D,G)=>{let q=ls(),he,We;if(O&&D&&O.parentNode&&D.parentNode){const mt=O.parentNode;return q.setStart(mt,oi(O)),q.setEnd(D.parentNode,oi(D)),he=q.extractContents(),q=ls(),q.setStart(D.parentNode,oi(D)+1),q.setEnd(mt,oi(O)+1),We=q.extractContents(),mt.insertBefore(Of(jo,he),O),G?mt.insertBefore(G,O):mt.insertBefore(D,O),mt.insertBefore(Of(jo,We),O),Ne(O),G||D}else return},Ir=(O,D,G,q)=>{if(Ct(O)){let he=O.length;const We=[];for(;he--;)We[he]=Ir(O[he],D,G,q);return We}else return t.collect&&(O===e||O===s)&&u.push([O,D,G,q]),p.bind(O,D,G,q||jo)},ku=(O,D,G)=>{if(Ct(O)){let q=O.length;const he=[];for(;q--;)he[q]=ku(O[q],D,G);return he}else{if(u.length>0&&(O===e||O===s)){let q=u.length;for(;q--;){const[he,We,mt]=u[q];O===he&&(!D||D===We)&&(!G||G===mt)&&p.unbind(he,We,mt)}}return p.unbind(O,D,G)}},Co=(O,D,G)=>p.dispatch(O,D,G),Vo=(O,D,G)=>p.dispatch(O,D,G),Nu=O=>{if(O&&fe(O)){const D=O.getAttribute("data-mce-contenteditable");return D&&D!=="inherit"?D:O.contentEditable!=="inherit"?O.contentEditable:null}else return null},jo={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:a,styleSheetLoader:c,boundEvents:u,styles:g,schema:d,events:p,isBlock:_,root:null,clone:U,getRoot:H,getViewPort:ee,getRect:be,getSize:me,getParent:qe,getParents:ze,get:y,getNext:Mt,getPrev:Z,select:De,is:Te,add:we,create:Ee,createHTML:Be,createFragment:Se,remove:Ne,setStyle:F,getStyle:te,setStyles:L,removeAllAttribs:Qe,setAttrib:A,setAttribs:kt,getAttrib:w,getPos:W,parseStyle:et,serializeStyle:Dt,addStyle:bt,loadCSS:dt,addClass:Qt,removeClass:Bt,hasClass:Ss,toggleClass:Rt,show:Jn,hide:ws,isHidden:xs,uniqueId:ks,setHTML:le,getOuterHTML:Ns,setOuterHTML:It,decode:se,encode:Fe,insertAfter:es,replace:As,rename:Br,findCommonAncestor:as,run:ke,getAttribs:N,isEmpty:dn,createRng:ls,nodeIndex:oi,split:Fn,bind:Ir,unbind:ku,fire:Vo,dispatch:Co,getContentEditable:Nu,getContentEditableParent:O=>{const D=H();let G=null;for(let q=O;q&&q!==D&&(G=Nu(q),G===null);q=q.parentNode);return G},destroy:()=>{if(u.length>0){let O=u.length;for(;O--;){const[D,G,q]=u[O];p.unbind(D,G,q)}}ft(o,(O,D)=>{c.unload(D),delete o[D]})},isChildOf:(O,D)=>O===D||D.contains(O),dumpRng:O=>"startContainer: "+O.startContainer.nodeName+", startOffset: "+O.startOffset+", endContainer: "+O.endContainer.nodeName+", endOffset: "+O.endOffset},Fr=gR(g,t,K(jo));return jo};ct.DOM=ct(document),ct.nodeIndex=oi;const hR=ct.DOM,bR=0,CR=1,ql=2,zb=3;class mo{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=hR;let r;const i=()=>{o.remove(u),r&&(r.onerror=r.onload=r=null)},a=()=>{i(),n()},c=()=>{i(),s("Failed to load script: "+t)},u=o.uniqueId();r=document.createElement("script"),r.id=u,r.type="text/javascript",r.src=Q._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=a,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===ql}markDone(t){this.states[t]=ql}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=bR),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,u)=>{ht(n.scriptLoadedCallbacks,u).each(d=>{R(d,g=>g[c](u))}),delete n.scriptLoadedCallbacks[u]},o=c=>{const u=j(c,d=>d.status==="rejected");return u.length>0?Promise.reject(st(u,({reason:d})=>Ct(d)?d:[d])):Promise.resolve()},r=c=>Promise.allSettled(V(c,u=>n.states[u]===ql?(s("resolve",u),Promise.resolve()):n.states[u]===zb?(s("reject",u),Promise.reject(u)):(n.states[u]=CR,n.loadScript(u).then(()=>{n.states[u]=ql,s("resolve",u);const d=n.queue;return d.length>0?(n.queue=[],r(d).then(o)):Promise.resolve()},()=>(n.states[u]=zb,s("reject",u),Promise.reject(u)))))),i=c=>(n.loading=!0,r(c).then(u=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return b.from(d).each(Zo),o(u)})),a=th(t);return n.loading?new Promise((c,u)=>{n.queueLoadedCallbacks.push(()=>i(a).then(c,u))}):i(a)}}mo.ScriptLoader=new mo;const Vt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},vR=e=>Ge(e)&&$e(e,"raw"),yR=e=>Ct(e)&&e.length>1,ma={},Hf=Vt("en"),Hb=()=>ht(ma,Hf.get()),gs={getData:()=>yl(ma,e=>({...e})),setCode:e=>{e&&Hf.set(e)},getCode:()=>Hf.get(),add:(e,t)=>{let n=ma[e];n||(ma[e]=n={}),ft(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=Hb().getOr({}),n=i=>He(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const a=n(i);return ht(t,a.toLowerCase()).map(n).getOr(a)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(vR(e))return n(e.raw);if(yR(e)){const i=e.slice(1),a=o(e[0]).replace(/\{([0-9]+)\}/g,(c,u)=>$e(i,u)?n(i[u]):c);return r(a)}return r(o(e))},isRtl:()=>Hb().bind(e=>ht(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>$e(ma,e)},un=()=>{const e=[],t={},n={},s=[],o=(y,S)=>{const w=j(s,N=>N.name===y&&N.state===S);R(w,N=>N.resolve())},r=y=>$e(t,y),i=y=>$e(n,y),a=y=>{if(n[y])return n[y].instance},c=(y,S)=>{const w=gs.getCode(),N=","+(S||"")+",";!w||S&&N.indexOf(","+w+",")===-1||mo.ScriptLoader.add(t[y]+"/langs/"+w+".js")},u=(y,S)=>{un.languageLoad!==!1&&(r(y)?c(y,S):_(y,"loaded").then(()=>c(y,S)))},d=(y,S)=>(e.push(S),n[y]={instance:S},o(y,"added"),S),g=y=>{delete t[y],delete n[y]},p=(y,S)=>ne(S)?ne(y)?{prefix:"",resource:S,suffix:""}:{prefix:y.prefix,resource:S,suffix:y.suffix}:S,E=(y,S)=>{if(t[y])return Promise.resolve();let w=ne(S)?S:S.prefix+S.resource+S.suffix;w.indexOf("/")!==0&&w.indexOf("://")===-1&&(w=un.baseURL+"/"+w),t[y]=w.substring(0,w.lastIndexOf("/"));const N=()=>(o(y,"loaded"),Promise.resolve());return n[y]?N():mo.ScriptLoader.add(w).then(N)},_=(y,S="added")=>S==="added"&&i(y)||S==="loaded"&&r(y)?Promise.resolve():new Promise(w=>{s.push({name:y,state:S,resolve:w})});return{items:e,urls:t,lookup:n,get:a,requireLangPack:u,add:d,remove:g,createUrl:p,load:E,waitFor:_}};un.languageLoad=!0,un.baseURL="",un.PluginManager=un(),un.ThemeManager=un(),un.ModelManager=un();const ER=e=>{const t=Vt(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(a))}}},_R=e=>{const t=Vt(b.none()),n=()=>t.get().each(a=>clearInterval(a));return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:a=>{n(),t.set(b.some(setInterval(a,e)))}}},Oo=()=>{const e=ER(Me);return{...e,on:n=>e.get().each(n)}},Kl=(e,t)=>{let n=null;return{cancel:()=>{hn(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{hn(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Wf=(e,t)=>{let n=null;const s=()=>{hn(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},pa=K("mce-annotation"),mr=K("data-mce-annotation"),ri=K("data-mce-annotation-uid"),ga=K("data-mce-annotation-active"),ha=K("data-mce-annotation-classes"),ba=K("data-mce-annotation-attrs"),Wb=e=>t=>rt(t,e),Vb=(e,t)=>{const n=e.selection.getRng(),s=x.fromDom(n.startContainer),o=x.fromDom(e.getBody()),r=t.fold(()=>"."+pa(),c=>`[${mr()}="${c}"]`),i=Nl(s,n.startOffset).getOr(s);return ar(i,r,Wb(o)).bind(c=>ao(c,`${ri()}`).bind(u=>ao(c,`${mr()}`).map(d=>{const g=qb(e,u);return{uid:u,name:d,elements:g}})))},SR=e=>ss(e)&&gf(e,pa()),jb=(e,t)=>xl(e,"data-mce-bogus")||bb(e,'[data-mce-bogus="all"]',Wb(t)),qb=(e,t)=>{const n=x.fromDom(e.getBody()),s=Cn(n,`[${ri()}="${t}"]`);return j(s,o=>!jb(o,n))},Kb=(e,t)=>{const n=x.fromDom(e.getBody()),s=Cn(n,`[${mr()}="${t}"]`),o={};return R(s,r=>{if(!jb(r,n)){const i=os(r,ri()),a=ht(o,i).getOr([]);o[i]=a.concat([r])}}),o},wR=(e,t)=>{const n=Vt({}),s=()=>({listeners:[],previous:Oo()}),o=(g,p)=>{r(g,E=>(p(E),E))},r=(g,p)=>{const E=n.get(),_=ht(E,g).getOrThunk(s),y=p(_);E[g]=y,n.set(E)},i=(g,p,E)=>{o(g,_=>{R(_.listeners,y=>y(!0,g,{uid:p,nodes:V(E,S=>S.dom)}))})},a=g=>{o(g,p=>{R(p.listeners,E=>E(!1,g))})},c=(g,p)=>{R(qb(e,g),E=>{p?Kt(E,ga(),"true"):on(E,ga())})},u=Wf(()=>{const g=So(t.getNames());R(g,p=>{r(p,E=>{const _=E.previous.get();return Vb(e,b.some(p)).fold(()=>{_.each(y=>{a(p),E.previous.clear(),c(y,!1)})},({uid:y,name:S,elements:w})=>{Gr(_,y)||(_.each(N=>c(N,!1)),i(S,y,w),E.previous.set(y),c(y,!0))}),{previous:E.previous,listeners:E.listeners}})})},30);return e.on("remove",()=>{u.cancel()}),e.on("NodeChange",()=>{u.throttle()}),{addListener:(g,p)=>{r(g,E=>({previous:E.previous,listeners:E.listeners.concat([p])}))}}},xR=(e,t)=>{const n=mr(),s=r=>b.from(r.attr(n)).bind(t.lookup),o=r=>{var i,a;r.attr(ri(),null),r.attr(mr(),null),r.attr(ga(),null);const c=b.from(r.attr(ba())).map(p=>p.split(",")).getOr([]),u=b.from(r.attr(ha())).map(p=>p.split(",")).getOr([]);R(c,p=>r.attr(p,null));const d=(a=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&a!==void 0?a:[],g=Nn(d,[pa()].concat(u));r.attr("class",g.length>0?g.join(" "):null),r.attr(ha(),null),r.attr(ba(),null)};e.serializer.addTempAttr(ga()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(a=>{a.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},kR=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>ht(e,o).map(r=>r.settings),getNames:()=>Un(e)}};let Gb=0;const Yb=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return Gb++,e+"_"+s+Gb+String(n)},NR=(e,t)=>{R(t,n=>{ta(e,n)})},AR=(e,t)=>{R(t,n=>{kl(e,n)})},Xb=(e,t)=>x.fromDom(e.dom.cloneNode(t)),ii=e=>Xb(e,!1),Qb=e=>Xb(e,!0),TR=(e,t)=>{const n=x.fromTag(t),s=Fh(e);return wo(n,s),n},RR=(e,t)=>{const n=TR(e,t);ko(e,n);const s=rn(e);return or(n,s),_t(e),n},Zb=(e,t,n=tt)=>{const s=new $t(e,t),o=r=>{let i;do i=s[r]();while(i&&!X(i)&&!n(i));return b.from(i).filter(X)};return{current:()=>b.from(s.current()).filter(X),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},pr=(e,t)=>{const n=t||(i=>e.isBlock(i)||Ot(i)||vt(i)),s=(i,a,c,u)=>{if(X(i)){const d=u(i,a,i.data);if(d!==-1)return b.some({container:i,offset:d})}return c().bind(d=>s(d.container,d.offset,c,u))};return{backwards:(i,a,c,u)=>{const d=Zb(i,u!=null?u:e.getRoot(),n);return s(i,a,()=>d.prev().map(g=>({container:g,offset:g.length})),c).getOrNull()},forwards:(i,a,c,u)=>{const d=Zb(i,u!=null?u:e.getRoot(),n);return s(i,a,()=>d.next().map(g=>({container:g,offset:0})),c).getOrNull()}}},ai=Math.round,gr=e=>e?{left:ai(e.left),top:ai(e.top),bottom:ai(e.bottom),right:ai(e.right),width:ai(e.width),height:ai(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Jb=(e,t)=>(e=gr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),PR=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,eC=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Ca=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:eC(t.top-e.bottom,e,t)},va=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:eC(t.bottom-e.top,e,t),OR=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,DR=e=>_e(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),a=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:a,left:o,width:i-o,height:a-r})}),b.none()),tC=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},BR=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),IR=(e,t,n)=>Math.min(Math.max(e,t),n),Gl=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Do=(e,t)=>{if(fe(e)&&e.hasChildNodes()){const n=e.childNodes,s=IR(t,0,n.length-1);return n[s]}else return e},FR=(e,t)=>{if(!(t<0&&fe(e)&&e.hasChildNodes()))return Do(e,t)},LR=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),nC=e=>ne(e)&&e.charCodeAt(0)>=768&&LR.test(e),$R=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},MR=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},sC=fe,UR=rs,oC=Dl("display","block table"),zR=Dl("float","left right"),ya=MR(sC,UR,On(zR)),HR=On(Dl("white-space","pre pre-line pre-wrap")),Ea=X,Vf=Ot,rC=ct.nodeIndex,Yl=FR,jf=e=>e?e.createRange():ct.DOM.createRng(),qf=e=>ne(e)&&/[\r\n\t ]/.test(e),iC=e=>!!e.setStart&&!!e.setEnd,Kf=e=>{const t=e.startContainer,n=e.startOffset;if(qf(e.toString())&&HR(t.parentNode)&&X(t)){const s=t.data;if(qf(s[n-1])||qf(s[n+1]))return!0}return!1},WR=e=>{const t=e.ownerDocument,n=jf(t),s=t.createTextNode(Gt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=gr(n.getBoundingClientRect());return o.removeChild(s),r},VR=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&X(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Bo(r)}else return null},aC=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Bo=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=gr(s[0]):n=gr(e.getBoundingClientRect()),!iC(e)&&Vf(e)&&aC(n)?WR(e):aC(n)&&iC(e)&&(t=VR(e))!==null&&t!==void 0?t:n},hr=(e,t)=>{const n=Jb(e,t);return n.width=1,n.right=n.left+1,n},jR=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&PR(i,t[t.length-1])||t.push(i))},s=(i,a)=>{const c=jf(i.ownerDocument);if(a<i.data.length){if(nC(i.data[a]))return;if(nC(i.data[a-1])&&(c.setStart(i,a),c.setEnd(i,a+1),!Kf(c))){n(hr(Bo(c),!1));return}}a>0&&(c.setStart(i,a-1),c.setEnd(i,a),Kf(c)||n(hr(Bo(c),!1))),a<i.data.length&&(c.setStart(i,a),c.setEnd(i,a+1),Kf(c)||n(hr(Bo(c),!0)))},o=e.container(),r=e.offset();if(Ea(o))return s(o,r),t;if(sC(o))if(e.isAtEnd()){const i=Yl(o,r);Ea(i)&&s(i,i.data.length),ya(i)&&!Vf(i)&&n(hr(Bo(i),!1))}else{const i=Yl(o,r);if(Ea(i)&&s(i,0),ya(i)&&e.isAtEnd())return n(hr(Bo(i),!1)),t;const a=Yl(e.container(),e.offset()-1);ya(a)&&!Vf(a)&&(oC(a)||oC(i)||!ya(i))&&n(hr(Bo(a),!1)),ya(i)&&n(hr(Bo(i),!0))}return t},M=(e,t,n)=>{const s=()=>(Ea(e),t===0),o=()=>Ea(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const d=jf(e.ownerDocument);return d.setStart(e,t),d.setEnd(e,t),d},i=()=>(n||(n=jR(M(e,t))),n),a=()=>i().length>0,c=d=>d&&e===d.container()&&t===d.offset(),u=d=>Yl(e,d?t-1:t);return{container:K(e),offset:K(t),toRange:r,getClientRects:i,isVisible:a,isAtStart:s,isAtEnd:o,isEqual:c,getNode:u}};M.fromRangeStart=e=>M(e.startContainer,e.startOffset),M.fromRangeEnd=e=>M(e.endContainer,e.endOffset),M.after=e=>M(e.parentNode,rC(e)+1),M.before=e=>M(e.parentNode,rC(e)),M.isAbove=(e,t)=>bn(nn(t.getClientRects()),Ht(e.getClientRects()),Ca).getOr(!1),M.isBelow=(e,t)=>bn(Ht(t.getClientRects()),nn(e.getClientRects()),va).getOr(!1),M.isAtStart=e=>e?e.isAtStart():!1,M.isAtEnd=e=>e?e.isAtEnd():!1,M.isTextPosition=e=>e?X(e.container()):!1,M.isElementPosition=e=>!M.isTextPosition(e);const Xl=(e,t)=>{X(t)&&t.data.length===0&&e.remove(t)},qR=(e,t,n)=>{t.insertNode(n),Xl(e,n.previousSibling),Xl(e,n.nextSibling)},KR=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>Xl(e,r.previousSibling)),o.each(r=>Xl(e,r.nextSibling))},Gf=(e,t,n)=>{Sf(n)?KR(e,t,n):qR(e,t,n)},hs=X,lC=ir,cC=ct.nodeIndex,uC=e=>{const t=e.parentNode;return lC(t)?uC(t):t},Yf=e=>e?_l(e.childNodes,(t,n)=>(lC(n)&&n.nodeName!=="BR"?t=t.concat(Yf(n)):t.push(n),t),[]):[],GR=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&hs(n);)t+=n.data.length;return t},fC=e=>t=>e===t,YR=e=>{let t,n;t=Yf(uC(e)),n=sh(t,fC(e),e),t=t.slice(0,n+1);const s=_l(t,(o,r,i)=>(hs(r)&&hs(t[i-1])&&o++,o),0);return t=Yi(t,ms([e.nodeName])),n=sh(t,fC(e),e),n-s},dC=e=>(hs(e)?"text()":e.nodeName.toLowerCase())+"["+YR(e)+"]",XR=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e&&!(n&&n(o));o=o.parentNode)s.push(o);return s},mC=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(hs(s))r=GR(s,o);else{const a=s.childNodes;o>=a.length?(r="after",o=a.length-1):r="before",s=a[o]}n.push(dC(s));let i=XR(e,s);return i=Yi(i,On(ir)),n=n.concat(lf(i,a=>dC(a))),n.reverse().join("/")+","+r},QR=(e,t,n)=>{let s=Yf(e);return s=Yi(s,(o,r)=>!hs(o)||!hs(s[r-1])),s=Yi(s,ms([t])),s[n]},ZR=(e,t)=>{let n=e,s=0;for(;hs(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!hs(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return hs(e)&&t>e.data.length&&(t=e.data.length),M(e,t)},pC=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=_l(s,(i,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?(c[1]==="text()"&&(c[1]="#text"),QR(i,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!hs(r)&&r.parentNode){let i;return o==="after"?i=cC(r)+1:i=cC(r),M(r.parentNode,i)}return ZR(r,parseInt(o,10))},Ql=vt,JR=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&X(o);o=o.previousSibling)s+=e(o.data).length;return s},gC=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let i=o?s.startOffset:s.endOffset;const a=[],c=e.getRoot();if(X(r))a.push(n?JR(t,r,i):i);else{let u=0;const d=r.childNodes;i>=d.length&&d.length&&(u=1,i=Math.max(0,d.length-1)),a.push(e.nodeIndex(d[i],n)+u)}for(let u=r;u&&u!==c;u=u.parentNode)a.push(e.nodeIndex(u,n));return a},e1=(e,t,n,s)=>{const o=t.dom,r=gC(o,e,n,s,!0),i=t.isForward(),a=Sb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...a};{const c=gC(o,e,n,s,!1);return{start:r,end:c,forward:i,...a}}},Xf=(e,t,n)=>{let s=0;return Q.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},hC=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(fe(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},bC=e=>(hC(e,!0),hC(e,!1),e),CC=(e,t)=>{if(fe(e)&&(e=Do(e,t),Ql(e)))return e;if(Vn(e)){X(e)&&ti(e)&&(e=e.parentNode);let n=e.previousSibling;if(Ql(n)||(n=e.nextSibling,Ql(n)))return n}},t1=e=>CC(e.startContainer,e.startOffset)||CC(e.endContainer,e.endOffset),vC=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Ql(s)){const i=s.nodeName;return{name:i,index:Xf(n.dom,i,s)}}const r=t1(o);if(r){const i=r.tagName;return{name:i,index:Xf(n.dom,i,r)}}return e1(e,n,t,o)},n1=e=>{const t=e.getRng();return{start:mC(e.dom.getRoot(),M.fromRangeStart(t)),end:mC(e.dom.getRoot(),M.fromRangeEnd(t)),forward:e.isForward()}},s1=e=>({rng:e.getRng(),forward:e.isForward()}),yC=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},EC=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),a=i.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:Xf(n,a,i)};const u=bC(s.cloneRange());if(!r){u.collapse(!1);const g=yC(n,o+"_end",t);Gf(n,u,g)}s=bC(s),s.collapse(!0);const d=yC(n,o+"_start",t);return Gf(n,s,d),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},o1=(e,t,n=!1)=>t===2?vC(fo,n,e):t===3?n1(e):t?s1(e):EC(e,!1),Qf=ae(vC,Pt,!0),_C=e=>{const t=r=>r(e),n=K(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:Et,isError:tt,map:r=>vn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},SC=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:tt,isError:Et,map:t,mapError:s=>vn.error(s(e)),bind:t,exists:tt,forall:Et,getOr:Pt,or:Pt,getOrThunk:ji,orThunk:ji,getOrDie:vl(String(e)),each:Me,toOptional:b.none};return n},vn={value:_C,error:SC,fromOption:(e,t)=>e.fold(()=>SC(t),_C)},Ws={generate:e=>{if(!Ct(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return R(e,(s,o)=>{const r=Un(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],a=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ct(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...c)=>{const u=c.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+u);return{fold:(...g)=>{if(g.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+g.length);return g[o].apply(null,c)},match:g=>{const p=Un(g);if(t.length!==p.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+p.join(","));if(!ot(t,_=>z(p,_)))throw new Error("Not all branches were specified when using match. Specified: "+p.join(", ")+`
Required: `+t.join(", "));return g[i].apply(null,c)},log:g=>{console.log(g,{constructors:t,constructor:i,params:c})}}}}),n}};Ws.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const r1=e=>{const t=[],n=[];return R(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},i1=e=>e.type==="inline-command"||e.type==="inline-format",a1=e=>e.type==="block-command"||e.type==="block-format",l1=e=>{const t=s=>vn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let i;if(Ct(e.format)){if(!ot(e.format,ne))return t(s+" pattern has non-string items in the `format` array");i=e.format}else if(ne(e.format))i=[e.format];else return t(s+" pattern has non-string `format` parameter");return vn.value(o(i))}else return e.cmd!==void 0?ne(e.cmd)?vn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!Ge(e))return t("Raw pattern is not an object");if(!ne(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ne(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,i)=>({type:"inline-command",start:s,end:o,cmd:r,value:i}))}else return e.replacement!==void 0?ne(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):vn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},wC=e=>j(e,a1),xC=e=>j(e,i1),c1=(e,t)=>({inlinePatterns:xC(e),blockPatterns:wC(e),dynamicPatternsLookup:t}),kC=e=>{const t=r1(V(e,l1));return R(t.errors,n=>console.error(n.message,n.pattern)),t.values},u1=e=>t=>{const n=e(t);return kC(n)},Zf=tr().deviceType,f1=Zf.isTouch(),d1=ct.DOM,m1=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return _e(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[Kr(r)]=Kr(i),n},{})},NC=e=>cn(e,RegExp),de=e=>t=>t.options.get(e),Jf=e=>ne(e)||Ge(e),AC=(e,t="")=>n=>{const s=ne(n);if(s)if(n.indexOf("=")!==-1){const o=m1(n);return{value:ht(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},p1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:AC(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:AC(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=ne(n)&&Ls(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=z(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>je(n)?{valid:!0,value:n}:ne(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||ne(n)||ns(n,ne);return s?ne(n)?{value:V(n.split(","),Kr),valid:s}:Ct(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:nd(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=ne(n)||ns(n,ne);return s?{value:Ct(n)?n:V(n.split(","),Kr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=je(n)||ne(n);return s?n===!1||Zf.isiPhone()||Zf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!f1}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||ne(n)||He(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||ne(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Jf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Jf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Jf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>ne(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>ns(n,Ge)||n===!1?{value:kC(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>He(n)?{value:u1(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>ns(n,NC)?{value:n,valid:!0}:NC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:gs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:d1.getAttrib(e.getElement(),"placeholder")})})},g1=de("iframe_attrs"),h1=de("doctype"),TC=de("document_base_url"),b1=de("body_id"),C1=de("body_class"),RC=de("content_security_policy"),v1=de("br_in_pre"),Dn=de("forced_root_block"),_a=de("forced_root_block_attrs"),y1=de("newline_behavior"),E1=de("br_newline_selector"),_1=de("no_newline_selector"),S1=de("keep_styles"),w1=de("end_container_on_empty_block"),PC=de("automatic_uploads"),OC=de("images_reuse_filename"),x1=de("images_replace_blob_uris"),DC=de("icons"),k1=de("icons_url"),N1=de("images_upload_url"),A1=de("images_upload_base_path"),T1=de("images_upload_credentials"),R1=de("images_upload_handler"),P1=de("content_css_cors"),ed=de("referrer_policy"),BC=de("language"),O1=de("language_url"),IC=de("indent_use_margin"),D1=de("indentation"),B1=de("content_css"),I1=de("content_style"),FC=de("font_css"),F1=de("directionality"),L1=de("inline_boundaries_selector"),LC=de("object_resizing"),$1=de("resize_img_proportional"),M1=de("placeholder"),$C=de("event_root"),U1=de("service_message"),li=de("theme"),z1=de("theme_url"),td=de("model"),H1=de("model_url"),Sa=de("inline_boundaries"),W1=de("formats"),V1=de("preview_styles"),j1=de("format_empty_lines"),q1=de("format_noneditable_selector"),K1=de("custom_ui_selector"),nd=de("inline"),G1=de("hidden_input"),Y1=de("submit_patch"),X1=de("add_form_submit_trigger"),Q1=de("add_unload_trigger"),Z1=de("custom_undo_redo_levels"),J1=de("disable_nodechange"),MC=de("readonly"),eP=de("content_css_cors"),Zl=de("plugins"),tP=de("external_plugins"),nP=de("block_unsupported_drop"),sP=de("visual"),oP=de("visual_table_class"),UC=de("visual_anchor_class"),rP=de("iframe_aria_text"),iP=de("setup"),aP=de("init_instance_callback"),lP=de("urlconverter_callback"),cP=de("auto_focus"),uP=de("browser_spellcheck"),fP=de("protect"),dP=de("paste_block_drop"),Jl=de("paste_data_images"),mP=de("paste_preprocess"),pP=de("paste_postprocess"),gP=de("paste_webkit_styles"),hP=de("paste_remove_styles_if_webkit"),bP=de("paste_merge_formats"),CP=de("smart_paste"),vP=de("paste_as_text"),yP=de("paste_tab_spaces"),EP=de("allow_html_data_urls"),_P=de("text_patterns"),SP=de("text_patterns_lookup"),zC=de("noneditable_class"),wP=de("editable_class"),xP=de("noneditable_regexp"),kP=de("preserve_cdata"),NP=e=>e.options.isSet("text_patterns_lookup"),AP=e=>Q.explode(e.options.get("font_size_style_values")),TP=e=>Q.explode(e.options.get("font_size_classes")),RP=e=>e.options.get("encoding")==="xml",HC=e=>Q.explode(e.options.get("images_file_types")),PP=de("table_tab_navigation"),OP=fe,WC=X,VC=e=>{const t=e.parentNode;t&&t.removeChild(e)},jC=e=>{const t=fo(e);return{count:e.length-t.length,text:t}},qC=e=>{let t;for(;(t=e.data.lastIndexOf(en))!==-1;)e.deleteData(t,1)},KC=(e,t)=>(br(e),t),DP=(e,t)=>{const n=jC(e.data.substr(0,t.offset())),s=jC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(qC(e),M(e,t.offset()-n.count)):t},BP=(e,t)=>{const n=t.container(),s=B(wt(n.childNodes),e).map(o=>o<t.offset()?M(n,t.offset()-1):t).getOr(t);return br(e),s},IP=(e,t)=>WC(e)&&t.container()===e?DP(e,t):KC(e,t),FP=(e,t)=>t.container()===e.parentNode?BP(e,t):KC(e,t),LP=(e,t)=>M.isTextPosition(t)?IP(e,t):FP(e,t),br=e=>{OP(e)&&Vn(e)&&(_b(e)?e.removeAttribute("data-mce-caret"):VC(e)),WC(e)&&(qC(e),e.data.length===0&&VC(e))},$P=vt,MP=Hs,UP=Bl,zP="*[contentEditable=false],video,audio,embed,object",GC=(e,t,n)=>{const s=Jb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,r=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,r=e.scrollTop-a.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},HP=e=>{var t,n;const s=Cn(x.fromDom(e),zP);for(let o=0;o<s.length;o++){const r=s[o].dom;let i=r.previousSibling;if(Ml(i)){const a=i.data;a.length===1?(t=i.parentNode)===null||t===void 0||t.removeChild(i):i.deleteData(a.length-1,1)}i=r.nextSibling,$l(i)&&(i.data.length===1?(n=i.parentNode)===null||n===void 0||n.removeChild(i):i.deleteData(0,1))}},WP=(e,t,n,s)=>{const o=Oo();let r,i;const a=Dn(e),c=e.dom,u=(y,S)=>{let w;if(d(),UP(S))return null;if(n(S)){const N=ET(a,S,y),A=GC(t,S,y);c.setStyle(N,"top",A.top),i=N;const U=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(U,{...A}),c.add(t,U),o.set({caret:U,element:S,before:y}),y&&c.addClass(U,"mce-visual-caret-before"),g(),w=S.ownerDocument.createRange(),w.setStart(N,0),w.setEnd(N,0)}else return i=yT(S,y),w=S.ownerDocument.createRange(),wa(i.nextSibling)?(w.setStart(i,0),w.setEnd(i,0)):(w.setStart(i,1),w.setEnd(i,1)),w;return w},d=()=>{HP(t),i&&(br(i),i=null),o.on(y=>{c.remove(y.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},g=()=>{r=setInterval(()=>{o.on(y=>{s()?c.toggleClass(y.caret,"mce-visual-caret-hidden"):c.addClass(y.caret,"mce-visual-caret-hidden")})},500)};return{show:u,hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(y=>{const S=GC(t,y.element,y.before);c.setStyles(y.caret,{...S})})},destroy:()=>clearInterval(r)}},YC=()=>Xe.browser.isFirefox(),wa=e=>$P(e)||MP(e),xa=e=>wa(e)||uo(e)&&YC(),VP=zs,sd=vt,jP=Hs,XC=Dl("display","block table table-cell table-caption list-item"),QC=Vn,ZC=ti,qP=fe,KP=X,GP=rs,ci=e=>e>0,Cr=e=>e<0,ec=(e,t)=>{let n;for(;n=e(t);)if(!ZC(n))return n;return null},ka=(e,t,n,s,o)=>{const r=new $t(e,s),i=sd(e)||ZC(e);let a;if(Cr(t)){if(i&&(a=ec(r.prev.bind(r),!0),n(a)))return a;for(;a=ec(r.prev.bind(r),o);)if(n(a))return a}if(ci(t)){if(i&&(a=ec(r.next.bind(r),!0),n(a)))return a;for(;a=ec(r.next.bind(r),o);)if(n(a))return a}return null},YP=(e,t)=>{const n=o=>VP(o.dom),s=o=>o.dom===t;return Qr(x.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Io=(e,t)=>{for(;e&&e!==t;){if(XC(e))return e;e=e.parentNode}return null},Vs=(e,t,n)=>Io(e.container(),n)===Io(t.container(),n),od=(e,t)=>{if(!t)return b.none();const n=t.container(),s=t.offset();return qP(n)?b.from(n.childNodes[s+e]):b.none()},JC=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},XP=(e,t,n)=>Io(t,e)===Io(n,e),ev=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&QC(r)&&(r=r[s]),sd(r)||jP(r)){if(XP(t,r,o))return r;break}if(GP(r))break;o=o.parentNode}return null},Na=ae(JC,!0),Aa=ae(JC,!1),rd=(e,t,n)=>{let s;const o=ae(ev,!0,t),r=ae(ev,!1,t),i=n.startContainer,a=n.startOffset;if(ti(i)){const c=KP(i)?i.parentNode:i,u=c.getAttribute("data-mce-caret");if(u==="before"&&(s=c.nextSibling,xa(s)))return Na(s);if(u==="after"&&(s=c.previousSibling,xa(s)))return Aa(s)}if(!n.collapsed)return n;if(X(i)){if(QC(i)){if(e===1){if(s=r(i),s)return Na(s);if(s=o(i),s)return Aa(s)}if(e===-1){if(s=o(i),s)return Aa(s);if(s=r(i),s)return Na(s)}return n}if(Ml(i)&&a>=i.data.length-1)return e===1&&(s=r(i),s)?Na(s):n;if($l(i)&&a<=1)return e===-1&&(s=o(i),s)?Aa(s):n;if(a===i.data.length)return s=r(i),s?Na(s):n;if(a===0)return s=o(i),s?Aa(s):n}return n},tv=(e,t)=>od(e?0:-1,t).filter(sd),Ta=(e,t,n)=>{const s=rd(e,t,n);return e===-1?M.fromRangeStart(s):M.fromRangeEnd(s)},tc=e=>b.from(e.getNode()).map(x.fromDom),QP=e=>b.from(e.getNode(!0)).map(x.fromDom),id=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},nc=(e,t)=>{const n=Vs(e,t);return!n&&Ot(e.getNode())?!0:n};var jt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(jt||(jt={}));const ZP=vt,js=X,nv=fe,ad=Ot,ui=rs,sv=OT,sc=kb,JP=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},ov=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,rv=(e,t)=>{if(ci(e)){if(ui(t.previousSibling)&&!js(t.previousSibling))return M.before(t);if(js(t))return M(t,0)}if(Cr(e)){if(ui(t.nextSibling)&&!js(t.nextSibling))return M.after(t);if(js(t))return M(t,t.data.length)}return Cr(e)?ad(t)?M.before(t):M.after(t):M.before(t)},eO=(e,t)=>{const n=t.nextSibling;return n&&ui(n)?js(n)?M(n,0):M.before(n):ld(jt.Forwards,M.after(t),e)},ld=(e,t,n)=>{let s,o,r,i;if(!nv(n)||!t)return null;if(t.isEqual(M.after(n))&&n.lastChild){if(i=M.after(n.lastChild),Cr(e)&&ui(n.lastChild)&&nv(n.lastChild))return ad(n.lastChild)?M.before(n.lastChild):i}else i=t;const a=i.container();let c=i.offset();if(js(a)){if(Cr(e)&&c>0)return M(a,--c);if(ci(e)&&c<a.length)return M(a,++c);s=a}else{if(Cr(e)&&c>0&&(o=ov(a,c-1),ui(o)))return!sv(o)&&(r=ka(o,e,sc,o),r)?js(r)?M(r,r.data.length):M.after(r):js(o)?M(o,o.data.length):M.before(o);if(ci(e)&&c<a.childNodes.length&&(o=ov(a,c),ui(o)))return ad(o)?eO(n,o):!sv(o)&&(r=ka(o,e,sc,o),r)?js(r)?M(r,0):M.before(r):js(o)?M(o,0):M.after(o);s=o||i.getNode()}if(s&&(ci(e)&&i.isAtEnd()||Cr(e)&&i.isAtStart())&&(s=ka(s,e,Et,n,!0),sc(s,n)))return rv(e,s);o=s&&ka(s,e,sc,n);const u=Jo(j(JP(a,n),ZP));return u&&(!o||!u.contains(o))?(ci(e)?i=M.after(u):i=M.before(u),i):o?rv(e,o):null},qs=e=>({next:t=>ld(jt.Forwards,t,e),prev:t=>ld(jt.Backwards,t,e)}),tO=(e,t,n)=>{const s=e?M.before(n):M.after(n);return jn(e,t,s)},nO=e=>Ot(e)?M.before(e):M.after(e),iv=e=>M.isTextPosition(e)?e.offset()===0:rs(e.getNode()),av=e=>{if(M.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return rs(e.getNode(!0))},lv=(e,t)=>!M.isTextPosition(e)&&!M.isTextPosition(t)&&e.getNode()===t.getNode(!0),sO=e=>!M.isTextPosition(e)&&Ot(e.getNode()),oO=(e,t,n)=>e?!lv(t,n)&&!sO(t)&&av(t)&&iv(n):!lv(n,t)&&iv(t)&&av(n),jn=(e,t,n)=>{const s=qs(t);return b.from(e?s.next(n):s.prev(n))},oc=(e,t,n)=>jn(e,t,n).bind(s=>Vs(n,s,t)&&oO(e,n,s)?jn(e,t,s):b.some(s)),cv=(e,t,n,s)=>oc(e,t,n).bind(o=>s(o)?cv(e,t,o,s):b.some(o)),fi=(e,t)=>{const n=e?t.firstChild:t.lastChild;return X(n)?b.some(M(n,e?0:n.data.length)):n?rs(n)?b.some(e?M.before(n):nO(n)):tO(e,t,n):b.none()},An=ae(jn,!0),qn=ae(jn,!1),yn=ae(fi,!0),Ks=ae(fi,!1),cd="_mce_caret",bs=e=>fe(e)&&e.id===cd,vr=(e,t)=>{let n=t;for(;n&&n!==e;){if(bs(n))return n;n=n.parentNode}return null},rO=e=>ne(e.start),iO=e=>$e(e,"rng"),aO=e=>$e(e,"id"),uv=e=>$e(e,"name"),fv=e=>Q.isArray(e.start),rc=e=>!uv(e)&&je(e.forward)?e.forward:!0,dv=(e,t)=>(fe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),lO=(e,t)=>{const n=b.from(pC(e.getRoot(),t.start)),s=b.from(pC(e.getRoot(),t.end));return bn(n,s,(o,r)=>{const i=e.createRng();return i.setStart(o.container(),o.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:rc(t)}})},cO=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(en);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},uO=e=>!e.hasChildNodes(),fO=(e,t)=>Ks(e).fold(tt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),mv=(e,t,n)=>uO(t)&&vr(e,t)?(cO(t,n),!0):!1,pv=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let i=r,a=o[0];for(let c=o.length-1;i&&c>=1;c--){const u=i.childNodes;if(mv(r,i,s))return!0;if(o[c]>u.length-1)return mv(r,i,s)?!0:fO(i,s);i=u[o[c]]}X(i)&&(a=Math.min(o[0],i.data.length)),fe(i)&&(a=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,a):s.setEnd(i,a)}return!0},ud=e=>X(e)&&e.data.length>0,gv=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let i,a;if(t==="start"?r?s.hasChildNodes()?(i=s.firstChild,a=1):ud(s.nextSibling)?(i=s.nextSibling,a=0):ud(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)+1):(i=o,a=e.nodeIndex(s)):r?s.hasChildNodes()?(i=s.firstChild,a=1):ud(s.previousSibling)?(i=s.previousSibling,a=s.previousSibling.data.length):(i=o,a=e.nodeIndex(s)):(i=o,a=e.nodeIndex(s)),!r){const c=s.previousSibling,u=s.nextSibling;Q.each(Q.grep(s.childNodes),g=>{X(g)&&(g.data=g.data.replace(/\uFEFF/g,""))});let d;for(;d=e.get(n.id+"_"+t);)e.remove(d,!0);if(X(u)&&X(c)&&!Xe.browser.isOpera()){const g=c.data.length;c.appendData(u.data),e.remove(u),i=c,a=g}}return b.some(M(i,a))}else return b.none()},dO=(e,t)=>{const n=e.createRng();return pv(e,!0,t,n)&&pv(e,!1,t,n)?b.some({range:n,forward:rc(t)}):b.none()},mO=(e,t)=>{const n=gv(e,"start",t),s=gv(e,"end",t);return bn(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(dv(e,o.container()),o.offset()),i.setEnd(dv(e,r.container()),r.offset()),{range:i,forward:rc(t)}})},pO=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),gO=(e,t)=>{const n=e.dom;if(t){if(fv(t))return dO(n,t);if(rO(t))return lO(n,t);if(aO(t))return mO(n,t);if(uv(t))return pO(n,t);if(iO(t))return b.some({range:t.rng,forward:rc(t)})}return b.none()},hO=(e,t,n)=>o1(e,t,n),bO=(e,t)=>{gO(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Kn=e=>fe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",ic=(e=>t=>e===t)(Gt),di=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,fd=e=>!di(e)&&!ic(e)&&!Cb(e),CO=e=>({value:e}),dd=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},vO=e=>{const t=dd(e.red)+dd(e.green)+dd(e.blue);return CO(t)},yO=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,EO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,hv=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),bv=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),a=parseFloat(s);return hv(o,r,i,a)},_O=e=>{if(e==="transparent")return b.some(hv(0,0,0,0));const t=yO.exec(e);if(t!==null)return b.some(bv(t[1],t[2],t[3],"1"));const n=EO.exec(e);return n!==null?b.some(bv(n[1],n[2],n[3],n[4])):b.none()},ac=e=>_O(e).map(vO).map(t=>"#"+t.value).getOr(e),md=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},SO=e=>st(e,t=>{const n=Gl(t);return n?[x.fromDom(n)]:[]}),wO=e=>md(e).length>1,xO=e=>j(SO(e),Il),kO=e=>Cn(e,"td[data-mce-selected],th[data-mce-selected]"),Cv=(e,t)=>{const n=kO(t);return n.length>0?n:xO(e)},mi=e=>Cv(md(e.selection.getSel()),x.fromDom(e.getBody())),Ra=(e,t)=>la(e,"table",t),NO=e=>{const t=e.startContainer,n=e.startOffset;return X(t)?n===0?b.some(x.fromDom(t)):b.none():b.from(t.childNodes[n]).map(x.fromDom)},AO=e=>{const t=e.endContainer,n=e.endOffset;return X(t)?n===t.data.length?b.some(x.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(x.fromDom)},vv=e=>qh(e).fold(K([e]),t=>[e].concat(vv(t))),pd=e=>hf(e).fold(K([e]),t=>xt(t)==="br"?sr(t).map(n=>[e].concat(pd(n))).getOr([]):[e].concat(pd(t))),gd=(e,t)=>bn(NO(t),AO(t),(n,s)=>{const o=ve(vv(e),ae(rt,n)),r=ve(pd(e),ae(rt,s));return o.isSome()&&r.isSome()}).getOr(!1),hd=(e,t,n,s)=>{const o=n,r=new $t(n,o),i=Gi(e.schema.getMoveCaretBeforeOnEnterElements(),(c,u)=>!z(["td","th","table"],u.toLowerCase()));let a=n;do{if(X(a)&&Q.trim(a.data).length!==0){s?t.setStart(a,0):t.setEnd(a,a.data.length);return}if(i[a.nodeName]){s?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a);return}}while(a=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},lc=e=>{const t=e.selection.getSel();return oe(t)&&t.rangeCount>0},bd=(e,t)=>{const n=mi(e);n.length>0?R(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},yv=(e,t,n)=>{const s=EC(e,t);n(s),e.moveToBookmark(s)},Pa=e=>zt(e==null?void 0:e.nodeType),Cd=e=>fe(e)&&!Kn(e)&&!bs(e)&&!ir(e),TO=(e,t)=>{if(Cd(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},yr=e=>e.isContentEditable===!0,Ev=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),i=vt(r);yv(s,!0,()=>{t()}),i&&vt(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&RO(o,s)},RO=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:i}=o,a=t.getNode();if(!TO(e,a)&&fe(r)){const c=r.childNodes,u=e.getRoot();let d;if(i<c.length){const g=c[i];d=new $t(g,(n=e.getParent(g,e.isBlock))!==null&&n!==void 0?n:u)}else{const g=c[c.length-1];d=new $t(g,(s=e.getParent(g,e.isBlock))!==null&&s!==void 0?s:u),d.next(!0)}for(let g=d.current();g;g=d.next()){if(e.getContentEditable(g)==="false")return;if(X(g)&&!yd(g)){o.setStart(g,0),t.setRng(o);return}}}},_v=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(fe(e)||!yd(e))return e}},vd=(e,t)=>(Pa(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),pi=(e,t,n)=>e.schema.isValidChild(t,n),yd=(e,t=!1)=>{if(oe(e)&&X(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return ur(n)}else return!1},PO=e=>oe(e)&&X(e)&&e.length===0,OO=(e,t)=>{const n="[data-mce-cef-wrappable]",s=q1(e),o=Qi(s)?n:`${n},${s}`;return ds(x.fromDom(t),o)},Sv=(e,t)=>{const n=e.dom;return Cd(t)&&n.getContentEditable(t)==="false"&&OO(e,t)&&n.select('[contenteditable="true"]',t).length===0},Fo=(e,t)=>He(e)?e(t):(oe(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),Ed=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),_d=(e,t)=>{if(Ve(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=ac(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},cc=(e,t,n)=>{const s=e.getStyle(t,n);return _d(s,n)},wv=(e,t)=>{let n;return e.getParent(t,s=>fe(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},uc=(e,t,n)=>e.getParents(t,n,e.getRoot()),Sd=(e,t,n)=>{const s=e.formatter.get(t);return oe(s)&&Y(s,n)},DO=(e,t)=>Sd(e,t,s=>{const o=r=>He(r)||r.length>1&&r.charAt(0)==="%";return Y(["styles","attributes"],r=>ht(s,r).exists(i=>{const a=Ct(i)?i:rf(i);return Y(a,o)}))}),BO=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Gi(r,(i,a)=>Y(s,c=>c===a));return Sd(e,t,r=>{const i=o(r);return Sd(e,n,a=>{const c=o(a);return TN(i,c)})})},Gs=e=>qr(e,"block"),IO=e=>Gs(e)&&e.wrapper===!0,FO=e=>Gs(e)&&e.wrapper!==!0,Gn=e=>qr(e,"selector"),qt=e=>qr(e,"inline"),LO=e=>Gn(e)&&qt(e)&&Gr(ht(e,"mixed"),!0),wd=e=>Gn(e)&&e.expand!==!1&&!qt(e),gi=Kn,xv=uc,kv=yd,$O=vd,MO=e=>Ot(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Nv=(e,t)=>{let n=t;for(;n;){if(fe(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Av=(e,t,n,s)=>{const o=t.data;for(let r=n;e?r>=0:r<o.length;e?r--:r++)if(s(o.charAt(r)))return e?r+1:r;return-1},UO=(e,t,n)=>Av(e,t,n,s=>ic(s)||di(s)),zO=(e,t,n)=>Av(e,t,n,fd),Tv=(e,t,n,s,o,r)=>{let i;const a=e.getParent(n,e.isBlock)||t,c=(d,g,p)=>{const E=pr(e),_=o?E.backwards:E.forwards;return b.from(_(d,g,(y,S)=>gi(y.parentNode)?-1:(i=y,p(o,y,S)),a))};return c(n,s,UO).bind(d=>r?c(d.container,d.offset+(o?-1:0),zO):b.some(d)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},Rv=(e,t,n,s,o)=>{const r=s[o];X(s)&&Qi(s.data)&&r&&(s=r);const i=xv(e,s);for(let a=0;a<i.length;a++)for(let c=0;c<t.length;c++){const u=t[c];if(!(oe(u.collapsed)&&u.collapsed!==n.collapsed)&&Gn(u)&&e.is(i[a],u.selector))return i[a]}return s},Pv=(e,t,n,s)=>{var o;let r=n;const i=e.dom,a=i.getRoot(),c=t[0];if(Gs(c)&&(r=c.wrapper?null:i.getParent(n,c.block,a)),!r){const u=(o=i.getParent(n,"LI,TD,TH"))!==null&&o!==void 0?o:a;r=i.getParent(X(n)?n.parentNode:n,d=>d!==a&&$O(e,d),u)}if(r&&Gs(c)&&c.wrapper&&(r=xv(i,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!i.isBlock(r[s])&&(r=r[s],!Ed(r,"br")););return r||n},Ov=(e,t,n,s)=>{const o=n.parentNode;return oe(n[s])?!1:o===t||Ve(o)||e.isBlock(o)?!0:Ov(e,t,o,s)},fc=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",a=e.getRoot();if(X(n)&&!kv(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[i];c;c=c[i]){const u=X(c)&&!Ov(e,a,c,i);if(!gi(c)&&!MO(c)&&!kv(c,u))return r}if(r===a||r.parentNode===a){n=r;break}r=r.parentNode}return n},Dv=e=>gi(e.parentNode)||gi(e),hi=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:a}=t;const c=e.dom,u=n[0];return fe(o)&&o.hasChildNodes()&&(o=Do(o,r),X(o)&&(r=0)),fe(i)&&i.hasChildNodes()&&(i=Do(i,t.collapsed?a:a-1),X(i)&&(a=i.data.length)),o=Nv(c,o),i=Nv(c,i),Dv(o)&&(o=gi(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,X(o)&&(r=t.collapsed?o.length:0)),Dv(i)&&(i=gi(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,X(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(Tv(c,e.getBody(),o,r,!0,s).each(({container:p,offset:E})=>{o=p,r=E}),Tv(c,e.getBody(),i,a,!1,s).each(({container:p,offset:E})=>{i=p,a=E})),(qt(u)||u.block_expand)&&((!qt(u)||!X(o)||r===0)&&(o=fc(c,n,o,r,!0)),(!qt(u)||!X(i)||a===i.data.length)&&(i=fc(c,n,i,a,!1))),wd(u)&&(o=Rv(c,n,t,o,"previousSibling"),i=Rv(c,n,t,i,"nextSibling")),(Gs(u)||Gn(u))&&(o=Pv(e,n,o,"previousSibling"),i=Pv(e,n,i,"nextSibling"),Gs(u)&&(c.isBlock(o)||(o=fc(c,n,o,r,!0)),c.isBlock(i)||(i=fc(c,n,i,a,!1)))),fe(o)&&o.parentNode&&(r=c.nodeIndex(o),o=o.parentNode),fe(i)&&i.parentNode&&(a=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:a}},Oa=(e,t,n)=>{var s;const o=t.startOffset,r=Do(t.startContainer,o),i=t.endOffset,a=Do(t.endContainer,i-1),c=S=>{const w=S[0];X(w)&&w===r&&o>=w.data.length&&S.splice(0,1);const N=S[S.length-1];return i===0&&S.length>0&&N===a&&X(N)&&S.splice(S.length-1,1),S},u=(S,w,N)=>{const A=[];for(;S&&S!==N;S=S[w])A.push(S);return A},d=(S,w)=>e.getParent(S,N=>N.parentNode===w,w),g=(S,w,N)=>{const A=N?"nextSibling":"previousSibling";for(let U=S,H=U.parentNode;U&&U!==w;U=H){H=U.parentNode;const ee=u(U===S?U:U[A],A);ee.length&&(N||ee.reverse(),n(c(ee)))}};if(r===a)return n(c([r]));const p=(s=e.findCommonAncestor(r,a))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,a))return g(r,p,!0);if(e.isChildOf(a,r))return g(a,p);const E=d(r,p)||r,_=d(a,p)||a;g(r,E,!0);const y=u(E===r?E:E.nextSibling,"nextSibling",_===a?_.nextSibling:_);y.length&&n(c(y)),g(a,_)},HO=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],WO=e=>zn(e)&&kf(e)===en,VO=(e,t,n,s)=>Hn(t).fold(()=>"skipping",o=>s==="br"||WO(t)?"valid":SR(t)?"existing":bs(t.dom)?"caret":Y(HO,r=>ds(t,r))?"valid-block":!pi(e,n,s)||!pi(e,xt(o),n)?"invalid-child":"valid"),jO=(e,t)=>{const n=hi(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Bv=(e,t,n,s,o,r)=>{const{uid:i=t,...a}=n;ta(e,pa()),Kt(e,`${ri()}`,i),Kt(e,`${mr()}`,s);const{attributes:c={},classes:u=[]}=o(i,a);if(wo(e,c),NR(e,u),r){u.length>0&&Kt(e,`${ha()}`,u.join(","));const d=Un(c);d.length>0&&Kt(e,`${ba()}`,d.join(","))}},qO=e=>{kl(e,pa()),on(e,`${ri()}`),on(e,`${mr()}`),on(e,`${ga()}`);const t=ao(e,`${ba()}`).map(s=>s.split(",")).getOr([]),n=ao(e,`${ha()}`).map(s=>s.split(",")).getOr([]);R(t,s=>on(e,s)),AR(e,n),on(e,`${ha()}`),on(e,`${ba()}`)},Iv=(e,t,n,s,o)=>{const r=x.fromTag("span",e);return Bv(r,t,n,s,o,!1),r},KO=(e,t,n,s,o,r)=>{const i=[],a=Iv(e.getDoc(),n,r,s,o),c=Oo(),u=()=>{c.clear()},d=()=>c.get().getOrThunk(()=>{const _=ii(a);return i.push(_),c.set(_),_}),g=_=>{R(_,p)},p=_=>{switch(VO(e,_,"span",xt(_))){case"invalid-child":{u();const S=rn(_);g(S),u();break}case"valid-block":{u(),Bv(_,n,r,s,o,!0);break}case"valid":{const S=d();RA(_,S);break}}},E=_=>{const y=V(_,x.fromDom);g(y)};return Oa(e.dom,t,_=>{u(),E(_)}),i},GO=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=mi(e).length>0,a=Yb("mce-annotation");if(r.collapsed&&!i&&jO(e,r),o.getRng().collapsed&&!i){const c=Iv(e.getDoc(),a,s,t,n.decorate);Rl(c,Gt),o.getRng().insertNode(c.dom),o.select(c.dom)}else yv(o,!1,()=>{bd(e,c=>{KO(e,c,a,t,n.decorate,s)})})})},Fv=e=>{const t=kR();xR(e,t);const n=wR(e,t),s=mf("span"),o=r=>{R(r,i=>{s(i)?No(i):qO(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(a=>{GO(e,r,a,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{const i=e.selection.getBookmark();Vb(e,b.some(r)).each(({elements:a})=>{o(a)}),e.selection.moveToBookmark(i)},removeAll:r=>{const i=e.selection.getBookmark();ft(Kb(e,r),(a,c)=>{o(a)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=Kb(e,r);return yl(i,a=>V(a,c=>c.dom))}}},Da=e=>({getBookmark:ae(hO,e),moveToBookmark:ae(bO,e)});Da.isBookmarkNode=Kn;const Lv=(e,t,n)=>n.collapsed?!1:Y(n.getClientRects(),s=>OR(s,e,t)),YO=(e,t)=>e.dispatch("PreProcess",t),XO=(e,t)=>e.dispatch("PostProcess",t),QO=e=>{e.dispatch("remove")},ZO=e=>{e.dispatch("detach")},JO=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},eD=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},tD=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},nD=e=>{e.dispatch("PreInit")},sD=e=>{e.dispatch("PostRender")},oD=e=>{e.dispatch("Init")},rD=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},$v=(e,t,n)=>{e.dispatch(t,n)},Mv=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},Uv=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},iD=(e,t)=>e.dispatch("BeforeSetContent",t),zv=(e,t)=>e.dispatch("SetContent",t),aD=(e,t)=>e.dispatch("BeforeGetContent",t),Hv=(e,t)=>e.dispatch("GetContent",t),lD=(e,t)=>{e.dispatch("AutocompleterStart",t)},cD=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},uD=e=>{e.dispatch("AutocompleterEnd")},fD=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),dD=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),Wv=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),pe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||pe.metaKeyPressed(e),metaKeyPressed:e=>Xe.os.isMacOS()||Xe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Er="data-mce-selected",mD="table,img,figure.image,hr,video,span.mce-preview-object",Vv=Math.abs,dc=Math.round,xd={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},pD=e=>e.type==="longpress"||e.type.indexOf("touch")===0,jv=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,a,c,u,d,g,p,E,_,y,S,w,N,A,U,H,ee;const W=se=>oe(se)&&(ub(se)||n.is(se,"figure.image")),F=se=>Hs(se)||n.hasClass(se,"mce-preview-object"),L=(se,Fe)=>{if(pD(se)){const Be=se.touches[0];return W(se.target)&&!Lv(Be.clientX,Be.clientY,Fe)}else return W(se.target)&&!Lv(se.clientX,se.clientY,Fe)},te=se=>{const Fe=se.target;L(se,t.selection.getRng())&&!se.isDefaultPrevented()&&t.selection.select(Fe)},me=se=>n.hasClass(se,"mce-preview-object")&&oe(se.firstElementChild)?[se,se.firstElementChild]:n.is(se,"figure.image")?[se.querySelector("img")]:[se],be=se=>{const Fe=LC(t);return!Fe||se.getAttribute("data-mce-resize")==="false"||se===t.getBody()?!1:n.hasClass(se,"mce-preview-object")&&oe(se.firstElementChild)?ds(x.fromDom(se.firstElementChild),Fe):ds(x.fromDom(se),Fe)},Te=se=>F(se)?n.create("img",{src:Xe.transparentSrc}):se.cloneNode(!0),ze=(se,Fe,Be)=>{if(oe(Be)){const Se=me(se);R(Se,Ne=>{Ne.style[Fe]||!t.schema.isValid(Ne.nodeName.toLowerCase(),Fe)?n.setStyle(Ne,Fe,Be):n.setAttrib(Ne,Fe,""+Be)})}},qe=(se,Fe,Be)=>{ze(se,"width",Fe),ze(se,"height",Be)},nt=se=>{let Fe,Be,Se,Ne,Qe;Fe=se.screenX-g,Be=se.screenY-p,A=Fe*u[2]+y,U=Be*u[3]+S,A=A<5?5:A,U=U<5?5:U,(W(i)||F(i))&&$1(t)!==!1?Se=!pe.modifierPressed(se):Se=pe.modifierPressed(se),Se&&(Vv(Fe)>Vv(Be)?(U=dc(A*w),A=dc(U/w)):(A=dc(U/w),U=dc(A*w))),qe(a,A,U),Ne=u.startPos.x+Fe,Qe=u.startPos.y+Be,Ne=Ne>0?Ne:0,Qe=Qe>0?Qe:0,n.setStyles(c,{left:Ne,top:Qe,display:"block"}),c.innerHTML=A+" &times; "+U,u[2]<0&&a.clientWidth<=A&&n.setStyle(a,"left",E+(y-A)),u[3]<0&&a.clientHeight<=U&&n.setStyle(a,"top",_+(S-U)),Fe=r.scrollWidth-H,Be=r.scrollHeight-ee,Fe+Be!==0&&n.setStyles(c,{left:Ne-Fe,top:Qe-Be}),N||(eD(t,i,y,S,"corner-"+u.name),N=!0)},Mt=()=>{const se=N;N=!1,se&&(ze(i,"width",A),ze(i,"height",U)),n.unbind(s,"mousemove",nt),n.unbind(s,"mouseup",Mt),o!==s&&(n.unbind(o,"mousemove",nt),n.unbind(o,"mouseup",Mt)),n.remove(a),n.remove(c),n.remove(d),Z(i),se&&(tD(t,i,A,U,"corner-"+u.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},Z=se=>{le();const Fe=n.getPos(se,r),Be=Fe.x,Se=Fe.y,Ne=se.getBoundingClientRect(),Qe=Ne.width||Ne.right-Ne.left,et=Ne.height||Ne.bottom-Ne.top;i!==se&&(De(),i=se,A=U=0);const Dt=t.dispatch("ObjectSelected",{target:se});be(se)&&!Dt.isDefaultPrevented()?ft(xd,(bt,dt)=>{const Rt=Bt=>{const Ss=me(i)[0];g=Bt.screenX,p=Bt.screenY,y=Ss.clientWidth,S=Ss.clientHeight,w=S/y,u=bt,u.name=dt,u.startPos={x:Qe*bt[0]+Be,y:et*bt[1]+Se},H=r.scrollWidth,ee=r.scrollHeight,d=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=Te(i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Be,top:Se,margin:0}),qe(a,Qe,et),a.removeAttribute(Er),r.appendChild(a),n.bind(s,"mousemove",nt),n.bind(s,"mouseup",Mt),o!==s&&(n.bind(o,"mousemove",nt),n.bind(o,"mouseup",Mt)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+S)};let Qt=n.get("mceResizeHandle"+dt);Qt&&n.remove(Qt),Qt=n.add(r,"div",{id:"mceResizeHandle"+dt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+dt+"-resize; margin:0; padding:0"}),n.bind(Qt,"mousedown",Bt=>{Bt.stopImmediatePropagation(),Bt.preventDefault(),Rt(Bt)}),bt.elm=Qt,n.setStyles(Qt,{left:Qe*bt[0]+Be-Qt.offsetWidth/2,top:et*bt[1]+Se-Qt.offsetHeight/2})}):De(!1)},Re=Kl(Z,0),De=(se=!0)=>{Re.cancel(),le(),i&&se&&i.removeAttribute(Er),ft(xd,(Fe,Be)=>{const Se=n.get("mceResizeHandle"+Be);Se&&(n.unbind(Se),n.remove(Se))})},ke=(se,Fe)=>n.isChildOf(se,Fe),kt=se=>{if(N||t.removed||t.composing)return;const Fe=se.type==="mousedown"?se.target:e.getNode(),Be=ar(x.fromDom(Fe),mD).map(Ne=>Ne.dom).getOrUndefined(),Se=oe(Be)?n.getAttrib(Be,Er,"1"):"1";if(R(n.select(`img[${Er}],hr[${Er}]`),Ne=>{Ne.removeAttribute(Er)}),oe(Be)&&ke(Be,r)){we();const Ne=e.getStart(!0);if(ke(Ne,Be)&&ke(e.getEnd(!0),Be)){n.setAttrib(Be,Er,Se),Re.throttle(Be);return}}De()},le=()=>{ft(xd,se=>{se.elm&&(n.unbind(se.elm),delete se.elm)})},we=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{we(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",kt),t.on("keyup compositionend",se=>{i&&i.nodeName==="TABLE"&&kt(se)}),t.on("hide blur",De),t.on("contextmenu longpress",te,!0)}),t.on("remove",le),{isResizable:be,showResizeRect:Z,hideResizeRect:De,updateResizeRect:kt,destroy:()=>{Re.cancel(),i=a=d=null}}},gD=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},hD=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},qv=(e,t,n)=>{const s=e.document.createRange();return gD(s,t),hD(s,n),s},kd=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Ba=Ws.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Kv=(e,t,n)=>t(x.fromDom(n.startContainer),n.startOffset,x.fromDom(n.endContainer),n.endOffset),bD=(e,t)=>t.match({domRange:n=>({ltr:K(n),rtl:b.none}),relative:(n,s)=>({ltr:er(()=>qv(e,n,s)),rtl:er(()=>b.some(qv(e,s,n)))}),exact:(n,s,o,r)=>({ltr:er(()=>kd(e,n,s,o,r)),rtl:er(()=>b.some(kd(e,o,r,n,s)))})}),CD=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Ba.rtl(x.fromDom(o.endContainer),o.endOffset,x.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>Kv(e,Ba.ltr,n)):Kv(e,Ba.ltr,n)},vD=(e,t)=>{const n=bD(e,t);return CD(e,n)};Ba.ltr,Ba.rtl;const Gv={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},yD=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return b.none();const i=e.dom.createRange();return i.setStart(r.offsetNode,r.offset),i.collapse(),b.some(i)})},ED=(e,t,n)=>{var s,o;return b.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},_D=(()=>document.caretPositionFromPoint?yD:document.caretRangeFromPoint?ED:b.none)(),SD=(e,t,n)=>{const s=x.fromDom(e.document);return _D(s,t,n).map(o=>Gv.create(x.fromDom(o.startContainer),o.startOffset,x.fromDom(o.endContainer),o.endOffset))},Nd=Ws.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),wD=(e,t,n,s)=>e.fold(t,n,s),xD=e=>e.fold(Pt,Pt,Pt),kD=Nd.before,ND=Nd.on,AD=Nd.after,po={before:kD,on:ND,after:AD,cata:wD,getStart:xD},mc=Ws.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),TD=e=>mc.exact(e.start,e.soffset,e.finish,e.foffset),RD=e=>e.match({domRange:t=>x.fromDom(t.startContainer),relative:(t,n)=>po.getStart(t),exact:(t,n,s,o)=>t}),PD=mc.domRange,OD=mc.relative,DD=mc.exact,BD=e=>{const t=RD(e);return oa(t)},ID=Gv.create,bi={domRange:PD,relative:OD,exact:DD,exactFromRange:TD,getWin:BD,range:ID},pc=(e,t)=>{const n=xt(e);return n==="input"?po.after(e):z(["br","img"],n)?t===0?po.before(e):po.after(e):po.on(e,t)},FD=(e,t)=>{const n=e.fold(po.before,pc,po.after),s=t.fold(po.before,pc,po.after);return bi.relative(n,s)},Yv=(e,t,n,s)=>{const o=pc(e,t),r=pc(n,s);return bi.relative(o,r)},LD=e=>e.match({domRange:t=>{const n=x.fromDom(t.startContainer),s=x.fromDom(t.endContainer);return Yv(n,t.startOffset,s,t.endOffset)},relative:FD,exact:Yv}),Ad=(e,t)=>{const s=(t||document).createDocumentFragment();return R(e,o=>{s.appendChild(o.dom)}),x.fromDom(s)},$D=e=>{const t=bi.getWin(e).dom,n=(o,r,i,a)=>kd(t,o,r,i,a),s=LD(e);return vD(t,s).match({ltr:n,rtl:n})},MD=(e,t,n)=>SD(e,t,n),Xv=(e,t,n)=>{const s=oa(x.fromDom(n));return MD(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},Td=(e,t)=>oe(e)&&oe(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,UD=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},Qv=(e,t,n)=>UD(e,t,n)!==null,zD=(e,t,n)=>Qv(e,t,s=>s.nodeName===n),HD=(e,t)=>Vn(e)&&!Qv(e,t,bs),Zv=(e,t,n)=>{const s=t.parentNode;if(s){const o=new $t(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(Ot(r))return!0}return!1},WD=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},VD=(e,t)=>{let n=t;for(;n&&n!==e;){if(vt(n))return!0;n=n.parentNode}return!1},Rd=(e,t,n,s,o)=>{const r=e.getRoot(),i=e.schema.getNonEmptyElements(),a=o.parentNode;let c,u;if(!a)return b.none();const d=e.getParent(a,e.isBlock)||r;if(s&&Ot(o)&&t&&e.isEmpty(d))return b.some(M(a,e.nodeIndex(o)));const g=new $t(o,d);for(;u=g[s?"prev":"next"]();){if(e.getContentEditableParent(u)==="false"||HD(u,r))return b.none();if(X(u)&&u.data.length>0)return zD(u,r,"A")?b.none():b.some(M(u,s?u.data.length:0));if(e.isBlock(u)||i[u.nodeName.toLowerCase()])return b.none();c=u}return Ao(c)?b.none():n&&c?b.some(M(c,0)):b.none()},Jv=(e,t,n,s)=>{const o=e.getRoot();let r,i=!1,a=n?s.startContainer:s.endContainer,c=n?s.startOffset:s.endOffset;const u=fe(a)&&c===a.childNodes.length,d=e.schema.getNonEmptyElements();let g=n;if(Vn(a))return b.none();if(fe(a)&&c>a.childNodes.length-1&&(g=!1),aa(a)&&(a=o,c=0),a===o){if(g&&(r=a.childNodes[c>0?c-1:0],r&&(Vn(r)||d[r.nodeName]||uo(r))))return b.none();if(a.hasChildNodes()){if(c=Math.min(!g&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=X(a)&&u?a.data.length:0,!t&&a===o.lastChild&&uo(a)||VD(o,a)||Vn(a))return b.none();if(a.hasChildNodes()&&!uo(a)){r=a;const p=new $t(a,o);do{if(vt(r)||Vn(r)){i=!1;break}if(X(r)&&r.data.length>0){c=g?0:r.data.length,a=r,i=!0;break}if(d[r.nodeName.toLowerCase()]&&!fb(r)){c=e.nodeIndex(r),a=r.parentNode,g||c++,i=!0;break}}while(r=g?p.next():p.prev())}}}return t&&(X(a)&&c===0&&Rd(e,u,t,!0,a).each(p=>{a=p.container(),c=p.offset(),i=!0}),fe(a)&&(r=a.childNodes[c],r||(r=a.childNodes[c-1]),r&&Ot(r)&&!WD(r,"A")&&!Zv(e,r,!1)&&!Zv(e,r,!0)&&Rd(e,u,t,!0,r).each(p=>{a=p.container(),c=p.offset(),i=!0}))),g&&!t&&X(a)&&c===a.data.length&&Rd(e,u,t,!1,a).each(p=>{a=p.container(),c=p.offset(),i=!0}),i&&a?b.some(M(a,c)):b.none()},gc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=M.fromRangeStart(t);return Jv(e,n,!0,s).each(r=>{(!n||!M.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||Jv(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),Td(t,s)?b.none():b.some(s)},hc=(e,t)=>e.splitText(t),bc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&X(t)){if(n>0&&n<t.data.length)if(s=hc(t,n),t=s.previousSibling,o>n){o=o-n;const r=hc(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(X(t)&&n>0&&n<t.data.length&&(t=hc(t,n),n=0),X(s)&&o>0&&o<s.data.length){const r=hc(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},Ci=e=>({walk:(o,r)=>Oa(e,o,r),split:bc,normalize:o=>gc(e,o).fold(tt,r=>(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),!0))});Ci.compareRanges=Td,Ci.getCaretRangeFromPoint=Xv,Ci.getSelectedNode=Gl,Ci.getNode=Do;const jD=((e,t)=>{const n=(a,c)=>{if(!zt(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const u=a.dom;na(u)&&(u.style[e]=c+"px")},s=a=>{const c=t(a);if(c<=0||c===null){const u=Us(a,e);return parseFloat(u)||0}return c},o=s,r=(a,c)=>_e(c,(u,d)=>{const g=Us(a,d),p=g===void 0?0:parseInt(g,10);return isNaN(p)?u:u+p},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(a,c,u)=>{const d=r(a,u);return c>d?c-d:0}}})("height",e=>{const t=e.dom;return Yr(e)?t.getBoundingClientRect().height:t.offsetHeight}),qD=e=>jD.get(e),ey=()=>x.fromDom(document),ty=(e,t)=>e.view(t).fold(K([]),s=>{const o=e.owner(s),r=ty(e,o);return[s].concat(r)}),KD=(e,t)=>{const n=t.owner(e);return ty(t,n)};var GD=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(x.fromDom)},owner:e=>co(e)});const YD=e=>{const t=ey(),n=yf(t),s=KD(e,GD),o=vf(e),r=ie(s,(i,a)=>{const c=vf(a);return{left:i.left+c.left,top:i.top+c.top}},{left:0,top:0});return Xr(r.left+o.left+n.left,r.top+o.top+n.top)},Pd=e=>xt(e)==="textarea",XD=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),QD=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},ZD=(e,t)=>{const n=rn(e);if(n.length===0||Pd(e))return{element:e,offset:t};if(t<n.length&&!Pd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return Pd(s)?{element:e,offset:t}:xt(s)==="img"?{element:s,offset:1}:zn(s)?{element:s,offset:kf(s).length}:{element:s,offset:rn(s).length}}},ny=(e,t)=>{const n=HA(e),s=qD(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},JD=(e,t)=>{const n=ZD(e,t),s=x.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+en+"</span>");return Wn(n.element,s),ny(s,()=>_t(s))},eB=e=>ny(x.fromDom(e),Me),sy=(e,t,n,s)=>{nB(e,(o,r)=>tB(e,t,n,s),n)},oy=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(XD(e,r))return;const i=yf(t).top;n(t,i,s,o),QD(e,r)},tB=(e,t,n,s)=>{const o=x.fromDom(e.getBody()),r=x.fromDom(e.getDoc());TA(o);const i=JD(x.fromDom(n.startContainer),n.startOffset);oy(e,r,t,i,s),i.cleanup()},ry=(e,t,n,s)=>{const o=x.fromDom(e.getDoc());oy(e,o,n,eB(t),s)},nB=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(x.fromDom(s),x.fromDom(r));const a=e.dom.createRng();a.setStart(s,o),a.setEnd(r,i),e.selection.setRng(n)},Od=(e,t,n,s)=>{const o=e.pos;if(n)ob(o.left,o.top,s);else{const r=o.top-t+e.height;ob(o.left,r,s)}},iy=(e,t,n,s,o)=>{const r=n+t,i=s.pos.top,a=s.bottom,c=a-i>=n;i<t?Od(s,n,o!==!1,e):i>r?Od(s,n,c?o!==!1:o===!0,e):a>r&&!c&&Od(s,n,o===!0,e)},ay=(e,t,n,s)=>{const o=oa(e).dom.innerHeight;iy(e,t,o,n,s)},ly=(e,t,n,s)=>{const o=oa(e).dom.innerHeight;iy(e,t,o,n,s);const r=YD(n.element),i=ab(window);r.top<i.y?rb(n.element,s!==!1):r.top>i.bottom&&rb(n.element,s===!0)},sB=(e,t,n)=>sy(e,ay,t,n),oB=(e,t,n)=>ry(e,t,ay,n),rB=(e,t,n)=>sy(e,ly,t,n),iB=(e,t,n)=>ry(e,t,ly,n),aB=(e,t,n)=>{(e.inline?oB:iB)(e,t,n)},Ia=(e,t,n)=>{(e.inline?sB:rB)(e,t,n)},cy=e=>e.dom.focus(),uy=e=>{const t=xo(e).dom;return e.dom===t.activeElement},Dd=(e=ey())=>b.from(e.dom.activeElement).map(x.fromDom),lB=e=>Dd(xo(e)).filter(t=>e.dom.contains(t.dom)),fy=(e,t)=>{const n=zn(t)?kf(t).length:rn(t).length+1;return e>n?n:e<0?0:e},cB=e=>bi.range(e.start,fy(e.soffset,e.start),e.finish,fy(e.foffset,e.finish)),dy=(e,t)=>!Ol(t.dom)&&(lo(e,t)||rt(e,t)),my=e=>t=>dy(e,t.start)&&dy(e,t.finish),uB=e=>e.inline,fB=e=>bi.range(x.fromDom(e.startContainer),e.startOffset,x.fromDom(e.endContainer),e.endOffset),dB=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(fB)},mB=e=>{const t=oa(e);return dB(t.dom).filter(my(e))},pB=(e,t)=>b.from(t).filter(my(e)).map(cB),gB=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},Bd=e=>{const t=uB(e)?mB(x.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},Id=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>pB(x.fromDom(e.getBody()),n)).bind(gB),hB=e=>{Id(e).each(t=>e.selection.setRng(t))},py={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},bB=(e,t)=>(zt(t)||(t=0),setTimeout(e,t)),CB=(e,t)=>(zt(t)||(t=0),setInterval(e,t)),Yn={setEditorTimeout:(e,t,n)=>bB(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=CB(()=>{e.removed?clearInterval(s):t()},n);return s}},vB=e=>e.type==="nodechange"&&e.selectionChange,yB=(e,t)=>{const n=()=>{t.throttle()};ct.DOM.bind(document,"mouseup",n),e.on("remove",()=>{ct.DOM.unbind(document,"mouseup",n)})},EB=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},_B=(e,t)=>{EB(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{vB(n)||Bd(e)})},SB=e=>{const t=Kl(()=>{Bd(e)},0);e.on("init",()=>{e.inline&&yB(e,t),_B(e,t)}),e.on("remove",()=>{t.cancel()})};let vi;const Fd=ct.DOM,wB=e=>fe(e)&&py.isEditorUIElement(e),xB=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Cc=(e,t)=>{const n=K1(e);return Fd.getParent(t,o=>wB(o)||(n?e.dom.is(o,n):!1))!==null},kB=e=>{try{const t=xo(x.fromDom(e.getElement()));return Dd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},NB=(e,t)=>{const n=t.editor;SB(n),n.on("focusin",()=>{const s=e.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{Yn.setEditorTimeout(n,()=>{const s=e.focusedEditor;!Cc(n,kB(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),vi||(vi=s=>{const o=e.activeEditor;o&&Yh(s).each(r=>{const i=r;i.ownerDocument===document&&i!==document.body&&!Cc(o,i)&&e.focusedEditor===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Fd.bind(document,"focusin",vi))},AB=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&vi&&(Fd.unbind(document,"focusin",vi),vi=null)},TB=e=>{e.on("AddEditor",ae(NB,e)),e.on("RemoveEditor",ae(AB,e))},RB=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),PB=e=>e.collapsed?b.from(Do(e.startContainer,e.startOffset)).map(x.fromDom):b.none(),OB=(e,t)=>PB(t).bind(n=>dT(n)?b.some(n):lo(e,n)?b.none():b.some(e)),gy=(e,t)=>{OB(x.fromDom(e.getBody()),t).bind(n=>yn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Ld=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},DB=e=>uy(e)||lB(e).isSome(),BB=e=>oe(e.iframeElement)&&uy(x.fromDom(e.iframeElement)),IB=e=>{const t=e.getBody();return t&&DB(x.fromDom(t))},FB=e=>{const t=xo(x.fromDom(e.getElement()));return Dd(t).filter(n=>!xB(n.dom)&&Cc(e,n.dom)).isSome()},_r=e=>e.inline?IB(e):BB(e),LB=e=>_r(e)||FB(e),$B=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),oe(e.bookmark)&&!_r(e)&&Id(e).each(r=>{e.selection.setRng(r),s=r});const o=RB(e,t.getNode());if(o&&e.dom.isChildOf(o,n)){Ld(o),gy(e,s),$d(e);return}e.inline||(Xe.browser.isOpera()||Ld(n),e.getWin().focus()),(Xe.browser.isFirefox()||e.inline)&&(Ld(n),gy(e,s)),$d(e)},$d=e=>e.editorManager.setActive(e),MB=(e,t)=>{e.removed||(t?$d(e):$B(e))},hy=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(x.fromDom).map(a=>!s||!t.collapsed?Nl(a,o(a,i)).getOr(a):a).bind(a=>ss(a)?b.some(a):Hn(a).filter(ss)).map(a=>a.dom).getOr(e)},by=(e,t,n=!1)=>hy(e,t,!0,n,(s,o)=>Math.min(Kh(s),o)),Cy=(e,t,n=!1)=>hy(e,t,!1,n,(s,o)=>o>0?o-1:o),vy=(e,t)=>{const n=e;for(;e&&X(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},UB=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(i=n.childNodes[o]),X(n)&&X(s)&&(n.length===o?n=vy(n.nextSibling,!0):n=n.parentNode,r===0?s=vy(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(i=n)));const a=X(i)?i.parentNode:i;return fe(a)?a:e},zB=(e,t,n,s)=>{const o=[],r=e.getRoot(),i=e.getParent(n||by(r,t,t.collapsed),e.isBlock),a=e.getParent(s||Cy(r,t,t.collapsed),e.isBlock);if(i&&i!==r&&o.push(i),i&&a&&i!==a){let c=i;const u=new $t(i,r);for(;(c=u.next())&&c!==a;)e.isBlock(c)&&o.push(c)}return a&&i!==a&&a!==r&&o.push(a),o},HB=(e,t,n)=>b.from(t).bind(s=>b.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),i=e.createRng();return i.setStart(o,r),i.setEnd(o,r+1),n&&(hd(e,i,s,!0),hd(e,i,s,!1)),i})),Md=(e,t)=>V(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),WB=e=>xt(e)==="img"?1:Eb(e).fold(()=>rn(e).length,t=>t.length),VB=e=>Eb(e).filter(t=>t.trim().length!==0||t.indexOf(Gt)>-1).isSome(),jB=["img","br"],yy=e=>VB(e)||z(jB,xt(e)),qB=e=>eT(e,yy),KB=e=>GB(e,yy),GB=(e,t)=>{const n=s=>{const o=rn(s);for(let r=o.length-1;r>=0;r--){const i=o[r];if(t(i))return b.some(i);const a=n(i);if(a.isSome())return a}return b.none()};return n(e)},Ey="[data-mce-autocompleter]",YB=(e,t)=>{if(_y(x.fromDom(e.getBody())).isNone()){const n=x.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Wt(n,x.fromDom(t.extractContents())),t.insertNode(n.dom),Hn(n).each(s=>s.dom.normalize()),KB(n).map(s=>{e.selection.setCursorLocation(s.dom,WB(s))})}},XB=e=>ar(e,Ey),_y=e=>ca(e,Ey),QB=(e,t)=>_y(t).each(n=>{const s=e.selection.getBookmark();No(n),e.selection.moveToBookmark(s)}),ZB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},vc=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},JB=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!ur(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},Sy=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class En{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new En(t,ZB[t]||1);return n&&ft(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!ne(t))return oe(t)&&ft(t,(r,i)=>{s.attr(i,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new En(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const a=s[r];a.name!=="id"&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=vc(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=vc(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let i=r.firstChild;if(Sy(r))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||Sy(i))return!1}if(i.type===8||i.type===3&&!JB(i)||i.type===3&&i.parent&&n[i.parent.name]&&ur((o=i.value)!==null&&o!==void 0?o:"")||s&&s(i))return!1}while(i=vc(i,r));return!0}walk(t){return vc(this,null,t)}}const eI=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),wy=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&eI(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},tI=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let i=1,a=n;for(;i!==0;)for(s.lastIndex=a;;){const c=s.exec(t);if(c===null)return a;if(c[1]==="!"){Jt(c[2],"--")?a=wy(t,!1,c.index+3):a=wy(t,!0,c.index+1);break}else{o.lastIndex=s.lastIndex;const u=o.exec(t);if(hn(u)||u.index!==s.lastIndex)continue;c[1]==="/"?i-=1:$e(r,c[2])||(i+=1),a=s.lastIndex+u[0].length;break}}return a},nI=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},xy=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=nI(e.getTempAttrs(),t);const r=s.getVoidElements();let i;for(;i=n.exec(o);){const a=n.lastIndex,c=i[0].length;let u;r[i[1]]?u=a:u=tI(s,o,a),o=o.substring(0,a-c)+o.substring(u),n.lastIndex=a-c}return fo(o)},sI=xy,oI=(e,t)=>{const n=Dn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},rI=(e,t)=>{const n=e.getDoc(),s=xo(x.fromDom(e.getBody())),o=x.fromTag("div",n);Kt(o,"data-mce-bogus","all"),Al(o,{position:"fixed",left:"-9999999px",top:"0"}),Rl(o,t.innerHTML);const r=Cn(o,"[data-mce-bogus]");R(r,c=>{os(c,"data-mce-bogus")==="all"?_t(c):lr(c)?(Wn(c,x.fromText(Jr)),_t(c)):No(c)});const i=wA(s);Wt(i,o);const a=fo(o.dom.innerText);return _t(o),a},iI=(e,t,n)=>{let s;return t.format==="raw"?s=Q.trim(sI(e.serializer,n.innerHTML)):t.format==="text"?s=rI(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=oI(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Fl(x.fromDom(n))&&ne(s)?Q.trim(s):s},aI=(e,t)=>b.from(e.getBody()).fold(K(t.format==="tree"?new En("body",11):""),n=>iI(e,t,n)),ky=Q.makeMap,Ny=e=>{const t=[];e=e||{};const n=e.indent,s=ky(e.indent_before||""),o=ky(e.indent_after||""),r=Ro.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,c,u)=>{if(n&&s[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",a),c)for(let d=0,g=c.length;d<g;d++){const p=c[d];t.push(" ",p.name,'="',r(p.value,!0),'"')}if(!u||i?t[t.length]=">":t[t.length]=" />",u&&n&&o[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:r(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,c)=>{c?t.push("<?",a," ",r(c),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Lo=(e={},t=Po())=>{const n=Ny(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:c=>{var u;n.text((u=c.value)!==null&&u!==void 0?u:"",c.raw)},8:c=>{var u;n.comment((u=c.value)!==null&&u!==void 0?u:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var u;n.doctype((u=c.value)!==null&&u!==void 0?u:"")},4:c=>{var u;n.cdata((u=c.value)!==null&&u!==void 0?u:"")},11:c=>{let u=c;if(u=u.firstChild)do a(u);while(u=u.next)}};n.reset();const a=c=>{var u;const d=i[c.type];if(d)d(c);else{const g=c.name,p=g in t.getVoidElements();let E=c.attributes;if(r&&E&&E.length>1){const _=[];_.map={};const y=t.getElementRule(c.name);if(y){for(let S=0,w=y.attributesOrder.length;S<w;S++){const N=y.attributesOrder[S];if(N in E.map){const A=E.map[N];_.map[N]=A,_.push({name:N,value:A})}}for(let S=0,w=E.length;S<w;S++){const N=E[S].name;if(!(N in _.map)){const A=E.map[N];_.map[N]=A,_.push({name:N,value:A})}}E=_}}if(n.start(g,E,p),!p){let _=c.firstChild;if(_){(g==="pre"||g==="textarea")&&_.type===3&&((u=_.value)===null||u===void 0?void 0:u[0])===`
`&&n.text(`
`,!0);do a(_);while(_=_.next)}n.end(g)}}};return o.type===1&&!e.inner?a(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},Ay=new Set;R(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Ay.add(t)});const Ty=["font","text-decoration","text-emphasis"],Ud=(e,t)=>Un(e.parseStyle(e.getAttrib(t,"style"))),lI=e=>Ay.has(e),cI=(e,t)=>ot(Ud(e,t),n=>!lI(n)),uI=e=>j(e,t=>Y(Ty,n=>Jt(t,n))),fI=(e,t,n)=>{const s=Ud(e,t),o=Ud(e,n),r=i=>{var a,c;const u=(a=e.getStyle(t,i))!==null&&a!==void 0?a:"",d=(c=e.getStyle(n,i))!==null&&c!==void 0?c:"";return Ls(u)&&Ls(d)&&u!==d};return Y(s,i=>{const a=c=>Y(c,u=>u===i);if(!a(o)&&a(Ty)){const c=uI(o);return Y(c,r)}else return r(i)})},Ry=(e,t,n)=>b.from(n.container()).filter(X).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),zd=ae(Ry,!0,di),Hd=ae(Ry,!1,di),dI=e=>{const t=e.container();return X(t)&&(t.data.length===0||Ll(t.data)&&Da.isBookmarkNode(t.parentNode))},$o=(e,t)=>n=>od(e?0:-1,n).filter(t).isSome(),Py=e=>ub(e)&&Us(x.fromDom(e),"display")==="block",Oy=e=>vt(e)&&!jA(e),mI=$o(!0,Py),pI=$o(!1,Py),Fa=$o(!0,Hs),La=$o(!1,Hs),Dy=$o(!0,uo),By=$o(!1,uo),Mo=$o(!0,Oy),Uo=$o(!1,Oy),gI=e=>e.slice(0,-1),hI=(e,t,n)=>lo(t,e)?gI(yA(e,s=>n(s)||rt(s,t))):[],Iy=(e,t)=>hI(e,t,tt),go=(e,t)=>[e].concat(Iy(e,t)),Wd=(e,t,n)=>cv(e,t,n,dI),Fy=(e,t)=>ve(go(x.fromDom(t.container()),e),ps),Ly=(e,t,n)=>Wd(e,t.dom,n).forall(s=>Fy(t,n).fold(()=>!Vs(s,n,t.dom),o=>!Vs(s,n,t.dom)&&lo(o,x.fromDom(s.container())))),$y=(e,t,n)=>Fy(t,n).fold(()=>Wd(e,t.dom,n).forall(s=>!Vs(s,n,t.dom)),s=>Wd(e,s.dom,n).isNone()),Vd=ae($y,!1),My=ae($y,!0),bI=ae(Ly,!1),CI=ae(Ly,!0),vI=e=>tc(e).exists(lr),yc=(e,t,n)=>{const s=j(go(x.fromDom(n.container()),t),ps),o=nn(s).getOr(t);return jn(e,o.dom,n).filter(vI)},jd=(e,t)=>tc(t).exists(lr)||yc(!0,e,t).isSome(),qd=(e,t)=>QP(t).exists(lr)||yc(!1,e,t).isSome(),yI=ae(yc,!1),EI=ae(yc,!0),Uy=e=>M.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),zy=(e,t)=>{const n=j(go(x.fromDom(t.container()),e),ps);return nn(n).getOr(e)},Hy=(e,t)=>Uy(t)?Hd(t):Hd(t)||qn(zy(e,t).dom,t).exists(Hd),Wy=(e,t)=>Uy(t)?zd(t):zd(t)||An(zy(e,t).dom,t).exists(zd),_I=e=>z(["pre","pre-wrap"],e),Kd=e=>tc(e).bind(t=>Zr(t,ss)).exists(t=>_I(Us(t,"white-space"))),SI=(e,t)=>qn(e.dom,t).isNone(),wI=(e,t)=>An(e.dom,t).isNone(),xI=(e,t)=>SI(e,t)||wI(e,t)||Vd(e,t)||My(e,t)||qd(e,t)||jd(e,t),kI=e=>oe(e)&&vt(e)&&XC(e),Vy=(e,t)=>n=>kI(new $t(n,e)[t]()),NI=(e,t)=>{const n=An(e.dom,t).getOr(t),s=Vy(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},AI=(e,t)=>{const n=qn(e.dom,t).getOr(t),s=Vy(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},TI=(e,t)=>Kd(t)?!1:xI(e,t)||Hy(e,t)||Wy(e,t),$a=(e,t)=>Kd(t)?!1:Vd(e,t)||bI(e,t)||qd(e,t)||Hy(e,t)||AI(e,t),RI=e=>{const t=e.container(),n=e.offset();return X(t)&&n<t.data.length?M(t,n+1):e},Ma=(e,t)=>Kd(t)?!1:My(e,t)||CI(e,t)||jd(e,t)||Wy(e,t)||NI(e,t),Gd=(e,t)=>$a(e,t)||Ma(e,RI(t)),jy=(e,t)=>ic(e.charAt(t)),qy=(e,t)=>di(e.charAt(t)),PI=e=>{const t=e.container();return X(t)&&sn(t.data,Gt)},OI=e=>{const t=e.split("");return V(t,(n,s)=>ic(n)&&s>0&&s<t.length-1&&fd(t[s-1])&&fd(t[s+1])?" ":n).join("")},Ky=(e,t,n)=>{const s=t.data,o=M(t,0);return!n&&jy(s,0)&&!Gd(e,o)?(t.data=" "+s.slice(1),!0):n&&qy(s,0)&&$a(e,o)?(t.data=Gt+s.slice(1),!0):!1},DI=e=>{const t=e.data,n=OI(t);return n!==t?(e.data=n,!0):!1},Gy=(e,t,n)=>{const s=t.data,o=M(t,s.length-1);return!n&&jy(s,s.length-1)&&!Gd(e,o)?(t.data=s.slice(0,-1)+" ",!0):n&&qy(s,s.length-1)&&Ma(e,o)?(t.data=s.slice(0,-1)+Gt,!0):!1},BI=(e,t)=>{const n=t.container();if(!X(n))return b.none();if(PI(t)){const s=Ky(e,n,!1)||DI(n)||Gy(e,n,!1);return Zi(s,t)}else if(Gd(e,t)){const s=Ky(e,n,!0)||Gy(e,n,!0);return Zi(s,t)}else return b.none()},II=e=>{const t=x.fromDom(e.getBody());e.selection.isCollapsed()&&BI(t,M.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},Yy=(e,t,n)=>{if(n===0)return;const s=x.fromDom(e),o=Qr(s,ps).getOr(s),r=e.data.slice(t,t+n),i=t+n>=e.data.length&&Ma(o,M(e,e.data.length)),a=t===0&&$a(o,M(e,0));e.replaceData(t,n,Ab(r,4,a,i))},Ec=(e,t)=>{const n=e.data.slice(t),s=n.length-zN(n).length;Yy(e,t,s)},Yd=(e,t)=>{const n=e.data.slice(0,t),s=n.length-lh(n).length;Yy(e,t-s,s)},Xd=(e,t,n,s=!0)=>{const o=lh(e.data).length,r=s?e:t,i=s?t:e;return s?r.appendData(i.data):r.insertData(0,i.data),_t(x.fromDom(i)),n&&Ec(r,o),r},FI=(e,t)=>{const n=e.container(),s=e.offset();return!M.isTextPosition(e)&&n===t.parentNode&&s>M.before(t).offset()},LI=(e,t)=>FI(t,e)?M(t.container(),t.offset()-1):t,$I=e=>X(e)?M(e,0):M.before(e),MI=e=>X(e)?M(e,e.data.length):M.after(e),Xy=e=>rs(e.previousSibling)?b.some(MI(e.previousSibling)):e.previousSibling?Ks(e.previousSibling):b.none(),Qy=e=>rs(e.nextSibling)?b.some($I(e.nextSibling)):e.nextSibling?yn(e.nextSibling):b.none(),UI=(e,t)=>b.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>qn(e,M.before(n))).orThunk(()=>An(e,M.after(t))),zI=(e,t)=>An(e,M.after(t)).orThunk(()=>qn(e,M.before(t))),HI=(e,t)=>Xy(t).orThunk(()=>Qy(t)).orThunk(()=>UI(e,t)),WI=(e,t)=>Qy(t).orThunk(()=>Xy(t)).orThunk(()=>zI(e,t)),VI=(e,t,n)=>e?WI(t,n):HI(t,n),jI=(e,t,n)=>VI(e,t,n).map(ae(LI,n)),Zy=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},qI=e=>t=>t.dom===e,KI=(e,t)=>t&&$e(e.schema.getBlockElements(),xt(t)),GI=e=>{if(Yt(e)){const t=x.fromHtml('<br data-mce-bogus="1">');return ia(e),Wt(e,t),b.some(M.before(t.dom))}else return b.none()},YI=(e,t,n)=>{const s=sr(e).filter(zn),o=ra(e).filter(zn);return _t(e),oA(s,o,t,(r,i,a)=>{const c=r.dom,u=i.dom,d=c.data.length;return Xd(c,u,n),a.container()===u?M(c,d):a}).orThunk(()=>(n&&(s.each(r=>Yd(r.dom,r.dom.length)),o.each(r=>Ec(r.dom,0))),t))},XI=(e,t)=>$e(e.schema.getTextInlineElements(),xt(t)),Sr=(e,t,n,s=!0)=>{const o=jI(t,e.getBody(),n.dom),r=Qr(n,ae(KI,e),qI(e.getBody())),i=YI(n,o,XI(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(GI).fold(()=>{s&&Zy(e,t,i)},a=>{s&&Zy(e,t,b.some(a))})},QI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ZI=e=>QI.test(e),wr=(e,t)=>ds(x.fromDom(t),L1(e)),JI=e=>{var t;return ct.DOM.getStyle(e,"direction",!0)==="rtl"||ZI((t=e.textContent)!==null&&t!==void 0?t:"")},eF=(e,t,n)=>j(ct.DOM.getParents(n.container(),"*",t),e),zo=(e,t,n)=>{const s=eF(e,t,n);return b.from(s[s.length-1])},tF=(e,t,n)=>{const s=Io(t,e),o=Io(n,e);return oe(s)&&s===o},nF=e=>Af(e)||Tf(e),Xn=(e,t)=>{const n=t.container(),s=t.offset();return e?ni(n)?X(n.nextSibling)?M(n.nextSibling,0):M.after(n):Af(t)?M(n,s+1):t:ni(n)?X(n.previousSibling)?M(n.previousSibling,n.previousSibling.data.length):M.before(n):Tf(t)?M(n,s-1):t},Jy=ae(Xn,!0),e0=ae(Xn,!1),t0=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},sF=e=>{e.execCommand("delete")},n0=e=>t0(e,"Delete"),oF=e=>t0(e,"ForwardDelete"),rF=e=>t=>Gr(Hn(t),e,rt),iF=e=>fT(e)||ua(e),_c=(e,t)=>lo(e,t)?Zr(t,iF,rF(e)):b.none(),Qd=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},aF=(e,t,n)=>bn(yn(n),Ks(n),(s,o)=>{const r=Xn(!0,s),i=Xn(!1,o),a=Xn(!1,t);return e?An(n,a).exists(c=>c.isEqual(i)&&t.isEqual(r)):qn(n,a).exists(c=>c.isEqual(r)&&t.isEqual(i))}).getOr(!0),s0=e=>(rA(e)?sr(e):hf(e)).bind(s0).orThunk(()=>b.some(e)),o0=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=s0(n).getOr(n),i=x.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?Qd(e,s):Yt(i)&&(cr(i),s&&e.selection.setCursorLocation(i.dom,0)),!rt(n,i)){const a=Gr(Hn(i),n)?[]:EA(i);R(a.concat(rn(n)),c=>{!rt(c,i)&&!lo(c,i)&&Yt(c)&&_t(c)})}},lF=e=>t=>rt(e,t),Zd=e=>Cn(e,"td,th"),cF=(e,t)=>{const n=u=>Ra(x.fromDom(u),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),i=o.isSome(),a=bn(s,o,rt).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:i,isSameTable:a,isMultiTable:!a&&r&&i}},Jd=(e,t)=>({start:e,end:t}),uF=(e,t,n)=>({rng:e,table:t,cells:n}),Ua=Ws.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Sc=(e,t)=>ar(x.fromDom(e),"td,th",t),r0=e=>!rt(e.start,e.end),i0=(e,t)=>Ra(e.start,t).bind(n=>Ra(e.end,t).bind(s=>Zi(rt(n,s),n))),fF=(e,t)=>!r0(e)&&i0(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),dF=(e,t)=>{const n=Sc(e.startContainer,t),s=Sc(e.endContainer,t);return bn(n,s,Jd)},mF=e=>t=>Ra(t,e).bind(n=>Ht(Zd(n)).map(s=>Jd(t,s))),pF=e=>t=>Ra(t,e).bind(n=>nn(Zd(n)).map(s=>Jd(s,t))),em=e=>t=>i0(t,e).map(n=>uF(t,n,Zd(n))),a0=(e,t,n,s)=>{if(n.collapsed||!e.forall(r0))return b.none();if(t.isSameTable){const o=e.bind(em(s));return b.some({start:o,end:o})}else{const o=Sc(n.startContainer,s),r=Sc(n.endContainer,s),i=o.bind(mF(s)).bind(em(s)),a=r.bind(pF(s)).bind(em(s));return b.some({start:i,end:a})}},l0=(e,t)=>Ue(e,n=>rt(n,t)),tm=e=>bn(l0(e.cells,e.rng.start),l0(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),gF=(e,t,n)=>e.exists(s=>fF(s,n)&&gd(s.start,t)),c0=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},hF=(e,t,n,s)=>a0(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=tm(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(Ua.fullTable(o.table));if(i.length>0){if(r)return b.some(Ua.partialTable(i,b.none()));{const a=c0(n,t);return b.some(Ua.partialTable(i,b.some({...t,rng:a})))}}else return b.none()}),bF=(e,t,n,s)=>a0(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(tm).getOr([]),a=r.bind(tm).getOr([]);if(i.length>0&&a.length>0){const c=c0(n,t);return b.some(Ua.multiTable(i,a,c))}else return b.none()}),CF=(e,t)=>{const n=lF(e),s=dF(t,n),o=cF(t,n);return gF(s,t,n)?s.map(r=>Ua.singleCellTable(t,r.start)):o.isMultiTable?bF(s,o,t,n):hF(s,o,t,n)},u0=e=>R(e,t=>{on(t,"contenteditable"),cr(t)}),vF=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(x.fromDom),yF=(e,t,n)=>{n.each(s=>{t?_t(s):(cr(s),e.selection.setCursorLocation(s.dom,0))})},nm=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),sm(e,o,t,!1).each(r=>r())},f0=e=>{const t=mi(e),n=x.fromDom(e.selection.getNode());Bl(n.dom)&&Yt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Y(t,s=>rt(s,n))&&Kt(n,"data-mce-selected","1")},d0=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const a=vF(e,i?r.endContainer:r.startContainer);r.deleteContents(),yF(e,i,a.filter(Yt));const c=i?t[0]:t[t.length-1];return nm(e,c,s,i),Yt(c)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);u0(o),f0(e)}),EF=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];nm(e,r,o,!0),nm(e,i,o,!1);const a=Yt(r)?t:t.slice(1),c=Yt(i)?n:n.slice(0,-1);u0(a.concat(c)),s.deleteContents(),f0(e)}),sm=(e,t,n,s=!0)=>b.some(()=>{o0(e,t,n,s)}),_F=(e,t)=>b.some(()=>Sr(e,!1,t)),SF=(e,t,n)=>CF(t,n).bind(s=>s.fold(ae(sm,e),ae(_F,e),ae(d0,e),ae(EF,e))),wF=(e,t)=>wc(e,t),xF=(e,t,n,s)=>om(t,s).fold(()=>SF(e,t,n),o=>wF(e,o)),kF=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?d0(e,n,b.none()):xF(e,s,o,t)},m0=(e,t)=>ve(go(t,e),Il),om=(e,t)=>ve(go(t,e),mf("caption")),NF=(e,t,n,s,o)=>oc(n,e.getBody(),o).bind(r=>m0(t,x.fromDom(r.getNode())).bind(i=>rt(i,s)?b.none():b.some(Me))),wc=(e,t)=>b.some(()=>{cr(t),e.selection.setCursorLocation(t.dom,0)}),AF=(e,t,n,s)=>yn(e.dom).bind(o=>Ks(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),TF=(e,t)=>wc(e,t),RF=(e,t,n)=>om(e,x.fromDom(n.getNode())).fold(()=>b.some(Me),s=>Zi(!rt(s,t),Me)),PF=(e,t,n,s,o)=>oc(n,e.getBody(),o).fold(()=>b.some(Me),r=>AF(s,n,o,r)?TF(e,s):RF(t,s,r)),OF=(e,t,n,s)=>{const o=M.fromRangeStart(e.selection.getRng());return m0(n,s).bind(r=>Yt(r)?wc(e,r):NF(e,n,t,r,o))},DF=(e,t,n,s)=>{const o=M.fromRangeStart(e.selection.getRng());return Yt(s)?wc(e,s):PF(e,n,t,s,o)},p0=(e,t)=>e?Dy(t):By(t),BF=(e,t)=>{const n=M.fromRangeStart(e.selection.getRng());return p0(t,n)||jn(t,e.getBody(),n).exists(s=>p0(t,s))},IF=(e,t,n)=>{const s=x.fromDom(e.getBody());return om(s,n).fold(()=>OF(e,t,s,n).orThunk(()=>Zi(BF(e,t),Me)),o=>DF(e,t,s,o))},rm=(e,t)=>{const n=x.fromDom(e.selection.getStart(!0)),s=mi(e);return e.selection.isCollapsed()&&s.length===0?IF(e,t,n):kF(e,n,s)},xr=(e,t)=>{let n=t;for(;n&&n!==e;){if(zs(n)||vt(n))return n;n=n.parentNode}return null},FF=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],LF=Q.each,im=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,i)=>{if(r.nodeName!==i.nodeName||r.nodeType!==i.nodeType)return!1;const a=u=>{const d={};return LF(t.getAttribs(u),g=>{const p=g.nodeName.toLowerCase();p!=="style"&&!o(p)&&(d[p]=t.getAttrib(u,p))}),d},c=(u,d)=>{for(const g in u)if($e(u,g)){const p=d[g];if(at(p)||u[g]!==p)return!1;delete d[g]}for(const g in d)if($e(d,g))return!1;return!0};return fe(r)&&fe(i)&&(!c(a(r),a(i))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style"))))?!1:!Kn(r)&&!Kn(i)},o=r=>Y(FF,i=>Jt(r,i))||n.has(r);return{compare:s,isAttributeInternal:o}},$F=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},g0=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const a=e[r];if(a.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const a=t[r],c=a.name;if(c in n.attributes.map){const u=s.attributes[c];u?u.nodes.push(n):s.attributes[c]={filter:a,nodes:[n]}}}},MF=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&$F(n,o=>{g0(e,t,o,s)}),s},h0=(e,t)=>{const n=(s,o)=>{ft(s,r=>{const i=wt(r.nodes);R(r.filter.callbacks,a=>{for(let c=i.length-1;c>=0;c--){const u=i[c];(!(o?u.attr(r.filter.name)!==void 0:u.name===r.filter.name)||Ve(u.parent))&&i.splice(c,1)}i.length>0&&a(i,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},b0=(e,t,n,s={})=>{const o=MF(e,t,n);h0(o,s)},am=(e,t,n,s)=>{if(t.insert&&n[s.name]){const o=new En("br",1);o.attr("data-mce-bogus","1"),s.empty().append(o)}else s.empty().append(new En("#text",3)).value=Gt},UF=e=>{var t;return C0(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===Gt},C0=(e,t)=>{const n=e==null?void 0:e.firstChild;return oe(n)&&n===e.lastChild&&n.name===t},zF=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},za=(e,t,n,s)=>s.isEmpty(t,n,o=>zF(e,o)),HF=(e,t)=>oe(e)&&(e.name in t||e.name==="br"),lm=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&lm(o,t,n);e.unwrap()}},cm=(e,t,n=Me)=>{const s=t.getTextBlockElements(),o=t.getNonEmptyElements(),r=t.getWhitespaceElements(),i=Q.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let c=0;c<e.length;c++){const u=e[c];let d,g,p;if(!u.parent||a.has(u))continue;if(s[u.name]&&u.parent.name==="li"){let _=u.next;for(;_&&s[_.name];){_.name="li",a.add(_),u.parent.insert(_,u.parent);_=_.next}u.unwrap();continue}const E=[u];for(d=u.parent;d&&!t.isValidChild(d.name,u.name)&&!i[d.name];d=d.parent)E.push(d);if(d&&E.length>1)if(t.isValidChild(d.name,u.name)){E.reverse(),g=E[0].clone(),n(g);let _=g;for(let y=0;y<E.length-1;y++){t.isValidChild(_.name,E[y].name)?(p=E[y].clone(),n(p),_.append(p)):p=_;for(let S=E[y].firstChild;S&&S!==E[y+1];){const w=S.next;p.append(S),S=w}_=p}za(t,o,r,g)?d.insert(u,E[0],!0):(d.insert(g,E[0],!0),d.insert(u,g)),d=E[0],(za(t,o,r,d)||C0(d,"br"))&&d.empty().remove()}else lm(u,t);else if(u.parent){if(u.name==="li"){let _=u.prev;if(_&&(_.name==="ul"||_.name==="ol")){_.append(u);continue}if(_=u.next,_&&(_.name==="ul"||_.name==="ol")&&_.firstChild){_.insert(u,_.firstChild,!0);continue}const y=new En("ul",1);n(y),u.wrap(y);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const _=new En("div",1);n(_),u.wrap(_)}else lm(u,t)}}},WF=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},VF=e=>{const t=M.fromRangeStart(e),n=M.fromRangeEnd(e),s=e.commonAncestorContainer;return jn(!1,s,n).map(o=>!Vs(t,n,s)&&Vs(t,o,s)?WF(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},um=e=>e.collapsed?e:VF(e),jF=e=>oe(e.firstChild)&&e.firstChild===e.lastChild,qF=e=>e.name==="br"||e.value===Gt,KF=(e,t)=>e.getBlockElements()[t.name]&&jF(t)&&qF(t.firstChild),GF=(e,t)=>{const n=e.getNonEmptyElements();return oe(t)&&(t.isEmpty(n)||KF(e,t))},YF=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),GF(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},XF=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},QF=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return XF(o)},ZF=e=>{var t;return j((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},JF=e=>e.data===Gt||Ot(e),eL=e=>oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&JF(e.firstChild),tL=e=>!e.firstChild||eL(e),nL=e=>e.length>0&&tL(e[e.length-1])?e.slice(0,-1):e,fm=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},sL=(e,t)=>!!fm(e,t),oL=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},rL=(e,t)=>{const n=M.before(e),o=qs(t).next(n);return o?o.toRange():null},v0=(e,t)=>{const n=M.after(e),o=qs(t).prev(n);return o?o.toRange():null},iL=(e,t,n,s)=>{const o=oL(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),Q.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e)),v0(t[t.length-1],n)},aL=(e,t,n)=>{const s=e.parentNode;return s&&Q.each(t,o=>{s.insertBefore(o,e)}),rL(e,n)},lL=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),v0(t[0],n)),cL=(e,t,n,s)=>{const o=QF(t,e,s),r=fm(t,n.startContainer),i=nL(ZF(o.firstChild)),a=1,c=2,u=t.getRoot(),d=g=>{const p=M.fromRangeStart(n),E=qs(t.getRoot()),_=g===a?E.prev(p):E.next(p),y=_==null?void 0:_.getNode();return y?fm(t,y)!==r:!0};return r?d(a)?aL(r,i,u):d(c)?lL(r,i,u,t):iL(r,i,u,n):null},uL=["pre"],fL=(e,t,n,s)=>{var o;const r=t.firstChild,i=t.lastChild,a=i.attr("data-mce-type")==="bookmark"?i.prev:i,c=r===a,u=z(uL,r.name);if(c&&u){const d=r.attr("contenteditable")!=="false",g=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,p=b.from(xr(s,n)).forall(zs);return d&&g&&p}else return!1},dm=Bl,dL=(e,t,n)=>{if(oe(n)){const s=e.getParent(t.endContainer,dm);return n===s&&gd(x.fromDom(n),t)}else return!1},mL=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},pL=(e,t)=>{b.from(e.getParent(t,"td,th")).map(x.fromDom).each(CT)},gL=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=im(e);Q.each(s.select("*[data-mce-fragment]"),i=>{if(oe(n[i.nodeName.toLowerCase()])&&cI(s,i)){for(let c=i.parentElement;oe(c)&&c!==o&&!fI(s,i,c);c=c.parentElement)if(r.compare(c,i)){s.remove(i,!0);break}}})}},hL=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},bL=e=>{Q.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},CL=e=>!!e.getAttribute("data-mce-fragment"),vL=(e,t)=>oe(t)&&!e.schema.getVoidElements()[t.nodeName],yL=(e,t)=>{var n,s,o;let r;const i=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);const c=xr(e.getBody(),t);if(c&&i.getContentEditable(c)==="false"){i.remove(t),a.select(c);return}let u=i.createRng();const d=t.previousSibling;if(X(d)){u.setStart(d,(s=(n=d.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const E=t.nextSibling;X(E)&&(d.appendData(E.data),(o=E.parentNode)===null||o===void 0||o.removeChild(E))}else u.setStartBefore(t),u.setEndBefore(t);const g=E=>{let _=M.fromRangeStart(E);return _=qs(e.getBody()).next(_),_==null?void 0:_.toRange()},p=i.getParent(t,i.isBlock);i.remove(t),p&&i.isEmpty(p)&&(ia(x.fromDom(p)),u.setStart(p,0),u.setEnd(p,0),!dm(p)&&!CL(p)&&(r=g(u))?(u=r,i.remove(p)):i.add(p,i.create("br",{"data-mce-bogus":"1"}))),a.setRng(u)},EL=e=>{const t=e.dom,n=um(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,dm);dL(t,n,s)?sm(e,n,x.fromDom(s)):e.getDoc().execCommand("Delete",!1)},_L=(e,t,n)=>{var s,o,r;const i=e.selection,a=e.dom,c=e.parser,u=n.merge,d=Lo({validate:!0},e.schema),g='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,g);let p=i.getRng();const E=p.startContainer,_=e.getBody();E===_&&i.isCollapsed()&&a.isBlock(_.firstChild)&&vL(e,_.firstChild)&&a.isEmpty(_.firstChild)&&(p=a.createRng(),p.setStart(_.firstChild,0),p.setEnd(_.firstChild,0),i.setRng(p)),i.isCollapsed()||EL(e);const y=i.getNode(),S={context:y.nodeName.toLowerCase(),data:n.data,insert:!0},w=c.parse(t,S);if(n.paste===!0&&YF(e.schema,w)&&sL(a,y))return p=cL(d,a,i.getRng(),w),p&&i.setRng(p),t;n.paste===!0&&fL(a,w,y,e.getBody())&&((s=w.firstChild)===null||s===void 0||s.unwrap()),hL(w);let N=w.lastChild;if(N&&N.attr("id")==="mce_marker"){const A=N;for(N=N.prev;N;N=N.walk(!0))if(N.type===3||!a.isBlock(N.name)){N.parent&&e.schema.isValidChild(N.parent.name,"span")&&N.parent.insert(A,N,N.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(y),!S.invalid)t=d.serialize(w),mL(e,t,y);else{e.selection.setContent(g);let A=i.getNode(),U;const H=e.getBody();for(aa(A)?A=U=H:U=A;U&&U!==H;)A=U,U=U.parentNode;t=A===H?H.innerHTML:a.getOuterHTML(A);const ee=c.parse(t);for(let te=ee;te;te=te.walk())if(te.attr("id")==="mce_marker"){te.replace(w);break}const W=w.children(),F=(r=(o=w.parent)===null||o===void 0?void 0:o.name)!==null&&r!==void 0?r:ee.name;w.unwrap();const L=j(W,te=>!e.schema.isValidChild(F,te.name));cm(L,e.schema),b0(c.getNodeFilters(),c.getAttributeFilters(),ee),t=d.serialize(ee),A===H?a.setHTML(H,t):a.setOuterHTML(A,t)}return gL(e,u),yL(e,a.get("mce_marker")),bL(e.getBody()),pL(a,i.getStart()),t},xc=e=>e instanceof En,SL=e=>{_r(e)&&yn(e.getBody()).each(t=>{const n=t.getNode(),s=uo(n)?yn(n).getOr(t):t;e.selection.setRng(s.toRange())})},mm=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&SL(e)},wL=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Dn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,_a(e),n)):n||(n=o),mm(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Lo({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Fl(x.fromDom(t))?n:Q.trim(n);return mm(e,o,s.no_selection),{content:o,html:o}}},xL=(e,t,n,s)=>{b0(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Lo({validate:!1},e.schema).serialize(n),r=Fl(x.fromDom(t))?o:Q.trim(o);return mm(e,r,s.no_selection),{content:n,html:r}},kL=(e,t,n)=>b.from(e.getBody()).map(s=>xc(t)?xL(e,s,t,n):wL(e,s,t,n)).getOr({content:t,html:xc(n.content)?"":n.content}),NL=(e,t)=>ZA(e,t).isSome(),y0=e=>He(e)?e:tt,AL=(e,t,n)=>{let s=e.dom;const o=y0(n);for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},pm=(e,t,n)=>{const s=t(e),o=y0(n);return s.orThunk(()=>o(e)?b.none():AL(e,t,o))},gm=Ed,E0=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Gn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},hm=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const i=e.dom.getParent(t,a=>E0(e,a,n)?!0:a.parentNode===r||!!Ys(e,a,n,s,!0));return!!Ys(e,i,n,s,o)},kc=(e,t,n)=>qt(n)&&gm(t,n.inline)||Gs(n)&&gm(t,n.block)?!0:Gn(n)?fe(t)&&e.is(t,n.selector):!1,_0=(e,t,n,s,o,r)=>{const i=n[s],a=s==="attributes";if(He(n.onmatch))return n.onmatch(t,n,s);if(i){if(nh(i)){for(let c=0;c<i.length;c++)if(a?e.getAttrib(t,i[c]):cc(e,t,i[c]))return!0}else for(const c in i)if($e(i,c)){const u=a?e.getAttrib(t,c):cc(e,t,c),d=Fo(i[c],r),g=Ve(u)||Qi(u);if(g&&Ve(d))continue;if(o&&g&&!n.exact||(!o||n.exact)&&!gm(u,_d(d,c)))return!1}}return!0},Ys=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&fe(t))for(let a=0;a<r.length;a++){const c=r[a];if(kc(e.dom,t,c)&&_0(i,t,c,"attributes",o,s)&&_0(i,t,c,"styles",o,s)){const u=c.classes;if(u){for(let d=0;d<u.length;d++)if(!e.dom.hasClass(t,Fo(u[d],s)))return}return c}}},bm=(e,t,n,s,o)=>{if(s)return hm(e,s,t,n,o);if(s=e.selection.getNode(),hm(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&hm(e,r,t,n,o))},TL=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let a=0;a<t.length;a++){const c=t[a];!o[c]&&Ys(e,i,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},RL=(e,t)=>{const n=o=>rt(o,x.fromDom(e.getBody())),s=(o,r)=>Ys(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>pm(x.fromDom(o),r=>ro(t,i=>s(r,i)),n)).getOrNull()},PL=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=uc(s,o);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!Gn(a))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],a.selector))return!0}}return!1},OL=(e,t,n)=>_e(n,(s,o)=>{const r=DO(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),yi=en,DL=(e,t)=>e.importNode(t,!0),BL=e=>{const t=[];let n=e;for(;n;){if(X(n)&&n.data!==yi||n.childNodes.length>1)return[];fe(n)&&t.push(n),n=n.firstChild}return t},S0=e=>BL(e).length>0,w0=e=>{if(e){const t=new $t(e,e);for(let n=t.current();n;n=t.next())if(X(n))return n}return null},Cm=e=>{const t=x.fromTag("span");return wo(t,{id:cd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Wt(t,x.fromText(yi)),t},IL=e=>{const t=w0(e);return t&&t.data.charAt(0)===yi&&t.deleteData(0,1),t},vm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(S0(t))Sr(e,!1,x.fromDom(t),n);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),a=r.startContainer,c=r.startOffset,u=r.endContainer,d=r.endOffset,g=IL(t);s.remove(t,!0),a===g&&c>0&&r.setStart(g,c-1),u===g&&d>0&&r.setEnd(g,d-1),i&&s.isEmpty(i)&&cr(x.fromDom(i)),o.setRng(r)}},ym=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)vm(e,t,n);else if(t=vr(e.getBody(),o.getStart()),!t)for(;t=s.get(cd);)vm(e,t,!1)},FL=(e,t,n)=>{var s,o;const r=e.dom,i=r.getParent(n,ae(vd,e));i&&r.isEmpty(i)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(bT(x.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},x0=(e,t)=>(e.appendChild(t),t),k0=(e,t)=>{var n;const s=ie(e,(r,i)=>x0(r,i.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return x0(s,o.createTextNode(yi))},LL=(e,t,n,s,o,r)=>{const i=e.formatter,a=e.dom,c=j(Un(i.get()),g=>g!==s&&!sn(g,"removeformat")),u=OL(e,n,c);if(j(u,g=>!BO(e,g,s)).length>0){const g=n.cloneNode(!1);return a.add(t,g),i.remove(s,o,g,r),a.remove(g),b.some(g)}else return b.none()},$L=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const i=o.getRng();let a=i.startOffset;const u=i.startContainer.nodeValue;s=vr(e.getBody(),o.getStart());const d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&a>0&&a<u.length&&d.test(u.charAt(a))&&d.test(u.charAt(a-1))){const g=o.getBookmark();i.collapse(!0);let p=hi(e,i,r);p=bc(p),e.formatter.apply(t,n,p),o.moveToBookmark(g)}else{let g=s?w0(s):null;(!s||(g==null?void 0:g.data)!==yi)&&(s=DL(e.getDoc(),Cm(!0).dom),g=s.firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),o.setCursorLocation(g,a)}},ML=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const c=r.getRng(),u=c.startContainer,d=c.startOffset;let g=u;X(u)&&(d!==u.data.length&&(i=!0),g=g.parentNode);const p=[];let E;for(;g;){if(Ys(e,g,t,n,s)){E=g;break}g.nextSibling&&(i=!0),p.push(g),g=g.parentNode}if(!!E)if(i){const _=r.getBookmark();c.collapse(!0);let y=hi(e,c,a,!0);y=bc(y),e.formatter.remove(t,n,y,s),r.moveToBookmark(_)}else{const _=vr(e.getBody(),E),y=Cm(!1).dom;FL(e,y,_!=null?_:E);const S=LL(e,y,E,t,n,s),w=k0(p.concat(S.toArray()),y);_&&vm(e,_,!1),r.setCursorLocation(w,1),o.isEmpty(E)&&o.remove(E)}},UL=(e,t)=>{const n=e.selection,s=e.getBody();ym(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===yi&&ym(e,vr(s,n.getStart())),(t===37||t===39)&&ym(e,vr(s,n.getStart()))},zL=e=>{e.on("mouseup keydown",t=>{UL(e,t.keyCode)})},HL=(e,t)=>{const n=Cm(!1),s=k0(t,n.dom);return Wn(x.fromDom(e),n),_t(x.fromDom(e)),M(s,0)},WL=(e,t)=>{const n=e.schema.getTextInlineElements();return $e(n,xt(t))&&!bs(t.dom)&&!ir(t.dom)},VL=e=>bs(e.dom)&&S0(e.dom),Ha={},N0=ms(["pre"]),jL=(e,t)=>{Ha[e]||(Ha[e]=[]),Ha[e].push(t)},qL=(e,t)=>{$e(Ha,e)&&R(Ha[e],n=>{n(t)})};jL("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const i=r.previousSibling;return N0(i)&&z(o,i)},s=(o,r)=>{const i=x.fromDom(r),a=co(i).dom;_t(i),or(x.fromDom(o),[x.fromTag("br",a),x.fromTag("br",a),...rn(i)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=j(j(o,N0),n(o));R(r,i=>{s(i.previousSibling,i)})}});const A0=["fontWeight","fontStyle","color","fontSize","fontFamily"],KL=e=>Ge(e.styles)&&Y(Un(e.styles),t=>z(A0,t)),GL=e=>ve(e,t=>qt(t)&&t.inline==="span"&&KL(t)),T0=(e,t)=>{const n=e.get(t);return Ct(n)?GL(n):b.none()},R0=(e,t)=>qn(t,M.fromRangeStart(e)).isNone(),P0=(e,t)=>An(t,M.fromRangeEnd(e)).exists(n=>!Ot(n.getNode())||An(t,n).isSome())===!1,O0=e=>t=>GA(t)&&e.getContentEditableParent(t)!=="false",YL=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return R0(n,t[0])&&P0(n,t[0])?t:[];{const s=nn(t).filter(i=>R0(n,i)).toArray(),o=Ht(t).filter(i=>P0(n,i)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},XL=e=>j(YL(e),O0(e.dom)),D0=e=>j(e.getSelectedBlocks(),O0(e.dom)),Em=Q.each,_m=e=>fe(e)&&!Kn(e)&&!bs(e)&&!ir(e),B0=(e,t)=>{for(let n=e;n;n=n[t]){if(X(n)&&Ls(n.data))return e;if(fe(n)&&!Kn(n))return n}return e},I0=(e,t,n)=>{const s=im(e),o=fe(t)&&yr(t),r=fe(n)&&yr(n);if(o&&r){const i=B0(t,"previousSibling"),a=B0(n,"nextSibling");if(s.compare(i,a)){for(let c=i.nextSibling;c&&c!==a;){const u=c;c=c.nextSibling,i.appendChild(u)}return e.dom.remove(a),Q.each(Q.grep(a.childNodes),c=>{i.appendChild(c)}),i}}return n},F0=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=I0(e,_v(s),s))!==null&&o!==void 0?o:s;I0(e,r,_v(r,!0))}},QL=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Em(e.select(s,n),o=>{_m(o)&&yr(o)&&Em(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},Sm=(e,t,n)=>{Em(e.childNodes,s=>{_m(s)&&(t(s)&&n(s),s.hasChildNodes()&&Sm(s,t,n))})},ZL=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},L0=(e,t)=>n=>!!(n&&cc(e,n,t)),$0=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),ZL(e,s)},Ei=Ws.generate([{keep:[]},{rename:["name"]},{removed:[]}]),JL=/^(src|href|style)$/,wm=Q.each,Nc=Ed,e$=e=>/^(TR|TH|TD)$/.test(e.nodeName),M0=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),U0=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(fe(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return X(s)&&n&&o>=s.data.length&&(s=new $t(s,e.getBody()).next()||s),X(s)&&!n&&o===0&&(s=new $t(s,e.getBody()).prev()||s),s},z0=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return e$(e)&&s?e.nodeName==="TR"&&s[n]||s:e},xm=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},H0=(e,t,n,s,o)=>{const r=x.fromDom(t),i=x.fromDom(e.create(s,o)),a=n?jh(r):Vh(r);return or(i,a),n?(Wn(r,i),tb(i,r)):(ko(r,i),Wt(i,r)),i.dom},t$=(e,t)=>t.links&&e.nodeName==="A",n$=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Dn(e);Gs(n)&&s===r.getRoot()&&(!n.list_block||!Nc(t,n.list_block))&&R(wt(t.childNodes),a=>{pi(e,i,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=xm(r,a,i),r.setAttribs(o,_a(e))):o=null}),!(LO(n)&&!Nc(n.inline,t))&&r.remove(t,!0)},W0=(e,t,n)=>zt(e)?{name:t,value:null}:{name:e,value:Fo(t,n)},V0=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},j0=(e,t,n,s,o)=>{let r=!1;wm(n.styles,(i,a)=>{const{name:c,value:u}=W0(a,i,s),d=_d(u,c);(n.remove_similar||hn(u)||!fe(o)||Nc(cc(e,o,c),d))&&e.setStyle(t,c,""),r=!0}),r&&V0(e,t)},s$=(e,t,n)=>{t==="removeformat"?R(D0(e.selection),s=>{R(A0,o=>e.dom.setStyle(s,o,"")),V0(e.dom,s)}):T0(e.formatter,t).each(s=>{R(D0(e.selection),o=>j0(e.dom,o,s,n,null))})},q0=(e,t,n,s,o)=>{const r=e.dom,i=im(e);if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!kc(r,s,t)&&!t$(s,t))return Ei.keep();const a=s,c=t.preserve_attributes;if(qt(t)&&t.remove==="all"&&Ct(c)){const u=j(r.getAttribs(a),d=>z(c,d.name.toLowerCase()));if(r.removeAllAttribs(a),R(u,d=>r.setAttrib(a,d.name,d.value)),u.length>0)return Ei.rename("span")}if(t.remove!=="all"){j0(r,a,t,n,o),wm(t.attributes,(d,g)=>{const{name:p,value:E}=W0(g,d,n);if(t.remove_similar||hn(E)||!fe(o)||Nc(r.getAttrib(o,p),E)){if(p==="class"){const _=r.getAttrib(a,p);if(_){let y="";if(R(_.split(/\s+/),S=>{/mce\-\w+/.test(S)&&(y+=(y?" ":"")+S)}),y){r.setAttrib(a,p,y);return}}}if(JL.test(p)&&a.removeAttribute("data-mce-"+p),p==="style"&&ms(["li"])(a)&&r.getStyle(a,"list-style-type")==="none"){a.removeAttribute(p),r.setStyle(a,"list-style-type","none");return}p==="class"&&a.removeAttribute("className"),a.removeAttribute(p)}}),wm(t.classes,d=>{d=Fo(d,n),(!fe(o)||r.hasClass(o,d))&&r.removeClass(a,d)});const u=r.getAttribs(a);for(let d=0;d<u.length;d++){const g=u[d].nodeName;if(!i.isAttributeInternal(g))return Ei.keep()}}return t.remove!=="none"?(n$(e,a,t),Ei.removed()):Ei.keep()},Wa=(e,t,n,s,o)=>q0(e,t,n,s,o).fold(tt,r=>(e.dom.rename(s,r),!0),Et),o$=(e,t,n,s,o)=>{let r;return t.parentNode&&R(uc(e.dom,t.parentNode).reverse(),i=>{if(!r&&fe(i)&&i.id!=="_start"&&i.id!=="_end"){const a=Ys(e,i,n,s,o);a&&a.split!==!1&&(r=i)}}),r},r$=(e,t,n,s)=>q0(e,t,n,s,s).fold(K(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),K(null)),i$=(e,t,n,s,o,r,i,a)=>{var c,u;let d,g;const p=e.dom;if(n){const E=n.parentNode;for(let _=s.parentNode;_&&_!==E;_=_.parentNode){let y=p.clone(_,!1);for(let S=0;S<t.length&&(y=r$(e,t[S],a,y),y!==null);S++);y&&(d&&y.appendChild(d),g||(g=y),d=y)}r&&(!i.mixed||!p.isBlock(n))&&(s=(c=p.split(n,s))!==null&&c!==void 0?c:s),d&&g&&((u=o.parentNode)===null||u===void 0||u.insertBefore(d,o),g.appendChild(o),qt(i)&&F0(e,i,a,d))}return s},K0=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0],a=e.dom,c=e.selection,u=y=>{const S=o$(e,y,t,n,o);return i$(e,r,S,y,y,!0,i,n)},d=y=>Kn(y)&&fe(y)&&(y.id==="_start"||y.id==="_end"),g=y=>Y(r,S=>Wa(e,S,n,y,y)),p=y=>{const S=wt(y.childNodes),N=g(y)||Y(r,H=>kc(a,y,H)),A=y.parentNode;if(!N&&oe(A)&&wd(i)&&g(A),i.deep&&S.length)for(let H=0;H<S.length;H++)p(S[H]);R(["underline","line-through","overline"],H=>{fe(y)&&e.dom.getStyle(y,"text-decoration")===H&&y.parentNode&&wv(a,y.parentNode)===H&&Wa(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:H}},void 0,y)})},E=y=>{const S=a.get(y?"_start":"_end");if(S){let w=S[y?"firstChild":"lastChild"];return d(w)&&(w=w[y?"firstChild":"lastChild"]),X(w)&&w.data.length===0&&(w=y?S.previousSibling||S.nextSibling:S.nextSibling||S.previousSibling),a.remove(S,!0),w}else return null},_=y=>{let S,w,N=hi(e,y,r,y.collapsed);if(i.split){if(N=bc(N),S=U0(e,N,!0),w=U0(e,N),S!==w){if(S=z0(S,!0),w=z0(w,!1),M0(a,S,w)){const U=b.from(S.firstChild).getOr(S);u(H0(a,U,!0,"span",{id:"_start","data-mce-type":"bookmark"})),E(!0);return}if(M0(a,w,S)){const U=b.from(w.lastChild).getOr(w);u(H0(a,U,!1,"span",{id:"_end","data-mce-type":"bookmark"})),E(!1);return}S=xm(a,S,"span",{id:"_start","data-mce-type":"bookmark"}),w=xm(a,w,"span",{id:"_end","data-mce-type":"bookmark"});const A=a.createRng();A.setStartAfter(S),A.setEndBefore(w),Oa(a,A,U=>{R(U,H=>{!Kn(H)&&!Kn(H.parentNode)&&u(H)})}),u(S),u(w),S=E(!0),w=E()}else S=w=u(S);N.startContainer=S.parentNode?S.parentNode:S,N.startOffset=a.nodeIndex(S),N.endContainer=w.parentNode?w.parentNode:w,N.endOffset=a.nodeIndex(w)+1}Oa(a,N,A=>{R(A,p)})};if(s){if(Pa(s)){const y=a.createRng();y.setStartBefore(s),y.setEndAfter(s),_(y)}else _(s);Uv(e,t,s,n);return}!c.isCollapsed()||!qt(i)||mi(e).length?(Ev(e,()=>bd(e,_),y=>qt(i)&&bm(e,t,n,y)),e.nodeChanged()):ML(e,t,n,o),s$(e,t,n),Uv(e,t,s,n)},G0=Q.each,a$=(e,t,n,s)=>{const o=r=>{if(fe(r)&&fe(r.parentNode)&&yr(r)){const i=wv(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Q.walk(s,o,"childNodes"),o(s))},l$=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=L0(e,"fontSize");Sm(s,r=>o(r)&&yr(r),$0(e,"backgroundColor",Fo(t.styles.backgroundColor,n)))}},c$=(e,t,n,s)=>{if(qt(t)&&(t.inline==="sub"||t.inline==="sup")){const o=L0(e,"fontSize");Sm(s,i=>o(i)&&yr(i),$0(e,"fontSize",""));const r=j(e.select(t.inline==="sup"?"sub":"sup",s),yr);e.remove(r,!0)}},u$=(e,t,n,s)=>{G0(t,o=>{qt(o)&&G0(e.dom.select(o.inline,s),r=>{_m(r)&&Wa(e,o,n,r,o.exact?r:null)}),QL(e.dom,o,s)})},f$=(e,t,n,s,o)=>{const r=o.parentNode;Ys(e,r,n,s)&&Wa(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,i=>Ys(e,i,n,s)?(Wa(e,t,s,o),!0):!1)},Ac=Q.each,d$=(e,t,n,s)=>{if(j1(e)&&qt(t)&&n.parentNode){const o=Fb(e.schema),r=NL(x.fromDom(n),i=>bs(i.dom));return qr(o,s)&&Yt(x.fromDom(n.parentNode),!1)&&!r}else return!1},Y0=(e,t,n,s)=>{if(Ac(n.styles,(o,r)=>{e.setStyle(t,r,Fo(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},X0=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),a=e.dom,c=e.selection,u=(_,y=r)=>{He(y.onformat)&&y.onformat(_,y,n,s),Y0(a,_,y,n),Ac(y.attributes,(S,w)=>{a.setAttrib(_,w,Fo(S,n))}),Ac(y.classes,S=>{const w=Fo(S,n);a.hasClass(_,w)||a.addClass(_,w)})},d=(_,y)=>{let S=!1;return Ac(_,w=>Gn(w)?a.getContentEditable(y)==="false"&&!w.ceFalseOverride||oe(w.collapsed)&&w.collapsed!==i?!0:a.is(y,w.selector)&&!bs(y)?(u(y,w),S=!0,!1):!0:!1),S},g=_=>{if(ne(_)){const y=a.create(_);return u(y),y}else return null},p=(_,y,S)=>{const w=[];let N=!0;const A=r.inline||r.block,U=g(A),H=F=>IO(r)&&Ys(e,F,t,n),ee=(F,L,te)=>{const me=FO(r)&&vd(e,F)&&pi(e,L,A);return te&&me},W=(F,L,te,me)=>{const be=F.nodeName.toLowerCase(),Te=pi(e,A,be)&&pi(e,L,A),ze=!S&&X(F)&&Ll(F.data),qe=bs(F),nt=!qt(r)||!_.isBlock(F);return(te||me)&&Te&&!ze&&!qe&&nt};Oa(_,y,F=>{let L;const te=me=>{let be=!1,Te=N,ze=!1;const qe=me.nodeName.toLowerCase(),nt=me.parentNode,Mt=nt.nodeName.toLowerCase(),Z=_.getContentEditable(me);oe(Z)&&(Te=N,N=Z==="true",be=!0,ze=Sv(e,me));const Re=N&&!be;if(Ot(me)&&!d$(e,r,me,Mt)){L=null,Gs(r)&&_.remove(me);return}if(H(me)){L=null;return}if(ee(qe,Mt,Re)){const De=_.rename(me,A);u(De),w.push(De),L=null;return}if(Gn(r)){let De=d(o,me);if(!De&&oe(nt)&&wd(r)&&(De=d(o,nt)),!qt(r)||De){L=null;return}}oe(U)&&W(me,Mt,Re,ze)?(L||(L=_.clone(U,!1),nt.insertBefore(L,me),w.push(L)),ze&&be&&(N=Te),L.appendChild(me)):(L=null,R(wt(me.childNodes),te),be&&(N=Te),L=null)};R(F,te)}),r.links===!0&&R(w,F=>{const L=te=>{te.nodeName==="A"&&u(te,r),R(wt(te.childNodes),L)};L(F)}),R(w,F=>{const L=be=>{let Te=0;return R(be.childNodes,ze=>{!PO(ze)&&!Kn(ze)&&Te++}),Te},te=be=>ve(be.childNodes,Cd).filter(ze=>_.getContentEditable(ze)!=="false"&&kc(_,ze,r)).map(ze=>{const qe=_.clone(ze,!1);return u(qe),_.replace(qe,be,!0),_.remove(ze,!0),qe}).getOr(be),me=L(F);if((w.length>1||!_.isBlock(F))&&me===0){_.remove(F,!0);return}(qt(r)||Gs(r)&&r.wrapper)&&(!r.exact&&me===1&&(F=te(F)),u$(e,o,n,F),f$(e,r,t,n,F),l$(_,r,n,F),a$(_,r,n,F),c$(_,r,n,F),F0(e,r,n,F))})},E=Pa(s)?s:c.getNode();if(a.getContentEditable(E)==="false"&&!Sv(e,E)){s=E,d(o,s),Mv(e,t,s,n);return}if(r){if(s)if(Pa(s)){if(!d(o,s)){const _=a.createRng();_.setStartBefore(s),_.setEndAfter(s),p(a,hi(e,_,o),!0)}}else p(a,s,!0);else!i||!qt(r)||mi(e).length?(c.setRng(um(c.getRng())),Ev(e,()=>{bd(e,(_,y)=>{const S=y?_:hi(e,_,o);p(a,S,!1)})},Et),e.nodeChanged()):$L(e,t,n),T0(e.formatter,t).each(_=>{R(XL(e.selection),y=>Y0(a,y,_,n))});qL(t,e)}Mv(e,t,s,n)},Q0=e=>$e(e,"vars"),m$=(e,t)=>{e.set({}),t.on("NodeChange",n=>{tE(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>Pa(o)?o:o.startContainer).bind(o=>fe(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>Z0(t));tE(t,s,e.get())})},Z0=e=>e.selection.getStart(),J0=(e,t,n,s,o)=>Ae(t,a=>{const c=e.formatter.matchNode(a,n,o!=null?o:{},s);return!at(c)},a=>E0(e,a,n)?!0:s?!1:oe(e.formatter.matchNode(a,n,o,!0))),eE=(e,t)=>{const n=t!=null?t:Z0(e);return j(uc(e.dom,n),s=>fe(s)&&!ir(s))},tE=(e,t,n)=>{const s=eE(e,t);ft(n,(o,r)=>{const i=a=>{const c=J0(e,s,r,a.similar,Q0(a)?a.vars:void 0),u=c.isSome();if(a.state.get()!==u){a.state.set(u);const d=c.getOr(t);Q0(a)?a.callback(u,{node:d,format:r,parents:s}):R(a.callbacks,g=>g(u,{node:d,format:r,parents:s}))}};R([o.withSimilar,o.withoutSimilar],i),R(o.withVars,i)})},p$=(e,t,n,s,o,r)=>{const i=t.get();R(n.split(","),a=>{const c=ht(i,a).getOrThunk(()=>{const d={withSimilar:{state:Vt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Vt(!1),similar:!1,callbacks:[]},withVars:[]};return i[a]=d,d}),u=()=>{const d=eE(e);return J0(e,d,a,o,r).isSome()};if(at(r)){const d=o?c.withSimilar:c.withoutSimilar;d.callbacks.push(s),d.callbacks.length===1&&d.state.set(u())}else c.withVars.push({state:Vt(u()),similar:o,vars:r,callback:s})}),t.set(i)},g$=(e,t,n)=>{const s=e.get();R(t.split(","),o=>ht(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:j(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:j(r.withoutSimilar.callbacks,i=>i!==n)},withVars:j(r.withVars,i=>i.callback!==n)}})),e.set(s)},h$=(e,t,n,s,o,r)=>(p$(e,t,n,s,o,r),{unbind:()=>g$(t,n,s)}),b$=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(bm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?K0(e,t,n,s):X0(e,t,n,s))};function kr(e){return kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(e)}function km(e,t){return km=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},km(e,t)}function C$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tc(e,t,n){return C$()?Tc=Reflect.construct:Tc=function(o,r,i){var a=[null];a.push.apply(a,r);var c=Function.bind.apply(o,a),u=new c;return i&&km(u,i.prototype),u},Tc.apply(null,arguments)}function Cs(e){return v$(e)||y$(e)||E$(e)||_$()}function v$(e){if(Array.isArray(e))return Nm(e)}function y$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E$(e,t){if(!!e){if(typeof e=="string")return Nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nm(e,t)}}function Nm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S$=Object.hasOwnProperty,nE=Object.setPrototypeOf,w$=Object.isFrozen,x$=Object.getPrototypeOf,k$=Object.getOwnPropertyDescriptor,Tn=Object.freeze,Xs=Object.seal,N$=Object.create,sE=typeof Reflect<"u"&&Reflect,Rc=sE.apply,Am=sE.construct;Rc||(Rc=function(t,n,s){return t.apply(n,s)}),Tn||(Tn=function(t){return t}),Xs||(Xs=function(t){return t}),Am||(Am=function(t,n){return Tc(t,Cs(n))});var A$=vs(Array.prototype.forEach),T$=vs(Array.prototype.pop),Va=vs(Array.prototype.push),Pc=vs(String.prototype.toLowerCase),R$=vs(String.prototype.match),Ho=vs(String.prototype.replace),P$=vs(String.prototype.indexOf),O$=vs(String.prototype.trim),Rn=vs(RegExp.prototype.test),Tm=D$(TypeError);function vs(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return Rc(e,t,s)}}function D$(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Am(e,n)}}function Je(e,t){nE&&nE(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=Pc(s);o!==s&&(w$(t)||(t[n]=o),s=o)}e[s]=!0}return e}function Nr(e){var t=N$(null),n;for(n in e)Rc(S$,e,[n])&&(t[n]=e[n]);return t}function Oc(e,t){for(;e!==null;){var n=k$(e,t);if(n){if(n.get)return vs(n.get);if(typeof n.value=="function")return vs(n.value)}e=x$(e)}function s(o){return console.warn("fallback value for",o),null}return s}var oE=Tn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rm=Tn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Pm=Tn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B$=Tn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Om=Tn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),I$=Tn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rE=Tn(["#text"]),iE=Tn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Dm=Tn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aE=Tn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Dc=Tn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F$=Xs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),L$=Xs(/<%[\w\W]*|[\w\W]*%>/gm),$$=Xs(/^data-[\-\w.\u00B7-\uFFFF]/),M$=Xs(/^aria-[\-\w]+$/),U$=Xs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),z$=Xs(/^(?:\w+script|data):/i),H$=Xs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W$=Xs(/^html$/i),V$=function(){return typeof window>"u"?null:window},j$=function(t,n){if(kr(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function lE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V$(),t=function(I){return lE(I)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,i=e.Node,a=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,d=u===void 0?e.NamedNodeMap||e.MozNamedAttrMap:u,g=e.HTMLFormElement,p=e.DOMParser,E=e.trustedTypes,_=a.prototype,y=Oc(_,"cloneNode"),S=Oc(_,"nextSibling"),w=Oc(_,"childNodes"),N=Oc(_,"parentNode");if(typeof r=="function"){var A=s.createElement("template");A.content&&A.content.ownerDocument&&(s=A.content.ownerDocument)}var U=j$(E,n),H=U?U.createHTML(""):"",ee=s,W=ee.implementation,F=ee.createNodeIterator,L=ee.createDocumentFragment,te=ee.getElementsByTagName,me=n.importNode,be={};try{be=Nr(s).documentMode?s.documentMode:{}}catch{}var Te={};t.isSupported=typeof N=="function"&&W&&typeof W.createHTMLDocument<"u"&&be!==9;var ze=F$,qe=L$,nt=$$,Mt=M$,Z=z$,Re=H$,De=U$,ke=null,kt=Je({},[].concat(Cs(oE),Cs(Rm),Cs(Pm),Cs(Om),Cs(rE))),le=null,we=Je({},[].concat(Cs(iE),Cs(Dm),Cs(aE),Cs(Dc))),Ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),se=null,Fe=null,Be=!0,Se=!0,Ne=!1,Qe=!1,et=!1,Dt=!1,bt=!1,dt=!1,Rt=!1,Qt=!1,Bt=!0,Ss=!0,Jn=!1,ws={},xs=null,ks=Je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ns=null,It=Je({},["audio","video","img","source","image","track"]),es=null,As=Je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Br="http://www.w3.org/1998/Math/MathML",as="http://www.w3.org/2000/svg",In="http://www.w3.org/1999/xhtml",dn=In,ls=!1,Fn,Ir=["application/xhtml+xml","text/html"],ku="text/html",Co,Vo=null,Nu=s.createElement("form"),rg=function(I){return I instanceof RegExp||I instanceof Function},Au=function(I){Vo&&Vo===I||((!I||kr(I)!=="object")&&(I={}),I=Nr(I),ke="ALLOWED_TAGS"in I?Je({},I.ALLOWED_TAGS):kt,le="ALLOWED_ATTR"in I?Je({},I.ALLOWED_ATTR):we,es="ADD_URI_SAFE_ATTR"in I?Je(Nr(As),I.ADD_URI_SAFE_ATTR):As,Ns="ADD_DATA_URI_TAGS"in I?Je(Nr(It),I.ADD_DATA_URI_TAGS):It,xs="FORBID_CONTENTS"in I?Je({},I.FORBID_CONTENTS):ks,se="FORBID_TAGS"in I?Je({},I.FORBID_TAGS):{},Fe="FORBID_ATTR"in I?Je({},I.FORBID_ATTR):{},ws="USE_PROFILES"in I?I.USE_PROFILES:!1,Be=I.ALLOW_ARIA_ATTR!==!1,Se=I.ALLOW_DATA_ATTR!==!1,Ne=I.ALLOW_UNKNOWN_PROTOCOLS||!1,Qe=I.SAFE_FOR_TEMPLATES||!1,et=I.WHOLE_DOCUMENT||!1,dt=I.RETURN_DOM||!1,Rt=I.RETURN_DOM_FRAGMENT||!1,Qt=I.RETURN_TRUSTED_TYPE||!1,bt=I.FORCE_BODY||!1,Bt=I.SANITIZE_DOM!==!1,Ss=I.KEEP_CONTENT!==!1,Jn=I.IN_PLACE||!1,De=I.ALLOWED_URI_REGEXP||De,dn=I.NAMESPACE||In,I.CUSTOM_ELEMENT_HANDLING&&rg(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&rg(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ee.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fn=Ir.indexOf(I.PARSER_MEDIA_TYPE)===-1?Fn=ku:Fn=I.PARSER_MEDIA_TYPE,Co=Fn==="application/xhtml+xml"?function(ce){return ce}:Pc,Qe&&(Se=!1),Rt&&(dt=!0),ws&&(ke=Je({},Cs(rE)),le=[],ws.html===!0&&(Je(ke,oE),Je(le,iE)),ws.svg===!0&&(Je(ke,Rm),Je(le,Dm),Je(le,Dc)),ws.svgFilters===!0&&(Je(ke,Pm),Je(le,Dm),Je(le,Dc)),ws.mathMl===!0&&(Je(ke,Om),Je(le,aE),Je(le,Dc))),I.ADD_TAGS&&(ke===kt&&(ke=Nr(ke)),Je(ke,I.ADD_TAGS)),I.ADD_ATTR&&(le===we&&(le=Nr(le)),Je(le,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Je(es,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(xs===ks&&(xs=Nr(xs)),Je(xs,I.FORBID_CONTENTS)),Ss&&(ke["#text"]=!0),et&&Je(ke,["html","head","body"]),ke.table&&(Je(ke,["tbody"]),delete se.tbody),Tn&&Tn(I),Vo=I)},ig=Je({},["mi","mo","mn","ms","mtext"]),ag=Je({},["foreignobject","desc","title","annotation-xml"]),jo=Je({},["title","style","font","a","script"]),Fr=Je({},Rm);Je(Fr,Pm),Je(Fr,B$);var O=Je({},Om);Je(O,I$);var D=function(I){var ce=N(I);(!ce||!ce.tagName)&&(ce={namespaceURI:In,tagName:"template"});var xe=Pc(I.tagName),St=Pc(ce.tagName);return I.namespaceURI===as?ce.namespaceURI===In?xe==="svg":ce.namespaceURI===Br?xe==="svg"&&(St==="annotation-xml"||ig[St]):Boolean(Fr[xe]):I.namespaceURI===Br?ce.namespaceURI===In?xe==="math":ce.namespaceURI===as?xe==="math"&&ag[St]:Boolean(O[xe]):I.namespaceURI===In?ce.namespaceURI===as&&!ag[St]||ce.namespaceURI===Br&&!ig[St]?!1:!O[xe]&&(jo[xe]||!Fr[xe]):!1},G=function(I){Va(t.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=H}catch{I.remove()}}},q=function(I,ce){try{Va(t.removed,{attribute:ce.getAttributeNode(I),from:ce})}catch{Va(t.removed,{attribute:null,from:ce})}if(ce.removeAttribute(I),I==="is"&&!le[I])if(dt||Rt)try{G(ce)}catch{}else try{ce.setAttribute(I,"")}catch{}},he=function(I){var ce,xe;if(bt)I="<remove></remove>"+I;else{var St=R$(I,/^[\r\n\t ]+/);xe=St&&St[0]}Fn==="application/xhtml+xml"&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var $n=U?U.createHTML(I):I;if(dn===In)try{ce=new p().parseFromString($n,Fn)}catch{}if(!ce||!ce.documentElement){ce=W.createDocument(dn,"template",null);try{ce.documentElement.innerHTML=ls?"":$n}catch{}}var Sn=ce.body||ce.documentElement;return I&&xe&&Sn.insertBefore(s.createTextNode(xe),Sn.childNodes[0]||null),dn===In?te.call(ce,et?"html":"body")[0]:et?ce.documentElement:Sn},We=function(I){return F.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},mt=function(I){return I instanceof g&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof d)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function")},pt=function(I){return kr(i)==="object"?I instanceof i:I&&kr(I)==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},Ln=function(I,ce,xe){!Te[I]||A$(Te[I],function(St){St.call(t,ce,xe,Vo)})},ll=function(I){var ce;if(Ln("beforeSanitizeElements",I,null),mt(I)||Rn(/[\u0080-\uFFFF]/,I.nodeName))return G(I),!0;var xe=Co(I.nodeName);if(Ln("uponSanitizeElement",I,{tagName:xe,allowedTags:ke}),I.hasChildNodes()&&!pt(I.firstElementChild)&&(!pt(I.content)||!pt(I.content.firstElementChild))&&Rn(/<[/\w]/g,I.innerHTML)&&Rn(/<[/\w]/g,I.textContent)||xe==="select"&&Rn(/<template/i,I.innerHTML))return G(I),!0;if(!ke[xe]||se[xe]){if(!se[xe]&&Kx(xe)&&(Ee.tagNameCheck instanceof RegExp&&Rn(Ee.tagNameCheck,xe)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(xe)))return!1;if(Ss&&!xs[xe]){var St=N(I)||I.parentNode,$n=w(I)||I.childNodes;if($n&&St)for(var Sn=$n.length,mn=Sn-1;mn>=0;--mn)St.insertBefore(y($n[mn],!0),S(I))}return G(I),!0}return I instanceof a&&!D(I)||(xe==="noscript"||xe==="noembed")&&Rn(/<\/no(script|embed)/i,I.innerHTML)?(G(I),!0):(Qe&&I.nodeType===3&&(ce=I.textContent,ce=Ho(ce,ze," "),ce=Ho(ce,qe," "),I.textContent!==ce&&(Va(t.removed,{element:I.cloneNode()}),I.textContent=ce)),Ln("afterSanitizeElements",I,null),!1)},qx=function(I,ce,xe){if(Bt&&(ce==="id"||ce==="name")&&(xe in s||xe in Nu))return!1;if(!(Se&&!Fe[ce]&&Rn(nt,ce))){if(!(Be&&Rn(Mt,ce))){if(!le[ce]||Fe[ce]){if(!(Kx(I)&&(Ee.tagNameCheck instanceof RegExp&&Rn(Ee.tagNameCheck,I)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(I))&&(Ee.attributeNameCheck instanceof RegExp&&Rn(Ee.attributeNameCheck,ce)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck(ce))||ce==="is"&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&Rn(Ee.tagNameCheck,xe)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(xe))))return!1}else if(!es[ce]){if(!Rn(De,Ho(xe,Re,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&I!=="script"&&P$(xe,"data:")===0&&Ns[I])){if(!(Ne&&!Rn(Z,Ho(xe,Re,"")))){if(xe)return!1}}}}}}return!0},Kx=function(I){return I.indexOf("-")>0},Gx=function(I){var ce,xe,St,$n;Ln("beforeSanitizeAttributes",I,null);var Sn=I.attributes;if(!!Sn){var mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for($n=Sn.length;$n--;){ce=Sn[$n];var Tu=ce,pn=Tu.name,Yx=Tu.namespaceURI;xe=pn==="value"?ce.value:O$(ce.value),St=Co(pn);var L9=xe;if(mn.attrName=St,mn.attrValue=xe,mn.keepAttr=!0,mn.forceKeepAttr=void 0,Ln("uponSanitizeAttribute",I,mn),xe=mn.attrValue,!mn.forceKeepAttr){if(!mn.keepAttr){q(pn,I);continue}if(Rn(/\/>/i,xe)){q(pn,I);continue}Qe&&(xe=Ho(xe,ze," "),xe=Ho(xe,qe," "));var $9=Co(I.nodeName);if(!qx($9,St,xe)){q(pn,I);continue}if(xe!==L9)try{Yx?I.setAttributeNS(Yx,pn,xe):I.setAttribute(pn,xe)}catch{q(pn,I)}}}Ln("afterSanitizeAttributes",I,null)}},F9=function Pe(I){var ce,xe=We(I);for(Ln("beforeSanitizeShadowDOM",I,null);ce=xe.nextNode();)Ln("uponSanitizeShadowNode",ce,null),!ll(ce)&&(ce.content instanceof o&&Pe(ce.content),Gx(ce));Ln("afterSanitizeShadowDOM",I,null)};return t.sanitize=function(Pe,I){var ce,xe,St,$n,Sn;if(ls=!Pe,ls&&(Pe="<!-->"),typeof Pe!="string"&&!pt(Pe)){if(typeof Pe.toString!="function")throw Tm("toString is not a function");if(Pe=Pe.toString(),typeof Pe!="string")throw Tm("dirty is not a string, aborting")}if(!t.isSupported){if(kr(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Pe=="string")return e.toStaticHTML(Pe);if(pt(Pe))return e.toStaticHTML(Pe.outerHTML)}return Pe}if(Dt||Au(I),t.removed=[],typeof Pe=="string"&&(Jn=!1),Jn){if(Pe.nodeName){var mn=Co(Pe.nodeName);if(!ke[mn]||se[mn])throw Tm("root node is forbidden and cannot be sanitized in-place")}}else if(Pe instanceof i)ce=he("<!---->"),xe=ce.ownerDocument.importNode(Pe,!0),xe.nodeType===1&&xe.nodeName==="BODY"||xe.nodeName==="HTML"?ce=xe:ce.appendChild(xe);else{if(!dt&&!Qe&&!et&&Pe.indexOf("<")===-1)return U&&Qt?U.createHTML(Pe):Pe;if(ce=he(Pe),!ce)return dt?null:Qt?H:""}ce&&bt&&G(ce.firstChild);for(var Tu=We(Jn?Pe:ce);St=Tu.nextNode();)St.nodeType===3&&St===$n||ll(St)||(St.content instanceof o&&F9(St.content),Gx(St),$n=St);if($n=null,Jn)return Pe;if(dt){if(Rt)for(Sn=L.call(ce.ownerDocument);ce.firstChild;)Sn.appendChild(ce.firstChild);else Sn=ce;return le.shadowroot&&(Sn=me.call(n,Sn,!0)),Sn}var pn=et?ce.outerHTML:ce.innerHTML;return et&&ke["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&Rn(W$,ce.ownerDocument.doctype.name)&&(pn="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+pn),Qe&&(pn=Ho(pn,ze," "),pn=Ho(pn,qe," ")),U&&Qt?U.createHTML(pn):pn},t.setConfig=function(Pe){Au(Pe),Dt=!0},t.clearConfig=function(){Vo=null,Dt=!1},t.isValidAttribute=function(Pe,I,ce){Vo||Au({});var xe=Co(Pe),St=Co(I);return qx(xe,St,ce)},t.addHook=function(Pe,I){typeof I=="function"&&(Te[Pe]=Te[Pe]||[],Va(Te[Pe],I))},t.removeHook=function(Pe){if(Te[Pe])return T$(Te[Pe])},t.removeHooks=function(Pe){Te[Pe]&&(Te[Pe]=[])},t.removeAllHooks=function(){Te={}},t}var q$=lE();const cE=Q.explode,uE=()=>{const e={};return{addFilter:(o,r)=>{R(cE(o),i=>{$e(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>rf(e),removeFilter:(o,r)=>{R(cE(o),i=>{if($e(e,i))if(oe(r)){const a=e[i],c=j(a.callbacks,u=>u!==r);c.length>0?a.callbacks=c:delete e[i]}else delete e[i]})}}},K$=(e,t)=>{R(t,n=>{e.attr(n,null)})},G$=(e,t,n)=>{e.addNodeFilter("font",s=>{R(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),a=o.attr("face"),c=o.attr("size");i&&(r.color=i),a&&(r["font-family"]=a),c&&Sl(c).each(u=>{r["font-size"]=n[u-1]}),o.name="span",o.attr("style",t.serialize(r)),K$(o,["color","face","size"])})})},Y$=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";R(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},X$=(e,t,n)=>{var s;const o=Lf();t.convert_fonts_to_spans&&G$(e,o,Q.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),Y$(e,n,o)},Q$=(e,t,n)=>{t.inline_styles&&X$(e,t,n)},Z$=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),J$=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Bm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?J$(s):decodeURIComponent(s);return b.some({type:o[1],data:i,base64Encoded:r})}else return b.none()},fE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return b.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return b.some(new Blob([o],{type:e}))},eM=e=>new Promise((t,n)=>{Bm(e).bind(({type:s,data:o,base64Encoded:r})=>fE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),tM=e=>Jt(e,"blob:")?Z$(e):Jt(e,"data:")?eM(e):Promise.reject("Unknown URI format"),dE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let nM=0;const sM=e=>(e||"blobid")+nM++,mE=(e,t,n)=>Bm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return b.none();{const i=r?s:btoa(s);return n(i,o)}}),pE=(e,t,n)=>{const s=e.create(sM(),t,n);return e.add(s),s},gE=(e,t,n=!1)=>mE(t,n,(s,o)=>b.from(e.getByData(s,o)).orThunk(()=>fE(o,s).map(r=>pE(e,r,s)))),oM=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Jt(t,"blob:")){const s=e.getByUri(t);return oe(s)?Promise.resolve(s):tM(t).then(o=>dE(o).then(r=>mE(r,!1,i=>b.some(pE(e,o,i))).getOrThunk(n)))}else return Jt(t,"data:")?gE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},rM=e=>oe(e.attr("data-mce-bogus")),iM=e=>e.attr("src")===Xe.transparentSrc||oe(e.attr("data-mce-placeholder")),aM=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");iM(o)||rM(o)||Ve(r)||gE(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};e.addAttributeFilter("src",o=>R(o,s))}},lM=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(o,r,i)=>{const a=Q.extend({},n.getBlockElements()),c=n.getNonEmptyElements(),u=n.getWhitespaceElements();a.body=1;for(let d=0,g=o.length;d<g;d++){let p=o[d],E=p.parent;if(E&&a[E.name]&&p===E.lastChild){let _=p.prev;for(;_;){const y=_.name;if(y!=="span"||_.attr("data-mce-type")!=="bookmark"){y==="br"&&(p=null);break}_=_.prev}if(p&&(p.remove(),za(n,c,u,E))){const y=n.getElementRule(E.name);y&&(y.removeEmpty?E.remove():y.paddEmpty&&am(t,i,a,E))}}else{let _=p;for(;E&&E.firstChild===_&&E.lastChild===_&&(_=E,!a[E.name]);)E=E.parent;if(_===E){const y=new En("#text",3);y.value=Gt,p.replace(y)}}}}),e.addAttributeFilter("href",o=>{let r=o.length;const i=c=>c.split(" ").filter(d=>d.length>0).concat(["noopener"]).sort().join(" "),a=c=>{const u=c?Q.trim(c):"";return/\b(noopener)\b/g.test(u)?u:i(u)};if(!t.allow_unsafe_link_target)for(;r--;){const c=o[r];c.name==="a"&&c.attr("target")==="_blank"&&c.attr("rel",a(c.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let r=o.length,i,a,c,u;for(;r--;)if(u=o[r],u.name==="a"&&u.firstChild&&!u.attr("href"))for(c=u.parent,i=u.lastChild;i&&c;)a=i.prev,c.insert(i,u),i=a}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let r=o.length,i,a;for(;r--;)if(i=o[r],a=i.parent,a&&(a.name==="ul"||a.name==="ol"))if(i.prev&&i.prev.name==="li")i.prev.append(i);else{const c=new En("li",1);c.attr("style","list-style-type: none"),i.wrap(c)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",o=>{var r;let i=o.length;for(;i--;){const a=o[i],c=(r=a.attr("class"))!==null&&r!==void 0?r:"",u=Q.explode(c," ");let d="";for(let g=0;g<u.length;g++){const p=u[g];let E=!1,_=s["*"];_&&_[p]&&(E=!0),_=s[a.name],!E&&_&&_[p]&&(E=!0),E&&(d&&(d+=" "),d+=p)}d.length||(d=null),a.attr("class",d)}}),aM(e,t)},hE=Q.each,cM=Q.trim,uM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],fM={ftp:21,http:80,https:443,mailto:25},dM=["img","video"],mM=(e,t)=>oe(e)?!e:oe(t)?!z(dM,t):!0,pM=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},bE=(e,t,n)=>{const s=pM(t);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?mM(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class ys{constructor(t,n={}){this.path="",this.directory="",t=cM(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=s?s.path:new ys(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&hE(uM,(a,c)=>{let u=i[c];u&&(u=u.replace(/\(mce_at\)/g,"@@")),o[a]=u}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=Ro.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!bE(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new ys(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new ys(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?fM[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length){for(r=0,i=a.length;r<i;r++)if(r>=c.length||a[r]!==c[r]){s=r+1;break}}if(a.length<c.length){for(r=0,i=c.length;r<i;r++)if(r>=a.length||a[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=a.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=c.length;r<i;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),i=n.split("/"),a=[];hE(r,g=>{g&&a.push(g)});const c=[];for(let g=i.length-1;g>=0;g--)if(!(i[g].length===0||i[g]===".")){if(i[g]===".."){s++;continue}if(s>0){s--;continue}c.push(i[g])}const u=a.length-s;let d;return u<=0?d=Nt(c).join("/"):d=a.slice(0,u).join("/")+"/"+Nt(c).join("/"),d.indexOf("/")!==0&&(d="/"+d),o&&d.lastIndexOf("/")!==d.length-1&&(d+=o),d}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const CE=Q.makeMap,vE=Q.extend,gM={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},hM=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Im="data-mce-type",bM=(e,t)=>{const n={...gM};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},CM=(e,t)=>{const n=q$(),s=t.getSpecialElements(),o=e.validate;let r=0;return n.addHook("uponSanitizeElement",(i,a)=>{var c,u,d;i.nodeType===Rh&&!e.allow_conditional_comments&&/^\[if/i.test((c=i.nodeValue)!==null&&c!==void 0?c:"")&&(i.nodeValue=" "+i.nodeValue);const g=a.tagName;if(i.nodeType!==Ji||g==="body")return;const p=x.fromDom(i),E=g.toLowerCase(),_=xl(p,Im),y=os(p,"data-mce-bogus");if(!_&&ne(y)){y==="all"?_t(p):No(p);return}const S=t.getElementRule(E);if(o&&!S){$e(s,E)?_t(p):No(p);return}else a.allowedTags[g]=!0;if(o&&S&&!_){if(R((u=S.attributesForced)!==null&&u!==void 0?u:[],w=>{Kt(p,w.name,w.value==="{$uid}"?`mce_${r++}`:w.value)}),R((d=S.attributesDefault)!==null&&d!==void 0?d:[],w=>{xl(p,w.name)||Kt(p,w.name,w.value==="{$uid}"?`mce_${r++}`:w.value)}),S.attributesRequired&&!Y(S.attributesRequired,w=>xl(p,w))){No(p);return}if(S.removeEmptyAttrs&&lA(p)){No(p);return}S.outputName&&S.outputName!==E&&RR(p,S.outputName)}}),n.addHook("uponSanitizeAttribute",(i,a)=>{const c=i.tagName.toLowerCase(),{attrName:u,attrValue:d}=a;a.keepAttr=!o||t.isValid(c,u)||Jt(u,"data-")||Jt(u,"aria-"),u in hM&&bE(e,d,c)&&(a.keepAttr=!1),a.keepAttr?(a.allowedAttributes[u]=!0,u in t.getBoolAttrs()&&(a.attrValue=u),e.allow_svg_data_urls&&Jt(d,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):i.hasAttribute(Im)&&(u==="id"||u==="class"||u==="style")&&(a.forceKeepAttr=!0)}),n},yE=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let i=0,a=r.length;i<a;i++){const c=r[i],u=new En(c.nodeName.toLowerCase(),c.nodeType);if(fe(c)){const d=c.attributes;for(let g=0,p=d.length;g<p;g++){const E=d[g];u.attr(E.name,E.value)}}else X(c)?(u.value=c.data,o&&(u.raw=!0)):(Ao(c)||qA(c)||KA(c))&&(u.value=c.data);yE(u,c,n),e.append(u)}},vM=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const i=o;R(t,a=>a(i)),Ve(i.parent)&&i!==e?o=r:s.push(i)}for(let o=s.length-1;o>=0;o--){const r=s[o];R(n,i=>i(r))}},yM=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=vE(CE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=Fb(t),u=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,g=/[ \t\r\n]+$/,p=w=>{let N=w.parent;for(;oe(N);){if(N.name in i)return!0;N=N.parent}return!1},E=w=>{let N=w;for(;oe(N);){if(N.name in c)return za(t,r,i,N);N=N.parent}return!1},_=(w,N)=>{const A=N?w.prev:w.next;return oe(A)||Ve(w.parent)?!1:w.parent.name in a&&(w.parent!==e||s.isRootContent===!0)};return[w=>{var N;if(w.type===3&&!p(w)){let A=(N=w.value)!==null&&N!==void 0?N:"";A=A.replace(u," "),(HF(w.prev,a)||_(w,!0))&&(A=A.replace(d,"")),A.length===0?w.remove():w.value=A}},w=>{var N;if(w.type===1){const A=t.getElementRule(w.name);if(o&&A){const U=za(t,r,i,w);A.paddInEmptyBlock&&U&&E(w)?am(n,s,a,w):A.removeEmpty&&U?a[w.name]?w.remove():w.unwrap():A.paddEmpty&&(U||UF(w))&&am(n,s,a,w)}}else if(w.type===3&&!p(w)){let A=(N=w.value)!==null&&N!==void 0?N:"";(w.next&&a[w.next.name]||_(w,!1))&&(A=A.replace(g,"")),A.length===0?w.remove():w.value=A}}]},EM=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},_i=(e={},t=Po())=>{const n=uE(),s=uE(),o={validate:!0,root_name:"body",...e},r=new DOMParser,i=CM(o,t),a=(N,A,U="html")=>{const H=U==="xhtml"?"application/xhtml+xml":"text/html",ee=$e(t.getSpecialElements(),A.toLowerCase()),W=ee?`<${A}>${N}</${A}>`:N,F=U==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${W}</body></html>`:`<body>${W}</body>`,L=r.parseFromString(F,H).body;return i.sanitize(L,bM(o,H)),i.removed=[],ee?L.firstChild:L},c=n.addFilter,u=n.getFilters,d=n.removeFilter,g=s.addFilter,p=s.getFilters,E=s.removeFilter,_=(N,A)=>{const U=N.parent;U&&t.children[N.name]&&!t.isValidChild(U.name,N.name)&&A.push(N)},y=(N,A)=>{const U=vE(CE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),H=/^[ \t\r\n]+/,ee=/[ \t\r\n]+$/;let W=N.firstChild,F=null;const L=te=>{var me,be;te&&(W=te.firstChild,W&&W.type===3&&(W.value=(me=W.value)===null||me===void 0?void 0:me.replace(H,"")),W=te.lastChild,W&&W.type===3&&(W.value=(be=W.value)===null||be===void 0?void 0:be.replace(ee,"")))};if(!!t.isValidChild(N.name,A.toLowerCase())){for(;W;){const te=W.next;W.type===3||W.type===1&&W.name!=="p"&&!U[W.name]&&!W.attr(Im)?(F||(F=new En(A,1),F.attr(o.forced_root_block_attrs),N.insert(F,W)),F.append(W)):(L(F),F=null),W=te}L(F)}},w={schema:t,addAttributeFilter:g,getAttributeFilters:p,removeAttributeFilter:E,addNodeFilter:c,getNodeFilters:u,removeNodeFilter:d,parse:(N,A={})=>{var U;const H=o.validate,ee=(U=A.context)!==null&&U!==void 0?U:o.root_name,W=a(N,ee,A.format),F=new En(ee,11);yE(F,W,t.getSpecialElements());const[L,te]=yM(F,t,o,A),me=[],be=H?nt=>_(nt,me):Me,Te={nodes:{},attributes:{}},ze=nt=>g0(u(),p(),nt,Te);if(vM(F,[L,ze],[te,be]),me.reverse(),H&&me.length>0)if(A.context){const{pass:nt,fail:Mt}=ue(me,Z=>Z.parent===F);cm(Mt,t,ze),A.invalid=nt.length>0}else cm(me,t,ze);const qe=EM(o,A);return qe&&(F.name==="body"||A.isRootContent)&&y(F,qe),A.invalid||h0(Te,A),F}};return lM(w,o),Q$(w,o,t),w},_M=e=>xc(e)?Lo({validate:!1}).serialize(e):e,EE=(e,t)=>{const n=_M(e),s=t(n);if(s.isDefaultPrevented())return s;if(xc(e))if(s.content!==n){const o=_i({validate:!1,forced_root_block:!1}).parse(s.content,{context:e.name});return{...s,content:o}}else return{...s,content:e};else return s},_E=(e,t)=>{if(t.no_events)return vn.value(t);{const n=aD(e,t);return n.isDefaultPrevented()?vn.error(Hv(e,{content:"",...n}).content):vn.value(n)}},SE=(e,t,n)=>n.no_events?t:EE(t,o=>Hv(e,{...n,content:o})).content,Fm=(e,t)=>{if(t.no_events)return vn.value(t);{const n=EE(t.content,s=>iD(e,{...t,content:s}));return n.isDefaultPrevented()?(zv(e,n),vn.error(void 0)):vn.value(n)}},Lm=(e,t,n)=>{n.no_events||zv(e,{...n,content:t})},$m=(e,t,n)=>({element:e,width:t,rows:n}),wE=(e,t)=>({element:e,cells:t}),SM=(e,t)=>({x:e,y:t}),xE=(e,t)=>ao(e,t).bind(Sl).getOr(1),wM=(e,t,n,s,o)=>{const r=xE(o,"rowspan"),i=xE(o,"colspan"),a=e.rows;for(let c=n;c<n+r;c++){a[c]||(a[c]=wE(Qb(s),[]));for(let u=t;u<t+i;u++){const d=a[c].cells;d[u]=c===n&&u===t?o:ii(o)}}},xM=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},kM=(e,t,n)=>{for(;xM(e,t,n);)t++;return t},kE=e=>_e(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),NE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(rt(o[r],t))return b.some(SM(r,s))}return b.none()},AE=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let a=n;a<=o;a++){const c=i[a].cells,u=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(wE(i[a].element,u))}return r},NM=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,a=o<i?AE(e,s,o,r,i):AE(e,s,i,r,o);return $m(e.element,kE(a),a)},AM=(e,t)=>{const n=ii(e.element),s=x.fromTag("tbody");return or(s,t),Wt(n,s),n},TM=e=>V(e.rows,t=>{const n=V(t.cells,o=>{const r=Qb(o);return on(r,"colspan"),on(r,"rowspan"),r}),s=ii(t.element);return or(s,n),s}),RM=e=>{const t=$m(ii(e),0,[]);return R(Cn(e,"tr"),(n,s)=>{R(Cn(n,"td,th"),(o,r)=>{wM(t,kM(t,r,s),s,n,o)})}),$m(t.element,kE(t.rows),t.rows)},PM=e=>AM(e,TM(e)),OM=(e,t,n)=>NE(e,t).bind(s=>NE(e,n).map(o=>NM(e,s,o))),DM=e=>ve(e,t=>xt(t)==="ul"||xt(t)==="ol"),BM=(e,t)=>ve(e,n=>xt(n)==="li"&&gd(n,t)).fold(K([]),n=>DM(e).map(s=>{const o=x.fromTag(xt(s)),r=Gi(Jh(s),(i,a)=>Jt(a,"list-style"));return Al(o,r),[x.fromTag("li"),o]}).getOr([])),IM=(e,t)=>{const n=_e(t,(s,o)=>(Wt(o,s),o),e);return t.length>0?Ad([n]):n},FM=e=>ua(e)?Hn(e).filter(xf).fold(K([]),t=>[e,t]):xf(e)?[e]:[],LM=(e,t)=>{const n=x.fromDom(t.commonAncestorContainer),s=go(n,e),o=j(s,pT),r=BM(s,t),i=o.concat(r.length?r:FM(n));return V(i,ii)},TE=()=>Ad([]),$M=(e,t)=>IM(x.fromDom(t.cloneContents()),LM(e,t)),MM=(e,t)=>la(t,"table",ae(rt,e)),UM=(e,t)=>MM(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=RM(n);return OM(r,s,o).map(i=>Ad([PM(i)]))}).getOrThunk(TE),zM=(e,t)=>t.length>0&&t[0].collapsed?TE():$M(e,t[0]),HM=(e,t)=>{const n=Cv(t,e);return n.length>0?UM(e,n):zM(e,t)},Bc=(e,t)=>t>=0&&t<e.length&&di(e.charAt(t)),RE=e=>fo(e.innerText),WM=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),VM=e=>b.from(e.selection.getRng()).map(t=>{var n;const s=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=WM(s),i=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),a=RE(i),c=fo((n=i.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(i),Bc(c,0)||Bc(c,c.length-1)){const u=s.getOr(o),d=RE(u),g=d.indexOf(a);if(g===-1)return a;{const p=Bc(d,g-1),E=Bc(d,g+a.length);return(p?" ":"")+a+(E?" ":"")}}else return a}).getOr(""),jM=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Md(e,md(o)),i=t.contextual?HM(x.fromDom(e.getBody()),r).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},qM=(e,t)=>{if(t.format==="text")return VM(e);{const n=jM(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},KM=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),GM=(e,t,n={})=>{const s=KM(n,t);return _E(e,s).fold(Pt,o=>{const r=qM(e,o);return SE(e,r,o)})},Mm=0,PE=1,OE=2,YM=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(d,g,p)=>({start:d,end:g,diag:p}),i=(d,g,p,E,_)=>{const y=c(d,g,p,E);if(y===null||y.start===g&&y.diag===g-E||y.end===d&&y.diag===d-p){let S=d,w=p;for(;S<g||w<E;)S<g&&w<E&&e[S]===t[w]?(_.push([Mm,e[S]]),++S,++w):g-d>E-p?(_.push([OE,e[S]]),++S):(_.push([PE,t[w]]),++w)}else{i(d,y.start,p,y.start-y.diag,_);for(let S=y.start;S<y.end;++S)_.push([Mm,e[S]]);i(y.end,g,y.end-y.diag,E,_)}},a=(d,g,p,E)=>{let _=d;for(;_-g<E&&_<p&&e[_]===t[_-g];)++_;return r(d,_,g)},c=(d,g,p,E)=>{const _=g-d,y=E-p;if(_===0||y===0)return null;const S=_-y,w=y+_,N=(w%2===0?w:w+1)/2;s[1+N]=d,o[1+N]=g+1;let A,U,H,ee,W;for(A=0;A<=N;++A){for(U=-A;U<=A;U+=2){for(H=U+N,U===-A||U!==A&&s[H-1]<s[H+1]?s[H]=s[H+1]:s[H]=s[H-1]+1,ee=s[H],W=ee-d+p-U;ee<g&&W<E&&e[ee]===t[W];)s[H]=++ee,++W;if(S%2!==0&&S-A<=U&&U<=S+A&&o[H-S]<=s[H])return a(o[H-S],U+d-p,g,E)}for(U=S-A;U<=S+A;U+=2){for(H=U+N-S,U===S-A||U!==S+A&&o[H+1]<=o[H-1]?o[H]=o[H+1]-1:o[H]=o[H-1],ee=o[H]-1,W=ee-d+p-U;ee>=d&&W>=p&&e[ee]===t[W];)o[H]=ee--,W--;if(S%2===0&&-A<=U&&U<=A&&o[H]<=s[H+S])return a(o[H],U+d-p,g,E)}}return null},u=[];return i(0,e.length,0,t.length,u),u},DE=e=>fe(e)?e.outerHTML:X(e)?Ro.encodeRaw(e.data,!1):Ao(e)?"<!--"+e.data+"-->":"",XM=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},QM=(e,t,n)=>{const s=XM(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},ZM=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},JM=(e,t)=>{let n=0;R(e,s=>{s[0]===Mm?n++:s[0]===PE?(QM(t,s[1],n),n++):s[0]===OE&&ZM(t,n)})},eU=e=>j(V(wt(e.childNodes),DE),t=>t.length>0),tU=(e,t)=>{const n=V(wt(t.childNodes),DE);return JM(YM(n,e),t),t},nU=er(()=>document.implementation.createHTMLDocument("undo")),sU=e=>e.indexOf("</iframe>")!==-1,oU=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),rU=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ic=e=>{const t=eU(e.getBody()),n=st(t,o=>{const r=xy(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return sU(s)?oU(n):rU(s)},Um=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?tU(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:oe(s)&&fv(s)?!s.isFakeCaret:!0}),s&&e.selection.moveToBookmark(s)},zm=e=>e.type==="fragmented"?e.fragments.join(""):e.content,BE=e=>{const t=x.fromTag("body",nU());return Rl(t,zm(e)),R(Cn(t,"*[data-mce-bogus]"),No),nb(t)},iU=(e,t)=>zm(e)===zm(t),aU=(e,t)=>BE(e)===BE(t),Hm=(e,t)=>!e||!t?!1:iU(e,t)?!0:aU(e,t),Wm=e=>e.get()===0,Fc=(e,t,n)=>{Wm(n)&&(e.typing=t)},IE=(e,t)=>{e.typing&&(Fc(e,!1,t),e.add())},lU=e=>{e.typing&&(e.typing=!1,e.add())},cU=(e,t,n)=>{Wm(t)&&n.set(Qf(e.selection))},uU=(e,t,n,s,o,r,i)=>{const a=Ic(e),c=Q.extend(r||{},a);if(!Wm(s)||e.removed)return null;const u=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:u,originalEvent:i}).isDefaultPrevented()||u&&Hm(u,c))return null;t.data[n.get()]&&o.get().each(p=>{t.data[n.get()].beforeBookmark=p});const d=Z1(e);if(d&&t.data.length>d){for(let p=0;p<t.data.length-1;p++)t.data[p]=t.data[p+1];t.data.length--,n.set(t.data.length)}c.bookmark=Qf(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const g={level:c,lastLevel:u,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",g),e.dispatch("change",g)):e.dispatch("AddUndo",g),c},fU=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},dU=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Um(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},mU=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Um(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},pU=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Fc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Um(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},gU=e=>{e.clear(),e.add()},hU=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Hm(Ic(e),t.data[0]),bU=(e,t)=>t.get()<e.data.length-1&&!e.typing,CU=(e,t,n)=>(IE(e,t),e.beforeChange(),e.ignore(n),e.add()),vU=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},yU=(e,t)=>{const n=e.dom,s=oe(t)?t:e.getBody();R(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=oP(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const a=n.getAttrib(o,"name")||o.id,c=UC(e);a&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},FE=e=>({init:{bindEvents:Me},undoManager:{beforeChange:(t,n)=>cU(e,t,n),add:(t,n,s,o,r,i)=>uU(e,t,n,s,o,r,i),undo:(t,n,s)=>pU(e,t,n,s),redo:(t,n)=>mU(e,t,n),clear:(t,n)=>fU(e,t,n),reset:t=>gU(t),hasUndo:(t,n)=>hU(e,t,n),hasRedo:(t,n)=>bU(t,n),transact:(t,n,s)=>CU(t,n,s),ignore:(t,n)=>vU(t,n),extra:(t,n,s,o)=>dU(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>bm(e,t,n,s,o),matchAll:(t,n)=>TL(e,t,n),matchNode:(t,n,s,o)=>Ys(e,t,n,s,o),canApply:t=>PL(e,t),closest:t=>RL(e,t),apply:(t,n,s)=>X0(e,t,n,s),remove:(t,n,s,o)=>K0(e,t,n,s,o),toggle:(t,n,s)=>b$(e,t,n,s),formatChanged:(t,n,s,o,r)=>h$(e,t,n,s,o,r)},editor:{getContent:t=>aI(e,t),setContent:(t,n)=>kL(e,t,n),insertContent:(t,n)=>_L(e,t,n),addVisual:t=>yU(e,t)},selection:{getContent:(t,n)=>GM(e,t,n)},autocompleter:{addDecoration:t=>YB(e,t),removeDecoration:()=>QB(e,x.fromDom(e.getBody()))},raw:{getModel:()=>b.none()}}),EU=e=>{const t=u=>Ge(u)?u:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:a,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(u,d,g)=>s.transact(g),ignore:(u,d)=>s.ignore(d),extra:(u,d,g,p)=>s.extra(g,p)},formatter:{match:(u,d,g,p)=>o.match(u,t(d),p),matchAll:o.matchAll,matchNode:o.matchNode,canApply:u=>o.canApply(u),closest:u=>o.closest(u),apply:(u,d,g)=>o.apply(u,t(d)),remove:(u,d,g,p)=>o.remove(u,t(d)),toggle:(u,d,g)=>o.toggle(u,t(d)),formatChanged:(u,d,g,p,E)=>o.formatChanged(d,g,p,E)},editor:{getContent:u=>r.getContent(u),setContent:(u,d)=>({content:r.setContent(u,d),html:""}),insertContent:(u,d)=>(r.insertContent(u),""),addVisual:r.addVisual},selection:{getContent:(u,d)=>i.getContent(d)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>b.some(c.getRawModel())}}},_U=()=>{const e=K(null),t=K("");return{init:{bindEvents:Me},undoManager:{beforeChange:Me,add:e,undo:e,redo:e,clear:Me,reset:Me,hasUndo:tt,hasRedo:tt,transact:e,ignore:Me,extra:Me},formatter:{match:tt,matchAll:K([]),matchNode:K(void 0),canApply:tt,closest:t,apply:Me,remove:Me,toggle:Me,formatChanged:K({unbind:Me})},editor:{getContent:t,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Me},selection:{getContent:t},autocompleter:{addDecoration:Me,removeDecoration:Me},raw:{getModel:K(b.none())}}},Qs=e=>$e(e.plugins,"rtc"),SU=e=>ht(e.plugins,"rtc").bind(t=>b.from(t.setup)),wU=e=>{const t=e;return SU(e).fold(()=>(t.rtcInstance=FE(e),b.none()),n=>(t.rtcInstance=_U(),b.some(()=>n().then(s=>(t.rtcInstance=EU(s),s.rtc.isRemote)))))},Vm=e=>e.rtcInstance?e.rtcInstance:FE(e),Tt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},xU=(e,t,n)=>{Tt(e).undoManager.beforeChange(t,n)},kU=(e,t,n,s,o,r,i)=>Tt(e).undoManager.add(t,n,s,o,r,i),NU=(e,t,n,s)=>Tt(e).undoManager.undo(t,n,s),AU=(e,t,n)=>Tt(e).undoManager.redo(t,n),TU=(e,t,n)=>{Tt(e).undoManager.clear(t,n)},RU=(e,t)=>{Tt(e).undoManager.reset(t)},PU=(e,t,n)=>Tt(e).undoManager.hasUndo(t,n),OU=(e,t,n)=>Tt(e).undoManager.hasRedo(t,n),DU=(e,t,n,s)=>Tt(e).undoManager.transact(t,n,s),BU=(e,t,n)=>{Tt(e).undoManager.ignore(t,n)},IU=(e,t,n,s,o)=>{Tt(e).undoManager.extra(t,n,s,o)},FU=(e,t,n,s,o)=>Tt(e).formatter.match(t,n,s,o),LU=(e,t,n)=>Tt(e).formatter.matchAll(t,n),$U=(e,t,n,s,o)=>Tt(e).formatter.matchNode(t,n,s,o),MU=(e,t)=>Tt(e).formatter.canApply(t),UU=(e,t)=>Tt(e).formatter.closest(t),zU=(e,t,n,s)=>{Tt(e).formatter.apply(t,n,s)},HU=(e,t,n,s,o)=>{Tt(e).formatter.remove(t,n,s,o)},WU=(e,t,n,s)=>{Tt(e).formatter.toggle(t,n,s)},VU=(e,t,n,s,o,r)=>Tt(e).formatter.formatChanged(t,n,s,o,r),jU=(e,t)=>Vm(e).editor.getContent(t),qU=(e,t,n)=>Vm(e).editor.setContent(t,n),KU=(e,t,n)=>Vm(e).editor.insertContent(t,n),GU=(e,t,n)=>Tt(e).selection.getContent(t,n),YU=(e,t)=>Tt(e).editor.addVisual(t),LE=e=>Tt(e).init.bindEvents(),XU=(e,t)=>Tt(e).autocompleter.addDecoration(t),QU=e=>Tt(e).autocompleter.removeDecoration(),ZU=(e,t={})=>{const n=t.format?t.format:"html";return GU(e,n,t)},$E=e=>e.dom.length===0?(_t(e),b.none()):b.some(e),JU=(e,t)=>e.filter(n=>Da.isBookmarkNode(n.dom)).bind(t?ra:sr),ez=(e,t,n,s)=>{const o=e.dom,r=t.dom,i=s?o.length:r.length;s?(Xd(o,r,!1,!s),n.setStart(r,i)):(Xd(r,o,!1,!s),n.setEnd(r,i))},tz=(e,t)=>{Hn(e).each(n=>{const s=e.dom;t&&$a(n,M(s,0))?Ec(s,0):!t&&Ma(n,M(s,s.length))&&Yd(s,s.length)})},ME=(e,t,n,s)=>{e.bind(o=>((s?Yd:Ec)(o.dom,s?o.dom.length:0),t.filter(zn).map(i=>ez(o,i,n,s)))).orThunk(()=>JU(t,s).or(t).filter(zn).map(r=>tz(r,s)))},nz=(e,t)=>{const n=b.from(t.firstChild).map(x.fromDom),s=b.from(t.lastChild).map(x.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(sr).filter(zn).bind($E),r=s.bind(ra).filter(zn).bind($E);ME(o,n,e,!0),ME(r,s,e,!1),e.collapse(!1)},sz=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),oz=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Lo({validate:!1},e.schema).serialize(r)}else return t.content},rz=(e,t,n={})=>{const s=sz(n,t);Fm(e,s).each(o=>{const r=oz(e,o),i=e.selection.getRng();nz(i,i.createContextualFragment(r)),e.selection.setRng(i),Ia(e,i),Lm(e,r,o)})},UE=(e,t,n)=>{if($e(e,t)){const s=j(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var iz=(e,t)=>{let n,s;const o=(a,c)=>ve(c,u=>e.is(u,a)),r=a=>e.getParents(a,void 0,e.getRoot()),i=()=>{n={},s={},t.on("NodeChange",a=>{const c=a.element,u=r(c),d={};ft(n,(g,p)=>{o(p,u).each(E=>{s[p]||(R(g,_=>{_(!0,{node:E,selector:p,parents:u})}),s[p]=g),d[p]=g})}),ft(s,(g,p)=>{d[p]||(delete s[p],R(g,E=>{E(!1,{node:c,selector:p,parents:u})}))})})};return{selectorChangedWithUnbind:(a,c)=>(n||i(),n[a]||(n[a]=[]),n[a].push(c),o(a,r(t.selection.getStart())).each(()=>{s[a]=n[a]}),{unbind:()=>{UE(n,a,c),UE(s,a,c)}})}};const zE=e=>!!(e&&e.ownerDocument)&&lo(x.fromDom(e.ownerDocument),x.fromDom(e)),az=e=>e?zE(e.startContainer)&&zE(e.endContainer):!1,HE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=iz(e,s),a=(Z,Re)=>{const De=e.createRng();oe(Z)&&oe(Re)?(De.setStart(Z,Re),De.setEnd(Z,Re),A(De),S(!1)):(hd(e,De,s.getBody(),!0),A(De))},c=Z=>ZU(s,Z),u=(Z,Re)=>rz(s,Z,Re),d=Z=>by(s.getBody(),N(),Z),g=Z=>Cy(s.getBody(),N(),Z),p=(Z,Re)=>nt.getBookmark(Z,Re),E=Z=>nt.moveToBookmark(Z),_=(Z,Re)=>(HB(e,Z,Re).each(A),Z),y=()=>{const Z=N(),Re=w();return!Z||Z.item?!1:Z.compareEndPoints?Z.compareEndPoints("StartToEnd",Z)===0:!Re||Z.collapsed},S=Z=>{const Re=N();Re.collapse(!!Z),A(Re)},w=()=>t.getSelection?t.getSelection():t.document.selection,N=()=>{let Z;const Re=(ke,kt,le)=>{try{return kt.compareBoundaryPoints(ke,le)}catch{return-1}},De=t.document;if(oe(s.bookmark)&&!_r(s)){const ke=Id(s);if(ke.isSome())return ke.map(kt=>Md(s,[kt])[0]).getOr(De.createRange())}try{const ke=w();ke&&!Ol(ke.anchorNode)&&(ke.rangeCount>0?Z=ke.getRangeAt(0):Z=De.createRange(),Z=Md(s,[Z])[0])}catch{}if(Z||(Z=De.createRange()),aa(Z.startContainer)&&Z.collapsed){const ke=e.getRoot();Z.setStart(ke,0),Z.setEnd(ke,0)}return o&&r&&(Re(Z.START_TO_START,Z,o)===0&&Re(Z.END_TO_END,Z,o)===0?Z=r:(o=null,r=null)),Z},A=(Z,Re)=>{if(!az(Z))return;const De=w();if(Z=s.dispatch("SetSelectionRange",{range:Z,forward:Re}).range,De){r=Z;try{De.removeAllRanges(),De.addRange(Z)}catch{}Re===!1&&De.extend&&(De.collapse(Z.endContainer,Z.endOffset),De.extend(Z.startContainer,Z.startOffset)),o=De.rangeCount>0?De.getRangeAt(0):null}if(!Z.collapsed&&Z.startContainer===Z.endContainer&&(De==null?void 0:De.setBaseAndExtent)&&Z.endOffset-Z.startOffset<2&&Z.startContainer.hasChildNodes()){const kt=Z.startContainer.childNodes[Z.startOffset];kt&&kt.nodeName==="IMG"&&(De.setBaseAndExtent(Z.startContainer,Z.startOffset,Z.endContainer,Z.endOffset),(De.anchorNode!==Z.startContainer||De.focusNode!==Z.endContainer)&&De.setBaseAndExtent(kt,0,kt,1))}s.dispatch("AfterSetSelectionRange",{range:Z,forward:Re})},U=Z=>(u(e.getOuterHTML(Z)),Z),H=()=>UB(s.getBody(),N()),ee=(Z,Re)=>zB(e,N(),Z,Re),W=()=>{const Z=w(),Re=Z==null?void 0:Z.anchorNode,De=Z==null?void 0:Z.focusNode;if(!Z||!Re||!De||Ol(Re)||Ol(De))return!0;const ke=e.createRng(),kt=e.createRng();try{ke.setStart(Re,Z.anchorOffset),ke.collapse(!0),kt.setStart(De,Z.focusOffset),kt.collapse(!0)}catch{return!0}return ke.compareBoundaryPoints(ke.START_TO_START,kt)<=0},qe={dom:e,win:t,serializer:n,editor:s,collapse:S,setCursorLocation:a,getContent:c,setContent:u,getBookmark:p,moveToBookmark:E,select:_,isCollapsed:y,isForward:W,setNode:U,getNode:H,getSel:w,setRng:A,getRng:N,getStart:d,getEnd:g,getSelectedBlocks:ee,normalize:()=>{const Z=N(),Re=w();if(!wO(Re)&&lc(s)){const De=gc(e,Z);return De.each(ke=>{A(ke,W())}),De.getOr(Z)}return Z},selectorChanged:(Z,Re)=>(i(Z,Re),qe),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Z,Re=e.getRoot();for(;Re&&Re.nodeName!=="BODY";){if(Re.scrollHeight>Re.clientHeight){Z=Re;break}Re=Re.parentNode}return Z},scrollIntoView:(Z,Re)=>{oe(Z)?aB(s,Z,Re):Ia(s,N(),Re)},placeCaretAt:(Z,Re)=>A(Xv(Z,Re,s.getDoc())),getBoundingClientRect:()=>{const Z=N();return Z.collapsed?M.fromRangeStart(Z).getClientRects()[0]:Z.getBoundingClientRect()},destroy:()=>{t=o=r=null,Mt.destroy()}},nt=Da(qe),Mt=jv(qe,s);return qe.bookmarkManager=nt,qe.controlSelection=Mt,qe},lz=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,a=t.url_converter_scope;let c=s.length;for(;c--;){const u=s[c];let d=u.attr(r);d!==void 0?(u.attr(o,d.length>0?d:null),u.attr(r,null)):(d=u.attr(o),o==="style"?d=n.serializeStyle(n.parseStyle(d),u.name):i&&(d=i.call(a,d,o,u.name)),u.attr(o,d.length>0?d:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const a=s[i];a.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(a.firstChild).exists(u=>{var d;return!Ll((d=u.value)!==null&&d!==void 0?d:"")})?a.unwrap():a.remove())}}),e.addNodeFilter("noscript",s=>{var o;let r=s.length;for(;r--;){const i=s[r].firstChild;i&&(i.value=Ro.decode((o=i.value)!==null&&o!==void 0?o:""))}}),e.addNodeFilter("script,style",(s,o)=>{var r;const i=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let a=s.length;for(;a--;){const c=s[a],u=c.firstChild,d=(r=u==null?void 0:u.value)!==null&&r!==void 0?r:"";if(o==="script"){const g=c.attr("type");g&&c.attr("type",g==="mce-no/type"?null:g.replace(/^mce\-/,"")),t.element_format==="xhtml"&&u&&d.length>0&&(u.value=`// <![CDATA[
`+i(d)+`
// ]]>`)}else t.element_format==="xhtml"&&u&&d.length>0&&(u.value=`<!--
`+i(d)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],i=r.value;t.preserve_cdata&&(i==null?void 0:i.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):(i==null?void 0:i.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{R(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},cz=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},uz=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const a=i.createHTMLDocument("");Q.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{a.body.appendChild(a.importNode(c,!0))}),r.nodeName!=="BODY"?r=a.body.firstChild:r=a.body,s=o.doc,o.doc=a}return YO(e,{...n,node:r}),s&&(o.doc=s),r},fz=(e,t)=>oe(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,dz=(e,t,n)=>fz(e,n)?uz(e,t,n):t,mz=(e,t,n)=>{Q.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},pz=(e,t,n)=>!t.no_events&&e?XO(e,{...t,content:n}).content:n,gz=(e,t,n)=>{const s=fo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Fl(x.fromDom(t))?s:Q.trim(s)},hz=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return cz(o),o},bz=(e,t,n)=>Lo(e,t).serialize(n),Cz=(e,t,n,s,o)=>{const r=bz(t,n,s);return pz(e,o,r)},vz=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:ct.DOM,o=t&&t.schema?t.schema:Po(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=_i(e,o);lz(r,e,s);const i=(a,c={})=>{const u={format:"html",...c},d=dz(t,a,u),g=gz(s,d,u),p=hz(r,g,u);return u.format==="tree"?p:Cz(t,e,o,p,u)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:i,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:ae(mz,r,n),getTempAttrs:K(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},WE=(e,t)=>{const n=vz(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},yz="html",Ez=(e,t)=>({...e,format:t,get:!0,getInner:!0}),_z=(e,t={})=>{const n=t.format?t.format:yz,s=Ez(t,n);return _E(e,s).fold(Pt,o=>{const r=jU(e,o);return SE(e,r,o)})},Sz="html",wz=(e,t)=>({format:Sz,...e,set:!0,content:t}),jm=(e,t,n={})=>{const s=wz(n,t);return Fm(e,s).map(o=>{const r=qU(e,o.content,o);return Lm(e,r.html,o),r.content}).getOr(t)},xz="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),kz="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Nz=e=>{const t=j(xz,s=>$e(e,s)),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),So(t)},Az=e=>{const t=Q.makeMap(e.plugins," "),s=j(kz,o=>$e(t,o));return So(s)},Tz=(e,t)=>{const n=Nz(e),s=Az(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const a=`
- `,c=i?`

Themes:${a}mobile`:"",u=o?`

Plugins:${a}${s.join(a)}`:"",d=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+c+u+d)}},Rz=(e,t)=>{Tz(e,t)},Lc=ct.DOM,Pz=e=>{Lc.setStyle(e.id,"display",e.orgDisplay)},$c=e=>b.from(e).each(t=>t.destroy()),Oz=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},Dz=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Lc.unbind(t,"submit reset",e.formEventDelegate))},Bz=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&oe(o==null?void 0:o.nextSibling)&&Lc.remove(o.nextSibling),QO(e),e.editorManager.remove(e),!e.inline&&s&&Pz(e),ZO(e),Lc.remove(e.getContainer()),$c(t),$c(n),e.destroy()}},Iz=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),$c(n),$c(s)),Dz(e),Oz(e),e.destroyed=!0}},Mc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>$e(e,o)}})(),Si=un.ModelManager,VE=(e,t)=>t.dom[e],jE=(e,t)=>parseInt(Us(t,e),10),Fz=ae(VE,"clientWidth"),Lz=ae(VE,"clientHeight"),$z=ae(jE,"margin-top"),Mz=ae(jE,"margin-left"),Uz=e=>e.dom.getBoundingClientRect(),zz=(e,t,n)=>{const s=Fz(e),o=Lz(e);return t>=0&&n>=0&&t<=s&&n<=o},Hz=(e,t,n,s)=>{const o=Uz(t),r=e?o.left+t.dom.clientLeft+Mz(t):0,i=e?o.top+t.dom.clientTop+$z(t):0,a=n-r,c=s-i;return{x:a,y:c}},Wz=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.inline?s:CA(s),r=Hz(e.inline,o,t,n);return zz(o,r.x,r.y)},Vz=e=>b.from(e).map(x.fromDom),jz=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return Vz(t).map(Yr).getOr(!1)};var qz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const qE=e=>{const t=[],n=()=>{const p=e.theme;return p&&p.getNotificationManagerImpl?p.getNotificationManagerImpl():qz()},s=()=>b.from(t[0]),o=(p,E)=>p.type===E.type&&p.text===E.text&&!p.progressBar&&!p.timeout&&!E.progressBar&&!E.timeout,r=()=>{R(t,p=>{p.reposition()})},i=p=>{t.push(p)},a=p=>{Ue(t,E=>E===p).each(E=>{t.splice(E,1)})},c=(p,E=!0)=>e.removed||!jz(e)?{}:(E&&e.dispatch("BeforeOpenNotification",{notification:p}),ve(t,_=>o(n().getArgs(_),p)).getOrThunk(()=>{e.editorManager.setActive(e);const _=n().open(p,()=>{a(_),r(),s().fold(()=>e.focus(),y=>cy(x.fromDom(y.getEl())))});return i(_),r(),e.dispatch("OpenNotification",{notification:{..._}}),_})),u=()=>{s().each(p=>{n().close(p),a(p),r()})},d=K(t);return(p=>{p.on("SkinLoaded",()=>{const E=U1(p);E&&c({text:E,type:"warning",timeout:0},!1),r()}),p.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),p.on("remove",()=>{R(t.slice(),E=>{n().close(E)})})})(e),{open:c,close:u,getNotifications:d}},wi=un.PluginManager,Ar=un.ThemeManager;var Kz=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const KE=e=>{let t=[];const n=()=>{const y=e.theme;return y&&y.getWindowManagerImpl?y.getWindowManagerImpl():Kz()},s=(y,S)=>(...w)=>S?S.apply(y,w):void 0,o=y=>{e.dispatch("OpenWindow",{dialog:y})},r=y=>{e.dispatch("CloseWindow",{dialog:y})},i=y=>{t.push(y),o(y)},a=y=>{r(y),t=j(t,S=>S!==y),t.length===0&&e.focus()},c=()=>b.from(t[t.length-1]),u=y=>{e.editorManager.setActive(e),Bd(e),e.ui.show();const S=y();return i(S),S},d=(y,S)=>u(()=>n().open(y,S,a)),g=y=>u(()=>n().openUrl(y,a)),p=(y,S,w)=>{const N=n();N.alert(y,s(w||N,S))},E=(y,S,w)=>{const N=n();N.confirm(y,s(w||N,S))},_=()=>{c().each(y=>{n().close(y),a(y)})};return e.on("remove",()=>{R(t,y=>{n().close(y)})}),{open:d,openUrl:g,alert:p,confirm:E,close:_}},GE=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Uc=(e,t)=>{e._skinLoaded?GE(e,t):e.on("SkinLoaded",()=>{GE(e,t)})},Gz=(e,t)=>{Uc(e,gs.translate(["Failed to upload image: {0}",t]))},ja=(e,t,n)=>{$v(e,t,{message:n}),console.error(n)},qa=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Yz=(e,t,n)=>{ja(e,"PluginLoadError",qa("plugin",t,n))},Xz=(e,t,n)=>{ja(e,"IconsLoadError",qa("icons",t,n))},Qz=(e,t,n)=>{ja(e,"LanguageLoadError",qa("language",t,n))},Zz=(e,t,n)=>{ja(e,"ThemeLoadError",qa("theme",t,n))},Jz=(e,t,n)=>{ja(e,"ModelLoadError",qa("model",t,n))},eH=(e,t,n)=>{const s=gs.translate(["Failed to initialize plugin: {0}",t]);$v(e,"PluginLoadError",{message:s}),zc(s,n),Uc(e,s)},zc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},tH=e=>/^[a-z0-9\-]+$/i.test(e),nH=e=>YE(e,B1(e)),sH=e=>YE(e,FC(e)),YE=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return V(t,r=>tH(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},oH=e=>{e.contentCSS=e.contentCSS.concat(nH(e),sH(e))},rH=Et,iH=(e,t,n)=>MA(e,t,rH,n),aH=e=>e?wt(e.getElementsByTagName("img")):[],lH=(e,t)=>{const n={};return{findAll:(o,r=Et)=>{const i=j(aH(o),c=>{const u=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!u||u===Xe.transparentSrc?!1:Jt(u,"blob:")?!e.isUploaded(u)&&r(c):Jt(u,"data:")?r(c):!1}),a=V(i,c=>{const u=c.src;if($e(n,u))return n[u].then(d=>ne(d)?d:{image:c,blobInfo:d.blobInfo});{const d=oM(t,u).then(g=>(delete n[u],{image:c,blobInfo:g})).catch(g=>(delete n[u],g));return n[u]=d,d}});return Promise.all(a)}}},XE=()=>{let n={};const s=(p,E)=>({status:p,resultUri:E}),o=p=>p in n;return{hasBlobUri:o,getResultUri:p=>{const E=n[p];return E?E.resultUri:null},isPending:p=>o(p)?n[p].status===1:!1,isUploaded:p=>o(p)?n[p].status===2:!1,markPending:p=>{n[p]=s(1,null)},markUploaded:(p,E)=>{n[p]=s(2,E)},removeFailed:p=>{delete n[p]},destroy:()=>{n={}}}};let cH=0;const uH=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},fH=e=>e+cH+++uH(),dH=()=>{let e=[];const t=g=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[g.toLowerCase()]||"dat",n=(g,p,E,_,y)=>{if(ne(g))return s({id:g,name:_,filename:y,blob:p,base64:E});if(Ge(g))return s(g);throw new Error("Unknown input type")},s=g=>{if(!g.blob||!g.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const p=g.id||fH("blobid"),E=g.name||p,_=g.blob;return{id:K(p),name:K(E),filename:K(g.filename||E+"."+t(_.type)),blob:K(_),base64:K(g.base64),blobUri:K(g.blobUri||URL.createObjectURL(_)),uri:K(g.uri)}},o=g=>{i(g.id())||e.push(g)},r=g=>ve(e,g).getOrUndefined(),i=g=>r(p=>p.id()===g);return{create:n,add:o,get:i,getByUri:g=>r(p=>p.blobUri()===g),getByData:(g,p)=>r(E=>E.base64()===g&&E.blob().type===p),findFirst:r,removeByUri:g=>{e=j(e,p=>p.blobUri()===g?(URL.revokeObjectURL(p.blobUri()),!1):!0)},destroy:()=>{R(e,g=>{URL.revokeObjectURL(g.blobUri())}),e=[]}}},mH=(e,t)=>{const n={},s=(y,S)=>y?y.replace(/\/$/,"")+"/"+S.replace(/^\//,""):S,o=(y,S)=>new Promise((w,N)=>{const A=new XMLHttpRequest;A.open("POST",t.url),A.withCredentials=t.credentials,A.upload.onprogress=H=>{S(H.loaded/H.total*100)},A.onerror=()=>{N("Image upload failed due to a XHR Transport error. Code: "+A.status)},A.onload=()=>{if(A.status<200||A.status>=300){N("HTTP Error: "+A.status);return}const H=JSON.parse(A.responseText);if(!H||!ne(H.location)){N("Invalid JSON: "+A.responseText);return}w(s(t.basePath,H.location))};const U=new FormData;U.append("file",y.blob(),y.filename()),A.send(U)}),r=He(t.handler)?t.handler:o,i=()=>new Promise(y=>{y([])}),a=(y,S)=>({url:S,blobInfo:y,status:!0}),c=(y,S)=>({url:"",blobInfo:y,status:!1,error:S}),u=(y,S)=>{Q.each(n[y],w=>{w(S)}),delete n[y]},d=(y,S,w)=>(e.markPending(y.blobUri()),new Promise(N=>{let A,U;try{const H=()=>{A&&(A.close(),U=Me)},ee=F=>{H(),e.markUploaded(y.blobUri(),F),u(y.blobUri(),a(y,F)),N(a(y,F))},W=F=>{H(),e.removeFailed(y.blobUri()),u(y.blobUri(),c(y,F)),N(c(y,F))};U=F=>{F<0||F>100||b.from(A).orThunk(()=>b.from(w).map(ji)).each(L=>{A=L,L.progressBar.value(F)})},S(y,U).then(ee,F=>{W(ne(F)?{message:F}:F)})}catch(H){N(c(y,H))}})),g=y=>y===o,p=y=>{const S=y.blobUri();return new Promise(w=>{n[S]=n[S]||[],n[S].push(w)})},E=(y,S)=>(y=Q.grep(y,w=>!e.isUploaded(w.blobUri())),Promise.all(Q.map(y,w=>e.isPending(w.blobUri())?p(w):d(w,r,S))));return{upload:(y,S)=>!t.url&&g(r)?i():E(y,S)}},QE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),ZE=(e,t)=>mH(t,{url:N1(e),basePath:A1(e),credentials:T1(e),handler:R1(e)}),pH=e=>{const t=XE(),n=ZE(e,t);return{upload:(s,o=!0)=>n.upload(s,o?QE(e):void 0)}},gH=e=>{const t=dH();let n,s;const o=XE(),r=[],i=A=>U=>e.selection?A(U):[],a=A=>A+(A.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(A,U,H)=>{let ee=0;do ee=A.indexOf(U,ee),ee!==-1&&(A=A.substring(0,ee)+H+A.substr(ee+U.length),ee+=H.length-U.length+1);while(ee!==-1);return A},u=(A,U,H)=>{const ee=`src="${H}"${H===Xe.transparentSrc?' data-mce-placeholder="1"':""}`;return A=c(A,`src="${U}"`,ee),A=c(A,'data-mce-src="'+U+'"','data-mce-src="'+H+'"'),A},d=(A,U)=>{R(e.undoManager.data,H=>{H.type==="fragmented"?H.fragments=V(H.fragments,ee=>u(ee,A,U)):H.content=u(H.content,A,U)})},g=(A,U)=>{const H=e.convertURL(U,"src");d(A.src,U),wo(x.fromDom(A),{src:OC(e)?a(U):U,"data-mce-src":H})},p=()=>(n||(n=ZE(e,o)),S().then(i(A=>{const U=V(A,H=>H.blobInfo);return n.upload(U,QE(e)).then(i(H=>{const ee=[];let W=!1;const F=V(H,(L,te)=>{const{blobInfo:me,image:be}=A[te];let Te=!1;return L.status&&x1(e)?(L.url&&!sn(be.src,L.url)&&(W=!0),t.removeByUri(be.src),Qs(e)||g(be,L.url)):L.error&&(L.error.remove&&(d(be.src,Xe.transparentSrc),ee.push(be),Te=!0),Gz(e,L.error.message)),{element:be,status:L.status,uploadUri:L.url,blobInfo:me,removed:Te}});return ee.length>0&&!Qs(e)?e.undoManager.transact(()=>{R(ee,L=>{e.dom.remove(L),t.removeByUri(L.src)})}):W&&e.undoManager.dispatchChange(),F}))}))),E=()=>PC(e)?p():Promise.resolve([]),_=A=>ot(r,U=>U(A)),y=A=>{r.push(A)},S=()=>(s||(s=lH(o,t)),s.findAll(e.getBody(),_).then(i(A=>{const U=j(A,H=>ne(H)?(Uc(e,H),!1):!0);return Qs(e)||R(U,H=>{d(H.image.src,H.blobInfo.blobUri()),H.image.src=H.blobInfo.blobUri(),H.image.removeAttribute("data-mce-src")}),U}))),w=()=>{t.destroy(),o.destroy(),s=n=null},N=A=>A.replace(/src="(blob:[^"]+)"/g,(U,H)=>{const ee=o.getResultUri(H);if(ee)return'src="'+ee+'"';let W=t.getByUri(H);return W||(W=_e(e.editorManager.get(),(F,L)=>F||L.editorUpload&&L.editorUpload.blobCache.getByUri(H),void 0)),W?'src="data:'+W.blob().type+";base64,"+W.base64()+'"':U});return e.on("SetContent",()=>{PC(e)?E():S()}),e.on("RawSaveContent",A=>{A.content=N(A.content)}),e.on("GetContent",A=>{A.source_view||A.format==="raw"||A.format==="tree"||(A.content=N(A.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",A=>{R(A,U=>{const H=U.attr("src");if(!H||t.getByUri(H))return;const ee=o.getResultUri(H);ee&&U.attr("src",ee)})})}),{blobCache:t,addFilter:y,uploadImages:p,uploadImagesAuto:E,scanForImages:S,destroy:w}},hH=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>fe(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{Q.each(i,(a,c)=>{t.setAttrib(o,c,a)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},JE={remove_similar:!0,inherit:!1},xi={selector:"td,th",...JE},bH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...xi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...xi},tablecellbordercolor:{styles:{borderColor:"%value"},...xi},tablecellclass:{classes:["%value"],...xi},tableclass:{selector:"table",classes:["%value"],...JE},tablecellborderstyle:{styles:{borderStyle:"%value"},...xi},tablecellborderwidth:{styles:{borderWidth:"%value"},...xi}},CH=K(bH),vH=e=>{const t={},n=i=>oe(i)?t[i]:t,s=i=>$e(t,i),o=(i,a)=>{i&&(ne(i)?(Ct(a)||(a=[a]),R(a,c=>{at(c.deep)&&(c.deep=!Gn(c)),at(c.split)&&(c.split=!Gn(c)||qt(c)),at(c.remove)&&Gn(c)&&!qt(c)&&(c.remove="none"),Gn(c)&&qt(c)&&(c.mixed=!0,c.block_expand=!0),ne(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[i]=a):ft(i,(c,u)=>{o(u,c)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(hH(e)),o(CH()),o(W1(e)),{get:n,has:s,register:o,unregister:r}},Hc=Q.each,Qn=ct.DOM,qm=e=>oe(e)&&Ge(e),e_=(e,t)=>{const n=t&&t.schema||Po({}),s=(c,u)=>{u.classes.length>0&&Qn.addClass(c,u.classes.join(" ")),Qn.setAttribs(c,u.attrs)},o=c=>{const u=ne(c)?{name:c,classes:[],attrs:{}}:c,d=Qn.create(u.name);return s(d,u),d},r=(c,u)=>{const d=n.getElementRule(c.nodeName.toLowerCase()),g=d==null?void 0:d.parentsRequired;return g&&g.length?u&&z(g,u)?u:g[0]:!1},i=(c,u,d)=>{let g;const p=u[0],E=qm(p)?p.name:void 0,_=r(c,E);if(_)E===_?(g=p,u=u.slice(1)):g=_;else if(p)g=p,u=u.slice(1);else if(!d)return c;const y=g?o(g):Qn.create("div");y.appendChild(c),d&&Q.each(d,w=>{const N=o(w);y.insertBefore(N,c)});const S=qm(g)?g.siblings:void 0;return i(y,u,S)},a=Qn.create("div");if(e.length>0){const c=e[0],u=o(c),d=qm(c)?c.siblings:void 0;a.appendChild(i(u,e.slice(1),d))}return a},yH=e=>{e=Q.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,a)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":Q.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},EH=e=>ne(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=Q.map(t.split(/(?:~\+|~|\+)/),yH),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],_H=(e,t)=>{let n="",s=V1(e);if(s==="")return"";const o=p=>ne(p)?p.replace(/%(\w+)/g,""):"",r=(p,E)=>Qn.getStyle(E!=null?E:e.getBody(),p,!0);if(ne(t)){const p=e.formatter.get(t);if(!p)return"";t=p[0]}if("preview"in t){const p=t.preview;if(p===!1)return"";s=p||s}let i=t.block||t.inline||"span",a;const c=EH(t.selector);c.length>0?(c[0].name||(c[0].name=i),i=t.selector,a=e_(c,e)):a=e_([i],e);const u=Qn.select(i,a)[0]||a.firstChild;Hc(t.styles,(p,E)=>{const _=o(p);_&&Qn.setStyle(u,E,_)}),Hc(t.attributes,(p,E)=>{const _=o(p);_&&Qn.setAttrib(u,E,_)}),Hc(t.classes,p=>{const E=o(p);Qn.hasClass(u,E)||Qn.addClass(u,E)}),e.dispatch("PreviewFormats"),Qn.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const d=r("fontSize"),g=/px$/.test(d)?parseInt(d,10):0;return Hc(s.split(" "),p=>{let E=r(p,u);if(!(p==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(E)&&(E=r(p),ac(E).toLowerCase()==="#ffffff"))&&!(p==="color"&&ac(E).toLowerCase()==="#000000")){if(p==="font-size"&&/em|%$/.test(E)){if(g===0)return;E=parseFloat(E)/(/%$/.test(E)?100:1)*g+"px"}p==="border"&&E&&(n+="padding:0 2px;"),n+=p+":"+E+";"}}),e.dispatch("AfterPreviewFormats"),Qn.remove(a),n},SH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},t_=e=>{const t=vH(e),n=Vt({});return SH(e),zL(e),Qs(e)||m$(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{zU(e,s,o,r)},remove:(s,o,r,i)=>{HU(e,s,o,r,i)},toggle:(s,o,r)=>{WU(e,s,o,r)},match:(s,o,r,i)=>FU(e,s,o,r,i),closest:s=>UU(e,s),matchAll:(s,o)=>LU(e,s,o),matchNode:(s,o,r,i)=>$U(e,s,o,r,i),canApply:s=>MU(e,s),formatChanged:(s,o,r,i)=>VU(e,n,s,o,r,i),getCssText:ae(_H,e)}},n_=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},wH=(e,t,n)=>{const s=Vt(!1),o=c=>{Fc(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const u=c.command;n_(u)||(IE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const u=c.command;n_(u)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const u=c.keyCode;c.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||u===45||c.ctrlKey)&&(o(),e.nodeChanged()),(u===46||u===8)&&e.nodeChanged(),s.get()&&t.typing&&!Hm(Ic(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;if(u>=33&&u<=36||u>=37&&u<=40||u===45){t.typing&&o(c);return}const d=c.ctrlKey&&!c.altKey||c.metaKey;(u<16||u>20)&&u!==224&&u!==91&&!t.typing&&!d&&(t.beforeChange(),Fc(t,!0,n),t.add({},c),s.set(!0))}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",i=c=>c.inputType==="insertText"&&c.data===null,a=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||i(c)||a(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},xH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},s_=e=>{const t=Oo(),n=Vt(0),s=Vt(0),o={data:[],typing:!1,beforeChange:()=>{xU(e,n,t)},add:(r,i)=>kU(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0);const r=Ic(e);r.bookmark=Qf(e.selection),e.dispatch("change",{level:r,lastLevel:oo(o.data,s.get()).getOrUndefined()})},undo:()=>NU(e,o,n,s),redo:()=>AU(e,s,o.data),clear:()=>{TU(e,o,s)},reset:()=>{RU(e,o)},hasUndo:()=>PU(e,o,s),hasRedo:()=>OU(e,o,s),transact:r=>DU(e,o,n,r),ignore:r=>{BU(e,n,r)},extra:(r,i)=>{IU(e,o,s,r,i)}};return Qs(e)||wH(e,o,n),xH(e),o},kH=[9,27,pe.HOME,pe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,pe.DOWN,pe.UP,pe.LEFT,pe.RIGHT].concat(Xe.browser.isFirefox()?[224]:[]),o_="data-mce-placeholder",r_=e=>e.type==="keydown"||e.type==="keyup",i_=e=>{const t=e.keyCode;return t===pe.BACKSPACE||t===pe.DELETE},NH=e=>{if(r_(e)){const t=e.keyCode;return!i_(e)&&(pe.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||z(kH,t))}else return!1},AH=e=>r_(e)&&!(i_(e)||e.type==="keyup"&&e.keyCode===229),TH=(e,t,n)=>{if(Yt(x.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},RH=e=>{var t;const n=e.dom,s=Dn(e),o=(t=M1(e))!==null&&t!==void 0?t:"",r=(i,a)=>{if(NH(i))return;const c=e.getBody(),u=AH(i)?!1:TH(n,c,s);(n.getAttrib(c,o_)!==""!==u||a)&&(n.setAttrib(c,o_,u?o:null),n.setAttrib(c,"aria-placeholder",u?o:null),rD(e,u),e.on(u?"keydown":"keyup",r),e.off(u?"keyup":"keydown",r))};Ls(o)&&e.on("init",i=>{r(i,!0),e.on("change SetContent ExecCommand",r),e.on("paste",a=>Yn.setEditorTimeout(e,()=>r(a)))})},PH=(e,t)=>({block:e,position:t}),OH=(e,t)=>({from:e,to:t}),Km=(e,t)=>{const n=x.fromDom(e),s=x.fromDom(t.container());return _c(n,s).map(o=>PH(o,t))},DH=e=>!rt(e.from.block,e.to.block),BH=e=>Hn(e.from.block).bind(t=>Hn(e.to.block).filter(n=>rt(t,n))).isSome(),IH=e=>vt(e.from.block.dom)===!1&&vt(e.to.block.dom)===!1,FH=(e,t,n)=>Ot(n.position.getNode())&&!Yt(n.block)?fi(!1,n.block.dom).bind(s=>s.isEqual(n.position)?jn(t,e,s).bind(o=>Km(e,o)):b.some(n)).getOr(n):n,LH=(e,t,n)=>{const s=Km(e,M.fromRangeStart(n)),o=s.bind(r=>jn(t,e,r.position).bind(i=>Km(e,i).map(a=>FH(e,t,a))));return bn(s,o,OH).filter(r=>DH(r)&&BH(r)&&IH(r))},$H=(e,t,n)=>n.collapsed?LH(e,t,n):b.none(),MH=e=>{const t=rn(e);return Ue(t,ps).fold(K(t),n=>t.slice(0,n))},a_=e=>{const t=MH(e);return R(t,_t),t},l_=(e,t)=>{const n=go(t,e);return ve(n.reverse(),s=>Yt(s)).each(_t)},UH=e=>j(Vh(e),t=>!Yt(t)).length===0,zH=(e,t,n,s)=>{if(Yt(n))return cr(n),yn(n.dom);UH(s)&&Yt(t)&&Wn(s,x.fromTag("br"));const o=qn(n.dom,M.before(s.dom));return R(a_(t),r=>{Wn(s,r)}),l_(e,t),o},HH=(e,t,n)=>{if(Yt(n))return _t(n),Yt(t)&&cr(t),yn(t.dom);const s=Ks(n.dom);return R(a_(t),o=>{Wt(n,o)}),l_(e,t),s},WH=(e,t)=>{const n=go(t,e);return b.from(n[n.length-1])},VH=(e,t)=>lo(t,e)?WH(t,e):b.none(),c_=(e,t)=>{fi(e,t.dom).bind(n=>b.from(n.getNode())).map(x.fromDom).filter(lr).each(_t)},u_=(e,t,n)=>(c_(!0,t),c_(!1,n),VH(t,n).fold(ae(HH,e,t,n),ae(zH,e,t,n))),f_=(e,t,n,s)=>t?u_(e,s,n):u_(e,n,s),Gm=(e,t)=>{const n=x.fromDom(e.getBody());return $H(n.dom,t,e.selection.getRng()).map(o=>()=>{f_(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},jH=(e,t)=>{const n=t.getRng();return bn(_c(e,x.fromDom(n.startContainer)),_c(e,x.fromDom(n.endContainer)),(s,o)=>rt(s,o)?b.none():b.some(()=>{n.deleteContents(),f_(e,!0,s,o).each(r=>{t.setRng(r.toRange())})})).getOr(b.none())},d_=(e,t)=>{const n=x.fromDom(t),s=ae(rt,e);return Qr(n,Il,s).isSome()},qH=(e,t)=>d_(e,t.startContainer)||d_(e,t.endContainer),KH=(e,t)=>{const n=qn(e.dom,M.fromRangeStart(t)).isNone(),s=An(e.dom,M.fromRangeEnd(t)).isNone();return!qH(e,t)&&n&&s},GH=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),YH=e=>{const t=x.fromDom(e.getBody()),n=e.selection.getRng();return KH(t,n)?GH(e):jH(t,e.selection)},Ym=(e,t)=>e.selection.isCollapsed()?b.none():YH(e),ho=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),XH=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Ka=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(XH(t)),QH=(e,t,n)=>{const s=rd(1,e.getBody(),t),o=M.fromRangeStart(s),r=o.getNode();if(wa(r))return ho(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(wa(i))return ho(1,e,i,!1,!1);const a=xr(e.dom.getRoot(),o.getNode());return wa(a)?ho(1,e,a,!1,n):b.none()},Xm=(e,t,n)=>t.collapsed?QH(e,t,n).getOr(t):t,ZH=e=>Mo(e)||Fa(e),JH=e=>Uo(e)||La(e),e2=(e,t)=>{X(t)&&t.data.length===0&&e.remove(t)},m_=(e,t,n,s,o,r)=>{ho(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),e2(e.dom,n)},t2=(e,t)=>{const n=e.selection.getRng();if(!X(n.commonAncestorContainer))return b.none();const s=t?jt.Forwards:jt.Backwards,o=qs(e.getBody()),r=ae(id,t?o.next:o.prev),i=t?ZH:JH,a=Ta(s,e.getBody(),n),c=r(a),u=c&&Xn(t,c);if(!u||!nc(a,u))return b.none();if(i(u))return b.some(()=>m_(e,n,a.getNode(),s,t,u));const d=r(u);return d&&i(d)&&nc(u,d)?b.some(()=>m_(e,n,a.getNode(),s,t,d)):b.none()},Qm=(e,t)=>t2(e,t),Zm=(e,t)=>{const n=e.getBody();return t?yn(n).filter(Mo):Ks(n).filter(Uo)},Jm=e=>{const t=e.selection.getRng();return!t.collapsed&&(Zm(e,!0).exists(n=>n.isEqual(M.fromRangeStart(t)))||Zm(e,!1).exists(n=>n.isEqual(M.fromRangeEnd(t))))},n2=e=>oe(e)&&(Il(x.fromDom(e))||ua(x.fromDom(e))),Bn=Ws.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),s2=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return fe(n)&&n.getAttribute("data-mce-caret")===s},o2=(e,t,n,s)=>{const o=r=>wf(x.fromDom(r))&&!Vs(n,s,e);return tv(!t,n).fold(()=>tv(t,s).fold(tt,o),o)},p_=(e,t,n,s)=>{const o=s.getNode(!t);return _c(x.fromDom(e),x.fromDom(n.getNode())).map(r=>Yt(r)?Bn.remove(r.dom):Bn.moveToElement(o)).orThunk(()=>b.some(Bn.moveToElement(o)))},g_=(e,t,n)=>jn(t,e,n).bind(s=>n2(s.getNode())||o2(e,t,n,s)?b.none():t&&vt(s.getNode())||!t&&vt(s.getNode(!0))?p_(e,t,n,s):t&&Uo(n)||!t&&Mo(n)?b.some(Bn.moveToPosition(s)):b.none()),r2=(e,t)=>Ve(t)?b.none():e&&vt(t.nextSibling)?b.some(Bn.moveToElement(t.nextSibling)):!e&&vt(t.previousSibling)?b.some(Bn.moveToElement(t.previousSibling)):b.none(),i2=(e,t,n)=>n.fold(s=>b.some(Bn.remove(s)),s=>b.some(Bn.moveToElement(s)),s=>Vs(t,s,e)?b.none():b.some(Bn.moveToPosition(s))),a2=(e,t,n)=>s2(t,n)?r2(t,n.getNode(!t)).orThunk(()=>g_(e,t,n)):g_(e,t,n).bind(s=>i2(e,n,s)),l2=(e,t,n)=>{const s=rd(t?1:-1,e,n),o=M.fromRangeStart(s),r=x.fromDom(e);return!t&&Uo(o)?b.some(Bn.remove(o.getNode(!0))):t&&Mo(o)?b.some(Bn.remove(o.getNode())):!t&&Mo(o)&&qd(r,o)?yI(r,o).map(i=>Bn.remove(i.getNode())):t&&Uo(o)&&jd(r,o)?EI(r,o).map(i=>Bn.remove(i.getNode())):a2(e,t,o)},c2=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Sr(e,t,x.fromDom(n)),!0),u2=(e,t)=>n=>{const s=t?M.before(n):M.after(n);return e.selection.setRng(s.toRange()),!0},f2=e=>t=>(e.selection.setRng(t.toRange()),!0),h_=(e,t)=>b.from(xr(e.getBody(),t)),d2=(e,t)=>{const n=e.selection.getNode();return h_(e,n).filter(vt).fold(()=>l2(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(c2(e,t),u2(e,t),f2(e))),()=>b.some(Me))},m2=e=>{R(Cn(e,".mce-offscreen-selection"),_t)},p2=(e,t)=>{const n=e.selection.getNode();return vt(n)&&!Bl(n)?h_(e,n.parentNode).filter(vt).fold(()=>b.some(()=>{m2(x.fromDom(e.getBody())),Sr(e,t,x.fromDom(e.selection.getNode())),Qd(e)}),()=>b.some(Me)):Jm(e)?b.some(()=>{o0(e,e.selection.getRng(),x.fromDom(e.getBody()))}):b.none()},b_=e=>{const t=e.dom,n=e.selection,s=xr(e.getBody(),n.getNode());if(zs(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(M.before(o).toRange())}return!0},ep=(e,t)=>e.selection.isCollapsed()?d2(e,t):p2(e,t),g2=(e,t)=>{const n=M.fromRangeStart(e.selection.getRng());return jn(t,e.getBody(),n).filter(s=>t?mI(s):pI(s)).bind(s=>od(t?0:-1,s)).map(s=>()=>e.selection.select(s))},tp=(e,t)=>e.selection.isCollapsed()?g2(e,t):b.none(),ki=X,C_=e=>ki(e)&&e.data[0]===en,v_=e=>ki(e)&&e.data[e.data.length-1]===en,y_=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(en)},h2=e=>{var t;if(ki(e.previousSibling))return v_(e.previousSibling)||e.previousSibling.appendData(en),e.previousSibling;if(ki(e))return C_(e)||e.insertData(0,en),e;{const n=y_(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},b2=e=>{var t,n;if(ki(e.nextSibling))return C_(e.nextSibling)||e.nextSibling.insertData(0,en),e.nextSibling;if(ki(e))return v_(e)||e.appendData(en),e;{const s=y_(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},Wc=(e,t)=>e?h2(t):b2(t),C2=ae(Wc,!0),v2=ae(Wc,!1),E_=(e,t)=>X(e.container())?Wc(t,e.container()):Wc(t,e.getNode()),__=(e,t)=>{const n=t.get();return n&&e.container()===n&&ni(n)},np=(e,t)=>t.fold(n=>{br(e.get());const s=C2(n);return e.set(s),b.some(M(s,s.length-1))},n=>yn(n).map(s=>{if(__(s,e)){const o=e.get();return M(o,1)}else{br(e.get());const o=E_(s,!0);return e.set(o),M(o,1)}}),n=>Ks(n).map(s=>{if(__(s,e)){const o=e.get();return M(o,o.length-1)}else{br(e.get());const o=E_(s,!1);return e.set(o),M(o,o.length-1)}}),n=>{br(e.get());const s=v2(n);return e.set(s),b.some(M(s,1))}),S_=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},fn=Ws.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),w_=(e,t)=>{const n=Io(t,e);return n||e},y2=(e,t,n)=>{const s=Jy(n),o=w_(t,s.container());return zo(e,o,s).fold(()=>An(o,s).bind(ae(zo,e,o)).map(r=>fn.before(r)),b.none)},E2=(e,t)=>vr(e,t)===null,x_=(e,t,n)=>zo(e,t,n).filter(ae(E2,t)),_2=(e,t,n)=>{const s=e0(n);return x_(e,t,s).bind(o=>qn(o,s).isNone()?b.some(fn.start(o)):b.none())},S2=(e,t,n)=>{const s=Jy(n);return x_(e,t,s).bind(o=>An(o,s).isNone()?b.some(fn.end(o)):b.none())},w2=(e,t,n)=>{const s=e0(n),o=w_(t,s.container());return zo(e,o,s).fold(()=>qn(o,s).bind(ae(zo,e,o)).map(r=>fn.after(r)),b.none)},k_=e=>!JI(sp(e)),Zs=(e,t,n)=>S_([y2,_2,S2,w2],[e,t,n]).filter(k_),sp=e=>e.fold(Pt,Pt,Pt,Pt),N_=e=>e.fold(K("before"),K("start"),K("end"),K("after")),Vc=e=>e.fold(fn.before,fn.before,fn.after,fn.after),op=e=>e.fold(fn.start,fn.start,fn.end,fn.end),x2=(e,t)=>N_(e)===N_(t)&&sp(e)===sp(t),k2=(e,t,n,s,o,r)=>bn(zo(t,n,s),zo(t,n,o),(i,a)=>i!==a&&tF(n,i,a)?fn.after(e?i:a):r).getOr(r),N2=(e,t)=>e.fold(Et,n=>!x2(n,t)),A2=(e,t,n,s,o)=>{const r=Xn(e,o);return jn(e,n,r).map(ae(Xn,e)).fold(()=>s.map(Vc),c=>Zs(t,n,c).map(ae(k2,e,t,n,r,c)).filter(ae(N2,s))).filter(k_)},T2=(e,t)=>e?t.fold(Lt(b.some,fn.start),b.none,Lt(b.some,fn.after),b.none):t.fold(b.none,Lt(b.some,fn.before),b.none,Lt(b.some,fn.end)),R2=(e,t,n,s)=>{const o=Xn(e,s),r=Zs(t,n,o);return Zs(t,n,o).bind(ae(T2,e)).orThunk(()=>A2(e,t,n,r,s))},P2=e=>He(e.selection.getSel().modify),A_=(e,t,n)=>{const s=e?1:-1;return t.setRng(M(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},O2=(e,t)=>{const n=t.selection.getRng(),s=e?M.fromRangeEnd(n):M.fromRangeStart(n);return P2(t)?e&&Af(s)?A_(!0,t.selection,s):!e&&Tf(s)?A_(!1,t.selection,s):!1:!1};var Js;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Js||(Js={}));const jc=(e,t)=>e===jt.Backwards?Nt(t):t,D2=(e,t,n)=>e===jt.Forwards?t.next(n):t.prev(n),B2=(e,t,n,s)=>Ot(s.getNode(t===jt.Forwards))?Js.Br:Vs(n,s)===!1?Js.Block:Js.Wrap,T_=(e,t,n,s)=>{const o=qs(n);let r=s;const i=[];for(;r;){const a=D2(t,o,r);if(!a)break;if(Ot(a.getNode(!1)))return t===jt.Forwards?{positions:jc(t,i).concat([a]),breakType:Js.Br,breakAt:b.some(a)}:{positions:jc(t,i),breakType:Js.Br,breakAt:b.some(a)};if(!a.isVisible()){r=a;continue}if(e(r,a)){const c=B2(n,t,r,a);return{positions:jc(t,i),breakType:c,breakAt:b.some(a)}}i.push(a),r=a}return{positions:jc(t,i),breakType:Js.Eol,breakAt:b.none()}},R_=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===jt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),rp=(e,t)=>_e(e,(n,s)=>n.fold(()=>b.some(s),o=>bn(nn(o.getClientRects()),nn(s.getClientRects()),(r,i)=>{const a=Math.abs(t-r.left);return Math.abs(t-i.left)<=a?s:o}).or(n)),b.none()),qc=(e,t)=>nn(t.getClientRects()).bind(n=>rp(e,n.left)),Ga=ae(T_,M.isAbove,-1),Ya=ae(T_,M.isBelow,1),P_=ae(R_,-1,Ga),O_=ae(R_,1,Ya),I2=(e,t)=>Ga(e,t).breakAt.isNone(),F2=(e,t)=>Ya(e,t).breakAt.isNone(),L2=e=>yn(e).map(t=>[t].concat(Ya(e,t).positions)).getOr([]),$2=e=>Ks(e).map(t=>Ga(e,t).positions.concat(t)).getOr([]),M2=(e,t)=>qc(P_(e,t),t),U2=(e,t)=>qc(O_(e,t),t),z2=vt,D_=(e,t)=>Math.abs(e.left-t),B_=(e,t)=>Math.abs(e.right-t),H2=e=>qr(e,"node"),I_=(e,t)=>_l(e,(n,s)=>{const o=Math.min(D_(n,t),B_(n,t)),r=Math.min(D_(s,t),B_(s,t));return r===o&&H2(s)&&z2(s.node)||r<o?s:n}),W2=e=>{const t=n=>V(n,s=>{const o=gr(s);return o.node=e,o});if(fe(e))return t(e.getClientRects());if(X(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},F_=e=>st(e,W2);var Xa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Xa||(Xa={}));const V2=(e,t,n,s)=>{let o=s;for(;o=ka(o,e,kb,t);)if(n(o))return},L_=(e,t,n,s,o,r)=>{let i=0;const a=[],c=g=>{let p=F_([g]);e===-1&&(p=p.reverse());for(let E=0;E<p.length;E++){const _=p[E];if(!n(_,u)){if(a.length>0&&t(_,Jo(a))&&i++,_.line=i,o(_))return!0;a.push(_)}}return!1},u=Jo(r.getClientRects());if(!u)return a;const d=r.getNode();return d&&(c(d),V2(e,s,c,d)),a},j2=(e,t)=>t.line>e,q2=(e,t)=>t.line===e,K2=ae(L_,Xa.Up,Ca,va),G2=ae(L_,Xa.Down,va,Ca),$_=e=>Jo(e.getClientRects()),Y2=(e,t,n,s)=>{const o=qs(t);let r,i,a,c;const u=[];let d=0;e===1?(r=o.next,i=va,a=Ca,c=M.after(s)):(r=o.prev,i=Ca,a=va,c=M.before(s));const g=$_(c);do{if(!c.isVisible())continue;const p=$_(c);if(a(p,g))continue;u.length>0&&i(p,Jo(u))&&d++;const E=gr(p);if(E.position=c,E.line=d,n(E))return u;u.push(E)}while(c=r(c));return u},M_=e=>t=>j2(e,t),ip=e=>t=>q2(e,t),bo=(e,t)=>{e.selection.setRng(t),Ia(e,e.selection.getRng())},ap=(e,t,n)=>b.some(Xm(e,t,n)),U_=(e,t,n,s,o,r)=>{const i=t===jt.Forwards,a=qs(e.getBody()),c=ae(id,i?a.next:a.prev),u=i?s:o;if(!n.collapsed){const _=Gl(n);if(r(_))return ho(t,e,_,t===jt.Backwards,!1);if(Jm(e)){const y=n.cloneRange();return y.collapse(t===jt.Backwards),b.from(y)}}const d=Ta(t,e.getBody(),n);if(u(d))return Ka(e,d.getNode(!i));let g=c(d);const p=Sb(n);if(g)g=Xn(i,g);else return p?b.some(n):b.none();if(u(g))return ho(t,e,g.getNode(!i),i,!1);const E=c(g);return E&&u(E)&&nc(g,E)?ho(t,e,E.getNode(!i),i,!1):p?ap(e,g.toRange(),!1):b.none()},z_=(e,t,n,s,o,r)=>{const i=Ta(t,e.getBody(),n),a=Jo(i.getClientRects()),c=t===Xa.Down,u=e.getBody();if(!a)return b.none();if(Jm(e)){const S=c?M.fromRangeEnd(n):M.fromRangeStart(n);return(c?U2:M2)(u,S).orThunk(()=>b.from(S)).map(N=>N.toRange())}const g=(c?G2:K2)(u,M_(1),i),p=j(g,ip(1)),E=a.left,_=I_(p,E);if(_&&r(_.node)){const S=Math.abs(E-_.left),w=Math.abs(E-_.right);return ho(t,e,_.node,S<w,!1)}let y;if(s(i)?y=i.getNode():o(i)?y=i.getNode(!0):y=Gl(n),y){const S=Y2(t,u,M_(1),y);let w=I_(j(S,ip(1)),E);if(w||(w=Jo(j(S,ip(0))),w))return ap(e,w.position.toRange(),!1)}return p.length===0?lp(e,c).filter(c?o:s).map(S=>Xm(e,S.toRange(),!1)):b.none()},lp=(e,t)=>{const n=e.selection.getRng(),s=t?M.fromRangeEnd(n):M.fromRangeStart(n),o=YP(s.container(),e.getBody());if(t){const r=Ya(o,s);return Ht(r.positions)}else{const r=Ga(o,s);return nn(r.positions)}},H_=(e,t,n)=>lp(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Kc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},W_=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},V_=(e,t,n)=>np(t,n).map(s=>(Kc(e,s),n)),X2=(e,t,n)=>{const s=M.fromRangeStart(e);if(e.collapsed)return s;{const o=M.fromRangeEnd(e);return n?qn(t,o).getOr(o):An(t,s).getOr(s)}},Q2=(e,t,n)=>{const s=e.getBody(),o=X2(e.selection.getRng(),s,n),r=ae(wr,e);return R2(n,r,s,o).bind(a=>V_(e,t,a))},Z2=(e,t,n)=>{const s=V(Cn(x.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=j(s,e),r=j(n,e);R(Nn(o,r),ae(W_,!1)),R(Nn(r,o),ae(W_,!0))},J2=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=M.fromRangeStart(e.selection.getRng());M.isTextPosition(s)&&!nF(s)&&(Kc(e,LP(n,s)),t.set(null))}},e3=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=j(s,e);R(o,r=>{const i=M.fromRangeStart(t.selection.getRng());Zs(e,t.getBody(),i).bind(a=>V_(t,n,a))})}},j_=(e,t,n)=>Sa(e)?Q2(e,t,n).isSome():!1,q_=(e,t,n)=>Sa(t)?O2(e,t):!1,t3=e=>{const t=Vt(null),n=ae(wr,e);return e.on("NodeChange",s=>{Sa(e)&&(Z2(n,e.dom,s.parents),J2(e,t),e3(n,e,t,s.parents))}),t},n3=ae(q_,!0),s3=ae(q_,!1),Gc=(e,t,n)=>{if(Sa(e)){const s=lp(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?M.fromRangeEnd(o):M.fromRangeStart(o)});return Zs(ae(wr,e),e.getBody(),s).exists(o=>{const r=Vc(o);return np(n,r).exists(i=>(Kc(e,i),!0))})}else return!1},o3=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},r3=e=>bn(yn(e),Ks(e),(t,n)=>{const s=Xn(!0,t),o=Xn(!1,n);return An(e,s).forall(r=>r.isEqual(o))}).getOr(!0),K_=(e,t)=>n=>np(t,n).map(s=>()=>Kc(e,s)),G_=(e,t,n,s)=>{const o=e.getBody(),r=ae(wr,e);e.undoManager.ignore(()=>{e.selection.setRng(o3(n,s)),n0(e),Zs(r,o,M.fromRangeStart(e.selection.getRng())).map(op).bind(K_(e,t)).each(Zo)}),e.nodeChanged()},i3=(e,t)=>{const n=Io(t,e);return n||e},a3=(e,t,n,s)=>{const o=i3(e.getBody(),s.container()),r=ae(wr,e),i=Zs(r,o,s);return i.bind(c=>n?c.fold(K(b.some(op(c))),b.none,K(b.some(Vc(c))),b.none):c.fold(b.none,K(b.some(Vc(c))),b.none,K(b.some(op(c))))).map(K_(e,t)).getOrThunk(()=>{const c=oc(n,o,s),u=c.bind(d=>Zs(r,o,d));return bn(i,u,()=>zo(r,o,s).bind(d=>r3(d)?b.some(()=>{Sr(e,n,x.fromDom(d))}):b.none())).getOrThunk(()=>u.bind(()=>c.map(d=>()=>{n?G_(e,t,s,d):G_(e,t,d,s)})))})},cp=(e,t,n)=>{if(e.selection.isCollapsed()&&Sa(e)){const s=M.fromRangeStart(e.selection.getRng());return a3(e,t,n,s)}return b.none()},l3=(e,t)=>{const n=go(t,e);return Ue(n,ps).fold(K(n),s=>n.slice(0,s))},c3=e=>Kh(e)===1,u3=(e,t,n,s)=>{const o=ae(WL,t),r=V(j(s,o),i=>i.dom);if(r.length===0)Sr(t,e,n);else{const i=HL(n.dom,r);t.selection.setRng(i.toRange())}},f3=(e,t)=>{const n=x.fromDom(e.getBody()),s=x.fromDom(e.selection.getStart()),o=j(l3(n,s),c3);return Ht(o).bind(r=>{const i=M.fromRangeStart(e.selection.getRng());return aF(t,i,r.dom)&&!VL(r)?b.some(()=>u3(t,e,r,o)):b.none()})},up=(e,t)=>e.selection.isCollapsed()?f3(e,t):b.none(),fp=(e,t,n)=>oe(n)?b.some(()=>{e._selectionOverrides.hideFakeCaret(),Sr(e,t,x.fromDom(n))}):b.none(),d3=(e,t)=>{const n=t?Fa:La,s=t?jt.Forwards:jt.Backwards,o=Ta(s,e.getBody(),e.selection.getRng());return n(o)?fp(e,t,o.getNode(!t)):b.from(Xn(t,o)).filter(r=>n(r)&&nc(o,r)).bind(r=>fp(e,t,r.getNode(!t)))},m3=(e,t)=>{const n=e.selection.getNode();return Hs(n)?fp(e,t,n):b.none()},dp=(e,t)=>e.selection.isCollapsed()?d3(e,t):m3(e,t),p3=e=>Zr(e,t=>zs(t.dom)||vt(t.dom)).exists(t=>zs(t.dom)),mp=e=>Sl(e!=null?e:"").getOr(0),Y_=(e,t)=>{const n=e||uT(t)?"margin":"padding",s=Us(t,"direction")==="rtl"?"-right":"-left";return n+s},g3=(e,t,n,s,o,r)=>{const i=Y_(n,x.fromDom(r)),a=mp(e.getStyle(r,i));if(t==="outdent"){const c=Math.max(0,a-s);e.setStyle(r,i,c?c+o:"")}else{const c=a+s+o;e.setStyle(r,i,c)}},h3=(e,t)=>ot(t,n=>{const s=Y_(IC(e),n),o=Tl(n,s).map(mp).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),X_=e=>{const t=Z_(e);return!e.mode.isReadOnly()&&(t.length>1||h3(e,t))},Q_=e=>xf(e)||ua(e),b3=e=>Hn(e).exists(Q_),Z_=e=>j(DA(e.selection.getSelectedBlocks()),t=>!Q_(t)&&!b3(t)&&p3(t)),J_=(e,t)=>{var n,s;const{dom:o}=e,r=D1(e),i=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",a=mp(r),c=IC(e);R(Z_(e),u=>{g3(o,t,c,a,i,u.dom)})},C3=e=>J_(e,"indent"),eS=e=>J_(e,"outdent"),tS=e=>{if(e.selection.isCollapsed()&&X_(e)){const t=e.dom,n=e.selection.getRng(),s=M.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Vd(x.fromDom(o),s))return b.some(()=>eS(e))}return b.none()},nS=(e,t,n)=>ro([tS,ep,Qm,(s,o)=>cp(s,t,o),Gm,rm,tp,dp,Ym,up],s=>s(e,n)),v3=(e,t)=>{nS(e,t,!1).fold(()=>{n0(e),Qd(e)},Zo)},y3=(e,t)=>{nS(e,t,!0).fold(()=>oF(e),Zo)},E3=(e,t)=>{e.addCommand("delete",()=>{v3(e,t)}),e.addCommand("forwardDelete",()=>{y3(e,t)})},sS=5,_3=400,oS=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),S3=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>sS||s>sS},w3=e=>{const t=Oo(),n=Vt(!1),s=Wf(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},_3);e.on("touchstart",o=>{oS(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),oS(o).each(r=>{t.on(i=>{S3(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},pp=(e,t)=>$e(e,t.nodeName),x3=(e,t)=>X(t)?!0:fe(t)?!pp(e,t)&&!Kn(t):!1,k3=(e,t,n)=>Y(Iy(x.fromDom(n),x.fromDom(t)),s=>pp(e,s.dom)),N3=(e,t)=>{if(X(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||pp(e,t.nextSibling)))return!0}return!1},rS=e=>e.dom.create(Dn(e),_a(e)),A3=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),i=e.getBody();let a,c,u=!1;const d=Dn(e);if(!r||!fe(r))return;const g=i.nodeName.toLowerCase();if(!s.isValidChild(g,d.toLowerCase())||k3(o,i,r))return;const p=n.getRng(),{startContainer:E,startOffset:_,endContainer:y,endOffset:S}=p,w=_r(e);let N=i.firstChild;for(;N;)if(x3(o,N)){if(N3(o,N)){c=N,N=N.nextSibling,t.remove(c);continue}a||(a=rS(e),i.insertBefore(a,N),u=!0),c=N,N=N.nextSibling,a.appendChild(c)}else a=null,N=N.nextSibling;u&&w&&(p.setStart(E,_),p.setEnd(y,S),n.setRng(p),e.nodeChanged())},iS=(e,t,n)=>{const s=x.fromDom(rS(e)),o=Nf();Wt(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},T3=e=>{e.on("NodeChange",ae(A3,e))},aS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,R3=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const a=t.lastIndexOf("<",r);if(a!==-1&&t.substring(a,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},P3=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],R3(e,o,zC(e)));n.content=o}},O3=e=>{const t="contenteditable",n=" "+Q.trim(wP(e))+" ",s=" "+Q.trim(zC(e))+" ",o=aS(n),r=aS(s),i=xP(e);i.length>0&&e.on("BeforeSetContent",a=>{P3(e,i,a)}),e.parser.addAttributeFilter("class",a=>{let c=a.length;for(;c--;){const u=a[c];o(u)?u.attr(t,"true"):r(u)&&u.attr(t,"false")}}),e.serializer.addAttributeFilter(t,a=>{let c=a.length;for(;c--;){const u=a[c];!o(u)&&!r(u)||(i.length>0&&u.attr("data-mce-content")?(u.name="#text",u.type=3,u.raw=!0,u.value=u.attr("data-mce-content")):u.attr(t,null))}})},D3=e=>ca(x.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),lS=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Rf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},B3=(e,t)=>{const n=D3(e);if(!!n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),lS(e,n);return}_b(n)&&(lS(e,n),e.undoManager.add())}},I3=e=>{e.on("keyup compositionstart",ae(B3,e))},cS=vt,F3=(e,t,n)=>U_(t,e,n,Mo,Uo,cS),L3=(e,t,n)=>z_(t,e,n,r=>Mo(r)||Dy(r),r=>Uo(r)||By(r),cS),$3=e=>{const t=e.dom.create(Dn(e));return t.innerHTML='<br data-mce-bogus="1">',t},uS=(e,t,n)=>{const s=qs(e.getBody()),o=ae(id,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(M.fromRangeStart(n))){const a=x.fromDom($3(e));t===1?ko(x.fromDom(r),a):Wn(x.fromDom(r),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},M3=(e,t)=>{const n=t?jt.Forwards:jt.Backwards,s=e.selection.getRng();return F3(n,e,s).orThunk(()=>(uS(e,n,s),b.none()))},U3=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return L3(n,e,s).orThunk(()=>(uS(e,n,s),b.none()))},fS=(e,t)=>M3(e,t).exists(n=>(bo(e,n),!0)),dS=(e,t)=>U3(e,t).exists(n=>(bo(e,n),!0)),mS=(e,t)=>H_(e,t,t?Uo:Mo),Yc=(e,t)=>Zm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(bo(e,n),!0)),z3=e=>z(["figcaption"],xt(e)),H3=(e,t)=>{const n=ae(rt,t);return Zr(x.fromDom(e.container()),ps,n).filter(z3)},W3=(e,t,n)=>t?F2(e.dom,n):I2(e.dom,n),V3=(e,t)=>{const n=x.fromDom(e.getBody()),s=M.fromRangeStart(e.selection.getRng());return H3(s,n).exists(()=>{if(W3(n,t,s)){const r=iS(e,n,t?Wt:tb);return e.selection.setRng(r),!0}else return!1})},pS=(e,t)=>e.selection.isCollapsed()?V3(e,t):!1,gS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},j3=e=>V(e,t=>({...gS,...t})),q3=e=>V(e,t=>({...gS,...t})),hS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,K3=(e,t)=>st(j3(e),n=>hS(n,t)?[n]:[]),G3=(e,t)=>st(q3(e),n=>hS(n,t)?[n]:[]),Ie=(e,...t)=>()=>e.apply(null,t),Qa=(e,t)=>ve(K3(e,t),n=>n.action()),bS=(e,t)=>ro(G3(e,t),n=>n.action()),CS=(e,t)=>{const n=t?jt.Forwards:jt.Backwards,s=e.selection.getRng();return U_(e,n,s,Fa,La,Hs).exists(o=>(bo(e,o),!0))},vS=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return z_(e,n,s,Fa,La,Hs).exists(o=>(bo(e,o),!0))},yS=(e,t)=>H_(e,t,t?La:Fa),ES=Ws.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Za={...ES,none:e=>ES.none(e)},Y3=(e,t)=>_S(e,t,Et),_S=(e,t,n)=>st(rn(e),s=>ds(s,t)?n(s)?[s]:[]:_S(s,t,n)),X3=(e,t,n=tt)=>{if(n(t))return b.none();if(z(e,xt(t)))return b.some(t);const s=o=>ds(o,"table")||n(o);return la(t,e.join(","),s)},Q3=(e,t)=>X3(["td","th"],e,t),Z3=e=>Y3(e,"th,td"),SS=(e,t)=>ar(e,"table",t),gp=(e,t,n,s,o=Et)=>{const r=s===1;if(!r&&n<=0)return Za.first(e[0]);if(r&&n>=e.length-1)return Za.last(e[e.length-1]);{const i=n+s,a=e[i];return o(a)?Za.middle(t,a):gp(e,t,i,s,o)}},wS=(e,t)=>SS(e,t).bind(n=>{const s=Z3(n);return Ue(s,r=>rt(e,r)).map(r=>({index:r,all:s}))}),J3=(e,t,n)=>wS(e,n).fold(()=>Za.none(e),o=>gp(o.all,e,o.index,1,t)),eW=(e,t,n)=>wS(e,n).fold(()=>Za.none(),o=>gp(o.all,e,o.index,-1,t)),tW=e=>ar(e,"[contenteditable]"),xS=(e,t=!1)=>Yr(e)?e.dom.isContentEditable:tW(e).fold(K(t),n=>nW(n)==="true"),nW=e=>e.dom.contentEditable,sW=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),oW=(e,t)=>st(t,n=>{const s=sW(gr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),rW=(e,t,n)=>_e(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(a<i?o:r)}),b.none()),kS=(e,t,n,s,o)=>{const r=Cn(x.fromDom(n),"td,th,caption").map(a=>a.dom),i=j(oW(e,r),a=>t(a,o));return rW(i,s,o).map(a=>a.cell)},iW=e=>e.bottom,aW=e=>e.top,lW=(e,t)=>e.y<t,cW=(e,t)=>e.y>t,uW=ae(kS,iW,lW),fW=ae(kS,aW,cW),dW=(e,t)=>nn(t.getClientRects()).bind(n=>uW(e,n.left,n.top)).bind(n=>qc($2(n),t)),mW=(e,t)=>Ht(t.getClientRects()).bind(n=>fW(e,n.left,n.top)).bind(n=>qc(L2(n),t)),pW=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),gW=e=>e.breakType===Js.Wrap&&e.positions.length===0,hW=e=>e.breakType===Js.Br&&e.positions.length===1,NS=(e,t,n)=>{const s=e(t,n);return gW(s)||!Ot(n.getNode())&&hW(s)?!pW(e,t,s):s.breakAt.isNone()},bW=ae(NS,Ga),CW=ae(NS,Ya),vW=(e,t,n)=>{const s=M.fromRangeStart(t);return fi(!e,n).exists(o=>o.isEqual(s))},yW=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return YC()&&vW(t,o,n)?(ho(r,e,n,!t,!1).each(i=>{bo(e,i)}),!0):!1},EW=(e,t,n)=>dW(t,n).orThunk(()=>nn(n.getClientRects()).bind(s=>rp(P_(e,M.before(t)),s.left))).getOr(M.before(t)),_W=(e,t,n)=>mW(t,n).orThunk(()=>nn(n.getClientRects()).bind(s=>rp(O_(e,M.after(t)),s.left))).getOr(M.after(t)),AS=(e,t)=>{const n=t.getNode(e);return uo(n)?b.some(n):b.none()},SW=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?ko:Wn,o=iS(t,x.fromDom(n),s);bo(t,o)})},TS=(e,t,n)=>{const s=AS(!!t,n),o=t===!1;s.fold(()=>bo(e,n.toRange()),r=>fi(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>bo(e,n.toRange()),i=>SW(t,e,r)))},wW=(e,t,n,s)=>{const o=e.selection.getRng(),r=M.fromRangeStart(o),i=e.getBody();if(!t&&bW(s,r)){const a=EW(i,n,r);return TS(e,t,a),!0}else if(t&&CW(s,r)){const a=_W(i,n,r);return TS(e,t,a),!0}else return!1},RS=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),PS=(e,t)=>RS(e,t,yW),OS=(e,t)=>RS(e,t,wW),xW=e=>{const t=bi.exact(e,0,e,0);return $D(t)},DS=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>qB(o).map(r=>xW(r)),s=>(e.execCommand("mceTableInsertRowAfter"),BS(e,t,s))),BS=(e,t,n)=>DS(e,t,J3(n,xS)),kW=(e,t,n)=>DS(e,t,eW(n,xS)),IS=(e,t)=>{const n=["table","li","dl"],s=x.fromDom(e.getBody()),o=a=>{const c=xt(a);return rt(a,s)||z(n,c)},r=e.selection.getRng(),i=x.fromDom(t?r.endContainer:r.startContainer);return Q3(i,o).map(a=>(SS(a,o).each(d=>{e.model.table.clearSelectedCells(d.dom)}),e.selection.collapse(!t),(t?BS:kW)(e,o,a).each(d=>{e.selection.setRng(d)}),!0)).getOr(!1)},NW=(e,t,n)=>{const s=Xe.os.isMacOS()||Xe.os.isiOS();Qa([{keyCode:pe.RIGHT,action:Ie(fS,e,!0)},{keyCode:pe.LEFT,action:Ie(fS,e,!1)},{keyCode:pe.UP,action:Ie(dS,e,!1)},{keyCode:pe.DOWN,action:Ie(dS,e,!0)},...s?[{keyCode:pe.UP,action:Ie(Yc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:pe.DOWN,action:Ie(Yc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:pe.RIGHT,action:Ie(PS,e,!0)},{keyCode:pe.LEFT,action:Ie(PS,e,!1)},{keyCode:pe.UP,action:Ie(OS,e,!1)},{keyCode:pe.DOWN,action:Ie(OS,e,!0)},{keyCode:pe.RIGHT,action:Ie(CS,e,!0)},{keyCode:pe.LEFT,action:Ie(CS,e,!1)},{keyCode:pe.UP,action:Ie(vS,e,!1)},{keyCode:pe.DOWN,action:Ie(vS,e,!0)},{keyCode:pe.RIGHT,action:Ie(j_,e,t,!0)},{keyCode:pe.LEFT,action:Ie(j_,e,t,!1)},{keyCode:pe.RIGHT,ctrlKey:!s,altKey:s,action:Ie(n3,e,t)},{keyCode:pe.LEFT,ctrlKey:!s,altKey:s,action:Ie(s3,e,t)},{keyCode:pe.UP,action:Ie(pS,e,!1)},{keyCode:pe.DOWN,action:Ie(pS,e,!0)}],n).each(o=>{n.preventDefault()})},AW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||NW(e,t,n)})},Es=(e,t)=>({container:e,offset:t}),Xc=ct.DOM,Qc=e=>t=>e===t?-1:0,TW=e=>t=>e.isBlock(t)||z(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",hp=(e,t,n)=>{if(X(e)&&t>=0)return b.some(Es(e,t));{const s=pr(Xc);return b.from(s.backwards(e,t,Qc(e),n)).map(o=>Es(o.container,o.container.data.length))}},RW=(e,t,n)=>{if(X(e)&&t>=e.length)return b.some(Es(e,t));{const s=pr(Xc);return b.from(s.forwards(e,t,Qc(e),n)).map(o=>Es(o.container,0))}},bp=(e,t,n)=>{if(!X(e))return b.none();const s=e.data;if(t>=0&&t<=s.length)return b.some(Es(e,t));{const o=pr(Xc);return b.from(o.backwards(e,t,Qc(e),n)).bind(r=>{const i=r.container.data;return bp(r.container,t+i.length,n)})}},FS=(e,t,n)=>{if(!X(e))return b.none();const s=e.data;if(t<=s.length)return b.some(Es(e,t));{const o=pr(Xc);return b.from(o.forwards(e,t,Qc(e),n)).bind(r=>FS(r.container,t-s.length,n))}},Cp=(e,t,n,s,o)=>{const r=pr(e,TW(e));return b.from(r.backwards(t,n,s,o))},PW=e=>e.collapsed&&X(e.startContainer),LS=e=>fo(e.toString().replace(/\u00A0/g," ")),$S=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,vp=(e,t)=>e.substring(t.length),OW=(e,t,n)=>{let s;const o=n.charAt(0);for(s=t-1;s>=0;s--){const r=e.charAt(s);if($S(r))return b.none();if(o===r&&sn(e,n,s,t))break}return b.some(s)},DW=(e,t,n,s=0)=>{if(!PW(t))return b.none();const o={text:"",offset:0},r=(a,c,u)=>(o.text=u+o.text,o.offset+=c,OW(o.text,o.offset,n).getOr(c)),i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Cp(e,t.startContainer,t.startOffset,r,i).bind(a=>{const c=t.cloneRange();if(c.setStart(a.container,a.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return b.none();const u=LS(c);return u.lastIndexOf(n)!==0||vp(u,n).length<s?b.none():b.some({text:vp(u,n),range:c,trigger:n})})},MS=(e,t,n,s=0)=>XB(x.fromDom(t.startContainer)).fold(()=>DW(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const i=LS(r);return b.some({range:r,text:vp(i,n),trigger:n})}),BW=e=>e.nodeType===Dh,IW=e=>e.nodeType===Ji,US=e=>{if(BW(e))return Es(e,e.data.length);{const t=e.childNodes;return t.length>0?US(t[t.length-1]):Es(e,t.length)}},zS=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?zS(n[t],0):n.length>0&&IW(e)&&n.length===t?US(n[n.length-1]):Es(e,t)},FW=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return Cp(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!$S(r)}).isSome()},LW=e=>t=>{const n=zS(t.startContainer,t.startOffset);return!FW(e,n)},$W=(e,t,n)=>ro(n.triggers,s=>MS(e,t,s)),MW=(e,t)=>{const n=t(),s=e.selection.getRng();return $W(e.dom,s,n).bind(o=>HS(e,t,o))},HS=(e,t,n,s={})=>{var o;const r=t(),a=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",c=j(r.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>LW(e.dom))(n.range,a,n.text));if(c.length===0)return b.none();const u=Promise.all(V(c,d=>d.fetch(n.text,d.maxResults,s).then(p=>({matchText:n.text,items:p,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return b.some({lookupData:u,context:n})};var _s;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(_s||(_s={}));const yp=(e,t,n)=>e.stype===_s.Error?t(e.serror):n(e.svalue),UW=e=>{const t=[],n=[];return R(e,s=>{yp(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},zW=(e,t)=>e.stype===_s.Error?{stype:_s.Error,serror:t(e.serror)}:e,HW=(e,t)=>e.stype===_s.Value?{stype:_s.Value,svalue:t(e.svalue)}:e,WW=(e,t)=>e.stype===_s.Value?t(e.svalue):e,VW=(e,t)=>e.stype===_s.Error?t(e.serror):e,WS=e=>({stype:_s.Value,svalue:e}),VS=e=>({stype:_s.Error,serror:e}),Xt={fromResult:e=>e.fold(VS,WS),toResult:e=>yp(e,vn.error,vn.value),svalue:WS,partition:UW,serror:VS,bind:WW,bindError:VW,map:HW,mapError:zW,fold:yp},Ep=e=>Ge(e)&&Un(e).length>100?" removed due to size":JSON.stringify(e,null,2),jW=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):e;return V(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Zc=(e,t)=>Xt.serror([{path:e,getErrorInfo:t}]),qW=(e,t,n)=>Zc(e,()=>'Could not find valid *required* value for "'+t+'" in '+Ep(n)),KW=(e,t)=>Zc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),GW=(e,t,n)=>Zc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Ep(t)),YW=(e,t)=>Zc(e,K(t)),XW=(e,t,n,s)=>ht(n,s).fold(()=>GW(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),QW=(e,t)=>({extract:(o,r)=>ht(r,e).fold(()=>KW(o,e),a=>XW(o,r,t,a)),toString:()=>"chooseOn("+e+"). Possible values: "+Un(t)}),ZW=(e,t)=>t,JW=(e,t)=>Zt(e)&&Zt(t)?Jc(e,t):t,jS=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)$e(o,r)&&(n[r]=e(n[r],o[r]))}return n},Jc=jS(JW),eV=jS(ZW),qS=()=>({tag:"required",process:{}}),tV=e=>({tag:"defaultedThunk",process:e}),KS=e=>tV(K(e)),nV=()=>({tag:"option",process:{}}),sV=(e,t)=>e.length>0?Xt.svalue(Jc(t,eV.apply(void 0,e))):Xt.svalue(t),GS=e=>Lt(Xt.serror,Ye)(e),oV={consolidateObj:(e,t)=>{const n=Xt.partition(e);return n.errors.length>0?GS(n.errors):sV(n.values,t)},consolidateArr:e=>{const t=Xt.partition(e);return t.errors.length>0?GS(t.errors):Xt.svalue(t.values)}},rV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),iV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),YS=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},_p=e=>{const t=(s,o)=>Xt.bindError(e(o),r=>YW(s,r)),n=K("val");return{extract:t,toString:n}},aV=_p(Xt.svalue),lV=(e,t,n,s)=>ht(t,n).fold(()=>qW(e,n,t),s),XS=(e,t,n,s)=>{const o=ht(e,t).getOrThunk(()=>n(e));return s(o)},cV=(e,t,n)=>n(ht(e,t)),uV=(e,t,n,s)=>{const o=ht(e,t).map(r=>r===!0?n(e):r);return s(o)},fV=(e,t,n,s,o)=>{const r=a=>o.extract(t.concat([s]),a),i=a=>a.fold(()=>Xt.svalue(b.none()),c=>{const u=o.extract(t.concat([s]),c);return Xt.map(u,b.some)});switch(e.tag){case"required":return lV(t,n,s,r);case"defaultedThunk":return XS(n,s,e.process,r);case"option":return cV(n,s,i);case"defaultedOptionThunk":return uV(n,s,e.process,i);case"mergeWithThunk":return XS(n,s,K({}),a=>{const c=Jc(e.process(n),a);return r(c)})}},dV=(e,t,n)=>{const s={},o=[];for(const r of n)YS(r,(i,a,c,u)=>{const d=fV(c,e,t,i,u);Xt.fold(d,g=>{o.push(...g)},g=>{s[a]=g})},(i,a)=>{s[i]=a(t)});return o.length>0?Xt.serror(o):Xt.svalue(s)},Sp=e=>({extract:(s,o)=>dV(s,o,e),toString:()=>`obj{
`+V(e,o=>YS(o,(r,i,a,c)=>r+" -> "+c.toString(),(r,i)=>"state("+r+")")).join(`
`)+"}"}),QS=e=>({extract:(s,o)=>{const r=V(o,(i,a)=>e.extract(s.concat(["["+a+"]"]),i));return oV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),mV=e=>_p(t=>e(t).fold(Xt.serror,Xt.svalue)),pV=(e,t,n)=>{const s=t.extract([e],n);return Xt.mapError(s,o=>({input:n,errors:o}))},gV=(e,t,n)=>Xt.toResult(pV(e,t,n)),hV=e=>`Errors: 
`+jW(e.errors).join(`
`)+`

Input object: `+Ep(e.input),ZS=(e,t)=>QW(e,yl(t,Sp)),bV=K(aV),eu=(e,t)=>_p(n=>{const s=typeof n;return e(n)?Xt.svalue(n):Xt.serror(`Expected type: ${t} but got: ${s}`)}),CV=eu(zt,"number"),tu=eu(ne,"string"),vV=eu(je,"boolean"),wp=eu(He,"function"),Ja=rV,JS=iV,yV=e=>mV(t=>z(e,t)?vn.value(t):vn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),ew=(e,t)=>Ja(e,e,qS(),t),tw=e=>ew(e,tu),nw=e=>ew(e,wp),EV=(e,t)=>Ja(e,e,qS(),QS(t)),xp=(e,t)=>Ja(e,e,nV(),t),nu=e=>xp(e,tu),_V=e=>xp(e,wp),SV=(e,t)=>Ja(e,e,KS(t),bV()),Ni=(e,t,n)=>Ja(e,e,KS(t),n),sw=(e,t)=>Ni(e,t,CV),wV=(e,t)=>Ni(e,t,tu),ow=(e,t,n)=>Ni(e,t,yV(n)),kp=(e,t)=>Ni(e,t,vV),Np=(e,t)=>Ni(e,t,wp),xV=(e,t,n)=>Ni(e,t,QS(n)),kV=tw("type"),NV=nw("fetch"),Ap=nw("onAction"),AV=Np("onSetup",()=>Me),TV=nu("text"),RV=nu("icon"),PV=nu("tooltip"),OV=nu("label"),DV=kp("active",!1),BV=kp("enabled",!0),rw=kp("primary",!1),IV=e=>SV("columns",e),el=e=>wV("type",e),FV=Sp([kV,tw("trigger"),sw("minChars",1),IV(1),sw("maxResults",10),_V("matches"),NV,Ap,xV("highlightOn",[],tu)]),LV=e=>gV("Autocompleter",FV,{trigger:e.ch,...e}),Tp=[BV,PV,RV,TV,AV],iw=[DV].concat(Tp),$V=[Np("predicate",tt),ow("scope","node",["node","editor"]),ow("position","selection",["node","selection","line"])],MV=Tp.concat([el("contextformbutton"),rw,Ap,JS("original",Pt)]),UV=iw.concat([el("contextformbutton"),rw,Ap,JS("original",Pt)]),zV=Tp.concat([el("contextformbutton")]),HV=iw.concat([el("contextformtogglebutton")]),WV=ZS("type",{contextformbutton:MV,contextformtogglebutton:UV});Sp([el("contextform"),Np("initValue",K("")),OV,EV("commands",WV),xp("launch",ZS("type",{contextformbutton:zV,contextformtogglebutton:HV}))].concat($V));const VV=e=>{const t=e.ui.registry.getAll().popups,n=yl(t,i=>LV(i).fold(a=>{throw new Error(hV(a))},Pt)),s=th(of(n,i=>i.trigger)),o=rf(n);return{dataset:n,triggers:s,lookupByTrigger:i=>j(o,a=>a.trigger===i)}},jV=(e,t)=>{const n=Wf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},qV=e=>{const t=Oo(),n=Vt(!1),s=t.isSet,o=()=>{s()&&(QU(e),uD(e),n.set(!1),t.clear())},r=u=>{s()||(XU(e,u.range),t.set({trigger:u.trigger,matchLength:u.text.length}))},i=er(()=>VV(e)),a=u=>t.get().map(d=>MS(e.dom,e.selection.getRng(),d.trigger).bind(g=>HS(e,i,g,u))).getOrThunk(()=>MW(e,i)),c=u=>{a(u).fold(o,d=>{r(d.context),d.lookupData.then(g=>{t.get().map(p=>{const E=d.context;p.trigger===E.trigger&&(E.text.length-p.matchLength>=10?o():(t.set({...p,matchLength:E.text.length}),n.get()?cD(e,{lookupData:g}):(n.set(!0),lD(e,{lookupData:g}))))})})})};e.addCommand("mceAutocompleterReload",(u,d)=>{const g=Ge(d)?d.fetchOptions:{};c(g)}),e.addCommand("mceAutocompleterClose",o),jV(e,{cancelIfNecessary:o,load:c})},aw=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Me,inputType:n},i=Lb(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},Rp=aw("input"),Pp=aw("beforeinput"),KV=(e,t,n)=>{const s=n.keyCode===pe.BACKSPACE?"deleteContentBackward":"deleteContentForward";bS([{keyCode:pe.BACKSPACE,action:Ie(tS,e)},{keyCode:pe.BACKSPACE,action:Ie(ep,e,!1)},{keyCode:pe.DELETE,action:Ie(ep,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(Qm,e,!1)},{keyCode:pe.DELETE,action:Ie(Qm,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(cp,e,t,!1)},{keyCode:pe.DELETE,action:Ie(cp,e,t,!0)},{keyCode:pe.BACKSPACE,action:Ie(rm,e,!1)},{keyCode:pe.DELETE,action:Ie(rm,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(tp,e,!1)},{keyCode:pe.DELETE,action:Ie(tp,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(dp,e,!1)},{keyCode:pe.DELETE,action:Ie(dp,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(Ym,e,!1)},{keyCode:pe.DELETE,action:Ie(Ym,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(Gm,e,!1)},{keyCode:pe.DELETE,action:Ie(Gm,e,!0)},{keyCode:pe.BACKSPACE,action:Ie(up,e,!1)},{keyCode:pe.DELETE,action:Ie(up,e,!0)}],n).each(o=>{n.preventDefault(),Pp(e,s).isDefaultPrevented()||(o(),Rp(e,s))})},GV=(e,t)=>{Qa([{keyCode:pe.BACKSPACE,action:Ie(b_,e)},{keyCode:pe.DELETE,action:Ie(b_,e)}],t)},YV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||KV(e,t,n)}),e.on("keyup",n=>{n.isDefaultPrevented()||GV(e,n)})},XV=e=>{for(;e;){if(fe(e)||X(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},tl=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=XV(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Gt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new $t(t,t);let i=t,a;for(;a=r.current();){if(X(a)){o.setStart(a,0),o.setEnd(a,0);break}if(s[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=r.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Ot(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Ia(e,o)},su=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";)e.getContentEditable(o)==="true"&&(s=o),o=o.parentNode;return o!==n?s:n},Op=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),QV=e=>Op(e).fold(K(""),t=>t.nodeName.toUpperCase()),ZV=e=>Op(e).filter(t=>ua(x.fromDom(t))).isSome(),JV=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,e6=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},lw=(e,t)=>{const n=e==null?void 0:e.parentNode;return oe(n)&&n.nodeName===t},cw=e=>oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),t6=e=>oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),n6=e=>cw(e)&&cw(e.parentNode),ou=e=>{const t=e.parentNode;return t6(t)?t:e},ru=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!fe(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},s6=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng(),a=n.parentNode;if(n===e.getBody()||!a)return;n6(n)&&(o="LI");let c=t(o);if(ru(n,s,!0)&&ru(n,s,!1))if(lw(n,"LI")){const u=ou(n);r.insertAfter(c,u),e6(n)?r.remove(u):r.remove(n)}else r.replace(c,n);else if(ru(n,s,!0))lw(n,"LI")?(r.insertAfter(c,ou(n)),c.appendChild(r.doc.createTextNode(" ")),c.appendChild(n)):a.insertBefore(c,n),r.remove(s);else if(ru(n,s,!1))r.insertAfter(c,ou(n)),r.remove(s);else{n=ou(n);const u=i.cloneRange();u.setStartAfter(s),u.setEndAfter(n);const d=u.extractContents();o==="LI"&&JV(d,"LI")?(c=d.firstChild,r.insertAfter(d,n)):(r.insertAfter(d,n),r.insertAfter(c,n)),r.remove(s)}tl(e,c)},o6=e=>{R(vb(x.fromDom(e),zn),t=>{const n=t.dom;n.nodeValue=fo(n.data)})},r6=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},i6=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),Dp=e=>{e.innerHTML='<br data-mce-bogus="1">'},Bp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,uw=(e,t)=>oe(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true",a6=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;fe(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let i=o.length;for(;i--;)r=o[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||i6(e,r))&&e.remove(r)},Ip=(e,t,n)=>X(t)?e?n===1&&t.data.charAt(n-1)===en?0:n:n===t.data.length-1&&t.data.charAt(n)===en?t.data.length:n:n,l6=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Ip(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Ip(!1,e.endContainer,e.endOffset)),t},c6=e=>{let t=e;do X(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},u6=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(c=>{const d={...Jh(x.fromDom(t)),...c};s.setStyles(t,d)});const o=b.from(n.class).map(c=>c.split(/\s+/)),r=b.from(t.className).map(c=>j(c.split(/\s+/),u=>u!==""));bn(o,r,(c,u)=>{const d=j(u,p=>!z(c,p)),g=[...c,...d];s.setAttrib(t,"class",g.join(" "))});const i=["style","class"],a=Gi(n,(c,u)=>!z(i,u));s.setAttribs(t,a)},nl=(e,t)=>{if(Dn(e).toLowerCase()===t.tagName.toLowerCase()){const s=_a(e);u6(e,t,s)}},f6=(e,t,n,s,o)=>{var r;const i=e.dom,a=(r=su(i,s))!==null&&r!==void 0?r:i.getRoot();let c=i.getParent(s,i.isBlock);if(!c||!uw(i,c)){c=c||a;let u;if(c===e.getBody()||fb(c)?u=c.nodeName.toLowerCase():c.parentNode?u=c.parentNode.nodeName.toLowerCase():u="",!c.hasChildNodes()){const p=i.create(t);return nl(e,p),c.appendChild(p),n.setStart(p,0),n.setEnd(p,0),p}let d=s;for(;d&&d.parentNode!==c;)d=d.parentNode;let g;for(;d&&!i.isBlock(d);)g=d,d=d.previousSibling;if(g&&e.schema.isValidChild(u,t.toLowerCase())){const p=g.parentNode,E=i.create(t);for(nl(e,E),p.insertBefore(E,g),d=g;d&&!i.isBlock(d);){const _=d.nextSibling;E.appendChild(d),d=_}n.setStart(s,o),n.setEnd(s,o)}}return s},d6=(e,t)=>{t.normalize();const n=t.lastChild;(!n||fe(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},m6=(e,t)=>{const n=w1(e);return Ve(t)?!1:ne(n)?z(Q.explode(n),t.nodeName.toLowerCase()):n},fw={insert:(e,t)=>{let n,s,o,r,i=!1;const a=e.dom,c=e.schema,u=c.getNonEmptyElements(),d=e.selection.getRng(),g=Dn(e),p=ee=>{let W=n;const F=c.getTextInlineElements();let L;ee||o==="TABLE"||o==="HR"?L=a.create(ee||g):L=N.cloneNode(!1);let te=L;if(S1(e)===!1)a.setAttrib(L,"style",null),a.setAttrib(L,"class",null);else do if(F[W.nodeName]){if(bs(W)||Kn(W))continue;const me=W.cloneNode(!1);a.setAttrib(me,"id",""),L.hasChildNodes()?(me.appendChild(L.firstChild),L.appendChild(me)):(te=me,L.appendChild(me))}while((W=W.parentNode)&&W!==w);return nl(e,L),Dp(te),L},E=ee=>{const W=Ip(ee,n,s);if(X(n)&&(ee?W>0:W<n.data.length))return!1;if(n.parentNode===N&&i&&!ee||ee&&fe(n)&&n===N.firstChild)return!0;if(Bp(n,"TABLE")||Bp(n,"HR"))return i&&!ee||!i&&ee;const F=new $t(n,N);X(n)&&(ee&&W===0?F.prev():!ee&&W===n.data.length&&F.next());let L;for(;L=F.current();){if(fe(L)){if(!L.getAttribute("data-mce-bogus")){const te=L.nodeName.toLowerCase();if(u[te]&&te!=="br")return!1}}else if(X(L)&&!ur(L.data))return!1;ee?F.prev():F.next()}return!0},_=()=>{let ee;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&A!=="HGROUP"?ee=p(g):ee=p(),m6(e,r)&&uw(a,r)&&a.isEmpty(N)?ee=a.split(r,N):a.insertAfter(ee,N),tl(e,ee),ee};gc(a,d).each(ee=>{d.setStart(ee.startContainer,ee.startOffset),d.setEnd(ee.endContainer,ee.endOffset)}),n=d.startContainer,s=d.startOffset;const y=!!(t&&t.shiftKey),S=!!(t&&t.ctrlKey);fe(n)&&n.hasChildNodes()&&(i=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,i&&X(n)?s=n.data.length:s=0);const w=su(a,n);if(!w||r6(e,n))return;y||(n=f6(e,g,d,n,s));let N=a.getParent(n,a.isBlock)||a.getRoot();r=oe(N==null?void 0:N.parentNode)?a.getParent(N.parentNode,a.isBlock):null,o=N?N.nodeName.toUpperCase():"";const A=r?r.nodeName.toUpperCase():"";if(A==="LI"&&!S){const ee=r;N=ee,r=ee.parentNode,o=A}if(/^(LI|DT|DD)$/.test(o)&&fe(r)&&a.isEmpty(N)){s6(e,p,r,N,g);return}if(N===e.getBody())return;const U=N.parentNode;let H;if(ti(N))H=Rf(N),a.isEmpty(N)&&Dp(N),nl(e,H),tl(e,H);else if(E(!1))H=_();else if(E(!0)&&U)H=U.insertBefore(p(),N),tl(e,Bp(N,"HR")?H:N);else{const ee=l6(d).cloneRange();ee.setEndAfter(N);const W=ee.extractContents();o6(W),c6(W),H=W.firstChild,a.insertAfter(W,N),a6(a,u,H),d6(a,N),a.isEmpty(N)&&Dp(N),H.normalize(),a.isEmpty(H)?(a.remove(H),_()):(nl(e,H),tl(e,H))}a.setAttrib(H,"id",""),e.dispatch("NewBlock",{newBlock:H})},fakeEventName:"insertParagraph"},p6=(e,t,n)=>{const s=new $t(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||X(o)&&o.length>0)return!0;return!1},dw=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Ia(e,s)},g6=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i=!1;gc(s,o).each(E=>{o.setStart(E.startContainer,E.startOffset),o.setEnd(E.endContainer,E.endOffset)});let a=o.startOffset,c=o.startContainer;if(fe(c)&&c.hasChildNodes()){const E=a>c.childNodes.length-1;c=c.childNodes[Math.min(a,c.childNodes.length-1)]||c,E&&X(c)?a=c.data.length:a=0}let u=s.getParent(c,s.isBlock);const d=u&&u.parentNode?s.getParent(u.parentNode,s.isBlock):null,g=d?d.nodeName.toUpperCase():"",p=!!(t&&t.ctrlKey);g==="LI"&&!p&&(u=d),X(c)&&a>=c.data.length&&(p6(e.schema,c,u||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Gf(s,o,r),dw(e,r,i),e.undoManager.add()},h6=(e,t)=>{const n=x.fromTag("br");Wn(x.fromDom(t),n),e.undoManager.add()},b6=(e,t)=>{v6(e.getBody(),t)||ko(x.fromDom(t),x.fromTag("br"));const n=x.fromTag("br");ko(x.fromDom(t),n),dw(e,n.dom,!1),e.undoManager.add()},C6=e=>Ot(e.getNode()),v6=(e,t)=>C6(M.after(t))?!0:An(e,M.after(t)).map(n=>Ot(n.getNode())).getOr(!1),mw=e=>e&&e.nodeName==="A"&&"href"in e,y6=e=>e.fold(tt,mw,mw,tt),E6=e=>{const t=ae(wr,e),n=M.fromRangeStart(e.selection.getRng());return Zs(t,e.getBody(),n).filter(y6)},_6=(e,t)=>{t.fold(Me,ae(h6,e),ae(b6,e),Me)},pw={insert:(e,t)=>{const n=E6(e);n.isSome()?n.each(ae(_6,e)):g6(e,t)},fakeEventName:"insertLineBreak"},gw=(e,t)=>Op(e).filter(n=>t.length>0&&ds(x.fromDom(n),t)).isSome(),S6=e=>gw(e,E1(e)),w6=e=>gw(e,_1(e)),Zn=Ws.generate([{br:[]},{block:[]},{none:[]}]),x6=(e,t)=>w6(e),hw=e=>(t,n)=>ZV(t)===e,bw=(e,t)=>(n,s)=>QV(n)===e.toUpperCase()===t,k6=e=>{const t=su(e.dom,e.selection.getStart());return Ve(t)},sl=e=>bw("pre",e),N6=()=>bw("summary",!0),iu=e=>(t,n)=>v1(t)===e,A6=(e,t)=>S6(e),au=(e,t)=>t,T6=e=>{const t=Dn(e),n=su(e.dom,e.selection.getStart());return oe(n)&&e.schema.isValidChild(n.nodeName,t)},is=(e,t)=>(n,s)=>_e(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),R6=(e,t)=>S_([is([x6],Zn.none()),is([sl(!0),k6],Zn.none()),is([N6()],Zn.br()),is([sl(!0),iu(!1),au],Zn.br()),is([sl(!0),iu(!1)],Zn.block()),is([sl(!0),iu(!0),au],Zn.block()),is([sl(!0),iu(!0)],Zn.br()),is([hw(!0),au],Zn.br()),is([hw(!0)],Zn.block()),is([A6],Zn.br()),is([au],Zn.br()),is([T6],Zn.block())],[e,!!(t&&t.shiftKey)]).getOr(Zn.none()),lu=(e,t,n)=>{t.selection.isCollapsed()||sF(t),!(oe(n)&&Pp(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),oe(n)&&Rp(t,e.fakeEventName))},Cw=(e,t)=>{const n=()=>lu(pw,e,t),s=()=>lu(fw,e,t),o=R6(e,t);switch(y1(e)){case"linebreak":o.fold(n,n,Me);break;case"block":o.fold(s,s,Me);break;case"invert":o.fold(s,n,Me);break;default:o.fold(n,s,Me);break}},P6=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),lU(e.undoManager),e.undoManager.transact(()=>{Cw(e,t)}))},O6=e=>{e.on("keydown",t=>{t.keyCode===pe.ENTER&&P6(e,t)})},D6=(e,t,n)=>{const s=Xe.os.isMacOS()||Xe.os.isiOS();Qa([{keyCode:pe.END,action:Ie(mS,e,!0)},{keyCode:pe.HOME,action:Ie(mS,e,!1)},...s?[]:[{keyCode:pe.HOME,action:Ie(Yc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:pe.END,action:Ie(Yc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:pe.END,action:Ie(yS,e,!0)},{keyCode:pe.HOME,action:Ie(yS,e,!1)},{keyCode:pe.END,action:Ie(Gc,e,!0,t)},{keyCode:pe.HOME,action:Ie(Gc,e,!1,t)}],n).each(o=>{n.preventDefault()})},B6=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||D6(e,t,n)})},I6=e=>{e.on("input",t=>{t.isComposing||II(e)})},F6=tr(),L6=(e,t,n)=>{Qa([{keyCode:pe.PAGE_UP,action:Ie(Gc,e,!1,t)},{keyCode:pe.PAGE_DOWN,action:Ie(Gc,e,!0,t)}],n)},vw=e=>e.stopImmediatePropagation(),yw=e=>e.keyCode===pe.PAGE_UP||e.keyCode===pe.PAGE_DOWN,Ew=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",vw,!0):!n&&e.get()&&t.off("NodeChange",vw),e.set(n)},$6=(e,t)=>{if(F6.os.isMacOS())return;const n=Vt(!1);e.on("keydown",s=>{yw(s)&&Ew(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||L6(e,t,s),yw(s)&&n.get()&&(Ew(n,e,!1),e.nodeChanged())})},_w=(e,t)=>{const n=t.container(),s=t.offset();return X(n)?(n.insertData(s,e),b.some(M(n,s+e.length))):tc(t).map(o=>{const r=x.fromText(e);return t.isAtEnd()?ko(o,r):Wn(o,r),M(r.dom,e.length)})},M6=ae(_w,Gt),U6=ae(_w," "),z6=e=>t=>t.fold(n=>qn(e.dom,M.before(n)),n=>yn(n),n=>Ks(n),n=>An(e.dom,M.after(n))),H6=(e,t)=>n=>TI(e,n)?M6(t):U6(t),W6=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),V6=e=>{const t=M.fromRangeStart(e.selection.getRng()),n=x.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=ae(wr,e),o=M.fromRangeStart(e.selection.getRng());return Zs(s,e.getBody(),o).bind(z6(n)).map(r=>()=>H6(n,t)(r).each(W6(e)))}else return b.none()},j6=(e,t)=>{bS([{keyCode:pe.SPACEBAR,action:Ie(V6,e)}],t).each(n=>{t.preventDefault(),Pp(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Rp(e,"insertText",{data:" "}))})},q6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||j6(e,t)})},K6=e=>PP(e)?[{keyCode:pe.TAB,action:Ie(IS,e,!0)},{keyCode:pe.TAB,shiftKey:!0,action:Ie(IS,e,!1)}]:[],G6=(e,t)=>{Qa([...K6(e)],t).each(n=>{t.preventDefault()})},Y6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||G6(e,t)})},X6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),qV(e),Qs(e))return Vt(null);{const t=t3(e);return I3(e),AW(e,t),YV(e,t),O6(e),q6(e),I6(e),Y6(e),B6(e,t),$6(e,t),t}};class Q6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!Td(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);!o||lc(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&lc(t)&&(t.selection.getNode().nodeName==="IMG"?Yn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!J1(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,i=>i===o?!0:(r.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=Nt(s.dom.getParents(t,Et,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Sw="x-tinymce/html",cu=K(Sw),Fp="<!-- "+Sw+" -->",Z6=e=>Fp+e,J6=e=>e.replace(Fp,""),ww=e=>e.indexOf(Fp)!==-1,ej=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),tj=(e,t)=>{let n="<"+e;const s=of(t,(o,r)=>r+'="'+Ro.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},nj=(e,t,n)=>{const s=e.split(/\n\n/),o=tj(t,n),r="</"+t+">",i=V(s,c=>c.split(/\n/).join("<br />")),a=c=>o+c+r;return i.length===1?i[0]:V(i,a).join("")},xw="%MCEPASTEBIN%",sj=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},xw);Xe.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},oj=(e,t)=>{const n=e.dom;if(Lp(e)){let s;const o=t.get();for(;s=Lp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Lp=e=>e.dom.get("mcepastebin"),rj=e=>oe(e)&&e.id==="mcepastebin",ij=e=>{const t=e.dom,n=(i,a)=>{i.appendChild(a),t.remove(a,!0)},[s,...o]=j(e.getBody().childNodes,rj);R(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const a=t.create("div");s.insertBefore(a,r[i]),n(a,r[i])}return s?s.innerHTML:""},kw=e=>e===xw,aj=e=>{const t=Vt(null);return{create:()=>sj(e,t),remove:()=>oj(e,t),getEl:()=>Lp(e),getHtml:()=>ij(e),getLastRng:t.get}},Nw=(e,t)=>(Q.each(t,n=>{cn(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),lj=e=>{const t=Po(),n=_i({},t);let s="";const o=t.getVoidElements(),r=Q.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),a=c=>{const u=c.name,d=c;if(u==="br"){s+=`
`;return}if(u!=="wbr"){if(o[u]&&(s+=" "),r[u]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())){let g=c.firstChild;if(g)do a(g);while(g=g.next)}i[u]&&d.next&&(s+=`
`,u==="p"&&(s+=`
`))}};return e=Nw(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),s},Aw=e=>(e=Nw(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Gt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),cj=e=>{let t=0;return()=>e+t++},uj=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(n,t)?"image/"+n[t]:"image/"+t},fj=(e,t)=>{const n=_i({},e.schema);n.addNodeFilter("meta",o=>{Q.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Lo({validate:!0},e.schema).serialize(s)},Tw=(e,t)=>({content:e,cancelled:t}),dj=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=dD(e,s,n);return Tw(o.node.innerHTML,o.isDefaultPrevented())},mj=(e,t,n)=>{const s=fD(e,t,n),o=fj(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?dj(e,o,n):Tw(o,s.isDefaultPrevented())},pj=(e,t,n)=>mj(e,t,n),$p=(e,t)=>(e.insertContent(t,{merge:bP(e),paste:!0}),!0),Mp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),gj=(e,t)=>Mp(t)&&Y(HC(e),n=>ah(t.toLowerCase(),`.${n.toLowerCase()}`)),hj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),bj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),Cj=(e,t,n)=>!e.selection.isCollapsed()&&Mp(t)?bj(e,t,n):!1,vj=(e,t,n)=>gj(e,t)?hj(e,t,n):!1,yj=(e,t)=>{Q.each([Cj,vj,$p],n=>!n(e,t,$p))},Ej=(e,t,n)=>{n||!CP(e)?$p(e,t):yj(e,t)},_j=cj("mceclip"),Rw=(e,t,n,s)=>{const o=pj(e,t,n);o.cancelled||Ej(e,o.content,s)},uu=(e,t,n)=>{const s=n||ww(t);Rw(e,J6(t),s,!1)},Up=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=Ab(n,yP(e)),o=nj(s,Dn(e),_a(e));Rw(e,o,!1,!0)},Pw=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Ai=(e,t)=>t in e&&e[t].length>0,Ow=e=>Ai(e,"text/html")||Ai(e,"text/plain"),Sj=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return oe(n)?e.dom.encode(n[1]):void 0},wj=(e,t,n,s)=>{const o=_j(),r=OC(e)&&oe(n.name),i=r?Sj(e,n.name):o,a=r?n.name:void 0,c=t.create(o,n,s,i,a);return t.add(c),c},xj=(e,t)=>{Bm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,a=e.editorUpload.blobCache,c=a.getByData(r,s),u=c!=null?c:wj(e,a,i,r);uu(e,`<img src="${u.blobUri()}">`,!1)})},kj=e=>e.type==="paste",Nj=e=>Promise.all(V(e,t=>dE(t).then(n=>({file:t,uri:n})))),Aj=e=>{const t=HC(e);return n=>Jt(n.type,"image/")&&Y(t,s=>uj(s)===n.type)},Tj=(e,t)=>{const n=t.items?st(wt(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?wt(t.files):[];return j(n.length>0?n:s,Aj(e))},Dw=(e,t,n)=>{const s=kj(t)?t.clipboardData:t.dataTransfer;if(Jl(e)&&s){const o=Tj(e,s);if(o.length>0)return t.preventDefault(),Nj(o).then(r=>{n&&e.selection.setRng(n),R(r,i=>{xj(e,i)})}),!0}return!1},Rj=e=>{var t,n;return Xe.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},Pj=e=>pe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Bw=(e,t,n,s)=>{let o=Aw(n);const r=Ai(t,cu())||ww(n),i=!r&&ej(o),a=Mp(o);(kw(o)||!o.length||i&&!a)&&(s=!0),(s||a)&&(Ai(t,"text/plain")&&i?o=t["text/plain"]:o=lj(o)),!kw(o)&&(s?Up(e,o):uu(e,o,r))},Oj=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{Pj(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||Rj(r))return;const i=n.get()==="text"||s;s=!1;const a=Pw(r.clipboardData);!Ow(a)&&Dw(e,r,o())||(Ai(a,"text/html")?(r.preventDefault(),Bw(e,a,a["text/html"],i)):(t.create(),Yn.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),Bw(e,a,c,i)},0)))})},Dj=e=>{const t=o=>Jt(o,"webkit-fake-url"),n=o=>Jt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!Jl(e)&&s(i))for(const a of o){const c=a.attr("src");ne(c)&&!a.attr("data-mce-object")&&c!==Xe.transparentSrc&&(t(c)||!EP(e)&&n(c))&&a.remove()}})},Bj=(e,t,n)=>{Oj(e,t,n),Dj(e)},Ij=(e,t)=>{t.get()==="text"?(t.set("html"),Wv(e,!1)):(t.set("text"),Wv(e,!0)),e.focus()},Fj=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Ij(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&uu(e,s.html,s.internal),s.text&&Up(e,s.text)})},Lj=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(cu(),t),!0}catch{return!1}else return!1},Iw=(e,t,n,s)=>{Lj(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},Fw=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const a=o.getRng();i.focus();const c=s.createRng();c.selectNodeContents(i),o.setRng(c),Yn.setEditorTimeout(e,()=>{o.setRng(a),s.remove(r),n()},0)},Lw=e=>({html:Z6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),$j=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),$w=e=>!e.selection.isCollapsed()||$j(e),Mj=e=>t=>{!t.isDefaultPrevented()&&$w(e)&&Iw(t,Lw(e),Fw(e),()=>{if(Xe.browser.isChromium()||Xe.browser.isFirefox()){const n=e.selection.getRng();Yn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},Uj=e=>t=>{!t.isDefaultPrevented()&&$w(e)&&Iw(t,Lw(e),Fw(e),Me)},zj=e=>{e.on("cut",Mj(e)),e.on("copy",Uj(e))},Mw=(e,t)=>{var n,s;return Ci.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},Hj=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},Uw=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Wj=e=>Y(e.files,t=>/^image\//.test(t.type)),Vj=(e,t)=>{dP(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Jl(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&Wj(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented()||t.get())return;const s=Mw(e,n);if(Ve(s))return;const o=Pw(n.dataTransfer),r=Ai(o,cu());if((!Ow(o)||Hj(o))&&Dw(e,n,s))return;const i=o[cu()],a=i||o["text/html"]||o["text/plain"];a&&(n.preventDefault(),Yn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{i&&e.execCommand("Delete"),Uw(e,s);const c=Aw(a);o["text/html"]?uu(e,c,r):Up(e,c)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Jl(e)&&!t.get()&&(n.preventDefault(),Uw(e,Mw(e,n))),n.type==="dragend"&&t.set(!1)})},jj=e=>{const t=o=>r=>{o(e,r)},n=mP(e);He(n)&&e.on("PastePreProcess",t(n));const s=pP(e);He(s)&&e.on("PastePostProcess",t(s))},qj=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Kj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,zw=e=>Q.trim(e).replace(Kj,ac).toLowerCase(),Gj=(e,t,n)=>{const s=gP(e);if(n||s==="all"||!hP(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,u,d)=>{const g=r.parseStyle(r.decode(u)),p={};for(let _=0;_<o.length;_++){const y=g[o[_]];let S=y,w=r.getStyle(i,o[_],!0);/color/.test(o[_])&&(S=zw(S),w=zw(w)),w!==S&&(p[o[_]]=y)}const E=r.serializeStyle(p,"span");return E?c+' style="'+E+'"'+d:c+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,a,c)=>i+' style="'+a+'"'+c),t},Yj=e=>{(Xe.browser.isChromium()||Xe.browser.isSafari())&&qj(e,Gj)},Xj=e=>{const t=Vt(!1),n=Vt(vP(e)?"text":"html"),s=aj(e);Yj(e),Fj(e,n),jj(e),e.on("PreInit",()=>{zj(e),Vj(e,t),Bj(e,s,n)})},Qj=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Zj=e=>{e.parser.addNodeFilter("details",t=>{R(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{R(t,n=>{const s=n.attr("data-mce-open");n.attr("open",ne(s)?s:null),n.attr("data-mce-open",null)})})},Jj=e=>{Qj(e),Zj(e)},e8=Ot,Hw=X,t8=e=>vt(e.dom),n8=e=>zs(e.dom),Ww=e=>t=>rt(x.fromDom(e),t),s8=(e,t)=>Zr(x.fromDom(e),n=>n8(n)||ps(n),Ww(t)).getOr(x.fromDom(t)).dom,Vw=(e,t)=>Zr(x.fromDom(e),t8,Ww(t)),jw=(e,t,n)=>{const s=new $t(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!e8(i);i=o())rs(i)&&(r=i);return r},o8=(e,t)=>{const s=M.fromRangeStart(e).getNode(),o=s8(s,t),r=jw(s,o,!1),i=jw(s,o,!0),a=document.createRange();return Vw(r,o).fold(()=>{Hw(r)?a.setStart(r,0):a.setStartBefore(r)},c=>a.setStartBefore(c.dom)),Vw(i,o).fold(()=>{Hw(i)?a.setEnd(i,i.data.length):a.setEndAfter(i)},c=>a.setEndAfter(c.dom)),a},r8=e=>{const t=o8(e.selection.getRng(),e.getBody());e.selection.setRng(um(t))},i8=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),r8(e))})};var ol;(function(e){e.Before="before",e.After="after"})(ol||(ol={}));const a8=(e,t)=>Math.abs(e.left-t),l8=(e,t)=>Math.abs(e.right-t),c8=(e,t)=>e>=t.top&&e<=t.bottom,u8=(e,t)=>e.top<t.bottom&&e.bottom>t.top,f8=(e,t)=>{const n=BR(e,t)/Math.min(e.height,t.height);return u8(e,t)&&n>.5},d8=(e,t)=>{const n=j(e,s=>c8(t,s));return DR(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=ue(e,i=>f8(i,s));return[o,r]})},m8=(e,t)=>({node:e.node,position:a8(e,t)<l8(e,t)?ol.Before:ol.After}),p8=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),zp=(e,t,n)=>{const s=d=>rs(d.node)?b.some(d):fe(d.node)?zp(wt(d.node.childNodes),t,n):b.none(),o=(d,g)=>{if(d.length>=2){const p=s(d[0]).getOr(d[0]),E=s(d[1]).getOr(d[1]);if(Math.abs(g(p,t,n)-g(E,t,n))<2){if(X(p.node))return b.some(p);if(X(E.node))return b.some(E)}}return b.none()},r=(d,g)=>{const p=So(d,(E,_)=>g(E,t,n)-g(_,t,n));return o(p,g).orThunk(()=>ro(p,s))},[i,a]=d8(F_(e),n),{pass:c,fail:u}=ue(a,d=>d.top<n);return r(i,p8).orThunk(()=>r(u,tC)).orThunk(()=>r(c,tC))},g8=(e,t,n,s)=>{const o=(r,i)=>i.fold(()=>zp(wt(r.dom.childNodes),n,s),a=>{const c=j(wt(r.dom.childNodes),u=>u!==a.dom);return zp(c,n,s)}).orThunk(()=>(rt(r,e)?b.none():vA(r)).bind(c=>o(c,b.some(r))));return o(t,b.none())},h8=(e,t,n)=>{const s=x.fromDom(e),o=co(s),i=x.fromPoint(o,t,n).filter(a=>lo(s,a)).getOr(s);return g8(s,i,t,n)},b8=(e,t,n)=>h8(e,t,n).filter(s=>xa(s.node)).map(s=>m8(s,t)),qw=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,i=o.defaultView;return{top:s.top+((t=i==null?void 0:i.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=i==null?void 0:i.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},C8=e=>e.inline?qw(e.getBody()):{left:0,top:0},v8=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},y8=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},E8=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=qw(e.getContentAreaContainer()),s=y8(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},_8=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),S8=(e,t)=>_8(C8(e),v8(e),E8(e,t)),fu=32,w8=100,du=8,mu=16,Hp=vt,x8=$R(Hp,zs),k8=(e,t)=>Hp(t)&&t!==e,N8=(e,t,n)=>Ve(t)||t===n||e.dom.isChildOf(t,n)?!1:!Hp(t),A8=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},T8=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},R8=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},pu=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},Kw=pu("left",-fu),Gw=pu("left",fu),Yw=pu("top",-fu),Xw=pu("top",fu),P8=(e,t,n,s,o,r,i,a,c,u,d)=>{let g=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(g=t.pageX+n-o),t.pageY+s>r&&(p=t.pageY+s-r),e.style.width=n-g+"px",e.style.height=s-p+"px";const E=c.clientHeight,_=c.clientWidth,y=i+c.getBoundingClientRect().top,S=a+c.getBoundingClientRect().left;d.on(w=>{w.intervalId.clear(),w.dragging&&(i+du>=E?w.intervalId.set(Xw(u)):i-du<=0?w.intervalId.set(Yw(u)):a+du>=_?w.intervalId.set(Gw(u)):a-du<=0?w.intervalId.set(Kw(u)):y+mu>=window.innerHeight?w.intervalId.set(Xw(window)):y-mu<=0?w.intervalId.set(Yw(window)):S+mu>=window.innerWidth?w.intervalId.set(Gw(window)):S-mu<=0&&w.intervalId.set(Kw(window)))})},Qw=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},O8=e=>e.button===0,D8=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),B8=(e,t)=>n=>{if(O8(n)){const s=ve(t.dom.getParents(n.target),x8).getOr(null);if(oe(s)&&k8(t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:T8(t,s,s.offsetWidth,s.offsetHeight),intervalId:_R(w8)})}}},I8=(e,t)=>{const n=Kl((o,r)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(o,r)},0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const i=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&i>10){if(t.dispatch("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const a=D8(r,S8(t,o));R8(r.ghost,t.getBody()),P8(r.ghost,a,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s),n.throttle(o.clientX,o.clientY)}})},F8=e=>{const t=e.getSel();if(oe(t)){const s=t.getRangeAt(0).startContainer;return X(s)?s.parentNode:s}else return null},L8=(e,t)=>n=>{e.on(s=>{if(s.intervalId.clear(),s.dragging){if(N8(t,F8(t.selection),s.element)){const o=A8(s.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(()=>{Qw(s.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend")}}),Zw(e)},$8=(e,t)=>()=>{e.on(n=>{n.intervalId.clear(),n.dragging&&t.dispatch("dragend")}),Zw(e)},Zw=e=>{e.on(t=>{t.intervalId.clear(),Qw(t.ghost)}),e.clear()},M8=e=>{const t=Oo(),n=ct.DOM,s=document,o=B8(t,e),r=I8(t,e),i=L8(t,e),a=$8(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",a),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===pe.ESC&&a()})},U8=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(z(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Uc(e,"Dropped file type is not supported"))}},n=o=>{Cc(e,o.target)&&t(o)},s=()=>{const o=ct.DOM,r=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];R(c,u=>{o.bind(i,u,n),r.bind(a,u,t)}),e.on("remove",()=>{R(c,u=>{o.unbind(i,u,n),r.unbind(a,u,t)})})};e.on("init",()=>{Yn.setEditorTimeout(e,s,0)})},z8=e=>{M8(e),nP(e)&&U8(e)},H8=e=>{const t=Kl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Xm(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},W8=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Hs(n)){const s=xr(e.getBody(),n),o=vt(s)?s:n;e.selection.getNode()!==o&&Ka(e,o).each(r=>e.selection.setRng(r))}})})},Ti=vt,Wp=(e,t)=>xr(e.getBody(),t),V8=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=WP(e,s,n.isBlock,()=>_r(e)),r="sel-"+n.uniqueId(),i="data-mce-selected";let a;const c=W=>oe(W)&&n.hasClass(W,"mce-offscreen-selection"),u=W=>W!==s&&(Ti(W)||Hs(W))&&n.isChildOf(W,s),d=W=>{W&&t.setRng(W)},g=(W,F,L,te=!0)=>e.dispatch("ShowCaret",{target:F,direction:W,before:L}).isDefaultPrevented()?null:(te&&t.scrollIntoView(F,W===-1),o.show(L,F)),p=W=>{W.hasAttribute("data-mce-caret")&&(Rf(W),t.scrollIntoView(W))},E=()=>{e.on("click",F=>{const L=Wp(e,F.target);L&&Ti(L)&&(F.preventDefault(),e.focus())}),e.on("blur NewBlock",U),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",F=>{const L=F.target,te=Wp(e,L);Ti(te)?(F.preventDefault(),Ka(e,te).each(A)):u(L)&&Ka(e,L).each(A)},!0),e.on("mousedown",F=>{const L=F.target;if(L!==s&&L.nodeName!=="HTML"&&!n.isChildOf(L,s)||!Wz(e,F.clientX,F.clientY))return;U(),ee();const te=Wp(e,L);Ti(te)?(F.preventDefault(),Ka(e,te).each(A)):b8(s,F.clientX,F.clientY).each(me=>{F.preventDefault();const be=g(1,me.node,me.position===ol.Before,!1);d(be),fe(te)?te.focus():e.getBody().focus()})}),e.on("keypress",F=>{pe.modifierPressed(F)||Ti(t.getNode())&&F.preventDefault()}),e.on("GetSelectionRange",F=>{let L=F.range;if(a){if(!a.parentNode){a=null;return}L=L.cloneRange(),L.selectNode(a),F.range=L}}),e.on("SetSelectionRange",F=>{F.range=S(F.range);const L=A(F.range,F.forward);L&&(F.range=L)});const W=F=>fe(F)&&F.id==="mcepastebin";e.on("AfterSetSelectionRange",F=>{const L=F.range,te=L.startContainer.parentElement;!y(L)&&!W(te)&&ee(),c(te)||U()}),z8(e),H8(e),W8(e)},_=W=>Vn(W)||$l(W)||Ml(W),y=W=>_(W.startContainer)||_(W.endContainer),S=W=>{const F=e.schema.getVoidElements(),L=n.createRng(),te=W.startContainer,me=W.startOffset,be=W.endContainer,Te=W.endOffset;return $e(F,te.nodeName.toLowerCase())?me===0?L.setStartBefore(te):L.setStartAfter(te):L.setStart(te,me),$e(F,be.nodeName.toLowerCase())?Te===0?L.setEndBefore(be):L.setEndAfter(be):L.setEnd(be,Te),L},w=(W,F)=>{const L=x.fromDom(e.getBody()),te=e.getDoc(),me=ca(L,"#"+r).getOrThunk(()=>{const ze=x.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',te);return Kt(ze,"id",r),Wt(L,ze),ze}),be=n.createRng();ia(me),or(me,[x.fromText(Gt,te),x.fromDom(F),x.fromText(Gt,te)]),be.setStart(me.dom.firstChild,1),be.setEnd(me.dom.lastChild,0),Al(me,{top:n.getPos(W,e.getBody()).y+"px"}),cy(me);const Te=t.getSel();return Te&&(Te.removeAllRanges(),Te.addRange(be)),be},N=W=>{const F=W.cloneNode(!0),L=e.dispatch("ObjectSelected",{target:W,targetClone:F});if(L.isDefaultPrevented())return null;const te=w(W,L.targetClone),me=x.fromDom(W);return R(Cn(x.fromDom(e.getBody()),`*[${i}]`),be=>{rt(me,be)||on(be,i)}),n.getAttrib(W,i)||W.setAttribute(i,"1"),a=W,ee(),te},A=(W,F)=>{if(!W)return null;if(W.collapsed){if(!y(W)){const be=F?1:-1,Te=Ta(be,s,W),ze=Te.getNode(!F);if(xa(ze))return g(be,ze,F?!Te.isAtEnd():!1,!1);const qe=Te.getNode(F);if(xa(qe))return g(be,qe,F?!1:!Te.isAtEnd(),!1)}return null}let L=W.startContainer,te=W.startOffset;const me=W.endOffset;if(X(L)&&te===0&&Ti(L.parentNode)&&(L=L.parentNode,te=n.nodeIndex(L),L=L.parentNode),!fe(L))return null;if(me===te+1&&L===W.endContainer){const be=L.childNodes[te];if(u(be))return N(be)}return null},U=()=>{a&&a.removeAttribute(i),ca(x.fromDom(e.getBody()),"#"+r).each(_t),a=null},H=()=>{o.destroy(),a=null},ee=()=>{o.hide()};return Qs(e)||E(),{showCaret:g,showBlockCaretContainer:p,hideFakeCaret:ee,destroy:H}},j8=(e,t)=>{let n=t;for(let s=e.previousSibling;X(s);s=s.previousSibling)n+=s.data.length;return n},Jw=(e,t,n,s,o)=>{if(X(n)&&(s<0||s>n.data.length))return[];const r=o&&X(n)?[j8(n,s)]:[s];let i=n;for(;i!==t&&i.parentNode;)r.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?r.reverse():[]},Vp=(e,t,n,s,o,r,i=!1)=>{const a=Jw(e,t,n,s,i),c=Jw(e,t,o,r,i);return{start:a,end:c}},ex=(e,t)=>{const n=t.slice(),s=n.pop();return zt(s)?_e(n,(r,i)=>r.bind(a=>b.from(a.childNodes[i])),b.some(e)).bind(r=>X(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s})):b.none()},tx=(e,t)=>ex(e,t.start).bind(({node:n,offset:s})=>ex(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),q8=(e,t,n,s=!1)=>Vp(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Ri=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Ri(e,s,n)}},gu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(X(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),X(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ri(e,o,n),o!==r&&Ri(e,r,n))},jp=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),nx=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:wC(s).concat(e.blockPatterns),inlinePatterns:xC(s).concat(e.inlinePatterns)}},sx=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},ox=(e,t,n)=>{RW(t,0,t).each(o=>{const r=o.container;FS(r,n.start.length,t).each(i=>{const a=e.createRng();a.setStart(r,0),a.setEnd(i.container,i.offset),gu(e,a,c=>c===t)})})},K8=(e,t)=>{const n=e.dom,s=t.pattern,o=tx(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(i,a)=>{const c=a.get(i);return Ct(c)&&nn(c).exists(u=>$e(u,"block"))};return jp(e,o).each(i=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{ox(e.dom,i,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{ox(e.dom,i,s),e.execCommand(s.cmd,!1,s.value)})}),!0},G8=e=>So(e,(t,n)=>n.start.length-t.start.length),Y8=(e,t)=>{const n=G8(e),s=t.replace(Gt," ");return ve(n,o=>t.indexOf(o.start)===0||s.indexOf(o.start)===0)},X8=(e,t,n,s)=>{var o;const r=e.dom,i=Dn(e);if(!r.is(t,i))return[];const a=(o=t.textContent)!==null&&o!==void 0?o:"";return Y8(n.blockPatterns,a).map(c=>Q.trim(a).length===c.start.length?[]:[{pattern:c,range:Vp(r,r.getRoot(),t,0,t,0,s)}]).getOr([])},Q8=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();R(t,s=>K8(e,s)),e.selection.moveToBookmark(n)},rx=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),hu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},ix=(e,t,n)=>{const s=tx(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),a=s.startOffset===0?o:o.splitText(s.startOffset),c=a.parentNode,u=i.parentNode;return{prefix:t,end:u.insertBefore(rx(e,t+"-end"),i),start:c.insertBefore(rx(e,t+"-start"),a)}},ax=(e,t,n)=>{Ri(e,e.get(t.prefix+"-end"),n),Ri(e,e.get(t.prefix+"-start"),n)},qp=e=>e.start.length===0,Z8=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},lx=(e,t,n,s)=>{const o=t.start;return Cp(e,s.container,s.offset,Z8(o),n).bind(i=>{if(i.offset>=o.length){const a=e.createRng();return a.setStart(i.container,i.offset-o.length),a.setEnd(i.container,i.offset),b.some(a)}else{const a=i.offset-o.length;return bp(i.container,a,n).map(c=>{const u=e.createRng();return u.setStart(c.container,c.offset),u.setEnd(i.container,i.offset),u}).filter(c=>c.toString()===o).orThunk(()=>lx(e,t,n,Es(i.container,0)))}})},J8=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return hp(n,s,o).bind(i=>lx(e,t,o,i).bind(c=>{var u;if(r){if(c.endContainer===i.container&&c.endOffset===i.offset)return b.none();if(i.offset===0&&((u=c.endContainer.textContent)===null||u===void 0?void 0:u.length)===c.endOffset)return b.none()}return b.some(c)}))},e5=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),i=n.pattern,a=n.position.container,c=n.position.offset;return bp(a,c-n.pattern.end.length,t).bind(u=>{const d=Vp(o,r,u.container,u.offset,a,c,s);if(qp(i))return b.some({matches:[{pattern:i,startRng:d,endRng:d}],position:u});{const g=cx(e,n.remainingPatterns,u.container,u.offset,t,s),p=g.getOr({matches:[],position:u}),E=p.position;return J8(o,i,E.container,E.offset,t,g.isNone()).map(y=>{const S=q8(o,r,y,s);return{matches:p.matches.concat([{pattern:i,startRng:S,endRng:d}]),position:Es(y.startContainer,y.startOffset)}})}})},cx=(e,t,n,s,o,r)=>{const i=e.dom;return hp(n,s,i.getRoot()).bind(a=>{const c=sx(i,o,n,s);for(let u=0;u<t.length;u++){const d=t[u];if(!ah(c,d.end))continue;const g=t.slice();g.splice(u,1);const p=e5(e,o,{pattern:d,remainingPatterns:g,position:a},r);if(p.isSome())return p}return b.none()})},ux=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?R(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},t5=(e,t,n,s)=>{const o=hu(e.dom,n);gu(e.dom,o,s),ux(e,t,o)},n5=(e,t,n,s,o)=>{const r=e.dom,i=hu(r,s),a=hu(r,n);gu(r,a,o),gu(r,i,o);const c={prefix:n.prefix,start:n.end,end:s.start},u=hu(r,c);ux(e,t,u)},s5=(e,t)=>{const n=Yb("mce_textpattern"),s=ie(t,(o,r)=>{const i=ix(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return ie(s,(o,r)=>{const i=s.length-o.length-1,a=qp(r.pattern)?r.endMarker:ix(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:a}])},[])},fx=(e,t,n,s,o,r)=>cx(e,o.inlinePatterns,n,s,t,r).fold(()=>[],i=>i.matches),dx=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=s5(n,t);R(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),a=c=>c===i;qp(r.pattern)?t5(e,r.pattern,r.endMarker,a):n5(e,r.pattern,r.startMarker,r.endMarker,a),ax(n,r.endMarker,a),ax(n,r.startMarker,a)}),e.selection.moveToBookmark(s)},o5=(e,t)=>{const n=e.selection.getRng();return jp(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),i=nx(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),a=fx(e,s,n.startContainer,r,i,!0),c=X8(e,s,i,!0);return c.length>0||a.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Jr),dx(e,a),Q8(e,c);const u=e.selection.getRng(),d=hp(u.startContainer,u.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),d.each(g=>{const p=g.container;p.data.charAt(g.offset-1)===Jr&&(p.deleteData(g.offset-1,1),Ri(e.dom,p.parentNode,E=>E===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},r5=(e,t)=>{const n=e.selection.getRng();jp(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=sx(e.dom,s,n.startContainer,o),i=nx(t,s,r),a=fx(e,s,n.startContainer,o,i,!1);a.length>0&&e.undoManager.transact(()=>{dx(e,a)})})},mx=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},i5=(e,t)=>mx(e,t,(n,s)=>n===s.keyCode&&!pe.modifierPressed(s)),a5=(e,t)=>mx(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),l5=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>c1(_P(e),SP(e)),o=()=>NP(e);e.on("keydown",i=>{if(i.keyCode===13&&!pe.modifierPressed(i)&&e.selection.isCollapsed()){const a=s();(a.inlinePatterns.length>0||a.blockPatterns.length>0||o())&&o5(e,a)&&i.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const i=s();(i.inlinePatterns.length>0||o())&&r5(e,i)}};e.on("keyup",i=>{i5(n,i)&&r()}),e.on("keypress",i=>{a5(t,i)&&Yn.setEditorTimeout(e,r)})},c5=e=>{l5(e)},u5=e=>{const t=Q.each,n=pe.BACKSPACE,s=pe.DELETE,o=e.dom,r=e.selection,i=e.parser,a=Xe.browser,c=a.isFirefox(),u=a.isChromium()||a.isSafari(),d=Xe.deviceType.isiPhone()||Xe.deviceType.isiPad(),g=Xe.os.isMacOS()||Xe.os.isiOS(),p=(le,we)=>{try{e.getDoc().execCommand(le,!1,String(we))}catch{}},E=le=>le.isDefaultPrevented(),_=()=>{const le=Ee=>{const se=o.create("body"),Fe=Ee.cloneContents();return se.appendChild(Fe),r.serializer.serialize(se,{format:"html"})},we=Ee=>{const se=le(Ee),Fe=o.createRng();Fe.selectNode(e.getBody());const Be=le(Fe);return se===Be};e.on("keydown",Ee=>{const se=Ee.keyCode;if(!E(Ee)&&(se===s||se===n)){const Fe=e.selection.isCollapsed(),Be=e.getBody();if(Fe&&!o.isEmpty(Be)||!Fe&&!we(e.selection.getRng()))return;Ee.preventDefault(),e.setContent(""),Be.firstChild&&o.isBlock(Be.firstChild)?e.selection.setCursorLocation(Be.firstChild,0):e.selection.setCursorLocation(Be,0),e.nodeChanged()}})},y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",le=>{let we;if(le.target===e.getDoc().documentElement)if(we=r.getRng(),e.getBody().focus(),le.type==="mousedown"){if(Vn(we.startContainer))return;r.placeCaretAt(le.clientX,le.clientY)}else r.setRng(we)})},w=()=>{e.on("keydown",le=>{if(!E(le)&&le.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode(),Ee=we.previousSibling;if(we.nodeName==="HR"){o.remove(we),le.preventDefault();return}Ee&&Ee.nodeName&&Ee.nodeName.toLowerCase()==="hr"&&(o.remove(Ee),le.preventDefault())}}})},N=()=>{Range.prototype.getClientRects||e.on("mousedown",le=>{if(!E(le)&&le.target.nodeName==="HTML"){const we=e.getBody();we.blur(),Yn.setEditorTimeout(e,()=>{we.focus()})}})},A=()=>{const le=UC(e);e.on("click",we=>{const Ee=we.target;/^(IMG|HR)$/.test(Ee.nodeName)&&o.getContentEditableParent(Ee)!=="false"&&(we.preventDefault(),e.selection.select(Ee),e.nodeChanged()),Ee.nodeName==="A"&&o.hasClass(Ee,le)&&Ee.childNodes.length===0&&(we.preventDefault(),r.select(Ee))})},U=()=>{const le=()=>{const Ee=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const se=r.getStart();se!==e.getBody()&&(o.setAttrib(se,"style",null),t(Ee,Fe=>{se.setAttributeNode(Fe.cloneNode(!0))}))}},we=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",Ee=>{let se;return!E(Ee)&&(Ee.keyCode===8||Ee.keyCode===46)&&we()?(se=le(),e.getDoc().execCommand("delete",!1),se(),Ee.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",Ee=>{if(!E(Ee)&&we()){const se=le();Yn.setEditorTimeout(e,()=>{se()})}})},H=()=>{e.on("keydown",le=>{if(!E(le)&&le.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const we=r.getNode().previousSibling;if(we&&we.nodeName&&we.nodeName.toLowerCase()==="table")return le.preventDefault(),!1}return!0})},ee=()=>{e.on("keydown",le=>{if(E(le)||le.keyCode!==pe.BACKSPACE)return;let we=r.getRng();const Ee=we.startContainer,se=we.startOffset,Fe=o.getRoot();let Be=Ee;if(!(!we.collapsed||se!==0)){for(;Be.parentNode&&Be.parentNode.firstChild===Be&&Be.parentNode!==Fe;)Be=Be.parentNode;Be.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Be),we=o.createRng(),we.setStart(Ee,0),we.setEnd(Ee,0),r.setRng(we))}})},W=()=>{const le=()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),LC(e)||p("enableObjectResizing",!1)};MC(e)||e.on("BeforeExecCommand mousedown",le)},F=()=>{const le=()=>{t(o.select("a"),we=>{var Ee;let se=we.parentNode;const Fe=o.getRoot();if((se==null?void 0:se.lastChild)===we){for(;se&&!o.isBlock(se);){if(((Ee=se.parentNode)===null||Ee===void 0?void 0:Ee.lastChild)!==se||se===Fe)return;se=se.parentNode}o.add(se,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",we=>{(we.type==="setcontent"||we.command==="mceInsertLink")&&le()})},L=()=>{e.on("init",()=>{p("DefaultParagraphSeparator",Dn(e))})},te=le=>{const we=le.getBody(),Ee=le.selection.getRng();return Ee.startContainer===Ee.endContainer&&Ee.startContainer===we&&Ee.startOffset===0&&Ee.endOffset===we.childNodes.length},me=()=>{e.on("keyup focusin mouseup",le=>{!pe.modifierPressed(le)&&!te(e)&&r.normalize()},!0)},be=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Te=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ze=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",le=>{let we;le.target.nodeName==="HTML"&&(we=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(we),e.selection.normalize(),e.nodeChanged())}))},qe=()=>{g&&e.on("keydown",le=>{pe.metaKeyPressed(le)&&!le.shiftKey&&(le.keyCode===37||le.keyCode===39)&&(le.preventDefault(),e.selection.getSel().modify("move",le.keyCode===37?"backward":"forward","lineboundary"))})},nt=()=>{e.on("click",le=>{let we=le.target;do if(we.tagName==="A"){le.preventDefault();return}while(we=we.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Mt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",le=>{le.preventDefault()})})},Z=()=>{i.addNodeFilter("br",le=>{let we=le.length;for(;we--;)le[we].attr("class")==="Apple-interchange-newline"&&le[we].remove()})},Re=Me,De=()=>{if(!c||e.removed)return!1;const le=e.selection.getSel();return!le||!le.rangeCount||le.rangeCount===0},ke=()=>{u&&(S(),A(),Mt(),y(),d&&(Te(),ze(),nt())),c&&(N(),W(),be(),qe())},kt=()=>{ee(),_(),Xe.windowsPhone||me(),u&&(S(),A(),L(),Mt(),H(),Z(),d?(Te(),ze(),nt()):y()),c&&(w(),N(),U(),W(),F(),be(),qe(),H())};return Qs(e)?ke():kt(),{refreshContentEditable:Re,isHidden:De}},Kp=ct.DOM,f5=(e,t)=>{const n=x.fromDom(e.getBody()),s=Cf(xo(n)),o=x.fromTag("style");Kt(o,"type","text/css"),Wt(o,x.fromText(t)),Wt(s,o),e.on("remove",()=>{_t(o)})},d5=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Gp=e=>Gi(e,t=>at(t)===!1),px=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Gp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:d5(e),validate:!0,blob_cache:n,document:e.getDoc()})},gx=e=>{const t=e.options.get;return Gp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},m5=e=>{const t=e.options.get;return{...px(e),...gx(e),...Gp({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},p5=e=>{const t=_i(px(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let i=n.length;for(;i--;){const a=n[i];let c=a.attr(s);if(c&&!a.attr(r)){if(c.indexOf("data:")===0||c.indexOf("blob:")===0)continue;s==="style"?(c=o.serializeStyle(o.parseStyle(c),a.name),c.length||(c=null),a.attr(r,c),a.attr(s,c)):s==="tabindex"?(a.attr(r,c),a.attr(s,null)):a.attr(r,e.convertURL(c,s,a.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),kP(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new En("br",1))}}),t},g5=e=>{const t=cP(e);t&&Yn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},h5=e=>{const t=e.dom.getRoot();!e.inline&&(!lc(e)||e.selection.getStart(!0)===t)&&yn(t).each(n=>{const s=n.getNode(),o=uo(s)?yn(s).getOr(n):n;e.selection.setRng(o.toRange())})},b5=e=>{e.bindPendingEventDelegates(),e.initialized=!0,oD(e),e.focus(!0),h5(e),e.nodeChanged({initial:!0});const t=aP(e);He(t)&&t.call(e,e),g5(e)},hx=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,C5=(e,t,n)=>{const s=[hx(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},bx=e=>{const t=hx(e),n=FC(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";Q.each(e.contentStyles,u=>{c+=u+`\r
`}),e.dom.addStyle(c)}const i=Promise.all(C5(e,s,n)).then(r).catch(r),a=I1(e);return a&&f5(e,a),i},v5=e=>{const t=e.getDoc(),n=e.getBody();nD(e),uP(e)||(t.body.spellcheck=!1,Kp.setAttrib(n,"spellcheck","false")),e.quirks=u5(e),sD(e);const s=F1(e);s!==void 0&&(n.dir=s);const o=fP(e);o&&e.on("BeforeSetContent",r=>{Q.each(o,i=>{r.content=r.content.replace(i,a=>"<!--mce:protected "+escape(a)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},y5=e=>{Qs(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Yp=e=>{e.removed!==!0&&(y5(e),b5(e))},Cx=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Kp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=MC(e),e.readonly||(e.inline&&Kp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=gH(e),e.schema=Po(gx(e)),e.dom=ct(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:P1(e),referrerPolicy:ed(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=p5(e),e.serializer=WE(m5(e),e),e.selection=HE(e.dom,e.getWin(),e.serializer,e),e.annotator=Fv(e),e.formatter=t_(e),e.undoManager=s_(e),e._nodeChangeDispatcher=new Q6(e),e._selectionOverrides=V8(e),w3(e),Jj(e),O3(e),Qs(e)||(i8(e),c5(e));const o=X6(e);E3(e,o),T3(e),RH(e),Xj(e);const r=wU(e);v5(e),r.fold(()=>{bx(e).then(()=>Yp(e))},i=>{e.setProgressState(!0),bx(e).then(()=>{i().then(a=>{e.setProgressState(!1),Yp(e),LE(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Yp(e),LE(e)})})})},vx=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!t&&!e.inline){const n=e.iframeElement,s=iH(x.fromDom(n),"load",()=>{s.unbind(),e.contentDocument=n.contentDocument,Cx(e)});if(Xe.browser.isFirefox()){const o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close()}else n.srcdoc=e.iframeHTML}else Cx(e)},Xp=ct.DOM,E5=(e,t,n,s)=>{const o=x.fromTag("iframe");return s.each(r=>Kt(o,"tabindex",r)),wo(o,n),wo(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),ta(o,"tox-edit-area__iframe"),o},_5=e=>{let t=h1(e)+"<html><head>";TC(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=b1(e),s=C1(e),o=e.translate(rP(e));return RC(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+RC(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},S5=(e,t)=>{const n=e.translate("Rich Text Area"),s=ao(x.fromDom(e.getElement()),"tabindex").bind(Sl),o=E5(e.id,n,g1(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=_5(e),Xp.add(t.iframeContainer,o)},w5=(e,t)=>{S5(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Xp.isHidden(t.editorContainer)),e.getElement().style.display="none",Xp.setAttrib(e.id,"aria-hidden","true"),vx(e)},yx=ct.DOM,x5=(e,t,n)=>{const s=wi.get(n),o=wi.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Q.trim(n),s&&Q.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,He(r.init)&&(r.init(e,o),t.push(n))}catch(r){eH(e,n,r)}}},k5=e=>e.replace(/^\-/,""),N5=e=>{const t=[];R(Zl(e),n=>{x5(e,t,k5(n))})},A5=e=>{const t=Q.trim(DC(e)),n=e.ui.registry.getAll().icons,s={...Mc.get("default").icons,...Mc.get(t).icons};ft(s,(o,r)=>{$e(n,r)||e.ui.registry.addIcon(r,o)})},T5=e=>{const t=li(e);if(ne(t)){const n=Ar.get(t);e.theme=n(e,Ar.urls[t])||{},He(e.theme.init)&&e.theme.init(e,Ar.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},R5=e=>{const t=td(e),n=Si.get(t);e.model=n(e,Si.urls[t])},P5=e=>{const t=e.theme.renderUI;return t?t():_x(e)},O5=e=>{const t=e.getElement(),s=li(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},Ex=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),D5=e=>{const t=yx.create("div");return yx.insertAfter(t,e),Ex(t,t)},_x=e=>{const t=e.getElement();return e.inline?Ex(null):D5(t)},B5=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,ne(li(e))?P5(e):He(li(e))?O5(e):_x(e)},I5=(e,t)=>{const n={show:b.from(t.show).getOr(Me),hide:b.from(t.hide).getOr(Me),isEnabled:b.from(t.isEnabled).getOr(Et),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},F5=e=>{e.dispatch("ScriptsLoaded"),A5(e),T5(e),R5(e),N5(e);const t=B5(e);I5(e,b.from(t.api).getOr({})),e.editorContainer=t.editorContainer,oH(e),e.inline?vx(e):w5(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Tr=ct.DOM,Sx=e=>e.charAt(0)==="-",L5=(e,t)=>{const n=BC(t),s=O1(t);if(!gs.hasCode(n)&&n!=="en"){const o=Ls(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{Qz(t,o,n)})}},$5=(e,t)=>{const n=li(e);if(ne(n)&&!Sx(n)&&!$e(Ar.urls,n)){const s=z1(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;Ar.load(n,o).catch(()=>{Zz(e,o,n)})}},M5=(e,t)=>{const n=td(e);if(n!=="plugin"&&!$e(Si.urls,n)){const s=H1(e),o=ne(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;Si.load(n,o).catch(()=>{Jz(e,o,n)})}},U5=e=>b.from(k1(e)).filter(Ls).map(t=>({url:t,name:b.none()})),wx=(e,t,n)=>b.from(t).filter(s=>Ls(s)&&!Mc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),z5=(e,t,n)=>{const s=wx(t,"default",n),o=U5(t).orThunk(()=>wx(t,DC(t),""));R(sA([s,o]),r=>{e.add(r.url).catch(()=>{Xz(t,r.url,r.name.getOrUndefined())})})},H5=(e,t)=>{const n=(s,o)=>{wi.load(s,o).catch(()=>{Yz(e,o,s)})};ft(tP(e),(s,o)=>{n(o,s),e.options.set("plugins",Zl(e).concat(o))}),R(Zl(e),s=>{s=Q.trim(s),s&&!wi.urls[s]&&!Sx(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},W5=e=>{const t=li(e);return!ne(t)||oe(Ar.get(t))},V5=e=>{const t=td(e);return oe(Si.get(t))},j5=(e,t)=>{const n=mo.ScriptLoader,s=()=>{!e.removed&&W5(e)&&V5(e)&&F5(e)};$5(e,t),M5(e,t),L5(n,e),z5(n,e,t),H5(e,t),n.loadQueue().then(s,s)},q5=(e,t)=>hb.forElement(e,{contentCssCors:eP(t),referrerPolicy:ed(t)}),K5=e=>{const t=e.id;gs.setCode(BC(e));const n=()=>{Tr.unbind(window,"ready",n),e.render()};if(!dr.Event.domLoaded){Tr.bind(window,"ready",n);return}if(!e.getElement())return;const s=x.fromDom(e.getElement()),o=Fh(s);e.on("remove",()=>{ye(s.dom.attributes,i=>on(s,i.name)),wo(s,o)}),e.ui.styleSheetLoader=q5(s,e),nd(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Tr.getParent(t,"form");r&&(e.formElement=r,G1(e)&&!_f(e.getElement())&&(Tr.insertAfter(Tr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Tr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Y1(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=KE(e),e.notificationManager=qE(e),RP(e)&&e.on("GetContent",i=>{i.save&&(i.content=Tr.encode(i.content))}),X1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Q1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),j5(e,e.suffix)},G5=(e,t)=>({sections:K(e),options:K(t)}),xx=tr().deviceType,kx=xx.isPhone(),Y5=xx.isTablet(),rl=e=>{if(Ve(e))return[];{const t=Ct(e)?e:e.split(/[ ,]/),n=V(t,Kr);return j(n,Ls)}},X5=(e,t)=>{const n=AN(t,(s,o)=>z(e,o));return G5(n.t,n.f)},Q5=(e,t,n={})=>{const s=e.sections(),o=ht(s,t).getOr({});return Q.extend({},n,o)},Qp=(e,t)=>$e(e.sections(),t),Z5=(e,t)=>Qp(e,t)?e.sections()[t]:{},J5=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ht(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),e4=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?Q.extend({},e.external_plugins,s):s},t4=(e,t)=>[...rl(e),...rl(t)],n4=(e,t,n,s)=>e&&Qp(t,"mobile")?s:n,s4=(e,t,n,s)=>{const o=rl(n.forced_plugins),r=rl(s.plugins),i=Z5(t,"mobile"),a=i.plugins?rl(i.plugins):r,c=n4(e,t,r,a),u=t4(o,c);return Q.extend(s,{forced_plugins:o,plugins:u})},o4=(e,t)=>e&&Qp(t,"mobile"),r4=(e,t,n,s,o)=>{var r;const i=e?{mobile:J5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},a=X5(["mobile"],Jc(i,o)),c=Q.extend(n,s,a.options(),o4(e,a)?Q5(a,"mobile"):{},{external_plugins:e4(s,a.options())});return s4(e,a,s,c)},i4=(e,t)=>r4(kx||Y5,kx,t,e,t),a4=(e,t)=>YU(e,t),l4=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{R("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},c4=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return Y(o,r=>oe(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},u4=e=>{l4(e),c4(e)},f4=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Xe.os.isMacOS()||Xe.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}}})},d4=(e,t,n)=>{const s=x.fromDom(e.getRoot());return $a(s,M.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),Ma(s,M.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},m4=e=>{if(typeof e!="string"){const t=Q.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},p4=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?d4(s,n.getRng(),t):t},bu=(e,t)=>{const{content:n,details:s}=m4(t);Fm(e,{...s,content:p4(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=KU(e,o.content,s);Lm(e,r,o),e.addVisual()})},g4=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{bu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{bu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{bu(e,s)},mceInsertContent:(t,n,s)=>{bu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},h4={"font-size":"size","font-family":"face"},b4=mf("font"),C4=(e,t,n)=>{const s=r=>Tl(r,e).orThunk(()=>b4(r)?ht(h4,e).bind(i=>ao(r,i)):b.none()),o=r=>rt(x.fromDom(t),r);return pm(x.fromDom(n),r=>s(r),o)},v4=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),y4=(e,t)=>b.from(ct.DOM.getStyle(t,e,!0)),Nx=e=>(t,n)=>b.from(n).map(x.fromDom).filter(ss).bind(s=>C4(e,t,s.dom).or(y4(e,s.dom))).getOr(""),E4=Nx("font-size"),_4=Lt(v4,Nx("font-family")),S4=e=>yn(e.getBody()).bind(t=>{const n=t.container();return b.from(X(n)?n.parentNode:n)}),w4=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),x4=(e,t)=>w4(e).orThunk(ae(S4,e)).map(x.fromDom).filter(ss).bind(t),Zp=(e,t)=>x4(e,At(b.some,t)),Ax=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=AP(e),o=TP(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},k4=e=>{const t=e.split(/\s*,\s*/);return V(t,n=>n.indexOf(" ")!==-1&&!(Jt(n,'"')||Jt(n,"'"))?`'${n}'`:n).join(",")},N4=(e,t)=>{const n=Ax(e,t);e.formatter.toggle("fontname",{value:k4(n)}),e.nodeChanged()},A4=e=>Zp(e,t=>_4(e.getBody(),t.dom)).getOr(""),T4=(e,t)=>{e.formatter.toggle("fontsize",{value:Ax(e,t)}),e.nodeChanged()},R4=e=>Zp(e,t=>E4(e.getBody(),t.dom)).getOr(""),P4=e=>Zp(e,t=>{const n=x.fromDom(e.getBody()),s=pm(t,r=>Tl(r,"line-height"),ae(rt,n)),o=()=>{const r=parseFloat(Us(t,"line-height")),i=parseFloat(Us(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),O4=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},D4=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{N4(e,o)},FontSize:(n,s,o)=>{T4(e,o)},LineHeight:(n,s,o)=>{O4(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(ne(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},B4=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>A4(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>R4(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>P4(e))},I4=e=>{D4(e),B4(e)},F4=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},L4=e=>{e.editorCommands.addCommands({Indent:()=>{C3(e)},Outdent:()=>{eS(e)}}),e.editorCommands.addCommands({Outdent:()=>X_(e)},"state")},$4=e=>{const t=(n,s,o)=>{const r=ne(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");Ge(r)&&ne(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},M4=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},U4=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},z4=e=>{M4(e),U4(e)},H4=e=>{e.editorCommands.addCommands({insertParagraph:()=>{lu(fw,e)},mceInsertNewLine:(t,n,s)=>{Cw(e,s)},InsertLineBreak:(t,n,s)=>{lu(pw,e)}})},W4=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>fe(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),zs);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},V4=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s!=null?s:e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{MB(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},j4=e=>{u4(e),f4(e),F4(e),W4(e),g4(e),$4(e),L4(e),H4(e),z4(e),I4(e),V4(e)};class Tx{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,i=t.toLowerCase(),a=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!a?r.focus():hB(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const u=this.commands.exec[i];return He(u)?(u(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return He(s)?s(n):!1}queryCommandValue(t){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return He(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;ft(t,(o,r)=>{R(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,a)=>n.call(s!=null?s:this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s!=null?s:this.editor)}}const Rr="data-mce-contenteditable",q4=(e,t,n)=>{gf(e,t)&&!n?kl(e,t):n&&ta(e,t)},Jp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Cu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},K4=e=>{R(Cn(e,'*[contenteditable="true"]'),t=>{Kt(t,Rr,"true"),Cu(t,!1)})},G4=e=>{R(Cn(e,`*[${Rr}="true"]`),t=>{on(t,Rr),Cu(t,!0)})},Y4=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},X4=e=>{e.selection.setRng(e.selection.getRng())},Q4=(e,t)=>{const n=x.fromDom(e.getBody());q4(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Y4(e),e.readonly=!0,Cu(n,!1),K4(n)):(e.readonly=!1,Cu(n,!0),G4(n),Jp(e,"StyleWithCSS",!1),Jp(e,"enableInlineTableEditing",!1),Jp(e,"enableObjectResizing",!1),LB(e)&&e.focus(),X4(e),e.nodeChanged())},Pr=e=>e.readonly,Rx=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Pr(e)&&R(t,n=>{n.attr(Rr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Rr,t=>{Pr(e)&&R(t,n=>{n.attr("contenteditable",n.attr(Rr))})}),e.serializer.addTempAttr(Rr)},Z4=e=>{e.serializer?Rx(e):e.on("PreInit",()=>{Rx(e)})},J4=e=>e.type==="click",e9=["copy"],t9=e=>z(e9,e.type),n9=(e,t)=>ar(t,"a",s=>rt(s,x.fromDom(e.getBody()))).bind(s=>ao(s,"href")),s9=(e,t)=>{if(J4(t)&&!pe.metaKeyPressed(t)){const n=x.fromDom(t.target);n9(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${UN(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else t9(t)&&e.dispatch(t.type,t)},o9=e=>{e.on("ShowCaret",t=>{Pr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Pr(e)&&t.preventDefault()})},r9=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class eg{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||tt}static isNative(t){return!!r9[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=$f(s,n!=null?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,a=r.length;i<a;i++){const c=r[i];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=tt),n){const r={func:n,removed:!1};o&&Q.extend(r,o);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const c=i[a];let u=this.bindings[c];u||(u=[],this.toggleEvent(c,!0)),s?u=[r,...u]:u=[...u,r],this.bindings[c]=u}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return ft(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(i){if(!n)i.length=0;else{const a=ue(i,c=>c.func===n);i=a.fail,this.bindings[r]=i,R(a.pass,c=>{c.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else ft(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const il=e=>(e._eventDispatcher||(e._eventDispatcher=new eg({scope:e,toggleEvent:(t,n)=>{eg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),tg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return $f(e.toLowerCase(),t!=null?t:{},s);const o=il(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return il(this).on(e,t,n)},off(e,t){return il(this).off(e,t)},once(e,t){return il(this).once(e,t)},hasEventListeners(e){return il(this).has(e)}},vu=ct.DOM;let Or;const yu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=$C(e);return n?(e.eventRoot||(e.eventRoot=vu.select(n)[0]),e.eventRoot):e.getBody()},i9=e=>!e.hidden&&!Pr(e),Px=(e,t,n)=>{i9(e)?e.dispatch(t,n):Pr(e)&&s9(e,n)},Ox=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=yu(e,t);if($C(e)){if(Or||(Or={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Or&&(ft(Or,(o,r)=>{e.dom.unbind(yu(e,r))}),Or=null)})),Or[t])return;const s=o=>{const r=o.target,i=e.editorManager.get();let a=i.length;for(;a--;){const c=i[a].getBody();(c===r||vu.isChildOf(r,c))&&Px(i[a],t,o)}};Or[t]=s,vu.bind(n,t,s)}else{const s=o=>{Px(e,t,o)};vu.bind(n,t,s),e.delegates[t]=s}},Dx={...tg,bindPendingEventDelegates(){const e=this;Q.each(e._pendingNativeEvents,t=>{Ox(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?Ox(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(yu(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(ft(e.delegates,(s,o)=>{e.dom.unbind(yu(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},a9=e=>ne(e)?{value:e.split(/[ ,]/),valid:!0}:ns(e,ne)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},l9=e=>{const t=(()=>{switch(e){case"array":return Ct;case"boolean":return je;case"function":return He;case"number":return zt;case"object":return Ge;case"string":return ne;case"string[]":return a9;case"object[]":return n=>ns(n,Ge);case"regexp":return n=>cn(n,RegExp);default:return Et}})();return n=>ng(n,t,`The value must be a ${e}.`)},c9=e=>ne(e.processor),Bx=(e,t)=>{const n=Qi(t.message)?"":`. ${t.message}`;return e+n},Ix=e=>e.valid,ng=(e,t,n="")=>{const s=t(e);return je(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},u9=(e,t,n)=>{if(!at(t)){const s=ng(t,n);if(Ix(s))return s.value;console.error(Bx(`Invalid default value passed for the "${e}" option`,s))}},f9=(e,t)=>{const n={},s={},o=(g,p,E)=>{const _=ng(p,E);return Ix(_)?(s[g]=_.value,!0):(console.warn(Bx(`Invalid value passed for the ${g} option`,_)),!1)},r=(g,p)=>{const E=c9(p)?l9(p.processor):p.processor,_=u9(g,p.default,E);n[g]={...p,default:_,processor:E},ht(s,g).orThunk(()=>ht(t,g)).each(S=>o(g,S,E))},i=g=>$e(n,g);return{register:r,isRegistered:i,get:g=>ht(s,g).orThunk(()=>ht(n,g).map(p=>p.default)).getOrUndefined(),set:(g,p)=>{if(i(g)){const E=n[g];return E.immutable?(console.error(`"${g}" is an immutable option and cannot be updated`),!1):o(g,p,E.processor)}else return console.warn(`"${g}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:g=>{const p=i(g);return p&&delete s[g],p},isSet:g=>$e(s,g)}},d9=["design","readonly"],Fx=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&Q4(e,r.editorReadOnly),t.set(s),JO(e,s)},m9=(e,t,n,s)=>{if(s!==n.get()){if(!$e(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Fx(e,n,t,s):e.on("init",()=>Fx(e,n,t,s))}},p9=(e,t,n)=>{if(z(d9,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},g9=e=>{const t=Vt("design"),n=Vt({design:{activate:Me,deactivate:Me,editorReadOnly:!1},readonly:{activate:Me,deactivate:Me,editorReadOnly:!0}});return Z4(e),o9(e),{isReadOnly:()=>Pr(e),set:s=>m9(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(p9(n.get(),s,o))}}},sg=Q.each,og=Q.explode,h9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Lx=Q.makeMap("alt,ctrl,shift,meta,access"),b9=e=>e in Lx,C9=e=>{const t={},n=Xe.os.isMacOS()||Xe.os.isiOS();sg(og(e.toLowerCase(),"+"),r=>{b9(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=h9[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in Lx)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class $x{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(sg(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return sg(og(Q.trim(t)),a=>{const c=r.createShortcut(a,n,i,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:Q.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=Q.map(og(t,">"),C9);return r[r.length-1]=Q.extend(r[r.length-1],{func:s,scope:o||this.editor}),Q.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const v9=()=>{const e={},t={},n={},s={},o={},r={},i={},a=(u,d)=>(g,p)=>{u[g.toLowerCase()]={...p,type:d}},c=(u,d)=>s[u.toLowerCase()]=d;return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(o,"contextmenu"),addContextToolbar:a(r,"contexttoolbar"),addContextForm:a(r,"contextform"),addSidebar:a(i,"sidebar"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i})}},y9=()=>{const e=v9();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Dr=ct.DOM,Mx=Q.extend,E9=Q.each;class Eu{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Mx(this,Dx);const o=this;this.id=t,this.hidden=!1;const r=i4(s.defaultOptions,n);this.options=f9(o,r),p1(o);const i=this.options.get;i("deprecation_warnings")&&Rz(n,r);const a=i("suffix");a&&(s.suffix=a),this.suffix=s.suffix;const c=i("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const u=ed(o);u&&(mo.ScriptLoader._setReferrerPolicy(u),ct.DOM.styleSheetLoader._setReferrerPolicy(u)),un.languageLoad=i("language_load"),un.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new ys(TC(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=nd(o),this.hasVisual=sP(o),this.shortcuts=new $x(this),this.editorCommands=new Tx(this),j4(this);const d=i("cache_suffix");d&&(Xe.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:y9(),styleSheetLoader:void 0,show:Me,hide:Me,setEnabled:Me,isEnabled:Et},this.mode=g9(o),s.dispatch("SetupEditor",{editor:this});const g=iP(o);He(g)&&g.call(o,o)}render(){K5(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return _r(this)}translate(t){return gs.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(oe(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:Et,default:n})),!o.isSet(t)&&!at(n)?n:o.get(t)}hasPlugin(t,n){return z(Zl(this),t)?n?wi.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Dr.show(t.getContainer()),Dr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Dr.hide(t.getContainer()),Dr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=_f(s)?s.value:s.innerHTML,i=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),i}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const i={...o,content:r};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),r=i.content,_f(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const a=Dr.getParent(n.id,"form");a&&E9(a.elements,c=>c.name===n.id?(c.value=r,!1):!0)}return i.element=o.element=s=null,i.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return jm(this,t,n)}getContent(t){return _z(this,t)}insertContent(t,n){n&&(t=Mx({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?jm(this,this.startContent,{format:"raw"}):jm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Dr.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Dr.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,i=lP(o);return He(i)?i.call(o,t,s,!0,n):!r("convert_urls")||s==="link"||Ge(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){a4(this,t)}remove(){Bz(this)}destroy(t){Iz(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Pi=ct.DOM,_u=Q.each;let Ux=!1,Su,_n=[];const wu=e=>{const t=e.type;_u(Wo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},zx=e=>{if(e!==Ux){const t=ct.DOM;e?(t.bind(window,"resize",wu),t.bind(window,"scroll",wu)):(t.unbind(window,"resize",wu),t.unbind(window,"scroll",wu)),Ux=e}},Hx=e=>{const t=_n;return _n=j(_n,n=>e!==n),Wo.activeEditor===e&&(Wo.activeEditor=_n.length>0?_n[0]:null),Wo.focusedEditor===e&&(Wo.focusedEditor=null),t.length!==_n.length},_9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Hx(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},S9=document.compatMode!=="CSS1Compat",Wo={...tg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"2.0",releaseDate:"2022-09-08",i18n:gs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=ys.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const a=r[i].src||"";if(a==="")continue;const c=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){c.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new ys(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new ys(e.baseURL),e.suffix=n,TB(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&ft(s,(o,r)=>{un.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(d,g)=>d.inline&&g.tagName.toLowerCase()in s,r=d=>{let g=d.id;return g||(g=ht(d,"name").filter(p=>!Pi.get(p)).getOrThunk(Pi.uniqueId),d.setAttribute("id",g)),g},i=d=>{const g=e[d];if(!!g)return g.apply(t,[])},a=d=>Xe.browser.isIE()||Xe.browser.isEdge()?(zc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):S9?(zc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ne(d.selector)?Pi.select(d.selector):oe(d.target)?[d.target]:[];let c=d=>{n=d};const u=()=>{let d=0;const g=[];let p;const E=(_,y,S)=>{const w=new Eu(_,y,t);g.push(w),w.on("init",()=>{++d===p.length&&c(g)}),w.targetElm=w.targetElm||S,w.render()};Pi.unbind(window,"ready",u),i("onpageload"),p=xN(a(e)),Q.each(p,_=>{_9(t.get(_.id))}),p=Q.grep(p,_=>!t.get(_.id)),p.length===0?c([]):_u(p,_=>{o(e,_)?zc("Could not initialize inline editor on invalid inline target element",_):E(r(_),e,_)})};return Pi.bind(window,"ready",u),new Promise(d=>{n?d(n):c=g=>{d(g)}})},get(e){return arguments.length===0?_n.slice(0):ne(e)?ve(_n,t=>t.id===e).getOr(null):zt(e)&&_n[e]?_n[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&_n.push(e),zx(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Su||(Su=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Su))),e},createEditor(e,t){return this.add(new Eu(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=_n.length-1;s>=0;s--)t.remove(_n[s]);return}if(ne(e)){_u(Pi.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,hn(t.get(n.id))?null:(Hx(n)&&t.dispatch("RemoveEditor",{editor:n}),_n.length===0&&window.removeEventListener("beforeunload",Su),n.remove(),zx(_n.length>0),n)},execCommand(e,t,n){var s;const o=this,r=Ge(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new Eu(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{_u(_n,e=>{e.save()})},addI18n:(e,t)=>{gs.add(e,t)},translate:e=>gs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ys(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ys(this.baseURL)}};Wo.setup();const w9=(()=>{const e=Oo(),t=r=>({items:r,types:Un(r),getType:i=>ht(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Wx=Math.min,Oi=Math.max,xu=Math.round,Vx=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,a=t.w,c=t.h,u=(n||"").split("");return u[0]==="b"&&(o+=c),u[1]==="r"&&(s+=a),u[0]==="c"&&(o+=xu(c/2)),u[1]==="c"&&(s+=xu(a/2)),u[3]==="b"&&(o-=i),u[4]==="r"&&(s-=r),u[3]==="c"&&(o-=xu(i/2)),u[4]==="c"&&(s-=xu(r/2)),Di(s,o,r,i)},x9=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Vx(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},k9=(e,t,n)=>Di(e.x-t,e.y-n,e.w+t*2,e.h+n*2),N9=(e,t)=>{const n=Oi(e.x,t.x),s=Oi(e.y,t.y),o=Wx(e.x+e.w,t.x+t.w),r=Wx(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Di(n,s,o-n,r-s)},A9=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,u=Oi(0,t.x-s),d=Oi(0,t.y-o),g=Oi(0,r-a),p=Oi(0,i-c);return s+=u,o+=d,n&&(r+=u,i+=d,s-=g,o-=p),r-=g,i-=p,Di(s,o,r-s,i-o)},Di=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),T9={inflate:k9,relativePosition:Vx,findBestRelativePosition:x9,intersect:N9,clamp:A9,create:Di,fromClientRect:e=>Di(e.left,e.top,e.width,e.height)},R9=(e,t,n=1e3)=>{let s=!1,o=null;const r=u=>(...d)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),u.apply(null,d))},i=r(e),a=r(t);return{start:(...u)=>{!s&&o===null&&(o=setTimeout(()=>a.apply(null,u),n))},resolve:i,reject:a}},P9=(()=>{const e={},t={};return{load:(r,i)=>{const a=`Script at URL "${i}" failed to load`,c=`Script at URL "${i}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const u=new Promise((d,g)=>{const p=R9(d,g);t[r]=p.resolve,mo.ScriptLoader.loadScript(i).then(()=>p.start(c),()=>p.reject(a))});return e[r]=u,u}},add:(r,i)=>{t[r]!==void 0&&(t[r](i),delete t[r]),e[r]=Promise.resolve(i)},unload:r=>{delete e[r]}}})(),O9=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let al;try{const e="__storage_test__";al=window.localStorage,al.setItem(e,e),al.removeItem(e)}catch{al=O9()}var D9=al;const B9={geom:{Rect:T9},util:{Delay:Yn,Tools:Q,VK:pe,URI:ys,EventDispatcher:eg,Observable:tg,I18n:gs,LocalStorage:D9,ImageUploader:pH},dom:{EventUtils:dr,TreeWalker:$t,TextSeeker:pr,DOMUtils:ct,ScriptLoader:mo,RangeUtils:Ci,Serializer:WE,StyleSheetLoader:gb,ControlSelection:jv,BookmarkManager:Da,Selection:HE,Event:dr.Event},html:{Styles:Lf,Entities:Ro,Node:En,Schema:Po,DomParser:_i,Writer:Ny,Serializer:Lo},Env:Xe,AddOnManager:un,Annotator:Fv,Formatter:t_,UndoManager:s_,EditorCommands:Tx,WindowManager:KE,NotificationManager:qE,EditorObservable:Dx,Shortcuts:$x,Editor:Eu,FocusManager:py,EditorManager:Wo,DOM:ct.DOM,ScriptLoader:mo.ScriptLoader,PluginManager:wi,ThemeManager:Ar,ModelManager:Si,IconManager:Mc,Resource:P9,FakeClipboard:w9,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},jx=Q.extend(Wo,B9),I9=e=>{try{l.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(jx),I9(jx)})()})(_N);const hg=_N.exports,d7={class:"vue-tinymce-comp"},bg=oN({__name:"VueTinymce",props:{modelValue:{type:String,required:!0},updateEvent:{type:String,default:"beforeaddundo undo redo keyup focusout"},url:{type:String,default:"https://unpkg.com/tinymce@%5E6.2.0"},baseUrl:{type:String,default:"https://unpkg.com"},config:{type:Object,default(){return{}}}},emits:["update:modelValue","content-change"],setup(l,{emit:f}){const m=l,h=Nq(null);let C=null,v={};function k(){if(h.value){v=Object.assign({},{allow_script_urls:!0,remove_script_host:!1,convert_urls:!1,relative_urls:!1,branding:!1,promotion:!0,indentation:"2px",font_size_formats:"12px 14px 16px 18px 20px 24px",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",contextmenu:"link image table",image_advtab:!0,menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl"},m.config);const ge=m.baseUrl,Le="zh_CN",lt="en_US";if(v.language===lt?(delete v.language,delete v.language_url):(v.language||(v.language=Le),!v.language_url&&v.language===Le&&(v.language_url=`${ge}/@panhezeng/vue-tinymce@latest/dist/langs/${v.language}.js`),!v.font_family_formats&&v.language===Le&&(v.font_family_formats='Andale Mono="andale mono", times;Arial=arial, helvetica, sans-serif;Arial Black="arial black", "avant garde";Book Antiqua="book antiqua", palatino;Comic Sans MS="comic sans ms", sans-serif;Courier New="courier new", courier;Georgia=georgia, palatino;Helvetica=helvetica;Impact=impact, chicago;Symbol=symbol;Tahoma=tahoma, arial, helvetica, sans-serif;Terminal=terminal, monaco;Times New Roman="times new roman",times;Trebuchet MS="trebuchet ms", geneva;Verdana=verdana, geneva;Webdings=webdings;Wingdings=wingdings',window.navigator.platform.indexOf("Win")>-1?(v.font_family_formats=`\u5FAE\u8F6F\u96C5\u9ED1="Microsoft YaHei";\u9ED1\u4F53=SimHei;\u5B8B\u4F53=SimSun;\u4EFF\u5B8B=FangSong;\u6977\u4F53=KaiTi;${v.font_family_formats||""}`,v.content_style='body { font-size: 14px; font-family: "Microsoft YaHei"; }'):window.navigator.platform.indexOf("Mac")>-1?(v.font_family_formats=`\u9ED1\u4F53=STHeiti;\u5B8B\u4F53=STSong;\u4EFF\u5B8B=STFangsong;\u6977\u4F53=STKaiti;${v.font_family_formats||""}`,v.content_style="body { font-size: 14px; font-family: STHeiti; }"):window.navigator.platform.indexOf("Linux")>-1&&(v.font_family_formats=`\u9ED1\u4F53="Source Han Sans SC";\u5B8B\u4F53="Source Han Serif SC";${v.font_family_formats||""}`,v.content_style='body { font-size: 14px; font-family: "Source Han Sans SC"; }'))),v.external_plugins||(v.external_plugins={}),!v.external_plugins.textindentoutdent){const Oe=Object.keys(v);for(let yt=Oe.length-1;yt>=0;yt--){const it=Oe[yt];if(it&&typeof it=="string"&&it.indexOf("toolbar")!==-1&&/\btext(indent|outdent)\b/g.test(String(v[it]))){v.language===Le&&(v.external_plugins.textindentoutdentzhcn=`${ge}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/langs/zh_CN.js`),v.external_plugins.textindentoutdent=`${ge}/@panhezeng/tinymce-plugin-text-indent-outdent@latest/dist/textindentoutdent/plugin.min.js`;break}}}v.target=h.value,v.init_instance_callback=Oe=>{h.value&&(C=Oe,P(),C.on(m.updateEvent,$),typeof m.config.init_instance_callback=="function"&&m.config.init_instance_callback(C)),Ce()}}}function P(){Lu().then(()=>{h.value&&C&&C.getContent()!==m.modelValue&&C.setContent(m.modelValue)})}function $(){Lu().then(()=>{if(h.value&&C){const ge=C.getContent();f("update:modelValue",ge),f("content-change",ge)}})}function J(){try{h.value&&C&&(C.plugins.autosave&&C.plugins.autosave.removeDraft(),hg.PluginManager.remove("autosave"),C.remove(),C.destroy(),C=null)}catch{return}}function re(){Lu().then(()=>{h.value&&(J(),k(),hg.init(v))})}ul(()=>m.modelValue,P),ul(()=>m.config,()=>{re()},{deep:!0});function Ce(){const ge=document.querySelector(".tox-promotion");ge&&(ge.style.display="none")}return Gg(()=>{hg.EditorManager.baseURL=m.url,re()}),Yg(()=>{J()}),(ge,Le)=>(ju(),hN("div",d7,[fs("textarea",{ref_key:"editorElement",ref:h},null,512)]))}}),SN=Object.assign(bg,{install:l=>{l.component(bg.name,bg)}}),m7=fs("h1",null,"VueTinymce example",-1),p7=fs("br",null,null,-1),g7=fs("br",null,null,-1),h7=fs("br",null,null,-1),b7=fs("br",null,null,-1),C7=fs("h2",null,"output",-1),v7=["innerHTML"],y7=oN({__name:"App",setup(l){const f=Xu({content:"init content",show:!0,locale:""}),m=EN(()=>{let C={};return f.locale==="en"&&(C={language:"en_US"}),C});function h(){f.locale?f.locale="":f.locale="en"}return(C,v)=>(ju(),hN(Ts,null,[m7,fs("button",{onClick:v[0]||(v[0]=k=>f.show=!f.show)}," \u70B9\u51FB\u52A0\u8F7D\u79FB\u9664\u7F16\u8F91\u5668\uFF0C\u6D4B\u8BD5\u521D\u59CB\u5316\u548C\u9500\u6BC1\uFF1A\uFF1A\uFF1A"+j9(f.show?"\u9500\u6BC1":"\u52A0\u8F7D"),1),p7,g7,fs("button",{onClick:h},"\u70B9\u51FB\u5207\u6362\u8BED\u8A00\uFF0C\u6D4B\u8BD5\u66F4\u65B0config"),h7,b7,f.show?(ju(),bN(_g(SN),{key:0,modelValue:f.content,"onUpdate:modelValue":v[1]||(v[1]=k=>f.content=k),config:_g(m)},null,8,["modelValue","config"])):RK("",!0),C7,fs("div",{innerHTML:f.content},null,8,v7)],64))}}),wN=u7(y7);wN.use(SN);wN.mount("#app");
